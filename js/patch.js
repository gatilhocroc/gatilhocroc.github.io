var CABLES=function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){"use strict";i.r(e);var s={};i.r(s),i.d(s,"getShortOpName",(function(){return _})),i.d(s,"shuffleArray",(function(){return p})),i.d(s,"shortId",(function(){return m})),i.d(s,"uuid",(function(){return T})),i.d(s,"generateUUID",(function(){return A})),i.d(s,"simpleId",(function(){return y})),i.d(s,"smoothStep",(function(){return v})),i.d(s,"smootherStep",(function(){return x})),i.d(s,"clamp",(function(){return I})),i.d(s,"map",(function(){return O})),i.d(s,"cacheBust",(function(){return R})),i.d(s,"copyArray",(function(){return S})),i.d(s,"basename",(function(){return P})),i.d(s,"jsonp",(function(){return F})),i.d(s,"ajaxSync",(function(){return C})),i.d(s,"ajax",(function(){return w})),i.d(s,"request",(function(){return M})),i.d(s,"keyCodeToName",(function(){return U})),i.d(s,"UTILS",(function(){return g}));var r={};i.r(r),i.d(r,"base64Chars",(function(){return k})),i.d(r,"base64lookup",(function(){return V})),i.d(r,"b64encTypesArray",(function(){return G})),i.d(r,"b64decTypedArray",(function(){return H}));var n={};i.r(n),i.d(n,"easeExpoIn",(function(){return K})),i.d(n,"easeExpoOut",(function(){return j})),i.d(n,"easeExpoInOut",(function(){return Q})),i.d(n,"easeCubicIn",(function(){return q})),i.d(n,"easeCubicOut",(function(){return J})),i.d(n,"easeCubicInOut",(function(){return Z})),i.d(n,"ANIM",(function(){return X})),i.d(n,"Anim",(function(){return $})),i.d(n,"TL",(function(){return tt}));var o={};i.r(o),i.d(o,"PatchConnectionReceiver",(function(){return kt})),i.d(o,"PatchConnectionSender",(function(){return Dt})),i.d(o,"PatchConnectorBroadcastChannel",(function(){return Vt}));class h{constructor(t){this._logs=[],this.initiator=t}stack(t){console.error("["+this.initiator+"] ",t),console.log((new Error).stack),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"error",t)}groupCollapsed(t){console.groupCollapsed("["+this.initiator+"] "+t)}table(t){console.table(t)}groupEnd(){console.groupEnd()}error(t){console.error("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"error",arguments)}info(t){console.error("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"info",arguments)}warn(t){console.warn("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"warn",arguments)}verbose(){(CABLES.UI&&CABLES.UI.logFilter.shouldPrint(this.initiator,...arguments)||!CABLES.logSilent)&&console.log("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"verbose",arguments)}log(t){(CABLES.UI&&CABLES.UI.logFilter.shouldPrint(this.initiator,...arguments)||!CABLES.logSilent)&&console.log("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"log",arguments)}userInteraction(t){}}const a={EASINGS:["linear","absolute","smoothstep","smootherstep","Cubic In","Cubic Out","Cubic In Out","Expo In","Expo Out","Expo In Out","Sin In","Sin Out","Sin In Out","Quart In","Quart Out","Quart In Out","Quint In","Quint Out","Quint In Out","Back In","Back Out","Back In Out","Elastic In","Elastic Out","Bounce In","Bounce Out"],EASING_LINEAR:0,EASING_ABSOLUTE:1,EASING_SMOOTHSTEP:2,EASING_SMOOTHERSTEP:3,EASING_CUBICSPLINE:4,EASING_CUBIC_IN:5,EASING_CUBIC_OUT:6,EASING_CUBIC_INOUT:7,EASING_EXPO_IN:8,EASING_EXPO_OUT:9,EASING_EXPO_INOUT:10,EASING_SIN_IN:11,EASING_SIN_OUT:12,EASING_SIN_INOUT:13,EASING_BACK_IN:14,EASING_BACK_OUT:15,EASING_BACK_INOUT:16,EASING_ELASTIC_IN:17,EASING_ELASTIC_OUT:18,EASING_BOUNCE_IN:19,EASING_BOUNCE_OUT:21,EASING_QUART_IN:22,EASING_QUART_OUT:23,EASING_QUART_INOUT:24,EASING_QUINT_IN:25,EASING_QUINT_OUT:26,EASING_QUINT_INOUT:27},l={OP_PORT_TYPE_VALUE:0,OP_PORT_TYPE_FUNCTION:1,OP_PORT_TYPE_OBJECT:2,OP_PORT_TYPE_TEXTURE:2,OP_PORT_TYPE_ARRAY:3,OP_PORT_TYPE_DYNAMIC:4,OP_PORT_TYPE_STRING:5,OP_VERSION_PREFIX:"_v"},c={PORT_DIR_IN:0,PORT_DIR_OUT:1},u={PACO_CLEAR:0,PACO_VALUECHANGE:1,PACO_OP_DELETE:2,PACO_UNLINK:3,PACO_LINK:4,PACO_LOAD:5,PACO_OP_CREATE:6,PACO_OP_ENABLE:7,PACO_OP_DISABLE:8,PACO_UIATTRIBS:9,PACO_VARIABLES:10,PACO_TRIGGERS:11,PACO_PORT_SETVARIABLE:12,PACO_PORT_SETANIMATED:13,PACO_PORT_ANIM_UPDATED:14,PACO_DESERIALIZE:15},g={float32Concat:function(t,e){t instanceof Float32Array||(t=new Float32Array(t)),e instanceof Float32Array||(e=new Float32Array(e));const i=new Float32Array(t.length+e.length);return i.set(t),i.set(e,t.length),i}},_=function(t){let e=t.split(".")[t.split(".").length-1];if(e.indexOf(l.OP_VERSION_PREFIX)>0){const t=e.split(l.OP_VERSION_PREFIX)[1];e=e.substring(0,e.length-(l.OP_VERSION_PREFIX+t).length)}return e},p=function(t){for(let e=t.length-1;e>0;e--){const i=Math.floor(Math.seededRandom()*(e+1)),s=t[e];t[e]=t[i],t[i]=s}return t},d={},f=function(){let t=Math.random().toString(36).substr(2,9);return d.hasOwnProperty(t)&&(t=f()),d[t]=!0,t},m=f,E=function(){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)})},T=E,A=E;let b=0;const y=function(){return b++,b},v=function(t){const e=Math.max(0,Math.min(1,(t-0)/1));return t=e*e*(3-2*e)},x=function(t){const e=Math.max(0,Math.min(1,(t-0)/1));return t=e*e*e*(e*(6*e-15)+10)},I=function(t,e,i){return Math.min(Math.max(t,e),i)},O=function(t,e,i,s,r,n){if(t>=i)return r;if(t<=e)return s;let o=!1;const h=Math.min(e,i),a=Math.max(e,i);h!=e&&(o=!0);let l=!1;const c=Math.min(s,r),u=Math.max(s,r);c!=s&&(l=!0);let g=0,_=0;return g=o?(a-t)*(u-c)/(a-h):(t-h)*(u-c)/(a-h),_=l?u-g:g+c,n?1==n?s+(t=Math.max(0,Math.min(1,(_-s)/(r-s))))*t*(3-2*t)*(r-s):2==n?s+(t=Math.max(0,Math.min(1,(_-s)/(r-s))))*t*t*(t*(6*t-15)+10)*(r-s):_:_};Math.randomSeed=1,Math.seededRandom=function(t,e){0===Math.randomSeed&&(Math.randomSeed=999*Math.random()),t=t||1,e=e||0,Math.randomSeed=(9301*Math.randomSeed+49297)%233280;return e+Math.randomSeed/233280*(t-e)},g.arrayWriteToEnd=function(t,e){for(let e=1;e<t.length;e++)t[e-1]=t[e];t[t.length-1]=e},g.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},String.prototype.endl=function(){return this+"\n"},String.prototype.startsWith=function(t){return 0===this.indexOf(t)},String.prototype.endsWith=function(t){return this.match(t+"$")==t};const R=function(t){return t.indexOf("?")>-1?t+="&":t+="?",t+"cb="+CABLES.uuid()},S=function(t,e){if(!t)return null;(e=e||[]).length=t.length;for(let i=0;i<t.length;i++)e[i]=t[i];return e},P=function(t){let e="";if(!t)return"";const i=(t+"").split("/");if(i.length>0){let t=i[i.length-1].split("?");e=t[0],t=e.split("."),e=t[0]}return e};let N=null;const F=function(t,e){N=N||0,N++;const i=N;CABLES["jsonpFunc"+i]=function(t){e(!1,t)};let s="?";t.indexOf(s)>-1&&(s="&");const r=document.createElement("script");r.setAttribute("src",t+s+"callback=CABLES.jsonpFunc"+i),document.body.appendChild(r)},C=function(t,e,i,s,r){M({url:t,cb:e,method:i,data:s,contenttype:r,sync:!0})},w=function(t,e,i,s,r,n,o={}){M({url:t,cb:e,method:i,data:s,contenttype:r,sync:!1,jsonP:n,headers:o})},M=function(t){let e;t.hasOwnProperty("asynch")||(t.asynch=!0);try{e=new XMLHttpRequest}catch(t){}if(e.onreadystatechange=function(){4==e.readyState&&t.cb&&(200==e.status||0==e.status?t.cb(!1,e.responseText,e):t.cb(!0,e.responseText,e))},e.addEventListener("progress",t=>{}),e.open(t.method?t.method.toUpperCase():"GET",t.url,!t.sync),"object"==typeof t.headers){const i=Object.keys(t.headers);for(let s=0;s<i.length;s++){const r=i[s],n=t.headers[r];e.setRequestHeader(r,n)}}t.post||t.data?(e.setRequestHeader("Content-type",t.contenttype?t.contenttype:"application/x-www-form-urlencoded"),e.send(t.data||t.post)):e.send()},U=function(t){if(!t&&0!==t)return"Unidentified";const e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};return e[t]?e[t]:String.fromCharCode(t)};window.performance=window.performance||{offset:Date.now(),now:function(){return Date.now()-this.offset}};const L=function(t,e){if(!t)throw new Error("no cgl");this._log=new h("cgl_texture"),this._cgl=t,this.tex=this._cgl.gl.createTexture(),this.id=T(),this.width=0,this.height=0,this.loading=!1,this.flip=!0,this.flipped=!1,this.shadowMap=!1,this.deleted=!1,this.image=null,this.anisotropic=0,this.filter=L.FILTER_NEAREST,this.wrap=L.WRAP_CLAMP_TO_EDGE,this.texTarget=this._cgl.gl.TEXTURE_2D,e&&e.type&&(this.texTarget=e.type),this.textureType=L.TYPE_DEFAULT,this.unpackAlpha=!0,this._fromData=!0,this.name="unknown",e?(this.name=e.name||this.name,e.isDepthTexture&&(this.textureType=L.TYPE_DEPTH),e.isFloatingPointTexture&&(this.textureType=L.TYPE_FLOAT),"textureType"in e&&(this.textureType=e.textureType),"filter"in e&&(this.filter=e.filter),"wrap"in e&&(this.wrap=e.wrap),"unpackAlpha"in e&&(this.unpackAlpha=e.unpackAlpha),"flip"in e&&(this.flip=e.flip),"shadowMap"in e&&(this.shadowMap=e.shadowMap),"anisotropic"in e&&(this.anisotropic=e.anisotropic)):e={},e.width||(e.width=8),e.height||(e.height=8),this._cgl.profileData.profileTextureNew++,this._cgl.profileData.addHeavyEvent("texture created",this.name,e.width+"x"+e.height),this.setSize(e.width,e.height),this.getInfoOneLine()};L.prototype.isFloatingPoint=function(){return this.textureType==L.TYPE_FLOAT},L.prototype.compareSettings=function(t){return!!t&&(t.width==this.width&&t.height==this.height&&t.filter==this.filter&&t.wrap==this.wrap&&t.textureType==this.textureType&&t.unpackAlpha==this.unpackAlpha&&t.anisotropic==this.anisotropic&&t.shadowMap==this.shadowMap&&t.texTarget==this.texTarget&&t.flip==this.flip)},L.prototype.clone=function(){const t=new L(this._cgl,{name:this.name,filter:this.filter,wrap:this.wrap,textureType:this.textureType,unpackAlpha:this.unpackAlpha,flip:this.flip,width:this.width,height:this.height});return this._cgl.profileData.addHeavyEvent("texture created",this.name,this.width+"x"+this.height),this.compareSettings(t)||(this._log.error("Cloned texture settings do not compare!"),this._log.error(this),this._log.error(t)),t},L.prototype.setSize=function(t,e){if((t!=t||t<=0||!t)&&(t=8),(e!=e||e<=0||!e)&&(e=8),(t>this._cgl.maxTexSize||e>this._cgl.maxTexSize)&&this._log.error("texture size too big! "+t+"x"+e+" / max: "+this._cgl.maxTexSize),t=Math.min(t,this._cgl.maxTexSize),e=Math.min(e,this._cgl.maxTexSize),t=Math.floor(t),e=Math.floor(e),this.width==t&&this.height==e)return;this.width=t,this.height=e,this.deleted=!1,this.shortInfoString=this.getInfoOneLine(),this._cgl.gl.bindTexture(this.texTarget,this.tex),this._cgl.profileData.profileTextureResize++;if(this._cgl.patch.config.canvas.forceTextureNearest&&(this.filter=L.FILTER_NEAREST),1!=this._cgl.glVersion||this.textureType!=L.TYPE_FLOAT||this.filter!=L.FILTER_LINEAR||this._cgl.gl.getExtension("OES_texture_float_linear")||(console.warn("this graphics card does not support floating point texture linear interpolation! using NEAREST"),this.filter=L.FILTER_NEAREST),this.textureType==L.TYPE_FLOAT)if(1==this._cgl.glVersion)if(this._cgl.glUseHalfFloatTex){const i=this._cgl.gl.getExtension("OES_texture_half_float");this._cgl.gl.getExtension("EXT_color_buffer_half_float");if(!i)throw new Error("no half float texture extension");this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,t,e,0,this._cgl.gl.RGBA,i.HALF_FLOAT_OES,null)}else this._cgl.gl.getExtension("OES_texture_float"),this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,t,e,0,this._cgl.gl.RGBA,this._cgl.gl.FLOAT,null);else if(this._cgl.glUseHalfFloatTex){if(!this._cgl.gl.getExtension("EXT_color_buffer_half_float"))throw new Error("no half float texture extension");console.log("half float",this._cgl.gl.RGBA16F,this._cgl.gl.HALF_FLOAT),console.log("half float",this._cgl.gl.HALF_FLOAT),console.log("half float",this._cgl.gl.RGBA16F),this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,t,e,0,this._cgl.gl.RGBA,this._cgl.gl.HALF_FLOAT,null)}else this._cgl.gl.getExtension("EXT_color_buffer_float"),this._cgl.gl.getExtension("EXT_color_buffer_float_linear"),this._cgl.gl.getExtension("OES_texture_float_linear"),this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA32F,t,e,0,this._cgl.gl.RGBA,this._cgl.gl.FLOAT,null);else if(this.textureType==L.TYPE_DEPTH)if(1==this._cgl.glVersion){const i=this._cgl.gl.DEPTH_COMPONENT;this._cgl.gl.texImage2D(this.texTarget,0,i,t,e,0,this._cgl.gl.DEPTH_COMPONENT,this._cgl.gl.UNSIGNED_SHORT,null)}else{const i=this._cgl.gl.DEPTH_COMPONENT32F;this._cgl.gl.texImage2D(this.texTarget,0,i,t,e,0,this._cgl.gl.DEPTH_COMPONENT,this._cgl.gl.FLOAT,null)}else this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,t,e,0,this._cgl.gl.RGBA,this._cgl.gl.UNSIGNED_BYTE,null);this._setFilter(),this.updateMipMap(),this._cgl.gl.bindTexture(this.texTarget,null)},L.prototype.initFromData=function(t,e,i,s,r){if(this.filter=s,this.wrap=r,null==s&&(this.filter=L.FILTER_LINEAR),null==r&&(this.wrap=L.WRAP_CLAMP_TO_EDGE),this.width=e,this.height=i,this._fromData=!0,this.deleted=!1,this.height>this._cgl.maxTexSize||this.width>this._cgl.maxTexSize){const t=CGL.Texture.getTempTexture(this._cgl);return this.width=t.width,this.height=t.height,this.tex=t.tex,void this._log.error("[cgl_texture] texture size to big!!!",this.width,this.height,this._cgl.maxTexSize)}this.flip&&this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_FLIP_Y_WEBGL,this.flip),this._cgl.gl.bindTexture(this.texTarget,this.tex),this.textureType==L.TYPE_FLOAT?this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA32F,e,i,0,this._cgl.gl.RGBA,this._cgl.gl.FLOAT,t):this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,e,i,0,this._cgl.gl.RGBA,this._cgl.gl.UNSIGNED_BYTE,t),this._setFilter(),this.updateMipMap(),this.flip&&this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_FLIP_Y_WEBGL,!1),this._cgl.gl.bindTexture(this.texTarget,null)},L.prototype.updateMipMap=function(){2!=this._cgl.glVersion&&!this.isPowerOfTwo()||this.filter!=L.FILTER_MIPMAP||(this._cgl.gl.generateMipmap(this.texTarget),this._cgl.profileData.profileGenMipMap++)},L.prototype.initTexture=function(t,e){if(this._cgl.printError("before initTexture"),this._cgl.checkFrameStarted("texture inittexture"),this._fromData=!1,this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.unpackAlpha),t.width&&(this.width=t.width),t.height&&(this.height=t.height),e&&(this.filter=e),t.height>this._cgl.maxTexSize||t.width>this._cgl.maxTexSize){const e=CGL.Texture.getTempTexture(this._cgl);return this.width=e.width,this.height=e.height,this.tex=e.tex,void this._log.error("[cgl_texture] texture size to big!!!",t.width,t.height,this._cgl.maxTexSize)}this._cgl.gl.bindTexture(this.texTarget,this.tex),this.deleted=!1,this.flipped=!this.flip,this.flipped&&this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_FLIP_Y_WEBGL,this.flipped),this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,this._cgl.gl.RGBA,this._cgl.gl.UNSIGNED_BYTE,t),this._setFilter(),this.updateMipMap(),this._cgl.gl.bindTexture(this.texTarget,null),this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.flipped&&this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_FLIP_Y_WEBGL,!1),this.getInfoOneLine(),this._cgl.printError("initTexture")},L.prototype.delete=function(){this.loading||(this.deleted=!0,this.width=0,this.height=0,this._cgl.profileData.profileTextureDelete++,this._cgl.gl.deleteTexture(this.tex),this.image=null,this.tex=null)},L.prototype.isPowerOfTwo=function(){return L.isPowerOfTwo(this.width)&&L.isPowerOfTwo(this.height)},L.prototype.printInfo=function(){console.log(this.getInfo())},L.prototype.getInfoReadable=function(){const t=this.getInfo();let e="";t.name=t.name.substr(0,t.name.indexOf("?rnd="));for(const i in t)e+="* "+i+":  **"+t[i]+"**\n";return e},L.prototype.getInfoOneLine=function(){let t=this.width+" x "+this.height;return this.textureType===CGL.Texture.TYPE_FLOAT?t+=" 32bit":t+=" 8bit",this.filter===CGL.Texture.FILTER_NEAREST&&(t+=" nearest"),this.filter===CGL.Texture.FILTER_LINEAR&&(t+=" linear"),this.filter===CGL.Texture.FILTER_MIPMAP&&(t+=" mipmap"),this.wrap===CGL.Texture.WRAP_CLAMP_TO_EDGE&&(t+=" clamp"),this.wrap===CGL.Texture.WRAP_REPEAT&&(t+=" repeat"),this.wrap===CGL.Texture.WRAP_MIRRORED_REPEAT&&(t+=" repeatmir"),this.shortInfoString=t,t},L.prototype.getInfo=function(){const t={};t.name=this.name,t["power of two"]=this.isPowerOfTwo(),t.size=this.width+" x "+this.height;let e=this.texTarget;return this.texTarget==this._cgl.gl.TEXTURE_2D&&(e="TEXTURE_2D"),t.target=e,t.unpackAlpha=this.unpackAlpha,this.textureType==L.TYPE_FLOAT?t.textureType="TYPE_FLOAT":this.textureType==L.TYPE_DEPTH?t.textureType="TYPE_DEPTH":this.textureType==L.TYPE_DEFAULT?t.textureType="TYPE_DEFAULT":t.textureType="UNKNOWN",this.wrap==L.WRAP_CLAMP_TO_EDGE?t.wrap="CLAMP_TO_EDGE":this.wrap==L.WRAP_REPEAT?t.wrap="WRAP_REPEAT":this.wrap==L.WRAP_MIRRORED_REPEAT?t.wrap="WRAP_MIRRORED_REPEAT":t.wrap="UNKNOWN",this.filter==L.FILTER_NEAREST?t.filter="FILTER_NEAREST":this.filter==L.FILTER_LINEAR?t.filter="FILTER_LINEAR":this.filter==L.FILTER_MIPMAP?t.filter="FILTER_MIPMAP":t.filter="UNKNOWN",t},L.prototype._setFilter=function(){if(this._cgl.printError("before _setFilter"),this._fromData||this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.unpackAlpha),this.shadowMap&&(this._cgl.gl.texParameteri(this._cgl.gl.TEXTURE_2D,this._cgl.gl.TEXTURE_COMPARE_MODE,this._cgl.gl.COMPARE_REF_TO_TEXTURE),this._cgl.gl.texParameteri(this._cgl.gl.TEXTURE_2D,this._cgl.gl.TEXTURE_COMPARE_FUNC,this._cgl.gl.LEQUAL)),this.textureType==L.TYPE_FLOAT&&this.filter==L.FILTER_MIPMAP&&(this.filter=L.FILTER_LINEAR,this._log.stack("texture: HDR and mipmap filtering at the same time is not possible")),1!=this._cgl.glVersion||this.isPowerOfTwo()){if(this.wrap==L.WRAP_CLAMP_TO_EDGE?(this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.CLAMP_TO_EDGE),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.CLAMP_TO_EDGE)):this.wrap==L.WRAP_REPEAT?(this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.REPEAT),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.REPEAT)):this.wrap==L.WRAP_MIRRORED_REPEAT&&(this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.MIRRORED_REPEAT),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.MIRRORED_REPEAT)),this.filter==L.FILTER_NEAREST)this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.NEAREST),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.NEAREST);else if(this.filter==L.FILTER_LINEAR)this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.LINEAR),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.LINEAR);else{if(this.filter!=L.FILTER_MIPMAP)throw this._log.log("unknown texture filter!",this.filter),new Error("unknown texture filter!"+this.filter);this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.LINEAR),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.LINEAR_MIPMAP_LINEAR)}if(this.anisotropic){const t=this._cgl.gl.getExtension("EXT_texture_filter_anisotropic");if(t){const e=this._cgl.gl.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this._cgl.gl.texParameterf(this._cgl.gl.TEXTURE_2D,t.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e,this.anisotropic))}}}else this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.NEAREST),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.NEAREST),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.CLAMP_TO_EDGE),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.CLAMP_TO_EDGE),this.filter=L.FILTER_NEAREST,this.wrap=L.WRAP_CLAMP_TO_EDGE;this.getInfoOneLine(),this._cgl.printError("_setFilter")},L.load=function(t,e,i,s){if(!e)return i({error:!0});let r=null;t.patch.loading.existByName(e)||(r=t.patch.loading.start("texture",e));const n=new L(t);return n.name=e,t.patch.isEditorMode()&&gui.jobs().start({id:"loadtexture"+r,title:"loading texture "+CABLES.basename(e)}),n.image=new Image,n.image.crossOrigin="anonymous",n.loading=!0,s&&s.hasOwnProperty("filter")&&(n.filter=s.filter),s&&s.hasOwnProperty("flip")&&(n.flip=s.flip),s&&s.hasOwnProperty("wrap")&&(n.wrap=s.wrap),s&&s.hasOwnProperty("anisotropic")&&(n.anisotropic=s.anisotropic),s&&s.hasOwnProperty("unpackAlpha")&&(n.unpackAlpha=s.unpackAlpha),n.image.onabort=n.image.onerror=s=>{console.warn("[cgl.texture.load] error loading texture",e,s),n.loading=!1,r&&t.patch.loading.finished(r);i&&i({error:!0},n),t.patch.isEditorMode()&&gui.jobs().finish("loadtexture"+r)},n.image.onload=function(e){t.addNextFrameOnceCallback(()=>{n.initTexture(n.image),r&&t.patch.loading.finished(r),n.loading=!1,t.patch.isEditorMode()&&gui.jobs().finish("loadtexture"+r),i&&i(null,n)})},n.image.src=e,n},L.getTempTexture=function(t){return t||console.error("[getTempTexture] no cgl!"),t.tempTexture||(t.tempTexture=L.getTemporaryTexture(t,256,L.FILTER_LINEAR,L.REPEAT)),t.tempTexture},L.getEmptyTexture=function(t,e){if(e)return L.getEmptyTextureFloat(t);if(t||console.error("[getEmptyTexture] no cgl!"),t.tempTextureEmpty)return t.tempTextureEmpty;t.tempTextureEmpty=new L(t,{name:"emptyTexture"});const i=new Uint8Array(256).fill(0);for(let t=0;t<256;t+=4)i[t+3]=0;return t.tempTextureEmpty.initFromData(i,8,8,L.FILTER_NEAREST,L.WRAP_REPEAT),t.tempTextureEmpty},L.getEmptyTextureFloat=function(t){if(t||console.error("[getEmptyTextureFloat] no cgl!"),t.tempTextureEmptyFloat)return t.tempTextureEmptyFloat;t.tempTextureEmptyFloat=new L(t,{name:"emptyTexture",isFloatingPointTexture:!0});const e=new Float32Array(256).fill(1);for(let t=0;t<256;t+=4)e[t+3]=0;return t.tempTextureEmptyFloat.initFromData(e,8,8,L.FILTER_NEAREST,L.WRAP_REPEAT),t.tempTextureEmptyFloat},L.getRandomTexture=function(t){if(t||console.error("[getRandomTexture] no cgl!"),t.randomTexture)return t.randomTexture;const e=new Uint8Array(262144);for(let t=0;t<65536;t++)e[4*t+0]=255*Math.random(),e[4*t+1]=255*Math.random(),e[4*t+2]=255*Math.random(),e[4*t+3]=255;return t.randomTexture=new L(t),t.randomTexture.initFromData(e,256,256,L.FILTER_NEAREST,L.WRAP_REPEAT),t.randomTexture},L.getBlackTexture=function(t){if(t||this._log.error("[getBlackTexture] no cgl!"),t.blackTexture)return t.blackTexture;const e=new Uint8Array(256);for(let t=0;t<64;t++)e[4*t+0]=e[4*t+1]=e[4*t+2]=0,e[4*t+3]=255;return t.blackTexture=new L(t),t.blackTexture.initFromData(e,8,8,L.FILTER_NEAREST,L.WRAP_REPEAT),t.blackTexture},L.getEmptyCubemapTexture=function(t){const e=[t.gl.TEXTURE_CUBE_MAP_POSITIVE_X,t.gl.TEXTURE_CUBE_MAP_NEGATIVE_X,t.gl.TEXTURE_CUBE_MAP_POSITIVE_Y,t.gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.gl.TEXTURE_CUBE_MAP_POSITIVE_Z,t.gl.TEXTURE_CUBE_MAP_NEGATIVE_Z],i=t.gl.createTexture(),s=t.gl.TEXTURE_CUBE_MAP,r=L.FILTER_NEAREST,n=L.WRAP_CLAMP_TO_EDGE;t.profileData.profileTextureNew++,t.gl.bindTexture(s,i),t.profileData.profileTextureResize++;for(let i=0;i<6;i+=1){const r=new Uint8Array(256);t.gl.texImage2D(e[i],0,t.gl.RGBA,8,8,0,t.gl.RGBA,t.gl.UNSIGNED_BYTE,r),t.gl.texParameteri(s,t.gl.TEXTURE_MAG_FILTER,t.gl.NEAREST),t.gl.texParameteri(s,t.gl.TEXTURE_MIN_FILTER,t.gl.NEAREST),t.gl.texParameteri(s,t.gl.TEXTURE_WRAP_S,t.gl.CLAMP_TO_EDGE),t.gl.texParameteri(s,t.gl.TEXTURE_WRAP_T,t.gl.CLAMP_TO_EDGE)}return t.gl.bindTexture(s,null),{id:CABLES.uuid(),tex:i,cubemap:i,width:8,height:8,filter:r,wrap:n,unpackAlpha:!0,flip:!0,_fromData:!0,name:"emptyCubemapTexture",anisotropic:0}},L.getTempGradientTexture=function(t){if(t||console.error("[getTempGradientTexture] no cgl!"),t.tempTextureGradient)return t.tempTextureGradient;const e=new L(t),i=new Uint8Array(262144);for(let t=0;t<256;t++)for(let e=0;e<256;e++)i[4*(e+256*t)+0]=i[4*(e+256*t)+1]=i[4*(e+256*t)+2]=255-t,i[4*(e+256*t)+3]=255;return e.initFromData(i,256,256,L.FILTER_NEAREST,L.WRAP_REPEAT),t.tempTextureGradient=e,e},L.getTemporaryTexture=function(t,e,i,s){const r=new L(t),n=[];for(let t=0;t<e;t++)for(let i=0;i<e;i++)(i+t)%64<32?(n.push(200+t/e*25+i/e*25),n.push(200+t/e*25+i/e*25),n.push(200+t/e*25+i/e*25)):(n.push(40+t/e*25+i/e*25),n.push(40+t/e*25+i/e*25),n.push(40+t/e*25+i/e*25)),n.push(255);const o=new Uint8Array(n);return r.initFromData(o,e,e,i,s),r},L.createFromImage=function(t,e,i){const s=new L(t,i=i||{});return s.flip=!1,s.image=e,s.width=e.width,s.height=e.height,s.initTexture(e,i.filter),s},L.fromImage=function(t,e,i,s){console.error("deprecated texture from image...");const r=new L(t);return r.flip=!1,i&&(r.filter=i),s&&(r.wrap=s),r.image=e,r.initTexture(e),r},L.isPowerOfTwo=function(t){return 1==t||2==t||4==t||8==t||16==t||32==t||64==t||128==t||256==t||512==t||1024==t||2048==t||4096==t||8192==t||16384==t},L.FILTER_NEAREST=0,L.FILTER_LINEAR=1,L.FILTER_MIPMAP=2,L.WRAP_REPEAT=0,L.WRAP_MIRRORED_REPEAT=1,L.WRAP_CLAMP_TO_EDGE=2,L.TYPE_DEFAULT=0,L.TYPE_DEPTH=1,L.TYPE_FLOAT=2,L.PFORMATSTR_RGBA32F="RGBA 32bit float",L.PFORMATSTR_RGBA8UB="RGBA 8bit ubyte",L.PIXELFORMATS=[L.PFORMATSTR_RGBA8UB,L.PFORMATSTR_RGBA32F];const B=function(t,e,i,s){this._log=new h("cgl_framebuffer2"),this.Framebuffer2DrawTargetsDefault=null,this.Framebuffer2BlittingFramebuffer=null,this.Framebuffer2FinalFramebuffer=null,this._cgl=t,this._cgl.printError("before framebuffer2 constructor"),this._width=0,this._height=0,this._depthRenderbuffer=null,this._frameBuffer=null,this._textureFrameBuffer=null,this._colorRenderbuffers=[],this._drawTargetArray=[],this.Framebuffer2BlittingFramebuffer||(this.Framebuffer2BlittingFramebuffer=t.gl.createFramebuffer()),this.Framebuffer2FinalFramebuffer||(this.Framebuffer2FinalFramebuffer=t.gl.createFramebuffer()),this.Framebuffer2DrawTargetsDefault||(this.Framebuffer2DrawTargetsDefault=[t.gl.COLOR_ATTACHMENT0]),this._options=s||{isFloatingPointTexture:!1},this.name=this._options.name||"unknown",this._cgl.profileData.addHeavyEvent("framebuffer create",this.name),this._options.hasOwnProperty("numRenderBuffers")||(this._options.numRenderBuffers=1),this._options.hasOwnProperty("depth")||(this._options.depth=!0),this._options.hasOwnProperty("clear")||(this._options.clear=!0),this._options.hasOwnProperty("multisampling")||(this._options.multisampling=!1,this._options.multisamplingSamples=0),this._options.multisamplingSamples&&(this._cgl.glSlowRenderer&&(this._options.multisamplingSamples=0),this._cgl.gl.MAX_SAMPLES?this._options.multisamplingSamples=Math.min(this._cgl.maxSamples,this._options.multisamplingSamples):this._options.multisamplingSamples=0),this._options.hasOwnProperty("filter")||(this._options.filter=L.FILTER_LINEAR),this._options.hasOwnProperty("wrap")||(this._options.wrap=L.WRAP_REPEAT),this._numRenderBuffers=this._options.numRenderBuffers,this._colorTextures=[];for(let e=0;e<this._numRenderBuffers;e++)this._colorTextures[e]=new L(t,{name:"fb2 "+this.name+" "+e,isFloatingPointTexture:this._options.isFloatingPointTexture,filter:this._options.filter,wrap:this._options.wrap});let r=L.FILTER_NEAREST;this._options.shadowMap&&(r=L.FILTER_LINEAR);this._options.depth&&(this._textureDepth=new L(t,{name:"fb2 depth "+this.name,isDepthTexture:!0,filter:r,shadowMap:this._options.shadowMap||!1,width:e||512,height:i||512})),t.aborted||(this.setSize(e||512,i||512),this._cgl.printError("framebuffer2 constructor"))};B.prototype.getWidth=function(){return this._width},B.prototype.getHeight=function(){return this._height},B.prototype.getGlFrameBuffer=function(){return this._frameBuffer},B.prototype.getDepthRenderBuffer=function(){return this._depthRenderbuffer},B.prototype.getTextureColor=function(){return this._colorTextures[0]},B.prototype.getTextureColorNum=function(t){return this._colorTextures[t]},B.prototype.getTextureDepth=function(){return this._textureDepth},B.prototype.setFilter=function(t){for(let e=0;e<this._numRenderBuffers;e++)this._colorTextures[e].filter=t,this._colorTextures[e].setSize(this._width,this._height)},B.prototype.delete=B.prototype.dispose=function(){let t=0;for(t=0;t<this._numRenderBuffers;t++)this._colorTextures[t].delete();for(this._textureDepth&&this._textureDepth.delete(),t=0;t<this._numRenderBuffers;t++)this._cgl.gl.deleteRenderbuffer(this._colorRenderbuffers[t]);this._cgl.gl.deleteRenderbuffer(this._depthRenderbuffer),this._cgl.gl.deleteFramebuffer(this._frameBuffer),this._cgl.gl.deleteFramebuffer(this._textureFrameBuffer)},B.prototype.setSize=function(t,e){this._cgl.profileData.addHeavyEvent("framebuffer resize",this.name);let i=0;if(this._width=Math.floor(t),this._height=Math.floor(e),this._width=Math.min(this._width,this._cgl.maxTexSize),this._height=Math.min(this._height,this._cgl.maxTexSize),this._cgl.profileData.profileFrameBuffercreate++,this._frameBuffer){for(i=0;i<this._numRenderBuffers;i++)this._cgl.gl.deleteRenderbuffer(this._colorRenderbuffers[i]);this._cgl.gl.deleteRenderbuffer(this._depthRenderbuffer),this._cgl.gl.deleteFramebuffer(this._frameBuffer),this._cgl.gl.deleteFramebuffer(this._textureFrameBuffer)}this._frameBuffer=this._cgl.gl.createFramebuffer(),this._textureFrameBuffer=this._cgl.gl.createFramebuffer();const s=this._options.depth;for(i=0;i<this._numRenderBuffers;i++)this._colorTextures[i].setSize(this._width,this._height);for(i=0;i<this._numRenderBuffers;i++){const t=this._cgl.gl.createRenderbuffer();this._cgl.gl.getExtension("EXT_color_buffer_float");if(this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._frameBuffer),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,t),this._options.isFloatingPointTexture){this._cgl.gl.getExtension("EXT_color_buffer_float"),this._cgl.gl.getExtension("EXT_color_buffer_float_linear"),this._cgl.gl.getExtension("OES_texture_float_linear");if(this._options.multisampling&&this._options.multisamplingSamples)this._cgl.gl.renderbufferStorageMultisample(this._cgl.gl.RENDERBUFFER,this._options.multisamplingSamples,this._cgl.gl.RGBA32F,this._width,this._height);else{let t=this._cgl.gl.RGBA32F;this._cgl._isSafariCrap&&(t=this._cgl.gl.RGBA16F),this._cgl.gl.renderbufferStorage(this._cgl.gl.RENDERBUFFER,t,this._width,this._height)}}else this._options.multisampling&&this._options.multisamplingSamples?this._cgl.gl.renderbufferStorageMultisample(this._cgl.gl.RENDERBUFFER,this._options.multisamplingSamples,this._cgl.gl.RGBA8,this._width,this._height):this._cgl.gl.renderbufferStorage(this._cgl.gl.RENDERBUFFER,this._cgl.gl.RGBA8,this._width,this._height);this._cgl.gl.framebufferRenderbuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.COLOR_ATTACHMENT0+i,this._cgl.gl.RENDERBUFFER,t),this._colorRenderbuffers[i]=t}for(this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._textureFrameBuffer),i=0;i<this._numRenderBuffers;i++)this._cgl.gl.framebufferTexture2D(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.COLOR_ATTACHMENT0+i,this._cgl.gl.TEXTURE_2D,this._colorTextures[i].tex,0);this._options.depth&&this._cgl.gl.framebufferTexture2D(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.DEPTH_ATTACHMENT,this._cgl.gl.TEXTURE_2D,this._textureDepth.tex,0),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._frameBuffer);let r=this._cgl.gl.DEPTH_COMPONENT32F;for(this._cgl.glSlowRenderer&&(r=this._cgl.gl.DEPTH_COMPONENT16),s&&(this._textureDepth.setSize(this._width,this._height),this._depthRenderbuffer=this._cgl.gl.createRenderbuffer(),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,this._depthRenderbuffer),this._options.isFloatingPointTexture,this._options.multisampling?this._cgl.gl.renderbufferStorageMultisample(this._cgl.gl.RENDERBUFFER,this._options.multisamplingSamples,r,this._width,this._height):this._cgl.gl.renderbufferStorage(this._cgl.gl.RENDERBUFFER,r,this._width,this._height),this._cgl.gl.framebufferRenderbuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.DEPTH_ATTACHMENT,this._cgl.gl.RENDERBUFFER,this._depthRenderbuffer)),this._drawTargetArray.length=0,i=0;i<this._numRenderBuffers;i++)this._drawTargetArray.push(this._cgl.gl.COLOR_ATTACHMENT0+i);this._cgl.gl.isFramebuffer(this._textureFrameBuffer)||this._this._log.warn("invalid framebuffer");const n=this._cgl.gl.checkFramebufferStatus(this._cgl.gl.FRAMEBUFFER);if(n!=this._cgl.gl.FRAMEBUFFER_COMPLETE)switch(this._log.error("framebuffer incomplete: "+this.name,this),n){case this._cgl.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw this._log.warn("FRAMEBUFFER_INCOMPLETE_ATTACHMENT...",this),new Error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");case this._cgl.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw this._log.warn("FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"),new Error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");case this._cgl.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw this._log.warn("FRAMEBUFFER_INCOMPLETE_DIMENSIONS"),new Error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");case this._cgl.gl.FRAMEBUFFER_UNSUPPORTED:throw this._log.warn("FRAMEBUFFER_UNSUPPORTED"),new Error("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");default:throw this._log.warn("incomplete framebuffer",n),new Error("Incomplete framebuffer: "+n)}this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,null),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,null)},B.prototype.renderStart=function(){this._cgl.checkFrameStarted("fb2 renderstart"),this._cgl.pushModelMatrix(),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._frameBuffer),this._cgl.pushGlFrameBuffer(this._frameBuffer),this._cgl.pushFrameBuffer(this),this._cgl.pushPMatrix(),this._cgl.gl.viewport(0,0,this._width,this._height),this._cgl.gl.drawBuffers(this._drawTargetArray),this._options.clear&&(this._cgl.gl.clearColor(0,0,0,0),this._cgl.gl.clear(this._cgl.gl.COLOR_BUFFER_BIT|this._cgl.gl.DEPTH_BUFFER_BIT))},B.prototype.renderEnd=function(){if(this._cgl.popPMatrix(),this._cgl.profileData.profileFramebuffer++,this._numRenderBuffers<=1)this._cgl.gl.bindFramebuffer(this._cgl.gl.READ_FRAMEBUFFER,this._frameBuffer),this._cgl.gl.bindFramebuffer(this._cgl.gl.DRAW_FRAMEBUFFER,this._textureFrameBuffer),this._cgl.gl.clearBufferfv(this._cgl.gl.COLOR,0,[0,0,0,1]),this._cgl.gl.blitFramebuffer(0,0,this._width,this._height,0,0,this._width,this._height,this._cgl.gl.COLOR_BUFFER_BIT|this._cgl.gl.DEPTH_BUFFER_BIT,this._cgl.gl.NEAREST);else{this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this.Framebuffer2BlittingFramebuffer),this._cgl.gl.framebufferRenderbuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.DEPTH_ATTACHMENT,this._cgl.gl.RENDERBUFFER,this._depthRenderbuffer),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this.Framebuffer2FinalFramebuffer),this._cgl.gl.framebufferTexture2D(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.DEPTH_ATTACHMENT,this._cgl.gl.TEXTURE_2D,this._textureDepth.tex,0);for(let t=0;t<this._numRenderBuffers;t++){this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this.Framebuffer2BlittingFramebuffer),this._cgl.gl.framebufferRenderbuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.COLOR_ATTACHMENT0,this._cgl.gl.RENDERBUFFER,this._colorRenderbuffers[t]),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this.Framebuffer2FinalFramebuffer),this._cgl.gl.framebufferTexture2D(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.COLOR_ATTACHMENT0,this._cgl.gl.TEXTURE_2D,this._colorTextures[t].tex,0),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,null),this._cgl.gl.bindFramebuffer(this._cgl.gl.READ_FRAMEBUFFER,this.Framebuffer2BlittingFramebuffer),this._cgl.gl.bindFramebuffer(this._cgl.gl.DRAW_FRAMEBUFFER,this.Framebuffer2FinalFramebuffer),this._cgl.gl.clearBufferfv(this._cgl.gl.COLOR,0,[0,0,0,1]);let e=this._cgl.gl.COLOR_BUFFER_BIT;0==t&&(e|=this._cgl.gl.DEPTH_BUFFER_BIT),this._cgl.gl.blitFramebuffer(0,0,this._width,this._height,0,0,this._width,this._height,e,this._cgl.gl.NEAREST)}}if(this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.popGlFrameBuffer()),this._cgl.popFrameBuffer(),this._cgl.popModelMatrix(),this._cgl.resetViewPort(),this._colorTextures[0].filter==L.FILTER_MIPMAP)for(let t=0;t<this._numRenderBuffers;t++)this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_2D,this._colorTextures[t].tex),this._colorTextures[t].updateMipMap(),this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_2D,null)};const k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=new Uint8Array(256);for(let t=0;t<k.length;t++)D[k.charCodeAt(t)]=t;const V=D,G=function(t){t.buffer&&(t=t.buffer);let e,i=new Uint8Array(t),s=i.length,r="";for(e=0;e<s;e+=3)r+=k[i[e]>>2],r+=k[(3&i[e])<<4|i[e+1]>>4],r+=k[(15&i[e+1])<<2|i[e+2]>>6],r+=k[63&i[e+2]];return s%3==2?r=r.substring(0,r.length-1)+"=":s%3==1&&(r=r.substring(0,r.length-2)+"=="),r},H=function(t){let e,i,s,r,n,o=.75*t.length,h=t.length,a=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);let l=new ArrayBuffer(o),c=new Uint8Array(l);for(e=0;e<h;e+=4)i=V[t.charCodeAt(e)],s=V[t.charCodeAt(e+1)],r=V[t.charCodeAt(e+2)],n=V[t.charCodeAt(e+3)],c[a++]=i<<2|s>>4,c[a++]=(15&s)<<4|r>>2,c[a++]=(3&r)<<6|63&n;return l};class z{constructor(t){this._init(),this._first=!0,this._wireMesh=null,t&&this.apply(t)}_init(){this._max=[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE],this._min=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this._center=[0,0,0],this._size=[0,0,0],this._maxAxis=0,this._first=!0}get maxAxis(){return this._maxAxis||1}get size(){return this._size}get center(){return this._center}get x(){return this._center[0]}get y(){return this._center[1]}get z(){return this._center[2]}get minX(){return this._min[0]}get minY(){return this._min[1]}get minZ(){return this._min[2]}get maxX(){return this._max[0]}get maxY(){return this._max[1]}get maxZ(){return this._max[2]}apply(t,e){if(t){if(t instanceof z){const e=t;this.applyPos(e.maxX,e.maxY,e.maxZ),this.applyPos(e.minX,e.minY,e.minZ)}else for(let e=0;e<t.vertices.length;e+=3)this.applyPos(t.vertices[e],t.vertices[e+1],t.vertices[e+2]);this.calcCenterSize()}}copy(){return new z(this)}get changed(){return!(this._max[0]==-Number.MAX_VALUE&&this._max[1]==-Number.MAX_VALUE&&this._max[2]==-Number.MAX_VALUE)}applyPos(t,e,i){if(t!=Number.MAX_VALUE&&t!=-Number.MAX_VALUE&&e!=Number.MAX_VALUE&&e!=-Number.MAX_VALUE&&i!=Number.MAX_VALUE&&i!=-Number.MAX_VALUE&&CABLES.UTILS.isNumeric(t)&&CABLES.UTILS.isNumeric(e)&&CABLES.UTILS.isNumeric(i)){if(this._first)return this._max[0]=t,this._max[1]=e,this._max[2]=i,this._min[0]=t,this._min[1]=e,this._min[2]=i,void(this._first=!1);this._max[0]=Math.max(this._max[0],t),this._max[1]=Math.max(this._max[1],e),this._max[2]=Math.max(this._max[2],i),this._min[0]=Math.min(this._min[0],t),this._min[1]=Math.min(this._min[1],e),this._min[2]=Math.min(this._min[2],i)}}calcCenterSize(){this._first||(this._size[0]=this._max[0]-this._min[0],this._size[1]=this._max[1]-this._min[1],this._size[2]=this._max[2]-this._min[2],this._center[0]=(this._min[0]+this._max[0])/2,this._center[1]=(this._min[1]+this._max[1])/2,this._center[2]=(this._min[2]+this._max[2])/2,this._maxAxis=Math.max(this._size[2],Math.max(this._size[0],this._size[1])))}mulMat4(t){this._first&&(this._max[0]=0,this._max[1]=0,this._max[2]=0,this._min[0]=0,this._min[1]=0,this._min[2]=0,this._first=!1),vec3.transformMat4(this._max,this._max,t),vec3.transformMat4(this._min,this._min,t),this.calcCenterSize()}render(t,e){this._wireMesh||(this._wireMesh=new CGL.WireCube(t)),t.pushModelMatrix(),mat4.translate(t.mMatrix,t.mMatrix,this._center),this._wireMesh.render(t,this._size[0]/2,this._size[1]/2,this._size[2]/2),t.popModelMatrix()}}const Y=function(t){this.name=t||"unknown",this._log=new h("cgl_geometry"),this.faceVertCount=3,this._vertices=[],this.verticesIndices=[],this.texCoords=new Float32Array,this.texCoordsIndices=[],this.vertexNormals=[],this.tangents=[],this.biTangents=[],this.morphTargets=[],this.vertexColors=[],this._attributes={},this.glPrimitive=null,Object.defineProperty(this,"vertices",{get(){return this._vertices},set(t){this.setVertices(t)}})};Y.prototype.clear=function(){this.vertices=new Float32Array([]),this.verticesIndices.length=0,this.texCoords=new Float32Array([]),this.texCoordsIndices.length=0,this.vertexNormals=new Float32Array([])},Y.prototype.getAttributes=function(){return this._attributes},Y.prototype.getAttribute=function(t){for(const e in this._attributes)if(this._attributes[e].name==t)return this._attributes[e];return null},Y.prototype.setAttribute=function(t,e,i){let s="";1==i?s="float":2==i?s="vec2":3==i?s="vec3":4==i&&(s="vec4");const r={name:t,data:e,itemSize:i,type:s};this._attributes[t]=r},Y.prototype.setVertices=function(t){t instanceof Float32Array?this._vertices=t:this._vertices=new Float32Array(t)},Y.prototype.setTexCoords=function(t){t instanceof Float32Array?this.texCoords=t:this.texCoords=new Float32Array(t)},Y.prototype.calcNormals=function(t){t||this.unIndex(),this.calculateNormals({})},Y.prototype.flipNormals=function(t,e,i){let s=vec3.create();null==t&&(t=1),null==e&&(e=1),null==i&&(i=1);for(let r=0;r<this.vertexNormals.length;r+=3)vec3.set(s,this.vertexNormals[r+0],this.vertexNormals[r+1],this.vertexNormals[r+2]),s[0]*=-t,s[1]*=-e,s[2]*=-i,vec3.normalize(s,s),this.vertexNormals[r+0]=s[0],this.vertexNormals[r+1]=s[1],this.vertexNormals[r+2]=s[2]},Y.prototype.getNumTriangles=function(){return this.verticesIndices&&this.verticesIndices.length?this.verticesIndices.length/3:this.vertices.length/3},Y.prototype.flipVertDir=function(){const t=[];t.length=this.verticesIndices.length;for(let e=0;e<this.verticesIndices.length;e+=3)t[e]=this.verticesIndices[e+2],t[e+1]=this.verticesIndices[e+1],t[e+2]=this.verticesIndices[e];this.verticesIndices=t},Y.prototype.setPointVertices=function(t){if(t.length%3==0){t instanceof Float32Array?this.vertices=t:this.vertices=new Float32Array(t),this.texCoords instanceof Float32Array||(this.texCoords=new Float32Array(t.length/3*2)),this.verticesIndices.length=t.length/3;for(let e=0;e<t.length/3;e++)this.verticesIndices[e]=e,this.texCoords[2*e]=0,this.texCoords[2*e+1]=0}else this._log.error("SetPointVertices: Array must be multiple of three.")},Y.prototype.merge=function(t){if(!t)return;const e=this.verticesIndices.length,i=this.vertices.length/3;this.verticesIndices.length=this.verticesIndices.length+t.verticesIndices.length;for(let s=0;s<t.verticesIndices.length;s++)this.verticesIndices[e+s]=t.verticesIndices[s]+i;this.vertices=g.float32Concat(this.vertices,t.vertices),this.texCoords=g.float32Concat(this.texCoords,t.texCoords),this.vertexNormals=g.float32Concat(this.vertexNormals,t.vertexNormals),this.tangents=g.float32Concat(this.tangents,t.tangents),this.biTangents=g.float32Concat(this.biTangents,t.biTangents)},Y.prototype.copy=function(){let t=0;const e=new Y(this.name+" copy");if(e.faceVertCount=this.faceVertCount,e.glPrimitive=this.glPrimitive,e.setVertices(this._vertices.slice(0)),this.verticesIndices)for(e.verticesIndices.length=this.verticesIndices.length,t=0;t<this.verticesIndices.length;t++)e.verticesIndices[t]=this.verticesIndices[t];if(this.texCoords)for(e.texCoords=new Float32Array(this.texCoords.length),t=0;t<this.texCoords.length;t++)e.texCoords[t]=this.texCoords[t];if(this.texCoordsIndices)for(e.texCoordsIndices.length=this.texCoordsIndices.length,t=0;t<this.texCoordsIndices.length;t++)e.texCoordsIndices[t]=this.texCoordsIndices[t];if(this.vertexNormals)for(e.vertexNormals=new Float32Array(this.vertexNormals.length),t=0;t<this.vertexNormals.length;t++)e.vertexNormals[t]=this.vertexNormals[t];if(this.tangents)for(e.tangents=[],e.tangents.length=this.tangents.length,t=0;t<this.tangents.length;t++)e.tangents[t]=this.tangents[t];if(this.biTangents)for(e.biTangents=[],e.biTangents.length=this.biTangents.length,t=0;t<this.biTangents.length;t++)e.biTangents[t]=this.biTangents[t];for(e.morphTargets.length=this.morphTargets.length,t=0;t<this.morphTargets.length;t++)e.morphTargets[t]=this.morphTargets[t];for(e.vertexColors.length=this.vertexColors.length,t=0;t<this.vertexColors.length;t++)e.vertexColors[t]=this.vertexColors[t];return e},Y.prototype.calculateNormals=function(t){const e=vec3.create(),i=vec3.create(),s=vec3.create();function r(r){return vec3.subtract(e,r[0],r[1]),vec3.subtract(i,r[0],r[2]),vec3.cross(s,e,i),vec3.normalize(s,s),t&&t.forceZUp&&s[2]<0&&(s[0]*=-1,s[1]*=-1,s[2]*=-1),s}this.getVertexVec=function(t){const e=[0,0,0];return e[0]=this.vertices[3*t+0],e[1]=this.vertices[3*t+1],e[2]=this.vertices[3*t+2],e},this.vertexNormals instanceof Float32Array&&this.vertexNormals.length==this.vertices.length||(this.vertexNormals=new Float32Array(this.vertices.length));for(let t=0;t<this.vertices.length;t++)this.vertexNormals[t]=0;if(this.isIndexed()){const t=[];t.length=Math.floor(this.verticesIndices.length/3);for(let e=0;e<this.verticesIndices.length;e+=3){const i=[this.getVertexVec(this.verticesIndices[e+0]),this.getVertexVec(this.verticesIndices[e+1]),this.getVertexVec(this.verticesIndices[e+2])];t[e/3]=r(i),this.vertexNormals[3*this.verticesIndices[e+0]+0]+=t[e/3][0],this.vertexNormals[3*this.verticesIndices[e+0]+1]+=t[e/3][1],this.vertexNormals[3*this.verticesIndices[e+0]+2]+=t[e/3][2],this.vertexNormals[3*this.verticesIndices[e+1]+0]+=t[e/3][0],this.vertexNormals[3*this.verticesIndices[e+1]+1]+=t[e/3][1],this.vertexNormals[3*this.verticesIndices[e+1]+2]+=t[e/3][2],this.vertexNormals[3*this.verticesIndices[e+2]+0]+=t[e/3][0],this.vertexNormals[3*this.verticesIndices[e+2]+1]+=t[e/3][1],this.vertexNormals[3*this.verticesIndices[e+2]+2]+=t[e/3][2]}for(let t=0;t<this.verticesIndices.length;t+=3)for(let e=0;e<3;e++){const i=[this.vertexNormals[3*this.verticesIndices[t+e]+0],this.vertexNormals[3*this.verticesIndices[t+e]+1],this.vertexNormals[3*this.verticesIndices[t+e]+2]];vec3.normalize(i,i),this.vertexNormals[3*this.verticesIndices[t+e]+0]=i[0],this.vertexNormals[3*this.verticesIndices[t+e]+1]=i[1],this.vertexNormals[3*this.verticesIndices[t+e]+2]=i[2]}}else{const t=[];for(let e=0;e<this.vertices.length;e+=9){const i=r([[this.vertices[e+0],this.vertices[e+1],this.vertices[e+2]],[this.vertices[e+3],this.vertices[e+4],this.vertices[e+5]],[this.vertices[e+6],this.vertices[e+7],this.vertices[e+8]]]);t.push(i[0],i[1],i[2],i[0],i[1],i[2],i[0],i[1],i[2])}this.vertexNormals=t}},Y.prototype.calcTangentsBitangents=function(){if(!this.vertices.length)return void this._log.error("Cannot calculate tangents/bitangents without vertices.");if(!this.vertexNormals.length)return void this._log.error("Cannot calculate tangents/bitangents without normals.");if(!this.texCoords.length){const t=this.vertices.length/3*2;this.texCoords=new Float32Array(t);for(let e=0;e<t;e+=1)this.texCoords[e]=0}if(!this.verticesIndices||!this.verticesIndices.length)return void this._log.error("Cannot calculate tangents/bitangents without vertex indices.");if(this.verticesIndices.length%3!=0)return void this._log.error("Vertex indices mismatch!");const t=this.verticesIndices.length/3,e=this.vertices.length/3;this.tangents=new Float32Array(this.vertexNormals.length),this.biTangents=new Float32Array(this.vertexNormals.length);const i=[];i.length=2*e;const s=vec3.create(),r=vec3.create(),n=vec3.create(),o=vec2.create(),h=vec2.create(),a=vec2.create(),l=vec3.create(),c=vec3.create();for(let u=0;u<t;u+=1){const t=this.verticesIndices[3*u],g=this.verticesIndices[3*u+1],_=this.verticesIndices[3*u+2];vec3.set(s,this.vertices[3*t],this.vertices[3*t+1],this.vertices[3*t+2]),vec3.set(r,this.vertices[3*g],this.vertices[3*g+1],this.vertices[3*g+2]),vec3.set(n,this.vertices[3*_],this.vertices[3*_+1],this.vertices[3*_+2]),vec2.set(o,this.texCoords[2*t],this.texCoords[2*t+1]),vec2.set(h,this.texCoords[2*g],this.texCoords[2*g+1]),vec2.set(a,this.texCoords[2*_],this.texCoords[2*_+1]);const p=r[0]-s[0],d=n[0]-s[0],f=r[1]-s[1],m=n[1]-s[1],E=r[2]-s[2],T=n[2]-s[2],A=h[0]-o[0],b=a[0]-o[0],y=h[1]-o[1],v=a[1]-o[1],x=1/(A*v-b*y);vec3.set(l,(v*p-y*d)*x,(v*f-y*m)*x,(v*E-y*T)*x),vec3.set(c,(A*d-b*p)*x,(A*m-b*f)*x,(A*T-b*E)*x),i[t]=l,i[g]=l,i[_]=l,i[t+e]=c,i[g+e]=c,i[_+e]=c}const u=vec3.create(),g=vec3.create(),_=vec3.create(),p=vec3.create(),d=vec3.create(),f=vec3.create(),m=vec3.create(),E=vec3.create();for(let t=0;t<e;t+=1){if(!i[t])continue;vec3.set(u,this.vertexNormals[3*t],this.vertexNormals[3*t+1],this.vertexNormals[3*t+2]),vec3.set(g,i[t][0],i[t][1],i[t][2]);const s=vec3.dot(u,g);vec3.scale(d,u,s),vec3.subtract(f,g,d),vec3.normalize(E,f),vec3.cross(m,u,g);vec3.dot(m,i[t+e]);const r=1;vec3.scale(_,E,1/r),vec3.cross(p,u,_),this.tangents[3*t+0]=_[0],this.tangents[3*t+1]=_[1],this.tangents[3*t+2]=_[2],this.biTangents[3*t+0]=p[0],this.biTangents[3*t+1]=p[1],this.biTangents[3*t+2]=p[2]}},Y.prototype.isIndexed=function(){return 0!=this.verticesIndices.length},Y.prototype.unIndex=function(t,e){const i=[],s=[],r=[],n=[],o=[],h=[];let a=0,l=0;for(l=0;l<this.verticesIndices.length;l+=3)i.push(this.vertices[3*this.verticesIndices[l+0]+0],this.vertices[3*this.verticesIndices[l+0]+1],this.vertices[3*this.verticesIndices[l+0]+2]),n.push(this.vertexNormals[3*this.verticesIndices[l+0]+0],this.vertexNormals[3*this.verticesIndices[l+0]+1],this.vertexNormals[3*this.verticesIndices[l+0]+2]),this.tangents.length>0&&o.push(this.tangents[3*this.verticesIndices[l+0]+0],this.tangents[3*this.verticesIndices[l+0]+1],this.tangents[3*this.verticesIndices[l+0]+2]),this.biTangents.length>0&&h.push(this.biTangents[3*this.verticesIndices[l+0]+0],this.biTangents[3*this.verticesIndices[l+0]+1],this.biTangents[3*this.verticesIndices[l+0]+2]),this.texCoords?r.push(this.texCoords[2*this.verticesIndices[l+0]+0],this.texCoords[2*this.verticesIndices[l+0]+1]):r.push(0,0),s.push(a),a++,i.push(this.vertices[3*this.verticesIndices[l+1]+0],this.vertices[3*this.verticesIndices[l+1]+1],this.vertices[3*this.verticesIndices[l+1]+2]),n.push(this.vertexNormals[3*this.verticesIndices[l+1]+0],this.vertexNormals[3*this.verticesIndices[l+1]+1],this.vertexNormals[3*this.verticesIndices[l+1]+2]),this.tangents.length>0&&o.push(this.tangents[3*this.verticesIndices[l+1]+0],this.tangents[3*this.verticesIndices[l+1]+1],this.tangents[3*this.verticesIndices[l+1]+2]),this.biTangents.length>0&&h.push(this.biTangents[3*this.verticesIndices[l+1]+0],this.biTangents[3*this.verticesIndices[l+1]+1],this.biTangents[3*this.verticesIndices[l+1]+2]),this.texCoords?r.push(this.texCoords[2*this.verticesIndices[l+1]+0],this.texCoords[2*this.verticesIndices[l+1]+1]):r.push(0,0),s.push(a),a++,i.push(this.vertices[3*this.verticesIndices[l+2]+0],this.vertices[3*this.verticesIndices[l+2]+1],this.vertices[3*this.verticesIndices[l+2]+2]),n.push(this.vertexNormals[3*this.verticesIndices[l+2]+0],this.vertexNormals[3*this.verticesIndices[l+2]+1],this.vertexNormals[3*this.verticesIndices[l+2]+2]),this.tangents.length>0&&o.push(this.tangents[3*this.verticesIndices[l+2]+0],this.tangents[3*this.verticesIndices[l+2]+1],this.tangents[3*this.verticesIndices[l+2]+2]),this.biTangents.length>0&&h.push(this.biTangents[3*this.verticesIndices[l+2]+0],this.biTangents[3*this.verticesIndices[l+2]+1],this.biTangents[3*this.verticesIndices[l+2]+2]),this.texCoords?r.push(this.texCoords[2*this.verticesIndices[l+2]+0],this.texCoords[2*this.verticesIndices[l+2]+1]):r.push(0,0),s.push(a),a++;this.vertices=i,this.texCoords=r,this.vertexNormals=n,o.length>0&&(this.tangents=o),h.length>0&&(this.biTangents=h),this.verticesIndices.length=0,t&&(this.verticesIndices=s),e||this.calculateNormals()},Y.prototype.calcBarycentric=function(){let t=[];t.length=this.vertices.length;for(let e=0;e<this.vertices.length;e++)t[e]=0;let e=0;for(let i=0;i<this.vertices.length;i+=3)t[i+e]=1,e++,3==e&&(e=0);this.setAttribute("attrBarycentric",t,3)},Y.prototype.getBounds=function(){return new z(this)},Y.prototype.center=function(t,e,i){void 0===t&&(t=!0,e=!0,i=!0);let s=0;const r=this.getBounds(),n=[r.minX+(r.maxX-r.minX)/2,r.minY+(r.maxY-r.minY)/2,r.minZ+(r.maxZ-r.minZ)/2];for(s=0;s<this.vertices.length;s+=3)this.vertices[s+0]==this.vertices[s+0]&&(t&&(this.vertices[s+0]-=n[0]),e&&(this.vertices[s+1]-=n[1]),i&&(this.vertices[s+2]-=n[2]));return n},Y.prototype.mapTexCoords2d=function(){const t=this.getBounds(),e=this.vertices.length/3;this.texCoords=new Float32Array(2*e);for(let i=0;i<e;i++){const e=this.vertices[3*i+0],s=this.vertices[3*i+1];this.texCoords[2*i+0]=e/(t.maxX-t.minX)+.5,this.texCoords[2*i+1]=1-s/(t.maxY-t.minY)+.5}},Y.prototype.getInfo=function(){const t={};return this.verticesIndices?t.numFaces=this.verticesIndices.length/3:t.numFaces=0,this.vertices?t.numVerts=this.vertices.length/3:t.numVerts=0,this.vertexNormals?t.numNormals=this.vertexNormals.length/3:t.numNormals=0,this.texCoords?t.numTexCoords=this.texCoords.length/2:t.numTexCoords=0,this.tangents?t.numTangents=this.tangents.length/3:t.numTangents=0,this.biTangents?t.numBiTangents=this.biTangents.length/3:t.numBiTangents=0,this.biTangents?t.numBiTangents=this.biTangents.length/3:t.numBiTangents=0,this.vertexColors?t.numVertexColors=this.vertexColors.length/4:t.numVertexColors=0,this.getAttributes()?t.numAttribs=Object.keys(this.getAttributes()).length:t.numAttribs=0,t.isIndexed=this.isIndexed(),t},Y.buildFromFaces=function(t,e,i){const s=[],r=[];for(let e=0;e<t.length;e+=3){const n=t[e+0],o=t[e+1],h=t[e+2],a=[-1,-1,-1];if(i)for(let t=0;t<s.length;t+=3)s[t+0]==n[0]&&s[t+1]==n[1]&&s[t+2]==n[2]&&(a[0]=t/3),s[t+0]==o[0]&&s[t+1]==o[1]&&s[t+2]==o[2]&&(a[1]=t/3),s[t+0]==h[0]&&s[t+1]==h[1]&&s[t+2]==h[2]&&(a[2]=t/3);-1==a[0]&&(s.push(n[0],n[1],n[2]),a[0]=(s.length-1)/3),-1==a[1]&&(s.push(o[0],o[1],o[2]),a[1]=(s.length-1)/3),-1==a[2]&&(s.push(h[0],h[1],h[2]),a[2]=(s.length-1)/3),r.push(parseInt(a[0],10)),r.push(parseInt(a[1],10)),r.push(parseInt(a[2],10))}const n=new Y(e);return n.name=e,n.vertices=s,n.verticesIndices=r,n},Y.json2geom=function(t){const e=new Y("jsonMeshGeom");if(e.verticesIndices=[],e.vertices=t.vertices||[],e.vertexNormals=t.normals||[],e.vertexColors=t.colors||[],e.tangents=t.tangents||[],e.biTangents=t.bitangents||[],t.texturecoords&&e.setTexCoords(t.texturecoords[0]),t.vertices_b64&&(e.vertices=new Float32Array(H(t.vertices_b64))),t.normals_b64&&(e.vertexNormals=new Float32Array(H(t.normals_b64))),t.tangents_b64&&(e.tangents=new Float32Array(H(t.tangents_b64))),t.bitangents_b64&&(e.biTangents=new Float32Array(H(t.bitangents_b64))),t.texturecoords_b64&&e.setTexCoords(new Float32Array(H(t.texturecoords_b64[0]))),t.faces_b64)e.verticesIndices=new Uint32Array(H(t.faces_b64));else{e.verticesIndices.length=3*t.faces.length;for(let i=0;i<t.faces.length;i++)e.verticesIndices[3*i]=t.faces[i][0],e.verticesIndices[3*i+1]=t.faces[i][1],e.verticesIndices[3*i+2]=t.faces[i][2]}return e};const W=function(){this._log=new h("eventtaget"),this._eventCallbacks={},this._logName="",this._logEvents=!1,this._listeners={},this.addEventListener=this.on=function(t,e,i){const s={id:(i||"")+CABLES.uuid(),name:t,cb:e};return this._eventCallbacks[t]?this._eventCallbacks[t].push(s):this._eventCallbacks[t]=[s],this._listeners[s.id]=s,s.id},this.hasEventListener=function(t,e){if(t&&!e)return!!this._listeners[t];if(this._log.warn("old eventtarget function haseventlistener!"),t&&e&&this._eventCallbacks[t]){return-1!=this._eventCallbacks[t].indexOf(e)}},this.removeEventListener=this.off=function(t,e){if(null==t)return;if(!e){const e=this._listeners[t];if(!e)return;let i=!0;for(;i;){i=!1;let s=-1;for(let r=0;r<this._eventCallbacks[e.name].length;r++)0===this._eventCallbacks[e.name][r].id.indexOf(t)&&(i=!0,s=r);-1!==s&&(this._eventCallbacks[e.name].splice(s,1),delete this._listeners[t])}return}this._log.stack(" old function signature: removeEventListener! use listener id");let i=null;for(let s=0;s<this._eventCallbacks[t].length;s++)this._eventCallbacks[t][s].cb==e&&(i=s);null!==i?delete this._eventCallbacks[i]:this._log.warn("removeEventListener not found "+t)},this.logEvents=function(t,e){this._logEvents=t,this._logName=e},this.emitEvent=function(t,e,i,s,r,n,o){if(this._logEvents&&console.log("[event] ",this._logName,t,this._eventCallbacks),this._eventCallbacks[t])for(let h=0;h<this._eventCallbacks[t].length;h++)this._eventCallbacks[t][h]&&this._eventCallbacks[t][h].cb(e,i,s,r,n,o);else this._logEvents&&console.log("[event] has no event callback",t,this._eventCallbacks)}},X={Key:function(t){this.time=0,this.value=0,this.ui=null,this.onChange=null,this._easing=0,this.bezTangIn=0,this.bezTangOut=0,this.cb=null,this.cbTriggered=!1;this.setEasing(a.EASING_LINEAR),this.set(t)}};X.Key.cubicSpline=function(t,e,i){let s=t*t,r=s*t;return(2*r-3*s+1)*e.value+(r-2*s+t)*e.bezTangOut+(-2*r+3*s)*i.value+(r-s)*i.bezTangIn},X.Key.easeCubicSpline=function(t,e){return X.Key.cubicSpline(t,this,e)},X.Key.linear=function(t,e,i){return parseFloat(e.value)+parseFloat(i.value-e.value)*t},X.Key.easeLinear=function(t,e){return X.Key.linear(t,this,e)},X.Key.easeAbsolute=function(t,e){return this.value};const K=function(t){return Math.pow(2,10*(t-1))};X.Key.easeExpoIn=function(t,e){return t=K(t),X.Key.linear(t,this,e)};const j=function(t){return t=1-Math.pow(2,-10*t)};X.Key.easeExpoOut=function(t,e){return t=j(t),X.Key.linear(t,this,e)};const Q=function(t){return(t*=2)<1?t=.5*Math.pow(2,10*(t-1)):(t--,t=.5*(2-Math.pow(2,-10*t))),t};X.Key.easeExpoInOut=function(t,e){return t=Q(t),X.Key.linear(t,this,e)},X.Key.easeSinIn=function(t,e){return t=-1*Math.cos(t*Math.PI/2)+1,X.Key.linear(t,this,e)},X.Key.easeSinOut=function(t,e){return t=Math.sin(t*Math.PI/2),X.Key.linear(t,this,e)},X.Key.easeSinInOut=function(t,e){return t=-.5*(Math.cos(Math.PI*t)-1),X.Key.linear(t,this,e)};const q=function(t){return t*=t*t};X.Key.easeCubicIn=function(t,e){return t=q(t),X.Key.linear(t,this,e)},X.Key.easeInQuint=function(t,e){return t*=t*t*t*t,X.Key.linear(t,this,e)},X.Key.easeOutQuint=function(t,e){return t=(t-=1)*t*t*t*t+1,X.Key.linear(t,this,e)},X.Key.easeInOutQuint=function(t,e){return(t/=.5)<1?t*=.5*t*t*t*t:t=.5*((t-=2)*t*t*t*t+2),X.Key.linear(t,this,e)},X.Key.easeInQuart=function(t,e){return t*=t*t*t,X.Key.linear(t,this,e)},X.Key.easeOutQuart=function(t,e){return t=-1*((t-=1)*t*t*t-1),X.Key.linear(t,this,e)},X.Key.easeInOutQuart=function(t,e){return(t/=.5)<1?t*=.5*t*t*t:t=-.5*((t-=2)*t*t*t-2),X.Key.linear(t,this,e)},X.Key.bounce=function(t){return(t/=1)<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,t},X.Key.easeInBounce=function(t,e){return X.Key.linear(X.Key.bounce(t),this,e)},X.Key.easeOutBounce=function(t,e){return X.Key.linear(X.Key.bounce(t),this,e)},X.Key.easeInElastic=function(t,e){let i=1.70158,s=0,r=1;return 0===t?t=0:1==(t/=1)?t=1:(s||(s=.3),r<Math.abs(1)?(r=1,i=s/4):i=s/(2*Math.PI)*Math.asin(1/r),t=-r*Math.pow(2,10*(t-=1))*Math.sin((1*t-i)*(2*Math.PI)/s)+0),X.Key.linear(t,this,e)},X.Key.easeOutElastic=function(t,e){let i=1.70158,s=0,r=1;return 0===t?t=0:1==(t/=1)?t=1:(s||(s=.3),r<Math.abs(1)?(r=1,i=s/4):i=s/(2*Math.PI)*Math.asin(1/r),t=r*Math.pow(2,-10*t)*Math.sin((1*t-i)*(2*Math.PI)/s)+1+0),X.Key.linear(t,this,e)},X.Key.easeInBack=function(t,e){const i=1.70158;return t=t*t*((i+1)*t-i),X.Key.linear(t,this,e)},X.Key.easeOutBack=function(t,e){const i=1.70158;return t=(t=t/1-1)*t*((i+1)*t+i)+1,X.Key.linear(t,this,e)},X.Key.easeInOutBack=function(t,e){let i=1.70158;return t=(t/=.5)<1?t*t*((1+(i*=1.525))*t-i)*.5:.5*((t-=2)*t*((1+(i*=1.525))*t+i)+2),X.Key.linear(t,this,e)};const J=function(t){return t=--t*t*t+1};X.Key.easeCubicOut=function(t,e){return t=J(t),X.Key.linear(t,this,e)};const Z=function(t){return(t*=2)<1?t*=.5*t*t:t=.5*((t-=2)*t*t+2),t};X.Key.easeCubicInOut=function(t,e){return t=Z(t),X.Key.linear(t,this,e)},X.Key.easeSmoothStep=function(t,e){const i=Math.max(0,Math.min(1,t));return t=i*i*(3-2*i),X.Key.linear(t,this,e)},X.Key.easeSmootherStep=function(t,e){const i=Math.max(0,Math.min(1,(t-0)/1));return t=i*i*i*(i*(6*i-15)+10),X.Key.linear(t,this,e)},X.Key.prototype.setEasing=function(t){this._easing=t,this._easing==a.EASING_LINEAR?this.ease=X.Key.easeLinear:this._easing==a.EASING_ABSOLUTE?this.ease=X.Key.easeAbsolute:this._easing==a.EASING_SMOOTHSTEP?this.ease=X.Key.easeSmoothStep:this._easing==a.EASING_SMOOTHERSTEP?this.ease=X.Key.easeSmootherStep:this._easing==a.EASING_CUBIC_IN?this.ease=X.Key.easeCubicIn:this._easing==a.EASING_CUBIC_OUT?this.ease=X.Key.easeCubicOut:this._easing==a.EASING_CUBIC_INOUT?this.ease=X.Key.easeCubicInOut:this._easing==a.EASING_EXPO_IN?this.ease=X.Key.easeExpoIn:this._easing==a.EASING_EXPO_OUT?this.ease=X.Key.easeExpoOut:this._easing==a.EASING_EXPO_INOUT?this.ease=X.Key.easeExpoInOut:this._easing==a.EASING_SIN_IN?this.ease=X.Key.easeSinIn:this._easing==a.EASING_SIN_OUT?this.ease=X.Key.easeSinOut:this._easing==a.EASING_SIN_INOUT?this.ease=X.Key.easeSinInOut:this._easing==a.EASING_BACK_OUT?this.ease=X.Key.easeOutBack:this._easing==a.EASING_BACK_IN?this.ease=X.Key.easeInBack:this._easing==a.EASING_BACK_INOUT?this.ease=X.Key.easeInOutBack:this._easing==a.EASING_ELASTIC_IN?this.ease=X.Key.easeInElastic:this._easing==a.EASING_ELASTIC_OUT?this.ease=X.Key.easeOutElastic:this._easing==a.EASING_ELASTIC_INOUT?this.ease=X.Key.easeElasticInOut:this._easing==a.EASING_BOUNCE_IN?this.ease=X.Key.easeInBounce:this._easing==a.EASING_BOUNCE_OUT?this.ease=X.Key.easeOutBounce:this._easing==a.EASING_QUART_OUT?this.ease=X.Key.easeOutQuart:this._easing==a.EASING_QUART_IN?this.ease=X.Key.easeInQuart:this._easing==a.EASING_QUART_INOUT?this.ease=X.Key.easeInOutQuart:this._easing==a.EASING_QUINT_OUT?this.ease=X.Key.easeOutQuint:this._easing==a.EASING_QUINT_IN?this.ease=X.Key.easeInQuint:this._easing==a.EASING_QUINT_INOUT?this.ease=X.Key.easeInOutQuint:this._easing==a.EASING_CUBICSPLINE?this.ease=X.Key.easeCubicSpline:(this._easing=a.EASING_LINEAR,this.ease=X.Key.easeLinear)},X.Key.prototype.trigger=function(){this.cb(),this.cbTriggered=!0},X.Key.prototype.setValue=function(t){this.value=t,null!==this.onChange&&this.onChange()},X.Key.prototype.set=function(t){t&&(t.e&&this.setEasing(t.e),t.cb&&(this.cb=t.cb,this.cbTriggered=!1),t.b,t.hasOwnProperty("t")&&(this.time=t.t),t.hasOwnProperty("time")&&(this.time=t.time),t.hasOwnProperty("v")?this.value=t.v:t.hasOwnProperty("value")&&(this.value=t.value)),null!==this.onChange&&this.onChange()},X.Key.prototype.getSerialized=function(){const t={};return t.t=this.time,t.v=this.value,t.e=this._easing,t},X.Key.prototype.getEasing=function(){return this._easing};const $=function(t){W.apply(this),t=t||{},this.keys=[],this.onChange=null,this.stayInTimeline=!1,this.loop=!1,this._log=new h("Anim"),this.defaultEasing=t.defaultEasing||a.EASING_LINEAR,this.onLooped=null,this._timesLooped=0,this._needsSort=!1};$.prototype.forceChangeCallback=function(){null!==this.onChange&&this.onChange(),this.emitEvent("onChange",this)},$.prototype.getLoop=function(){return this.loop},$.prototype.setLoop=function(t){this.loop=t,this.emitEvent("onChange",this)},$.prototype.hasEnded=function(t){return 0===this.keys.length||this.keys[this.keys.length-1].time<=t},$.prototype.isRising=function(t){if(this.hasEnded(t))return!1;const e=this.getKeyIndex(t);return this.keys[e].value<this.keys[e+1].value},$.prototype.clearBefore=function(t){const e=this.getValue(t),i=this.getKeyIndex(t);this.setValue(t,e),i>1&&this.keys.splice(0,i)},$.prototype.clear=function(t){let e=0;t&&(e=this.getValue(t)),this.keys.length=0,t&&this.setValue(t,e),null!==this.onChange&&this.onChange(),this.emitEvent("onChange",this)},$.prototype.sortKeys=function(){this.keys.sort((t,e)=>parseFloat(t.time)-parseFloat(e.time)),this._needsSort=!1},$.prototype.getLength=function(){return 0===this.keys.length?0:this.keys[this.keys.length-1].time},$.prototype.getKeyIndex=function(t){let e=0;for(let i=0;i<this.keys.length;i++)if(t>=this.keys[i].time&&(e=i),this.keys[i].time>t)return e;return e},$.prototype.setValue=function(t,e,i){let s=null;for(const r in this.keys)if(this.keys[r].time==t){s=this.keys[r],this.keys[r].setValue(e),this.keys[r].cb=i;break}return s||(s=new X.Key({time:t,value:e,e:this.defaultEasing,cb:i}),this.keys.push(s)),this.onChange&&this.onChange(),this.emitEvent("onChange",this),this._needsSort=!0,s},$.prototype.setKeyEasing=function(t,e){this.keys[t]&&(this.keys[t].setEasing(e),this.emitEvent("onChange",this))},$.prototype.getSerialized=function(){const t={keys:[]};t.loop=this.loop;for(const e in this.keys)t.keys.push(this.keys[e].getSerialized());return t},$.prototype.getKey=function(t){const e=this.getKeyIndex(t);return this.keys[e]},$.prototype.getNextKey=function(t){let e=this.getKeyIndex(t)+1;return e>=this.keys.length&&(e=this.keys.length-1),this.keys[e]},$.prototype.isFinished=function(t){return this.keys.length<=0||t>this.keys[this.keys.length-1].time},$.prototype.isStarted=function(t){return!(this.keys.length<=0)&&t>=this.keys[0].time},$.prototype.getValue=function(t){if(0===this.keys.length)return 0;if(this._needsSort&&this.sortKeys(),t<this.keys[0].time)return this.keys[0].value;const e=this.keys.length-1;if(this.loop&&t>this.keys[e].time){t/this.keys[e].time>this._timesLooped&&(this._timesLooped++,this.onLooped&&this.onLooped()),t=(t-this.keys[0].time)%(this.keys[e].time-this.keys[0].time),t+=this.keys[0].time}const i=this.getKeyIndex(t);if(i>=e)return this.keys[e].cb&&!this.keys[e].cbTriggered&&this.keys[e].trigger(),this.keys[e].value;const s=parseInt(i,10)+1,r=this.keys[i],n=this.keys[s];if(r.cb&&!r.cbTriggered&&r.trigger(),!n)return-1;const o=(t-r.time)/(n.time-r.time);return r.ease||this.log._warn("has no ease",r,n),r.ease(o,n)},$.prototype.addKey=function(t){void 0===t.time?this.log.warn("key time undefined, ignoring!"):(this.keys.push(t),null!==this.onChange&&this.onChange(),this.emitEvent("onChange",this))},$.prototype.easingFromString=function(t){return"linear"==t?a.EASING_LINEAR:"absolute"==t?a.EASING_ABSOLUTE:"smoothstep"==t?a.EASING_SMOOTHSTEP:"smootherstep"==t?a.EASING_SMOOTHERSTEP:"Cubic In"==t?a.EASING_CUBIC_IN:"Cubic Out"==t?a.EASING_CUBIC_OUT:"Cubic In Out"==t?a.EASING_CUBIC_INOUT:"Expo In"==t?a.EASING_EXPO_IN:"Expo Out"==t?a.EASING_EXPO_OUT:"Expo In Out"==t?a.EASING_EXPO_INOUT:"Sin In"==t?a.EASING_SIN_IN:"Sin Out"==t?a.EASING_SIN_OUT:"Sin In Out"==t?a.EASING_SIN_INOUT:"Back In"==t?a.EASING_BACK_IN:"Back Out"==t?a.EASING_BACK_OUT:"Back In Out"==t?a.EASING_BACK_INOUT:"Elastic In"==t?a.EASING_ELASTIC_IN:"Elastic Out"==t?a.EASING_ELASTIC_OUT:"Bounce In"==t?a.EASING_BOUNCE_IN:"Bounce Out"==t?a.EASING_BOUNCE_OUT:"Quart Out"==t?a.EASING_QUART_OUT:"Quart In"==t?a.EASING_QUART_IN:"Quart In Out"==t?a.EASING_QUART_INOUT:"Quint Out"==t?a.EASING_QUINT_OUT:"Quint In"==t?a.EASING_QUINT_IN:"Quint In Out"==t?a.EASING_QUINT_INOUT:void 0},$.prototype.createPort=function(t,e,i){const s=t.inDropDown(e,a.EASINGS);return s.set("linear"),s.defaultValue="linear",s.onChange=function(){this.defaultEasing=this.easingFromString(s.get()),i&&i()}.bind(this),s},$.slerpQuaternion=function(t,e,i,s,r,n){$.slerpQuaternion.q1||($.slerpQuaternion.q1=quat.create(),$.slerpQuaternion.q2=quat.create());const o=i.getKeyIndex(t);let h=o+1;if(h>=i.keys.length&&(h=i.keys.length-1),o==h)quat.set(e,i.keys[o].value,s.keys[o].value,r.keys[o].value,n.keys[o].value);else{const a=i.keys[o].time,l=(t-a)/(i.keys[h].time-a);quat.set($.slerpQuaternion.q1,i.keys[o].value,s.keys[o].value,r.keys[o].value,n.keys[o].value),quat.set($.slerpQuaternion.q2,i.keys[h].value,s.keys[h].value,r.keys[h].value,n.keys[h].value),quat.slerp(e,$.slerpQuaternion.q1,$.slerpQuaternion.q2,l)}return e};const tt=X;tt.Anim=$;const et=function(t,e,i,s){W.apply(this),this.data={},this._log=new h("core_port"),this.direction=c.PORT_DIR_IN,this.id=A(),this.parent=t,this.links=[],this.value=0,this.name=e,this.type=i||l.OP_PORT_TYPE_VALUE,this.uiAttribs=s||{},this.anim=null,this._oldAnimVal=-5711,this.defaultValue=null,this._uiActiveState=!0,this.ignoreValueSerialize=!1,this.onLinkChanged=null,this.crashed=!1,this._valueBeforeLink=null,this._lastAnimFrame=-1,this._animated=!1,this.onValueChanged=null,this.onTriggered=null,this.onUiActiveStateChange=null,this.changeAlways=!1,this._warnedDeprecated=!1,this._useVariableName=null,this.activityCounter=0,this._tempLastUiValue=null,Object.defineProperty(this,"val",{get(){return this._log.warn("val getter deprecated!",this),this._log.stack("val getter deprecated"),this._warnedDeprecated=!0,this.get()},set(t){this._log.warn("val setter deprecated!",this),this._log.stack("val setter deprecated"),this.setValue(t),this._warnedDeprecated=!0}})};et.prototype.getValueForDisplay=function(){let t=String(this.value);return this.uiAttribs&&"boolnum"==this.uiAttribs.display&&(t+=" - ",this.value?t+="true":t+="false"),t=t.replace(/(<([^>]+)>)/gi,""),t.length>100&&(t=t.substring(0,100)),t},et.prototype.onAnimToggle=function(){},et.prototype._onAnimToggle=function(){this.onAnimToggle()},et.prototype.remove=function(){this.removeLinks(),this.parent.removePort(this)},et.prototype.setUiAttribs=function(t){let e=!1;this.uiAttribs||(this.uiAttribs={});for(const i in t)this.uiAttribs[i]!=t[i]&&(e=!0),this.uiAttribs[i]=t[i],"group"==i&&this.indexPort&&this.indexPort.setUiAttribs({group:t[i]});e&&this.emitEvent("onUiAttrChange",t)},et.prototype.getUiAttribs=function(){return this.uiAttribs},et.prototype.getUiAttrib=function(t){return this.uiAttribs&&this.uiAttribs.hasOwnProperty(t)?this.uiAttribs[t]:null},et.prototype.get=function(){return this._animated&&this._lastAnimFrame!=this.parent.patch.getFrameNum()&&(this._lastAnimFrame=this.parent.patch.getFrameNum(),this.value=this.anim.getValue(this.parent.patch.timer.getTime()),this._oldAnimVal=this.value,this.forceChange()),this.value},et.prototype.set=et.prototype.setValue=function(t){if(void 0!==t&&this.parent.enabled&&!this.crashed&&(t!==this.value||this.changeAlways||this.type==l.OP_PORT_TYPE_TEXTURE||this.type==l.OP_PORT_TYPE_ARRAY)){if(this._animated)this.anim.setValue(this.parent.patch.timer.getTime(),t);else{try{this.value=t,this.forceChange()}catch(t){this.crashed=!0,this.setValue=function(t){},this.onTriggered=function(){},this._log.error("onvaluechanged exception cought",t),this._log.error(t.stack),this._log.warn("exception in: "+this.parent.name),this.parent.patch.isEditorMode()&&gui.showOpCrash(this.parent),this.parent.patch.emitEvent("exception",t,this.parent),this.parent.onError&&this.parent.onError(t)}this.parent&&this.parent.patch&&this.parent.patch.isEditorMode()&&this.type==l.OP_PORT_TYPE_TEXTURE&&gui.texturePreview().updateTexturePort(this)}if(this.direction==c.PORT_DIR_OUT)for(let t=0;t<this.links.length;++t)this.links[t].setValue()}},et.prototype.updateAnim=function(){this._animated&&(this.value=this.get(),(this._oldAnimVal!=this.value||this.changeAlways)&&(this._oldAnimVal=this.value,this.forceChange()),this._oldAnimVal=this.value)},et.args=function(t){return(t+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1)[0].replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)},et.prototype.forceChange=function(){this.onValueChanged||this.onChange,this._activity(),this.emitEvent("change",this.value,this),this.onChange?this.onChange(this,this.value):this.onValueChanged&&this.onValueChanged(this,this.value)},et.prototype.getTypeString=function(){return this.type==l.OP_PORT_TYPE_VALUE?"Number":this.type==l.OP_PORT_TYPE_FUNCTION?"Trigger":this.type==l.OP_PORT_TYPE_OBJECT?"Object":this.type==l.OP_PORT_TYPE_DYNAMIC?"Dynamic":this.type==l.OP_PORT_TYPE_ARRAY?"Array":this.type==l.OP_PORT_TYPE_STRING?"String":"Unknown"},et.prototype.deSerializeSettings=function(t){if(t&&(t.animated&&this.setAnimated(t.animated),t.useVariable&&this.setVariableName(t.useVariable),t.anim)){this.anim||(this.anim=new $),this.anim.addEventListener("onChange",()=>{this.parent.patch.emitEvent("portAnimUpdated",this.parent,this,this.anim)}),t.anim.loop&&(this.anim.loop=t.anim.loop);for(const e in t.anim.keys)this.anim.keys.push(new X.Key(t.anim.keys[e]))}},et.prototype.getSerialized=function(){const t={};if(t.name=this.getName(),this.ignoreValueSerialize||0!==this.links.length||this.type==l.OP_PORT_TYPE_OBJECT&&this.value&&this.value.tex||(t.value=this.value),this._useVariableName&&(t.useVariable=this._useVariableName),this._animated&&(t.animated=!0),this.anim&&(t.anim=this.anim.getSerialized()),"file"==this.uiAttribs.display&&(t.display=this.uiAttribs.display),this.direction==c.PORT_DIR_OUT&&this.links.length>0){t.links=[];for(const e in this.links)!this.links[e].ignoreInSerialize&&this.links[e].portIn&&this.links[e].portOut&&t.links.push(this.links[e].getSerialized())}return t},et.prototype.shouldLink=function(){return!0},et.prototype.removeLinks=function(){let t=0;for(;this.links.length>0;){if(t++,t>5e3){this._log.warn("could not delete links... / infinite loop"),this.links.length=0;break}this.links[0].remove()}},et.prototype.removeLink=function(t){for(const e in this.links)this.links[e]==t&&this.links.splice(e,1);this.direction==c.PORT_DIR_IN&&(this.type==l.OP_PORT_TYPE_VALUE?this.setValue(this._valueBeforeLink||0):this.setValue(this._valueBeforeLink||null)),this.onLinkChanged&&this.onLinkChanged(),this.emitEvent("onLinkChanged")},et.prototype.getName=function(){return this.name},et.prototype.addLink=function(t){this._valueBeforeLink=this.value,this.links.push(t),this.onLinkChanged&&this.onLinkChanged(),this.emitEvent("onLinkChanged")},et.prototype.getLinkTo=function(t){for(const e in this.links)if(this.links[e].portIn==t||this.links[e].portOut==t)return this.links[e]},et.prototype.removeLinkTo=function(t){for(const e in this.links)if(this.links[e].portIn==t||this.links[e].portOut==t)return this.links[e].remove(),this.onLinkChanged&&this.onLinkChanged(),void this.emitEvent("onLinkChanged")},et.prototype.isLinkedTo=function(t){for(const e in this.links)if(this.links[e].portIn==t||this.links[e].portOut==t)return!0;return!1},et.prototype._activity=function(){this.activityCounter++},et.prototype.trigger=function(){if(this._activity(),0===this.links.length)return;if(!this.parent.enabled)return;let t=null;try{for(let e=0;e<this.links.length;++e)this.links[e].portIn&&(t=this.links[e].portIn,t.parent.patch.pushTriggerStack(t),t._onTriggered(),t.parent.patch.popTriggerStack()),this.links[e]&&this.links[e].activity()}catch(e){this.parent.enabled=!1,this.parent.patch.isEditorMode()&&(this.parent.patch.emitEvent("exception",e,t.parent),this.parent.patch.emitEvent("opcrash",t),t.parent.onError&&t.parent.onError(e)),this._log.warn("exception!"),this._log.error("ontriggered exception cought",e),this._log.error(e.stack),this._log.warn("exception in: "+t.parent.name)}},et.prototype.call=function(){this._log.warn("call deprecated - use trigger() "),this.trigger()},et.prototype.execute=function(){this._log.warn("### execute port: "+this.getName(),this.goals.length)},et.prototype.setVariableName=function(t){this._useVariableName=t},et.prototype.getVariableName=function(){return this._useVariableName},et.prototype.setVariable=function(t){this.setAnimated(!1);const e={useVariable:!1};this._variableIn&&(this._variableIn.removeListener(this.set.bind(this)),this._variableIn=null),t?(this._variableIn=this.parent.patch.getVar(t),this._variableIn?(this.type==l.OP_PORT_TYPE_OBJECT?this._variableIn.addListener(()=>{this.set(null),this.set(this._variableIn.getValue())}):this._variableIn.addListener(this.set.bind(this)),this.set(this._variableIn.getValue())):this._log.warn("PORT VAR NOT FOUND!!!",t),this._useVariableName=t,e.useVariable=!0,e.variableName=this._useVariableName):(e.variableName=this._useVariableName=null,e.useVariable=!1),this.setUiAttribs(e),this.parent.patch.emitEvent("portSetVariable",this.parent,this,t)},et.prototype._handleNoTriggerOpAnimUpdates=function(t){let e=!1;for(let t=0;t<this.parent.portsIn.length;t++)if(this.parent.portsIn.type==l.OP_PORT_TYPE_FUNCTION){e=!0;break}e||(t?this._notriggerAnimUpdate=this.parent.patch.on("onRenderFrame",()=>{this.updateAnim()}):this.parent.patch.removeEventListener(this._notriggerAnimUpdate))},et.prototype.setAnimated=function(t){this._animated!=t&&(this._animated=t,this._animated&&!this.anim&&(this.anim=new $,this.anim.addEventListener("onChange",()=>{this.parent.patch.emitEvent("portAnimUpdated",this.parent,this,this.anim)})),this._onAnimToggle()),this._handleNoTriggerOpAnimUpdates(t),this.setUiAttribs({isAnimated:this._animated})},et.prototype.toggleAnim=function(t){this._animated=!this._animated,this._animated&&!this.anim&&(this.anim=new $,this.anim.addEventListener("onChange",()=>{this.parent.patch.emitEvent("portAnimUpdated",this.parent,this,this.anim)})),this.setAnimated(this._animated),this._onAnimToggle(),this.setUiAttribs({isAnimated:this._animated})},et.prototype.getType=function(){return this.type},et.prototype.isLinked=function(){return this.links.length>0},et.prototype.isBoundToVar=function(){return null!=this._useVariableName},et.prototype.isAnimated=function(){return this._animated},et.prototype.isHidden=function(){return this.uiAttribs.hidePort},et.prototype._onTriggered=function(t){this._activity(),this.parent.updateAnims(),this.parent.enabled&&this.onTriggered&&this.onTriggered(t)},et.prototype._onSetProfiling=function(t){this.parent.patch.profiler.add("port",this),this.setValue(t),this.parent.patch.profiler.add("port",null)},et.prototype._onTriggeredProfiling=function(){this.parent.enabled&&this.onTriggered&&(this.parent.patch.profiler.add("port",this),this.onTriggered(),this.parent.patch.profiler.add("port",null))},et.prototype.onValueChange=function(t){this.onChange=t},et.prototype.getUiActiveState=function(){return this._uiActiveState},et.prototype.setUiActiveState=function(t){this._uiActiveState=t,this.onUiActiveStateChange&&this.onUiActiveStateChange()},et.prototype.hidePort=function(){this._log.warn("op.hideport() is deprecated, do not use it!")},et.portTypeNumberToString=function(t){return t==l.OP_PORT_TYPE_VALUE?"value":t==l.OP_PORT_TYPE_FUNCTION?"function":t==l.OP_PORT_TYPE_OBJECT?"object":t==l.OP_PORT_TYPE_ARRAY?"array":t==l.OP_PORT_TYPE_STRING?"string":t==l.OP_PORT_TYPE_DYNAMIC?"dynamic":"unknown"};class it extends et{constructor(t,e,i,s,r){super(t,e,i,s),this.indexPort=r,this.indexPort.set=t=>{const e=s.values;if(!e)return;let i=Math.floor(t);i=Math.min(i,e.length-1),i=Math.max(i,0),this.indexPort.setValue(i),this.set(e[i]),this.parent.patch.isEditorMode()&&window.gui&&gui.patchView.isCurrentOp(this.parent)&&gui.opParams.show(this.parent)}}setUiAttribs(t){const e=t.hidePort;t.hidePort=!0,super.setUiAttribs(t),void 0!==e&&this.indexPort.setUiAttribs({hidePort:e})}}class st extends it{setUiAttribs(t){if(this.indexPort.isLinked())for(const e in t)"greyout"!=e||t[e]||(t[e]="true");super.setUiAttribs(t)}}const rt=function(t,e,i,s,r,n,o,a,l,c){if(this._loc=-1,this._log=new h("cgl_uniform"),this._type=e,this._cgl=t._cgl,this._name=i,this._shader=t,this._value=1e-5,this._oldValue=null,this._port=null,this._structName=l,this._structUniformName=a,this._propertyName=c,this._shader._addUniform(this),this.needsUpdate=!0,this.shaderType=null,this.comment=null,"f"==e)this.set=this.setValue=this.setValueF.bind(this),this.updateValue=this.updateValueF.bind(this);else if("f[]"==e)this.set=this.setValue=this.setValueArrayF.bind(this),this.updateValue=this.updateValueArrayF.bind(this);else if("2f[]"==e)this.set=this.setValue=this.setValueArray2F.bind(this),this.updateValue=this.updateValueArray2F.bind(this);else if("3f[]"==e)this.set=this.setValue=this.setValueArray3F.bind(this),this.updateValue=this.updateValueArray3F.bind(this);else if("4f[]"==e)this.set=this.setValue=this.setValueArray4F.bind(this),this.updateValue=this.updateValueArray4F.bind(this);else if("i"==e)this.set=this.setValue=this.setValueI.bind(this),this.updateValue=this.updateValueI.bind(this);else if("2i"==e)this.set=this.setValue=this.setValue2I.bind(this),this.updateValue=this.updateValue2I.bind(this);else if("3i"==e)this.set=this.setValue=this.setValue3I.bind(this),this.updateValue=this.updateValue3I.bind(this);else if("4i"==e)this.set=this.setValue=this.setValue4I.bind(this),this.updateValue=this.updateValue4I.bind(this);else if("b"==e)this.set=this.setValue=this.setValueBool.bind(this),this.updateValue=this.updateValueBool.bind(this);else if("4f"==e)this.set=this.setValue=this.setValue4F.bind(this),this.updateValue=this.updateValue4F.bind(this);else if("3f"==e)this.set=this.setValue=this.setValue3F.bind(this),this.updateValue=this.updateValue3F.bind(this);else if("2f"==e)this.set=this.setValue=this.setValue2F.bind(this),this.updateValue=this.updateValue2F.bind(this);else if("t"==e)this.set=this.setValue=this.setValueT.bind(this),this.updateValue=this.updateValueT.bind(this);else if("tc"==e)this.set=this.setValue=this.setValueT.bind(this),this.updateValue=this.updateValueT.bind(this);else if("t[]"==e)this.set=this.setValue=this.setValueArrayT.bind(this),this.updateValue=this.updateValueArrayT.bind(this);else{if("m4"!=e&&"m4[]"!=e)throw new Error("Unknown uniform type");this.set=this.setValue=this.setValueM4.bind(this),this.updateValue=this.updateValueM4.bind(this)}"object"==typeof s&&s instanceof et?(this._port=s,this._value=this._port.get(),r&&n&&o?(r instanceof et&&n instanceof et&&o instanceof et||this._log.error("[cgl_uniform] mixed port/value parameter for vec4 ",this._name),this._value=[0,0,0,0],this._port2=r,this._port3=n,this._port4=o,this._port.on("change",this.updateFromPort4f.bind(this)),this._port2.on("change",this.updateFromPort4f.bind(this)),this._port3.on("change",this.updateFromPort4f.bind(this)),this._port4.on("change",this.updateFromPort4f.bind(this)),this.updateFromPort4f()):r&&n?(r instanceof et&&n instanceof et||this._log.error("[cgl_uniform] mixed port/value parameter for vec4 ",this._name),this._value=[0,0,0],this._port2=r,this._port3=n,this._port.on("change",this.updateFromPort3f.bind(this)),this._port2.on("change",this.updateFromPort3f.bind(this)),this._port3.on("change",this.updateFromPort3f.bind(this)),this.updateFromPort3f()):r?(r instanceof et||this._log.error("[cgl_uniform] mixed port/value parameter for vec4 ",this._name),this._value=[0,0],this._port2=r,this._port.on("change",this.updateFromPort2f.bind(this)),this._port2.on("change",this.updateFromPort2f.bind(this)),this.updateFromPort2f()):this._port.on("change",this.updateFromPort.bind(this))):this._value=s,this.setValue(this._value),this.needsUpdate=!0};rt.prototype.copy=function(t){const e=new rt(t,this._type,this._name,this._value,this._port2,this._port3,this._port4,this._structUniformName,this._structName,this._propertyName);return e.shaderType=this.shaderType,e},rt.prototype.getGlslTypeString=function(){return"f"==this._type?"float":"b"==this._type?"bool":"i"==this._type?"int":"2i"==this._type?"ivec2":"2f"==this._type?"vec2":"3f"==this._type?"vec3":"4f"==this._type?"vec4":"m4"==this._type?"mat4":"t"==this._type?"sampler2D":"tc"==this._type?"samplerCube":"3f[]"==this._type||"m4[]"==this._type?null:void this._log.warn("[CGL UNIFORM] unknown glsl type string ",this._type)},rt.prototype._isValidLoc=function(){return-1!=this._loc},rt.prototype.getType=function(){return this._type},rt.prototype.getName=function(){return this._name},rt.prototype.getValue=function(){return this._value},rt.prototype.getShaderType=function(){return this.shaderType},rt.prototype.isStructMember=function(){return!!this._structName},rt.prototype.resetLoc=function(){this._loc=-1,this.needsUpdate=!0},rt.prototype.bindTextures=function(){return this._value},rt.prototype.resetLoc=function(){this._loc=-1,this.needsUpdate=!0},rt.prototype.bindTextures=function(){},rt.prototype.getLoc=function(){return this._loc},rt.prototype.updateFromPort4f=function(){this._value[0]=this._port.get(),this._value[1]=this._port2.get(),this._value[2]=this._port3.get(),this._value[3]=this._port4.get(),this.setValue(this._value)},rt.prototype.updateFromPort3f=function(){this._value[0]=this._port.get(),this._value[1]=this._port2.get(),this._value[2]=this._port3.get(),this.setValue(this._value)},rt.prototype.updateFromPort2f=function(){this._value[0]=this._port.get(),this._value[1]=this._port2.get(),this.setValue(this._value)},rt.prototype.updateFromPort=function(){this.setValue(this._port.get())},rt.prototype.updateValueF=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._shader.getCgl().gl.uniform1f(this._loc,this._value),this._cgl.profileData.profileUniformCount++},rt.prototype.setValueF=function(t){t!=this._value&&(this.needsUpdate=!0,this._value=t)},rt.prototype.updateValueI=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._shader.getCgl().gl.uniform1i(this._loc,this._value),this._cgl.profileData.profileUniformCount++},rt.prototype.updateValue2I=function(){this._value&&(this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._shader.getCgl().gl.uniform2i(this._loc,this._value[0],this._value[1]),this.needsUpdate=!1,this._cgl.profileData.profileUniformCount++)},rt.prototype.updateValue3I=function(){this._value&&(this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._shader.getCgl().gl.uniform3i(this._loc,this._value[0],this._value[1],this._value[2]),this.needsUpdate=!1,this._cgl.profileData.profileUniformCount++)},rt.prototype.updateValue4I=function(){this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._shader.getCgl().gl.uniform4i(this._loc,this._value[0],this._value[1],this._value[2],this._value[3]),this._cgl.profileData.profileUniformCount++},rt.prototype.setValueI=function(t){t!=this._value&&(this.needsUpdate=!0,this._value=t)},rt.prototype.setValue2I=function(t){t&&(this._oldValue?t[0]==this._oldValue[0]&&t[1]==this._oldValue[1]||(this._oldValue[0]=t[0],this._oldValue[1]=t[1],this.needsUpdate=!0):(this._oldValue=[t[0]-1,1],this.needsUpdate=!0),this._value=t)},rt.prototype.setValue3I=function(t){t&&(this._oldValue?t[0]==this._oldValue[0]&&t[1]==this._oldValue[1]&&t[2]==this._oldValue[2]||(this._oldValue[0]=t[0],this._oldValue[1]=t[1],this._oldValue[2]=t[2],this.needsUpdate=!0):(this._oldValue=[t[0]-1,1,2],this.needsUpdate=!0),this._value=t)},rt.prototype.setValue4I=function(t){this.needsUpdate=!0,this._value=t||vec4.create()},rt.prototype.updateValueBool=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._shader.getCgl().gl.uniform1i(this._loc,this._value?1:0),this._cgl.profileData.profileUniformCount++},rt.prototype.setValueBool=function(t){t!=this._value&&(this.needsUpdate=!0,this._value=t)},rt.prototype.setValueArray4F=function(t){this.needsUpdate=!0,this._value=t},rt.prototype.updateValueArray4F=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._value&&(this._shader.getCgl().gl.uniform4fv(this._loc,this._value),this._cgl.profileData.profileUniformCount++)},rt.prototype.setValueArray3F=function(t){this.needsUpdate=!0,this._value=t},rt.prototype.updateValueArray3F=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._value&&(this._shader.getCgl().gl.uniform3fv(this._loc,this._value),this._cgl.profileData.profileUniformCount++)},rt.prototype.setValueArray2F=function(t){this.needsUpdate=!0,this._value=t},rt.prototype.updateValueArray2F=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._value&&(this._shader.getCgl().gl.uniform2fv(this._loc,this._value),this._cgl.profileData.profileUniformCount++)},rt.prototype.setValueArrayF=function(t){this.needsUpdate=!0,this._value=t},rt.prototype.updateValueArrayF=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._value&&(this._shader.getCgl().gl.uniform1fv(this._loc,this._value),this._cgl.profileData.profileUniformCount++)},rt.prototype.setValueArrayT=function(t){this.needsUpdate=!0,this._value=t},rt.prototype.updateValue3F=function(){this._value&&(this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._shader.getCgl().gl.uniform3f(this._loc,this._value[0],this._value[1],this._value[2]),this.needsUpdate=!1,this._cgl.profileData.profileUniformCount++)},rt.prototype.setValue3F=function(t){t&&(this._oldValue?t[0]==this._oldValue[0]&&t[1]==this._oldValue[1]&&t[2]==this._oldValue[2]||(this._oldValue[0]=t[0],this._oldValue[1]=t[1],this._oldValue[2]=t[2],this.needsUpdate=!0):(this._oldValue=[t[0]-1,1,2],this.needsUpdate=!0),this._value=t)},rt.prototype.updateValue2F=function(){this._value&&(this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._shader.getCgl().gl.uniform2f(this._loc,this._value[0],this._value[1]),this.needsUpdate=!1,this._cgl.profileData.profileUniformCount++)},rt.prototype.setValue2F=function(t){t&&(this._oldValue?t[0]==this._oldValue[0]&&t[1]==this._oldValue[1]||(this._oldValue[0]=t[0],this._oldValue[1]=t[1],this.needsUpdate=!0):(this._oldValue=[t[0]-1,1],this.needsUpdate=!0),this._value=t)},rt.prototype.updateValue4F=function(){this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._value||(this._log.warn("no value for uniform",this._name,this),this._value=[0,0,0,0]),this.needsUpdate=!1,this._shader.getCgl().gl.uniform4f(this._loc,this._value[0],this._value[1],this._value[2],this._value[3]),this._cgl.profileData.profileUniformCount++},rt.prototype.setValue4F=function(t){"number"==typeof this.value&&(this.value=vec4.create()),t&&(this._oldValue?t[0]==this._oldValue[0]&&t[1]==this._oldValue[1]&&t[2]==this._oldValue[2]&&t[3]==this._oldValue[3]||(this._oldValue[0]=t[0],this._oldValue[1]=t[1],this._oldValue[2]=t[2],this.needsUpdate=!0):(this._oldValue=[t[0]-1,1,2,3],this.needsUpdate=!0),this._value=t)},rt.prototype.updateValueM4=function(){if(this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),!this._value||this._value.length%16!=0)return console.log("this.name",this._name,this._value);this._shader.getCgl().gl.uniformMatrix4fv(this._loc,!1,this._value),this._cgl.profileData.profileUniformCount++},rt.prototype.setValueM4=function(t){this.needsUpdate=!0,this._value=t||mat4.create()},rt.prototype.updateValueArrayT=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._value&&(this._shader.getCgl().gl.uniform1iv(this._loc,this._value),this._cgl.profileData.profileUniformCount++)},rt.prototype.updateValueT=function(){this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._cgl.profileData.profileUniformCount++,this._shader.getCgl().gl.uniform1i(this._loc,this._value),this.needsUpdate=!1},rt.prototype.setValueT=function(t){this.needsUpdate=!0,this._value=t};const nt=180/Math.PI,ot={MATH:{DEG2RAD:Math.PI/180,RAD2DEG:nt},SHADER:{SHADERVAR_VERTEX_POSITION:"vPosition",SHADERVAR_VERTEX_NUMBER:"attrVertIndex",SHADERVAR_VERTEX_NORMAL:"attrVertNormal",SHADERVAR_VERTEX_TEXCOORD:"attrTexCoord",SHADERVAR_INSTANCE_MMATRIX:"instMat",SHADERVAR_VERTEX_COLOR:"attrVertColor",SHADERVAR_UNI_PROJMAT:"projMatrix",SHADERVAR_UNI_VIEWMAT:"viewMatrix",SHADERVAR_UNI_MODELMAT:"modelMatrix",SHADERVAR_UNI_NORMALMAT:"normalMatrix",SHADERVAR_UNI_INVVIEWMAT:"inverseViewMatrix",SHADERVAR_UNI_VIEWPOS:"camPos"},BLEND_MODES:{BLEND_NONE:0,BLEND_NORMAL:1,BLEND_ADD:2,BLEND_SUB:3,BLEND_MUL:4}};const ht={lastMesh:null},at=function(t,e,i){this._cgl=t,this._log=new h("cgl_mesh"),this._bufVertexAttrib=null,this._bufVerticesIndizes=this._cgl.gl.createBuffer(),this._indexType=this._cgl.gl.UNSIGNED_SHORT,this._attributes=[],this._attribLocs={},this._geom=null,this._lastShader=null,this._numInstances=0,this._glPrimitive=i,this._preWireframeGeom=null,this.addVertexNumbers=!1,this.feedBackAttributes=[],this.setGeom(e),this._feedBacks=[],this._feedBacksChanged=!1,this._transformFeedBackLoc=-1,this._lastAttrUpdate=0,this._name="unknown",this._cgl.profileData.addHeavyEvent("mesh constructed",this._name),this._queryExt=null,Object.defineProperty(this,"numInstances",{get(){return this._numInstances},set(t){this.setNumInstances(t)}})};at.prototype.updateVertices=function(t){this.setAttribute(ot.SHADER.SHADERVAR_VERTEX_POSITION,t.vertices,3),this._numVerts=t.vertices.length/3},at.prototype.setAttributePointer=function(t,e,i,s){for(let r=0;r<this._attributes.length;r++)this._attributes[r].name==t&&(this._attributes[r].pointer||(this._attributes[r].pointer=[]),this._attributes[r].pointer.push({loc:-1,name:e,stride:i,offset:s,instanced:t==ot.SHADER.SHADERVAR_INSTANCE_MMATRIX}))},at.prototype.getAttribute=function(t){for(let e=0;e<this._attributes.length;e++)if(this._attributes[e].name==t)return this._attributes[e]},at.prototype.setAttributeRange=function(t,e,i,s){t&&(i||s)&&(t.name||(console.log(t),this._log.stack("no attrname?!")),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,t.buffer),this._cgl.profileData.profileMeshAttributes+=s-i||0,this._cgl.profileData.profileSingleMeshAttribute[this._name]=this._cgl.profileData.profileSingleMeshAttribute[this._name]||0,this._cgl.profileData.profileSingleMeshAttribute[this._name]+=s-i||0,t.numItems<e.length/t.itemSize&&this._resizeAttr(e,t),s>=e.length-1&&this._log.log(this._cgl.canvas.id+" "+t.name+" buffersubdata out of bounds ?",e.length,s,i,t),1==this._cgl.glVersion?this._cgl.gl.bufferSubData(this._cgl.gl.ARRAY_BUFFER,0,e):this._cgl.gl.bufferSubData(this._cgl.gl.ARRAY_BUFFER,4*i,e,i,s-i))},at.prototype._resizeAttr=function(t,e){e.buffer&&this._cgl.gl.deleteBuffer(e.buffer),e.buffer=this._cgl.gl.createBuffer(),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,e.buffer),this._bufferArray(t,e),e.numItems=t.length/e.itemSize},at.prototype._bufferArray=function(t,e){let i=null;t&&(this._cgl.debugOneFrame&&console.log("_bufferArray",t.length,e.name),t instanceof Float32Array?i=t:e&&i&&i.length==t.length?i.set(t):(i=new Float32Array(t),this._cgl.debugOneFrame&&console.log("_bufferArray create new float32array",t.length,e.name),this._cgl.profileData.profileNonTypedAttrib++,this._cgl.profileData.profileNonTypedAttribNames="("+this._name+":"+e.name+")"),e.arrayLength=i.length,this._cgl.gl.bufferData(this._cgl.gl.ARRAY_BUFFER,i,this._cgl.gl.DYNAMIC_DRAW))},at.prototype.addAttribute=at.prototype.updateAttribute=at.prototype.setAttribute=function(t,e,i,s){if(!e)throw this._log.error("mesh addAttribute - no array given! "+t),new Error;let r=null,n=!1,o=0;const h=e.length/i;for(this._cgl.profileData.profileMeshAttributes+=h||0,"function"==typeof s&&(r=s),"object"==typeof s&&(s.cb&&(r=s.cb),s.instanced&&(n=s.instanced)),t==ot.SHADER.SHADERVAR_INSTANCE_MMATRIX&&(n=!0),o=0;o<this._attributes.length;o++){const i=this._attributes[o];if(i.name==t)return i.numItems===h||this._resizeAttr(e,i),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,i.buffer),this._bufferArray(e,i),i}const a=this._cgl.gl.createBuffer();this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,a);let l=this._cgl.gl.FLOAT;s&&s.type&&(l=s.type);const c={buffer:a,name:t,cb:r,itemSize:i,numItems:h,startItem:0,instanced:n,type:l};return this._bufferArray(e,c),t==ot.SHADER.SHADERVAR_VERTEX_POSITION&&(this._bufVertexAttrib=c),this._attributes.push(c),this._attribLocs={},c},at.prototype.getAttributes=function(){return this._attributes},at.prototype.updateTexCoords=function(t){if(t.texCoords&&t.texCoords.length>0)this.setAttribute(ot.SHADER.SHADERVAR_VERTEX_TEXCOORD,t.texCoords,2);else{const e=new Float32Array(Math.round(t.vertices.length/3*2));this.setAttribute(ot.SHADER.SHADERVAR_VERTEX_TEXCOORD,e,2)}},at.prototype.updateNormals=function(t){if(t.vertexNormals&&t.vertexNormals.length>0)this.setAttribute("attrVertNormal",t.vertexNormals,3);else{const e=new Float32Array(Math.round(t.vertices.length));this.setAttribute("attrVertNormal",e,3)}},at.prototype._setVertexNumbers=function(t){if(!this._verticesNumbers||this._verticesNumbers.length!=this._numVerts||t){if(t)this._verticesNumbers=t;else{this._verticesNumbers=new Float32Array(this._numVerts);for(let t=0;t<this._numVerts;t++)this._verticesNumbers[t]=t}this.setAttribute(ot.SHADER.SHADERVAR_VERTEX_NUMBER,this._verticesNumbers,1,(t,e,i)=>{i.uniformNumVertices||(i.uniformNumVertices=new rt(i,"f","numVertices",this._numVerts)),i.uniformNumVertices.setValue(this._numVerts)})}},at.prototype.setVertexIndices=function(t){if(this._bufVerticesIndizes)if(t.length>0){for(let e=0;e<t.length;e++)if(t[e]>=this._numVerts)return void this._log.warn("invalid index in "+this._name);this._cgl.gl.bindBuffer(this._cgl.gl.ELEMENT_ARRAY_BUFFER,this._bufVerticesIndizes),t instanceof Float32Array&&this._log.warn("vertIndices float32Array: "+this._name),t instanceof Uint32Array?(this.vertIndicesTyped=t,this._indexType=this._cgl.gl.UNSIGNED_INT):t instanceof Uint16Array?this.vertIndicesTyped=t:this.vertIndicesTyped=new Uint16Array(t),this._cgl.gl.bufferData(this._cgl.gl.ELEMENT_ARRAY_BUFFER,this.vertIndicesTyped,this._cgl.gl.DYNAMIC_DRAW),this._bufVerticesIndizes.itemSize=1,this._bufVerticesIndizes.numItems=t.length}else this._bufVerticesIndizes.numItems=0;else this._log.warn("no bufVerticesIndizes: "+this._name)},at.prototype.setGeom=function(t,e){this._geom=t,null!=t.glPrimitive&&(this._glPrimitive=t.glPrimitive),this._geom&&this._geom.name&&(this._name="mesh "+this._geom.name),ht.lastMesh=null,this._cgl.profileData.profileMeshSetGeom++,this._disposeAttributes(),this.updateVertices(this._geom),this.setVertexIndices(this._geom.verticesIndices),this.updateTexCoords(this._geom),this.updateNormals(this._geom),this._geom.hasOwnProperty("tangents")&&this._geom.tangents&&this._geom.tangents.length>0&&this.setAttribute("attrTangent",this._geom.tangents,3),this._geom.hasOwnProperty("biTangents")&&this._geom.biTangents&&this._geom.biTangents.length>0&&this.setAttribute("attrBiTangent",this._geom.biTangents,3),this._geom.vertexColors.length>0&&(this._geom.vertexColors.flat&&this._geom.vertexColors.flat(100),this.setAttribute("attrVertColor",this._geom.vertexColors,4)),this.addVertexNumbers&&this._setVertexNumbers();const i=this._geom.getAttributes();for(const t in i)this.setAttribute(t,i[t].data,i[t].itemSize);e&&(this._geom=null)},at.prototype._preBind=function(t){for(let e=0;e<this._attributes.length;e++)this._attributes[e].cb&&this._attributes[e].cb(this._attributes[e],this._geom,t)},at.prototype._checkAttrLengths=function(){for(let t=0;t<this._attributes.length;t++)if(this._attributes[t].arrayLength/this._attributes[t].itemSize<this._attributes[0].arrayLength/this._attributes[0].itemSize){let t="unknown";this._geom&&(t=this._geom.name)}},at.prototype._bind=function(t){if(!t.isValid())return;let e=[];if(this._attribLocs[t.id]?e=this._attribLocs[t.id]:this._attribLocs[t.id]=e,this._lastShader=t,t.lastCompile>this._lastAttrUpdate||e.length!=this._attributes.length){this._lastAttrUpdate=t.lastCompile;for(let t=0;t<this._attributes.length;t++)e[t]=-1}for(let i=0;i<this._attributes.length;i++){const s=this._attributes[i];if(-1==e[i]&&s._attrLocationLastShaderTime!=t.lastCompile&&(s._attrLocationLastShaderTime=t.lastCompile,e[i]=this._cgl.glGetAttribLocation(t.getProgram(),s.name),this._cgl.profileData.profileAttrLoc++),-1!=e[i])if(this._cgl.gl.enableVertexAttribArray(e[i]),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,s.buffer),s.instanced)if(s.itemSize<=4)s.itemSize&&0!=s.itemSize||this._log.warn("instanced attrib itemsize error",this._geom.name,s),this._cgl.gl.vertexAttribPointer(e[i],s.itemSize,s.type,!1,4*s.itemSize,0),this._cgl.gl.vertexAttribDivisor(e[i],1);else if(16==s.itemSize){const t=64;this._cgl.gl.vertexAttribPointer(e[i],4,s.type,!1,t,0),this._cgl.gl.enableVertexAttribArray(e[i]+1),this._cgl.gl.vertexAttribPointer(e[i]+1,4,s.type,!1,t,16),this._cgl.gl.enableVertexAttribArray(e[i]+2),this._cgl.gl.vertexAttribPointer(e[i]+2,4,s.type,!1,t,32),this._cgl.gl.enableVertexAttribArray(e[i]+3),this._cgl.gl.vertexAttribPointer(e[i]+3,4,s.type,!1,t,48),this._cgl.gl.vertexAttribDivisor(e[i],1),this._cgl.gl.vertexAttribDivisor(e[i]+1,1),this._cgl.gl.vertexAttribDivisor(e[i]+2,1),this._cgl.gl.vertexAttribDivisor(e[i]+3,1)}else this._log.warn("unknown instance attrib size",s.name);else{if(s.itemSize&&0!=s.itemSize||this._log.warn("attrib itemsize error",this._name,s),this._cgl.gl.vertexAttribPointer(e[i],s.itemSize,s.type,!1,4*s.itemSize,0),s.pointer)for(let e=0;e<s.pointer.length;e++){const i=s.pointer[e];-1==i.loc&&(i.loc=this._cgl.glGetAttribLocation(t.getProgram(),i.name)),this._cgl.profileData.profileAttrLoc++,this._cgl.gl.enableVertexAttribArray(i.loc),this._cgl.gl.vertexAttribPointer(i.loc,s.itemSize,s.type,!1,i.stride,i.offset)}this.bindFeedback(s)}}0!==this._bufVerticesIndizes.numItems&&this._cgl.gl.bindBuffer(this._cgl.gl.ELEMENT_ARRAY_BUFFER,this._bufVerticesIndizes)},at.prototype.unBind=function(){const t=this._lastShader;if(this._lastShader=null,!t)return;let e=[];this._attribLocs[t.id]?e=this._attribLocs[t.id]:this._attribLocs[t.id]=e,ht.lastMesh=null;for(let t=0;t<this._attributes.length;t++)this._attributes[t].instanced&&(this._attributes[t].itemSize<=4?(-1!=e[t]&&this._cgl.gl.vertexAttribDivisor(e[t],0),e[t]>=0&&this._cgl.gl.disableVertexAttribArray(e[t])):(this._cgl.gl.vertexAttribDivisor(e[t],0),this._cgl.gl.vertexAttribDivisor(e[t]+1,0),this._cgl.gl.vertexAttribDivisor(e[t]+2,0),this._cgl.gl.vertexAttribDivisor(e[t]+3,0),this._cgl.gl.disableVertexAttribArray(e[t]+1),this._cgl.gl.disableVertexAttribArray(e[t]+2),this._cgl.gl.disableVertexAttribArray(e[t]+3))),-1!=e[t]&&this._cgl.gl.disableVertexAttribArray(e[t])},at.prototype.meshChanged=function(){return this._cgl.lastMesh&&this._cgl.lastMesh!=this},at.prototype.printDebug=function(t){console.log("--attributes");for(let t=0;t<this._attributes.length;t++)console.log("attribute "+t+" "+this._attributes[t].name)},at.prototype.setNumVertices=function(t){this._bufVertexAttrib.numItems=t},at.prototype.getNumVertices=function(){return this._bufVertexAttrib.numItems},at.prototype.render=function(t){if(!t||!t.isValid())return;if(this._checkAttrLengths(),this._geom&&(!this._preWireframeGeom||t.wireframe||this._geom.isIndexed()||(this.setGeom(this._preWireframeGeom),this._preWireframeGeom=null),t.wireframe)){let t=!1;this._geom.isIndexed()&&(this._preWireframeGeom||(this._preWireframeGeom=this._geom,this._geom=this._geom.copy()),this._geom.unIndex(),t=!0),this._geom.getAttribute("attrBarycentric")||(this._preWireframeGeom||(this._preWireframeGeom=this._geom,this._geom=this._geom.copy()),t=!0,this._geom.calcBarycentric()),t&&this.setGeom(this._geom)}let e=!1;ht.lastMesh!=this&&(ht.lastMesh&&ht.lastMesh.unBind(),e=!0),e&&this._preBind(t),t.bind(),t.bindTextures&&t.bindTextures(),this._bind(t),this.addVertexNumbers&&this._setVertexNumbers(),ht.lastMesh=this;let i=this._cgl.gl.TRIANGLES;void 0!==this._glPrimitive&&(i=this._glPrimitive),null!==t.glPrimitive&&(i=t.glPrimitive);let s=1,r=this._cgl.profileData.doProfileGlQuery,n=!1;if(r){let e=this._name+" "+t.getName()+" #"+t.id;this._numInstances&&(e+=" instanced "+this._numInstances+"x");let i=this._cgl.profileData.glQueryData[e];if(i||(i={id:e,num:0},this._cgl.profileData.glQueryData[e]=i),this._queryExt||!1===this._queryExt||(this._queryExt=this._cgl.gl.getExtension("EXT_disjoint_timer_query_webgl2")||!1),this._queryExt){if(i._drawQuery){if(this._cgl.gl.getQueryParameter(i._drawQuery,this._cgl.gl.QUERY_RESULT_AVAILABLE)){const t=this._cgl.gl.getQueryParameter(i._drawQuery,this._cgl.gl.QUERY_RESULT)/1e6;i._times+=t,i._numcount++,i.when=performance.now(),i._drawQuery=null,i.queryStarted=!1}}i.queryStarted||(i._drawQuery=this._cgl.gl.createQuery(),this._cgl.gl.beginQuery(this._queryExt.TIME_ELAPSED_EXT,i._drawQuery),n=i.queryStarted=!0)}}if(this.hasFeedbacks()?this.drawFeedbacks(t,i):0===this._bufVerticesIndizes.numItems?(i==this._cgl.gl.TRIANGLES&&(s=3),0===this._numInstances?this._cgl.gl.drawArrays(i,this._bufVertexAttrib.startItem,this._bufVertexAttrib.numItems-this._bufVertexAttrib.startItem):this._cgl.gl.drawArraysInstanced(i,this._bufVertexAttrib.startItem,this._bufVertexAttrib.numItems,this._numInstances)):0===this._numInstances?this._cgl.gl.drawElements(i,this._bufVerticesIndizes.numItems,this._indexType,0):this._cgl.gl.drawElementsInstanced(i,this._bufVerticesIndizes.numItems,this._indexType,0,this._numInstances),this._cgl.debugOneFrame&&this._cgl.gl.getError()!=this._cgl.gl.NO_ERROR){this._log.error("mesh draw gl error"),this._log.error("mesh",this),this._log.error("shader",t);for(let e=0;e<this._cgl.gl.getProgramParameter(t.getProgram(),this._cgl.gl.ACTIVE_ATTRIBUTES);e++){const i=this._cgl.gl.getActiveAttrib(t.getProgram(),e).name;this._log.error("attrib ",i)}}this._cgl.profileData.profileMeshNumElements+=this._bufVertexAttrib.numItems/s*(this._numInstances||1),this._cgl.profileData.profileMeshDraw++,r&&n&&this._cgl.gl.endQuery(this._queryExt.TIME_ELAPSED_EXT),this.unBind()},at.prototype.setNumInstances=function(t){if(t=Math.max(0,t),this._numInstances!=t){this._numInstances=t;const e=new Float32Array(t);for(let i=0;i<t;i++)e[i]=i;this.setAttribute("instanceIndex",e,1,{instanced:!0})}},at.prototype._disposeAttributes=function(){if(this._attributes){for(let t=0;t<this._attributes.length;t++)this._attributes[t].buffer&&(this._cgl.gl.deleteBuffer(this._attributes[t].buffer),this._attributes[t].buffer=null);this._attributes.length=0}},at.prototype.dispose=function(){this._bufVertexAttrib&&this._bufVertexAttrib.buffer&&this._cgl.gl.deleteBuffer(this._bufVertexAttrib.buffer),this._bufVerticesIndizes&&this._cgl.gl.deleteBuffer(this._bufVerticesIndizes),this._bufVerticesIndizes=null,this._disposeAttributes()},function(t){t.prototype.hasFeedbacks=function(){return this._feedBacks.length>0},t.prototype.removeFeedbacks=function(t){this._feedbacks&&(this._feedbacks.length=0,this._feedBacksChanged=!0)},t.prototype.setAttributeFeedback=function(){},t.prototype.setFeedback=function(t,e,i){let s={nameOut:e},r=!1;this.unBindFeedbacks();for(let t=0;t<this._feedBacks.length;t++)this._feedBacks[t].nameOut==e&&(s=this._feedBacks[t],r=!0);return r||(this._feedBacksChanged=!0),s.initialArr=i,s.attrib=t,s.outBuffer&&this._cgl.gl.deleteBuffer(s.outBuffer),s.outBuffer=this._cgl.gl.createBuffer(),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,s.outBuffer),this._cgl.gl.bufferData(this._cgl.gl.ARRAY_BUFFER,s.initialArr,this._cgl.gl.STATIC_DRAW),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,s.attrib.buffer),this._cgl.gl.bufferData(this._cgl.gl.ARRAY_BUFFER,s.initialArr,this._cgl.gl.STATIC_DRAW),r||this._feedBacks.push(s),s},t.prototype.bindFeedback=function(t){if(!this._feedBacks||0===this._feedBacks.length)return;-1==this._transformFeedBackLoc&&(this._transformFeedBackLoc=this._cgl.gl.createTransformFeedback()),this._cgl.gl.bindTransformFeedback(this._cgl.gl.TRANSFORM_FEEDBACK,this._transformFeedBackLoc);let e=!1;for(let i=0;i<this._feedBacks.length;i++){const s=this._feedBacks[i];s.attrib==t&&(e=!0,this._cgl.gl.bindBufferBase(this._cgl.gl.TRANSFORM_FEEDBACK_BUFFER,i,s.outBuffer))}},t.prototype.drawFeedbacks=function(t,e){let i=0;if(this._feedBacksChanged){const e=[];for(this._cgl.gl.bindTransformFeedback(this._cgl.gl.TRANSFORM_FEEDBACK,this._transformFeedBackLoc),i=0;i<this._feedBacks.length;i++)e.push(this._feedBacks[i].nameOut);return t.setFeedbackNames(e),console.log("feedbacknames",e),t.compile(),this._feedBacksChanged=!1,this._cgl.gl.bindTransformFeedback(this._cgl.gl.TRANSFORM_FEEDBACK,null),void console.log("changed finished")}this._cgl.gl.beginTransformFeedback(this.glPrimitive),this._cgl.gl.drawArrays(e,0,this._feedBacks[0].attrib.numItems),this._cgl.gl.endTransformFeedback(),this.unBindFeedbacks(),this.feedBacksSwapBuffers()},t.prototype.unBindFeedbacks=function(){for(let t=0;t<this._feedBacks.length;t++)this._cgl.gl.bindBufferBase(this._cgl.gl.TRANSFORM_FEEDBACK_BUFFER,t,null);this._cgl.gl.bindTransformFeedback(this._cgl.gl.TRANSFORM_FEEDBACK,null)},t.prototype.feedBacksSwapBuffers=function(){for(let t=0;t<this._feedBacks.length;t++){const e=this._feedBacks[t].attrib.buffer;this._feedBacks[t].attrib.buffer=this._feedBacks[t].outBuffer,this._feedBacks[t].outBuffer=e}}}(at);const lt={getSimpleRect:function(t,e){const i=new Y(e);return i.vertices=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],i.texCoords=[1,1,0,1,1,0,0,0],i.verticesIndices=[0,1,2,2,1,3],i.vertexNormals=[0,0,0,0,0,0,0,0,0,0,0,0],new at(t,i)}},ct=function(t,e){this._cgl=t,this._log=new h("cgl_TextureEffect"),t.TextureEffectMesh||this.createMesh(),this._textureSource=null,this._options=e,this.imgCompVer=0,this.aspectRatio=1,this._textureTarget=null,this._frameBuf=this._cgl.gl.createFramebuffer(),this._frameBuf2=this._cgl.gl.createFramebuffer(),this._renderbuffer=this._cgl.gl.createRenderbuffer(),this._renderbuffer2=this._cgl.gl.createRenderbuffer(),this.switched=!1,this.depth=!1};ct.prototype.getWidth=function(){return this._textureSource.width},ct.prototype.getHeight=function(){return this._textureSource.height},ct.prototype.setSourceTexture=function(t){t.textureType==L.TYPE_FLOAT&&this._cgl.gl.getExtension("EXT_color_buffer_float"),null===t?(this._textureSource=new L(this._cgl),this._textureSource.setSize(16,16)):this._textureSource=t,this._textureSource.compareSettings(this._textureTarget)||(this._textureTarget&&this._textureTarget.delete(),this._textureTarget=this._textureSource.clone(),this._cgl.profileData.profileEffectBuffercreate++,this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._frameBuf),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,this._renderbuffer),this.depth&&this._cgl.gl.renderbufferStorage(this._cgl.gl.RENDERBUFFER,this._cgl.gl.DEPTH_COMPONENT16,this._textureSource.width,this._textureSource.height),this._cgl.gl.framebufferTexture2D(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.COLOR_ATTACHMENT0,this._cgl.gl.TEXTURE_2D,this._textureTarget.tex,0),this.depth&&this._cgl.gl.framebufferRenderbuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.DEPTH_ATTACHMENT,this._cgl.gl.RENDERBUFFER,this._renderbuffer),this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_2D,null),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,null),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,null),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._frameBuf2),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,this._renderbuffer2),this.depth&&this._cgl.gl.renderbufferStorage(this._cgl.gl.RENDERBUFFER,this._cgl.gl.DEPTH_COMPONENT16,this._textureSource.width,this._textureSource.height),this._cgl.gl.framebufferTexture2D(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.COLOR_ATTACHMENT0,this._cgl.gl.TEXTURE_2D,this._textureSource.tex,0),this.depth&&this._cgl.gl.framebufferRenderbuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.DEPTH_ATTACHMENT,this._cgl.gl.RENDERBUFFER,this._renderbuffer2),this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_2D,null),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,null),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,null)),this.aspectRatio=this._textureSource.width/this._textureSource.height},ct.prototype.continueEffect=function(){this._cgl.pushDepthTest(!1),this._cgl.pushModelMatrix(),this._cgl.pushPMatrix(),this._cgl.gl.viewport(0,0,this.getCurrentTargetTexture().width,this.getCurrentTargetTexture().height),mat4.perspective(this._cgl.pMatrix,45,this.getCurrentTargetTexture().width/this.getCurrentTargetTexture().height,.1,1100),this._cgl.pushPMatrix(),mat4.identity(this._cgl.pMatrix),this._cgl.pushViewMatrix(),mat4.identity(this._cgl.vMatrix),this._cgl.pushModelMatrix(),mat4.identity(this._cgl.mvMatrix)},ct.prototype.startEffect=function(t){this._textureTarget?(this.switched=!1,this.continueEffect(),t&&(this._bgTex=t),this._countEffects=0):this._log.warn("effect has no target")},ct.prototype.endEffect=function(){this._cgl.popDepthTest(),this._cgl.popModelMatrix(),this._cgl.popPMatrix(),this._cgl.popModelMatrix(),this._cgl.popViewMatrix(),this._cgl.popPMatrix(),this._cgl.resetViewPort()},ct.prototype.bind=function(){null!==this._textureSource?this.switched?(this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._frameBuf2),this._cgl.pushGlFrameBuffer(this._frameBuf2)):(this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._frameBuf),this._cgl.pushGlFrameBuffer(this._frameBuf)):this._log.warn("no base texture set!")},ct.prototype.finish=function(){null!==this._textureSource?(this._cgl.TextureEffectMesh.render(this._cgl.getShader()),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.popGlFrameBuffer()),this._cgl.profileData.profileTextureEffect++,this._textureTarget.filter==L.FILTER_MIPMAP&&(this.switched?(this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_2D,this._textureSource.tex),this._textureSource.updateMipMap()):(this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_2D,this._textureTarget.tex),this._textureTarget.updateMipMap()),this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_2D,null)),this.switched=!this.switched,this._countEffects++):this._log.warn("no base texture set!")},ct.prototype.getCurrentTargetTexture=function(){return this.switched?this._textureSource:this._textureTarget},ct.prototype.getCurrentSourceTexture=function(){return 0==this._countEffects&&this._bgTex?this._bgTex:this.switched?this._textureTarget:this._textureSource},ct.prototype.delete=function(){this._textureTarget&&this._textureTarget.delete(),this._textureSource&&this._textureSource.delete(),this._cgl.gl.deleteRenderbuffer(this._renderbuffer),this._cgl.gl.deleteFramebuffer(this._frameBuf)},ct.prototype.createMesh=function(){this._cgl.TextureEffectMesh=lt.getSimpleRect(this._cgl,"texEffectRect")},ct.checkOpNotInTextureEffect=function(t){return t.uiAttribs.error&&!t.patch.cgl.currentTextureEffect?(t.setUiError("textureeffect",null),!0):!t.patch.cgl.currentTextureEffect||(t.patch.cgl.currentTextureEffect&&!t.uiAttribs.error?(t.setUiError("textureeffect","This op can not be a child of a ImageCompose/texture effect! imagecompose should only have textureeffect childs.",0),!1):!t.patch.cgl.currentTextureEffect)},ct.checkOpInEffect=function(t,e){if(e=e||0,t.patch.cgl.currentTextureEffect){if(t.uiAttribs.uierrors&&t.patch.cgl.currentTextureEffect.imgCompVer>=e)return t.setUiError("texeffect",null),!0;e&&t.patch.cgl.currentTextureEffect.imgCompVer<e&&t.setUiError("texeffect","This op must be a child of an ImageCompose op with version >="+e+' <span class="button-small" onclick="gui.patchView.downGradeOp(\''+t.id+"','"+t.name+"')\">Downgrade</span> to previous version",1)}return!!t.patch.cgl.currentTextureEffect||(t.patch.cgl.currentTextureEffect||t.uiAttribs.uierrors&&0!=t.uiAttribs.uierrors.length?!!t.patch.cgl.currentTextureEffect:(t.setUiError("texeffect",'This op must be a child of an ImageCompose op! More infos <a href="https://docs.cables.gl/image_composition/image_composition.html" target="_blank">here</a>. ',1),!1))},ct.getBlendCode=function(t){let e="".endl()+"vec3 _blend(vec3 base,vec3 blend)".endl()+"{".endl()+"   vec3 colNew=blend;".endl()+"   #ifdef BM_MULTIPLY".endl()+"       colNew=base*blend;".endl()+"   #endif".endl()+"   #ifdef BM_MULTIPLY_INV".endl()+"       colNew=base* vec3(1.0)-blend;".endl()+"   #endif".endl()+"   #ifdef BM_AVERAGE".endl()+"       colNew=((base + blend) / 2.0);".endl()+"   #endif".endl()+"   #ifdef BM_ADD".endl()+"       colNew=min(base + blend, vec3(1.0));".endl()+"   #endif".endl()+"   #ifdef BM_SUBTRACT_ONE".endl()+"       colNew=max(base + blend - vec3(1.0), vec3(0.0));".endl()+"   #endif".endl()+"   #ifdef BM_SUBTRACT".endl()+"       colNew=base - blend;".endl()+"   #endif".endl()+"   #ifdef BM_DIFFERENCE".endl()+"       colNew=abs(base - blend);".endl()+"   #endif".endl()+"   #ifdef BM_NEGATION".endl()+"       colNew=(vec3(1.0) - abs(vec3(1.0) - base - blend));".endl()+"   #endif".endl()+"   #ifdef BM_EXCLUSION".endl()+"       colNew=(base + blend - 2.0 * base * blend);".endl()+"   #endif".endl()+"   #ifdef BM_LIGHTEN".endl()+"       colNew=max(blend, base);".endl()+"   #endif".endl()+"   #ifdef BM_DARKEN".endl()+"       colNew=min(blend, base);".endl()+"   #endif".endl()+"   #ifdef BM_OVERLAY".endl()+"      #define BlendOverlayf(base, blend)  (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)))".endl()+"      colNew=vec3(BlendOverlayf(base.r, blend.r),BlendOverlayf(base.g, blend.g),BlendOverlayf(base.b, blend.b));".endl()+"   #endif".endl()+"   #ifdef BM_SCREEN".endl()+"      #define BlendScreenf(base, blend)       (1.0 - ((1.0 - base) * (1.0 - blend)))".endl()+"      colNew=vec3(BlendScreenf(base.r, blend.r),BlendScreenf(base.g, blend.g),BlendScreenf(base.b, blend.b));".endl()+"   #endif".endl()+"   #ifdef BM_SOFTLIGHT".endl()+"      #define BlendSoftLightf(base, blend)    ((blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend)))".endl()+"      colNew=vec3(BlendSoftLightf(base.r, blend.r),BlendSoftLightf(base.g, blend.g),BlendSoftLightf(base.b, blend.b));".endl()+"   #endif".endl()+"   #ifdef BM_HARDLIGHT".endl()+"      #define BlendOverlayf(base, blend)  (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)))".endl()+"      colNew=vec3(BlendOverlayf(base.r, blend.r),BlendOverlayf(base.g, blend.g),BlendOverlayf(base.b, blend.b));".endl()+"   #endif".endl()+"   #ifdef BM_COLORDODGE".endl()+"      #define BlendColorDodgef(base, blend)   ((blend == 1.0) ? blend : min(base / (1.0 - blend), 1.0))".endl()+"      colNew=vec3(BlendColorDodgef(base.r, blend.r),BlendColorDodgef(base.g, blend.g),BlendColorDodgef(base.b, blend.b));".endl()+"   #endif".endl()+"   #ifdef BM_COLORBURN".endl()+"      #define BlendColorBurnf(base, blend)    ((blend == 0.0) ? blend : max((1.0 - ((1.0 - base) / blend)), 0.0))".endl()+"      colNew=vec3(BlendColorBurnf(base.r, blend.r),BlendColorBurnf(base.g, blend.g),BlendColorBurnf(base.b, blend.b));".endl()+"   #endif".endl()+"   return colNew;".endl()+"}".endl();return t||(e+="vec4 cgl_blend(vec4 oldColor,vec4 newColor,float amount)".endl()+"{".endl()+"vec4 col=vec4( _blend(oldColor.rgb,newColor.rgb) ,1.0);".endl()+"col=vec4( mix( col.rgb, oldColor.rgb ,1.0-oldColor.a*amount),1.0);".endl()+"return col;".endl()+"}".endl()),t>=3&&(e+="vec4 cgl_blendPixel(vec4 base,vec4 col,float amount)".endl()+"{".endl()+"vec3 colNew=_blend(base.rgb,col.rgb);".endl()+"float newA=clamp(base.a+(col.a*amount),0.,1.);".endl()+"#ifdef BM_ALPHAMASKED".endl()+"newA=base.a;".endl()+"#endif".endl()+"return vec4(".endl()+"mix(colNew,base.rgb,1.0-(amount*col.a)),".endl()+"newA);".endl()+"}".endl()),e},ct.onChangeBlendSelect=function(t,e,i){t.toggleDefine("BM_NORMAL","normal"==e),t.toggleDefine("BM_MULTIPLY","multiply"==e),t.toggleDefine("BM_MULTIPLY_INV","multiply invert"==e),t.toggleDefine("BM_AVERAGE","average"==e),t.toggleDefine("BM_ADD","add"==e),t.toggleDefine("BM_SUBTRACT_ONE","subtract one"==e),t.toggleDefine("BM_SUBTRACT","subtract"==e),t.toggleDefine("BM_DIFFERENCE","difference"==e),t.toggleDefine("BM_NEGATION","negation"==e),t.toggleDefine("BM_EXCLUSION","exclusion"==e),t.toggleDefine("BM_LIGHTEN","lighten"==e),t.toggleDefine("BM_DARKEN","darken"==e),t.toggleDefine("BM_OVERLAY","overlay"==e),t.toggleDefine("BM_SCREEN","screen"==e),t.toggleDefine("BM_SOFTLIGHT","softlight"==e),t.toggleDefine("BM_HARDLIGHT","hardlight"==e),t.toggleDefine("BM_COLORDODGE","color dodge"==e),t.toggleDefine("BM_COLORBURN","color burn"==e),t.toggleDefine("BM_ALPHAMASKED",i)},ct.AddBlendSelect=function(t,e,i){return t.inValueSelect(e||"Blend Mode",["normal","lighten","darken","multiply","multiply invert","average","add","subtract","difference","negation","exclusion","overlay","screen","color dodge","color burn","softlight","hardlight","subtract one"],i||"normal")},ct.AddBlendAlphaMask=function(t,e,i){return t.inSwitch(e||"Alpha Mask",["Off","On"],i||"Off")},ct.setupBlending=function(t,e,i,s,r){const n=()=>{let s=!1;r&&(s="On"==r.get()),ct.onChangeBlendSelect(e,i.get(),s);let n=i.get();"normal"==n?n=null:"multiply"==n?n="mul":"multiply invert"==n?n="mulinv":"lighten"==n?n="light":"darken"==n?n="darken":"average"==n?n="avg":"subtract one"==n?n="sub one":"subtract"==n?n="sub":"difference"==n?n="diff":"negation"==n||"negation"==n||"negation"==n?n="neg":"exclusion"==n?n="exc":"overlay"==n?n="ovl":"color dodge"==n?n="dodge":"color burn"==n?n="burn":"softlight"==n?n="soft":"hardlight"==n&&(n="hard"),t.setUiAttrib({extendTitle:n})};t.setPortGroup("Blending",[i,s,r]);let o=!1;i.onChange=n,r&&(r.onChange=n,o="On"==r.get()),ct.onChangeBlendSelect(e,i.get(),o)};const ut={"CGL.BLENDMODES":function(){this.name="blendmodes",this.srcHeadFrag=ct.getBlendCode()},"CGL.BLENDMODES3":function(){this.name="blendmodes3",this.srcHeadFrag=ct.getBlendCode(3)},"CGL.LUMINANCE":function(){this.name="luminance",this.srcHeadFrag="".endl()+"float cgl_luminance(vec3 c)".endl()+"{".endl()+"    return dot(vec3(0.2126,0.7152,0.0722),c);".endl()+"}".endl()},"CGL.RANDOM_OLD":function(){this.name="randomNumber",this.srcHeadFrag="".endl()+"float cgl_random(vec2 co)".endl()+"{".endl()+"    return fract(sin(dot(co.xy ,vec2(12.9898,4.1414))) * 432758.5453);".endl()+"}".endl()+"vec3 cgl_random3(vec2 co)".endl()+"{".endl()+"    return vec3( cgl_random(co),cgl_random(co+0.5711),cgl_random(co+1.5711));".endl()+"}"},"CGL.RANDOM_LOW":function(){this.name="randomNumber",this.srcHeadFrag="".endl()+"float cgl_random(vec2 co)".endl()+"{".endl()+"    return fract(sin(dot(co.xy ,vec2(12.9898,4.1414))) * 358.5453);".endl()+"}".endl()+"vec3 cgl_random3(vec2 co)".endl()+"{".endl()+"    return vec3( cgl_random(co),cgl_random(co+0.5711),cgl_random(co+1.5711));".endl()+"}"},"CGL.RANDOM_TEX":function(){this.name="randomNumbertex",this.srcHeadFrag="".endl()+"UNI sampler2D CGLRNDTEX;".endl()+"float cgl_random(vec2 co)".endl()+"{".endl()+"    return texture(CGLRNDTEX,co*5711.0).r;".endl()+"}".endl()+"vec3 cgl_random3(vec2 co)".endl()+"{".endl()+"    return texture(CGLRNDTEX,co*5711.0).rgb;".endl()+"}",this.initUniforms=function(t){return[new rt(t,"t","CGLRNDTEX",7)]},this.onBind=function(t,e){L.getRandomTexture(t),t.setTexture(7,L.getRandomTexture(t).tex)}}},gt=function(){return window.performance.now()},_t=function(){return gt()},pt=function(){CABLES.EventTarget.apply(this),this._timeStart=gt(),this._timeOffset=0,this._currentTime=0,this._lastTime=0,this._paused=!0,this._delay=0,this._eventsPaused=!1,this.overwriteTime=-1,this.cbPlayPause=[],this.cbTimeChange=[]};pt.prototype._getTime=function(){return this._lastTime=(gt()-this._timeStart)/1e3,this._lastTime+this._timeOffset},pt.prototype._eventPlayPause=function(){if(this.emitEvent("playPause"),!this._eventsPaused)for(const t in this.cbPlayPause)this.cbPlayPause[t]()},pt.prototype._eventTimeChange=function(){if(!this._eventsPaused)for(const t in this.cbTimeChange)this.cbTimeChange[t]()},pt.prototype.setDelay=function(t){this._delay=t,this._eventTimeChange()},pt.prototype.isPlaying=function(){return!this._paused},pt.prototype.update=function(){if(!this._paused)return this._currentTime=this._getTime(),this._currentTime},pt.prototype.getMillis=function(){return 1e3*this.get()},pt.prototype.get=pt.prototype.getTime=function(){return this.overwriteTime>=0?this.overwriteTime-this._delay:this._currentTime-this._delay},pt.prototype.togglePlay=function(){this._paused?this.play():this.pause()},pt.prototype.setTime=function(t){t<0&&(t=0),this._timeStart=gt(),this._timeOffset=t,this._currentTime=t,this._eventTimeChange()},pt.prototype.setOffset=function(t){this._currentTime+t<0?(this._timeStart=gt(),this._timeOffset=0,this._currentTime=0):(this._timeOffset+=t,this._currentTime=this._lastTime+this._timeOffset),this._eventTimeChange()},pt.prototype.play=function(){this._timeStart=gt(),this._paused=!1,this._eventPlayPause()},pt.prototype.pause=function(){this._timeOffset=this._currentTime,this._paused=!0,this._eventPlayPause()},pt.prototype.pauseEvents=function(t){this._eventsPaused=t},pt.prototype.onPlayPause=function(t){t&&"function"==typeof t&&this.cbPlayPause.push(t)},pt.prototype.onTimeChange=function(t){t&&"function"==typeof t&&this.cbTimeChange.push(t)};const dt=Math.PI/180,ft=(Math.PI,-1!=window.navigator.userAgent.indexOf("Windows")),mt=function(t){let e;if(t.wheelDelta)e=t.wheelDelta%120-0==-0?t.wheelDelta/120:t.wheelDelta/30,e*=-1.5,ft&&(e*=2);else{let i=t.deltaY;t.shiftKey&&(i=t.deltaX);const s=i||t.detail;e=-(s%3?10*s:s/3),e*=-3}return e>20&&(e=20),e<-20&&(e=-20),e},Et=mt,Tt=mt,At={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},bt=/[&<>"']/g,yt=RegExp(bt.source);const vt=function(t,e){if(!t)throw new Error("shader constructed without cgl "+e);this._log=new h("cgl_shader"),this._cgl=t,e||this._log.stack("no shader name given"),this._name=e||"unknown",this.glslVersion=0,t.glVersion>1&&(this.glslVersion=300),this.id=y(),this._isValid=!0,this._program=null,this._uniforms=[],this._drawBuffers=[!0],this._defines=[],this._needsRecompile=!0,this._compileReason="initial",this._projMatrixUniform=null,this._mvMatrixUniform=null,this._mMatrixUniform=null,this._vMatrixUniform=null,this._camPosUniform=null,this._normalMatrixUniform=null,this._inverseViewMatrixUniform=null,this._attrVertexPos=-1,this.precision=t.patch.config.glslPrecision||"highp",this._pMatrixState=-1,this._vMatrixState=-1,this._modGroupCount=0,this._feedBackNames=[],this._attributes=[],this.glPrimitive=null,this.offScreenPass=!1,this._extensions=[],this.srcVert=this.getDefaultVertexShader(),this.srcFrag=this.getDefaultFragmentShader(),this.lastCompile=0,this._moduleNames=[],this._modules=[],this._moduleNumId=0,this._libs=[],this._structNames=[],this._structUniformNames=[],this._textureStackUni=[],this._textureStackTex=[],this._textureStackType=[],this._textureStackTexCgl=[],this._tempNormalMatrix=mat4.create(),this._tempCamPosMatrix=mat4.create(),this._tempInverseViewMatrix=mat4.create(),this.setModules(["MODULE_VERTEX_POSITION","MODULE_COLOR","MODULE_BEGIN_FRAG"])};vt.prototype.isValid=function(){return this._isValid},vt.prototype.getCgl=function(){return this._cgl},vt.prototype.getName=function(){return this._name},vt.prototype.enableExtension=function(t){this.setWhyCompile("enable extension "+t),this._needsRecompile=!0,this._extensions.push(t)},vt.prototype.getAttrVertexPos=function(){return this._attrVertexPos},vt.prototype.hasTextureUniforms=function(){for(let t=0;t<this._uniforms.length;t++)if("t"==this._uniforms[t].getType())return!0;return!1},vt.prototype.setWhyCompile=function(t){this._compileReason=t},vt.prototype.copyUniformValues=function(t){for(let e=0;e<t._uniforms.length;e++)this._uniforms[e]?(-1!=t._uniforms[e].getName().indexOf("pathPoints")&&console.log("copyUniformValues",t._uniforms[e].getName(),t._uniforms[e].getValue()),this.getUniform(t._uniforms[e].getName()).set(t._uniforms[e].getValue())):this._log.log("unknown uniform?!");this.popTextures();for(let e=0;e<t._textureStackUni.length;e++)this._textureStackUni[e]=t._textureStackUni[e],this._textureStackTex[e]=t._textureStackTex[e],this._textureStackType[e]=t._textureStackType[e],this._textureStackTexCgl[e]=t._textureStackTexCgl[e]},vt.prototype.copy=function(){const t=new vt(this._cgl,this._name+" copy");t.setSource(this.srcVert,this.srcFrag),t._modules=JSON.parse(JSON.stringify(this._modules)),t._defines=JSON.parse(JSON.stringify(this._defines)),t._modGroupCount=this._modGroupCount,t._moduleNames=this._moduleNames,t.glPrimitive=this.glPrimitive,t.offScreenPass=this.offScreenPass,t._extensions=this._extensions,t.wireframe=this.wireframe;for(let e=0;e<this._uniforms.length;e++){this._uniforms[e].copy(t).resetLoc()}return this.setWhyCompile("copy"),t._needsRecompile=!0,t},vt.prototype.setSource=function(t,e){this.srcVert=t,this.srcFrag=e,this.setWhyCompile("Source changed"),this._needsRecompile=!0},vt.prototype._addLibs=function(t){for(const e in ut)if(t.indexOf(e)>-1){const i=new ut[e];t=t.replace("{{"+e+"}}",i.srcHeadFrag),this._libs.push(i),i.initUniforms&&i.initUniforms(this)}return t},vt.prototype.createStructUniforms=function(){let t="",e="";this._structNames=[],this._injectedStringsFrag={},this._injectedStringsVert={},this._structUniformNamesIndicesFrag=[],this._structUniformNamesIndicesVert=[];for(let i=0;i<this._uniforms.length;i++)if(this._uniforms[i].isStructMember()){const s="{{INJECTION_POINT_STRUCT_"+this._uniforms[i]._structName+"}}";if(-1===this._structNames.indexOf(this._uniforms[i]._structName)){const r="struct "+this._uniforms[i]._structName+" {".endl()+s+"};".endl().endl();"both"!==this._uniforms[i].getShaderType()&&"frag"!==this._uniforms[i].getShaderType()||(t=t.concat(r)),"both"!==this._uniforms[i].getShaderType()&&"vert"!==this._uniforms[i].getShaderType()||(e=e.concat(r)),this._structNames.push(this._uniforms[i]._structName),this._injectedStringsFrag[this._uniforms[i]._structName]=[],this._injectedStringsVert[this._uniforms[i]._structName]=[]}let r="";this._uniforms[i].comment&&(r=" // "+this._uniforms[i].comment);let n="";if(null==this._uniforms[i].getGlslTypeString()&&(n+="//"),n+="  "+this._uniforms[i].getGlslTypeString()+" "+this._uniforms[i]._propertyName+";"+r,"both"===this._uniforms[i].getShaderType()){if(-1===this._injectedStringsFrag[this._uniforms[i]._structName].indexOf(n)&&-1===this._injectedStringsVert[this._uniforms[i]._structName].indexOf(n)){const r=t.lastIndexOf(s),o=e.lastIndexOf(s);t=t.slice(0,r)+n+t.slice(r-1),e=e.slice(0,o)+n+e.slice(o-1),this._injectedStringsFrag[this._uniforms[i]._structName].push(n),this._injectedStringsVert[this._uniforms[i]._structName].push(n)}-1===this._structUniformNamesIndicesFrag.indexOf(i)&&this._structUniformNamesIndicesFrag.push(i),-1===this._structUniformNamesIndicesVert.indexOf(i)&&this._structUniformNamesIndicesVert.push(i)}else if("frag"===this._uniforms[i].getShaderType()){if(-1===this._injectedStringsFrag[this._uniforms[i]._structName].indexOf(n)){const e=t.lastIndexOf(s);t=t.slice(0,e)+n+t.slice(e-1),this._injectedStringsFrag[this._uniforms[i]._structName].push(n)}-1===this._structUniformNamesIndicesFrag.indexOf(i)&&this._structUniformNamesIndicesFrag.push(i)}else if("vert"===this._uniforms[i].getShaderType()){if(-1===this._injectedStringsVert[this._uniforms[i]._structName].indexOf(n)){const t=e.lastIndexOf(s);e=e.slice(0,t)+n+e.slice(t-1),this._injectedStringsVert[this._uniforms[i]._structName].push(n)}-1===this._structUniformNamesIndicesVert.indexOf(i)&&this._structUniformNamesIndicesVert.push(i)}}this._uniDeclarationsFrag=[],this._uniDeclarationsVert=[];for(let e=0;e<this._structUniformNamesIndicesFrag.length;e+=1){const i=this._structUniformNamesIndicesFrag[e],s="UNI "+this._uniforms[i]._structName+" "+this._uniforms[i]._structUniformName+";".endl();if(-1===this._uniDeclarationsFrag.indexOf(s)){const e="{{INJECTION_POINT_STRUCT_"+this._uniforms[i]._structName+"}}";t=t.replace(e,""),t+=s,this._uniDeclarationsFrag.push(s)}}for(let t=0;t<this._structUniformNamesIndicesVert.length;t+=1){const i=this._structUniformNamesIndicesVert[t],s="UNI "+this._uniforms[i]._structName+" "+this._uniforms[i]._structUniformName+";".endl();if(-1===this._uniDeclarationsVert.indexOf(s)){const t="{{INJECTION_POINT_STRUCT_"+this._uniforms[i]._structName+"}}";e=e.replace(t,""),e+=s,this._uniDeclarationsVert.push(s)}}return[e,t]},vt.prototype.compile=function(){const t=performance.now();this._cgl.profileData.profileShaderCompiles++,this._cgl.profileData.profileShaderCompileName=this._name+" ["+this._compileReason+"]";let e="";if(this._extensions)for(let t=0;t<this._extensions.length;t++)e+="#extension "+this._extensions[t]+" : enable".endl();let i="";this._defines.length&&(i="\n// cgl generated".endl());for(let t=0;t<this._defines.length;t++)i+="#define "+this._defines[t][0]+" "+this._defines[t][1]+"".endl();const s=this.createStructUniforms();if(this._cgl.profileData.addHeavyEvent("shader compile",this._name+" ["+this._compileReason+"]"),this._compileReason="",this._uniforms){const t=this._uniforms.map(t=>t._name),e=[];for(let i=0;i<this._uniforms.length;i++){const s=this._uniforms[i];t.indexOf(s._name,i+1)>-1&&e.push(i)}for(let t=this._uniforms.length-1;t>=0;t-=1)e.indexOf(t)>-1?this._uniforms.splice(t,1):this._uniforms[t].resetLoc()}this._cgl.printError("uniform resets"),this.hasTextureUniforms()&&(i+="#define HAS_TEXTURES".endl());let r="",n="";if(this.srcFrag||(this._log.error("[cgl shader] has no fragment source!"),this.srcVert=this.getDefaultVertexShader(),this.srcFrag=this.getDefaultFragmentShader()),300==this.glslVersion){let t="";if(this.srcFrag.indexOf("outColor0")>-1&&(this._drawBuffers[0]=!0),this.srcFrag.indexOf("outColor1")>-1&&(this._drawBuffers[1]=!0),this.srcFrag.indexOf("outColor2")>-1&&(this._drawBuffers[2]=!0),this.srcFrag.indexOf("outColor3")>-1&&(this._drawBuffers[3]=!0),1==this._drawBuffers.length)t="out vec4 outColor;".endl(),t+="#define gl_FragColor outColor".endl();else{let e=0;t+="#define MULTI_COLORTARGETS".endl(),t+="vec4 outColor;".endl();for(let i=0;i<this._drawBuffers.length;i++)0==e&&(t+="#define gl_FragColor outColor"+i+"".endl()),t+="layout(location = "+i+") out vec4 outColor"+i+";".endl(),e++}r="#version 300 es".endl()+"// ".endl()+"// vertex shader "+this._name.endl()+"// ".endl()+"precision "+this.precision+" float;".endl()+"precision "+this.precision+" sampler2D;".endl()+"".endl()+"#define WEBGL2".endl()+"#define texture2D texture".endl()+"#define UNI uniform".endl()+"#define IN in".endl()+"#define OUT out".endl(),n="#version 300 es".endl()+"// ".endl()+"// fragment shader "+this._name.endl()+"// ".endl()+"precision "+this.precision+" float;".endl()+"precision "+this.precision+" sampler2D;".endl()+"".endl()+"#define WEBGL2".endl()+"#define texture2D texture".endl()+"#define IN in".endl()+"#define UNI uniform".endl()+t.endl()}else n="".endl()+"// ".endl()+"// fragment shader "+this._name.endl()+"// ".endl()+"#define WEBGL1".endl()+"#define texture texture2D".endl()+"#define outColor gl_FragColor".endl()+"#define IN varying".endl()+"#define UNI uniform".endl(),r="".endl()+"// ".endl()+"// vertex shader "+this._name.endl()+"// ".endl()+"#define WEBGL1".endl()+"#define texture texture2D".endl()+"#define OUT varying".endl()+"#define IN attribute".endl()+"#define UNI uniform".endl();let o="\n// cgl generated".endl(),h="\n// cgl generated".endl();n+="\n// active mods: --------------- ",r+="\n// active mods: --------------- ";let a=!1,l=!1;for(let t=0;t<this._moduleNames.length;t++)for(let e=0;e<this._modules.length;e++)this._modules[e].name==this._moduleNames[t]&&((this._modules[e].srcBodyFrag||this._modules[e].srcHeadFrag)&&(a=!0,n+="\n// "+t+"."+e+". "+this._modules[e].title+" ("+this._modules[e].name+")"),(this._modules[e].srcBodyVert||this._modules[e].srcHeadVert)&&(r+="\n// "+t+"."+e+". "+this._modules[e].title+" ("+this._modules[e].name+")",l=!0));l||(n+="\n// no mods used..."),a||(n+="\n// no mods used..."),n+="\n",r+="\n";for(let t=0;t<this._uniforms.length;t++)if(this._uniforms[t].shaderType&&!this._uniforms[t].isStructMember()){let e="";this._uniforms[t].getGlslTypeString()||(e+="// "),e+="UNI "+this._uniforms[t].getGlslTypeString()+" "+this._uniforms[t].getName();let i="";this._uniforms[t].comment&&(i=" // "+this._uniforms[t].comment),"vert"!=this._uniforms[t].shaderType&&"both"!=this._uniforms[t].shaderType||-1==this.srcVert.indexOf(e)&&-1==this.srcVert.indexOf("uniform "+this._uniforms[t].getGlslTypeString()+" "+this._uniforms[t].getName())&&(o+=e+";"+i.endl()),"frag"!=this._uniforms[t].shaderType&&"both"!=this._uniforms[t].shaderType||-1==this.srcFrag.indexOf(e)&&-1==this.srcFrag.indexOf("uniform "+this._uniforms[t].getGlslTypeString()+" "+this._uniforms[t].getName())&&(h+=e+";"+i.endl())}let c=0,u=0;for(let t=0;t<this._uniforms.length;t++)this._uniforms[t].shaderType&&!this._uniforms[t].isStructMember()&&("vert"!=this._uniforms[t].shaderType&&"both"!=this._uniforms[t].shaderType||u++,"frag"!=this._uniforms[t].shaderType&&"both"!=this._uniforms[t].shaderType||c++);c>=this._cgl.maxUniformsFrag&&this._log.warn("[cgl_shader] num uniforms frag: "+c+" / "+this._cgl.maxUniformsFrag),u>=this._cgl.maxUniformsVert&&this._log.warn("[cgl_shader] num uniforms vert: "+u+" / "+this._cgl.maxUniformsVert),-1==n.indexOf("precision")&&(n="precision "+this.precision+" float;".endl()+n),-1==r.indexOf("precision")&&(r="precision "+this.precision+" float;".endl()+r),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(n+="#define MOBILE".endl(),r+="#define MOBILE".endl()),r=e+r+i+s[0]+o+"\n// -- \n"+this.srcVert,n=e+n+i+s[1]+h+"\n// -- \n"+this.srcFrag;let g="",_="";this._modules.sort((function(t,e){return t.group-e.group})),this._modules.sort((function(t,e){return t.priority||0-e.priority||0}));let p=!1;for(let t=0;t<this._moduleNames.length;t++){let e="",i="";for(let s=0;s<this._modules.length;s++)if(this._modules[s].name==this._moduleNames[t]){if(g+="\n//---- MOD: group:"+this._modules[s].group+": idx:"+s+" - prfx:"+this._modules[s].prefix+" - "+this._modules[s].title+" ------\n",_+="\n//---- MOD: group:"+this._modules[s].group+": idx:"+s+" - prfx:"+this._modules[s].prefix+" - "+this._modules[s].title+" ------\n",e+="\n\n//---- MOD: "+this._modules[s].title+" / "+this._modules[s].priority+" ------\n",i+="\n\n//---- MOD: "+this._modules[s].title+" / "+this._modules[s].priority+" ------\n",!p){p=!0;for(let t=0;t<this._attributes.length;t++)this._attributes[t].name&&this._attributes[t].type&&(g+="".endl()+"#ifndef ATTRIB_"+this._attributes[t].name.endl()+"  #define ATTRIB_"+this._attributes[t].name.endl()+"  IN "+this._attributes[t].type+" "+this._attributes[t].name+";".endl()+"#endif",this._attributes[t].nameFrag&&(g+="".endl()+"#ifndef ATTRIB_"+this._attributes[t].nameFrag.endl()+"  #define ATTRIB_"+this._attributes[t].nameFrag.endl()+"  OUT "+this._attributes[t].type+" "+this._attributes[t].nameFrag+";".endl()+"#endif",e+="".endl()+this._attributes[t].nameFrag+"="+this._attributes[t].name+";"),_+="".endl()+"#ifndef ATTRIB_"+this._attributes[t].nameFrag.endl()+"  #define ATTRIB_"+this._attributes[t].nameFrag.endl()+"  IN "+this._attributes[t].type+" "+this._attributes[t].nameFrag+";".endl()+"#endif")}g+=this._modules[s].srcHeadVert||"",_+=this._modules[s].srcHeadFrag||"",e+=this._modules[s].srcBodyVert||"",i+=this._modules[s].srcBodyFrag||"",g+="\n//---- end mod ------\n",_+="\n//---- end mod ------\n",e+="\n//---- end mod ------\n",i+="\n//---- end mod ------\n",e=e.replace(/{{mod}}/g,this._modules[s].prefix),i=i.replace(/{{mod}}/g,this._modules[s].prefix),g=g.replace(/{{mod}}/g,this._modules[s].prefix),_=_.replace(/{{mod}}/g,this._modules[s].prefix),e=e.replace(/MOD_/g,this._modules[s].prefix),i=i.replace(/MOD_/g,this._modules[s].prefix),g=g.replace(/MOD_/g,this._modules[s].prefix),_=_.replace(/MOD_/g,this._modules[s].prefix)}r=r.replace("{{"+this._moduleNames[t]+"}}",e),n=n.replace("{{"+this._moduleNames[t]+"}}",i)}if(r=r.replace("{{MODULES_HEAD}}",g),n=n.replace("{{MODULES_HEAD}}",_),r=this._addLibs(r),n=this._addLibs(n),this._program){this._program=this._createProgram(r,n),this._projMatrixUniform=null;for(let t=0;t<this._uniforms.length;t++)this._uniforms[t].resetLoc()}else this._program=this._createProgram(r,n);this.finalShaderFrag=n,this.finalShaderVert=r,ht.lastMesh=null,ht.lastShader=null,this._needsRecompile=!1,this.lastCompile=_t(),this._cgl.profileData.shaderCompileTime+=performance.now()-t},vt.hasChanged=function(){return this._needsRecompile},vt.prototype.bind=function(){if(this._isValid&&(ht.lastShader=this,this._program&&!this._needsRecompile||this.compile(),this._isValid)){if(!this._projMatrixUniform){this._attrVertexPos=this._cgl.glGetAttribLocation(this._program,ot.SHADER.SHADERVAR_VERTEX_POSITION),this._projMatrixUniform=this._cgl.gl.getUniformLocation(this._program,ot.SHADER.SHADERVAR_UNI_PROJMAT),this._mvMatrixUniform=this._cgl.gl.getUniformLocation(this._program,"mvMatrix"),this._vMatrixUniform=this._cgl.gl.getUniformLocation(this._program,ot.SHADER.SHADERVAR_UNI_VIEWMAT),this._mMatrixUniform=this._cgl.gl.getUniformLocation(this._program,ot.SHADER.SHADERVAR_UNI_MODELMAT),this._camPosUniform=this._cgl.gl.getUniformLocation(this._program,ot.SHADER.SHADERVAR_UNI_VIEWPOS),this._normalMatrixUniform=this._cgl.gl.getUniformLocation(this._program,ot.SHADER.SHADERVAR_UNI_NORMALMAT),this._inverseViewMatrixUniform=this._cgl.gl.getUniformLocation(this._program,ot.SHADER.SHADERVAR_UNI_INVVIEWMAT);for(let t=0;t<this._uniforms.length;t++)this._uniforms[t].needsUpdate=!0}this._cgl.currentProgram!=this._program&&(this._cgl.profileData.profileShaderBinds++,this._cgl.gl.useProgram(this._program),this._cgl.currentProgram=this._program);for(let t=0;t<this._uniforms.length;t++)this._uniforms[t].needsUpdate&&this._uniforms[t].updateValue();if(this._pMatrixState!=this._cgl.getProjectionMatrixStateCount()&&(this._pMatrixState=this._cgl.getProjectionMatrixStateCount(),this._cgl.gl.uniformMatrix4fv(this._projMatrixUniform,!1,this._cgl.pMatrix),this._cgl.profileData.profileMVPMatrixCount++),this._vMatrixUniform)this._vMatrixState!=this._cgl.getViewMatrixStateCount()&&(this._cgl.gl.uniformMatrix4fv(this._vMatrixUniform,!1,this._cgl.vMatrix),this._cgl.profileData.profileMVPMatrixCount++,this._vMatrixState=this._cgl.getViewMatrixStateCount(),this._inverseViewMatrixUniform&&(mat4.invert(this._tempInverseViewMatrix,this._cgl.vMatrix),this._cgl.gl.uniformMatrix4fv(this._inverseViewMatrixUniform,!1,this._tempInverseViewMatrix),this._cgl.profileData.profileMVPMatrixCount++)),this._cgl.gl.uniformMatrix4fv(this._mMatrixUniform,!1,this._cgl.mMatrix),this._cgl.profileData.profileMVPMatrixCount++,this._camPosUniform&&(mat4.invert(this._tempCamPosMatrix,this._cgl.vMatrix),this._cgl.gl.uniform3f(this._camPosUniform,this._tempCamPosMatrix[12],this._tempCamPosMatrix[13],this._tempCamPosMatrix[14]),this._cgl.profileData.profileMVPMatrixCount++);else{const t=mat4.create();mat4.mul(t,this._cgl.vMatrix,this._cgl.mMatrix),this._cgl.gl.uniformMatrix4fv(this._mvMatrixUniform,!1,t),this._cgl.profileData.profileMVPMatrixCount++}this._normalMatrixUniform&&(mat4.invert(this._tempNormalMatrix,this._cgl.mMatrix),mat4.transpose(this._tempNormalMatrix,this._tempNormalMatrix),this._cgl.gl.uniformMatrix4fv(this._normalMatrixUniform,!1,this._tempNormalMatrix),this._cgl.profileData.profileMVPMatrixCount++);for(let t=0;t<this._libs.length;t++)this._libs[t].onBind&&this._libs[t].onBind.bind(this._libs[t])(this._cgl,this);this._bindTextures()}},vt.prototype.toggleDefine=function(t,e){e&&"object"==typeof e&&e.addEventListener&&(e.changeListener&&e.removeEventListener(e.changeListener),e.onToggleDefine=e=>{this.toggleDefine(t,e)},e.changeListener=e.on("change",e.onToggleDefine),e=e.get()),e?this.define(t):this.removeDefine(t)},vt.prototype.define=function(t,e){null==e&&(e=""),"object"==typeof e&&(e.removeEventListener("change",e.onDefineChange),e.onDefineChange=e=>{this.define(t,e)},e.on("change",e.onDefineChange),e=e.get());for(let i=0;i<this._defines.length;i++){if(this._defines[i][0]==t&&this._defines[i][1]==e)return;if(this._defines[i][0]==t)return this._defines[i][1]=e,this.setWhyCompile("define "+t+" "+e),void(this._needsRecompile=!0)}this.setWhyCompile("define "+t+" "+e),this._needsRecompile=!0,this._defines.push([t,e])},vt.prototype.getDefines=function(){return this._defines},vt.prototype.getDefine=function(t){for(let e=0;e<this._defines.length;e++)if(this._defines[e][0]==t)return this._defines[e][1];return null},vt.prototype.hasDefine=function(t){for(let e=0;e<this._defines.length;e++)if(this._defines[e][0]==t)return!0},vt.prototype.removeDefine=function(t){for(let e=0;e<this._defines.length;e++)if(this._defines[e][0]==t)return this._defines.splice(e,1),this._needsRecompile=!0,void this.setWhyCompile("define removed:"+t)},vt.prototype.removeModule=function(t){for(let e=0;e<this._modules.length;e++)if(t&&t.id&&(this._modules[e].id==t.id||!this._modules[e])){let i=!0;for(;i;){i=!1;for(let e=0;e<this._uniforms.length;e++)0!=this._uniforms[e].getName().indexOf(t.prefix)||(this._uniforms.splice(e,1),i=!0)}this._needsRecompile=!0,this.setWhyCompile("remove module "+t.title),this._modules.splice(e,1);break}},vt.prototype.getNumModules=function(){return this._modules.length},vt.prototype.getCurrentModules=function(){return this._modules},vt.prototype.addModule=function(t,e){return t.id||(t.id=A()),t.numId||(t.numId=this._moduleNumId),t.num||(t.num=this._modules.length),e&&!e.group&&(e.group=y()),t.group||(t.group=e?e.group:y()),t.prefix="mod"+t.group+"_",this._modules.push(t),this._needsRecompile=!0,this.setWhyCompile("add module "+t.title),this._moduleNumId++,t},vt.prototype.hasModule=function(t){for(let e=0;e<this._modules.length;e++)if(this._modules[e].id==t)return!0;return!1},vt.prototype.setModules=function(t){this._moduleNames=t},vt.prototype.dispose=function(){this._cgl.gl.deleteProgram(this._program)},vt.prototype.needsRecompile=function(){return this._needsRecompile},vt.prototype.setDrawBuffers=function(t){if(this._drawBuffers.length!==t.length)return this._drawBuffers=t,this._needsRecompile=!0,void this.setWhyCompile("setDrawBuffers");for(let e=0;e<t;e++)if(t[e]!==this._drawBuffers[e])return this._drawBuffers=t,this._needsRecompile=!0,void this.setWhyCompile("setDrawBuffers")},vt.prototype.getUniforms=function(){return this._uniforms},vt.prototype.getUniform=function(t){for(let e=0;e<this._uniforms.length;e++)if(this._uniforms[e].getName()==t)return this._uniforms[e];return null},vt.prototype.removeUniform=function(t){for(let e=0;e<this._uniforms.length;e++)this._uniforms[e].getName()==t&&this._uniforms.splice(e,1);this._needsRecompile=!0,this.setWhyCompile("remove uniform "+t)},vt.prototype._addUniform=function(t){this._uniforms.push(t),this.setWhyCompile("add uniform "+name),this._needsRecompile=!0},vt.prototype.addUniformFrag=function(t,e,i,s,r,n){const o=new CGL.Uniform(this,t,e,i,s,r,n);return o.shaderType="frag",o},vt.prototype.addUniformVert=function(t,e,i,s,r,n){const o=new CGL.Uniform(this,t,e,i,s,r,n);return o.shaderType="vert",o},vt.prototype.addUniformBoth=function(t,e,i,s,r,n){const o=new CGL.Uniform(this,t,e,i,s,r,n);return o.shaderType="both",o},vt.prototype.addUniformStructFrag=function(t,e,i){const s={};if(!i)return s;for(let r=0;r<i.length;r+=1){const n=i[r];if(!this.hasUniform(e+"."+n.name)){const i=new CGL.Uniform(this,n.type,e+"."+n.name,n.v1,n.v2,n.v3,n.v4,e,t,n.name);i.shaderType="frag",s[e+"."+n.name]=i}}return s},vt.prototype.addUniformStructVert=function(t,e,i){const s={};if(!i)return s;for(let r=0;r<i.length;r+=1){const n=i[r];if(!this.hasUniform(e+"."+n.name)){const i=new CGL.Uniform(this,n.type,e+"."+n.name,n.v1,n.v2,n.v3,n.v4,e,t,n.name);i.shaderType="vert",s[e+"."+n.name]=i}}return s},vt.prototype.addUniformStructBoth=function(t,e,i){const s={};if(!i)return s;for(let r=0;r<i.length;r+=1){const n=i[r];if("2i"!==n.type&&"i"!==n.type&&"3i"!==n.type||this._log.error("Adding an integer struct member to both shaders can potentially error. Please use different structs for each shader. Error occured in struct:",t," with member:",n.name," of type:",n.type,"."),!this.hasUniform(e+"."+n.name)){const i=new CGL.Uniform(this,n.type,e+"."+n.name,n.v1,n.v2,n.v3,n.v4,e,t,n.name);i.shaderType="both",s[e+"."+n.name]=i}}return s},vt.prototype.hasUniform=function(t){for(let e=0;e<this._uniforms.length;e++)if(this._uniforms[e].getName()==t)return!0;return!1},vt.prototype._createProgram=function(t,e){this._cgl.printError("before _createprogram");const i=this._cgl.gl.createProgram();return this.vshader=vt.createShader(this._cgl,t,this._cgl.gl.VERTEX_SHADER,this),this.fshader=vt.createShader(this._cgl,e,this._cgl.gl.FRAGMENT_SHADER,this),this._cgl.gl.attachShader(i,this.vshader),this._cgl.gl.attachShader(i,this.fshader),this._linkProgram(i,t,e),this._cgl.printError("shader _createProgram"),i},vt.prototype.hasErrors=function(){return this._hasErrors},vt.prototype._linkProgram=function(t,e,i){this._cgl.printError("before _linkprogram"),this._feedBackNames.length>0&&this._cgl.gl.transformFeedbackVaryings(t,this._feedBackNames,this._cgl.gl.SEPARATE_ATTRIBS),this._cgl.gl.linkProgram(t),this._cgl.printError("gl.linkprogram"),this._isValid=!0,this._hasErrors=!1,!1!==this._cgl.patch.config.glValidateShader&&(this._cgl.gl.validateProgram(t),this._cgl.gl.getProgramParameter(t,this._cgl.gl.VALIDATE_STATUS)||(console.log("shaderprogram validation failed..."),console.log(this._name+" programinfo: ",this._cgl.gl.getProgramInfoLog(t))),this._cgl.gl.getProgramParameter(t,this._cgl.gl.LINK_STATUS)||(this._hasErrors=!0,this._log.warn(this._cgl.gl.getShaderInfoLog(this.fshader)||"empty shader infolog"),this._log.warn(this._cgl.gl.getShaderInfoLog(this.vshader)||"empty shader infolog"),this._log.error(this._name+" shader linking fail..."),console.log(this._name+" programinfo: ",this._cgl.gl.getProgramInfoLog(t)),console.log("--------------------------------------"),console.log(this),console.log("--------------------------------------"),this._isValid=!1,this._name="errorshader",this.setSource(vt.getDefaultVertexShader(),vt.getErrorFragmentShader()),this._cgl.printError("shader link err")))},vt.prototype.getProgram=function(){return this._program},vt.prototype.setFeedbackNames=function(t){this.setWhyCompile("setFeedbackNames"),this._needsRecompile=!0,this._feedBackNames=t},vt.prototype.getDefaultVertexShader=vt.getDefaultVertexShader=function(){return"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},vt.prototype.getDefaultFragmentShader=vt.getDefaultFragmentShader=function(t,e,i){return null==t&&(t=.5,e=.5,i=.5),"".endl()+"IN vec2 texCoord;".endl()+"{{MODULES_HEAD}}".endl()+"void main()".endl()+"{".endl()+"    vec4 col=vec4("+t+","+e+","+i+",1.0);".endl()+"    {{MODULE_COLOR}}".endl()+"    outColor = col;".endl()+"}"},vt.prototype.addAttribute=function(t){for(let e=0;e<this._attributes.length;e++)if(this._attributes[e].name==t.name&&this._attributes[e].nameFrag==t.nameFrag)return;this._attributes.push(t),this._needsRecompile=!0,this.setWhyCompile("addAttribute")},vt.prototype.bindTextures=vt.prototype._bindTextures=function(){this._textureStackTex.length>this._cgl.maxTextureUnits&&this._log.warn("[shader._bindTextures] too many textures bound",this._textureStackTex.length+"/"+this._cgl.maxTextureUnits);for(let t=0;t<this._textureStackTex.length;t++)if(this._textureStackTex[t]||this._textureStackTexCgl[t]){let e=this._textureStackTex[t];this._textureStackTexCgl[t]&&(e=this._textureStackTexCgl[t].tex||CGL.Texture.getEmptyTexture(this._cgl).tex);let i=!0;this._textureStackUni[t]?(this._textureStackUni[t].setValue(t),i=this._cgl.setTexture(t,e,this._textureStackType[t])):(this._log.warn("no uniform for pushtexture",this._name),i=this._cgl.setTexture(t,e,this._textureStackType[t])),i||this._log.warn("tex bind failed",this.getName(),this._textureStackUni[t])}else this._log.warn("no texture for pushtexture",this._name)},vt.prototype.setUniformTexture=function(t,e){for(let i=0;i<this._textureStackTex.length;i++)if(this._textureStackUni[i]==t){const t=this._textureStackTex[i];return this._textureStackTex[i]=e,t}return null},vt.prototype.pushTexture=function(t,e,i){if(!t)throw new Error("no uniform given to texturestack");if(e){if(!(e.hasOwnProperty("tex")||e instanceof WebGLTexture))return this._log.warn(new Error("invalid texture").stack),void this._log.warn("[cgl_shader] invalid texture...",e);this._textureStackUni.push(t),e.hasOwnProperty("tex")?(this._textureStackTexCgl.push(e),this._textureStackTex.push(null)):(this._textureStackTexCgl.push(null),this._textureStackTex.push(e)),this._textureStackType.push(i)}},vt.prototype.popTexture=function(){this._textureStackUni.pop(),this._textureStackTex.pop(),this._textureStackType.pop()},vt.prototype.popTextures=function(){this._textureStackTex.length=this._textureStackTexCgl.length=this._textureStackType.length=this._textureStackUni.length=0},vt.prototype.getInfo=function(){const t={};return t.name=this._name,t.defines=this.getDefines(),t.hasErrors=this.hasErrors(),t},vt.getErrorFragmentShader=function(){return"".endl()+"void main()".endl()+"{".endl()+"   float g=mod((gl_FragCoord.y+gl_FragCoord.x),50.0)/50.0;".endl()+"   g= step(0.1,g);".endl()+"   outColor = vec4( g+0.5, 0.0, 0.0, 1.0);".endl()+"}"},vt.createShader=function(t,e,i,s){if(t.aborted)return;const r=t.gl.createShader(i);if(t.gl.shaderSource(r,e),t.gl.compileShader(r),!t.gl.getShaderParameter(r,t.gl.COMPILE_STATUS)){console.log("compile status: "),i==t.gl.VERTEX_SHADER&&console.log("VERTEX_SHADER"),i==t.gl.FRAGMENT_SHADER&&console.log("FRAGMENT_SHADER");let o=t.gl.getShaderInfoLog(r)||"empty shader info log";const h=function(t){const e=[],i=t.split("\n");for(const t in i){const s=i[t].split(":");parseInt(s[2],10)&&e.push(parseInt(s[2],10))}return e}(o);let a='<div class="shaderErrorCode">';const l=e.match(/^.*((\r\n|\n|\r)|$)/gm);for(const t in l){const e=parseInt(t,10)+1,i=e+": "+l[t];console.log(i);let s=!1;for(const t in h)h[t]==e&&(s=!0);s&&(a+='<span class="error">'),a+=(n=i)&&yt.test(n)?n.replace(bt,(function(t){return At[t]})):n||"",s&&(a+="</span>")}console.warn(o),o=o.replace(/\n/g,"<br/>"),a=o+"<br/>"+a+"<br/><br/>",a+="</div>",t.patch.emitEvent("criticalError","Shader error "+this._name,a),t.patch.isEditorMode()&&console.log("Shader error "+this._name,a),this._name="errorshader",s.setSource(vt.getDefaultVertexShader(),vt.getErrorFragmentShader())}var n;return r};const xt=function(){this._arr=[mat4.create()],this._index=0,this.stateCounter=0};xt.prototype.push=function(t){if(this._index++,this.stateCounter++,this._index==this._arr.length){const t=mat4.create();this._arr.push(t)}return mat4.copy(this._arr[this._index],t||this._arr[this._index-1]),this._arr[this._index]},xt.prototype.pop=function(){return this.stateCounter++,this._index--,this._index<0&&(this._index=0),this._arr[this._index]},xt.prototype.length=function(){return this._index};class It{constructor(t){this._cgl=t,this._lastTime=0,this.pause=!1,this.profileUniformCount=0,this.profileShaderBinds=0,this.profileUniformCount=0,this.profileShaderCompiles=0,this.profileVideosPlaying=0,this.profileMVPMatrixCount=0,this.profileEffectBuffercreate=0,this.profileShaderGetUniform=0,this.profileFrameBuffercreate=0,this.profileMeshSetGeom=0,this.profileTextureNew=0,this.profileGenMipMap=0,this.profileOnAnimFrameOps=0,this.profileMainloopMs=0,this.profileMeshDraw=0,this.profileTextureEffect=0,this.profileTexPreviews=0,this.shaderCompileTime=0,this.profileMeshNumElements=0,this.profileMeshAttributes=0,this.profileSingleMeshAttribute=[],this.heavyEvents=[],this.doProfileGlQuery=!1,this.glQueryData={}}clear(){this.profileSingleMeshAttribute={},this.profileMeshAttributes=0,this.profileUniformCount=0,this.profileShaderGetUniform=0,this.profileShaderCompiles=0,this.profileShaderBinds=0,this.profileTextureResize=0,this.profileFrameBuffercreate=0,this.profileEffectBuffercreate=0,this.profileTextureDelete=0,this.profileMeshSetGeom=0,this.profileVideosPlaying=0,this.profileMVPMatrixCount=0,this.profileNonTypedAttrib=0,this.profileNonTypedAttribNames="",this.profileTextureNew=0,this.profileGenMipMap=0,this.profileFramebuffer=0,this.profileMeshDraw=0,this.profileTextureEffect=0,this.profileTexPreviews=0,this.profileMeshNumElements=0}clearGlQuery(){for(let t in this.glQueryData)(!this.glQueryData[t].lastClear||performance.now()-this.glQueryData[t].lastClear>1e3)&&(this.glQueryData[t].time=this.glQueryData[t]._times/this.glQueryData[t]._numcount,this.glQueryData[t].num=this.glQueryData[t]._numcount,this.glQueryData[t]._times=0,this.glQueryData[t]._numcount=0,this.glQueryData[t].lastClear=performance.now())}addHeavyEvent(t,e,i){const s={event:t,name:e,info:i,date:performance.now()};this.heavyEvents.push(s),this._cgl.emitEvent("heavyEvent",s)}}const Ot=function(t){W.apply(this),this.profileData=new It(this),this._log=new h("cgl_context");const e=[0,0,0,0];this.glVersion=0,this.glUseHalfFloatTex=!1,this.clearCanvasTransparent=!0,this.clearCanvasDepth=!0,this.patch=t,this.debugOneFrame=!1,this.checkGlErrors=!0,this.maxTextureUnits=0,this.maxVaryingVectors=0,this.currentProgram=null,this._hadStackError=!1,this.glSlowRenderer=!1,this._isSafariCrap=!1,this.temporaryTexture=null,this.frameStore={},this._onetimeCallbacks=[],this.gl=null,this._cursor="auto",this._currentCursor="",this.pMatrix=mat4.create(),this.mMatrix=mat4.create(),this.vMatrix=mat4.create(),this._textureslots=[],this._pMatrixStack=new xt,this._mMatrixStack=new xt,this._vMatrixStack=new xt,this._glFrameBufferStack=[],this._frameBufferStack=[],this._shaderStack=[],this._stackDepthTest=[],Object.defineProperty(this,"mvMatrix",{get(){return this.mMatrix},set(t){this.mMatrix=t}}),this.canvas=null,this.pixelDensity=1,mat4.identity(this.mMatrix),mat4.identity(this.vMatrix);const i=new vt(this,"simpleshader");i.setModules(["MODULE_VERTEX_POSITION","MODULE_COLOR","MODULE_BEGIN_FRAG"]),i.setSource(vt.getDefaultVertexShader(),vt.getDefaultFragmentShader());let s=i;this.aborted=!1;const r=[];this.exitError=function(t,e){this.patch.exitError(t,e),this.aborted=!0},this.setCanvas=function(t){if(this.canvas="string"==typeof t?document.getElementById(t):t,this.patch.config.canvas||(this.patch.config.canvas={}),this.patch.config.canvas.hasOwnProperty("preserveDrawingBuffer")||(this.patch.config.canvas.preserveDrawingBuffer=!1),this.patch.config.canvas.hasOwnProperty("premultipliedAlpha")||(this.patch.config.canvas.premultipliedAlpha=!1),this.patch.config.canvas.hasOwnProperty("alpha")||(this.patch.config.canvas.alpha=!1),this.patch.config.hasOwnProperty("clearCanvasColor")&&(this.clearCanvasTransparent=this.patch.config.clearCanvasColor),this.patch.config.hasOwnProperty("clearCanvasDepth")&&(this.clearCanvasDepth=this.patch.config.clearCanvasDepth),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&(this._isSafariCrap=!0),this.patch.config.canvas.forceWebGl1||(this.gl=this.canvas.getContext("webgl2",this.patch.config.canvas)),this.gl&&"WebGL 1.0"!=this.gl.getParameter(this.gl.VERSION)?this.glVersion=2:(this.gl=this.canvas.getContext("webgl",this.patch.config.canvas)||this.canvas.getContext("experimental-webgl",this.patch.config.canvas),this.glVersion=1,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&navigator.userAgent.match(/iPhone/i)&&(this.glUseHalfFloatTex=!0),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(this.patch.config.canvas.hasOwnProperty("powerPreference")||(this.patch.config.canvas.powerPreference="high-performance"))),!this.gl)return void this.exitError("NO_WEBGL","sorry, could not initialize WebGL. Please check if your Browser supports WebGL or try to restart your browser.");const e=this.gl.getExtension("WEBGL_debug_renderer_info");e&&(this.glRenderer=this.gl.getParameter(e.UNMASKED_RENDERER_WEBGL),"Google SwiftShader"===this.glRenderer&&(this.glSlowRenderer=!0)),this.gl.getExtension("OES_standard_derivatives");const i=this.gl.getExtension("ANGLE_instanced_arrays")||this.gl;this.canvas.addEventListener("webglcontextlost",t=>{this._log.error("canvas lost...",t),this.emitEvent("webglcontextlost"),this.aborted=!0}),this.maxVaryingVectors=this.gl.getParameter(this.gl.MAX_VARYING_VECTORS),this.maxTextureUnits=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.maxTexSize=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.maxUniformsFrag=this.gl.getParameter(this.gl.MAX_FRAGMENT_UNIFORM_VECTORS),this.maxUniformsVert=this.gl.getParameter(this.gl.MAX_VERTEX_UNIFORM_VECTORS),this.maxSamples=0,this.gl.MAX_SAMPLES&&(this.maxSamples=this.gl.getParameter(this.gl.MAX_SAMPLES)),i.vertexAttribDivisorANGLE&&(this.gl.vertexAttribDivisor=i.vertexAttribDivisorANGLE.bind(i),this.gl.drawElementsInstanced=i.drawElementsInstancedANGLE.bind(i)),this.updateSize()},this.getInfo=function(){return{glVersion:this.glVersion,glRenderer:this.glRenderer,glUseHalfFloatTex:this.glUseHalfFloatTex,maxVaryingVectors:this.maxVaryingVectors,maxTextureUnits:this.maxTextureUnits,maxTexSize:this.maxTexSize,maxUniformsFrag:this.maxUniformsFrag,maxUniformsVert:this.maxUniformsVert,maxSamples:this.maxSamples}},this.updateSize=function(){this.canvas.width=this.canvasWidth=this.canvas.clientWidth*this.pixelDensity,this.canvas.height=this.canvasHeight=this.canvas.clientHeight*this.pixelDensity},this.canvasWidth=-1,this.canvasHeight=-1,this.canvasScale=1;let n=-1,o=-1;this.getViewPort=function(){return e},this.resetViewPort=function(){this.gl.viewport(e[0],e[1],e[2],e[3])},this.setViewPort=function(t,i,s,r){e[0]=Math.round(t),e[1]=Math.round(i),e[2]=Math.round(s),e[3]=Math.round(r),this.gl.viewport(e[0],e[1],e[2],e[3])},this.screenShot=function(t,e,i,s){e&&(this.gl.clearColor(1,1,1,1),this.gl.colorMask(!1,!1,!1,!0),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.colorMask(!0,!0,!0,!0)),this.canvas&&this.canvas.toBlob&&this.canvas.toBlob(e=>{t?t(e):this._log.log("no screenshot callback...")},i,s)},this.endFrame=function(){if(this.patch.isEditorMode()&&CABLES.GL_MARKER.drawMarkerLayer(this),this.setPreviousShader(),this._vMatrixStack.length()>0&&this.logStackError("view matrix stack length !=0 at end of rendering..."),this._mMatrixStack.length()>0&&this.logStackError("mvmatrix stack length !=0 at end of rendering..."),this._pMatrixStack.length()>0&&this.logStackError("pmatrix stack length !=0 at end of rendering..."),this._glFrameBufferStack.length>0&&this.logStackError("glFrameBuffer stack length !=0 at end of rendering..."),this._stackDepthTest.length>0&&this.logStackError("depthtest stack length !=0 at end of rendering..."),this._stackDepthWrite.length>0&&this.logStackError("depthwrite stack length !=0 at end of rendering..."),this._stackDepthFunc.length>0&&this.logStackError("depthfunc stack length !=0 at end of rendering..."),this._stackBlend.length>0&&this.logStackError("blend stack length !=0 at end of rendering..."),this._stackBlendMode.length>0&&this.logStackError("blendMode stack length !=0 at end of rendering..."),this._shaderStack.length>0&&this.logStackError("this._shaderStack length !=0 at end of rendering..."),this._stackCullFace.length>0&&this.logStackError("this._stackCullFace length !=0 at end of rendering..."),this._stackCullFaceFacing.length>0&&this.logStackError("this._stackCullFaceFacing length !=0 at end of rendering..."),this._frameStarted=!1,n!=this.canvasWidth||o!=this.canvasHeight){n=this.canvasWidth,o=this.canvasHeight,this.setSize(this.canvasWidth/this.pixelDensity,this.canvasHeight/this.pixelDensity),this.updateSize();for(let t=0;t<r.length;t++)r[t]();this.emitEvent("resize")}this._cursor!=this._currentCursor&&(this._currentCursor=this.canvas.style.cursor=this._cursor)},this.logStackError=function(t){this._hadStackError||(this._hadStackError=!0,this._log.warn("["+this.canvas.id+"]: ",t))},this.getShader=function(){if(s&&(!this.frameStore||!0===this.frameStore.renderOffscreen==s.offScreenPass==!0))return s;for(let t=this._shaderStack.length-1;t>=0;t--)if(this._shaderStack[t]&&this.frameStore.renderOffscreen==this._shaderStack[t].offScreenPass)return this._shaderStack[t]},this.getDefaultShader=function(){return i},this.pushShader=this.setShader=function(t){this._shaderStack.push(t),s=t},this.popShader=this.setPreviousShader=function(){if(0===this._shaderStack.length)throw new Error("Invalid shader stack pop!");this._shaderStack.pop(),s=this._shaderStack[this._shaderStack.length-1]},this.pushGlFrameBuffer=function(t){this._glFrameBufferStack.push(t)},this.popGlFrameBuffer=function(){return 0==this._glFrameBufferStack.length?null:(this._glFrameBufferStack.pop(),this._glFrameBufferStack[this._glFrameBufferStack.length-1])},this.getCurrentGlFrameBuffer=function(){return 0===this._glFrameBufferStack.length?null:this._glFrameBufferStack[this._glFrameBufferStack.length-1]},this.pushFrameBuffer=function(t){this._frameBufferStack.push(t)},this.popFrameBuffer=function(){return 0==this._frameBufferStack.length?null:(this._frameBufferStack.pop(),this._frameBufferStack[this._frameBufferStack.length-1])},this.getCurrentFrameBuffer=function(){return 0===this._frameBufferStack.length?null:this._frameBufferStack[this._frameBufferStack.length-1]};const a=vec3.create();vec3.set(a,0,0,2);const l=vec3.create();vec3.set(l,0,0,0),this.renderStart=function(t,e,s){e||(e=l),s||(s=a),this.pushDepthTest(!0),this.pushDepthWrite(!0),this.pushDepthFunc(t.gl.LEQUAL),this.pushCullFaceFacing(t.gl.BACK),this.pushCullFace(!1),this.clearCanvasTransparent&&(t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT)),this.clearCanvasDepth&&t.gl.clear(t.gl.DEPTH_BUFFER_BIT),t.setViewPort(0,0,t.canvasWidth,t.canvasHeight),mat4.perspective(t.pMatrix,45,t.canvasWidth/t.canvasHeight,.1,1e3),mat4.identity(t.mMatrix),mat4.identity(t.vMatrix),mat4.translate(t.mMatrix,t.mMatrix,e),mat4.translate(t.vMatrix,t.vMatrix,s),t.pushPMatrix(),t.pushModelMatrix(),t.pushViewMatrix(),t.pushBlendMode(ot.BLEND_MODES.BLEND_NORMAL,!1);for(let t=0;t<this._textureslots.length;t++)this._textureslots[t]=null;if(this.pushShader(i),this._frameStarted=!0,this._onetimeCallbacks.length>0){for(let t=0;t<this._onetimeCallbacks.length;t++)this._onetimeCallbacks[t]();this._onetimeCallbacks.length=0}this.emitEvent("beginFrame")},this.renderEnd=function(t){t.popViewMatrix(),t.popModelMatrix(),t.popPMatrix(),this.popDepthTest(),this.popDepthWrite(),this.popDepthFunc(),this.popCullFaceFacing(),this.popCullFace(),this.popBlend(),this.popBlendMode(),t.endFrame(),this.emitEvent("endFrame")},this.getTexture=function(t){return this._textureslots[t]},this.checkFrameStarted=function(t){this._frameStarted||(this._log.warn("frame not started "+t),this.patch.printTriggerStack())},this.setTexture=function(t,e,i){return this.checkFrameStarted("cgl setTexture"),null===e&&(e=CGL.Texture.getEmptyTexture(this).tex),this._textureslots[t]!=e&&(this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(i||this.gl.TEXTURE_2D,e),this._textureslots[t]=e),!0},this.fullScreen=function(){this.canvas.requestFullscreen?this.canvas.requestFullscreen():this.canvas.mozRequestFullScreen?this.canvas.mozRequestFullScreen():this.canvas.webkitRequestFullscreen?this.canvas.webkitRequestFullscreen():this.canvas.msRequestFullscreen&&this.canvas.msRequestFullscreen()},this.setSize=function(t,e,i){i||(this.canvas.style.width=t+"px",this.canvas.style.height=e+"px"),this.canvas.width=t*this.pixelDensity,this.canvas.height=e*this.pixelDensity,this.updateSize()},this._resizeToWindowSize=function(){this.setSize(window.innerWidth,window.innerHeight),this.updateSize()},this._resizeToParentSize=function(){const t=this.canvas.parentElement;t?(this.setSize(t.clientWidth,t.clientHeight),this.updateSize()):this._log.error("cables: can not resize to container element")},this.setAutoResize=function(t){window.removeEventListener("resize",this._resizeToWindowSize.bind(this)),window.removeEventListener("resize",this._resizeToParentSize.bind(this)),"window"==t&&(window.addEventListener("resize",this._resizeToWindowSize.bind(this)),window.addEventListener("orientationchange",this._resizeToWindowSize.bind(this)),this._resizeToWindowSize()),"parent"==t&&(window.addEventListener("resize",this._resizeToParentSize.bind(this)),this._resizeToParentSize())},this.printError=function(t){if(!this.checkGlErrors)return;let e=!1,i=this.gl.getError();if(i!=this.gl.NO_ERROR){let s="";i==this.gl.OUT_OF_MEMORY&&(s="OUT_OF_MEMORY"),i==this.gl.INVALID_ENUM&&(s="INVALID_ENUM"),i==this.gl.INVALID_OPERATION&&(s="INVALID_OPERATION"),i==this.gl.INVALID_FRAMEBUFFER_OPERATION&&(s="INVALID_FRAMEBUFFER_OPERATION"),i==this.gl.INVALID_VALUE&&(s="INVALID_VALUE"),i==this.gl.CONTEXT_LOST_WEBGL&&(this.aborted=!0,s="CONTEXT_LOST_WEBGL"),i==this.gl.NO_ERROR&&(s="NO_ERROR"),e=!0,this._log.warn("gl error ["+this.canvas.id+"]: ",t,i,s),-1==this.canvas.id.indexOf("glGuiCanvas")&&(this._loggedGlError||(this.patch.printTriggerStack(),this._log.stack("glerror"),this._loggedGlError=!0))}return i=this.gl.getError(),e},this.saveScreenshot=function(t,e,i,s,r){this.patch.renderOneFrame();let n=this.canvas.clientWidth,o=this.canvas.clientHeight;function h(t,e,i){return Array(e-String(t).length+1).join(i||"0")+t}i&&(this.canvas.width=i,n=i),s&&(this.canvas.height=s,o=s);const a=new Date,l="".concat(String(a.getFullYear())+String(a.getMonth()+1)+String(a.getDate()),"_").concat(h(a.getHours(),2)).concat(h(a.getMinutes(),2)).concat(h(a.getSeconds(),2));t?t+=".png":t="cables_"+l+".png",this.patch.cgl.screenShot(function(i){if(this.canvas.width=n,this.canvas.height=o,i){const s=document.createElement("a");s.download=t,s.href=URL.createObjectURL(i),setTimeout((function(){s.click(),e&&e(i)}),100)}else this._log.log("screenshot: no blob")}.bind(this),r)}};Ot.prototype.addNextFrameOnceCallback=function(t){t&&this._onetimeCallbacks.push(t)},Ot.prototype.pushViewMatrix=function(){this.vMatrix=this._vMatrixStack.push(this.vMatrix)},Ot.prototype.popViewMatrix=function(){this.vMatrix=this._vMatrixStack.pop()},Ot.prototype.getViewMatrixStateCount=function(){return this._vMatrixStack.stateCounter},Ot.prototype.pushPMatrix=function(){this.pMatrix=this._pMatrixStack.push(this.pMatrix)},Ot.prototype.popPMatrix=function(){return this.pMatrix=this._pMatrixStack.pop(),this.pMatrix},Ot.prototype.getProjectionMatrixStateCount=function(){return this._pMatrixStack.stateCounter},Ot.prototype.pushMvMatrix=Ot.prototype.pushModelMatrix=function(){this.mMatrix=this._mMatrixStack.push(this.mMatrix)},Ot.prototype.popMvMatrix=Ot.prototype.popmMatrix=Ot.prototype.popModelMatrix=function(){return this.mMatrix=this._mMatrixStack.pop(),this.mMatrix},Ot.prototype.modelMatrix=function(){return this.mMatrix},Ot.prototype._stackDepthTest=[],Ot.prototype.pushDepthTest=function(t){this._stackDepthTest.push(t),t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)},Ot.prototype.stateDepthTest=function(){return this._stackDepthTest[this._stackDepthTest.length-1]},Ot.prototype.popDepthTest=function(){this._stackDepthTest.pop(),this._stackDepthTest[this._stackDepthTest.length-1]?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)},Ot.prototype._stackDepthWrite=[],Ot.prototype.pushDepthWrite=function(t){t=t||!1,this._stackDepthWrite.push(t),this.gl.depthMask(t)},Ot.prototype.stateDepthWrite=function(){return this._stackDepthWrite[this._stackDepthWrite.length-1]},Ot.prototype.popDepthWrite=function(){this._stackDepthWrite.pop(),this.gl.depthMask(this._stackDepthWrite[this._stackDepthWrite.length-1]||!1)},Ot.prototype._stackCullFace=[],Ot.prototype.pushCullFace=function(t){this._stackCullFace.push(t),t?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE)},Ot.prototype.stateCullFace=function(){return this._stackCullFace[this._stackCullFace.length-1]},Ot.prototype.popCullFace=function(){this._stackCullFace.pop(),this._stackCullFace[this._stackCullFace.length-1]?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE)},Ot.prototype._stackCullFaceFacing=[],Ot.prototype.pushCullFaceFacing=function(t){this._stackCullFaceFacing.push(t),this.gl.cullFace(this._stackCullFaceFacing[this._stackCullFaceFacing.length-1])},Ot.prototype.stateCullFaceFacing=function(){return this._stackCullFaceFacing[this._stackCullFaceFacing.length-1]},Ot.prototype.popCullFaceFacing=function(){this._stackCullFaceFacing.pop(),this._stackCullFaceFacing.length>0&&this.gl.cullFace(this._stackCullFaceFacing[this._stackCullFaceFacing.length-1])},Ot.prototype._stackDepthFunc=[],Ot.prototype.pushDepthFunc=function(t){this._stackDepthFunc.push(t),this.gl.depthFunc(t)},Ot.prototype.stateDepthFunc=function(){return this._stackDepthFunc.length>0&&this._stackDepthFunc[this._stackDepthFunc.length-1]},Ot.prototype.popDepthFunc=function(){this._stackDepthFunc.pop(),this._stackDepthFunc.length>0&&this.gl.depthFunc(this._stackDepthFunc[this._stackDepthFunc.length-1])},Ot.prototype._stackBlend=[],Ot.prototype.pushBlend=function(t){this._stackBlend.push(t),t?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND)},Ot.prototype.popBlend=function(){this._stackBlend.pop(),this._stackBlend[this._stackBlend.length-1]?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND)},Ot.prototype.stateBlend=function(){return this._stackBlend[this._stackBlend.length-1]};Ot.prototype._stackBlendMode=[],Ot.prototype._stackBlendModePremul=[],Ot.prototype.pushBlendMode=function(t,e){this._stackBlendMode.push(t),this._stackBlendModePremul.push(e);const i=this._stackBlendMode.length-1;this.pushBlend(this._stackBlendMode[i]!==ot.BLEND_MODES.BLEND_NONE),this._setBlendMode(this._stackBlendMode[i],this._stackBlendModePremul[i])},Ot.prototype.popBlendMode=function(){this._stackBlendMode.pop(),this._stackBlendModePremul.pop();const t=this._stackBlendMode.length-1;this.popBlend(this._stackBlendMode[t]!==ot.BLEND_MODES.BLEND_NONE),t>=0&&this._setBlendMode(this._stackBlendMode[t],this._stackBlendModePremul[t])},Ot.prototype.glGetAttribLocation=function(t,e){return this.gl.getAttribLocation(t,e)},Ot.prototype.shouldDrawHelpers=function(t){return!this.frameStore.shadowPass&&(!!t.patch.isEditorMode()&&(CABLES.UI.renderHelper||CABLES.UI.renderHelperCurrent&&t.isCurrentUiOp()))},Ot.prototype._setBlendMode=function(t,e){const i=this.gl;t==ot.BLEND_MODES.BLEND_NONE||(t==ot.BLEND_MODES.BLEND_ADD?e?(i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE,i.ONE,i.ONE)):(i.blendEquation(i.FUNC_ADD),i.blendFunc(i.SRC_ALPHA,i.ONE)):t==ot.BLEND_MODES.BLEND_SUB?e?(i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ZERO,i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ONE_MINUS_SRC_ALPHA)):(i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ZERO,i.ONE_MINUS_SRC_COLOR)):t==ot.BLEND_MODES.BLEND_MUL?e?(i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA)):(i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ZERO,i.SRC_COLOR)):t==ot.BLEND_MODES.BLEND_NORMAL?e?(i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)):(i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)):this._log.log("setblendmode: unknown blendmode"))},Ot.prototype.setCursor=function(t){this._cursor=t};const Rt=Object.assign({Framebuffer:function(t,e,i,s){const r=t;this._log=new h("Framebuffer");const n=r.gl.getExtension("WEBGL_depth_texture")||r.gl.getExtension("WEBKIT_WEBGL_depth_texture")||r.gl.getExtension("MOZ_WEBGL_depth_texture")||r.gl.DEPTH_TEXTURE;n||r.exitError("NO_DEPTH_TEXTURE","no depth texture support");let o=e||512,a=i||512;(s=s||{isFloatingPointTexture:!1}).hasOwnProperty("clear")||(s.clear=!0),s.hasOwnProperty("filter")||(s.filter=L.FILTER_LINEAR);const l=new L(r,{isFloatingPointTexture:s.isFloatingPointTexture,filter:s.filter,wrap:s.wrap||L.CLAMP_TO_EDGE});let c=null;n&&(c=new L(r,{isDepthTexture:!0})),this._options=s;const u=r.gl.createFramebuffer(),g=r.gl.createRenderbuffer();this.getWidth=function(){return o},this.getHeight=function(){return a},this.getGlFrameBuffer=function(){return u},this.getDepthRenderBuffer=function(){return g},this.getTextureColor=function(){return l},this.getTextureDepth=function(){return c},this.setFilter=function(t){l.filter=t,l.setSize(o,a)},this.setSize=function(t,e){if(t<2&&(t=2),e<2&&(e=2),o=Math.ceil(t),a=Math.ceil(e),r.profileData.profileFrameBuffercreate++,r.gl.bindFramebuffer(r.gl.FRAMEBUFFER,u),r.gl.bindRenderbuffer(r.gl.RENDERBUFFER,g),l.setSize(o,a),c&&c.setSize(o,a),n&&r.gl.renderbufferStorage(r.gl.RENDERBUFFER,r.gl.DEPTH_COMPONENT16,o,a),r.gl.framebufferTexture2D(r.gl.FRAMEBUFFER,r.gl.COLOR_ATTACHMENT0,r.gl.TEXTURE_2D,l.tex,0),n&&(r.gl.framebufferRenderbuffer(r.gl.FRAMEBUFFER,r.gl.DEPTH_ATTACHMENT,r.gl.RENDERBUFFER,g),r.gl.framebufferTexture2D(r.gl.FRAMEBUFFER,r.gl.DEPTH_ATTACHMENT,r.gl.TEXTURE_2D,c.tex,0)),!r.gl.isFramebuffer(u))throw new Error("Invalid framebuffer");const i=r.gl.checkFramebufferStatus(r.gl.FRAMEBUFFER);switch(i){case r.gl.FRAMEBUFFER_COMPLETE:break;case r.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw this._log.warn("FRAMEBUFFER_INCOMPLETE_ATTACHMENT...",o,a,l.tex,g),new Error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");case r.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw this._log.warn("FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"),new Error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");case r.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw this._log.warn("FRAMEBUFFER_INCOMPLETE_DIMENSIONS"),new Error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");case r.gl.FRAMEBUFFER_UNSUPPORTED:throw this._log.warn("FRAMEBUFFER_UNSUPPORTED"),new Error("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");case 36059:this._log.warn("Incomplete: FRAMEBUFFER_INCOMPLETE_DRAW_BUFFER from ext. Or Safari/iOS undefined behaviour.");break;default:throw this._log.warn("incomplete framebuffer",i),new Error("Incomplete framebuffer: "+i)}r.gl.bindTexture(r.gl.TEXTURE_2D,null),r.gl.bindRenderbuffer(r.gl.RENDERBUFFER,null),r.gl.bindFramebuffer(r.gl.FRAMEBUFFER,null)},this.renderStart=function(){r.pushModelMatrix(),r.gl.bindFramebuffer(r.gl.FRAMEBUFFER,u),r.pushGlFrameBuffer(u),r.pushFrameBuffer(this),r.pushPMatrix(),r.gl.viewport(0,0,o,a),this._options.clear&&(r.gl.clearColor(0,0,0,0),r.gl.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT))},this.renderEnd=function(){r.popPMatrix(),r.gl.bindFramebuffer(r.gl.FRAMEBUFFER,r.popGlFrameBuffer()),r.popFrameBuffer(),r.popModelMatrix(),r.resetViewPort()},this.delete=function(){l.delete(),c&&c.delete(),r.gl.deleteRenderbuffer(g),r.gl.deleteFramebuffer(u)},this.setSize(o,a)},Framebuffer2:B,Geometry:Y,BoundingBox:z,Marker:function(t){const e=new Y("marker");e.setPointVertices([1e-5,0,0,1,0,0,0,1e-5,0,0,1,0,0,0,1e-5,0,0,1]);const i=new at(t,e,t.gl.LINES);i.setGeom(e);const s=new vt(t,"markermaterial"),r="".endl()+"precision highp float;".endl()+"IN vec3 axisColor;".endl()+"void main()".endl()+"{".endl()+"    vec4 col=vec4(axisColor,1.0);".endl()+"    outColor = col;".endl()+"}",n="".endl()+"IN vec3 vPosition;".endl()+"UNI mat4 projMatrix;".endl()+"UNI mat4 mvMatrix;".endl()+"OUT vec3 axisColor;".endl()+"void main()".endl()+"{".endl()+"   vec4 pos=vec4(vPosition, 1.0);".endl()+"   if(pos.x!=0.0)axisColor=vec3(1.0,0.3,0.0);".endl()+"   if(pos.y!=0.0)axisColor=vec3(0.0,1.0,0.2);".endl()+"   if(pos.z!=0.0)axisColor=vec3(0.0,0.5,1.0);".endl()+"   gl_Position = projMatrix * mvMatrix * pos;".endl()+"}";s.setSource(n,r),this._vScale=vec3.create(),this.draw=function(t,e,r){const n=e||2;t.pushModelMatrix(),t.pushShader(s),vec3.set(this._vScale,n,n,n),mat4.scale(t.mvMatrix,t.mvMatrix,this._vScale),t.pushDepthTest(1==r),i.render(t.getShader()),t.popDepthTest(),t.popShader(),t.popModelMatrix()}},WirePoint:function(t){const e=t.gl.createBuffer(),i=vec3.create();this.render=function(t,s){t.pushModelMatrix(),vec3.set(i,s,s,s),mat4.scale(t.mvMatrix,t.mvMatrix,i);const r=t.getShader();r&&(r.bind(),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,e),t.gl.vertexAttribPointer(r.getAttrVertexPos(),e.itemSize,t.gl.FLOAT,!1,0,0),t.gl.enableVertexAttribArray(r.getAttrVertexPos()),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,e),t.gl.drawArrays(t.gl.LINE_STRIP,0,e.numItems)),t.popModelMatrix()},function(){const i=[];let s=0,r=0;for(s=0;s<=Math.round(24);s++)r=360/Math.round(24)*s*dt,i.push(.5*Math.cos(r)),i.push(0),i.push(.5*Math.sin(r));for(s=0;s<=Math.round(24);s++)r=360/Math.round(24)*s*dt,i.push(.5*Math.cos(r)),i.push(.5*Math.sin(r)),i.push(0);for(s=0;s<=Math.round(24);s++)r=360/Math.round(24)*s*dt,i.push(0),i.push(.5*Math.cos(r)),i.push(.5*Math.sin(r));t.gl.bindBuffer(t.gl.ARRAY_BUFFER,e),t.gl.bufferData(t.gl.ARRAY_BUFFER,new Float32Array(i),t.gl.STATIC_DRAW),e.itemSize=3,e.numItems=i.length/e.itemSize}()},WireCube:function(t){const e=t.gl.createBuffer(),i=vec3.create();this.render=function(t,s,r,n){t.pushModelMatrix(),vec3.set(i,s||1,r||1,n||1),mat4.scale(t.mvMatrix,t.mvMatrix,i);const o=t.getShader();o&&(o.bind(),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,e),t.gl.vertexAttribPointer(o.getAttrVertexPos(),e.itemSize,t.gl.FLOAT,!1,0,0),t.gl.enableVertexAttribArray(o.getAttrVertexPos()),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,e),t.gl.drawArrays(t.gl.LINE_STRIP,0,e.numItems)),t.popModelMatrix()},function(){const i=[];i.push(-1,-1,1),i.push(1,-1,1),i.push(1,1,1),i.push(-1,1,1),i.push(-1,-1,1),i.push(-1,-1,-1),i.push(1,-1,-1),i.push(1,1,-1),i.push(-1,1,-1),i.push(-1,-1,-1),i.push(-1,-1,-1),i.push(-1,1,-1),i.push(-1,1,1),i.push(-1,-1,1),i.push(-1,-1,-1),i.push(1,-1,-1),i.push(1,1,-1),i.push(1,1,1),i.push(1,-1,1),i.push(1,-1,-1),t.gl.bindBuffer(t.gl.ARRAY_BUFFER,e),t.gl.bufferData(t.gl.ARRAY_BUFFER,new Float32Array(i),t.gl.STATIC_DRAW),e.itemSize=3,e.numItems=i.length/e.itemSize}()},MatrixStack:xt,Mesh:at,MESH:ht,ShaderLibMods:ut,Shader:vt,Uniform:rt,MESHES:lt,Context:Ot,Texture:L,TextureEffect:ct,isWindows:ft,getWheelSpeed:Et,getWheelDelta:Tt,onLoadingAssetsFinished:null,profileData:void 0,UniColorShader:class{constructor(t){this.shader=new CGL.Shader(t,"markermaterial");const e="".endl()+"void main()".endl()+"{".endl()+"    outColor = vec4(color.rgb,1.0);".endl()+"}",i="".endl()+"IN vec3 vPosition;".endl()+"UNI mat4 projMatrix;".endl()+"UNI mat4 mvMatrix;".endl()+"void main()".endl()+"{".endl()+"   gl_Position = projMatrix * mvMatrix * vec4(vPosition,1.0);".endl()+"}";this.shader.setSource(i,e),this.coloruni=this.shader.addUniformFrag("4f","color",[1,.777,1,1])}setColor(t,e,i,s){this.coloruni.set(t,e,i,s)}}},ot.BLEND_MODES,ot.SHADER,ot.MATH,ot.BLEND_MODES);window.CGL=Rt;const St=function(t){W.apply(this),this.id=CABLES.uuid(),this.portIn=null,this.portOut=null,this.scene=t,this.activityCounter=0,this.ignoreInSerialize=!1};St.prototype.setValue=function(t){void 0===t?this._setValue():this.portIn.set(t)},St.prototype.activity=function(){this.activityCounter++},St.prototype._setValue=function(){if(!this.portOut)return void this.remove();const t=this.portOut.get();t==t&&(this.portIn.type!=l.OP_PORT_TYPE_FUNCTION&&this.activity(),(this.portIn.get()!==t||this.portIn.changeAlways)&&this.portIn.set(t))},St.prototype.getOtherPort=function(t){return t==this.portIn?this.portOut:this.portIn},St.prototype.remove=function(){this.portIn&&this.portIn.removeLink(this),this.portOut&&this.portOut.removeLink(this),this.scene&&this.scene.emitEvent("onUnLink",this.portIn,this.portOut,this),!this.portIn||this.portIn.type!=l.OP_PORT_TYPE_OBJECT&&this.portIn.type!=l.OP_PORT_TYPE_ARRAY||(this.portIn.set(null),this.portIn.links.length>0&&this.portIn.set(this.portIn.links[0].getOtherPort(this.portIn).get())),this.portIn&&this.portIn.parent._checkLinksNeededToWork(),this.portOut&&this.portOut.parent._checkLinksNeededToWork(),this.portIn=null,this.portOut=null,this.scene=null},St.prototype.link=function(t,e){if(!St.canLink(t,e))return console.warn("[core_link] cannot link ports!",t,e),!1;t.direction==c.PORT_DIR_IN?(this.portIn=t,this.portOut=e):(this.portIn=e,this.portOut=t),t.addLink(this),e.addLink(this),this.setValue(),t.onLink&&t.onLink(this),e.onLink&&e.onLink(this),t.parent._checkLinksNeededToWork(),e.parent._checkLinksNeededToWork()},St.prototype.getSerialized=function(){const t={};return t.portIn=this.portIn.getName(),t.portOut=this.portOut.getName(),t.objIn=this.portIn.parent.id,t.objOut=this.portOut.parent.id,t},St.canLinkText=function(t,e){if(t.direction==e.direction){let t="(out)";return e.direction==c.PORT_DIR_IN&&(t="(in)"),"can not link: same direction "+t}return t.parent==e.parent?"can not link: same op":t.type!=l.OP_PORT_TYPE_DYNAMIC&&e.type!=l.OP_PORT_TYPE_DYNAMIC&&t.type!=e.type?"can not link: different type":t?e?t.direction==c.PORT_DIR_IN&&t.isAnimated()||e.direction==c.PORT_DIR_IN&&e.isAnimated()?"can not link: is animated":t.isLinkedTo(e)?"ports already linked":t.canLink&&!t.canLink(e)||e.canLink&&!e.canLink(t)?"Incompatible":"can link":"can not link: port 2 invalid":"can not link: port 1 invalid"},St.canLink=function(t,e){return!!t&&(!!e&&((t.direction!=c.PORT_DIR_IN||!t.isAnimated())&&((e.direction!=c.PORT_DIR_IN||!e.isAnimated())&&(!t.isHidden()&&!e.isHidden()&&(!t.isLinkedTo(e)&&(t.direction!=e.direction&&((t.type==e.type||t.type==l.OP_PORT_TYPE_DYNAMIC||e.type==l.OP_PORT_TYPE_DYNAMIC)&&(t.type==l.OP_PORT_TYPE_DYNAMIC||e.type==l.OP_PORT_TYPE_DYNAMIC||t.parent!=e.parent&&(!(t.canLink&&!t.canLink(e))&&!(e.canLink&&!e.canLink(t)))))))))))};const Pt=function(){W.apply(this),this._log=new h("core_op"),this.data={},this.storage={},this.objName="",this.portsOut=[],this.portsIn=[],this.portsInData=[],this.opId="",this.uiAttribs={},this.enabled=!0,this.patch=arguments[0],this.name=arguments[1],this._needsLinkedToWork=[],this._needsParentOp=null,this._shortOpName="",this.hasUiErrors=!1,this._uiErrors={},arguments[1]&&(this._shortOpName=CABLES.getShortOpName(arguments[1]),this.getTitle()),this.id=arguments[2]||T(),this.onAddPort=null,this.onCreate=null,this.onResize=null,this.onLoaded=null,this.onDelete=null,this.onUiAttrChange=null,this.onError=null,this._eventCallbacks={},this._instances=null,this.preRender=null,this.init=null};{Pt.prototype.clearUiAttrib=function(t){const e={name:null};this.uiAttrib(e)},Pt.prototype.getTitle=function(){return this.uiAttribs?(void 0!==this.uiAttribs.title&&""!==this.uiAttribs.title||-1!=this.objName.indexOf("Ops.Ui.")||(this.uiAttribs.title=this._shortOpName),void 0===this.uiAttribs.title&&(this.uiAttribs.title=this._shortOpName),this.uiAttribs.title):"nouiattribs"+this.name},Pt.prototype.setTitle=function(t){const e=this.name!=t;this.name=t,this.uiAttr({title:t}),e&&this.fireEvent("onTitleChange",t)};const t=function(t){if(!t)return;(t.error||t.warning||t.hint)&&this._log.warn("old ui error/warning attribute in "+this.name+", use op.setUiError !",t),"object"!=typeof t&&this._log.error("op.uiAttrib attribs are not of type object"),this.uiAttribs||(this.uiAttribs={});let e=!1;for(const i in t)this.uiAttribs[i]!=t[i]&&(e=!0),this.uiAttribs[i]=t[i];this.uiAttribs.hasOwnProperty("selected")&&0==this.uiAttribs.selected&&delete this.uiAttribs.selected,t.title&&t.title!=this.name&&this.setTitle(t.title),e&&(this.fireEvent("onUiAttribsChange",t),this.patch.emitEvent("onUiAttribsChange",this,t))};Pt.prototype.setUiAttribs=Pt.prototype.setUiAttrib=Pt.prototype.uiAttr=t,Pt.prototype.getName=function(){return this.uiAttribs.name?this.uiAttribs.name:this.objName.split(".")},Pt.prototype.addOutPort=function(t){return t.direction=c.PORT_DIR_OUT,t.parent=this,this.portsOut.push(t),this.fireEvent("onPortAdd",t),t},Pt.prototype.hasDynamicPort=function(){let t=0;for(t=0;t<this.portsIn.length;t++){if(this.portsIn[t].type==l.OP_PORT_TYPE_DYNAMIC)return!0;if("dyn"==this.portsIn[t].getName())return!0}for(t=0;t<this.portsOut.length;t++){if(this.portsOut[t].type==l.OP_PORT_TYPE_DYNAMIC)return!0;if("dyn"==this.portsOut[t].getName())return!0}return!1},Pt.prototype.addInPort=function(t){if(!(t instanceof et))throw new Error("parameter is not a port!");return t.direction=c.PORT_DIR_IN,t.parent=this,this.portsIn.push(t),this.fireEvent("onPortAdd",t),t},Pt.prototype.inFunction=Pt.prototype.inTrigger=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_FUNCTION));return void 0!==e&&i.set(e),i},Pt.prototype.inFunctionButton=Pt.prototype.inTriggerButton=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_FUNCTION,{display:"button"}));return void 0!==e&&i.set(e),i},Pt.prototype.inFunctionButton=Pt.prototype.inUiTriggerButtons=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_FUNCTION,{display:"buttons"}));return void 0!==e&&i.set(e),i},Pt.prototype.inValueFloat=Pt.prototype.inValue=Pt.prototype.inFloat=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_VALUE));return void 0!==e&&(i.set(e),i.defaultValue=e),i},Pt.prototype.inValueBool=Pt.prototype.inBool=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_VALUE,{display:"bool"}));return void 0!==e&&(i.set(e),i.defaultValue=i.get()),i},Pt.prototype.inValueString=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_VALUE,{type:"string"}));return i.value="",void 0!==e&&(i.set(e),i.defaultValue=e),i},Pt.prototype.inString=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_STRING,{type:"string"}));return e=e||"",i.value=e,i.set(e),i.defaultValue=e,i},Pt.prototype.inValueText=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_VALUE,{type:"string",display:"text"}));return i.value="",void 0!==e&&(i.set(e),i.defaultValue=e),i},Pt.prototype.inTextarea=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_STRING,{type:"string",display:"text"}));return i.value="",void 0!==e&&(i.set(e),i.defaultValue=e),i},Pt.prototype.inStringEditor=function(t,e,i,s=!0){const r=this.addInPort(new et(this,t,l.OP_PORT_TYPE_STRING,{type:"string",display:"editor",editorSyntax:i,hideFormatButton:s}));return r.value="",void 0!==e&&(r.set(e),r.defaultValue=e),r},Pt.prototype.inValueEditor=function(t,e,i,s=!0){const r=this.addInPort(new et(this,t,l.OP_PORT_TYPE_VALUE,{type:"string",display:"editor",editorSyntax:i,hideFormatButton:s}));return r.value="",void 0!==e&&(r.set(e),r.defaultValue=e),r},Pt.prototype.inValueSelect=Pt.prototype.inDropDown=function(t,e,i,s){let r=null;if(s){const i=new et(this,t,l.OP_PORT_TYPE_VALUE,{display:"dropdown",hidePort:!0,type:"string",values:e});r=this.addInPort(i)}else{const s=new et(this,t+" index",l.OP_PORT_TYPE_VALUE,{increment:"integer",hideParam:!0}),n=this.addInPort(s),o=new st(this,t,l.OP_PORT_TYPE_VALUE,{display:"dropdown",hidePort:!0,type:"string",values:e},n);if(o.indexPort=s,s.onLinkChanged=function(){o.setUiAttribs({greyout:s.isLinked()})},r=this.addInPort(o),void 0!==i){r.set(i);const t=e.findIndex(t=>t==i);n.setValue(t),r.defaultValue=i,n.defaultValue=t}}return r},Pt.prototype.inSwitch=function(t,e,i,s){let r=null;if(s){const i=new et(this,t,l.OP_PORT_TYPE_STRING,{display:"switch",hidePort:!0,type:"string",values:e});r=this.addInPort(i)}else{const s=new et(this,t+" index",l.OP_PORT_TYPE_VALUE,{increment:"integer",hideParam:!0}),n=this.addInPort(s),o=new it(this,t,l.OP_PORT_TYPE_STRING,{display:"switch",hidePort:!0,type:"string",values:e},n);if(s.onLinkChanged=function(){o.setUiAttribs({greyout:s.isLinked()})},r=this.addInPort(o),void 0!==i){r.set(i);const t=e.findIndex(t=>t==i);n.setValue(t),r.defaultValue=i,n.defaultValue=t}}return r},Pt.prototype.inValueInt=Pt.prototype.inInt=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_VALUE,{increment:"integer"}));return void 0!==e&&(i.set(e),i.defaultValue=e),i},Pt.prototype.inFile=function(t,e,i){const s=this.addInPort(new et(this,t,l.OP_PORT_TYPE_VALUE,{display:"file",type:"string",filter:e}));return void 0!==i&&(s.set(i),s.defaultValue=i),s},Pt.prototype.inUrl=function(t,e,i){const s=this.addInPort(new et(this,t,l.OP_PORT_TYPE_STRING,{display:"file",type:"string",filter:e}));return void 0!==i&&(s.set(i),s.defaultValue=i),s},Pt.prototype.inTexture=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_OBJECT,{display:"texture",objType:"texture",preview:!0}));return void 0!==e&&i.set(e),i},Pt.prototype.inObject=function(t,e,i){const s=this.addInPort(new et(this,t,l.OP_PORT_TYPE_OBJECT,{objType:i}));return void 0!==e&&s.set(e),s},Pt.prototype.inGradient=function(t,e){const i=this.addInPort(new et(this,t,l.OP_PORT_TYPE_VALUE,{display:"gradient",hidePort:!0}));return void 0!==e&&i.set(e),i},Pt.prototype.inArray=function(t,e,i){!i&&CABLES.UTILS.isNumeric(e)&&(i=e);const s=this.addInPort(new et(this,t,l.OP_PORT_TYPE_ARRAY,{stride:i}));return void 0===e||!Array.isArray(e)&&null!=e||s.set(e),s},Pt.prototype.inValueSlider=Pt.prototype.inFloatSlider=function(t,e,i,s){const r={display:"range"};null!=i&&null!=s&&(r.min=i,r.max=s);const n=this.addInPort(new et(this,t,l.OP_PORT_TYPE_VALUE,r));return void 0!==e&&(n.set(e),n.defaultValue=e),n},Pt.prototype.outFunction=Pt.prototype.outTrigger=function(t,e){const i=this.addOutPort(new et(this,t,l.OP_PORT_TYPE_FUNCTION));return void 0!==e&&i.set(e),i},Pt.prototype.outValue=Pt.prototype.outNumber=function(t,e){const i=this.addOutPort(new et(this,t,l.OP_PORT_TYPE_VALUE));return void 0!==e&&i.set(e),i},Pt.prototype.outValueBool=Pt.prototype.outBool=function(t,e){const i=this.addOutPort(new et(this,t,l.OP_PORT_TYPE_VALUE,{display:"bool"}));return void 0!==e?i.set(e):i.set(0),i},Pt.prototype.outBoolNum=function(t,e){const i=this.addOutPort(new et(this,t,l.OP_PORT_TYPE_VALUE,{display:"boolnum"}));return i.set=function(t){this.setValue(t?1:0)}.bind(i),void 0!==e?i.set(e):i.set(0),i},Pt.prototype.outValueString=function(t,e){const i=this.addOutPort(new et(this,t,l.OP_PORT_TYPE_VALUE,{type:"string"}));return void 0!==e&&i.set(e),i},Pt.prototype.outString=function(t,e){const i=this.addOutPort(new et(this,t,l.OP_PORT_TYPE_STRING,{type:"string"}));return void 0!==e?i.set(e):i.set(""),i},Pt.prototype.outObject=function(t,e,i){const s=this.addOutPort(new et(this,t,l.OP_PORT_TYPE_OBJECT,{objType:i||null}));return void 0!==e&&s.set(e),s.ignoreValueSerialize=!0,s},Pt.prototype.outArray=function(t,e,i){!i&&CABLES.UTILS.isNumeric(e)&&(i=e);const s=this.addOutPort(new et(this,t,l.OP_PORT_TYPE_ARRAY,{stride:i}));return void 0===e||!Array.isArray(e)&&null!=e||s.set(e),s.ignoreValueSerialize=!0,s},Pt.prototype.outTexture=function(t,e){const i=this.addOutPort(new et(this,t,l.OP_PORT_TYPE_OBJECT,{preview:!0,objType:"texture"}));return void 0!==e&&i.set(e),i.ignoreValueSerialize=!0,i},Pt.prototype.inDynamic=function(t,e,i,s){const r=new et(this,t,l.OP_PORT_TYPE_DYNAMIC,i);return r.shouldLink=function(t,i){if(e&&g.isArray(e)){for(let s=0;s<e.length;s++){if(t==this&&i.type===e[s])return!0;if(i==this&&t.type===e[s])return!0}return!1}return!0},this.addInPort(r),void 0!==s&&(r.set(s),r.defaultValue=s),r},Pt.prototype.printInfo=function(){for(let t=0;t<this.portsIn.length;t++)console.log("in: "+this.portsIn[t].getName());for(const t in this.portsOut)console.log("out: "+this.portsOut[t].getName())},Pt.prototype.getOutChilds=function(){const t=[];for(const e in this.portsOut)for(const i in this.portsOut[e].links)this.portsOut[e].type==l.OP_PORT_TYPE_FUNCTION&&t.push(this.portsOut[e].links[i].portIn.parent);return t},Pt.prototype.markChilds=function(){this.marked=!0;for(const t in this.portsOut)for(const e in this.portsOut[t].links)this.portsOut[t].parent.marked=!0,this.portsOut[t].links[e].portIn.parent!=this&&this.portsOut[t].links[e].portIn.parent.markChilds()},Pt.prototype.selectChilds=function(){this.setUiAttrib({selected:!0});for(const t in this.portsOut)for(const e in this.portsOut[t].links)this.portsOut[t].parent.setUiAttrib({selected:!0}),this.portsOut[t].links[e].portIn.parent!=this&&this.portsOut[t].links[e].portIn.parent.selectChilds()},Pt.prototype.deleteChilds=function(){const t=[];for(const e in this.portsOut)for(const i in this.portsOut[e].links)this.portsOut[e].links[i].portIn.parent!=this&&(this.portsOut[e].parent!=this&&t.push(this.portsOut[e].parent),t.push(this.portsOut[e].links[i].portIn.parent),this.portsOut[e].links[i].portIn.parent.deleteChilds());for(const e in t)this.patch.deleteOp(t[e].id)},Pt.prototype.removeLinks=function(){for(let t=0;t<this.portsIn.length;t++)this.portsIn[t].removeLinks();for(let t=0;t<this.portsOut.length;t++)this.portsOut[t].removeLinks()},Pt.prototype.countFittingPorts=function(t){let e=0;for(const i in this.portsOut)St.canLink(t,this.portsOut[i])&&e++;for(const i in this.portsIn)St.canLink(t,this.portsIn[i])&&e++;return e},Pt.prototype.findFittingPort=function(t,e=!1){if(e){for(const e in this.portsIn)if(St.canLink(t,this.portsIn[e]))return this.portsIn[e];for(const e in this.portsOut)if(St.canLink(t,this.portsOut[e]))return this.portsOut[e]}else{for(const e in this.portsOut)if(St.canLink(t,this.portsOut[e]))return this.portsOut[e];for(const e in this.portsIn)if(St.canLink(t,this.portsIn[e]))return this.portsIn[e]}},Pt.prototype.getSerialized=function(t){const e={};this.opId&&(e.opId=this.opId),e.objName=this.objName,e.id=this.id,e.uiAttribs=this.uiAttribs,this.storage&&Object.keys(this.storage).length>0&&(e.storage=this.storage),this.uiAttribs.title==this._shortOpName&&delete this.uiAttribs.title,this.uiAttribs.hasOwnProperty("working")&&1==this.uiAttribs.working&&delete this.uiAttribs.working,t&&this.uiAttribs.hasOwnProperty("uierrors")&&delete this.uiAttribs.uierrors,e.portsIn=[],e.portsOut=[];for(let t=0;t<this.portsIn.length;t++)e.portsIn.push(this.portsIn[t].getSerialized());for(const t in this.portsOut)e.portsOut.push(this.portsOut[t].getSerialized());return e},Pt.prototype.getFirstOutPortByType=function(t){for(const e in this.portsOut)if(this.portsOut[e].type==t)return this.portsOut[e]},Pt.prototype.getFirstInPortByType=function(t){for(const e in this.portsIn)if(this.portsIn[e].type==t)return this.portsIn[e]},Pt.prototype.getPort=Pt.prototype.getPortByName=function(t,e){if(e){for(let e=0;e<this.portsIn.length;e++)if(this.portsIn[e].getName().toLowerCase()==t)return this.portsIn[e];for(let e=0;e<this.portsOut.length;e++)if(this.portsOut[e].getName().toLowerCase()==t)return this.portsOut[e]}else{for(let e=0;e<this.portsIn.length;e++)if(this.portsIn[e].getName()==t)return this.portsIn[e];for(let e=0;e<this.portsOut.length;e++)if(this.portsOut[e].getName()==t)return this.portsOut[e]}},Pt.prototype.getPortById=function(t){for(let e=0;e<this.portsIn.length;e++)if(this.portsIn[e].id==t)return this.portsIn[e];for(let e=0;e<this.portsOut.length;e++)if(this.portsOut[e].id==t)return this.portsOut[e]},Pt.prototype.updateAnims=function(){for(let t=0;t<this.portsIn.length;t++)this.portsIn[t].updateAnim()},Pt.prototype.log=function(){const t="op "+this.objName;if(CABLES.UI&&!CABLES.UI.logFilter.shouldPrint(t,...arguments))return;if(!CABLES.UI&&this.patch.silent)return;const e=["[op "+this._shortOpName+"]"];e.push.apply(e,arguments),Function.prototype.apply.apply(console.log,[console,e])},Pt.prototype.error=Pt.prototype.logError=function(){const t=["[op "+this._shortOpName+"]"];t.push.apply(t,arguments),Function.prototype.apply.apply(console.error,[console,t]),window.gui&&window.gui.emitEvent("opLogEvent",this.objName,"error",arguments)},Pt.prototype.warn=Pt.prototype.logWarn=function(){const t=["[op "+this._shortOpName+"]"];t.push.apply(t,arguments),Function.prototype.apply.apply(console.warn,[console,t])},Pt.prototype.verbose=Pt.prototype.logVerbose=function(){const t="op "+this._shortOpName;if(CABLES.UI&&!CABLES.UI.logFilter.shouldPrint(t,...arguments))return;if(!CABLES.UI&&this.patch.silent)return;const e=["["+t+"]"];e.push.apply(e,arguments),Function.prototype.apply.apply(console.info,[console,e])},Pt.prototype.unLink=function(){for(let t=0;t<this.portsOut.length;t++)this.portsOut[t].removeLinks();for(let t=0;t<this.portsIn.length;t++)this.portsIn[t].removeLinks()},Pt.prototype.profile=function(t){for(let t=0;t<this.portsIn.length;t++)this.portsIn[t]._onTriggered=this.portsIn[t]._onTriggeredProfiling,this.portsIn[t].set=this.portsIn[t]._onSetProfiling},Pt.prototype.findParent=function(t){for(let e=0;e<this.portsIn.length;e++)if(this.portsIn[e].isLinked()){if(this.portsIn[e].links[0].portOut.parent.objName==t)return this.portsIn[e].links[0].portOut.parent;let i=null;if(i=this.portsIn[e].links[0].portOut.parent.findParent(t),i)return i}return null},Pt.prototype.cleanUp=function(){if(this._instances){for(let t=0;t<this._instances.length;t++)this._instances[t].onDelete&&this._instances[t].onDelete();this._instances.length=0}},Pt.prototype.instanced=function(t){if(console.log("instanced",this.patch.instancing.numCycles()),0===this.patch.instancing.numCycles())return!1;let e=0,i=0;if(!this._instances||this._instances.length!=this.patch.instancing.numCycles()){for(this._instances||(this._instances=[]),this._.log("creating instances of ",this.objName,this.patch.instancing.numCycles(),this._instances.length),this._instances.length=this.patch.instancing.numCycles(),e=0;e<this._instances.length;e++){this._instances[e]=this.patch.createOp(this.objName,!0),this._instances[e].instanced=function(){return!1},this._instances[e].uiAttr(this.uiAttribs);for(let t=0;t<this.portsOut.length;t++)this.portsOut[t].type==l.OP_PORT_TYPE_FUNCTION&&(this._instances[e].getPortByName(this.portsOut[t].name).trigger=this.portsOut[t].trigger.bind(this.portsOut[t]))}for(i=0;i<this.portsIn.length;i++)this.portsIn[i].onChange=null,this.portsIn[i].onValueChanged=null}for(i=0;i<this.portsIn.length;i++)this.portsIn[i].type!=l.OP_PORT_TYPE_VALUE&&this.portsIn[i].type!=l.OP_PORT_TYPE_ARRAY||this._instances[this.patch.instancing.index()].portsIn[i].set(this.portsIn[i].get()),this.portsIn[i].type,l.OP_PORT_TYPE_FUNCTION;for(i=0;i<this.portsOut.length;i++)this.portsOut[i].type==l.OP_PORT_TYPE_VALUE&&this.portsOut[i].set(this._instances[this.patch.instancing.index()].portsOut[i].get());return!0},Pt.prototype.initInstancable=function(){},Pt.prototype.setValues=function(t){for(const e in t){const i=this.getPortByName(e);i?i.set(t[e]):this._log.warn("op.setValues: port not found:",e)}},Pt.prototype.setUiError=function(t,e,i){if(!e&&!this.hasUiErrors)return;if(!e&&!this._uiErrors.hasOwnProperty(t))return;if(this._uiErrors.hasOwnProperty(t)&&this._uiErrors[t].txt==e)return;t.indexOf(" ")>-1&&this._log.warn("setuierror id cant have spaces! ",t),!e&&this._uiErrors.hasOwnProperty(t)?delete this._uiErrors[t]:!e||this._uiErrors.hasOwnProperty(t)&&this._uiErrors[t].txt==e||(null==i&&(i=2),this._uiErrors[t]={txt:e,level:i,id:t});const s=[];for(const t in this._uiErrors)s.push(this._uiErrors[t]);this.uiAttr({uierrors:s}),this.hasUiErrors=Object.keys(this._uiErrors).length,console.log(t,e,this._uiErrors.hasOwnProperty(t))},Pt.prototype.setError=function(t,e){this._log.warn("old error message op.error() - use op.setUiError()")},Pt.prototype.addListener=Pt.prototype.addEventListener=function(t,e){this._eventCallbacks[t]?this._eventCallbacks[t].push(e):this._eventCallbacks[t]=[e]},Pt.prototype.hasEventListener=function(t,e){if(t&&e){if(this._eventCallbacks[t]){return-1!=this._eventCallbacks[t].indexOf(e)}}else this._log.warn("hasListener: missing parameters")},Pt.prototype.removeEventListener=function(t,e){if(this._eventCallbacks[t]){const i=this._eventCallbacks[t].indexOf(e);-1==i?this._log.warn("eventlistener "+t+" not found..."):this._eventCallbacks[t].slice(i)}},Pt.prototype.fireEvent=function(t,e){if(this._eventCallbacks[t])for(let i=0;i<this._eventCallbacks[t].length;i++)this._eventCallbacks[t][i]&&this._eventCallbacks[t][i].cb(e);this.onUiAttrChange&&"onUiAttribsChange"==t&&this.onUiAttrChange(e)},Pt.prototype.setEnabled=function(t){this.enabled=t,this.fireEvent("onEnabledChange",t)},Pt.prototype.setPortGroup=function(t,e){for(let i=0;i<e.length;i++)e[i]&&(e[i].setUiAttribs?e[i].setUiAttribs({group:t}):this._log.error("setPortGroup: invalid port!"))},Pt.prototype.setUiAxisPorts=function(t,e,i){t&&t.setUiAttribs({axis:"X"}),e&&e.setUiAttribs({axis:"Y"}),i&&i.setUiAttribs({axis:"Z"})},Pt.prototype.removePort=function(t){for(let e=0;e<this.portsIn.length;e++)if(this.portsIn[e]==t)return this.portsIn.splice(e,1),this.fireEvent("onUiAttribsChange",{}),void this.fireEvent("onPortRemoved",{})},Pt.prototype._checkLinksNeededToWork=function(){},Pt.prototype.toWorkNeedsParent=function(t){this.patch.isEditorMode()&&(this._needsParentOp=t)},Pt.prototype.toWorkPortsNeedToBeLinked=function(){if(this.patch.isEditorMode())for(let t=0;t<arguments.length;t++)-1==this._needsLinkedToWork.indexOf(arguments[t])&&this._needsLinkedToWork.push(arguments[t])},Pt.prototype.toWorkPortsNeedToBeLinkedReset=function(){this.patch.isEditorMode()&&(this._needsLinkedToWork.length=0,this.checkLinkTimeWarnings&&this.checkLinkTimeWarnings())},Pt.prototype.initVarPorts=function(){for(let t=0;t<this.portsIn.length;t++)this.portsIn[t].getVariableName()&&this.portsIn[t].setVariable(this.portsIn[t].getVariableName())},Pt.prototype.refreshParams=function(){this.patch&&this.patch.isEditorMode()&&this.isCurrentUiOp()&&gui.opParams.show(this)},Pt.prototype.isCurrentUiOp=function(){if(this.patch.isEditorMode())return gui.patchView.isCurrentOp(this)},Pt.prototype.renderVizLayer=null}Pt.getNamespaceClassName=function(t){return t?t.startsWith("Ops.Gl")?"gl":t.startsWith("Ops.WebAudio")?"audio":t.startsWith("Ops.Devices")?"devices":t.startsWith("Ops.Html")||t.startsWith("Ops.Sidebar")?"html":t.startsWith("Ops.Math")?"math":t.startsWith("Ops.User")?"user":"default":"default"},Pt.isSubpatchOp=function(t){return"Ops.Ui.Patch"==t||"Ops.Ui.SubPatch"==t};const Nt=function(t){CABLES.EventTarget.apply(this),this._log=new h("LoadingStatus"),this._loadingAssets={},this._cbFinished=[],this._assetTasks=[],this._percent=0,this._count=0,this._countFinished=0,this._order=0,this._startTime=0,this._patch=t,this._wasFinishedPrinted=!1,this._loadingAssetTaskCb=!1};Nt.prototype.setOnFinishedLoading=function(t){this._cbFinished.push(t)},Nt.prototype.getNumAssets=function(){return this._countFinished},Nt.prototype.getProgress=function(){return this._percent},Nt.prototype.checkStatus=function(){this._countFinished=0,this._count=0;for(const t in this._loadingAssets)this._count++,this._loadingAssets[t].finished||this._countFinished++;if(this._percent=(this._count-this._countFinished)/this._count,0===this._countFinished){for(let t=0;t<this._cbFinished.length;t++)if(this._cbFinished[t]){const e=this._cbFinished[t];setTimeout(()=>{e(this._patch),this.emitEvent("finishedAll")},100)}this._wasFinishedPrinted||(this._wasFinishedPrinted=!0,this.print()),this.emitEvent("finishedAll")}},Nt.prototype.getList=function(){let t=[];for(const e in this._loadingAssets)t.push(this._loadingAssets[e]);return t},Nt.prototype.getListJobs=function(){let t=[];for(const e in this._loadingAssets)this._loadingAssets[e].finished||t.push(this._loadingAssets[e].name);return t},Nt.prototype.print=function(){if(this._patch.config.silent)return;const t=[];for(const e in this._loadingAssets)t.push([this._loadingAssets[e].order,this._loadingAssets[e].type,this._loadingAssets[e].name,(this._loadingAssets[e].timeEnd-this._loadingAssets[e].timeStart)/1e3+"s"]);this._log.groupCollapsed("finished loading "+this._order+" assets in "+(Date.now()-this._startTime)/1e3+"s"),this._log.table(t),this._log.groupEnd()},Nt.prototype.finished=function(t){this._loadingAssets[t]&&(this._loadingAssets[t].finished=!0,this._loadingAssets[t].timeEnd=Date.now()),this.checkStatus(),this.emitEvent("finishedTask")},Nt.prototype._startAssetTasks=function(){for(let t=0;t<this._assetTasks.length;t++)this._assetTasks[t]();this._assetTasks.length=0},Nt.prototype.addAssetLoadingTask=function(t){this._patch.isEditorMode()&&!CABLES.UI.loaded?(this._assetTasks.push(t),this._loadingAssetTaskCb||window.gui.addEventListener("uiloaded",this._startAssetTasks.bind(this)),this._loadingAssetTaskCb=!0):t(),this.emitEvent("addAssetTask")},Nt.prototype.existByName=function(t){for(let e in this._loadingAssets)if(this._loadingAssets[e].name==t&&!this._loadingAssets[e].finished)return!0},Nt.prototype.start=function(t,e){0==this._startTime&&(this._startTime=Date.now());const i=A();return this._loadingAssets[i]={id:i,type:t,name:e,finished:!1,timeStart:Date.now(),order:this._order},this._order++,this.emitEvent("startTask"),i};const Ft=function(){this._loops=[],this._indizes=[],this._index=0};Ft.prototype.pushLoop=function(t){this._loops.push(Math.abs(Math.floor(t))),this._indizes.push(this._index)},Ft.prototype.popLoop=function(){this._loops.pop(),this._index=this._indizes.pop(),0===this._loops.length&&(this._index=0)},Ft.prototype.numLoops=function(){return this._loops.length},Ft.prototype.numCycles=function(){if(0===this._loops.length)return 0;let t=this._loops[0];for(let e=1;e<this._loops.length;e++)t*=this._loops[e];return t},Ft.prototype.inLoop=function(){return this._loops.length>0},Ft.prototype.increment=function(){this._index++},Ft.prototype.index=function(){return this._index};const Ct=function(t){this.startFrame=t.getFrameNum();let e={},i=null,s=0;this.getItems=function(){return e},this.clear=function(){e={}},this.add=function(r,n){null!==i&&(n&&n.id==i||e[i]&&(e[i].timeUsed+=performance.now()-s,(!e[i].peakTime||_t()-e[i].peakTime>5e3)&&(e[i].peak=0,e[i].peakTime=_t()),e[i].peak=Math.max(e[i].peak,performance.now()-s))),null!==n?(e[n.id]||(e[n.id]={numTriggers:0,timeUsed:0}),e[n.id].lastFrame!=t.getFrameNum()&&(e[n.id].numTriggers=0),e[n.id].lastFrame=t.getFrameNum(),e[n.id].numTriggers++,e[n.id].opid=n.parent.id,e[n.id].title=n.parent.name+"."+n.name,e[n.id].subPatch=n.parent.uiAttribs.subPatch,i=n.id,s=performance.now()):i=null},this.print=function(){console.log("--------");for(const t in e)console.log(e[t].title+": "+e[t].numTriggers+" / "+e[t].timeUsed)}};var wt=class{constructor(t,e,i){this._name=t,this._changeListeners=[],this.type=i,this.setValue(e)}getValue(){return this._v}getName(){return this._name}setValue(t){this._v=t;for(let e=0;e<this._changeListeners.length;e++)this._changeListeners[e](t,this)}addListener(t){-1==this._changeListeners.indexOf(t)&&this._changeListeners.push(t)}removeListener(t){const e=this._changeListeners.indexOf(t);this._changeListeners.splice(e,1)}};const Mt=function(t){W.apply(this),this._log=new h("core_patch"),this.ops=[],this.settings={},this.config=t||{glCanvasResizeToWindow:!1,prefixAssetPath:"",prefixJsPath:"",silent:!0,onError:null,onFinishedLoading:null,onFirstFrameRendered:null,onPatchLoaded:null,fpsLimit:0},this.timer=new pt,this.freeTimer=new pt,this.animFrameOps=[],this.animFrameCallbacks=[],this.gui=!1,CABLES.logSilent=this.silent=!0,this.profiler=null,this.aborted=!1,this._crashedOps=[],this._renderOneFrame=!1,this._animReq=null,this._opIdCache={},this._triggerStack=[],this.loading=new Nt(this),this._perf={fps:0,ms:0,_fpsFrameCount:0,_fpsMsCount:0,_fpsStart:0},this._volumeListeners=[],this._paused=!1,this._frameNum=0,this.instancing=new Ft,this.onOneFrameRendered=null,this.namedTriggers={},this._origData=null,this._frameNext=0,this._frameInterval=0,this._lastFrameTime=0,this._frameWasdelayed=!0,function(){return!this}()||this._log.warn("not in strict mode: core patch"),this._isLocal=0===document.location.href.indexOf("file:"),this.config.hasOwnProperty("silent")&&(this.silent=CABLES.logSilent=this.config.silent),this.config.hasOwnProperty("doRequestAnimation")||(this.config.doRequestAnimation=!0),this.config.prefixAssetPath||(this.config.prefixAssetPath=""),this.config.prefixJsPath||(this.config.prefixJsPath=""),this.config.masterVolume||(this.config.masterVolume=1),this._variables={},this._variableListeners=[],this.vars={},t&&t.vars&&(this.vars=t.vars),this.cgl=new Ot(this),this.cgl.setCanvas(this.config.glCanvasId||this.config.glCanvas||"glcanvas"),!0===this.config.glCanvasResizeToWindow&&this.cgl.setAutoResize("window"),!0===this.config.glCanvasResizeToParent&&this.cgl.setAutoResize("parent"),this.loading.setOnFinishedLoading(this.config.onFinishedLoading),this.cgl.aborted&&(this.aborted=!0),this.cgl.silent&&(this.silent=!0),this.freeTimer.play(),this.exec(),this.aborted||(this.config.patch?this.deSerialize(this.config.patch):this.config.patchFile&&w(this.config.patchFile,(t,e)=>{const i=JSON.parse(e);if(t){return this._log.error("err",t),this._log.error("data",i),void this._log.error("data",i.msg)}this.deSerialize(i)}),this.timer.play()),console.log("made with https://cables.gl")};Mt.prototype.isPlaying=function(){return!this._paused},Mt.prototype.isRenderingOneFrame=function(){return this._renderOneFrame},Mt.prototype.renderOneFrame=function(){this._paused=!0,this._renderOneFrame=!0,this.exec(),this._renderOneFrame=!1},Mt.prototype.getFPS=function(){return this._perf.fps},Mt.prototype.isEditorMode=function(){return!0===this.config.editorMode},Mt.prototype.pause=function(){cancelAnimationFrame(this._animReq),this.emitEvent("pause"),this._animReq=null,this._paused=!0,this.freeTimer.pause()},Mt.prototype.resume=function(){this._paused&&(cancelAnimationFrame(this._animReq),this._paused=!1,this.freeTimer.play(),this.emitEvent("resume"),this.exec())},Mt.prototype.setVolume=function(t){this.config.masterVolume=t;for(let e=0;e<this._volumeListeners.length;e++)this._volumeListeners[e].onMasterVolumeChanged(t)},Mt.prototype.getAssetPath=function(){if(this.isEditorMode())return"/assets/"+gui.project()._id+"/";if(document.location.href.indexOf("cables.gl")>0){const t=document.location.href.split("/");return"/assets/"+t[t.length-1]+"/"}return"assets/"},Mt.prototype.getFilePath=function(t){return this._isLocal&&!this.config.allowLocalFileAccess&&this.exitError("localAccess","Browser security forbids loading files directly without a webserver. Upload files to a server to work. use allowLocalFileAccess:true to ignore this."),t?0===(t=String(t)).indexOf("https:")||0===t.indexOf("http:")||0===t.indexOf("data:")?t:(t=t.replace("//","/"),this.config.prefixAssetPath+t+(this.config.suffixAssetPath||"")):t},Mt.prototype.clear=function(){for(this.emitEvent("patchClearStart"),this.cgl.TextureEffectMesh=null,this.animFrameOps.length=0,this.timer=new pt;this.ops.length>0;)this.deleteOp(this.ops[0].id);this.emitEvent("patchClearEnd")},Mt.getOpClass=function(t){const e=t.split(".");let i=null;try{return 2==e.length?i=window[e[0]][e[1]]:3==e.length?i=window[e[0]][e[1]][e[2]]:4==e.length?i=window[e[0]][e[1]][e[2]][e[3]]:5==e.length?i=window[e[0]][e[1]][e[2]][e[3]][e[4]]:6==e.length?i=window[e[0]][e[1]][e[2]][e[3]][e[4]][e[5]]:7==e.length?i=window[e[0]][e[1]][e[2]][e[3]][e[4]][e[5]][e[6]]:8==e.length?i=window[e[0]][e[1]][e[2]][e[3]][e[4]][e[5]][e[6]][e[7]]:9==e.length?i=window[e[0]][e[1]][e[2]][e[3]][e[4]][e[5]][e[6]][e[7]][e[8]]:10==e.length&&(i=window[e[0]][e[1]][e[2]][e[3]][e[4]][e[5]][e[6]][e[7]][e[8]][e[9]]),i}catch(t){return null}},Mt.prototype.createOp=function(t,e){const i=t.split(".");let s=null,r="";try{if(-1==t.indexOf("Ops.")){const i=t;if(!CABLES.OPS[i])throw new Error("could not find op by id: "+i);r=CABLES.OPS[i].objName,s=new CABLES.OPS[i].f(this,r,e,i),s.opId=i}if(!s){r=t;if(!Mt.getOpClass(r))throw this.emitEvent("criticalError","unknown op","unknown op: "+r),this._log.error("unknown op: "+r),new Error("unknown op: "+r);if(2==i.length?s=new window[i[0]][i[1]](this,r,e):3==i.length?s=new window[i[0]][i[1]][i[2]](this,r,e):4==i.length?s=new window[i[0]][i[1]][i[2]][i[3]](this,r,e):5==i.length?s=new window[i[0]][i[1]][i[2]][i[3]][i[4]](this,r,e):6==i.length?s=new window[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]](this,r,e):7==i.length?s=new window[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]](this,r,e):8==i.length?s=new window[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]](this,r,e):9==i.length?s=new window[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]][i[8]](this,r,e):10==i.length?s=new window[i[0]][i[1]][i[2]][i[3]][i[4]][i[5]][i[6]][i[7]][i[8]][i[9]](this,r,e):this._log.warn("parts.length",i.length),s){s.opId=null;for(const t in CABLES.OPS)CABLES.OPS[t].objName==r&&(s.opId=t)}}}catch(t){if(this._crashedOps.push(r),this.emitEvent("exceptionOp",t,r,s),!this.isEditorMode())throw this._log.error(t),this._log.error("[instancing error] "+r,t),CABLES.api&&CABLES.api.sendErrorReport(t),this.exitError("INSTANCE_ERR","Instancing Error "+r,t),new Error("instancing error "+r)}return s?(s.objName=r,s.patch=this):this._log.log("no op was created!?",t,e),s},Mt.prototype.addOp=function(t,e,i,s){const r=this.createOp(t,i);if(r){if(e&&e.hasOwnProperty("errors")&&delete e.errors,e&&e.hasOwnProperty("error")&&delete e.error,r.uiAttr(e),r.onCreate&&r.onCreate(),r.hasOwnProperty("onAnimFrame")&&this.addOnAnimFrame(r),r.hasOwnProperty("onMasterVolumeChanged")&&this._volumeListeners.push(r),this._opIdCache[r.id])return void this._log.warn("opid with id "+r.id+" already exists in patch!");this.ops.push(r),this._opIdCache[r.id]=r,this.emitEvent("onOpAdd",r,s),r.init&&r.init()}else this._log.error("addop: no op.....");return r},Mt.prototype.addOnAnimFrame=function(t){for(let e=0;e<this.animFrameOps.length;e++)if(this.animFrameOps[e]==t)return;this.animFrameOps.push(t)},Mt.prototype.removeOnAnimFrame=function(t){for(let e=0;e<this.animFrameOps.length;e++)if(this.animFrameOps[e]==t)return void this.animFrameOps.splice(e,1)},Mt.prototype.addOnAnimFrameCallback=function(t){this.animFrameCallbacks.push(t)},Mt.prototype.removeOnAnimCallback=function(t){for(let e=0;e<this.animFrameCallbacks.length;e++)if(this.animFrameCallbacks[e]==t)return void this.animFrameCallbacks.splice(e,1)},Mt.prototype.deleteOp=function(t,e,i){let s=!1;for(const r in this.ops)if(this.ops[r].id==t){const n=this.ops[r];let o=null,h=null;if(n){s=!0,e&&n.portsIn.length>0&&n.portsIn[0].isLinked()&&n.portsOut.length>0&&n.portsOut[0].isLinked()&&n.portsIn[0].getType()==n.portsOut[0].getType()&&(o=n.portsIn[0].links[0].getOtherPort(n.portsIn[0]),h=n.portsOut[0].links[0].getOtherPort(n.portsOut[0]));const a=this.ops[r];a.removeLinks(),a.emitEvent("onDelete",this.ops[r]),this.onDelete&&(this._log.warn("deprecated this.onDelete",this.onDelete),this.onDelete(a)),this.ops.splice(r,1),this.emitEvent("onOpDelete",a,i),a.onDelete&&a.onDelete(i),a.cleanUp(),null!==o&&null!==h&&this.link(o.parent,o.getName(),h.parent,h.getName()),delete this._opIdCache[t];break}}s||this._log.warn("core patch deleteop: not found...")},Mt.prototype.getFrameNum=function(){return this._frameNum},Mt.prototype.renderFrame=function(t){this.timer.update(),this.freeTimer.update();const e=this.timer.getTime(),i=performance.now();for(let t=0;t<this.animFrameCallbacks.length;++t)this.animFrameCallbacks[t]&&this.animFrameCallbacks[t](e,this._frameNum);for(let t=0;t<this.animFrameOps.length;++t)this.animFrameOps[t].onAnimFrame&&this.animFrameOps[t].onAnimFrame(e);this.cgl.profileData.profileOnAnimFrameOps=performance.now()-i,this.emitEvent("onRenderFrame",e),this._frameNum++,1==this._frameNum&&this.config.onFirstFrameRendered&&this.config.onFirstFrameRendered()},Mt.prototype.exec=function(t){if(!this._renderOneFrame&&(this._paused||this.aborted))return;this.config.fpsLimit=this.config.fpsLimit||0,this.config.fpsLimit&&(this._frameInterval=1e3/this.config.fpsLimit);const e=CABLES.now(),i=e-this._frameNext;if(this.isEditorMode()&&!this._renderOneFrame&&e-this._lastFrameTime>=500&&0!==this._lastFrameTime&&!this._frameWasdelayed)return this._lastFrameTime=0,setTimeout(this.exec.bind(this),500),this.emitEvent("renderDelayStart"),void(this._frameWasdelayed=!0);if(this._renderOneFrame||0===this.config.fpsLimit||i>this._frameInterval||this._frameWasdelayed){const t=CABLES.now();this.renderFrame(),this._perf._lastFrameTime=CABLES.now(),this._perf._fpsFrameCount++,this._perf._fpsMsCount+=CABLES.now()-t,this._frameInterval&&(this._frameNext=e-i%this._frameInterval)}this._frameWasdelayed&&(this.emitEvent("renderDelayEnd"),this._frameWasdelayed=!1),this._renderOneFrame&&(this.onOneFrameRendered&&this.onOneFrameRendered(),this.emitEvent("renderedOneFrame"),this._renderOneFrame=!1),CABLES.now()-this._perf._fpsStart>=1e3&&this._perf.fps!=this._perf._fpsFrameCount&&(this._perf.fps=this._perf._fpsFrameCount,this._perf.ms=Math.round(this._perf._fpsMsCount/this._perf._fpsFrameCount),this.emitEvent("performance",this._perf),this._perf._fpsFrameCount=0,this._perf._fpsMsCount=0,this._perf._fpsStart=CABLES.now()),this.config.doRequestAnimation&&(this._animReq=requestAnimationFrame(this.exec.bind(this)))},Mt.prototype.link=function(t,e,i,s,r,n){if(!t)return void this._log.warn("link: op1 is null ");if(!i)return void this._log.warn("link: op2 is null");const o=t.getPort(e,r),h=i.getPort(s,r);if(o)if(h){if(!o.shouldLink(o,h)||!h.shouldLink(o,h))return!1;if(St.canLink(o,h)){const t=new St(this);return t.link(o,h),this.emitEvent("onLink",o,h,t,n),t}}else this._log.warn("port not found! "+s+" of "+i.name+"("+i.objName+")");else this._log.warn("port not found! "+e+"("+t.objName+")")},Mt.prototype.serialize=function(t){const e={};(t=t||{}).hasOwnProperty("removeBlueprints")||(t.removeBlueprints=!0),t.hasOwnProperty("removeFromNetworkAttr")||(t.removeFromNetworkAttr=!0),e.ops=[],e.settings=this.settings;for(const i in this.ops){const s=this.ops[i];t.removeBlueprints&&s.storage&&s.storage.blueprint||(t.removeFromNetworkAttr&&s.uiAttribs&&s.uiAttribs.hasOwnProperty("fromNetwork")&&delete s.uiAttribs.fromNetwork,e.ops.push(s.getSerialized()))}return t.asObject?e:JSON.stringify(e)},Mt.prototype.getOpById=function(t){return this._opIdCache[t]},Mt.prototype.getOpsByName=function(t){const e=[];for(const i in this.ops)this.ops[i].name==t&&e.push(this.ops[i]);return e},Mt.prototype.getOpsByObjName=function(t){const e=[];for(const i in this.ops)this.ops[i].objName==t&&e.push(this.ops[i]);return e},Mt.prototype.loadLib=function(t){C("/ui/libs/"+t+".js",(t,e)=>{const i=document.createElement("script");i.type="text/javascript",i.text=e,document.getElementsByTagName("head")[0].appendChild(i)},"GET")},Mt.prototype.reloadOp=function(t,e){let i=0;const s=[],r=[];for(const e in this.ops)this.ops[e].objName==t&&r.push(this.ops[e]);for(let e=0;e<r.length;e++){i++;const n=r[e];n.deleted=!0;const o=this,h=this.addOp(t,n.uiAttribs);if(!h)continue;let a,l;for(a in n&&n.storage&&(h.storage=n.storage),s.push(h),n.portsIn)if(0===n.portsIn[a].links.length){const t=h.getPort(n.portsIn[a].name);t?(t.set(n.portsIn[a].get()),n.portsIn[a].getVariableName()&&t.setVariable(n.portsIn[a].getVariableName())):this._log.error("[reloadOp] could not set port "+n.portsIn[a].name+", propably renamed port ?")}else for(;n.portsIn[a].links.length;){const t=n.portsIn[a].links[0].portIn.name,e=n.portsIn[a].links[0].portOut.name,i=n.portsIn[a].links[0].portOut.parent;n.portsIn[a].links[0].remove(),l=o.link(h,t,i,e),l?l.setValue():this._log.warn("[reloadOp] relink after op reload not successfull for port "+e)}for(a in n.portsOut)for(;n.portsOut[a].links.length;){const t=n.portsOut[a].links[0].portOut.name,e=n.portsOut[a].links[0].portIn.name,i=n.portsOut[a].links[0].portIn.parent;n.portsOut[a].links[0].remove(),l=o.link(h,t,i,e),l?l.setValue():this._log.warn("relink after op reload not successfull for port "+e)}this.deleteOp(n.id,!1,!0)}e(i,s)},Mt.prototype.getSubPatchOps=function(t){const e=[];for(const i in this.ops)this.ops[i].uiAttribs&&this.ops[i].uiAttribs.subPatch==t&&e.push(this.ops[i]);return e},Mt.prototype.getSubPatchOp=function(t,e){for(const i in this.ops)if(this.ops[i].uiAttribs&&this.ops[i].uiAttribs.subPatch==t&&this.ops[i].objName==e)return this.ops[i];return!1},Mt.prototype._addLink=function(t,e,i,s){this.link(this.getOpById(t),i,this.getOpById(e),s,!1,!0)},Mt.prototype.deSerialize=function(t,e){if(this.aborted)return;const i=[],s=this.loading.start("core","deserialize");this.namespace=t.namespace||"",this.name=t.name||"","string"==typeof t&&(t=JSON.parse(t)),this.settings=t.settings,this.emitEvent("patchLoadStart");for(const s in t.ops){const r=CABLES.now(),n=t.ops[s];let o=null;try{o=n.opId?this.addOp(n.opId,n.uiAttribs,n.id,!0):this.addOp(n.objName,n.uiAttribs,n.id,!0)}catch(t){throw this._log.warn("[instancing error] op data:",n,t),new Error("instancing error: "+n.objName)}if(o){e&&(o.id=T()),o.portsInData=n.portsIn,o._origData=n,o.storage=n.storage;for(const t in n.portsIn){const e=n.portsIn[t],i=o.getPort(e.name);!i||"bool"!=i.uiAttribs.display&&"bool"!=i.uiAttribs.type||isNaN(e.value)||(e.value=!0===e.value),i&&void 0!==e.value&&i.type!=l.OP_PORT_TYPE_TEXTURE&&i.set(e.value),i&&i.deSerializeSettings(e)}for(const e in n.portsOut){const i=o.getPort(n.portsOut[e].name);i&&i.type!=l.OP_PORT_TYPE_TEXTURE&&n.portsOut[e].hasOwnProperty("value")&&i.set(t.ops[s].portsOut[e].value)}i.push(o)}const h=Math.round(100*(CABLES.now()-r))/100;!this.silent&&h>200&&this._log.warn("long op init ",t.ops[s].objName,h)}for(const t in this.ops)this.ops[t].onLoadedValueSet&&(this.ops[t].onLoadedValueSet(this.ops[t]._origData),this.ops[t].onLoadedValueSet=null,this.ops[t]._origData=null);if(t.ops)for(let e=0;e<t.ops.length;e++){if(t.ops[e].portsIn)for(let i=0;i<t.ops[e].portsIn.length;i++)if(t.ops[e].portsIn[i].links)for(let s=0;s<t.ops[e].portsIn[i].links.length;s++)t.ops[e].portsIn[i].links[s]&&this._addLink(t.ops[e].portsIn[i].links[s].objIn,t.ops[e].portsIn[i].links[s].objOut,t.ops[e].portsIn[i].links[s].portIn,t.ops[e].portsIn[i].links[s].portOut);if(t.ops[e].portsOut)for(let i=0;i<t.ops[e].portsOut.length;i++)if(t.ops[e].portsOut[i].links)for(let s=0;s<t.ops[e].portsOut[i].links.length;s++)t.ops[e].portsOut[i].links[s]&&this._addLink(t.ops[e].portsOut[i].links[s].objIn,t.ops[e].portsOut[i].links[s].objOut,t.ops[e].portsOut[i].links[s].portIn,t.ops[e].portsOut[i].links[s].portOut)}for(const t in this.ops)this.ops[t].onLoaded&&(this.ops[t].onLoaded(),this.ops[t].onLoaded=null);for(const t in this.ops)this.ops[t].init&&(this.ops[t].init(),this.ops[t].init=null);if(this.config.variables)for(const t in this.config.variables)this.setVarValue(t,this.config.variables[t]);for(const t in this.ops)this.ops[t].initVarPorts(),delete this.ops[t].uiAttribs.pasted;setTimeout(()=>{this.loading.finished(s)},100),this.config.onPatchLoaded&&this.config.onPatchLoaded(this),this.emitEvent("patchLoadEnd",i,t,e)},Mt.prototype.profile=function(t){this.profiler=new Ct(this);for(const e in this.ops)this.ops[e].profile(t)},Mt.prototype.setVariable=function(t,e){void 0!==this._variables[t]?this._variables[t].setValue(e):this._log.warn("variable "+t+" not found!")},Mt.prototype._sortVars=function(){if(!this.isEditorMode())return;const t={};Object.keys(this._variables).sort((t,e)=>t.localeCompare(e,"en",{sensitivity:"base"})).forEach(e=>{t[e]=this._variables[e]}),this._variables=t},Mt.prototype.hasVar=function(t){return void 0!==this._variables[t]},Mt.prototype.setVarValue=function(t,e,i){return this.hasVar(t)?this._variables[t].setValue(e):(this._variables[t]=new wt(t,e,i),this._sortVars(),this.emitEvent("variablesChanged")),this._variables[t]},Mt.prototype.getVarValue=function(t,e){if(this._variables.hasOwnProperty(t))return this._variables[t].getValue()},Mt.prototype.getVar=function(t){if(this._variables.hasOwnProperty(t))return this._variables[t]},Mt.prototype.deleteVar=function(t){for(let e=0;e<this.ops.length;e++)for(let i=0;i<this.ops[e].portsIn.length;i++)this.ops[e].portsIn[i].getVariableName()==t&&this.ops[e].portsIn[i].setVariable(null);delete this._variables[t],this.emitEvent("variableDeleted",t),this.emitEvent("variablesChanged")},Mt.prototype.getVars=function(t){if(void 0===t)return this._variables;const e=[];t==CABLES.OP_PORT_TYPE_STRING&&(t="string"),t==CABLES.OP_PORT_TYPE_VALUE&&(t="number"),t==CABLES.OP_PORT_TYPE_ARRAY&&(t="array"),t==CABLES.OP_PORT_TYPE_OBJECT&&(t="object");for(const i in this._variables)this._variables[i].type&&this._variables[i].type!=t||e.push(this._variables[i]);return e},Mt.prototype.exitError=function(t,e,i){if(this.aborted=!0,this&&this.config&&this.config.onError)this.config.onError(t,e);else if(!this.isEditorMode()){const s=document.createElement("div"),r=this.cgl.canvas.getBoundingClientRect();s.setAttribute("style","position:absolute;border:5px solid red;padding:15px;background-color:black;color:white;font-family:monospace;"),s.style.top=r.top+"px",s.style.left=r.left+"px";let n="cables - An error occured:<br/>";n+="["+t+"] - "+e,i&&(n+="<br/>Exception: "+i.message),s.innerHTML=n;const o=this.cgl.canvas.parentElement;for(;o.hasChildNodes();)o.removeChild(o.lastChild);document.body.appendChild(s)}},Mt.prototype.preRenderOps=function(){this._log.log("prerendering...");for(let t=0;t<this.ops.length;t++)this.ops[t].preRender&&(this.ops[t].preRender(),this._log.log("prerender "+this.ops[t].objName))},Mt.prototype.dispose=function(){this.pause(),this.clear()},Mt.prototype.pushTriggerStack=function(t){this._triggerStack.push(t)},Mt.prototype.popTriggerStack=function(){this._triggerStack.pop()},Mt.prototype.printTriggerStack=function(){if(0==this._triggerStack.length)return void console.log("stack length",this._triggerStack.length);console.groupCollapsed("trigger port stack "+this._triggerStack[this._triggerStack.length-1].parent.name+"."+this._triggerStack[this._triggerStack.length-1].name);const t=[];for(let e=0;e<this._triggerStack.length;e++)t.push(e+". "+this._triggerStack[e].parent.name+" "+this._triggerStack[e].name);console.table(t),console.groupEnd()};var Ut=Mt;const Lt={addPatch:function(t,e){let i=t,s=A();if("string"==typeof t&&(s=t,i=document.getElementById(s),!i))return void console.error(s+" Polyshape Container Element not found!");const r=document.createElement("canvas");return r.id="glcanvas_"+s,r.width=i.clientWidth,r.height=i.clientHeight,window.addEventListener("resize",function(){this.setAttribute("width",i.clientWidth),this.height=i.clientHeight}.bind(r)),i.appendChild(r),(e=e||{}).glCanvasId=r.id,e.onError||(e.onError=function(t){console.error(t)}),CABLES.patch=new Ut(e),r}},Bt={toneJsInitialized:!1,createAudioContext:function(t){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)return window.audioContext||(window.audioContext=new AudioContext),window.Tone&&!Bt.toneJsInitialized&&(Tone.setContext(window.audioContext),Bt.toneJsInitialized=!0),window.audioContext;t.patch.config.onError("NO_WEBAUDIO","Web Audio is not supported in this browser.")},getAudioContext:function(){return window.audioContext},createAudioInPort:function(t,e,i,s){if(!t||!e||!i){const e="ERROR: createAudioInPort needs three parameters, op, portName and audioNode";throw t.log(e),new Error(e)}s||(s=0),t.webAudio=t.webAudio||{},t.webAudio.audioInPorts=t.webAudio.audioInPorts||[];const r=t.inObject(e);return r.webAudio={},r.webAudio.previousAudioInNode=null,r.webAudio.audioNode=i,t.webAudio.audioInPorts[e]=r,r.onChange=function(){const e=r.get();if(e)try{e.connect?(e.connect(r.webAudio.audioNode,0,s),t.setUiError("audioCtx",null)):t.setUiError("audioCtx","The passed input is not an audio context. Please make sure you connect an audio context to the input.",2)}catch(i){throw t.log("Error: Failed to connect web audio node!",i),t.log("port.webAudio.audioNode",r.webAudio.audioNode),t.log("audioInNode: ",e),t.log("inputChannelIndex:",s),t.log("audioInNode.connect: ",e.connect),i}else if(r.webAudio.previousAudioInNode)try{r.webAudio.previousAudioInNode.disconnect&&r.webAudio.previousAudioInNode.disconnect(r.webAudio.audioNode,0,s),t.setUiError("audioCtx",null)}catch(e){try{r.webAudio.previousAudioInNode.disconnect(r.webAudio.audioNode)}catch(i){throw t.log("Disconnecting audio node with in/out port index, as well as without in/out-port-index did not work ",e),e.printStackTrace&&e.printStackTrace(),e}}r.webAudio.previousAudioInNode=e},r},replaceNodeInPort:function(t,e,i){const s=t.webAudio.previousAudioInNode;if(s&&s.disconnect){try{s.disconnect(e)}catch(t){throw t.printStackTrace&&t.printStackTrace(),new Error("replaceNodeInPort: Could not disconnect old audio node. "+t.name+" "+t.message)}t.webAudio.audioNode=i;try{s.connect(i)}catch(t){throw t.printStackTrace&&t.printStackTrace(),new Error("replaceNodeInPort: Could not connect to new node. "+t.name+" "+t.message)}}},createAudioOutPort:function(t,e,i){if(!t||!e||!i){const e="ERROR: createAudioOutPort needs three parameters, op, portName and audioNode";throw t.log(e),new Error(e)}const s=t.outObject(e);return s.set(i),s},createAudioParamInPort:function(t,e,i,s,r){if(!t||!e||!i)return t.log("ERROR: createAudioParamInPort needs three parameters, op, portName and audioNode"),t&&t.name&&t.log("opname: ",t.name),t.log("portName",e),void t.log("audioNode: ",i);t.webAudio=t.webAudio||{},t.webAudio.audioInPorts=t.webAudio.audioInPorts||[];const n=t.inDynamic(e,[l.OP_PORT_TYPE_VALUE,l.OP_PORT_TYPE_OBJECT],s,r);return n.webAudio={},n.webAudio.previousAudioInNode=null,n.webAudio.audioNode=i,t.webAudio.audioInPorts[e]=n,n.onChange=function(){const e=n.get(),i=n.webAudio.audioNode,s=Bt.getAudioContext();if(null!=e)if("object"==typeof e&&e.connect){try{e.connect(i)}catch(e){throw t.log("Could not connect audio node: ",e),e.printStackTrace&&e.printStackTrace(),e}n.webAudio.previousAudioInNode=e}else{if(i._param&&i._param.minValue&&i._param.maxValue)if(e>=i._param.minValue&&e<=i._param.maxValue)try{i.setValueAtTime?i.setValueAtTime(e,s.currentTime):i.value=e}catch(e){throw t.log("Possible AudioParam problem with tone.js op: ",e),e.printStackTrace&&e.printStackTrace(),e}else t.log("Warning: The value for an audio parameter is out of range!");else if(i.minValue&&i.maxValue)if(e>=i.minValue&&e<=i.maxValue)try{i.setValueAtTime?i.setValueAtTime(e,s.currentTime):i.value=e}catch(e){throw t.log("AudioParam has minValue / maxValue defined, and value is in range, but setting the value failed! ",e),e.printStackTrace&&e.printStackTrace(),e}else t.log("Warning: The value for an audio parameter is out of range!");else try{i.setValueAtTime?i.setValueAtTime(e,s.currentTime):i.value=e}catch(e){throw t.log("Possible AudioParam problem (without minValue / maxValue): ",e),e.printStackTrace&&e.printStackTrace(),e}if(n.webAudio.previousAudioInNode&&n.webAudio.previousAudioInNode.disconnect){try{n.webAudio.previousAudioInNode.disconnect(i)}catch(e){throw t.log("Could not disconnect previous audio node: ",e),e}n.webAudio.previousAudioInNode=void 0}}else n.webAudio.previousAudioInNode},n},loadAudioFile:function(t,e,i,s,r){const n=Bt.createAudioContext();let o=null;(r||void 0===r)&&(o=t.loading.start("audio",e),t.isEditorMode()&&gui.jobs().start({id:"loadaudio"+o,title:" loading audio ("+e+")"}));const h=new XMLHttpRequest;e&&(h.open("GET",e,!0),h.responseType="arraybuffer",h.onload=function(){t.loading.finished(o),t.isEditorMode()&&gui.jobs().finish("loadaudio"+o),n.decodeAudioData(h.response,i,s)},h.send())},isValidToneTime:function(t){try{new Tone.Time(t)}catch(t){return!1}return!0},isValidToneNote:function(t){try{Tone.Frequency(t)}catch(t){return!1}return!0}},kt=function(t,e,i){this._patch=t,this.connector=i,this._log=new h("PatchConnectionReceiver")};kt.prototype._addOp=function(t){let e=null;t.vars.uiAttribs&&(e=t.vars.uiAttribs);const i=this._patch.addOp(t.vars.objName,e,t.vars.opId,!0);i&&(i.id=t.vars.opId,t.vars.portsIn&&t.vars.portsIn.forEach(t=>{const e=i.getPortByName(t.name);e&&e.set(t.value)}))},kt.prototype._receive=function(t){let e={};if(e=t.hasOwnProperty("event")?t:JSON.parse(t.data),e.event==u.PACO_OP_CREATE){if(this._patch.getOpById(e.vars.opId))return;this._log.verbose("op create:",e.vars.objName),window.gui?gui.serverOps.loadOpLibs(e.vars.objName,()=>{this._addOp(e)}):this._addOp(e)}else if(e.event==u.PACO_DESERIALIZE)e.vars.json&&(window.gui?gui.serverOps.loadProjectLibs(e.vars.json,()=>{this._patch.deSerialize(e.vars.json,e.vars.genIds)}):this._patch.deSerialize(e.vars.json,e.vars.genIds));else if(e.event==u.PACO_LOAD)this._log.verbose("PACO load patch....."),this._patch.clear(),window.gui?gui.serverOps.loadProjectLibs(JSON.parse(e.vars.patch),()=>{this._patch.deSerialize(e.vars.patch)}):this._patch.deSerialize(e.vars.patch);else if(e.event==u.PACO_CLEAR)this._patch.clear(),this._log.log("clear");else if(e.event==u.PACO_OP_DELETE){this._log.verbose("op delete",e.vars.objName);this._patch.getOpById(e.vars.op);this._patch.deleteOp(e.vars.op,!0)}else if(e.event==u.PACO_OP_ENABLE){const t=this._patch.getOpById(e.vars.op);t&&(t.enabled=!0)}else if(e.event==u.PACO_OP_DISABLE){const t=this._patch.getOpById(e.vars.op);t&&(t.enabled=!1)}else if(e.event==u.PACO_UIATTRIBS){const t=this._patch.getOpById(e.vars.op);t&&t.setUiAttrib(e.vars.uiAttribs)}else if(e.event==u.PACO_UNLINK){const t=this._patch.getOpById(e.vars.op1),i=this._patch.getOpById(e.vars.op2);if(!t||!i)return;const s=t.getPort(e.vars.port1),r=i.getPort(e.vars.port2);s&&r?s.removeLinkTo(r):this._log.warn("paco unlink could not find port...")}else if(e.event==u.PACO_LINK){const t=this._patch.getOpById(e.vars.op1),i=this._patch.getOpById(e.vars.op2);t&&i&&this._patch.link(t,e.vars.port1,i,e.vars.port2)}else if(e.event==u.PACO_VALUECHANGE){if("+ create new one"===e.vars.v)return;const t=this._patch.getOpById(e.vars.op);if(t){const i=t.getPort(e.vars.port);i&&i.set(e.vars.v)}}else if(e.event==u.PACO_VARIABLES){const t=this._patch.getOpById(e.vars.opId);t&&t.varName&&t.varName.set(e.vars.varName)}else if(e.event==u.PACO_TRIGGERS){const t=this._patch.getOpById(e.vars.opId);t&&t.varName&&t.varName.set(e.vars.varName)}else if(e.event==u.PACO_PORT_SETVARIABLE){const t=this._patch.getOpById(e.vars.opId);if(t){const i=t.getPortByName(e.vars.portName);i&&i.setVariable(e.vars.variableName)}}else if(e.event==u.PACO_PORT_SETANIMATED){const t=this._patch.getOpById(e.vars.opId);if(t){t.portsIn[e.vars.portIndex]&&e.vars.hasOwnProperty("targetState")&&this._patch.emitEvent("pacoPortValueSetAnimated",t,e.vars.portIndex,e.vars.targetState,e.vars.defaultValue)}}else if(e.event==u.PACO_PORT_ANIM_UPDATED){const t=this._patch.getOpById(e.vars.opId);if(t){const i=t.getPortByName(e.vars.portName);if(i){const t=i.getSerialized();t.anim=e.vars.anim,i.anim=null,i.deSerializeSettings(t),this._patch.emitEvent("pacoPortAnimUpdated",i)}}}else this._log.warn("unknown patchConnectionEvent!",t)};const Dt=function(t){this.connectors=[],this.paused=!1,t.addEventListener("onOpDelete",t=>{this.send(CABLES.PACO_OP_DELETE,{op:t.id,objName:t.objName})}),t.addEventListener("patchClearStart",()=>{this.paused=!0}),t.addEventListener("patchClearEnd",()=>{this.paused=!1}),t.addEventListener("patchLoadStart",()=>{this.paused=!0}),t.addEventListener("patchLoadEnd",(t,e,i)=>{this.paused=!1,this.send(CABLES.PACO_DESERIALIZE,{json:e,genIds:i})}),t.addEventListener("onOpAdd",t=>{const e=[];t.portsIn.forEach(t=>{const i={id:t.id,name:t.name,value:t.get()};e.push(i)});let i={};t.uiAttribs&&(i={...t.uiAttribs}),this.send(CABLES.PACO_OP_CREATE,{opId:t.id,objName:t.objName,uiAttribs:i,portsIn:e})}),t.addEventListener("onUnLink",(t,e)=>{this.send(CABLES.PACO_UNLINK,{op1:t.parent.id,op2:e.parent.id,port1:t.getName(),port2:e.getName()})}),t.addEventListener("onUiAttribsChange",(t,e)=>{e&&(delete e.extendTitle,delete e.history,delete e.translate,Object.keys(e).length>0&&this.send(CABLES.PACO_UIATTRIBS,{op:t.id,uiAttribs:e}))}),t.addEventListener("opVariableNameChanged",(t,e)=>{const i={opId:t.id,varName:e};this.send(CABLES.PACO_VARIABLES,i)}),t.addEventListener("opTriggerNameChanged",(t,e)=>{const i={opId:t.id,varName:e};this.send(CABLES.PACO_TRIGGERS,i)}),t.addEventListener("onLink",(t,e)=>{this.send(CABLES.PACO_LINK,{op1:t.parent.id,op2:e.parent.id,port1:t.name,port2:e.name})}),t.addEventListener("portSetVariable",(t,e,i)=>{const s={opId:t.id,portName:e.name,variableName:i};this.send(CABLES.PACO_PORT_SETVARIABLE,s)}),t.addEventListener("portAnimUpdated",(t,e,i)=>{if(t&&e){const s={opId:t.id,portName:e.name,anim:i.getSerialized()};this.send(CABLES.PACO_PORT_ANIM_UPDATED,s)}})};Dt.prototype.send=function(t,e){if(!this.paused&&(t!==CABLES.PACO_VALUECHANGE||"+ create new one"!==e.v))for(let i=0;i<this.connectors.length;i++)this.connectors[i].send(t,e)};const Vt=function(){window.BroadcastChannel&&(this.bc=new BroadcastChannel("test_channel"))};Vt.prototype.receive=function(t){this.bc&&(this._log.log("init"),this.bc.onmessage=t._receive.bind(t))},Vt.prototype.send=function(t,e){if(!this.bc)return;const i={};i.event=t,i.vars=e,this.bc.postMessage(JSON.stringify(i))};const Gt=Object.assign({EventTarget:W,EMBED:Lt,Link:St,Port:et,Op:Pt,Profiler:Ct,Patch:Ut,Instancing:Ft,Timer:pt,WEBAUDIO:Bt,Variable:function(){let t=null;const e=[];this.onChanged=function(t){e.push(t)},this.getValue=function(){return t},this.setValue=function(e){t=e,this.emitChanged()},this.emitChanged=function(){for(let t=0;t<e.length;t++)e[t]()}},LoadingStatus:Nt,now:_t,internalNow:gt},r,s,n,a,o,c,u,a,l);e.default=Gt;(function(){return!this})()||console.warn("not in strict mode: index core")}]).default;
//# sourceMappingURL=cables.min.js.map

var CABLES = CABLES || {}; CABLES.build = {"timestamp":1656574516241,"created":"2022-06-30T07:35:16.241Z","git":{"branch":"master","commit":"abda58d5c2d1731d2d3526a32ffa23ace4933120","date":null,"message":null}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.1.0

Copyright (c) 2015-2019, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).glMatrix={})}(this,function(t){"use strict";var n=1e-6,a="undefined"!=typeof Float32Array?Float32Array:Array,r=Math.random;var u=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var e=Object.freeze({EPSILON:n,get ARRAY_TYPE(){return a},RANDOM:r,setMatrixArrayType:function(t){a=t},toRadian:function(t){return t*u},equals:function(t,a){return Math.abs(t-a)<=n*Math.max(1,Math.abs(t),Math.abs(a))}});function o(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=a[0],c=a[1],h=a[2],s=a[3];return t[0]=r*i+e*c,t[1]=u*i+o*c,t[2]=r*h+e*s,t[3]=u*h+o*s,t}function i(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t[3]=n[3]-a[3],t}var c=o,h=i,s=Object.freeze({create:function(){var t=new a(4);return a!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},clone:function(t){var n=new a(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},fromValues:function(t,n,r,u){var e=new a(4);return e[0]=t,e[1]=n,e[2]=r,e[3]=u,e},set:function(t,n,a,r,u){return t[0]=n,t[1]=a,t[2]=r,t[3]=u,t},transpose:function(t,n){if(t===n){var a=n[1];t[1]=n[2],t[2]=a}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},invert:function(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=a*e-u*r;return o?(o=1/o,t[0]=e*o,t[1]=-r*o,t[2]=-u*o,t[3]=a*o,t):null},adjoint:function(t,n){var a=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=a,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:o,rotate:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=Math.sin(a),c=Math.cos(a);return t[0]=r*c+e*i,t[1]=u*c+o*i,t[2]=r*-i+e*c,t[3]=u*-i+o*c,t},scale:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=a[0],c=a[1];return t[0]=r*i,t[1]=u*i,t[2]=e*c,t[3]=o*c,t},fromRotation:function(t,n){var a=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=a,t[2]=-a,t[3]=r,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},str:function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3])},LDU:function(t,n,a,r){return t[2]=r[2]/r[0],a[0]=r[0],a[1]=r[1],a[3]=r[3]-t[2]*a[1],[t,n,a]},add:function(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t[3]=n[3]+a[3],t},subtract:i,exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},equals:function(t,a){var r=t[0],u=t[1],e=t[2],o=t[3],i=a[0],c=a[1],h=a[2],s=a[3];return Math.abs(r-i)<=n*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(u-c)<=n*Math.max(1,Math.abs(u),Math.abs(c))&&Math.abs(e-h)<=n*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(o-s)<=n*Math.max(1,Math.abs(o),Math.abs(s))},multiplyScalar:function(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t},multiplyScalarAndAdd:function(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t[2]=n[2]+a[2]*r,t[3]=n[3]+a[3]*r,t},mul:c,sub:h});function M(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],h=a[0],s=a[1],M=a[2],f=a[3],l=a[4],v=a[5];return t[0]=r*h+e*s,t[1]=u*h+o*s,t[2]=r*M+e*f,t[3]=u*M+o*f,t[4]=r*l+e*v+i,t[5]=u*l+o*v+c,t}function f(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t[3]=n[3]-a[3],t[4]=n[4]-a[4],t[5]=n[5]-a[5],t}var l=M,v=f,b=Object.freeze({create:function(){var t=new a(6);return a!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},clone:function(t){var n=new a(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},fromValues:function(t,n,r,u,e,o){var i=new a(6);return i[0]=t,i[1]=n,i[2]=r,i[3]=u,i[4]=e,i[5]=o,i},set:function(t,n,a,r,u,e,o){return t[0]=n,t[1]=a,t[2]=r,t[3]=u,t[4]=e,t[5]=o,t},invert:function(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=a*e-r*u;return c?(c=1/c,t[0]=e*c,t[1]=-r*c,t[2]=-u*c,t[3]=a*c,t[4]=(u*i-e*o)*c,t[5]=(r*o-a*i)*c,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:M,rotate:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],h=Math.sin(a),s=Math.cos(a);return t[0]=r*s+e*h,t[1]=u*s+o*h,t[2]=r*-h+e*s,t[3]=u*-h+o*s,t[4]=i,t[5]=c,t},scale:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],h=a[0],s=a[1];return t[0]=r*h,t[1]=u*h,t[2]=e*s,t[3]=o*s,t[4]=i,t[5]=c,t},translate:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],h=a[0],s=a[1];return t[0]=r,t[1]=u,t[2]=e,t[3]=o,t[4]=r*h+e*s+i,t[5]=u*h+o*s+c,t},fromRotation:function(t,n){var a=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=a,t[2]=-a,t[3]=r,t[4]=0,t[5]=0,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},str:function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},add:function(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t[3]=n[3]+a[3],t[4]=n[4]+a[4],t[5]=n[5]+a[5],t},subtract:f,multiplyScalar:function(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t[4]=n[4]*a,t[5]=n[5]*a,t},multiplyScalarAndAdd:function(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t[2]=n[2]+a[2]*r,t[3]=n[3]+a[3]*r,t[4]=n[4]+a[4]*r,t[5]=n[5]+a[5]*r,t},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},equals:function(t,a){var r=t[0],u=t[1],e=t[2],o=t[3],i=t[4],c=t[5],h=a[0],s=a[1],M=a[2],f=a[3],l=a[4],v=a[5];return Math.abs(r-h)<=n*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(u-s)<=n*Math.max(1,Math.abs(u),Math.abs(s))&&Math.abs(e-M)<=n*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(o-f)<=n*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-l)<=n*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(c-v)<=n*Math.max(1,Math.abs(c),Math.abs(v))},mul:l,sub:v});function m(){var t=new a(9);return a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function d(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],h=n[6],s=n[7],M=n[8],f=a[0],l=a[1],v=a[2],b=a[3],m=a[4],d=a[5],x=a[6],p=a[7],y=a[8];return t[0]=f*r+l*o+v*h,t[1]=f*u+l*i+v*s,t[2]=f*e+l*c+v*M,t[3]=b*r+m*o+d*h,t[4]=b*u+m*i+d*s,t[5]=b*e+m*c+d*M,t[6]=x*r+p*o+y*h,t[7]=x*u+p*i+y*s,t[8]=x*e+p*c+y*M,t}function x(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t[3]=n[3]-a[3],t[4]=n[4]-a[4],t[5]=n[5]-a[5],t[6]=n[6]-a[6],t[7]=n[7]-a[7],t[8]=n[8]-a[8],t}var p=d,y=x,q=Object.freeze({create:m,fromMat4:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},clone:function(t){var n=new a(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},fromValues:function(t,n,r,u,e,o,i,c,h){var s=new a(9);return s[0]=t,s[1]=n,s[2]=r,s[3]=u,s[4]=e,s[5]=o,s[6]=i,s[7]=c,s[8]=h,s},set:function(t,n,a,r,u,e,o,i,c,h){return t[0]=n,t[1]=a,t[2]=r,t[3]=u,t[4]=e,t[5]=o,t[6]=i,t[7]=c,t[8]=h,t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,n){if(t===n){var a=n[1],r=n[2],u=n[5];t[1]=n[3],t[2]=n[6],t[3]=a,t[5]=n[7],t[6]=r,t[7]=u}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},invert:function(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=n[6],h=n[7],s=n[8],M=s*o-i*h,f=-s*e+i*c,l=h*e-o*c,v=a*M+r*f+u*l;return v?(v=1/v,t[0]=M*v,t[1]=(-s*r+u*h)*v,t[2]=(i*r-u*o)*v,t[3]=f*v,t[4]=(s*a-u*c)*v,t[5]=(-i*a+u*e)*v,t[6]=l*v,t[7]=(-h*a+r*c)*v,t[8]=(o*a-r*e)*v,t):null},adjoint:function(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=n[6],h=n[7],s=n[8];return t[0]=o*s-i*h,t[1]=u*h-r*s,t[2]=r*i-u*o,t[3]=i*c-e*s,t[4]=a*s-u*c,t[5]=u*e-a*i,t[6]=e*h-o*c,t[7]=r*c-a*h,t[8]=a*o-r*e,t},determinant:function(t){var n=t[0],a=t[1],r=t[2],u=t[3],e=t[4],o=t[5],i=t[6],c=t[7],h=t[8];return n*(h*e-o*c)+a*(-h*u+o*i)+r*(c*u-e*i)},multiply:d,translate:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],h=n[6],s=n[7],M=n[8],f=a[0],l=a[1];return t[0]=r,t[1]=u,t[2]=e,t[3]=o,t[4]=i,t[5]=c,t[6]=f*r+l*o+h,t[7]=f*u+l*i+s,t[8]=f*e+l*c+M,t},rotate:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],h=n[6],s=n[7],M=n[8],f=Math.sin(a),l=Math.cos(a);return t[0]=l*r+f*o,t[1]=l*u+f*i,t[2]=l*e+f*c,t[3]=l*o-f*r,t[4]=l*i-f*u,t[5]=l*c-f*e,t[6]=h,t[7]=s,t[8]=M,t},scale:function(t,n,a){var r=a[0],u=a[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=u*n[3],t[4]=u*n[4],t[5]=u*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},fromRotation:function(t,n){var a=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=a,t[2]=0,t[3]=-a,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat2d:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},fromQuat:function(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=a+a,i=r+r,c=u+u,h=a*o,s=r*o,M=r*i,f=u*o,l=u*i,v=u*c,b=e*o,m=e*i,d=e*c;return t[0]=1-M-v,t[3]=s-d,t[6]=f+m,t[1]=s+d,t[4]=1-h-v,t[7]=l-b,t[2]=f-m,t[5]=l+b,t[8]=1-h-M,t},normalFromMat4:function(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=n[6],h=n[7],s=n[8],M=n[9],f=n[10],l=n[11],v=n[12],b=n[13],m=n[14],d=n[15],x=a*i-r*o,p=a*c-u*o,y=a*h-e*o,q=r*c-u*i,g=r*h-e*i,A=u*h-e*c,w=s*b-M*v,R=s*m-f*v,z=s*d-l*v,P=M*m-f*b,j=M*d-l*b,I=f*d-l*m,S=x*I-p*j+y*P+q*z-g*R+A*w;return S?(S=1/S,t[0]=(i*I-c*j+h*P)*S,t[1]=(c*z-o*I-h*R)*S,t[2]=(o*j-i*z+h*w)*S,t[3]=(u*j-r*I-e*P)*S,t[4]=(a*I-u*z+e*R)*S,t[5]=(r*z-a*j-e*w)*S,t[6]=(b*A-m*g+d*q)*S,t[7]=(m*y-v*A-d*p)*S,t[8]=(v*g-b*y+d*x)*S,t):null},projection:function(t,n,a){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/a,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},str:function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},add:function(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t[3]=n[3]+a[3],t[4]=n[4]+a[4],t[5]=n[5]+a[5],t[6]=n[6]+a[6],t[7]=n[7]+a[7],t[8]=n[8]+a[8],t},subtract:x,multiplyScalar:function(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*a,t},multiplyScalarAndAdd:function(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t[2]=n[2]+a[2]*r,t[3]=n[3]+a[3]*r,t[4]=n[4]+a[4]*r,t[5]=n[5]+a[5]*r,t[6]=n[6]+a[6]*r,t[7]=n[7]+a[7]*r,t[8]=n[8]+a[8]*r,t},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},equals:function(t,a){var r=t[0],u=t[1],e=t[2],o=t[3],i=t[4],c=t[5],h=t[6],s=t[7],M=t[8],f=a[0],l=a[1],v=a[2],b=a[3],m=a[4],d=a[5],x=a[6],p=a[7],y=a[8];return Math.abs(r-f)<=n*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(u-l)<=n*Math.max(1,Math.abs(u),Math.abs(l))&&Math.abs(e-v)<=n*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(o-b)<=n*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-m)<=n*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(c-d)<=n*Math.max(1,Math.abs(c),Math.abs(d))&&Math.abs(h-x)<=n*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(s-p)<=n*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(M-y)<=n*Math.max(1,Math.abs(M),Math.abs(y))},mul:p,sub:y});function g(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],h=n[6],s=n[7],M=n[8],f=n[9],l=n[10],v=n[11],b=n[12],m=n[13],d=n[14],x=n[15],p=a[0],y=a[1],q=a[2],g=a[3];return t[0]=p*r+y*i+q*M+g*b,t[1]=p*u+y*c+q*f+g*m,t[2]=p*e+y*h+q*l+g*d,t[3]=p*o+y*s+q*v+g*x,p=a[4],y=a[5],q=a[6],g=a[7],t[4]=p*r+y*i+q*M+g*b,t[5]=p*u+y*c+q*f+g*m,t[6]=p*e+y*h+q*l+g*d,t[7]=p*o+y*s+q*v+g*x,p=a[8],y=a[9],q=a[10],g=a[11],t[8]=p*r+y*i+q*M+g*b,t[9]=p*u+y*c+q*f+g*m,t[10]=p*e+y*h+q*l+g*d,t[11]=p*o+y*s+q*v+g*x,p=a[12],y=a[13],q=a[14],g=a[15],t[12]=p*r+y*i+q*M+g*b,t[13]=p*u+y*c+q*f+g*m,t[14]=p*e+y*h+q*l+g*d,t[15]=p*o+y*s+q*v+g*x,t}function w(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=r+r,c=u+u,h=e+e,s=r*i,M=r*c,f=r*h,l=u*c,v=u*h,b=e*h,m=o*i,d=o*c,x=o*h;return t[0]=1-(l+b),t[1]=M+x,t[2]=f-d,t[3]=0,t[4]=M-x,t[5]=1-(s+b),t[6]=v+m,t[7]=0,t[8]=f+d,t[9]=v-m,t[10]=1-(s+l),t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function R(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function z(t,n){var a=n[0],r=n[1],u=n[2],e=n[4],o=n[5],i=n[6],c=n[8],h=n[9],s=n[10];return t[0]=Math.hypot(a,r,u),t[1]=Math.hypot(e,o,i),t[2]=Math.hypot(c,h,s),t}function P(t,n){var r=new a(3);z(r,n);var u=1/r[0],e=1/r[1],o=1/r[2],i=n[0]*u,c=n[1]*e,h=n[2]*o,s=n[4]*u,M=n[5]*e,f=n[6]*o,l=n[8]*u,v=n[9]*e,b=n[10]*o,m=i+M+b,d=0;return m>0?(d=2*Math.sqrt(m+1),t[3]=.25*d,t[0]=(f-v)/d,t[1]=(l-h)/d,t[2]=(c-s)/d):i>M&&i>b?(d=2*Math.sqrt(1+i-M-b),t[3]=(f-v)/d,t[0]=.25*d,t[1]=(c+s)/d,t[2]=(l+h)/d):M>b?(d=2*Math.sqrt(1+M-i-b),t[3]=(l-h)/d,t[0]=(c+s)/d,t[1]=.25*d,t[2]=(f+v)/d):(d=2*Math.sqrt(1+b-i-M),t[3]=(c-s)/d,t[0]=(l+h)/d,t[1]=(f+v)/d,t[2]=.25*d),t}function j(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t[3]=n[3]-a[3],t[4]=n[4]-a[4],t[5]=n[5]-a[5],t[6]=n[6]-a[6],t[7]=n[7]-a[7],t[8]=n[8]-a[8],t[9]=n[9]-a[9],t[10]=n[10]-a[10],t[11]=n[11]-a[11],t[12]=n[12]-a[12],t[13]=n[13]-a[13],t[14]=n[14]-a[14],t[15]=n[15]-a[15],t}var I=A,S=j,E=Object.freeze({create:function(){var t=new a(16);return a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},clone:function(t){var n=new a(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},fromValues:function(t,n,r,u,e,o,i,c,h,s,M,f,l,v,b,m){var d=new a(16);return d[0]=t,d[1]=n,d[2]=r,d[3]=u,d[4]=e,d[5]=o,d[6]=i,d[7]=c,d[8]=h,d[9]=s,d[10]=M,d[11]=f,d[12]=l,d[13]=v,d[14]=b,d[15]=m,d},set:function(t,n,a,r,u,e,o,i,c,h,s,M,f,l,v,b,m){return t[0]=n,t[1]=a,t[2]=r,t[3]=u,t[4]=e,t[5]=o,t[6]=i,t[7]=c,t[8]=h,t[9]=s,t[10]=M,t[11]=f,t[12]=l,t[13]=v,t[14]=b,t[15]=m,t},identity:g,transpose:function(t,n){if(t===n){var a=n[1],r=n[2],u=n[3],e=n[6],o=n[7],i=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=a,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=e,t[11]=n[14],t[12]=u,t[13]=o,t[14]=i}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},invert:function(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=n[6],h=n[7],s=n[8],M=n[9],f=n[10],l=n[11],v=n[12],b=n[13],m=n[14],d=n[15],x=a*i-r*o,p=a*c-u*o,y=a*h-e*o,q=r*c-u*i,g=r*h-e*i,A=u*h-e*c,w=s*b-M*v,R=s*m-f*v,z=s*d-l*v,P=M*m-f*b,j=M*d-l*b,I=f*d-l*m,S=x*I-p*j+y*P+q*z-g*R+A*w;return S?(S=1/S,t[0]=(i*I-c*j+h*P)*S,t[1]=(u*j-r*I-e*P)*S,t[2]=(b*A-m*g+d*q)*S,t[3]=(f*g-M*A-l*q)*S,t[4]=(c*z-o*I-h*R)*S,t[5]=(a*I-u*z+e*R)*S,t[6]=(m*y-v*A-d*p)*S,t[7]=(s*A-f*y+l*p)*S,t[8]=(o*j-i*z+h*w)*S,t[9]=(r*z-a*j-e*w)*S,t[10]=(v*g-b*y+d*x)*S,t[11]=(M*y-s*g-l*x)*S,t[12]=(i*R-o*P-c*w)*S,t[13]=(a*P-r*R+u*w)*S,t[14]=(b*p-v*q-m*x)*S,t[15]=(s*q-M*p+f*x)*S,t):null},adjoint:function(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=n[4],i=n[5],c=n[6],h=n[7],s=n[8],M=n[9],f=n[10],l=n[11],v=n[12],b=n[13],m=n[14],d=n[15];return t[0]=i*(f*d-l*m)-M*(c*d-h*m)+b*(c*l-h*f),t[1]=-(r*(f*d-l*m)-M*(u*d-e*m)+b*(u*l-e*f)),t[2]=r*(c*d-h*m)-i*(u*d-e*m)+b*(u*h-e*c),t[3]=-(r*(c*l-h*f)-i*(u*l-e*f)+M*(u*h-e*c)),t[4]=-(o*(f*d-l*m)-s*(c*d-h*m)+v*(c*l-h*f)),t[5]=a*(f*d-l*m)-s*(u*d-e*m)+v*(u*l-e*f),t[6]=-(a*(c*d-h*m)-o*(u*d-e*m)+v*(u*h-e*c)),t[7]=a*(c*l-h*f)-o*(u*l-e*f)+s*(u*h-e*c),t[8]=o*(M*d-l*b)-s*(i*d-h*b)+v*(i*l-h*M),t[9]=-(a*(M*d-l*b)-s*(r*d-e*b)+v*(r*l-e*M)),t[10]=a*(i*d-h*b)-o*(r*d-e*b)+v*(r*h-e*i),t[11]=-(a*(i*l-h*M)-o*(r*l-e*M)+s*(r*h-e*i)),t[12]=-(o*(M*m-f*b)-s*(i*m-c*b)+v*(i*f-c*M)),t[13]=a*(M*m-f*b)-s*(r*m-u*b)+v*(r*f-u*M),t[14]=-(a*(i*m-c*b)-o*(r*m-u*b)+v*(r*c-u*i)),t[15]=a*(i*f-c*M)-o*(r*f-u*M)+s*(r*c-u*i),t},determinant:function(t){var n=t[0],a=t[1],r=t[2],u=t[3],e=t[4],o=t[5],i=t[6],c=t[7],h=t[8],s=t[9],M=t[10],f=t[11],l=t[12],v=t[13],b=t[14],m=t[15];return(n*o-a*e)*(M*m-f*b)-(n*i-r*e)*(s*m-f*v)+(n*c-u*e)*(s*b-M*v)+(a*i-r*o)*(h*m-f*l)-(a*c-u*o)*(h*b-M*l)+(r*c-u*i)*(h*v-s*l)},multiply:A,translate:function(t,n,a){var r,u,e,o,i,c,h,s,M,f,l,v,b=a[0],m=a[1],d=a[2];return n===t?(t[12]=n[0]*b+n[4]*m+n[8]*d+n[12],t[13]=n[1]*b+n[5]*m+n[9]*d+n[13],t[14]=n[2]*b+n[6]*m+n[10]*d+n[14],t[15]=n[3]*b+n[7]*m+n[11]*d+n[15]):(r=n[0],u=n[1],e=n[2],o=n[3],i=n[4],c=n[5],h=n[6],s=n[7],M=n[8],f=n[9],l=n[10],v=n[11],t[0]=r,t[1]=u,t[2]=e,t[3]=o,t[4]=i,t[5]=c,t[6]=h,t[7]=s,t[8]=M,t[9]=f,t[10]=l,t[11]=v,t[12]=r*b+i*m+M*d+n[12],t[13]=u*b+c*m+f*d+n[13],t[14]=e*b+h*m+l*d+n[14],t[15]=o*b+s*m+v*d+n[15]),t},scale:function(t,n,a){var r=a[0],u=a[1],e=a[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*u,t[5]=n[5]*u,t[6]=n[6]*u,t[7]=n[7]*u,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},rotate:function(t,a,r,u){var e,o,i,c,h,s,M,f,l,v,b,m,d,x,p,y,q,g,A,w,R,z,P,j,I=u[0],S=u[1],E=u[2],O=Math.hypot(I,S,E);return O<n?null:(I*=O=1/O,S*=O,E*=O,e=Math.sin(r),i=1-(o=Math.cos(r)),c=a[0],h=a[1],s=a[2],M=a[3],f=a[4],l=a[5],v=a[6],b=a[7],m=a[8],d=a[9],x=a[10],p=a[11],y=I*I*i+o,q=S*I*i+E*e,g=E*I*i-S*e,A=I*S*i-E*e,w=S*S*i+o,R=E*S*i+I*e,z=I*E*i+S*e,P=S*E*i-I*e,j=E*E*i+o,t[0]=c*y+f*q+m*g,t[1]=h*y+l*q+d*g,t[2]=s*y+v*q+x*g,t[3]=M*y+b*q+p*g,t[4]=c*A+f*w+m*R,t[5]=h*A+l*w+d*R,t[6]=s*A+v*w+x*R,t[7]=M*A+b*w+p*R,t[8]=c*z+f*P+m*j,t[9]=h*z+l*P+d*j,t[10]=s*z+v*P+x*j,t[11]=M*z+b*P+p*j,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},rotateX:function(t,n,a){var r=Math.sin(a),u=Math.cos(a),e=n[4],o=n[5],i=n[6],c=n[7],h=n[8],s=n[9],M=n[10],f=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=e*u+h*r,t[5]=o*u+s*r,t[6]=i*u+M*r,t[7]=c*u+f*r,t[8]=h*u-e*r,t[9]=s*u-o*r,t[10]=M*u-i*r,t[11]=f*u-c*r,t},rotateY:function(t,n,a){var r=Math.sin(a),u=Math.cos(a),e=n[0],o=n[1],i=n[2],c=n[3],h=n[8],s=n[9],M=n[10],f=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=e*u-h*r,t[1]=o*u-s*r,t[2]=i*u-M*r,t[3]=c*u-f*r,t[8]=e*r+h*u,t[9]=o*r+s*u,t[10]=i*r+M*u,t[11]=c*r+f*u,t},rotateZ:function(t,n,a){var r=Math.sin(a),u=Math.cos(a),e=n[0],o=n[1],i=n[2],c=n[3],h=n[4],s=n[5],M=n[6],f=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=e*u+h*r,t[1]=o*u+s*r,t[2]=i*u+M*r,t[3]=c*u+f*r,t[4]=h*u-e*r,t[5]=s*u-o*r,t[6]=M*u-i*r,t[7]=f*u-c*r,t},fromTranslation:function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},fromScaling:function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotation:function(t,a,r){var u,e,o,i=r[0],c=r[1],h=r[2],s=Math.hypot(i,c,h);return s<n?null:(i*=s=1/s,c*=s,h*=s,u=Math.sin(a),o=1-(e=Math.cos(a)),t[0]=i*i*o+e,t[1]=c*i*o+h*u,t[2]=h*i*o-c*u,t[3]=0,t[4]=i*c*o-h*u,t[5]=c*c*o+e,t[6]=h*c*o+i*u,t[7]=0,t[8]=i*h*o+c*u,t[9]=c*h*o-i*u,t[10]=h*h*o+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},fromXRotation:function(t,n){var a=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=a,t[7]=0,t[8]=0,t[9]=-a,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromYRotation:function(t,n){var a=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-a,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=a,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromZRotation:function(t,n){var a=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=a,t[2]=0,t[3]=0,t[4]=-a,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},fromRotationTranslation:w,fromQuat2:function(t,n){var r=new a(3),u=-n[0],e=-n[1],o=-n[2],i=n[3],c=n[4],h=n[5],s=n[6],M=n[7],f=u*u+e*e+o*o+i*i;return f>0?(r[0]=2*(c*i+M*u+h*o-s*e)/f,r[1]=2*(h*i+M*e+s*u-c*o)/f,r[2]=2*(s*i+M*o+c*e-h*u)/f):(r[0]=2*(c*i+M*u+h*o-s*e),r[1]=2*(h*i+M*e+s*u-c*o),r[2]=2*(s*i+M*o+c*e-h*u)),w(t,n,r),t},getTranslation:R,getScaling:z,getRotation:P,fromRotationTranslationScale:function(t,n,a,r){var u=n[0],e=n[1],o=n[2],i=n[3],c=u+u,h=e+e,s=o+o,M=u*c,f=u*h,l=u*s,v=e*h,b=e*s,m=o*s,d=i*c,x=i*h,p=i*s,y=r[0],q=r[1],g=r[2];return t[0]=(1-(v+m))*y,t[1]=(f+p)*y,t[2]=(l-x)*y,t[3]=0,t[4]=(f-p)*q,t[5]=(1-(M+m))*q,t[6]=(b+d)*q,t[7]=0,t[8]=(l+x)*g,t[9]=(b-d)*g,t[10]=(1-(M+v))*g,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},fromRotationTranslationScaleOrigin:function(t,n,a,r,u){var e=n[0],o=n[1],i=n[2],c=n[3],h=e+e,s=o+o,M=i+i,f=e*h,l=e*s,v=e*M,b=o*s,m=o*M,d=i*M,x=c*h,p=c*s,y=c*M,q=r[0],g=r[1],A=r[2],w=u[0],R=u[1],z=u[2],P=(1-(b+d))*q,j=(l+y)*q,I=(v-p)*q,S=(l-y)*g,E=(1-(f+d))*g,O=(m+x)*g,T=(v+p)*A,D=(m-x)*A,F=(1-(f+b))*A;return t[0]=P,t[1]=j,t[2]=I,t[3]=0,t[4]=S,t[5]=E,t[6]=O,t[7]=0,t[8]=T,t[9]=D,t[10]=F,t[11]=0,t[12]=a[0]+w-(P*w+S*R+T*z),t[13]=a[1]+R-(j*w+E*R+D*z),t[14]=a[2]+z-(I*w+O*R+F*z),t[15]=1,t},fromQuat:function(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=a+a,i=r+r,c=u+u,h=a*o,s=r*o,M=r*i,f=u*o,l=u*i,v=u*c,b=e*o,m=e*i,d=e*c;return t[0]=1-M-v,t[1]=s+d,t[2]=f-m,t[3]=0,t[4]=s-d,t[5]=1-h-v,t[6]=l+b,t[7]=0,t[8]=f+m,t[9]=l-b,t[10]=1-h-M,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},frustum:function(t,n,a,r,u,e,o){var i=1/(a-n),c=1/(u-r),h=1/(e-o);return t[0]=2*e*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*e*c,t[6]=0,t[7]=0,t[8]=(a+n)*i,t[9]=(u+r)*c,t[10]=(o+e)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*e*2*h,t[15]=0,t},perspective:function(t,n,a,r,u){var e,o=1/Math.tan(n/2);return t[0]=o/a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=u&&u!==1/0?(e=1/(r-u),t[10]=(u+r)*e,t[14]=2*u*r*e):(t[10]=-1,t[14]=-2*r),t},perspectiveFromFieldOfView:function(t,n,a,r){var u=Math.tan(n.upDegrees*Math.PI/180),e=Math.tan(n.downDegrees*Math.PI/180),o=Math.tan(n.leftDegrees*Math.PI/180),i=Math.tan(n.rightDegrees*Math.PI/180),c=2/(o+i),h=2/(u+e);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(o-i)*c*.5,t[9]=(u-e)*h*.5,t[10]=r/(a-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*a/(a-r),t[15]=0,t},ortho:function(t,n,a,r,u,e,o){var i=1/(n-a),c=1/(r-u),h=1/(e-o);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(n+a)*i,t[13]=(u+r)*c,t[14]=(o+e)*h,t[15]=1,t},lookAt:function(t,a,r,u){var e,o,i,c,h,s,M,f,l,v,b=a[0],m=a[1],d=a[2],x=u[0],p=u[1],y=u[2],q=r[0],A=r[1],w=r[2];return Math.abs(b-q)<n&&Math.abs(m-A)<n&&Math.abs(d-w)<n?g(t):(M=b-q,f=m-A,l=d-w,e=p*(l*=v=1/Math.hypot(M,f,l))-y*(f*=v),o=y*(M*=v)-x*l,i=x*f-p*M,(v=Math.hypot(e,o,i))?(e*=v=1/v,o*=v,i*=v):(e=0,o=0,i=0),c=f*i-l*o,h=l*e-M*i,s=M*o-f*e,(v=Math.hypot(c,h,s))?(c*=v=1/v,h*=v,s*=v):(c=0,h=0,s=0),t[0]=e,t[1]=c,t[2]=M,t[3]=0,t[4]=o,t[5]=h,t[6]=f,t[7]=0,t[8]=i,t[9]=s,t[10]=l,t[11]=0,t[12]=-(e*b+o*m+i*d),t[13]=-(c*b+h*m+s*d),t[14]=-(M*b+f*m+l*d),t[15]=1,t)},targetTo:function(t,n,a,r){var u=n[0],e=n[1],o=n[2],i=r[0],c=r[1],h=r[2],s=u-a[0],M=e-a[1],f=o-a[2],l=s*s+M*M+f*f;l>0&&(s*=l=1/Math.sqrt(l),M*=l,f*=l);var v=c*f-h*M,b=h*s-i*f,m=i*M-c*s;return(l=v*v+b*b+m*m)>0&&(v*=l=1/Math.sqrt(l),b*=l,m*=l),t[0]=v,t[1]=b,t[2]=m,t[3]=0,t[4]=M*m-f*b,t[5]=f*v-s*m,t[6]=s*b-M*v,t[7]=0,t[8]=s,t[9]=M,t[10]=f,t[11]=0,t[12]=u,t[13]=e,t[14]=o,t[15]=1,t},str:function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},frob:function(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},add:function(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t[3]=n[3]+a[3],t[4]=n[4]+a[4],t[5]=n[5]+a[5],t[6]=n[6]+a[6],t[7]=n[7]+a[7],t[8]=n[8]+a[8],t[9]=n[9]+a[9],t[10]=n[10]+a[10],t[11]=n[11]+a[11],t[12]=n[12]+a[12],t[13]=n[13]+a[13],t[14]=n[14]+a[14],t[15]=n[15]+a[15],t},subtract:j,multiplyScalar:function(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=n[11]*a,t[12]=n[12]*a,t[13]=n[13]*a,t[14]=n[14]*a,t[15]=n[15]*a,t},multiplyScalarAndAdd:function(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t[2]=n[2]+a[2]*r,t[3]=n[3]+a[3]*r,t[4]=n[4]+a[4]*r,t[5]=n[5]+a[5]*r,t[6]=n[6]+a[6]*r,t[7]=n[7]+a[7]*r,t[8]=n[8]+a[8]*r,t[9]=n[9]+a[9]*r,t[10]=n[10]+a[10]*r,t[11]=n[11]+a[11]*r,t[12]=n[12]+a[12]*r,t[13]=n[13]+a[13]*r,t[14]=n[14]+a[14]*r,t[15]=n[15]+a[15]*r,t},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},equals:function(t,a){var r=t[0],u=t[1],e=t[2],o=t[3],i=t[4],c=t[5],h=t[6],s=t[7],M=t[8],f=t[9],l=t[10],v=t[11],b=t[12],m=t[13],d=t[14],x=t[15],p=a[0],y=a[1],q=a[2],g=a[3],A=a[4],w=a[5],R=a[6],z=a[7],P=a[8],j=a[9],I=a[10],S=a[11],E=a[12],O=a[13],T=a[14],D=a[15];return Math.abs(r-p)<=n*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(u-y)<=n*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(e-q)<=n*Math.max(1,Math.abs(e),Math.abs(q))&&Math.abs(o-g)<=n*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(i-A)<=n*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(c-w)<=n*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(h-R)<=n*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(s-z)<=n*Math.max(1,Math.abs(s),Math.abs(z))&&Math.abs(M-P)<=n*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(f-j)<=n*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(l-I)<=n*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(v-S)<=n*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(b-E)<=n*Math.max(1,Math.abs(b),Math.abs(E))&&Math.abs(m-O)<=n*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(d-T)<=n*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(x-D)<=n*Math.max(1,Math.abs(x),Math.abs(D))},mul:I,sub:S});function O(){var t=new a(3);return a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function T(t){var n=t[0],a=t[1],r=t[2];return Math.hypot(n,a,r)}function D(t,n,r){var u=new a(3);return u[0]=t,u[1]=n,u[2]=r,u}function F(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t}function L(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t[2]=n[2]*a[2],t}function V(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t[2]=n[2]/a[2],t}function Q(t,n){var a=n[0]-t[0],r=n[1]-t[1],u=n[2]-t[2];return Math.hypot(a,r,u)}function Y(t,n){var a=n[0]-t[0],r=n[1]-t[1],u=n[2]-t[2];return a*a+r*r+u*u}function X(t){var n=t[0],a=t[1],r=t[2];return n*n+a*a+r*r}function Z(t,n){var a=n[0],r=n[1],u=n[2],e=a*a+r*r+u*u;return e>0&&(e=1/Math.sqrt(e)),t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function _(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function B(t,n,a){var r=n[0],u=n[1],e=n[2],o=a[0],i=a[1],c=a[2];return t[0]=u*c-e*i,t[1]=e*o-r*c,t[2]=r*i-u*o,t}var N,k=F,U=L,W=V,C=Q,G=Y,H=T,J=X,K=(N=O(),function(t,n,a,r,u,e){var o,i;for(n||(n=3),a||(a=0),i=r?Math.min(r*n+a,t.length):t.length,o=a;o<i;o+=n)N[0]=t[o],N[1]=t[o+1],N[2]=t[o+2],u(N,N,e),t[o]=N[0],t[o+1]=N[1],t[o+2]=N[2];return t}),$=Object.freeze({create:O,clone:function(t){var n=new a(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},length:T,fromValues:D,copy:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},set:function(t,n,a,r){return t[0]=n,t[1]=a,t[2]=r,t},add:function(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t},subtract:F,multiply:L,divide:V,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},min:function(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t[2]=Math.min(n[2],a[2]),t},max:function(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t[2]=Math.max(n[2],a[2]),t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},scale:function(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t},scaleAndAdd:function(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t[2]=n[2]+a[2]*r,t},distance:Q,squaredDistance:Y,squaredLength:X,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},normalize:Z,dot:_,cross:B,lerp:function(t,n,a,r){var u=n[0],e=n[1],o=n[2];return t[0]=u+r*(a[0]-u),t[1]=e+r*(a[1]-e),t[2]=o+r*(a[2]-o),t},hermite:function(t,n,a,r,u,e){var o=e*e,i=o*(2*e-3)+1,c=o*(e-2)+e,h=o*(e-1),s=o*(3-2*e);return t[0]=n[0]*i+a[0]*c+r[0]*h+u[0]*s,t[1]=n[1]*i+a[1]*c+r[1]*h+u[1]*s,t[2]=n[2]*i+a[2]*c+r[2]*h+u[2]*s,t},bezier:function(t,n,a,r,u,e){var o=1-e,i=o*o,c=e*e,h=i*o,s=3*e*i,M=3*c*o,f=c*e;return t[0]=n[0]*h+a[0]*s+r[0]*M+u[0]*f,t[1]=n[1]*h+a[1]*s+r[1]*M+u[1]*f,t[2]=n[2]*h+a[2]*s+r[2]*M+u[2]*f,t},random:function(t,n){n=n||1;var a=2*r()*Math.PI,u=2*r()-1,e=Math.sqrt(1-u*u)*n;return t[0]=Math.cos(a)*e,t[1]=Math.sin(a)*e,t[2]=u*n,t},transformMat4:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=a[3]*r+a[7]*u+a[11]*e+a[15];return o=o||1,t[0]=(a[0]*r+a[4]*u+a[8]*e+a[12])/o,t[1]=(a[1]*r+a[5]*u+a[9]*e+a[13])/o,t[2]=(a[2]*r+a[6]*u+a[10]*e+a[14])/o,t},transformMat3:function(t,n,a){var r=n[0],u=n[1],e=n[2];return t[0]=r*a[0]+u*a[3]+e*a[6],t[1]=r*a[1]+u*a[4]+e*a[7],t[2]=r*a[2]+u*a[5]+e*a[8],t},transformQuat:function(t,n,a){var r=a[0],u=a[1],e=a[2],o=a[3],i=n[0],c=n[1],h=n[2],s=u*h-e*c,M=e*i-r*h,f=r*c-u*i,l=u*f-e*M,v=e*s-r*f,b=r*M-u*s,m=2*o;return s*=m,M*=m,f*=m,l*=2,v*=2,b*=2,t[0]=i+s+l,t[1]=c+M+v,t[2]=h+f+b,t},rotateX:function(t,n,a,r){var u=[],e=[];return u[0]=n[0]-a[0],u[1]=n[1]-a[1],u[2]=n[2]-a[2],e[0]=u[0],e[1]=u[1]*Math.cos(r)-u[2]*Math.sin(r),e[2]=u[1]*Math.sin(r)+u[2]*Math.cos(r),t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t},rotateY:function(t,n,a,r){var u=[],e=[];return u[0]=n[0]-a[0],u[1]=n[1]-a[1],u[2]=n[2]-a[2],e[0]=u[2]*Math.sin(r)+u[0]*Math.cos(r),e[1]=u[1],e[2]=u[2]*Math.cos(r)-u[0]*Math.sin(r),t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t},rotateZ:function(t,n,a,r){var u=[],e=[];return u[0]=n[0]-a[0],u[1]=n[1]-a[1],u[2]=n[2]-a[2],e[0]=u[0]*Math.cos(r)-u[1]*Math.sin(r),e[1]=u[0]*Math.sin(r)+u[1]*Math.cos(r),e[2]=u[2],t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t},angle:function(t,n){var a=D(t[0],t[1],t[2]),r=D(n[0],n[1],n[2]);Z(a,a),Z(r,r);var u=_(a,r);return u>1?0:u<-1?Math.PI:Math.acos(u)},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t},str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},equals:function(t,a){var r=t[0],u=t[1],e=t[2],o=a[0],i=a[1],c=a[2];return Math.abs(r-o)<=n*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(u-i)<=n*Math.max(1,Math.abs(u),Math.abs(i))&&Math.abs(e-c)<=n*Math.max(1,Math.abs(e),Math.abs(c))},sub:k,mul:U,div:W,dist:C,sqrDist:G,len:H,sqrLen:J,forEach:K});function tt(){var t=new a(4);return a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function nt(t){var n=new a(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function at(t,n,r,u){var e=new a(4);return e[0]=t,e[1]=n,e[2]=r,e[3]=u,e}function rt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function ut(t,n,a,r,u){return t[0]=n,t[1]=a,t[2]=r,t[3]=u,t}function et(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t[3]=n[3]+a[3],t}function ot(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t[3]=n[3]-a[3],t}function it(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t[2]=n[2]*a[2],t[3]=n[3]*a[3],t}function ct(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t[2]=n[2]/a[2],t[3]=n[3]/a[3],t}function ht(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t}function st(t,n){var a=n[0]-t[0],r=n[1]-t[1],u=n[2]-t[2],e=n[3]-t[3];return Math.hypot(a,r,u,e)}function Mt(t,n){var a=n[0]-t[0],r=n[1]-t[1],u=n[2]-t[2],e=n[3]-t[3];return a*a+r*r+u*u+e*e}function ft(t){var n=t[0],a=t[1],r=t[2],u=t[3];return Math.hypot(n,a,r,u)}function lt(t){var n=t[0],a=t[1],r=t[2],u=t[3];return n*n+a*a+r*r+u*u}function vt(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=a*a+r*r+u*u+e*e;return o>0&&(o=1/Math.sqrt(o)),t[0]=a*o,t[1]=r*o,t[2]=u*o,t[3]=e*o,t}function bt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function mt(t,n,a,r){var u=n[0],e=n[1],o=n[2],i=n[3];return t[0]=u+r*(a[0]-u),t[1]=e+r*(a[1]-e),t[2]=o+r*(a[2]-o),t[3]=i+r*(a[3]-i),t}function dt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function xt(t,a){var r=t[0],u=t[1],e=t[2],o=t[3],i=a[0],c=a[1],h=a[2],s=a[3];return Math.abs(r-i)<=n*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(u-c)<=n*Math.max(1,Math.abs(u),Math.abs(c))&&Math.abs(e-h)<=n*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(o-s)<=n*Math.max(1,Math.abs(o),Math.abs(s))}var pt=ot,yt=it,qt=ct,gt=st,At=Mt,wt=ft,Rt=lt,zt=function(){var t=tt();return function(n,a,r,u,e,o){var i,c;for(a||(a=4),r||(r=0),c=u?Math.min(u*a+r,n.length):n.length,i=r;i<c;i+=a)t[0]=n[i],t[1]=n[i+1],t[2]=n[i+2],t[3]=n[i+3],e(t,t,o),n[i]=t[0],n[i+1]=t[1],n[i+2]=t[2],n[i+3]=t[3];return n}}(),Pt=Object.freeze({create:tt,clone:nt,fromValues:at,copy:rt,set:ut,add:et,subtract:ot,multiply:it,divide:ct,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},min:function(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t[2]=Math.min(n[2],a[2]),t[3]=Math.min(n[3],a[3]),t},max:function(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t[2]=Math.max(n[2],a[2]),t[3]=Math.max(n[3],a[3]),t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},scale:ht,scaleAndAdd:function(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t[2]=n[2]+a[2]*r,t[3]=n[3]+a[3]*r,t},distance:st,squaredDistance:Mt,length:ft,squaredLength:lt,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},normalize:vt,dot:bt,cross:function(t,n,a,r){var u=a[0]*r[1]-a[1]*r[0],e=a[0]*r[2]-a[2]*r[0],o=a[0]*r[3]-a[3]*r[0],i=a[1]*r[2]-a[2]*r[1],c=a[1]*r[3]-a[3]*r[1],h=a[2]*r[3]-a[3]*r[2],s=n[0],M=n[1],f=n[2],l=n[3];return t[0]=M*h-f*c+l*i,t[1]=-s*h+f*o-l*e,t[2]=s*c-M*o+l*u,t[3]=-s*i+M*e-f*u,t},lerp:mt,random:function(t,n){var a,u,e,o,i,c;n=n||1;do{i=(a=2*r()-1)*a+(u=2*r()-1)*u}while(i>=1);do{c=(e=2*r()-1)*e+(o=2*r()-1)*o}while(c>=1);var h=Math.sqrt((1-i)/c);return t[0]=n*a,t[1]=n*u,t[2]=n*e*h,t[3]=n*o*h,t},transformMat4:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3];return t[0]=a[0]*r+a[4]*u+a[8]*e+a[12]*o,t[1]=a[1]*r+a[5]*u+a[9]*e+a[13]*o,t[2]=a[2]*r+a[6]*u+a[10]*e+a[14]*o,t[3]=a[3]*r+a[7]*u+a[11]*e+a[15]*o,t},transformQuat:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=a[0],i=a[1],c=a[2],h=a[3],s=h*r+i*e-c*u,M=h*u+c*r-o*e,f=h*e+o*u-i*r,l=-o*r-i*u-c*e;return t[0]=s*h+l*-o+M*-c-f*-i,t[1]=M*h+l*-i+f*-o-s*-c,t[2]=f*h+l*-c+s*-i-M*-o,t[3]=n[3],t},zero:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals:dt,equals:xt,sub:pt,mul:yt,div:qt,dist:gt,sqrDist:At,len:wt,sqrLen:Rt,forEach:zt});function jt(){var t=new a(4);return a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function It(t,n,a){a*=.5;var r=Math.sin(a);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(a),t}function St(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=a[0],c=a[1],h=a[2],s=a[3];return t[0]=r*s+o*i+u*h-e*c,t[1]=u*s+o*c+e*i-r*h,t[2]=e*s+o*h+r*c-u*i,t[3]=o*s-r*i-u*c-e*h,t}function Et(t,n,a){a*=.5;var r=n[0],u=n[1],e=n[2],o=n[3],i=Math.sin(a),c=Math.cos(a);return t[0]=r*c+o*i,t[1]=u*c+e*i,t[2]=e*c-u*i,t[3]=o*c-r*i,t}function Ot(t,n,a){a*=.5;var r=n[0],u=n[1],e=n[2],o=n[3],i=Math.sin(a),c=Math.cos(a);return t[0]=r*c-e*i,t[1]=u*c+o*i,t[2]=e*c+r*i,t[3]=o*c-u*i,t}function Tt(t,n,a){a*=.5;var r=n[0],u=n[1],e=n[2],o=n[3],i=Math.sin(a),c=Math.cos(a);return t[0]=r*c+u*i,t[1]=u*c-r*i,t[2]=e*c+o*i,t[3]=o*c-e*i,t}function Dt(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=Math.sqrt(a*a+r*r+u*u),i=Math.exp(e),c=o>0?i*Math.sin(o)/o:0;return t[0]=a*c,t[1]=r*c,t[2]=u*c,t[3]=i*Math.cos(o),t}function Ft(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=Math.sqrt(a*a+r*r+u*u),i=o>0?Math.atan2(o,e)/o:0;return t[0]=a*i,t[1]=r*i,t[2]=u*i,t[3]=.5*Math.log(a*a+r*r+u*u+e*e),t}function Lt(t,a,r,u){var e,o,i,c,h,s=a[0],M=a[1],f=a[2],l=a[3],v=r[0],b=r[1],m=r[2],d=r[3];return(o=s*v+M*b+f*m+l*d)<0&&(o=-o,v=-v,b=-b,m=-m,d=-d),1-o>n?(e=Math.acos(o),i=Math.sin(e),c=Math.sin((1-u)*e)/i,h=Math.sin(u*e)/i):(c=1-u,h=u),t[0]=c*s+h*v,t[1]=c*M+h*b,t[2]=c*f+h*m,t[3]=c*l+h*d,t}function Vt(t,n){var a,r=n[0]+n[4]+n[8];if(r>0)a=Math.sqrt(r+1),t[3]=.5*a,a=.5/a,t[0]=(n[5]-n[7])*a,t[1]=(n[6]-n[2])*a,t[2]=(n[1]-n[3])*a;else{var u=0;n[4]>n[0]&&(u=1),n[8]>n[3*u+u]&&(u=2);var e=(u+1)%3,o=(u+2)%3;a=Math.sqrt(n[3*u+u]-n[3*e+e]-n[3*o+o]+1),t[u]=.5*a,a=.5/a,t[3]=(n[3*e+o]-n[3*o+e])*a,t[e]=(n[3*e+u]+n[3*u+e])*a,t[o]=(n[3*o+u]+n[3*u+o])*a}return t}var Qt,Yt,Xt,Zt,_t,Bt,Nt=nt,kt=at,Ut=rt,Wt=ut,Ct=et,Gt=St,Ht=ht,Jt=bt,Kt=mt,$t=ft,tn=$t,nn=lt,an=nn,rn=vt,un=dt,en=xt,on=(Qt=O(),Yt=D(1,0,0),Xt=D(0,1,0),function(t,n,a){var r=_(n,a);return r<-.999999?(B(Qt,Yt,n),H(Qt)<1e-6&&B(Qt,Xt,n),Z(Qt,Qt),It(t,Qt,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(B(Qt,n,a),t[0]=Qt[0],t[1]=Qt[1],t[2]=Qt[2],t[3]=1+r,rn(t,t))}),cn=(Zt=jt(),_t=jt(),function(t,n,a,r,u,e){return Lt(Zt,n,u,e),Lt(_t,a,r,e),Lt(t,Zt,_t,2*e*(1-e)),t}),hn=(Bt=m(),function(t,n,a,r){return Bt[0]=a[0],Bt[3]=a[1],Bt[6]=a[2],Bt[1]=r[0],Bt[4]=r[1],Bt[7]=r[2],Bt[2]=-n[0],Bt[5]=-n[1],Bt[8]=-n[2],rn(t,Vt(t,Bt))}),sn=Object.freeze({create:jt,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:It,getAxisAngle:function(t,a){var r=2*Math.acos(a[3]),u=Math.sin(r/2);return u>n?(t[0]=a[0]/u,t[1]=a[1]/u,t[2]=a[2]/u):(t[0]=1,t[1]=0,t[2]=0),r},getAngle:function(t,n){var a=Jt(t,n);return Math.acos(2*a*a-1)},multiply:St,rotateX:Et,rotateY:Ot,rotateZ:Tt,calculateW:function(t,n){var a=n[0],r=n[1],u=n[2];return t[0]=a,t[1]=r,t[2]=u,t[3]=Math.sqrt(Math.abs(1-a*a-r*r-u*u)),t},exp:Dt,ln:Ft,pow:function(t,n,a){return Ft(t,n),Ht(t,t,a),Dt(t,t),t},slerp:Lt,random:function(t){var n=r(),a=r(),u=r(),e=Math.sqrt(1-n),o=Math.sqrt(n);return t[0]=e*Math.sin(2*Math.PI*a),t[1]=e*Math.cos(2*Math.PI*a),t[2]=o*Math.sin(2*Math.PI*u),t[3]=o*Math.cos(2*Math.PI*u),t},invert:function(t,n){var a=n[0],r=n[1],u=n[2],e=n[3],o=a*a+r*r+u*u+e*e,i=o?1/o:0;return t[0]=-a*i,t[1]=-r*i,t[2]=-u*i,t[3]=e*i,t},conjugate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},fromMat3:Vt,fromEuler:function(t,n,a,r){var u=.5*Math.PI/180;n*=u,a*=u,r*=u;var e=Math.sin(n),o=Math.cos(n),i=Math.sin(a),c=Math.cos(a),h=Math.sin(r),s=Math.cos(r);return t[0]=e*c*s-o*i*h,t[1]=o*i*s+e*c*h,t[2]=o*c*h-e*i*s,t[3]=o*c*s+e*i*h,t},str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},clone:Nt,fromValues:kt,copy:Ut,set:Wt,add:Ct,mul:Gt,scale:Ht,dot:Jt,lerp:Kt,length:$t,len:tn,squaredLength:nn,sqrLen:an,normalize:rn,exactEquals:un,equals:en,rotationTo:on,sqlerp:cn,setAxes:hn});function Mn(t,n,a){var r=.5*a[0],u=.5*a[1],e=.5*a[2],o=n[0],i=n[1],c=n[2],h=n[3];return t[0]=o,t[1]=i,t[2]=c,t[3]=h,t[4]=r*h+u*c-e*i,t[5]=u*h+e*o-r*c,t[6]=e*h+r*i-u*o,t[7]=-r*o-u*i-e*c,t}function fn(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}var ln=Ut;var vn=Ut;function bn(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=a[4],c=a[5],h=a[6],s=a[7],M=n[4],f=n[5],l=n[6],v=n[7],b=a[0],m=a[1],d=a[2],x=a[3];return t[0]=r*x+o*b+u*d-e*m,t[1]=u*x+o*m+e*b-r*d,t[2]=e*x+o*d+r*m-u*b,t[3]=o*x-r*b-u*m-e*d,t[4]=r*s+o*i+u*h-e*c+M*x+v*b+f*d-l*m,t[5]=u*s+o*c+e*i-r*h+f*x+v*m+l*b-M*d,t[6]=e*s+o*h+r*c-u*i+l*x+v*d+M*m-f*b,t[7]=o*s-r*i-u*c-e*h+v*x-M*b-f*m-l*d,t}var mn=bn;var dn=Jt;var xn=$t,pn=xn,yn=nn,qn=yn;var gn=Object.freeze({create:function(){var t=new a(8);return a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},clone:function(t){var n=new a(8);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n},fromValues:function(t,n,r,u,e,o,i,c){var h=new a(8);return h[0]=t,h[1]=n,h[2]=r,h[3]=u,h[4]=e,h[5]=o,h[6]=i,h[7]=c,h},fromRotationTranslationValues:function(t,n,r,u,e,o,i){var c=new a(8);c[0]=t,c[1]=n,c[2]=r,c[3]=u;var h=.5*e,s=.5*o,M=.5*i;return c[4]=h*u+s*r-M*n,c[5]=s*u+M*t-h*r,c[6]=M*u+h*n-s*t,c[7]=-h*t-s*n-M*r,c},fromRotationTranslation:Mn,fromTranslation:function(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t},fromRotation:function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},fromMat4:function(t,n){var r=jt();P(r,n);var u=new a(3);return R(u,n),Mn(t,r,u),t},copy:fn,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},set:function(t,n,a,r,u,e,o,i,c){return t[0]=n,t[1]=a,t[2]=r,t[3]=u,t[4]=e,t[5]=o,t[6]=i,t[7]=c,t},getReal:ln,getDual:function(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t},setReal:vn,setDual:function(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t},getTranslation:function(t,n){var a=n[4],r=n[5],u=n[6],e=n[7],o=-n[0],i=-n[1],c=-n[2],h=n[3];return t[0]=2*(a*h+e*o+r*c-u*i),t[1]=2*(r*h+e*i+u*o-a*c),t[2]=2*(u*h+e*c+a*i-r*o),t},translate:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=.5*a[0],c=.5*a[1],h=.5*a[2],s=n[4],M=n[5],f=n[6],l=n[7];return t[0]=r,t[1]=u,t[2]=e,t[3]=o,t[4]=o*i+u*h-e*c+s,t[5]=o*c+e*i-r*h+M,t[6]=o*h+r*c-u*i+f,t[7]=-r*i-u*c-e*h+l,t},rotateX:function(t,n,a){var r=-n[0],u=-n[1],e=-n[2],o=n[3],i=n[4],c=n[5],h=n[6],s=n[7],M=i*o+s*r+c*e-h*u,f=c*o+s*u+h*r-i*e,l=h*o+s*e+i*u-c*r,v=s*o-i*r-c*u-h*e;return Et(t,n,a),r=t[0],u=t[1],e=t[2],o=t[3],t[4]=M*o+v*r+f*e-l*u,t[5]=f*o+v*u+l*r-M*e,t[6]=l*o+v*e+M*u-f*r,t[7]=v*o-M*r-f*u-l*e,t},rotateY:function(t,n,a){var r=-n[0],u=-n[1],e=-n[2],o=n[3],i=n[4],c=n[5],h=n[6],s=n[7],M=i*o+s*r+c*e-h*u,f=c*o+s*u+h*r-i*e,l=h*o+s*e+i*u-c*r,v=s*o-i*r-c*u-h*e;return Ot(t,n,a),r=t[0],u=t[1],e=t[2],o=t[3],t[4]=M*o+v*r+f*e-l*u,t[5]=f*o+v*u+l*r-M*e,t[6]=l*o+v*e+M*u-f*r,t[7]=v*o-M*r-f*u-l*e,t},rotateZ:function(t,n,a){var r=-n[0],u=-n[1],e=-n[2],o=n[3],i=n[4],c=n[5],h=n[6],s=n[7],M=i*o+s*r+c*e-h*u,f=c*o+s*u+h*r-i*e,l=h*o+s*e+i*u-c*r,v=s*o-i*r-c*u-h*e;return Tt(t,n,a),r=t[0],u=t[1],e=t[2],o=t[3],t[4]=M*o+v*r+f*e-l*u,t[5]=f*o+v*u+l*r-M*e,t[6]=l*o+v*e+M*u-f*r,t[7]=v*o-M*r-f*u-l*e,t},rotateByQuatAppend:function(t,n,a){var r=a[0],u=a[1],e=a[2],o=a[3],i=n[0],c=n[1],h=n[2],s=n[3];return t[0]=i*o+s*r+c*e-h*u,t[1]=c*o+s*u+h*r-i*e,t[2]=h*o+s*e+i*u-c*r,t[3]=s*o-i*r-c*u-h*e,i=n[4],c=n[5],h=n[6],s=n[7],t[4]=i*o+s*r+c*e-h*u,t[5]=c*o+s*u+h*r-i*e,t[6]=h*o+s*e+i*u-c*r,t[7]=s*o-i*r-c*u-h*e,t},rotateByQuatPrepend:function(t,n,a){var r=n[0],u=n[1],e=n[2],o=n[3],i=a[0],c=a[1],h=a[2],s=a[3];return t[0]=r*s+o*i+u*h-e*c,t[1]=u*s+o*c+e*i-r*h,t[2]=e*s+o*h+r*c-u*i,t[3]=o*s-r*i-u*c-e*h,i=a[4],c=a[5],h=a[6],s=a[7],t[4]=r*s+o*i+u*h-e*c,t[5]=u*s+o*c+e*i-r*h,t[6]=e*s+o*h+r*c-u*i,t[7]=o*s-r*i-u*c-e*h,t},rotateAroundAxis:function(t,a,r,u){if(Math.abs(u)<n)return fn(t,a);var e=Math.hypot(r[0],r[1],r[2]);u*=.5;var o=Math.sin(u),i=o*r[0]/e,c=o*r[1]/e,h=o*r[2]/e,s=Math.cos(u),M=a[0],f=a[1],l=a[2],v=a[3];t[0]=M*s+v*i+f*h-l*c,t[1]=f*s+v*c+l*i-M*h,t[2]=l*s+v*h+M*c-f*i,t[3]=v*s-M*i-f*c-l*h;var b=a[4],m=a[5],d=a[6],x=a[7];return t[4]=b*s+x*i+m*h-d*c,t[5]=m*s+x*c+d*i-b*h,t[6]=d*s+x*h+b*c-m*i,t[7]=x*s-b*i-m*c-d*h,t},add:function(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t[3]=n[3]+a[3],t[4]=n[4]+a[4],t[5]=n[5]+a[5],t[6]=n[6]+a[6],t[7]=n[7]+a[7],t},multiply:bn,mul:mn,scale:function(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t},dot:dn,lerp:function(t,n,a,r){var u=1-r;return dn(n,a)<0&&(r=-r),t[0]=n[0]*u+a[0]*r,t[1]=n[1]*u+a[1]*r,t[2]=n[2]*u+a[2]*r,t[3]=n[3]*u+a[3]*r,t[4]=n[4]*u+a[4]*r,t[5]=n[5]*u+a[5]*r,t[6]=n[6]*u+a[6]*r,t[7]=n[7]*u+a[7]*r,t},invert:function(t,n){var a=yn(n);return t[0]=-n[0]/a,t[1]=-n[1]/a,t[2]=-n[2]/a,t[3]=n[3]/a,t[4]=-n[4]/a,t[5]=-n[5]/a,t[6]=-n[6]/a,t[7]=n[7]/a,t},conjugate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t},length:xn,len:pn,squaredLength:yn,sqrLen:qn,normalize:function(t,n){var a=yn(n);if(a>0){a=Math.sqrt(a);var r=n[0]/a,u=n[1]/a,e=n[2]/a,o=n[3]/a,i=n[4],c=n[5],h=n[6],s=n[7],M=r*i+u*c+e*h+o*s;t[0]=r,t[1]=u,t[2]=e,t[3]=o,t[4]=(i-r*M)/a,t[5]=(c-u*M)/a,t[6]=(h-e*M)/a,t[7]=(s-o*M)/a}return t},str:function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]},equals:function(t,a){var r=t[0],u=t[1],e=t[2],o=t[3],i=t[4],c=t[5],h=t[6],s=t[7],M=a[0],f=a[1],l=a[2],v=a[3],b=a[4],m=a[5],d=a[6],x=a[7];return Math.abs(r-M)<=n*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(u-f)<=n*Math.max(1,Math.abs(u),Math.abs(f))&&Math.abs(e-l)<=n*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(o-v)<=n*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-b)<=n*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(c-m)<=n*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(h-d)<=n*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(s-x)<=n*Math.max(1,Math.abs(s),Math.abs(x))}});function An(){var t=new a(2);return a!=Float32Array&&(t[0]=0,t[1]=0),t}function wn(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t}function Rn(t,n,a){return t[0]=n[0]*a[0],t[1]=n[1]*a[1],t}function zn(t,n,a){return t[0]=n[0]/a[0],t[1]=n[1]/a[1],t}function Pn(t,n){var a=n[0]-t[0],r=n[1]-t[1];return Math.hypot(a,r)}function jn(t,n){var a=n[0]-t[0],r=n[1]-t[1];return a*a+r*r}function In(t){var n=t[0],a=t[1];return Math.hypot(n,a)}function Sn(t){var n=t[0],a=t[1];return n*n+a*a}var En=In,On=wn,Tn=Rn,Dn=zn,Fn=Pn,Ln=jn,Vn=Sn,Qn=function(){var t=An();return function(n,a,r,u,e,o){var i,c;for(a||(a=2),r||(r=0),c=u?Math.min(u*a+r,n.length):n.length,i=r;i<c;i+=a)t[0]=n[i],t[1]=n[i+1],e(t,t,o),n[i]=t[0],n[i+1]=t[1];return n}}(),Yn=Object.freeze({create:An,clone:function(t){var n=new a(2);return n[0]=t[0],n[1]=t[1],n},fromValues:function(t,n){var r=new a(2);return r[0]=t,r[1]=n,r},copy:function(t,n){return t[0]=n[0],t[1]=n[1],t},set:function(t,n,a){return t[0]=n,t[1]=a,t},add:function(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t},subtract:wn,multiply:Rn,divide:zn,ceil:function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},floor:function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},min:function(t,n,a){return t[0]=Math.min(n[0],a[0]),t[1]=Math.min(n[1],a[1]),t},max:function(t,n,a){return t[0]=Math.max(n[0],a[0]),t[1]=Math.max(n[1],a[1]),t},round:function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},scale:function(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t},scaleAndAdd:function(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t},distance:Pn,squaredDistance:jn,length:In,squaredLength:Sn,negate:function(t,n){return t[0]=-n[0],t[1]=-n[1],t},inverse:function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},normalize:function(t,n){var a=n[0],r=n[1],u=a*a+r*r;return u>0&&(u=1/Math.sqrt(u)),t[0]=n[0]*u,t[1]=n[1]*u,t},dot:function(t,n){return t[0]*n[0]+t[1]*n[1]},cross:function(t,n,a){var r=n[0]*a[1]-n[1]*a[0];return t[0]=t[1]=0,t[2]=r,t},lerp:function(t,n,a,r){var u=n[0],e=n[1];return t[0]=u+r*(a[0]-u),t[1]=e+r*(a[1]-e),t},random:function(t,n){n=n||1;var a=2*r()*Math.PI;return t[0]=Math.cos(a)*n,t[1]=Math.sin(a)*n,t},transformMat2:function(t,n,a){var r=n[0],u=n[1];return t[0]=a[0]*r+a[2]*u,t[1]=a[1]*r+a[3]*u,t},transformMat2d:function(t,n,a){var r=n[0],u=n[1];return t[0]=a[0]*r+a[2]*u+a[4],t[1]=a[1]*r+a[3]*u+a[5],t},transformMat3:function(t,n,a){var r=n[0],u=n[1];return t[0]=a[0]*r+a[3]*u+a[6],t[1]=a[1]*r+a[4]*u+a[7],t},transformMat4:function(t,n,a){var r=n[0],u=n[1];return t[0]=a[0]*r+a[4]*u+a[12],t[1]=a[1]*r+a[5]*u+a[13],t},rotate:function(t,n,a,r){var u=n[0]-a[0],e=n[1]-a[1],o=Math.sin(r),i=Math.cos(r);return t[0]=u*i-e*o+a[0],t[1]=u*o+e*i+a[1],t},angle:function(t,n){var a=t[0],r=t[1],u=n[0],e=n[1],o=a*a+r*r;o>0&&(o=1/Math.sqrt(o));var i=u*u+e*e;i>0&&(i=1/Math.sqrt(i));var c=(a*u+r*e)*o*i;return c>1?0:c<-1?Math.PI:Math.acos(c)},zero:function(t){return t[0]=0,t[1]=0,t},str:function(t){return"vec2("+t[0]+", "+t[1]+")"},exactEquals:function(t,n){return t[0]===n[0]&&t[1]===n[1]},equals:function(t,a){var r=t[0],u=t[1],e=a[0],o=a[1];return Math.abs(r-e)<=n*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(u-o)<=n*Math.max(1,Math.abs(u),Math.abs(o))},len:En,sub:On,mul:Tn,div:Dn,dist:Fn,sqrDist:Ln,sqrLen:Vn,forEach:Qn});t.glMatrix=e,t.mat2=s,t.mat2d=b,t.mat3=q,t.mat4=E,t.quat=sn,t.quat2=gn,t.vec2=Yn,t.vec3=$,t.vec4=Pt,Object.defineProperty(t,"__esModule",{value:!0})});

// ["glMatrix", "mat2", "mat2d", "mat3", "mat4", "quat", "quat2", "vec2", "vec3", "vec4"]
window.glMatrix = glMatrix;
window.mat2 = glMatrix.mat2;
window.mat2d = glMatrix.mat2d;
window.mat3 = glMatrix.mat3;
window.mat4 = glMatrix.mat4;
window.quat = glMatrix.quat;
window.quat2 = glMatrix.quat2;
window.vec2 = glMatrix.vec2;
window.vec3 = glMatrix.vec3;
window.vec4 = glMatrix.vec4;



var CABLES = CABLES || {}; CABLES.build = {"timestamp":1656574516241,"created":"2022-06-30T07:35:16.241Z","git":{"branch":"master","commit":"abda58d5c2d1731d2d3526a32ffa23ace4933120","date":null,"message":null}};
if(!CABLES.exportedPatches)CABLES.exportedPatches={};CABLES.exportedPatches["oOsQt7"]={settings:{opExample:[],licence:"none",isPublic:false},ops:[{objName:"Ops.Gl.Shader.CustomShader_v2",id:"0",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat sphere(vec2 uv, vec2 c, float r) {\n\tuv -= c;\n\tuv /= r;\n\treturn 2.0*r*sqrt(max(0.0, 1.0-dot(uv, uv)));\n}\nfloat beehive_dist(vec2 p){\n\tvec2 s = vec2(1.0, 1.73205080757);\n    p = abs(p);\n    return max(dot(p, s*.5), p.x);\n}\n\nvec4 beehive_center(vec2 p) {\n\tvec2 s = vec2(1.0, 1.73205080757);\n    vec4 hC = floor(vec4(p, p - vec2(.5, 1))/vec4(s,s)) + .5;\n    vec4 h = vec4(p - hC.xy*s, p - (hC.zw + .5)*s);\n    return dot(h.xy, h.xy)<dot(h.zw, h.zw) ? vec4(h.xy, hC.xy) : vec4(h.zw, hC.zw + 9.73);\n}\nvec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nconst float p_o490056_gradient_0_pos = 0.000000000;\nconst float p_o490056_gradient_0_r = 1.000000000;\nconst float p_o490056_gradient_0_g = 0.000000000;\nconst float p_o490056_gradient_0_b = 0.000000000;\nconst float p_o490056_gradient_0_a = 1.000000000;\nconst float p_o490056_gradient_1_pos = 0.254545000;\nconst float p_o490056_gradient_1_r = 1.000000000;\nconst float p_o490056_gradient_1_g = 0.968750000;\nconst float p_o490056_gradient_1_b = 0.000000000;\nconst float p_o490056_gradient_1_a = 1.000000000;\nconst float p_o490056_gradient_2_pos = 0.527273000;\nconst float p_o490056_gradient_2_r = 0.000000000;\nconst float p_o490056_gradient_2_g = 1.000000000;\nconst float p_o490056_gradient_2_b = 0.125000000;\nconst float p_o490056_gradient_2_a = 1.000000000;\nconst float p_o490056_gradient_3_pos = 0.772727000;\nconst float p_o490056_gradient_3_r = 0.000000000;\nconst float p_o490056_gradient_3_g = 0.062500000;\nconst float p_o490056_gradient_3_b = 1.000000000;\nconst float p_o490056_gradient_3_a = 1.000000000;\nconst float p_o490056_gradient_4_pos = 1.000000000;\nconst float p_o490056_gradient_4_r = 0.843750000;\nconst float p_o490056_gradient_4_g = 0.000000000;\nconst float p_o490056_gradient_4_b = 1.000000000;\nconst float p_o490056_gradient_4_a = 1.000000000;\nvec4 o490056_gradient_gradient_fct(float x) {\n  if (x < p_o490056_gradient_0_pos) {\n    return vec4(p_o490056_gradient_0_r,p_o490056_gradient_0_g,p_o490056_gradient_0_b,p_o490056_gradient_0_a);\n  } else if (x < p_o490056_gradient_1_pos) {\n    return mix(vec4(p_o490056_gradient_0_r,p_o490056_gradient_0_g,p_o490056_gradient_0_b,p_o490056_gradient_0_a), vec4(p_o490056_gradient_1_r,p_o490056_gradient_1_g,p_o490056_gradient_1_b,p_o490056_gradient_1_a), ((x-p_o490056_gradient_0_pos)/(p_o490056_gradient_1_pos-p_o490056_gradient_0_pos)));\n  } else if (x < p_o490056_gradient_2_pos) {\n    return mix(vec4(p_o490056_gradient_1_r,p_o490056_gradient_1_g,p_o490056_gradient_1_b,p_o490056_gradient_1_a), vec4(p_o490056_gradient_2_r,p_o490056_gradient_2_g,p_o490056_gradient_2_b,p_o490056_gradient_2_a), ((x-p_o490056_gradient_1_pos)/(p_o490056_gradient_2_pos-p_o490056_gradient_1_pos)));\n  } else if (x < p_o490056_gradient_3_pos) {\n    return mix(vec4(p_o490056_gradient_2_r,p_o490056_gradient_2_g,p_o490056_gradient_2_b,p_o490056_gradient_2_a), vec4(p_o490056_gradient_3_r,p_o490056_gradient_3_g,p_o490056_gradient_3_b,p_o490056_gradient_3_a), ((x-p_o490056_gradient_2_pos)/(p_o490056_gradient_3_pos-p_o490056_gradient_2_pos)));\n  } else if (x < p_o490056_gradient_4_pos) {\n    return mix(vec4(p_o490056_gradient_3_r,p_o490056_gradient_3_g,p_o490056_gradient_3_b,p_o490056_gradient_3_a), vec4(p_o490056_gradient_4_r,p_o490056_gradient_4_g,p_o490056_gradient_4_b,p_o490056_gradient_4_a), ((x-p_o490056_gradient_3_pos)/(p_o490056_gradient_4_pos-p_o490056_gradient_3_pos)));\n  }\n  return vec4(p_o490056_gradient_4_r,p_o490056_gradient_4_g,p_o490056_gradient_4_b,p_o490056_gradient_4_a);\n}\nconst float p_o370343_cx = 0.500000000;\nconst float p_o370343_cy = 0.500000000;\nconst float p_o370343_r = 0.030000000;\nconst float p_o15985_cx = 0.500000000;\nconst float p_o15985_cy = 0.500000000;\nconst float p_o15985_r = 0.520000000;\nconst float seed_o20146 = 0.000000000;\nconst float p_o20146_sx = 4.000000000;\nconst float p_o20146_sy = 4.000000000;\nvec3 o448778_input_in(vec2 uv, float _seed_variation_) {\nfloat o370343_0_1_f = sphere((uv), vec2(p_o370343_cx, p_o370343_cy), p_o370343_r);\nfloat o15985_0_1_f = sphere((uv), vec2(p_o15985_cx, p_o15985_cy), p_o15985_r);\nvec2 o20146_0_uv = (uv)*vec2(p_o20146_sx, p_o20146_sy*1.73205080757);\nvec4 o20146_0_center = beehive_center(o20146_0_uv);float o20146_0_1_f = 1.0-2.0*beehive_dist(o20146_0_center.xy);\nvec4 o26946_0_s1 = vec4(((uv)).x, 1.0, 1.0, 1.0);\nvec4 o26946_0_s2 = vec4(vec3(o15985_0_1_f), 1.0);\nfloat o26946_0_a = (abs(iTime*0.4)*sin(iTime))*o20146_0_1_f;\nvec4 o26946_0_2_rgba = vec4(blend_screen((uv), o26946_0_s1.rgb, o26946_0_s2.rgb, o26946_0_a*o26946_0_s1.a), min(1.0, o26946_0_s2.a+o26946_0_a*o26946_0_s1.a));\nvec4 o369032_0_s1 = vec4(vec3(o370343_0_1_f), 1.0);\nvec4 o369032_0_s2 = o26946_0_2_rgba;\nfloat o369032_0_a = (abs(iTime*0.4)*sin(iTime))*1.0;\nvec4 o369032_0_2_rgba = vec4(blend_screen((uv), o369032_0_s1.rgb, o369032_0_s2.rgb, o369032_0_a*o369032_0_s1.a), min(1.0, o369032_0_s2.a+o369032_0_a*o369032_0_s1.a));\n\nreturn ((o369032_0_2_rgba).rgb);\n}\nfloat o448778_fct(vec2 uv, float _seed_variation_) {\n\tvec2 e = vec2(1.0/64.000000000, 0.0);\n\tvec3 rv = 4.0*o448778_input_in(uv, _seed_variation_);\n\trv -= o448778_input_in(uv+e.xy, _seed_variation_);\n\trv -= o448778_input_in(uv-e.xy, _seed_variation_);\n\trv -= o448778_input_in(uv+e.yx, _seed_variation_);\n\trv -= o448778_input_in(uv-e.yx, _seed_variation_);\n\trv = abs(rv);\n\treturn max(rv.x, max(rv.y ,rv.z))*64.000000000;\n}\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o448778_0_1_f = clamp(o448778_fct((UV), _seed_variation_), 0.0, 1.0);\nfloat o370343_0_1_f = sphere((UV), vec2(p_o370343_cx, p_o370343_cy), p_o370343_r);\nfloat o15985_0_1_f = sphere((UV), vec2(p_o15985_cx, p_o15985_cy), p_o15985_r);\nvec2 o20146_0_uv = (UV)*vec2(p_o20146_sx, p_o20146_sy*1.73205080757);\nvec4 o20146_0_center = beehive_center(o20146_0_uv);float o20146_0_1_f = 1.0-2.0*beehive_dist(o20146_0_center.xy);\nvec4 o26946_0_s1 = vec4(((UV)).x, 1.0, 1.0, 1.0);\nvec4 o26946_0_s2 = vec4(vec3(o15985_0_1_f), 1.0);\nfloat o26946_0_a = (abs(iTime*0.4)*sin(iTime))*o20146_0_1_f;\nvec4 o26946_0_2_rgba = vec4(blend_screen((UV), o26946_0_s1.rgb, o26946_0_s2.rgb, o26946_0_a*o26946_0_s1.a), min(1.0, o26946_0_s2.a+o26946_0_a*o26946_0_s1.a));\nvec4 o369032_0_s1 = vec4(vec3(o370343_0_1_f), 1.0);\nvec4 o369032_0_s2 = o26946_0_2_rgba;\nfloat o369032_0_a = (abs(iTime*0.4)*sin(iTime))*1.0;\nvec4 o369032_0_2_rgba = vec4(blend_screen((UV), o369032_0_s1.rgb, o369032_0_s2.rgb, o369032_0_a*o369032_0_s1.a), min(1.0, o369032_0_s2.a+o369032_0_a*o369032_0_s1.a));\nvec4 o452611_0_s1 = vec4(vec3(o448778_0_1_f), 1.0);\nvec4 o452611_0_s2 = o369032_0_2_rgba;\nfloat o452611_0_a = (round(iTime*0.9)*sin(iTime*0.2))*1.0;\nvec4 o452611_0_2_rgba = vec4(blend_multiply((UV), o452611_0_s1.rgb, o452611_0_s2.rgb, o452611_0_a*o452611_0_s1.a), min(1.0, o452611_0_s2.a+o452611_0_a*o452611_0_s1.a));\nvec4 o490056_0_1_rgba = o490056_gradient_gradient_fct((dot((o452611_0_2_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o490056_0_1_rgba;\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"1",objOut:"0"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"1",objOut:"0"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"1",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"10",objOut:"1"}]},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"5",objOut:"1"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"2",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:2.19},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"0",objOut:"2"},{portIn:"time",portOut:"Time",objIn:"11",objOut:"2"}]}]},{objName:"Ops.Sequence",id:"3",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"0",objOut:"3"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0}]},{objName:"Ops.Gl.MainLoop",id:"4",uiAttribs:{subPatch:0},portsIn:[{name:"FPS Limit",value:0},{name:"Reduce FPS not focussed",value:true},{name:"Reduce FPS loading",value:false},{name:"Clear",value:true},{name:"ClearAlpha",value:true},{name:"Fullscreen Button",value:false},{name:"Active",value:true},{name:"Hires Displays",value:false},{name:"Pixel Unit index",value:0},{name:"Pixel Unit",value:"Display"}],portsOut:[{name:"trigger",links:[{portIn:"Execute",portOut:"trigger",objIn:"35",objOut:"4"},{portIn:"render",portOut:"trigger",objIn:"114",objOut:"4"},{portIn:"Render",portOut:"trigger",objIn:"113",objOut:"4"},{portIn:"render",portOut:"trigger",objIn:"119",objOut:"4"},{portIn:"Render",portOut:"trigger",objIn:"367",objOut:"4"}]},{name:"width",value:640},{name:"height",value:320}]},{objName:"Ops.Ui.VizTexture",id:"5",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"7",objOut:"5"}]},{name:"Info",value:"640 x 320 32bit nearest repeatmir"}]},{objName:"Ops.Gl.Render2Texture",id:"6",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"use viewport size",value:true},{name:"texture width",value:640},{name:"texture height",value:320},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",value:0},{name:"texture"},{name:"textureDepth"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"7",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"37",objOut:"7"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"8",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"exe",portOut:"Next",objIn:"3",objOut:"8"},{portIn:"render",portOut:"Next",objIn:"7",objOut:"8"},{portIn:"Render",portOut:"Next",objIn:"39",objOut:"8"},{portIn:"exe",portOut:"Next",objIn:"110",objOut:"8"}]},{name:"texture_out",links:[{portIn:"Image",portOut:"texture_out",objIn:"38",objOut:"8"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"9",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"10",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"width",value:1},{name:"height",value:1},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"11",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"time"},{name:"SpeedX",value:4},{name:"SpeedY",value:8},{name:"RepeatX",value:57.62},{name:"RepeatY",value:11},{name:"Multiply",value:.01},{name:"Mask",value:0}],portsOut:[{name:"Trigger",value:0}]},{objName:"Ops.Trigger.TimedSequence",id:"12",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"current"},{name:"overwriteTime",value:false},{name:"ignoreInSubPatch",value:false}],portsOut:[{name:"triggerAlways",links:[{portIn:"Render",portOut:"triggerAlways",objIn:"19",objOut:"12"},{portIn:"Render",portOut:"triggerAlways",objIn:"29",objOut:"12"},{portIn:"Render",portOut:"triggerAlways",objIn:"58",objOut:"12"},{portIn:"Render",portOut:"triggerAlways",objIn:"84",objOut:"12"},{portIn:"Render",portOut:"triggerAlways",objIn:"8",objOut:"12"}]},{name:"Names"},{name:"currentKeyTime",value:0},{name:"Current",value:9},{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"9",objOut:"12"}]},{name:"trigger 1",links:[{portIn:"render",portOut:"trigger 1",objIn:"22",objOut:"12"}]},{name:"trigger 2",links:[{portIn:"render",portOut:"trigger 2",objIn:"32",objOut:"12"}]},{name:"trigger 3",value:0},{name:"trigger 4",links:[{portIn:"render",portOut:"trigger 4",objIn:"61",objOut:"12"}]},{name:"trigger 5",links:[{portIn:"render",portOut:"trigger 5",objIn:"64",objOut:"12"}]},{name:"trigger 6",links:[{portIn:"render",portOut:"trigger 6",objIn:"62",objOut:"12"}]},{name:"trigger 7",links:[{portIn:"render",portOut:"trigger 7",objIn:"135",objOut:"12"}]},{name:"trigger 8",links:[{portIn:"render",portOut:"trigger 8",objIn:"150",objOut:"12"}]},{name:"trigger 9",links:[{portIn:"render",portOut:"trigger 9",objIn:"395",objOut:"12"}]},{name:"trigger 10",value:0},{name:"trigger 11",links:[{portIn:"render",portOut:"trigger 11",objIn:"788",objOut:"12"}]},{name:"trigger 12",links:[{portIn:"render",portOut:"trigger 12",objIn:"802",objOut:"12"}]},{name:"trigger 13",links:[{portIn:"render",portOut:"trigger 13",objIn:"819",objOut:"12"}]},{name:"trigger 14",value:0},{name:"trigger 15",value:0},{name:"trigger 16",value:0},{name:"trigger 17",value:0},{name:"trigger 18",value:0},{name:"trigger 19",value:0},{name:"trigger 20",value:0},{name:"trigger 21",value:0},{name:"trigger 22",value:0},{name:"trigger 23",value:0},{name:"trigger 24",value:0},{name:"trigger 25",value:0},{name:"trigger 26",value:0},{name:"trigger 27",value:0},{name:"trigger 28",value:0},{name:"trigger 29",links:[{portIn:"exe",portOut:"trigger 29",objIn:"758",objOut:"12"}]},{name:"trigger 30",links:[{portIn:"in0 Ops.Trigger.TimedSequence trigger 30",portOut:"trigger 30",objIn:"279",objOut:"12"}]},{name:"trigger 31",links:[{portIn:"in0 Ops.Trigger.TimedSequence triggerAlways",portOut:"trigger 31",objIn:"156",objOut:"12"}]}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"13",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat sphere(vec2 uv, vec2 c, float r) {\n\tuv -= c;\n\tuv /= r;\n\treturn 2.0*r*sqrt(max(0.0, 1.0-dot(uv, uv)));\n}\nfloat beehive_dist(vec2 p){\n\tvec2 s = vec2(1.0, 1.73205080757);\n    p = abs(p);\n    return max(dot(p, s*.5), p.x);\n}\n\nvec4 beehive_center(vec2 p) {\n\tvec2 s = vec2(1.0, 1.73205080757);\n    vec4 hC = floor(vec4(p, p - vec2(.5, 1))/vec4(s,s)) + .5;\n    vec4 h = vec4(p - hC.xy*s, p - (hC.zw + .5)*s);\n    return dot(h.xy, h.xy)<dot(h.zw, h.zw) ? vec4(h.xy, hC.xy) : vec4(h.zw, hC.zw + 9.73);\n}\nvec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nconst float p_o490056_gradient_0_pos = 0.000000000;\nconst float p_o490056_gradient_0_r = 1.000000000;\nconst float p_o490056_gradient_0_g = 0.000000000;\nconst float p_o490056_gradient_0_b = 0.000000000;\nconst float p_o490056_gradient_0_a = 1.000000000;\nconst float p_o490056_gradient_1_pos = 0.119755415;\nconst float p_o490056_gradient_1_r = 0.843750000;\nconst float p_o490056_gradient_1_g = 0.000000000;\nconst float p_o490056_gradient_1_b = 1.000000000;\nconst float p_o490056_gradient_1_a = 1.000000000;\nconst float p_o490056_gradient_2_pos = 0.488830844;\nconst float p_o490056_gradient_2_r = 0.000000000;\nconst float p_o490056_gradient_2_g = 0.000000000;\nconst float p_o490056_gradient_2_b = 0.000000000;\nconst float p_o490056_gradient_2_a = 1.000000000;\nconst float p_o490056_gradient_3_pos = 0.827149131;\nconst float p_o490056_gradient_3_r = 1.000000000;\nconst float p_o490056_gradient_3_g = 0.968750000;\nconst float p_o490056_gradient_3_b = 0.000000000;\nconst float p_o490056_gradient_3_a = 1.000000000;\nconst float p_o490056_gradient_4_pos = 0.980930120;\nconst float p_o490056_gradient_4_r = 0.000000000;\nconst float p_o490056_gradient_4_g = 0.062500000;\nconst float p_o490056_gradient_4_b = 1.000000000;\nconst float p_o490056_gradient_4_a = 1.000000000;\nvec4 o490056_gradient_gradient_fct(float x) {\n  if (x < p_o490056_gradient_0_pos) {\n    return vec4(p_o490056_gradient_0_r,p_o490056_gradient_0_g,p_o490056_gradient_0_b,p_o490056_gradient_0_a);\n  } else if (x < p_o490056_gradient_1_pos) {\n    return mix(vec4(p_o490056_gradient_0_r,p_o490056_gradient_0_g,p_o490056_gradient_0_b,p_o490056_gradient_0_a), vec4(p_o490056_gradient_1_r,p_o490056_gradient_1_g,p_o490056_gradient_1_b,p_o490056_gradient_1_a), ((x-p_o490056_gradient_0_pos)/(p_o490056_gradient_1_pos-p_o490056_gradient_0_pos)));\n  } else if (x < p_o490056_gradient_2_pos) {\n    return mix(vec4(p_o490056_gradient_1_r,p_o490056_gradient_1_g,p_o490056_gradient_1_b,p_o490056_gradient_1_a), vec4(p_o490056_gradient_2_r,p_o490056_gradient_2_g,p_o490056_gradient_2_b,p_o490056_gradient_2_a), ((x-p_o490056_gradient_1_pos)/(p_o490056_gradient_2_pos-p_o490056_gradient_1_pos)));\n  } else if (x < p_o490056_gradient_3_pos) {\n    return mix(vec4(p_o490056_gradient_2_r,p_o490056_gradient_2_g,p_o490056_gradient_2_b,p_o490056_gradient_2_a), vec4(p_o490056_gradient_3_r,p_o490056_gradient_3_g,p_o490056_gradient_3_b,p_o490056_gradient_3_a), ((x-p_o490056_gradient_2_pos)/(p_o490056_gradient_3_pos-p_o490056_gradient_2_pos)));\n  } else if (x < p_o490056_gradient_4_pos) {\n    return mix(vec4(p_o490056_gradient_3_r,p_o490056_gradient_3_g,p_o490056_gradient_3_b,p_o490056_gradient_3_a), vec4(p_o490056_gradient_4_r,p_o490056_gradient_4_g,p_o490056_gradient_4_b,p_o490056_gradient_4_a), ((x-p_o490056_gradient_3_pos)/(p_o490056_gradient_4_pos-p_o490056_gradient_3_pos)));\n  }\n  return vec4(p_o490056_gradient_4_r,p_o490056_gradient_4_g,p_o490056_gradient_4_b,p_o490056_gradient_4_a);\n}\nconst float p_o370343_cx = 0.500000000;\nconst float p_o370343_cy = 0.500000000;\nconst float p_o370343_r = 0.030000000;\nconst float p_o15985_cx = 0.500000000;\nconst float p_o15985_cy = 0.500000000;\nconst float p_o15985_r = 0.520000000;\nconst float seed_o20146 = 0.000000000;\nvec3 o448778_input_in(vec2 uv, float _seed_variation_) {\nfloat o370343_0_1_f = sphere((uv), vec2(p_o370343_cx, p_o370343_cy), p_o370343_r);\nfloat o15985_0_1_f = sphere((uv), vec2(p_o15985_cx, p_o15985_cy), p_o15985_r);\nvec2 o20146_0_uv = (uv)*vec2((sin(iTime*0.7)), (sin(iTime*0.7))*1.73205080757);\nvec4 o20146_0_center = beehive_center(o20146_0_uv);float o20146_0_1_f = 1.0-2.0*beehive_dist(o20146_0_center.xy);\nvec4 o26946_0_s1 = vec4(((uv)).x, 1.0, 1.0, 1.0);\nvec4 o26946_0_s2 = vec4(vec3(o15985_0_1_f), 1.0);\nfloat o26946_0_a = (abs(iTime*0.4)*sin(iTime))*o20146_0_1_f;\nvec4 o26946_0_2_rgba = vec4(blend_overlay((uv), o26946_0_s1.rgb, o26946_0_s2.rgb, o26946_0_a*o26946_0_s1.a), min(1.0, o26946_0_s2.a+o26946_0_a*o26946_0_s1.a));\nvec4 o369032_0_s1 = vec4(vec3(o370343_0_1_f), 1.0);\nvec4 o369032_0_s2 = o26946_0_2_rgba;\nfloat o369032_0_a = (abs(iTime*0.4)*sin(iTime))*1.0;\nvec4 o369032_0_2_rgba = vec4(blend_burn((uv), o369032_0_s1.rgb, o369032_0_s2.rgb, o369032_0_a*o369032_0_s1.a), min(1.0, o369032_0_s2.a+o369032_0_a*o369032_0_s1.a));\n\nreturn ((o369032_0_2_rgba).rgb);\n}\nfloat o448778_fct(vec2 uv, float _seed_variation_) {\n\tvec2 e = vec2(1.0/64.000000000, 0.0);\n\tvec3 rv = 4.0*o448778_input_in(uv, _seed_variation_);\n\trv -= o448778_input_in(uv+e.xy, _seed_variation_);\n\trv -= o448778_input_in(uv-e.xy, _seed_variation_);\n\trv -= o448778_input_in(uv+e.yx, _seed_variation_);\n\trv -= o448778_input_in(uv-e.yx, _seed_variation_);\n\trv = abs(rv);\n\treturn max(rv.x, max(rv.y ,rv.z))*64.000000000;\n}\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o448778_0_1_f = clamp(o448778_fct((UV), _seed_variation_), 0.0, 1.0);\nfloat o370343_0_1_f = sphere((UV), vec2(p_o370343_cx, p_o370343_cy), p_o370343_r);\nfloat o15985_0_1_f = sphere((UV), vec2(p_o15985_cx, p_o15985_cy), p_o15985_r);\nvec2 o20146_0_uv = (UV)*vec2((sin(iTime*0.7)), (sin(iTime*0.7))*1.73205080757);\nvec4 o20146_0_center = beehive_center(o20146_0_uv);float o20146_0_1_f = 1.0-2.0*beehive_dist(o20146_0_center.xy);\nvec4 o26946_0_s1 = vec4(((UV)).x, 1.0, 1.0, 1.0);\nvec4 o26946_0_s2 = vec4(vec3(o15985_0_1_f), 1.0);\nfloat o26946_0_a = (abs(iTime*0.4)*sin(iTime))*o20146_0_1_f;\nvec4 o26946_0_2_rgba = vec4(blend_overlay((UV), o26946_0_s1.rgb, o26946_0_s2.rgb, o26946_0_a*o26946_0_s1.a), min(1.0, o26946_0_s2.a+o26946_0_a*o26946_0_s1.a));\nvec4 o369032_0_s1 = vec4(vec3(o370343_0_1_f), 1.0);\nvec4 o369032_0_s2 = o26946_0_2_rgba;\nfloat o369032_0_a = (abs(iTime*0.4)*sin(iTime))*1.0;\nvec4 o369032_0_2_rgba = vec4(blend_burn((UV), o369032_0_s1.rgb, o369032_0_s2.rgb, o369032_0_a*o369032_0_s1.a), min(1.0, o369032_0_s2.a+o369032_0_a*o369032_0_s1.a));\nvec4 o452611_0_s1 = vec4(vec3(o448778_0_1_f), 1.0);\nvec4 o452611_0_s2 = o369032_0_2_rgba;\nfloat o452611_0_a = (round(iTime*0.9)*sin(iTime*0.2))*1.0;\nvec4 o452611_0_2_rgba = vec4(blend_hard_light((UV), o452611_0_s1.rgb, o452611_0_s2.rgb, o452611_0_a*o452611_0_s1.a), min(1.0, o452611_0_s2.a+o452611_0_a*o452611_0_s1.a));\nvec4 o490056_0_1_rgba = o490056_gradient_gradient_fct((dot((o452611_0_2_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o490056_0_1_rgba;\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"14",objOut:"13"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"14",objOut:"13"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"14",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"20",objOut:"14"}]},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"17",objOut:"14"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"15",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:.69},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"13",objOut:"15"},{portIn:"time",portOut:"Time",objIn:"21",objOut:"15"}]}]},{objName:"Ops.Sequence",id:"16",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"13",objOut:"16"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0}]},{objName:"Ops.Ui.VizTexture",id:"17",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"18",objOut:"17"}]},{name:"Info",value:"640 x 320 32bit nearest repeatmir"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"18",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"21",objOut:"18"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"19",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:false},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"18",objOut:"19"},{portIn:"exe",portOut:"Next",objIn:"16",objOut:"19"},{portIn:"exe",portOut:"Next",objIn:"107",objOut:"19"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"22",objOut:"19"}]},{name:"Aspect Ratio",value:1.3333333333333333}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"20",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"width",value:1},{name:"height",value:1},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"21",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"time"},{name:"SpeedX",value:4},{name:"SpeedY",value:8},{name:"RepeatX",value:57.62},{name:"RepeatY",value:11},{name:"Multiply",value:.01},{name:"Mask",value:0}],portsOut:[{name:"Trigger",links:[{portIn:"render",portOut:"Trigger",objIn:"105",objOut:"21"}]}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"22",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"23",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat perlin(vec2 uv, vec2 size, int iterations, float persistence, float seed) {\n\tvec2 seed2 = rand2(vec2(seed, 1.0-seed));\n    float rv = 0.0;\n    float coef = 1.0;\n    float acc = 0.0;\n    for (int i = 0; i < iterations; ++i) {\n    \tvec2 step = vec2(1.0)/size;\n\t\tvec2 xy = floor(uv*size);\n        float f0 = rand(seed2+mod(xy, size));\n        float f1 = rand(seed2+mod(xy+vec2(1.0, 0.0), size));\n        float f2 = rand(seed2+mod(xy+vec2(0.0, 1.0), size));\n        float f3 = rand(seed2+mod(xy+vec2(1.0, 1.0), size));\n        vec2 mixval = smoothstep(0.0, 1.0, fract(uv*size));\n        rv += coef * mix(mix(f0, f1, mixval.x), mix(f2, f3, mixval.x), mixval.y);\n        acc += coef;\n        size *= 2.0;\n        coef *= persistence;\n    }\n    \n    return rv / acc;\n}\nvec2 transform(vec2 uv, vec2 translate, float rotate, vec2 scale, bool repeat) {\n \tvec2 rv;\n\tuv -= translate;\n\tuv -= vec2(0.5);\n\trv.x = cos(rotate)*uv.x + sin(rotate)*uv.y;\n\trv.y = -sin(rotate)*uv.x + cos(rotate)*uv.y;\n\trv /= scale;\n\trv += vec2(0.5);\n    if (repeat) {\n\t\treturn fract(rv);\n\t} else {\n\t\treturn clamp(rv, vec2(0.0), vec2(1.0));\n\t}\t\n}vec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nconst float p_o710689_gradient_0_pos = 0.000000000;\nconst float p_o710689_gradient_0_r = 1.000000000;\nconst float p_o710689_gradient_0_g = 0.000000000;\nconst float p_o710689_gradient_0_b = 0.000000000;\nconst float p_o710689_gradient_0_a = 1.000000000;\nconst float p_o710689_gradient_1_pos = 0.105021078;\nconst float p_o710689_gradient_1_r = 0.785156250;\nconst float p_o710689_gradient_1_g = 0.000000000;\nconst float p_o710689_gradient_1_b = 0.000000000;\nconst float p_o710689_gradient_1_a = 1.000000000;\nconst float p_o710689_gradient_2_pos = 0.494770119;\nconst float p_o710689_gradient_2_r = 0.000000000;\nconst float p_o710689_gradient_2_g = 1.000000000;\nconst float p_o710689_gradient_2_b = 0.125000000;\nconst float p_o710689_gradient_2_a = 1.000000000;\nconst float p_o710689_gradient_3_pos = 0.895845170;\nconst float p_o710689_gradient_3_r = 0.031250000;\nconst float p_o710689_gradient_3_g = 0.000000000;\nconst float p_o710689_gradient_3_b = 1.000000000;\nconst float p_o710689_gradient_3_a = 1.000000000;\nconst float p_o710689_gradient_4_pos = 1.000000000;\nconst float p_o710689_gradient_4_r = 0.000000000;\nconst float p_o710689_gradient_4_g = 0.062500000;\nconst float p_o710689_gradient_4_b = 1.000000000;\nconst float p_o710689_gradient_4_a = 1.000000000;\nvec4 o710689_gradient_gradient_fct(float x) {\n  if (x < p_o710689_gradient_0_pos) {\n    return vec4(p_o710689_gradient_0_r,p_o710689_gradient_0_g,p_o710689_gradient_0_b,p_o710689_gradient_0_a);\n  } else if (x < p_o710689_gradient_1_pos) {\n    return mix(vec4(p_o710689_gradient_0_r,p_o710689_gradient_0_g,p_o710689_gradient_0_b,p_o710689_gradient_0_a), vec4(p_o710689_gradient_1_r,p_o710689_gradient_1_g,p_o710689_gradient_1_b,p_o710689_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o710689_gradient_0_pos)/(p_o710689_gradient_1_pos-p_o710689_gradient_0_pos)));\n  } else if (x < p_o710689_gradient_2_pos) {\n    return mix(vec4(p_o710689_gradient_1_r,p_o710689_gradient_1_g,p_o710689_gradient_1_b,p_o710689_gradient_1_a), vec4(p_o710689_gradient_2_r,p_o710689_gradient_2_g,p_o710689_gradient_2_b,p_o710689_gradient_2_a), 0.5-0.5*cos(3.14159265359*(x-p_o710689_gradient_1_pos)/(p_o710689_gradient_2_pos-p_o710689_gradient_1_pos)));\n  } else if (x < p_o710689_gradient_3_pos) {\n    return mix(vec4(p_o710689_gradient_2_r,p_o710689_gradient_2_g,p_o710689_gradient_2_b,p_o710689_gradient_2_a), vec4(p_o710689_gradient_3_r,p_o710689_gradient_3_g,p_o710689_gradient_3_b,p_o710689_gradient_3_a), 0.5-0.5*cos(3.14159265359*(x-p_o710689_gradient_2_pos)/(p_o710689_gradient_3_pos-p_o710689_gradient_2_pos)));\n  } else if (x < p_o710689_gradient_4_pos) {\n    return mix(vec4(p_o710689_gradient_3_r,p_o710689_gradient_3_g,p_o710689_gradient_3_b,p_o710689_gradient_3_a), vec4(p_o710689_gradient_4_r,p_o710689_gradient_4_g,p_o710689_gradient_4_b,p_o710689_gradient_4_a), 0.5-0.5*cos(3.14159265359*(x-p_o710689_gradient_3_pos)/(p_o710689_gradient_4_pos-p_o710689_gradient_3_pos)));\n  }\n  return vec4(p_o710689_gradient_4_r,p_o710689_gradient_4_g,p_o710689_gradient_4_b,p_o710689_gradient_4_a);\n}\nconst float p_o755667_translate_y = 1.000000000;\nconst float p_o800540_translate_x = 1.000000000;\nconst float p_o800540_translate_y = 0.370000000;\nconst float p_o800540_rotate = 0.000000000;\nconst float p_o800540_scale_x = 1.000000000;\nconst float p_o800540_scale_y = 1.000000000;\nconst float seed_o800541 = 1093.000000000;\nconst float p_o800541_scale_x = 4.000000000;\nconst float p_o800541_scale_y = 4.000000000;\nconst float p_o800541_iterations = 2.000000000;\nconst float p_o800541_persistence = 0.100000000;\nconst float p_o695213_curve_0_x = 0.000000000;\nconst float p_o695213_curve_0_y = 1.000000000;\nconst float p_o695213_curve_0_ls = 0.000000000;\nconst float p_o695213_curve_0_rs = -1.000000000;\nconst float p_o695213_curve_1_x = 1.000000000;\nconst float p_o695213_curve_1_y = 0.000000000;\nconst float p_o695213_curve_1_ls = -1.000000000;\nconst float p_o695213_curve_1_rs = 0.000000000;\nfloat o695213_curve_curve_fct(float x) {\n{\nfloat dx = x - p_o695213_curve_0_x;\nfloat d = p_o695213_curve_1_x - p_o695213_curve_0_x;\nfloat t = dx/d;\nfloat omt = (1.0 - t);\nfloat omt2 = omt * omt;\nfloat omt3 = omt2 * omt;\nfloat t2 = t * t;\nfloat t3 = t2 * t;\nd /= 3.0;\nfloat y1 = p_o695213_curve_0_y;\nfloat yac = p_o695213_curve_0_y + d*p_o695213_curve_0_rs;\nfloat ybc = p_o695213_curve_1_y - d*p_o695213_curve_1_ls;\nfloat y2 = p_o695213_curve_1_y;\nreturn y1*omt3 + yac*omt2*t*3.0 + ybc*omt*t2*3.0 + y2*t3;\n}\n}\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o800541_0_1_f = perlin(((UV)-vec2((round(iTime*0.2*0.8)*sin(iTime*0.1*0.8)), p_o755667_translate_y)), vec2(p_o800541_scale_x, p_o800541_scale_y), int(p_o800541_iterations), p_o800541_persistence, (seed_o800541+_seed_variation_));\nfloat o800541_0_3_f = perlin((transform(((UV)-vec2((round(iTime*0.2*0.8)*sin(iTime*0.1*0.8)), p_o755667_translate_y)), vec2(p_o800540_translate_x*(2.0*o800541_0_1_f-1.0), p_o800540_translate_y*(2.0*o800541_0_1_f-1.0)), p_o800540_rotate*0.01745329251*(2.0*1.0-1.0), vec2(p_o800540_scale_x*(2.0*1.0-1.0), p_o800540_scale_y*(2.0*1.0-1.0)), true)), vec2(p_o800541_scale_x, p_o800541_scale_y), int(p_o800541_iterations), p_o800541_persistence, (seed_o800541+_seed_variation_));\nvec4 o800540_0_1_rgba = vec4(vec3(o800541_0_3_f), 1.0);\nvec4 o755667_0_1_rgba = o800540_0_1_rgba;\nfloat o695213_0_1_f = o695213_curve_curve_fct((dot((o755667_0_1_rgba).rgb, vec3(1.0))/3.0));\nvec4 o690393_0_s1 = o755667_0_1_rgba;\nvec4 o690393_0_s2 = vec4(1.0, ((UV)).y, 1.0, 1.0);\nfloat o690393_0_a = (abs(iTime*0.2)*sin(iTime*0.2))*o695213_0_1_f;\nvec4 o690393_0_2_rgba = vec4(blend_lighten((UV), o690393_0_s1.rgb, o690393_0_s2.rgb, o690393_0_a*o690393_0_s1.a), min(1.0, o690393_0_s2.a+o690393_0_a*o690393_0_s1.a));\nvec4 o710689_0_1_rgba = o710689_gradient_gradient_fct((dot((o690393_0_2_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o710689_0_1_rgba;\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"24",objOut:"23"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"24",objOut:"23"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"24",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"30",objOut:"24"}]},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"27",objOut:"24"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"25",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:3.39},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"23",objOut:"25"},{portIn:"time",portOut:"Time",objIn:"31",objOut:"25"}]}]},{objName:"Ops.Sequence",id:"26",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"23",objOut:"26"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0}]},{objName:"Ops.Ui.VizTexture",id:"27",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"28",objOut:"27"}]},{name:"Info",value:"640 x 320 32bit nearest repeatmir"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"28",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"31",objOut:"28"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"29",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:false},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"28",objOut:"29"},{portIn:"exe",portOut:"Next",objIn:"26",objOut:"29"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"32",objOut:"29"}]},{name:"Aspect Ratio",value:1.3333333333333333}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"30",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"width",value:1},{name:"height",value:1},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"31",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"time"},{name:"SpeedX",value:4},{name:"SpeedY",value:8},{name:"RepeatX",value:57.62},{name:"RepeatY",value:11},{name:"Multiply",value:.01},{name:"Mask",value:0}],portsOut:[{name:"Trigger",links:[{portIn:"render",portOut:"Trigger",objIn:"104",objOut:"31"}]}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"32",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Sidebar.Slider_v3",id:"33",uiAttribs:{subPatch:0},portsIn:[{name:"link",value:0},{name:"Text",value:"Slider"},{name:"Min",value:0},{name:"Max",value:4.04},{name:"Step",value:.1},{name:"Suffix",value:""},{name:"Grey Out",value:false},{name:"Visible",value:true},{name:"Input",value:.5},{name:"Set Default",value:0},{name:"Reset",value:0},{name:"Default",value:.5}],portsOut:[{name:"childs"},{name:"Result",value:.5}]},{objName:"Ops.Sidebar.Button_v2",id:"34",uiAttribs:{subPatch:0},portsIn:[{name:"link",value:0},{name:"Text",value:"Button"},{name:"Grey Out",value:false},{name:"Visible",value:true}],portsOut:[{name:"childs"},{name:"Pressed Trigger",value:0}]},{objName:"Ops.Trigger.GateTrigger",id:"35",uiAttribs:{subPatch:0},portsIn:[{name:"Execute"},{name:"Pass Through"}],portsOut:[{name:"Trigger out",links:[{portIn:"exe",portOut:"Trigger out",objIn:"12",objOut:"35"}]}]},{objName:"Ops.Boolean.ToggleBool",id:"36",uiAttribs:{subPatch:0},portsIn:[{name:"trigger"},{name:"reset",value:0},{name:"Default",value:false}],portsOut:[{name:"result",links:[{portIn:"Pass Through",portOut:"result",objIn:"35",objOut:"36"}]}]},{objName:"Ops.Gl.TextureEffects.Gradient",id:"37",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"difference"},{name:"Amount",value:1},{name:"Width",value:1},{name:"Type index",value:0},{name:"Type",value:"X"},{name:"Pos"},{name:"Smoothstep",value:true},{name:"r",value:1},{name:"g",value:0},{name:"b",value:0},{name:"r2",value:0},{name:"g2",value:0},{name:"b2",value:0},{name:"r3",value:0},{name:"g3",value:.20000000000000018},{name:"b3",value:1},{name:"Randomize",value:0}],portsOut:[{name:"Next",links:[{portIn:"Render",portOut:"Next",objIn:"11",objOut:"37"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"38",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"41",objOut:"38"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"39",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:false},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"38",objOut:"39"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"9",objOut:"39"}]},{name:"Aspect Ratio",value:1.3333333333333333}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"40",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"time",value:0},{name:"SpeedX",value:4},{name:"SpeedY",value:8},{name:"RepeatX",value:57.62},{name:"RepeatY",value:11},{name:"Multiply",value:.01},{name:"Mask",value:0}],portsOut:[{name:"Trigger",links:[{portIn:"exe 7",portOut:"Trigger",objIn:"842",objOut:"40"}]}]},{objName:"Ops.Gl.TextureEffects.Gradient",id:"41",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"hardlight"},{name:"Amount",value:1},{name:"Width",value:1},{name:"Type index",value:0},{name:"Type",value:"Radial"},{name:"Pos",value:.293},{name:"Smoothstep",value:true},{name:"r",value:1},{name:"g",value:0},{name:"b",value:0},{name:"r2",value:0},{name:"g2",value:0},{name:"b2",value:0},{name:"r3",value:0},{name:"g3",value:0},{name:"b3",value:1},{name:"Randomize",value:0}],portsOut:[{name:"Next",links:[{portIn:"Render",portOut:"Next",objIn:"40",objOut:"41"}]}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"42",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:51},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"46",objOut:"42"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"3"}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"43",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:52},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"47",objOut:"43"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"4"}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"44",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:53},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"48",objOut:"44"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"5"}]},{objName:"Ops.Value.Number",id:"45",uiAttribs:{subPatch:0},portsIn:[{name:"value"}],portsOut:[{name:"result",links:[{portIn:"current",portOut:"result",objIn:"12",objOut:"45"}]}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"46",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:0}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"46"}]}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"47",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:1}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"47"}]}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"48",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:2}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"48"}]}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"49",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:17},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"50",objOut:"49"},{portIn:"trigger",portOut:"on press",objIn:"36",objOut:"49"}]},{name:"on release",links:[{portIn:"Trigger",portOut:"on release",objIn:"76",objOut:"49"}]},{name:"Pressed",value:0},{name:"Key",value:"Control"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"50",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:0}],portsOut:[{name:"Next",value:0},{name:"Out Value",value:0}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"51",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat sphere(vec2 uv, vec2 c, float r) {\n\tuv -= c;\n\tuv /= r;\n\treturn 2.0*r*sqrt(max(0.0, 1.0-dot(uv, uv)));\n}\nconst float p_o254341_R = 0.210000000;\nconst float p_o254341_r = 0.270000000;\nvec2 o256395_input_sdf(vec3 p, float _seed_variation_) {\nvec2 o254341_0_q = vec2(length((p).zx)-p_o254341_R,(p).y);\nfloat o254341_0_1_sdf3d = length(o254341_0_q)-p_o254341_r;\n\nreturn vec2(o254341_0_1_sdf3d, 0.0);\n}\nvec2 raymarch_o256395(vec2 uv, float _seed_variation_) {\n\tvec3 ro = vec3(uv-vec2(0.5), 1.0);\n\tvec3 rd = vec3(0.0, 0.0, -1.0);\n\tfloat dO = 0.0;\n\tfloat c = 0.0;\n    for (int i=0; i < 100; i++) {\n    \tvec3 p = ro + rd*dO;\n        vec2 dS = o256395_input_sdf(p, _seed_variation_);\n        dO += dS.x;\n\n        if (dO >= 1.0) {\n\t\t\tbreak;\n\t\t} else if (dS.x < 0.0001) {\n\t\t\tc = dS.y;\n\t\t\tbreak;\n\t\t}\n    }\n    \n    return vec2(dO, c);\n}\n\nvec3 normal_o256395(vec3 p, float _seed_variation_) {\n\tif (p.z <= 0.0) {\n\t\treturn vec3(0.0, 0.0, 1.0);\n\t}\n\n\tfloat d = o256395_input_sdf(p, _seed_variation_).x;\n    float e = .001;\n    \n    vec3 n = d - vec3(\n        o256395_input_sdf(p-vec3(e, 0.0, 0.0), _seed_variation_).x,\n        o256395_input_sdf(p-vec3(0.0, e, 0.0), _seed_variation_).x,\n        o256395_input_sdf(p-vec3(0.0, 0.0, e), _seed_variation_).x);\n    \n    return vec3(-1.0, -1.0, -1.0)*normalize(n);\n}\n\nconst float p_o207924_d = 0.810000000;\nconst float p_o57201_cx = 0.500000000;\nconst float p_o57201_cy = 0.500000000;\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o256395_0_d = raymarch_o256395((UV), _seed_variation_);\nvec3 o256395_1_1_rgb = vec3(0.5)+0.5*normal_o256395(vec3((UV)-vec2(0.5), 1.0-o256395_0_d.x), _seed_variation_);\nfloat o57201_0_1_f = sphere(((vec4(o256395_1_1_rgb, 0.0)).xy+vec2(0.5)), vec2(p_o57201_cx, p_o57201_cy), (sin(iTime*0.9)*sin(iTime*0.5)));\nvec3 o241986_0_1_tex3d = vec3(o57201_0_1_f);\nvec3 o207924_0_1_tex3d = mix(o241986_0_1_tex3d, vec3(0.5), clamp(0.0/max(p_o207924_d, 0.0001), 0.0, 1.0));\nvec3 o245261_0_1_rgb = o207924_0_1_tex3d;\ngl_FragColor = vec4(o245261_0_1_rgb, 1.0);\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"52",objOut:"51"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"52",objOut:"51"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"52",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"67",objOut:"52"}]},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"55",objOut:"52"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"53",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:1},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"51",objOut:"53"},{portIn:"time",portOut:"Time",objIn:"60",objOut:"53"},{portIn:"time",portOut:"Time",objIn:"70",objOut:"53"},{portIn:"Rotate",portOut:"Time",objIn:"71",objOut:"53"}]}]},{objName:"Ops.Sequence",id:"54",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"51",objOut:"54"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0}]},{objName:"Ops.Ui.VizTexture",id:"55",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"57",objOut:"55"}]},{name:"Info",value:"640 x 320 32bit nearest repeatmir"}]},{objName:"Ops.Gl.Render2Texture",id:"56",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"use viewport size",value:true},{name:"texture width",value:640},{name:"texture height",value:320},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",value:0},{name:"texture"},{name:"textureDepth"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"57",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"72",objOut:"57"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"58",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"57",objOut:"58"},{portIn:"exe",portOut:"Next",objIn:"54",objOut:"58"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"61",objOut:"58"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"59",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"width",value:1},{name:"height",value:1},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"60",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"time"},{name:"SpeedX",value:4},{name:"SpeedY",value:8},{name:"RepeatX",value:57.62},{name:"RepeatY",value:11},{name:"Multiply",value:.01},{name:"Mask",value:0}],portsOut:[{name:"Trigger",links:[{portIn:"Render",portOut:"Trigger",objIn:"70",objOut:"60"}]}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"61",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"62",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"63",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture",value:0}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"64",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"65",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:54},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"66",objOut:"65"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"6"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"66",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:4}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"66"}]}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"67",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:.258},{name:"Max",value:1},{name:"Position",value:1}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"59",objOut:"67"}]}]},{objName:"Ops.Gl.GradientTexture",id:"68",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":1,"g":0,"b":0},{"pos":0.25,"r":1,"g":0,"b":0},{"pos":0.386,"r":0.7604346180181212,"g":0.5489903204869321,"b":0.8147596590458878},{"pos":0.432,"r":0,"g":0.11999999999999966,"b":1},{"pos":1,"r":0,"g":0.11999999999999966,"b":1}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:false},{name:"Step",value:true},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Gradient",portOut:"Texture",objIn:"67",objOut:"68"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.TextureEffects.Mirror",id:"69",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"axis index",value:0},{name:"axis",value:"X"},{name:"width",value:5.32},{name:"offset",value:0},{name:"flip",value:true}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"74",objOut:"69"}]}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"70",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"time"},{name:"SpeedX",value:4},{name:"SpeedY",value:8},{name:"RepeatX",value:.06},{name:"RepeatY",value:.11},{name:"Multiply",value:6.71},{name:"Mask",value:0}],portsOut:[{name:"Trigger",links:[{portIn:"render",portOut:"Trigger",objIn:"69",objOut:"70"}]}]},{objName:"Ops.Gl.TextureEffects.Waveform_v2",id:"71",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:.555},{name:"Waveform index",value:0},{name:"Waveform",value:"Square"},{name:"Amplitude",value:.5},{name:"Frequency",value:2.05},{name:"Line Width",value:0},{name:"Line Glow",value:.089},{name:"invert color",value:false},{name:"Solid fill",value:false},{name:"Offset X",value:0},{name:"Offset Y",value:.478},{name:"Rotate"},{name:"r",value:1},{name:"g",value:1},{name:"b",value:1}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"67",objOut:"71"},{portIn:"exe 10",portOut:"trigger",objIn:"842",objOut:"71"}]}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"72",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"multiply invert"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:.478},{name:"Max",value:1},{name:"Position",value:.383}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"60",objOut:"72"}]}]},{objName:"Ops.Gl.GradientTexture",id:"73",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":1,"g":0,"b":0},{"pos":0.392,"r":1,"g":0,"b":0},{"pos":0.588,"r":0.08000000000000008,"g":0,"b":1},{"pos":1,"r":0.08000000000000008,"g":0,"b":1}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:true},{name:"Step",value:true},{name:"Flip",value:true},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Gradient",portOut:"Texture",objIn:"72",objOut:"73"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.TextureEffects.Twirl_v3",id:"74",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"exclusion"},{name:"Amount"},{name:"Twist amount",value:200},{name:"Radius",value:.5},{name:"Center X",value:.5},{name:"Center Y",value:.5}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"71",objOut:"74"}]}]},{objName:"Ops.Anim.Timer_v2",id:"75",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:2.92},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Amount",portOut:"Time",objIn:"74",objOut:"75"}]}]},{objName:"Ops.Trigger.TriggerSend",id:"76",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger"},{name:"Named Trigger",value:"TimerStart"}],portsOut:[]},{objName:"Ops.Trigger.TriggerReceive",id:"77",uiAttribs:{subPatch:0},portsIn:[{name:"Named Trigger",value:"TimerStart"}],portsOut:[{name:"Triggered",links:[{portIn:"Reset",portOut:"Triggered",objIn:"75",objOut:"77"}]}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"78",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat sphere(vec2 uv, vec2 c, float r) {\n\tuv -= c;\n\tuv /= r;\n\treturn 2.0*r*sqrt(max(0.0, 1.0-dot(uv, uv)));\n}\nfloat box(vec2 uv, vec3 center, vec3 rad, vec3 rot) {\n\tvec3 ro = vec3(uv, 1.0)-center;\n\tvec3 rd = vec3(0.0000001, 0.0000001, -1.0);\n\tmat3 r = mat3(vec3(1, 0, 0), vec3(0, cos(rot.x), -sin(rot.x)), vec3(0, sin(rot.x), cos(rot.x)));\n\tr *= mat3(vec3(cos(rot.y), 0, -sin(rot.y)), vec3(0, 1, 0), vec3(sin(rot.y), 0, cos(rot.y)));\n\tr *= mat3(vec3(cos(rot.z), -sin(rot.z), 0), vec3(sin(rot.z), cos(rot.z), 0), vec3(0, 0, 1));\n\tro = r * ro;\n\trd = r * rd;\n    vec3 m = 1.0/rd;\n    vec3 n = m*ro;\n    vec3 k = abs(m)*rad;\n    vec3 t1 = -n - k;\n    vec3 t2 = -n + k;\n\n    float tN = max(max(t1.x, t1.y), t1.z);\n    float tF = min(min(t2.x, t2.y), t2.z);\n    if(tN>tF || tF<0.0) return 1.0;\n    return tN;\n}vec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nconst float p_o419741_gradient_0_pos = 0.000000000;\nconst float p_o419741_gradient_0_r = 1.000000000;\nconst float p_o419741_gradient_0_g = 0.000000000;\nconst float p_o419741_gradient_0_b = 0.000000000;\nconst float p_o419741_gradient_0_a = 1.000000000;\nconst float p_o419741_gradient_1_pos = 0.436363186;\nconst float p_o419741_gradient_1_r = 1.000000000;\nconst float p_o419741_gradient_1_g = 0.968750000;\nconst float p_o419741_gradient_1_b = 0.000000000;\nconst float p_o419741_gradient_1_a = 1.000000000;\nconst float p_o419741_gradient_2_pos = 0.527273005;\nconst float p_o419741_gradient_2_r = 0.000000000;\nconst float p_o419741_gradient_2_g = 1.000000000;\nconst float p_o419741_gradient_2_b = 0.125000000;\nconst float p_o419741_gradient_2_a = 1.000000000;\nconst float p_o419741_gradient_3_pos = 0.627272727;\nconst float p_o419741_gradient_3_r = 0.843750000;\nconst float p_o419741_gradient_3_g = 0.000000000;\nconst float p_o419741_gradient_3_b = 1.000000000;\nconst float p_o419741_gradient_3_a = 1.000000000;\nconst float p_o419741_gradient_4_pos = 1.000000000;\nconst float p_o419741_gradient_4_r = 0.000000000;\nconst float p_o419741_gradient_4_g = 0.062500000;\nconst float p_o419741_gradient_4_b = 1.000000000;\nconst float p_o419741_gradient_4_a = 1.000000000;\nvec4 o419741_gradient_gradient_fct(float x) {\n  if (x < p_o419741_gradient_0_pos) {\n    return vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a);\n  } else if (x < p_o419741_gradient_1_pos) {\n    return mix(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)), mix(vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a), vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), (x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos)), 1.0-0.5*(x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos));\n  } else if (x < p_o419741_gradient_2_pos) {\n    return 0.5*(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)) + mix(mix(vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a), vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), (x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos)), mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)), 0.5-0.5*cos(3.14159265359*(x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos))));\n  } else if (x < p_o419741_gradient_3_pos) {\n    return 0.5*(mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)) + mix(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)), mix(vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a), (x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos)), 0.5-0.5*cos(3.14159265359*(x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos))));\n  } else if (x < p_o419741_gradient_4_pos) {\n    return mix(mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)), mix(vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a), (x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos)), 0.5+0.5*(x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos));\n  }\n  return vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a);\n}\nconst float p_o398645_amount = 11.490000000;\nconst float p_o254341_r = 0.500000000;\nvec2 o256395_input_sdf(vec3 p, float _seed_variation_) {\nvec2 o254341_0_q = vec2(length((p).xy)-(sin(iTime*0.2)),(p).z);\nfloat o254341_0_1_sdf3d = length(o254341_0_q)-p_o254341_r;\n\nreturn vec2(o254341_0_1_sdf3d, 0.0);\n}\nvec2 raymarch_o256395(vec2 uv, float _seed_variation_) {\n\tvec3 ro = vec3(uv-vec2(0.5), 1.0);\n\tvec3 rd = vec3(0.0, 0.0, -1.0);\n\tfloat dO = 0.0;\n\tfloat c = 0.0;\n    for (int i=0; i < 100; i++) {\n    \tvec3 p = ro + rd*dO;\n        vec2 dS = o256395_input_sdf(p, _seed_variation_);\n        dO += dS.x;\n\n        if (dO >= 1.0) {\n\t\t\tbreak;\n\t\t} else if (dS.x < 0.0001) {\n\t\t\tc = dS.y;\n\t\t\tbreak;\n\t\t}\n    }\n    \n    return vec2(dO, c);\n}\n\nvec3 normal_o256395(vec3 p, float _seed_variation_) {\n\tif (p.z <= 0.0) {\n\t\treturn vec3(0.0, 0.0, 1.0);\n\t}\n\n\tfloat d = o256395_input_sdf(p, _seed_variation_).x;\n    float e = .001;\n    \n    vec3 n = d - vec3(\n        o256395_input_sdf(p-vec3(e, 0.0, 0.0), _seed_variation_).x,\n        o256395_input_sdf(p-vec3(0.0, e, 0.0), _seed_variation_).x,\n        o256395_input_sdf(p-vec3(0.0, 0.0, e), _seed_variation_).x);\n    \n    return vec3(-1.0, -1.0, -1.0)*normalize(n);\n}\n\nconst float p_o207924_d = 0.270000000;\nconst float p_o57201_cx = 0.500000000;\nconst float p_o57201_cy = 0.500000000;\nconst float p_o479214_gradient_0_pos = 0.236363636;\nconst float p_o479214_gradient_0_r = 0.000000000;\nconst float p_o479214_gradient_0_g = 0.062500000;\nconst float p_o479214_gradient_0_b = 1.000000000;\nconst float p_o479214_gradient_0_a = 1.000000000;\nconst float p_o479214_gradient_1_pos = 0.590909368;\nconst float p_o479214_gradient_1_r = 0.000000000;\nconst float p_o479214_gradient_1_g = 1.000000000;\nconst float p_o479214_gradient_1_b = 0.125000000;\nconst float p_o479214_gradient_1_a = 1.000000000;\nconst float p_o479214_gradient_2_pos = 0.800000000;\nconst float p_o479214_gradient_2_r = 1.000000000;\nconst float p_o479214_gradient_2_g = 0.000000000;\nconst float p_o479214_gradient_2_b = 0.000000000;\nconst float p_o479214_gradient_2_a = 1.000000000;\nconst float p_o479214_gradient_3_pos = 0.836363636;\nconst float p_o479214_gradient_3_r = 0.843750000;\nconst float p_o479214_gradient_3_g = 0.000000000;\nconst float p_o479214_gradient_3_b = 1.000000000;\nconst float p_o479214_gradient_3_a = 1.000000000;\nconst float p_o479214_gradient_4_pos = 1.000000000;\nconst float p_o479214_gradient_4_r = 1.000000000;\nconst float p_o479214_gradient_4_g = 0.968750000;\nconst float p_o479214_gradient_4_b = 0.000000000;\nconst float p_o479214_gradient_4_a = 1.000000000;\nvec4 o479214_gradient_gradient_fct(float x) {\n  if (x < p_o479214_gradient_0_pos) {\n    return vec4(p_o479214_gradient_0_r,p_o479214_gradient_0_g,p_o479214_gradient_0_b,p_o479214_gradient_0_a);\n  } else if (x < p_o479214_gradient_1_pos) {\n    return mix(vec4(p_o479214_gradient_0_r,p_o479214_gradient_0_g,p_o479214_gradient_0_b,p_o479214_gradient_0_a), vec4(p_o479214_gradient_1_r,p_o479214_gradient_1_g,p_o479214_gradient_1_b,p_o479214_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_0_pos)/(p_o479214_gradient_1_pos-p_o479214_gradient_0_pos)));\n  } else if (x < p_o479214_gradient_2_pos) {\n    return mix(vec4(p_o479214_gradient_1_r,p_o479214_gradient_1_g,p_o479214_gradient_1_b,p_o479214_gradient_1_a), vec4(p_o479214_gradient_2_r,p_o479214_gradient_2_g,p_o479214_gradient_2_b,p_o479214_gradient_2_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_1_pos)/(p_o479214_gradient_2_pos-p_o479214_gradient_1_pos)));\n  } else if (x < p_o479214_gradient_3_pos) {\n    return mix(vec4(p_o479214_gradient_2_r,p_o479214_gradient_2_g,p_o479214_gradient_2_b,p_o479214_gradient_2_a), vec4(p_o479214_gradient_3_r,p_o479214_gradient_3_g,p_o479214_gradient_3_b,p_o479214_gradient_3_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_2_pos)/(p_o479214_gradient_3_pos-p_o479214_gradient_2_pos)));\n  } else if (x < p_o479214_gradient_4_pos) {\n    return mix(vec4(p_o479214_gradient_3_r,p_o479214_gradient_3_g,p_o479214_gradient_3_b,p_o479214_gradient_3_a), vec4(p_o479214_gradient_4_r,p_o479214_gradient_4_g,p_o479214_gradient_4_b,p_o479214_gradient_4_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_3_pos)/(p_o479214_gradient_4_pos-p_o479214_gradient_3_pos)));\n  }\n  return vec4(p_o479214_gradient_4_r,p_o479214_gradient_4_g,p_o479214_gradient_4_b,p_o479214_gradient_4_a);\n}\nconst float p_o520101_radius = 0.480000000;\nconst float p_o520101_repeat = 6.000000000;\nconst float p_o270325_cx = 0.500000000;\nconst float p_o270325_cy = 0.500000000;\nconst float p_o270325_cz = 0.500000000;\nconst float p_o270325_sx = 0.250000000;\nconst float p_o270325_sy = 0.250000000;\nconst float p_o270325_sz = 0.250000000;\nconst float p_o270325_rx = 0.000000000;\nconst float p_o270325_ry = 0.000000000;\nconst float p_o270325_rz = 0.000000000;\nconst float p_o457554_repeat = 1.000000000;\nconst float p_o457554_gradient_0_pos = 0.000000000;\nconst float p_o457554_gradient_0_r = 0.000000000;\nconst float p_o457554_gradient_0_g = 0.000000000;\nconst float p_o457554_gradient_0_b = 0.000000000;\nconst float p_o457554_gradient_0_a = 1.000000000;\nconst float p_o457554_gradient_1_pos = 0.178294574;\nconst float p_o457554_gradient_1_r = 1.000000000;\nconst float p_o457554_gradient_1_g = 1.000000000;\nconst float p_o457554_gradient_1_b = 1.000000000;\nconst float p_o457554_gradient_1_a = 1.000000000;\nvec4 o457554_gradient_gradient_fct(float x) {\n  if (x < p_o457554_gradient_0_pos) {\n    return vec4(p_o457554_gradient_0_r,p_o457554_gradient_0_g,p_o457554_gradient_0_b,p_o457554_gradient_0_a);\n  } else if (x < p_o457554_gradient_1_pos) {\n    return mix(vec4(p_o457554_gradient_0_r,p_o457554_gradient_0_g,p_o457554_gradient_0_b,p_o457554_gradient_0_a), vec4(p_o457554_gradient_1_r,p_o457554_gradient_1_g,p_o457554_gradient_1_b,p_o457554_gradient_1_a), ((x-p_o457554_gradient_0_pos)/(p_o457554_gradient_1_pos-p_o457554_gradient_0_pos)));\n  }\n  return vec4(p_o457554_gradient_1_r,p_o457554_gradient_1_g,p_o457554_gradient_1_b,p_o457554_gradient_1_a);\n}\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o256395_0_d = raymarch_o256395((UV), _seed_variation_);\nvec3 o256395_1_1_rgb = vec3(0.5)+0.5*normal_o256395(vec3((UV)-vec2(0.5), 1.0-o256395_0_d.x), _seed_variation_);\nfloat o57201_0_1_f = sphere(((vec4(o256395_1_1_rgb, 0.0)).xy+vec2(0.5)), vec2(p_o57201_cx, p_o57201_cy), (sin(iTime*0.9)*sin(iTime*0.9)));\nvec3 o241986_0_1_tex3d = vec3(o57201_0_1_f);\nvec2 o254341_0_q = vec2(length(((vec4(o256395_1_1_rgb, 0.0)).xyz).xy)-(sin(iTime*0.2)),((vec4(o256395_1_1_rgb, 0.0)).xyz).z);\nfloat o254341_0_1_sdf3d = length(o254341_0_q)-p_o254341_r;\nvec3 o207924_0_1_tex3d = mix(o241986_0_1_tex3d, vec3(0.5), clamp(o254341_0_1_sdf3d/max(p_o207924_d, 0.0001), 0.0, 1.0));\nvec3 o245261_0_1_rgb = o207924_0_1_tex3d;\nfloat o270325_0_1_f = 1.0-box((vec2(fract(p_o520101_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o520101_radius*length((UV)-vec2(0.5))))), vec3(p_o270325_cx, p_o270325_cy, p_o270325_cz), vec3(p_o270325_sx, p_o270325_sy, p_o270325_sz), 0.01745329251*vec3(p_o270325_rx, p_o270325_ry, p_o270325_rz));\nvec4 o520101_0_1_rgba = vec4(vec3(o270325_0_1_f), 1.0);\nvec4 o479214_0_1_rgba = o479214_gradient_gradient_fct((dot((o520101_0_1_rgba).rgb, vec3(1.0))/3.0));\nvec4 o457554_0_1_rgba = o457554_gradient_gradient_fct(fract(p_o457554_repeat*1.41421356237*length(fract((UV))-vec2(0.5, 0.5))));\nvec4 o398645_0_s1 = vec4(o245261_0_1_rgb, 1.0);\nvec4 o398645_0_s2 = o479214_0_1_rgba;\nfloat o398645_0_a = p_o398645_amount*(dot((o457554_0_1_rgba).rgb, vec3(1.0))/3.0);\nvec4 o398645_0_1_rgba = vec4(blend_soft_light((UV), o398645_0_s1.rgb, o398645_0_s2.rgb, o398645_0_a*o398645_0_s1.a), min(1.0, o398645_0_s2.a+o398645_0_a*o398645_0_s1.a));\nvec4 o419741_0_1_rgba = o419741_gradient_gradient_fct((dot((o398645_0_1_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o419741_0_1_rgba;\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"79",objOut:"78"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"79",objOut:"78"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"79",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"85",objOut:"79"}]},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"82",objOut:"79"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"80",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:2.14},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"78",objOut:"80"},{portIn:"time",portOut:"Time",objIn:"86",objOut:"80"}]}]},{objName:"Ops.Sequence",id:"81",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"78",objOut:"81"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",links:[{portIn:"Render",portOut:"trigger 15",objIn:"93",objOut:"81"}]}]},{objName:"Ops.Ui.VizTexture",id:"82",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"83",objOut:"82"}]},{name:"Info",value:"640 x 320 32bit nearest repeatmir"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"83",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"86",objOut:"83"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"84",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"clamp to edge"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"83",objOut:"84"},{portIn:"exe",portOut:"Next",objIn:"81",objOut:"84"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"64",objOut:"84"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"85",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"width",value:1},{name:"height",value:1},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"86",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"time"},{name:"SpeedX",value:4},{name:"SpeedY",value:8},{name:"RepeatX",value:57.62},{name:"RepeatY",value:11},{name:"Multiply",value:.01},{name:"Mask",value:0}],portsOut:[{name:"Trigger",links:[{portIn:"exe 11",portOut:"Trigger",objIn:"842",objOut:"86"}]}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"87",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat box(vec2 uv, vec3 center, vec3 rad, vec3 rot) {\n\tvec3 ro = vec3(uv, 1.0)-center;\n\tvec3 rd = vec3(0.0000001, 0.0000001, -1.0);\n\tmat3 r = mat3(vec3(1, 0, 0), vec3(0, cos(rot.x), -sin(rot.x)), vec3(0, sin(rot.x), cos(rot.x)));\n\tr *= mat3(vec3(cos(rot.y), 0, -sin(rot.y)), vec3(0, 1, 0), vec3(sin(rot.y), 0, cos(rot.y)));\n\tr *= mat3(vec3(cos(rot.z), -sin(rot.z), 0), vec3(sin(rot.z), cos(rot.z), 0), vec3(0, 0, 1));\n\tro = r * ro;\n\trd = r * rd;\n    vec3 m = 1.0/rd;\n    vec3 n = m*ro;\n    vec3 k = abs(m)*rad;\n    vec3 t1 = -n - k;\n    vec3 t2 = -n + k;\n\n    float tN = max(max(t1.x, t1.y), t1.z);\n    float tF = min(min(t2.x, t2.y), t2.z);\n    if(tN>tF || tF<0.0) return 1.0;\n    return tN;\n}float sphere(vec2 uv, vec2 c, float r) {\n\tuv -= c;\n\tuv /= r;\n\treturn 2.0*r*sqrt(max(0.0, 1.0-dot(uv, uv)));\n}\nvec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nconst float p_o419741_gradient_0_pos = 0.000000000;\nconst float p_o419741_gradient_0_r = 1.000000000;\nconst float p_o419741_gradient_0_g = 0.000000000;\nconst float p_o419741_gradient_0_b = 0.000000000;\nconst float p_o419741_gradient_0_a = 1.000000000;\nconst float p_o419741_gradient_1_pos = 0.144273793;\nconst float p_o419741_gradient_1_r = 1.000000000;\nconst float p_o419741_gradient_1_g = 0.968750000;\nconst float p_o419741_gradient_1_b = 0.000000000;\nconst float p_o419741_gradient_1_a = 1.000000000;\nconst float p_o419741_gradient_2_pos = 0.274273404;\nconst float p_o419741_gradient_2_r = 1.000000000;\nconst float p_o419741_gradient_2_g = 0.000000000;\nconst float p_o419741_gradient_2_b = 0.000000000;\nconst float p_o419741_gradient_2_a = 1.000000000;\nconst float p_o419741_gradient_3_pos = 0.414273349;\nconst float p_o419741_gradient_3_r = 0.843750000;\nconst float p_o419741_gradient_3_g = 0.000000000;\nconst float p_o419741_gradient_3_b = 1.000000000;\nconst float p_o419741_gradient_3_a = 1.000000000;\nconst float p_o419741_gradient_4_pos = 0.854273571;\nconst float p_o419741_gradient_4_r = 0.000000000;\nconst float p_o419741_gradient_4_g = 0.062500000;\nconst float p_o419741_gradient_4_b = 1.000000000;\nconst float p_o419741_gradient_4_a = 1.000000000;\nvec4 o419741_gradient_gradient_fct(float x) {\n  if (x < p_o419741_gradient_0_pos) {\n    return vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a);\n  } else if (x < p_o419741_gradient_1_pos) {\n    return mix(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)), mix(vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a), vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), (x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos)), 1.0-0.5*(x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos));\n  } else if (x < p_o419741_gradient_2_pos) {\n    return 0.5*(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)) + mix(mix(vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a), vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), (x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos)), mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)), 0.5-0.5*cos(3.14159265359*(x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos))));\n  } else if (x < p_o419741_gradient_3_pos) {\n    return 0.5*(mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)) + mix(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)), mix(vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a), (x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos)), 0.5-0.5*cos(3.14159265359*(x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos))));\n  } else if (x < p_o419741_gradient_4_pos) {\n    return mix(mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)), mix(vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a), (x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos)), 0.5+0.5*(x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos));\n  }\n  return vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a);\n}\nconst float p_o398645_amount = 2.200000000;\nconst float p_o479214_gradient_0_pos = 0.025183105;\nconst float p_o479214_gradient_0_r = 1.000000000;\nconst float p_o479214_gradient_0_g = 0.000000000;\nconst float p_o479214_gradient_0_b = 0.000000000;\nconst float p_o479214_gradient_0_a = 1.000000000;\nconst float p_o479214_gradient_1_pos = 0.435182884;\nconst float p_o479214_gradient_1_r = 1.000000000;\nconst float p_o479214_gradient_1_g = 0.968750000;\nconst float p_o479214_gradient_1_b = 0.000000000;\nconst float p_o479214_gradient_1_a = 1.000000000;\nconst float p_o479214_gradient_2_pos = 0.590909368;\nconst float p_o479214_gradient_2_r = 0.000000000;\nconst float p_o479214_gradient_2_g = 1.000000000;\nconst float p_o479214_gradient_2_b = 0.125000000;\nconst float p_o479214_gradient_2_a = 1.000000000;\nconst float p_o479214_gradient_3_pos = 0.915182218;\nconst float p_o479214_gradient_3_r = 0.000000000;\nconst float p_o479214_gradient_3_g = 0.062500000;\nconst float p_o479214_gradient_3_b = 1.000000000;\nconst float p_o479214_gradient_3_a = 1.000000000;\nvec4 o479214_gradient_gradient_fct(float x) {\n  if (x < p_o479214_gradient_0_pos) {\n    return vec4(p_o479214_gradient_0_r,p_o479214_gradient_0_g,p_o479214_gradient_0_b,p_o479214_gradient_0_a);\n  } else if (x < p_o479214_gradient_1_pos) {\n    return mix(vec4(p_o479214_gradient_0_r,p_o479214_gradient_0_g,p_o479214_gradient_0_b,p_o479214_gradient_0_a), vec4(p_o479214_gradient_1_r,p_o479214_gradient_1_g,p_o479214_gradient_1_b,p_o479214_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_0_pos)/(p_o479214_gradient_1_pos-p_o479214_gradient_0_pos)));\n  } else if (x < p_o479214_gradient_2_pos) {\n    return mix(vec4(p_o479214_gradient_1_r,p_o479214_gradient_1_g,p_o479214_gradient_1_b,p_o479214_gradient_1_a), vec4(p_o479214_gradient_2_r,p_o479214_gradient_2_g,p_o479214_gradient_2_b,p_o479214_gradient_2_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_1_pos)/(p_o479214_gradient_2_pos-p_o479214_gradient_1_pos)));\n  } else if (x < p_o479214_gradient_3_pos) {\n    return mix(vec4(p_o479214_gradient_2_r,p_o479214_gradient_2_g,p_o479214_gradient_2_b,p_o479214_gradient_2_a), vec4(p_o479214_gradient_3_r,p_o479214_gradient_3_g,p_o479214_gradient_3_b,p_o479214_gradient_3_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_2_pos)/(p_o479214_gradient_3_pos-p_o479214_gradient_2_pos)));\n  }\n  return vec4(p_o479214_gradient_3_r,p_o479214_gradient_3_g,p_o479214_gradient_3_b,p_o479214_gradient_3_a);\n}\nconst float p_o520101_repeat = 6.000000000;\nconst float p_o270325_cx = 0.500000000;\nconst float p_o270325_cy = 0.500000000;\nconst float p_o270325_cz = 0.500000000;\nconst float p_o270325_sx = 0.250000000;\nconst float p_o270325_sy = 0.250000000;\nconst float p_o270325_sz = 0.250000000;\nconst float p_o270325_ry = 2.000000000;\nconst float p_o207924_d = 0.710000000;\nconst float p_o553530_radius = 0.320000000;\nconst float p_o553530_repeat = 5.000000000;\nconst float p_o57201_cx = 0.500000000;\nconst float p_o57201_cy = 0.710000000;\nconst float p_o254341_r = 0.500000000;\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o270325_0_1_f = 1.0-box((vec2(fract(p_o520101_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/(cos(iTime*0.001))*length((UV)-vec2(0.5))))), vec3(p_o270325_cx, p_o270325_cy, p_o270325_cz), vec3(p_o270325_sx, p_o270325_sy, p_o270325_sz), 0.01745329251*vec3((sin(iTime*0.9)*sin(iTime*0.9)), p_o270325_ry, (sin(iTime*0.9)*sin(iTime*0.9)*abs(iTime))));\nvec4 o520101_0_1_rgba = vec4(vec3(o270325_0_1_f), 1.0);\nvec4 o479214_0_1_rgba = o479214_gradient_gradient_fct((dot((o520101_0_1_rgba).rgb, vec3(1.0))/3.0));\nfloat o57201_0_1_f = sphere((vec2(fract(p_o553530_repeat*atan(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5)).y-0.5, ((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o553530_radius*length(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5))-vec2(0.5))))), vec2(p_o57201_cx, p_o57201_cy), (sin(iTime*0.2)*sin(iTime*0.9)));\nvec4 o553530_0_1_rgba = vec4(vec3(o57201_0_1_f), 1.0);\nvec3 o241986_0_1_tex3d = ((o553530_0_1_rgba).rgb);\nvec2 o254341_0_q = vec2(length(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xyz).xy)-(sin(iTime*0.2)),((vec4(((o479214_0_1_rgba).rgb), 0.0)).xyz).z);\nfloat o254341_0_1_sdf3d = length(o254341_0_q)-p_o254341_r;\nvec3 o207924_0_1_tex3d = mix(o241986_0_1_tex3d, vec3(0.5), clamp(o254341_0_1_sdf3d/max(p_o207924_d, 0.0001), 0.0, 1.0));\nvec3 o245261_0_1_rgb = o207924_0_1_tex3d;\nvec3 o241986_0_3_tex3d = ((o553530_0_1_rgba).rgb);\nvec3 o818931_0_1_rgb = o241986_0_3_tex3d;\nfloat o57201_0_3_f = sphere((vec2(fract(p_o553530_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o553530_radius*length((UV)-vec2(0.5))))), vec2(p_o57201_cx, p_o57201_cy), (sin(iTime*0.2)*sin(iTime*0.9)));\nvec4 o553530_0_3_rgba = vec4(vec3(o57201_0_3_f), 1.0);\nvec4 o398645_0_s1 = vec4(o245261_0_1_rgb, 1.0);\nvec4 o398645_0_s2 = vec4(o818931_0_1_rgb, 1.0);\nfloat o398645_0_a = p_o398645_amount*(dot((o553530_0_3_rgba).rgb, vec3(1.0))/3.0);\nvec4 o398645_0_1_rgba = vec4(blend_hard_light((UV), o398645_0_s1.rgb, o398645_0_s2.rgb, o398645_0_a*o398645_0_s1.a), min(1.0, o398645_0_s2.a+o398645_0_a*o398645_0_s1.a));\nvec4 o419741_0_1_rgba = o419741_gradient_gradient_fct((dot((o398645_0_1_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o419741_0_1_rgba;\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"88",objOut:"87"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"88",objOut:"87"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"88",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"94",objOut:"88"}]},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"91",objOut:"88"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"89",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:.91},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"87",objOut:"89"},{portIn:"time",portOut:"Time",objIn:"95",objOut:"89"}]}]},{objName:"Ops.Sequence",id:"90",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"87",objOut:"90"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",links:[{portIn:"Render",portOut:"trigger 15",objIn:"131",objOut:"90"}]}]},{objName:"Ops.Ui.VizTexture",id:"91",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"92",objOut:"91"}]},{name:"Info",value:"640 x 320 32bit nearest repeatmir"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"92",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"101",objOut:"92"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"93",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"clamp to edge"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"92",objOut:"93"},{portIn:"exe",portOut:"Next",objIn:"90",objOut:"93"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"62",objOut:"93"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"94",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"width",value:1},{name:"height",value:1},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"95",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"time"},{name:"SpeedX",value:4},{name:"SpeedY",value:8},{name:"RepeatX",value:10.94},{name:"RepeatY",value:7.17},{name:"Multiply",value:.08},{name:"Mask",value:0}],portsOut:[{name:"Trigger",links:[{portIn:"exe 12",portOut:"Trigger",objIn:"842",objOut:"95"}]}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"96",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:55},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"97",objOut:"96"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"7"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"97",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:5}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"97"}]}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"98",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:56},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"99",objOut:"98"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"8"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"99",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:6}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"99"}]}]},{objName:"Ops.Gl.GradientTexture",id:"100",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":8.881784197001252e-16,"g":0,"b":1},{"pos":0.25,"r":8.881784197001252e-16,"g":0,"b":1},{"pos":0.75,"r":1,"g":0,"b":0},{"pos":1,"r":1,"g":0,"b":0}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:false},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Gradient",portOut:"Texture",objIn:"101",objOut:"100"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"101",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:0},{name:"Max",value:1},{name:"Position",value:.5}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"95",objOut:"101"}]}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"102",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:0},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat box(vec2 uv, vec3 center, vec3 rad, vec3 rot) {\n\tvec3 ro = vec3(uv, 1.0)-center;\n\tvec3 rd = vec3(0.0000001, 0.0000001, -1.0);\n\tmat3 r = mat3(vec3(1, 0, 0), vec3(0, cos(rot.x), -sin(rot.x)), vec3(0, sin(rot.x), cos(rot.x)));\n\tr *= mat3(vec3(cos(rot.y), 0, -sin(rot.y)), vec3(0, 1, 0), vec3(sin(rot.y), 0, cos(rot.y)));\n\tr *= mat3(vec3(cos(rot.z), -sin(rot.z), 0), vec3(sin(rot.z), cos(rot.z), 0), vec3(0, 0, 1));\n\tro = r * ro;\n\trd = r * rd;\n    vec3 m = 1.0/rd;\n    vec3 n = m*ro;\n    vec3 k = abs(m)*rad;\n    vec3 t1 = -n - k;\n    vec3 t2 = -n + k;\n\n    float tN = max(max(t1.x, t1.y), t1.z);\n    float tF = min(min(t2.x, t2.y), t2.z);\n    if(tN>tF || tF<0.0) return 1.0;\n    return tN;\n}float sphere(vec2 uv, vec2 c, float r) {\n\tuv -= c;\n\tuv /= r;\n\treturn 2.0*r*sqrt(max(0.0, 1.0-dot(uv, uv)));\n}\nvec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nconst float p_o419741_gradient_0_pos = 0.000000000;\nconst float p_o419741_gradient_0_r = 1.000000000;\nconst float p_o419741_gradient_0_g = 0.000000000;\nconst float p_o419741_gradient_0_b = 0.000000000;\nconst float p_o419741_gradient_0_a = 1.000000000;\nconst float p_o419741_gradient_1_pos = 0.144273793;\nconst float p_o419741_gradient_1_r = 1.000000000;\nconst float p_o419741_gradient_1_g = 0.968750000;\nconst float p_o419741_gradient_1_b = 0.000000000;\nconst float p_o419741_gradient_1_a = 1.000000000;\nconst float p_o419741_gradient_2_pos = 0.274273404;\nconst float p_o419741_gradient_2_r = 1.000000000;\nconst float p_o419741_gradient_2_g = 0.000000000;\nconst float p_o419741_gradient_2_b = 0.000000000;\nconst float p_o419741_gradient_2_a = 1.000000000;\nconst float p_o419741_gradient_3_pos = 0.414273349;\nconst float p_o419741_gradient_3_r = 0.843750000;\nconst float p_o419741_gradient_3_g = 0.000000000;\nconst float p_o419741_gradient_3_b = 1.000000000;\nconst float p_o419741_gradient_3_a = 1.000000000;\nconst float p_o419741_gradient_4_pos = 0.854273571;\nconst float p_o419741_gradient_4_r = 0.000000000;\nconst float p_o419741_gradient_4_g = 0.062500000;\nconst float p_o419741_gradient_4_b = 1.000000000;\nconst float p_o419741_gradient_4_a = 1.000000000;\nvec4 o419741_gradient_gradient_fct(float x) {\n  if (x < p_o419741_gradient_0_pos) {\n    return vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a);\n  } else if (x < p_o419741_gradient_1_pos) {\n    return mix(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)), mix(vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a), vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), (x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos)), 1.0-0.5*(x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos));\n  } else if (x < p_o419741_gradient_2_pos) {\n    return 0.5*(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)) + mix(mix(vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a), vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), (x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos)), mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)), 0.5-0.5*cos(3.14159265359*(x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos))));\n  } else if (x < p_o419741_gradient_3_pos) {\n    return 0.5*(mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)) + mix(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)), mix(vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a), (x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos)), 0.5-0.5*cos(3.14159265359*(x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos))));\n  } else if (x < p_o419741_gradient_4_pos) {\n    return mix(mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)), mix(vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a), (x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos)), 0.5+0.5*(x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos));\n  }\n  return vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a);\n}\nconst float p_o398645_amount = 11.760000000;\nconst float p_o479214_gradient_0_pos = 0.025183105;\nconst float p_o479214_gradient_0_r = 1.000000000;\nconst float p_o479214_gradient_0_g = 0.000000000;\nconst float p_o479214_gradient_0_b = 0.000000000;\nconst float p_o479214_gradient_0_a = 1.000000000;\nconst float p_o479214_gradient_1_pos = 0.435182884;\nconst float p_o479214_gradient_1_r = 1.000000000;\nconst float p_o479214_gradient_1_g = 0.968750000;\nconst float p_o479214_gradient_1_b = 0.000000000;\nconst float p_o479214_gradient_1_a = 1.000000000;\nconst float p_o479214_gradient_2_pos = 0.590909368;\nconst float p_o479214_gradient_2_r = 0.000000000;\nconst float p_o479214_gradient_2_g = 1.000000000;\nconst float p_o479214_gradient_2_b = 0.125000000;\nconst float p_o479214_gradient_2_a = 1.000000000;\nconst float p_o479214_gradient_3_pos = 0.915182218;\nconst float p_o479214_gradient_3_r = 0.000000000;\nconst float p_o479214_gradient_3_g = 0.062500000;\nconst float p_o479214_gradient_3_b = 1.000000000;\nconst float p_o479214_gradient_3_a = 1.000000000;\nvec4 o479214_gradient_gradient_fct(float x) {\n  if (x < p_o479214_gradient_0_pos) {\n    return vec4(p_o479214_gradient_0_r,p_o479214_gradient_0_g,p_o479214_gradient_0_b,p_o479214_gradient_0_a);\n  } else if (x < p_o479214_gradient_1_pos) {\n    return mix(vec4(p_o479214_gradient_0_r,p_o479214_gradient_0_g,p_o479214_gradient_0_b,p_o479214_gradient_0_a), vec4(p_o479214_gradient_1_r,p_o479214_gradient_1_g,p_o479214_gradient_1_b,p_o479214_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_0_pos)/(p_o479214_gradient_1_pos-p_o479214_gradient_0_pos)));\n  } else if (x < p_o479214_gradient_2_pos) {\n    return mix(vec4(p_o479214_gradient_1_r,p_o479214_gradient_1_g,p_o479214_gradient_1_b,p_o479214_gradient_1_a), vec4(p_o479214_gradient_2_r,p_o479214_gradient_2_g,p_o479214_gradient_2_b,p_o479214_gradient_2_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_1_pos)/(p_o479214_gradient_2_pos-p_o479214_gradient_1_pos)));\n  } else if (x < p_o479214_gradient_3_pos) {\n    return mix(vec4(p_o479214_gradient_2_r,p_o479214_gradient_2_g,p_o479214_gradient_2_b,p_o479214_gradient_2_a), vec4(p_o479214_gradient_3_r,p_o479214_gradient_3_g,p_o479214_gradient_3_b,p_o479214_gradient_3_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_2_pos)/(p_o479214_gradient_3_pos-p_o479214_gradient_2_pos)));\n  }\n  return vec4(p_o479214_gradient_3_r,p_o479214_gradient_3_g,p_o479214_gradient_3_b,p_o479214_gradient_3_a);\n}\nconst float p_o520101_repeat = 6.000000000;\nconst float p_o270325_cx = 0.500000000;\nconst float p_o270325_cy = 0.500000000;\nconst float p_o270325_cz = 0.500000000;\nconst float p_o270325_sx = 0.250000000;\nconst float p_o270325_sy = 0.250000000;\nconst float p_o270325_sz = 0.250000000;\nconst float p_o270325_ry = 2.000000000;\nconst float p_o207924_d = 0.710000000;\nconst float p_o553530_radius = 0.320000000;\nconst float p_o553530_repeat = 5.000000000;\nconst float p_o57201_cx = 0.500000000;\nconst float p_o57201_cy = 0.710000000;\nconst float p_o254341_r = 0.500000000;\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o270325_0_1_f = 1.0-box((vec2(fract(p_o520101_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/(cos(iTime*0.001))*length((UV)-vec2(0.5))))), vec3(p_o270325_cx, p_o270325_cy, p_o270325_cz), vec3(p_o270325_sx, p_o270325_sy, p_o270325_sz), 0.01745329251*vec3((sin(iTime*0.9)*sin(iTime*0.9)), p_o270325_ry, (sin(iTime*0.9)*sin(iTime*0.9)*abs(iTime))));\nvec4 o520101_0_1_rgba = vec4(vec3(o270325_0_1_f), 1.0);\nvec4 o479214_0_1_rgba = o479214_gradient_gradient_fct((dot((o520101_0_1_rgba).rgb, vec3(1.0))/3.0));\nfloat o57201_0_1_f = sphere((vec2(fract(p_o553530_repeat*atan(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5)).y-0.5, ((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o553530_radius*length(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5))-vec2(0.5))))), vec2(p_o57201_cx, p_o57201_cy), (sin(iTime*0.2)*sin(iTime*0.9)));\nvec4 o553530_0_1_rgba = vec4(vec3(o57201_0_1_f), 1.0);\nvec3 o241986_0_1_tex3d = ((o553530_0_1_rgba).rgb);\nvec2 o254341_0_q = vec2(length(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xyz).xy)-(sin(iTime*0.2)),((vec4(((o479214_0_1_rgba).rgb), 0.0)).xyz).z);\nfloat o254341_0_1_sdf3d = length(o254341_0_q)-p_o254341_r;\nvec3 o207924_0_1_tex3d = mix(o241986_0_1_tex3d, vec3(0.5), clamp(o254341_0_1_sdf3d/max(p_o207924_d, 0.0001), 0.0, 1.0));\nvec3 o245261_0_1_rgb = o207924_0_1_tex3d;\nvec3 o241986_0_3_tex3d = ((o553530_0_1_rgba).rgb);\nvec3 o818931_0_1_rgb = o241986_0_3_tex3d;\nfloat o57201_0_3_f = sphere((vec2(fract(p_o553530_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o553530_radius*length((UV)-vec2(0.5))))), vec2(p_o57201_cx, p_o57201_cy), (sin(iTime*0.2)*sin(iTime*0.9)));\nvec4 o553530_0_3_rgba = vec4(vec3(o57201_0_3_f), 1.0);\nvec4 o398645_0_s1 = vec4(o245261_0_1_rgb, 1.0);\nvec4 o398645_0_s2 = vec4(o818931_0_1_rgb, 1.0);\nfloat o398645_0_a = p_o398645_amount*(dot((o553530_0_3_rgba).rgb, vec3(1.0))/3.0);\nvec4 o398645_0_1_rgba = vec4(blend_soft_light((UV), o398645_0_s1.rgb, o398645_0_s2.rgb, o398645_0_a*o398645_0_s1.a), min(1.0, o398645_0_s2.a+o398645_0_a*o398645_0_s1.a));\nvec4 o419741_0_1_rgba = o419741_gradient_gradient_fct((dot((o398645_0_1_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o419741_0_1_rgba;\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime",value:0}],portsOut:[{name:"trigger",value:0},{name:"Shader"},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.TextureEffects.RepeatTexture",id:"103",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"lighten"},{name:"Amount",value:1},{name:"x",value:6.42},{name:"y",value:7.26},{name:"Multiply",value:0}],portsOut:[{name:"trigger",links:[{portIn:"exe 9",portOut:"trigger",objIn:"842",objOut:"103"}]}]},{objName:"Ops.Gl.TextureEffects.PolarCoords",id:"104",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Radius Inner",value:.343},{name:"Radius Outer",value:.582},{name:"Crop",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"103",objOut:"104"}]}]},{objName:"Ops.Gl.TextureEffects.Mirror",id:"105",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"axis index",value:0},{name:"axis",value:"X"},{name:"width",value:.42},{name:"offset"},{name:"flip",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"106",objOut:"105"}]}]},{objName:"Ops.Gl.TextureEffects.Mirror",id:"106",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"axis index",value:0},{name:"axis",value:"Y"},{name:"width",value:-.87},{name:"offset",value:-.54},{name:"flip",value:false}],portsOut:[{name:"trigger",links:[{portIn:"exe 8",portOut:"trigger",objIn:"842",objOut:"106"}]}]},{objName:"Ops.Anim.SineAnim",id:"107",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:1.33},{name:"frequency",value:.36},{name:"amplitude",value:1.45}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"number",portOut:"result",objIn:"108",objOut:"107"}]}]},{objName:"Ops.Math.Abs",id:"108",uiAttribs:{subPatch:0},portsIn:[{name:"number"}],portsOut:[{name:"result",links:[{portIn:"value",portOut:"result",objIn:"109",objOut:"108"}]}]},{objName:"Ops.Math.Sine",id:"109",uiAttribs:{subPatch:0},portsIn:[{name:"value"},{name:"phase",value:.48},{name:"frequency",value:1},{name:"amplitude",value:-.85},{name:"asine",value:false}],portsOut:[{name:"result",links:[{portIn:"offset",portOut:"result",objIn:"105",objOut:"109"}]}]},{objName:"Ops.Anim.SineAnim",id:"110",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:1},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"Pos",portOut:"result",objIn:"37",objOut:"110"}]}]},{objName:"Ops.Gl.TextureEffects.Noise.FBMNoise",id:"111",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"r",value:1},{name:"g",value:1},{name:"b",value:1},{name:"scale",value:2},{name:"anim"},{name:"scrollX",value:9},{name:"scrollY",value:0},{name:"repeat",value:1},{name:"aspect",value:1},{name:"Layer 1",value:true},{name:"Layer 2",value:true},{name:"Layer 3",value:true},{name:"Layer 4",value:true},{name:"Tileable",value:true}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"112",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"R",value:.6749438949170184},{name:"G",value:.7866171871183457},{name:"B",value:.962383017559739},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:false},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:1},{name:"Fresnel G",value:1},{name:"Fresnel B",value:1},{name:"Emissive Active",value:false},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.8585982419554451},{name:"Emissive G",value:.8872829861539678},{name:"Emissive B",value:.10087431949523129},{name:"Shininess",value:4},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Blinn"},{name:"Energy Conservation",value:false},{name:"Double Sided Material",value:false},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture",value:0},{name:"Specular Texture",value:0},{name:"Normal Map",value:0},{name:"AO Texture",value:0},{name:"Emissive Texture",value:0},{name:"Emissive Mask",value:0},{name:"Opacity Texture",value:0},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:false}],portsOut:[{name:"Trigger Out",links:[{portIn:"render",portOut:"Trigger Out",objIn:"117",objOut:"112"}]},{name:"Shader"}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"113",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:false},{name:"Width",value:10},{name:"Height",value:10},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"115",objOut:"113"},{portIn:"exe",portOut:"Next",objIn:"122",objOut:"113"},{portIn:"update",portOut:"Next",objIn:"123",objOut:"113"}]},{name:"texture_out",links:[{portIn:"Texture In",portOut:"texture_out",objIn:"121",objOut:"113"},{portIn:"Texture Colorize",portOut:"texture_out",objIn:"119",objOut:"113"}]},{name:"Aspect Ratio",value:1}]},{objName:"Ops.Gl.Render2Texture",id:"114",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"use viewport size",value:true},{name:"texture width",value:640},{name:"texture height",value:320},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",links:[{portIn:"Trigger In",portOut:"trigger",objIn:"112",objOut:"114"}]},{name:"texture",links:[{portIn:"Image",portOut:"texture",objIn:"115",objOut:"114"}]},{name:"textureDepth"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"115",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"111",objOut:"115"}]}]},{objName:"Ops.Geometry.GeometryToWireframeArray3",id:"116",uiAttribs:{subPatch:0},portsIn:[{name:"Geometry"}],portsOut:[{name:"Array",links:[{portIn:"Array",portOut:"Array",objIn:"118",objOut:"116"}]}]},{objName:"Ops.Gl.Meshes.Torus",id:"117",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"sides",value:32},{name:"rings",value:32},{name:"innerRadius"},{name:"outerRadius",value:1},{name:"Draw",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry",links:[{portIn:"Geometry",portOut:"geometry",objIn:"116",objOut:"117"}]}]},{objName:"Ops.Gl.Meshes.PointCloudFromArray",id:"118",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Array"},{name:"Num Points",value:569},{name:"Scramble Texcoords",value:true},{name:"Seed",value:0},{name:"Coordinates"},{name:"Vertex Colors",value:null}],portsOut:[{name:"Trigger out",value:0},{name:"Geometry"}]},{objName:"Ops.Gl.Shader.PointMaterial_v4",id:"119",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"PointSize",value:9.85},{name:"Size in Pixels",value:false},{name:"Random Size",value:.77},{name:"Round",value:true},{name:"Round Antialias",value:false},{name:"Scale by Distance",value:true},{name:"r",value:.2423241285453822},{name:"g",value:.93067326237001},{name:"b",value:.7715621228998878},{name:"a",value:1},{name:"Vertex Colors",value:false},{name:"texture",value:0},{name:"Colorize Texture",value:false},{name:"Texture Mask",value:0},{name:"Mask Channel index",value:0},{name:"Mask Channel",value:"R"},{name:"Texture Colorize"},{name:"Colorize Randomize",value:true},{name:"Texture Opacity",value:0},{name:"Texture Point Size",value:0},{name:"Point Size Channel index",value:0},{name:"Point Size Channel",value:"R"},{name:"Texture Point Size Mul",value:1},{name:"Map Size 0 index",value:0},{name:"Map Size 0",value:"Black"},{name:"Flip Texture",value:false}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"118",objOut:"119"}]},{name:"shader"}]},{objName:"Ops.Anim.Timer_v2",id:"120",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:35.12},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"anim",portOut:"Time",objIn:"111",objOut:"120"}]}]},{objName:"Ops.Ui.VizTexture",id:"121",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"RGBE Texture",portOut:"Texture Out",objIn:"124",objOut:"121"}]},{name:"Info",value:"10 x 10 8bit linear repeat"}]},{objName:"Ops.Anim.SineAnim",id:"122",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:1},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"innerRadius",portOut:"result",objIn:"117",objOut:"122"}]}]},{objName:"Ops.Gl.TextureToPointArray3",id:"123",uiAttribs:{subPatch:0},portsIn:[{name:"update"},{name:"Center",value:true},{name:"Threshold Remove",value:0},{name:"Z Multiply",value:2.44},{name:"texture"},{name:"Width",value:2},{name:"Height",value:2}],portsOut:[{name:"trigger",links:[{portIn:"Execute",portOut:"trigger",objIn:"124",objOut:"123"}]},{name:"Points",links:[{portIn:"Coordinates",portOut:"Points",objIn:"118",objOut:"123"}]},{name:"Total Points",value:0},{name:"Min Z",value:.02734375},{name:"Max Z",value:0}]},{objName:"Ops.Gl.Textures.TextureToCoordinateGrid",id:"124",uiAttribs:{subPatch:0},portsIn:[{name:"Execute"},{name:"RGBE Texture"},{name:"Aspect",value:1},{name:"Threshold",value:.2}],portsOut:[{name:"Next",value:0},{name:"HDR Texture",links:[{portIn:"texture",portOut:"HDR Texture",objIn:"123",objOut:"124"}]}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"125",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat shape_circle(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float distance = length(uv);\n    return clamp((1.0-distance/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_polygon(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = atan(uv.x, uv.y)+3.14159265359;\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-(cos(floor(0.5+angle/slice)*slice-angle)*length(uv))/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_star(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = atan(uv.x, uv.y);\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-(cos(floor(angle*sides/6.28318530718-0.5+2.0*step(fract(angle*sides/6.28318530718), 0.5))*slice-angle)*length(uv))/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_curved_star(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = 2.0*(atan(uv.x, uv.y)+3.14159265359);\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-cos(floor(0.5+0.5*angle/slice)*2.0*slice-angle)*length(uv)/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_rays(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = 0.5*max(edge, 1.0e-8)*size;\n\tfloat slice = 6.28318530718/sides;\n    float angle = mod(atan(uv.x, uv.y)+3.14159265359, slice)/slice;\n    return clamp(min((size-angle)/edge, angle/edge), 0.0, 1.0);\n}\n\nvec2 rotate(vec2 uv, vec2 center, float rotate) {\n \tvec2 rv;\n\tuv -= center;\n\trv.x = cos(rotate)*uv.x + sin(rotate)*uv.y;\n\trv.y = -sin(rotate)*uv.x + cos(rotate)*uv.y;\n\trv += center;\n    return rv;\t\n}const float p_o13743_cx = 0.000000000;\nconst float p_o13743_cy = 0.000000000;\nconst float p_o13728_gradient_0_pos = 0.000000000;\nconst float p_o13728_gradient_0_r = 1.000000000;\nconst float p_o13728_gradient_0_g = 0.000000000;\nconst float p_o13728_gradient_0_b = 0.000000000;\nconst float p_o13728_gradient_0_a = 1.000000000;\nconst float p_o13728_gradient_1_pos = 0.399003000;\nconst float p_o13728_gradient_1_r = 0.035911001;\nconst float p_o13728_gradient_1_g = 0.145328000;\nconst float p_o13728_gradient_1_b = 0.574576974;\nconst float p_o13728_gradient_1_a = 1.000000000;\nconst float p_o13728_gradient_2_pos = 0.662365000;\nconst float p_o13728_gradient_2_r = 0.098465003;\nconst float p_o13728_gradient_2_g = 0.185066000;\nconst float p_o13728_gradient_2_b = 0.933593988;\nconst float p_o13728_gradient_2_a = 1.000000000;\nconst float p_o13728_gradient_3_pos = 1.000000000;\nconst float p_o13728_gradient_3_r = 0.000000000;\nconst float p_o13728_gradient_3_g = 0.062500000;\nconst float p_o13728_gradient_3_b = 1.000000000;\nconst float p_o13728_gradient_3_a = 1.000000000;\nvec4 o13728_gradient_gradient_fct(float x) {\n  if (x < p_o13728_gradient_0_pos) {\n    return vec4(p_o13728_gradient_0_r,p_o13728_gradient_0_g,p_o13728_gradient_0_b,p_o13728_gradient_0_a);\n  } else if (x < p_o13728_gradient_1_pos) {\n    return mix(vec4(p_o13728_gradient_0_r,p_o13728_gradient_0_g,p_o13728_gradient_0_b,p_o13728_gradient_0_a), vec4(p_o13728_gradient_1_r,p_o13728_gradient_1_g,p_o13728_gradient_1_b,p_o13728_gradient_1_a), ((x-p_o13728_gradient_0_pos)/(p_o13728_gradient_1_pos-p_o13728_gradient_0_pos)));\n  } else if (x < p_o13728_gradient_2_pos) {\n    return mix(vec4(p_o13728_gradient_1_r,p_o13728_gradient_1_g,p_o13728_gradient_1_b,p_o13728_gradient_1_a), vec4(p_o13728_gradient_2_r,p_o13728_gradient_2_g,p_o13728_gradient_2_b,p_o13728_gradient_2_a), ((x-p_o13728_gradient_1_pos)/(p_o13728_gradient_2_pos-p_o13728_gradient_1_pos)));\n  } else if (x < p_o13728_gradient_3_pos) {\n    return mix(vec4(p_o13728_gradient_2_r,p_o13728_gradient_2_g,p_o13728_gradient_2_b,p_o13728_gradient_2_a), vec4(p_o13728_gradient_3_r,p_o13728_gradient_3_g,p_o13728_gradient_3_b,p_o13728_gradient_3_a), ((x-p_o13728_gradient_2_pos)/(p_o13728_gradient_3_pos-p_o13728_gradient_2_pos)));\n  }\n  return vec4(p_o13728_gradient_3_r,p_o13728_gradient_3_g,p_o13728_gradient_3_b,p_o13728_gradient_3_a);\n}\nconst float p_o13689_radius = 1.000000000;\nconst float p_o13689_repeat = 1.000000000;\nconst float p_o13688_radius = 1.000000000;\nconst float p_o13688_repeat = 1.000000000;\nconst float p_o13687_radius = 1.500000000;\nconst float p_o13687_repeat = 1.000000000;\nconst float p_o13690_cx = 0.700000000;\nconst float p_o13686_sides = 5.000000000;\nconst float p_o13686_radius = 0.640000000;\nconst float p_o13686_edge = 0.500000000;\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o13686_0_1_f = shape_polygon((rotate((vec2(fract(p_o13687_repeat*atan((vec2(fract(p_o13688_repeat*atan((vec2(fract(p_o13689_repeat*atan((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13689_radius*length((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o13689_repeat*atan((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13689_radius*length((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13688_radius*length((vec2(fract(p_o13689_repeat*atan((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13689_radius*length((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5))))).y-0.5, (vec2(fract(p_o13688_repeat*atan((vec2(fract(p_o13689_repeat*atan((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13689_radius*length((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o13689_repeat*atan((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13689_radius*length((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13688_radius*length((vec2(fract(p_o13689_repeat*atan((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13689_radius*length((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13687_radius*length((vec2(fract(p_o13688_repeat*atan((vec2(fract(p_o13689_repeat*atan((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13689_radius*length((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o13689_repeat*atan((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13689_radius*length((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13688_radius*length((vec2(fract(p_o13689_repeat*atan((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o13689_radius*length((rotate((UV), vec2(0.5+p_o13743_cx, 0.5+p_o13743_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5)))))-vec2(0.5))))), vec2(0.5+p_o13690_cx, 0.5+(sin(iTime * 0.009) * (iTime * 0.0005))), (sin(iTime * 0.05) * (iTime))*0.01745329251)), p_o13686_sides, p_o13686_radius*1.0, p_o13686_edge*1.0);\nvec4 o13690_0_1_rgba = vec4(vec3(o13686_0_1_f), 1.0);\nvec4 o13687_0_1_rgba = o13690_0_1_rgba;\nvec4 o13688_0_1_rgba = o13687_0_1_rgba;\nvec4 o13689_0_1_rgba = o13688_0_1_rgba;\nvec4 o13728_0_1_rgba = o13728_gradient_gradient_fct((dot((o13689_0_1_rgba).rgb, vec3(1.0))/3.0));\nvec4 o13743_0_1_rgba = o13728_0_1_rgba;\ngl_FragColor = o13743_0_1_rgba;\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1.02},{name:"iResolution Y",value:.95},{name:"iResolution Z",value:1.29},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"126",objOut:"125"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"126",objOut:"125"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"126",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"132",objOut:"126"}]},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"129",objOut:"126"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"127",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:2.47},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"125",objOut:"127"}]}]},{objName:"Ops.Sequence",id:"128",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"125",objOut:"128"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",links:[{portIn:"Render",portOut:"trigger 15",objIn:"145",objOut:"128"}]}]},{objName:"Ops.Ui.VizTexture",id:"129",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"130",objOut:"129"}]},{name:"Info",value:"640 x 320 32bit nearest repeatmir"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"130",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"138",objOut:"130"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"131",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"clamp to edge"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"130",objOut:"131"},{portIn:"exe",portOut:"Next",objIn:"128",objOut:"131"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"135",objOut:"131"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"132",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"width",value:1},{name:"height",value:1},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"133",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"time",value:0},{name:"SpeedX",value:4},{name:"SpeedY",value:8},{name:"RepeatX",value:11.36},{name:"RepeatY",value:9.14},{name:"Multiply",value:.05},{name:"Mask"}],portsOut:[{name:"Trigger",links:[{portIn:"exe 13",portOut:"Trigger",objIn:"842",objOut:"133"}]}]},{objName:"Ops.Gl.GradientTexture",id:"134",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":1,"g":0,"b":0},{"pos":0.308,"r":1,"g":0,"b":0},{"pos":0.708,"r":8.881784197001252e-16,"g":0,"b":1},{"pos":1,"r":8.881784197001252e-16,"g":0,"b":1}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:false},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Mask",portOut:"Texture",objIn:"138",objOut:"134"},{portIn:"Mask",portOut:"Texture",objIn:"133",objOut:"134"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"135",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"136",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:57},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"137",objOut:"136"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"9"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"137",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:7}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"137"}]}]},{objName:"Ops.Gl.TextureEffects.ChromaticAberration",id:"138",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"add"},{name:"Amount",value:.716},{name:"Pixel",value:5.01},{name:"Lens Distort",value:.762},{name:"Smooth",value:false},{name:"Mask"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"133",objOut:"138"}]}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"139",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat shape_circle(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float distance = length(uv);\n    return clamp((1.0-distance/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_polygon(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = atan(uv.x, uv.y)+3.14159265359;\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-(cos(floor(0.5+angle/slice)*slice-angle)*length(uv))/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_star(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = atan(uv.x, uv.y);\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-(cos(floor(angle*sides/6.28318530718-0.5+2.0*step(fract(angle*sides/6.28318530718), 0.5))*slice-angle)*length(uv))/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_curved_star(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = 2.0*(atan(uv.x, uv.y)+3.14159265359);\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-cos(floor(0.5+0.5*angle/slice)*2.0*slice-angle)*length(uv)/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_rays(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = 0.5*max(edge, 1.0e-8)*size;\n\tfloat slice = 6.28318530718/sides;\n    float angle = mod(atan(uv.x, uv.y)+3.14159265359, slice)/slice;\n    return clamp(min((size-angle)/edge, angle/edge), 0.0, 1.0);\n}\n\nvec2 rotate(vec2 uv, vec2 center, float rotate) {\n \tvec2 rv;\n\tuv -= center;\n\trv.x = cos(rotate)*uv.x + sin(rotate)*uv.y;\n\trv.y = -sin(rotate)*uv.x + cos(rotate)*uv.y;\n\trv += center;\n    return rv;\t\n}vec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nconst float p_o689653_gradient_0_pos = 0.000000000;\nconst float p_o689653_gradient_0_r = 1.000000000;\nconst float p_o689653_gradient_0_g = 0.000000000;\nconst float p_o689653_gradient_0_b = 0.000000000;\nconst float p_o689653_gradient_0_a = 1.000000000;\nconst float p_o689653_gradient_1_pos = 0.163563954;\nconst float p_o689653_gradient_1_r = 0.000000000;\nconst float p_o689653_gradient_1_g = 1.000000000;\nconst float p_o689653_gradient_1_b = 0.125000000;\nconst float p_o689653_gradient_1_a = 1.000000000;\nconst float p_o689653_gradient_2_pos = 0.340910756;\nconst float p_o689653_gradient_2_r = 0.000000000;\nconst float p_o689653_gradient_2_g = 0.062500000;\nconst float p_o689653_gradient_2_b = 1.000000000;\nconst float p_o689653_gradient_2_a = 1.000000000;\nvec4 o689653_gradient_gradient_fct(float x) {\n  if (x < p_o689653_gradient_0_pos) {\n    return vec4(p_o689653_gradient_0_r,p_o689653_gradient_0_g,p_o689653_gradient_0_b,p_o689653_gradient_0_a);\n  } else if (x < p_o689653_gradient_1_pos) {\n    return mix(vec4(p_o689653_gradient_0_r,p_o689653_gradient_0_g,p_o689653_gradient_0_b,p_o689653_gradient_0_a), vec4(p_o689653_gradient_1_r,p_o689653_gradient_1_g,p_o689653_gradient_1_b,p_o689653_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o689653_gradient_0_pos)/(p_o689653_gradient_1_pos-p_o689653_gradient_0_pos)));\n  } else if (x < p_o689653_gradient_2_pos) {\n    return mix(vec4(p_o689653_gradient_1_r,p_o689653_gradient_1_g,p_o689653_gradient_1_b,p_o689653_gradient_1_a), vec4(p_o689653_gradient_2_r,p_o689653_gradient_2_g,p_o689653_gradient_2_b,p_o689653_gradient_2_a), 0.5-0.5*cos(3.14159265359*(x-p_o689653_gradient_1_pos)/(p_o689653_gradient_2_pos-p_o689653_gradient_1_pos)));\n  }\n  return vec4(p_o689653_gradient_2_r,p_o689653_gradient_2_g,p_o689653_gradient_2_b,p_o689653_gradient_2_a);\n}\nconst float p_o85415_amount = 14.780000000;\nconst float p_o370586_cx = 0.000000000;\nconst float p_o370586_cy = 0.000000000;\nconst float p_o265706_gradient_0_pos = 0.000000000;\nconst float p_o265706_gradient_0_r = 1.000000000;\nconst float p_o265706_gradient_0_g = 0.000000000;\nconst float p_o265706_gradient_0_b = 0.000000000;\nconst float p_o265706_gradient_0_a = 1.000000000;\nconst float p_o265706_gradient_1_pos = 0.399003462;\nconst float p_o265706_gradient_1_r = 0.035911076;\nconst float p_o265706_gradient_1_g = 0.145327628;\nconst float p_o265706_gradient_1_b = 0.574577212;\nconst float p_o265706_gradient_1_a = 1.000000000;\nconst float p_o265706_gradient_2_pos = 0.662364613;\nconst float p_o265706_gradient_2_r = 0.098464966;\nconst float p_o265706_gradient_2_g = 0.185065985;\nconst float p_o265706_gradient_2_b = 0.933593750;\nconst float p_o265706_gradient_2_a = 1.000000000;\nconst float p_o265706_gradient_3_pos = 1.000000000;\nconst float p_o265706_gradient_3_r = 0.000000000;\nconst float p_o265706_gradient_3_g = 0.062500000;\nconst float p_o265706_gradient_3_b = 1.000000000;\nconst float p_o265706_gradient_3_a = 1.000000000;\nvec4 o265706_gradient_gradient_fct(float x) {\n  if (x < p_o265706_gradient_0_pos) {\n    return vec4(p_o265706_gradient_0_r,p_o265706_gradient_0_g,p_o265706_gradient_0_b,p_o265706_gradient_0_a);\n  } else if (x < p_o265706_gradient_1_pos) {\n    return mix(vec4(p_o265706_gradient_0_r,p_o265706_gradient_0_g,p_o265706_gradient_0_b,p_o265706_gradient_0_a), vec4(p_o265706_gradient_1_r,p_o265706_gradient_1_g,p_o265706_gradient_1_b,p_o265706_gradient_1_a), ((x-p_o265706_gradient_0_pos)/(p_o265706_gradient_1_pos-p_o265706_gradient_0_pos)));\n  } else if (x < p_o265706_gradient_2_pos) {\n    return mix(vec4(p_o265706_gradient_1_r,p_o265706_gradient_1_g,p_o265706_gradient_1_b,p_o265706_gradient_1_a), vec4(p_o265706_gradient_2_r,p_o265706_gradient_2_g,p_o265706_gradient_2_b,p_o265706_gradient_2_a), ((x-p_o265706_gradient_1_pos)/(p_o265706_gradient_2_pos-p_o265706_gradient_1_pos)));\n  } else if (x < p_o265706_gradient_3_pos) {\n    return mix(vec4(p_o265706_gradient_2_r,p_o265706_gradient_2_g,p_o265706_gradient_2_b,p_o265706_gradient_2_a), vec4(p_o265706_gradient_3_r,p_o265706_gradient_3_g,p_o265706_gradient_3_b,p_o265706_gradient_3_a), ((x-p_o265706_gradient_2_pos)/(p_o265706_gradient_3_pos-p_o265706_gradient_2_pos)));\n  }\n  return vec4(p_o265706_gradient_3_r,p_o265706_gradient_3_g,p_o265706_gradient_3_b,p_o265706_gradient_3_a);\n}\nconst float p_o27497_radius = 1.000000000;\nconst float p_o27497_repeat = 7.000000000;\nconst float p_o22106_radius = 1.000000000;\nconst float p_o22106_repeat = 1.000000000;\nconst float p_o15531_radius = 1.500000000;\nconst float p_o15531_repeat = 1.000000000;\nconst float p_o35637_cx = 0.000000000;\nconst float p_o9383_sides = 5.000000000;\nconst float p_o9383_radius = 0.640000000;\nconst float p_o9383_edge = 0.500000000;\nvec3 o559231_input_in(vec2 uv, float _seed_variation_) {\nfloat o9383_0_1_f = shape_polygon((rotate((vec2(fract(p_o15531_repeat*atan((vec2(fract(p_o22106_repeat*atan((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o22106_radius*length((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5))))).y-0.5, (vec2(fract(p_o22106_repeat*atan((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o22106_radius*length((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o15531_radius*length((vec2(fract(p_o22106_repeat*atan((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o22106_radius*length((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5)))))-vec2(0.5))))), vec2(0.5+p_o35637_cx, 0.5+(sin(iTime * 0.009) * (iTime * 0.0008))), (sin(iTime * 0.05) * (iTime))*0.01745329251)), p_o9383_sides, p_o9383_radius*1.0, p_o9383_edge*1.0);\nvec4 o35637_0_1_rgba = vec4(vec3(o9383_0_1_f), 1.0);\nvec4 o15531_0_1_rgba = o35637_0_1_rgba;\nvec4 o22106_0_1_rgba = o15531_0_1_rgba;\nvec4 o27497_0_1_rgba = o22106_0_1_rgba;\nvec4 o265706_0_1_rgba = o265706_gradient_gradient_fct((dot((o27497_0_1_rgba).rgb, vec3(1.0))/3.0));\nvec4 o370586_0_1_rgba = o265706_0_1_rgba;\n\nreturn ((o370586_0_1_rgba).rgb);\n}\nfloat o559231_fct(vec2 uv, float _seed_variation_) {\n\tvec2 e = vec2(1.0/512.000000000, -1.0/512.000000000);\n\tvec3 rv = 4.0*o559231_input_in(uv, _seed_variation_);\n\trv -= o559231_input_in(uv+e.xy, _seed_variation_);\n\trv -= o559231_input_in(uv-e.xy, _seed_variation_);\n\trv -= o559231_input_in(uv+e.xx, _seed_variation_);\n\trv -= o559231_input_in(uv-e.xx, _seed_variation_);\n\trv = abs(rv);\n\treturn max(rv.x, max(rv.y ,rv.z))*512.000000000;\n}const float p_o180891_gradient_0_pos = 0.000000000;\nconst float p_o180891_gradient_0_r = 0.988281250;\nconst float p_o180891_gradient_0_g = 0.000000000;\nconst float p_o180891_gradient_0_b = 0.000000000;\nconst float p_o180891_gradient_0_a = 1.000000000;\nconst float p_o180891_gradient_1_pos = 1.000000000;\nconst float p_o180891_gradient_1_r = 1.000000000;\nconst float p_o180891_gradient_1_g = 0.171875000;\nconst float p_o180891_gradient_1_b = 0.909423828;\nconst float p_o180891_gradient_1_a = 1.000000000;\nvec4 o180891_gradient_gradient_fct(float x) {\n  if (x < p_o180891_gradient_0_pos) {\n    return vec4(p_o180891_gradient_0_r,p_o180891_gradient_0_g,p_o180891_gradient_0_b,p_o180891_gradient_0_a);\n  } else if (x < p_o180891_gradient_1_pos) {\n    return mix(vec4(p_o180891_gradient_0_r,p_o180891_gradient_0_g,p_o180891_gradient_0_b,p_o180891_gradient_0_a), vec4(p_o180891_gradient_1_r,p_o180891_gradient_1_g,p_o180891_gradient_1_b,p_o180891_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o180891_gradient_0_pos)/(p_o180891_gradient_1_pos-p_o180891_gradient_0_pos)));\n  }\n  return vec4(p_o180891_gradient_1_r,p_o180891_gradient_1_g,p_o180891_gradient_1_b,p_o180891_gradient_1_a);\n}\nvec2 o116913_input_sdf(vec3 p, float _seed_variation_) {\nfloat o111232_0_1_sdf3d = length((p))-(sin(iTime * 0.3));\n\nreturn vec2(o111232_0_1_sdf3d, 0.0);\n}\nvec2 raymarch_o116913(vec2 uv, float _seed_variation_) {\n\tvec3 ro = vec3(uv-vec2(0.5), 1.0);\n\tvec3 rd = vec3(0.0, 0.0, -1.0);\n\tfloat dO = 0.0;\n\tfloat c = 0.0;\n    for (int i=0; i < 100; i++) {\n    \tvec3 p = ro + rd*dO;\n        vec2 dS = o116913_input_sdf(p, _seed_variation_);\n        dO += dS.x;\n\n        if (dO >= 1.0) {\n\t\t\tbreak;\n\t\t} else if (dS.x < 0.0001) {\n\t\t\tc = dS.y;\n\t\t\tbreak;\n\t\t}\n    }\n    \n    return vec2(dO, c);\n}\n\nvec3 normal_o116913(vec3 p, float _seed_variation_) {\n\tif (p.z <= 0.0) {\n\t\treturn vec3(0.0, 0.0, 1.0);\n\t}\n\n\tfloat d = o116913_input_sdf(p, _seed_variation_).x;\n    float e = .001;\n    \n    vec3 n = d - vec3(\n        o116913_input_sdf(p-vec3(e, 0.0, 0.0), _seed_variation_).x,\n        o116913_input_sdf(p-vec3(0.0, e, 0.0), _seed_variation_).x,\n        o116913_input_sdf(p-vec3(0.0, 0.0, e), _seed_variation_).x);\n    \n    return vec3(-1.0, -1.0, -1.0)*normalize(n);\n}\n\nconst float p_o164084_w = 0.300000000;\nvec4 o164084_input_in(vec2 uv, float _seed_variation_) {\nvec2 o116913_0_d = raymarch_o116913((uv), _seed_variation_);\nfloat o116913_0_1_f = 1.0-o116913_0_d.x;\n\nreturn vec4(vec3(o116913_0_1_f), 1.0);\n}\nvec4 make_tileable_o164084(vec2 uv, float w, float _seed_variation_) {\n\tvec4 a = o164084_input_in(uv, _seed_variation_);\n\tvec4 b = o164084_input_in(fract(uv+vec2(0.5)), _seed_variation_);\n\tfloat coef_ab = sin(1.57079632679*clamp((length(uv-vec2(0.5))-0.5+w)/w, 0.0, 1.0));\n\tvec4 c = o164084_input_in(fract(uv+vec2(0.25)), _seed_variation_);\n\tfloat coef_abc = sin(1.57079632679*clamp((min(min(length(uv-vec2(0.0, 0.5)), length(uv-vec2(0.5, 0.0))), min(length(uv-vec2(1.0, 0.5)), length(uv-vec2(0.5, 1.0))))-w)/w, 0.0, 1.0));\n\treturn mix(c, mix(a, b, coef_ab), coef_abc);\n}\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o559231_0_1_f = clamp(o559231_fct((UV), _seed_variation_), 0.0, 1.0);\nvec2 o116913_0_d = raymarch_o116913((UV), _seed_variation_);\nvec3 o116913_1_1_rgb = vec3(0.5)+0.5*normal_o116913(vec3((UV)-vec2(0.5), 1.0-o116913_0_d.x), _seed_variation_);\nvec4 o180891_0_1_rgba = o180891_gradient_gradient_fct((dot(o116913_1_1_rgb, vec3(1.0))/3.0));\nvec4 o164084_0_1_rgba = make_tileable_o164084((UV), 0.5*p_o164084_w, _seed_variation_);\nvec4 o85415_0_s1 = vec4(vec3(o559231_0_1_f), 1.0);\nvec4 o85415_0_s2 = o180891_0_1_rgba;\nfloat o85415_0_a = p_o85415_amount*(dot((o164084_0_1_rgba).rgb, vec3(1.0))/3.0);\nvec4 o85415_0_1_rgba = vec4(blend_multiply((UV), o85415_0_s1.rgb, o85415_0_s2.rgb, o85415_0_a*o85415_0_s1.a), min(1.0, o85415_0_s2.a+o85415_0_a*o85415_0_s1.a));\nvec4 o689653_0_1_rgba = o689653_gradient_gradient_fct((dot((o85415_0_1_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o689653_0_1_rgba;\n}\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"140",objOut:"139"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"140",objOut:"139"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"140",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"146",objOut:"140"}]},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"143",objOut:"140"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"141",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:.72},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"139",objOut:"141"}]}]},{objName:"Ops.Sequence",id:"142",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"139",objOut:"142"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",links:[{portIn:"Render",portOut:"trigger 15",objIn:"781",objOut:"142"}]}]},{objName:"Ops.Ui.VizTexture",id:"143",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"144",objOut:"143"}]},{name:"Info",value:"640 x 320 32bit nearest repeatmir"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"144",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"149",objOut:"144"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"145",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"clamp to edge"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"144",objOut:"145"},{portIn:"exe",portOut:"Next",objIn:"142",objOut:"145"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"150",objOut:"145"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"146",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"width",value:1},{name:"height",value:1},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.GradientTexture",id:"147",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":8.881784197001252e-16,"g":0,"b":1},{"pos":0.02,"r":8.881784197001252e-16,"g":0,"b":1},{"pos":0.21,"r":1,"g":0,"b":0},{"pos":0.488,"r":0.7520159698207888,"g":0.2980955505283348,"b":0.7255181847110971},{"pos":1,"r":0.7520159698207888,"g":0.2980955505283348,"b":0.7255181847110971}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:false},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Mask",portOut:"Texture",objIn:"149",objOut:"147"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"148",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:0},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat box(vec2 uv, vec3 center, vec3 rad, vec3 rot) {\n\tvec3 ro = vec3(uv, 1.0)-center;\n\tvec3 rd = vec3(0.0000001, 0.0000001, -1.0);\n\tmat3 r = mat3(vec3(1, 0, 0), vec3(0, cos(rot.x), -sin(rot.x)), vec3(0, sin(rot.x), cos(rot.x)));\n\tr *= mat3(vec3(cos(rot.y), 0, -sin(rot.y)), vec3(0, 1, 0), vec3(sin(rot.y), 0, cos(rot.y)));\n\tr *= mat3(vec3(cos(rot.z), -sin(rot.z), 0), vec3(sin(rot.z), cos(rot.z), 0), vec3(0, 0, 1));\n\tro = r * ro;\n\trd = r * rd;\n    vec3 m = 1.0/rd;\n    vec3 n = m*ro;\n    vec3 k = abs(m)*rad;\n    vec3 t1 = -n - k;\n    vec3 t2 = -n + k;\n\n    float tN = max(max(t1.x, t1.y), t1.z);\n    float tF = min(min(t2.x, t2.y), t2.z);\n    if(tN>tF || tF<0.0) return 1.0;\n    return tN;\n}float sphere(vec2 uv, vec2 c, float r) {\n\tuv -= c;\n\tuv /= r;\n\treturn 2.0*r*sqrt(max(0.0, 1.0-dot(uv, uv)));\n}\nvec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nconst float p_o419741_gradient_0_pos = 0.000000000;\nconst float p_o419741_gradient_0_r = 1.000000000;\nconst float p_o419741_gradient_0_g = 0.000000000;\nconst float p_o419741_gradient_0_b = 0.000000000;\nconst float p_o419741_gradient_0_a = 1.000000000;\nconst float p_o419741_gradient_1_pos = 0.144273793;\nconst float p_o419741_gradient_1_r = 1.000000000;\nconst float p_o419741_gradient_1_g = 0.968750000;\nconst float p_o419741_gradient_1_b = 0.000000000;\nconst float p_o419741_gradient_1_a = 1.000000000;\nconst float p_o419741_gradient_2_pos = 0.274273404;\nconst float p_o419741_gradient_2_r = 1.000000000;\nconst float p_o419741_gradient_2_g = 0.000000000;\nconst float p_o419741_gradient_2_b = 0.000000000;\nconst float p_o419741_gradient_2_a = 1.000000000;\nconst float p_o419741_gradient_3_pos = 0.414273349;\nconst float p_o419741_gradient_3_r = 0.843750000;\nconst float p_o419741_gradient_3_g = 0.000000000;\nconst float p_o419741_gradient_3_b = 1.000000000;\nconst float p_o419741_gradient_3_a = 1.000000000;\nconst float p_o419741_gradient_4_pos = 0.854273571;\nconst float p_o419741_gradient_4_r = 0.000000000;\nconst float p_o419741_gradient_4_g = 0.062500000;\nconst float p_o419741_gradient_4_b = 1.000000000;\nconst float p_o419741_gradient_4_a = 1.000000000;\nvec4 o419741_gradient_gradient_fct(float x) {\n  if (x < p_o419741_gradient_0_pos) {\n    return vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a);\n  } else if (x < p_o419741_gradient_1_pos) {\n    return mix(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)), mix(vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a), vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), (x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos)), 1.0-0.5*(x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos));\n  } else if (x < p_o419741_gradient_2_pos) {\n    return 0.5*(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)) + mix(mix(vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a), vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), (x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos)), mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)), 0.5-0.5*cos(3.14159265359*(x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos))));\n  } else if (x < p_o419741_gradient_3_pos) {\n    return 0.5*(mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)) + mix(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)), mix(vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a), (x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos)), 0.5-0.5*cos(3.14159265359*(x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos))));\n  } else if (x < p_o419741_gradient_4_pos) {\n    return mix(mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)), mix(vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a), (x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos)), 0.5+0.5*(x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos));\n  }\n  return vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a);\n}\nconst float p_o398645_amount = 11.760000000;\nconst float p_o479214_gradient_0_pos = 0.025183105;\nconst float p_o479214_gradient_0_r = 1.000000000;\nconst float p_o479214_gradient_0_g = 0.000000000;\nconst float p_o479214_gradient_0_b = 0.000000000;\nconst float p_o479214_gradient_0_a = 1.000000000;\nconst float p_o479214_gradient_1_pos = 0.435182884;\nconst float p_o479214_gradient_1_r = 1.000000000;\nconst float p_o479214_gradient_1_g = 0.968750000;\nconst float p_o479214_gradient_1_b = 0.000000000;\nconst float p_o479214_gradient_1_a = 1.000000000;\nconst float p_o479214_gradient_2_pos = 0.590909368;\nconst float p_o479214_gradient_2_r = 0.000000000;\nconst float p_o479214_gradient_2_g = 1.000000000;\nconst float p_o479214_gradient_2_b = 0.125000000;\nconst float p_o479214_gradient_2_a = 1.000000000;\nconst float p_o479214_gradient_3_pos = 0.915182218;\nconst float p_o479214_gradient_3_r = 0.000000000;\nconst float p_o479214_gradient_3_g = 0.062500000;\nconst float p_o479214_gradient_3_b = 1.000000000;\nconst float p_o479214_gradient_3_a = 1.000000000;\nvec4 o479214_gradient_gradient_fct(float x) {\n  if (x < p_o479214_gradient_0_pos) {\n    return vec4(p_o479214_gradient_0_r,p_o479214_gradient_0_g,p_o479214_gradient_0_b,p_o479214_gradient_0_a);\n  } else if (x < p_o479214_gradient_1_pos) {\n    return mix(vec4(p_o479214_gradient_0_r,p_o479214_gradient_0_g,p_o479214_gradient_0_b,p_o479214_gradient_0_a), vec4(p_o479214_gradient_1_r,p_o479214_gradient_1_g,p_o479214_gradient_1_b,p_o479214_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_0_pos)/(p_o479214_gradient_1_pos-p_o479214_gradient_0_pos)));\n  } else if (x < p_o479214_gradient_2_pos) {\n    return mix(vec4(p_o479214_gradient_1_r,p_o479214_gradient_1_g,p_o479214_gradient_1_b,p_o479214_gradient_1_a), vec4(p_o479214_gradient_2_r,p_o479214_gradient_2_g,p_o479214_gradient_2_b,p_o479214_gradient_2_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_1_pos)/(p_o479214_gradient_2_pos-p_o479214_gradient_1_pos)));\n  } else if (x < p_o479214_gradient_3_pos) {\n    return mix(vec4(p_o479214_gradient_2_r,p_o479214_gradient_2_g,p_o479214_gradient_2_b,p_o479214_gradient_2_a), vec4(p_o479214_gradient_3_r,p_o479214_gradient_3_g,p_o479214_gradient_3_b,p_o479214_gradient_3_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_2_pos)/(p_o479214_gradient_3_pos-p_o479214_gradient_2_pos)));\n  }\n  return vec4(p_o479214_gradient_3_r,p_o479214_gradient_3_g,p_o479214_gradient_3_b,p_o479214_gradient_3_a);\n}\nconst float p_o520101_repeat = 6.000000000;\nconst float p_o270325_cx = 0.500000000;\nconst float p_o270325_cy = 0.500000000;\nconst float p_o270325_cz = 0.500000000;\nconst float p_o270325_sx = 0.250000000;\nconst float p_o270325_sy = 0.250000000;\nconst float p_o270325_sz = 0.250000000;\nconst float p_o270325_ry = 2.000000000;\nconst float p_o207924_d = 0.710000000;\nconst float p_o553530_radius = 0.320000000;\nconst float p_o553530_repeat = 5.000000000;\nconst float p_o57201_cx = 0.500000000;\nconst float p_o57201_cy = 0.710000000;\nconst float p_o254341_r = 0.500000000;\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o270325_0_1_f = 1.0-box((vec2(fract(p_o520101_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/(cos(iTime*0.001))*length((UV)-vec2(0.5))))), vec3(p_o270325_cx, p_o270325_cy, p_o270325_cz), vec3(p_o270325_sx, p_o270325_sy, p_o270325_sz), 0.01745329251*vec3((sin(iTime*0.9)*sin(iTime*0.9)), p_o270325_ry, (sin(iTime*0.9)*sin(iTime*0.9)*abs(iTime))));\nvec4 o520101_0_1_rgba = vec4(vec3(o270325_0_1_f), 1.0);\nvec4 o479214_0_1_rgba = o479214_gradient_gradient_fct((dot((o520101_0_1_rgba).rgb, vec3(1.0))/3.0));\nfloat o57201_0_1_f = sphere((vec2(fract(p_o553530_repeat*atan(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5)).y-0.5, ((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o553530_radius*length(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5))-vec2(0.5))))), vec2(p_o57201_cx, p_o57201_cy), (sin(iTime*0.2)*sin(iTime*0.9)));\nvec4 o553530_0_1_rgba = vec4(vec3(o57201_0_1_f), 1.0);\nvec3 o241986_0_1_tex3d = ((o553530_0_1_rgba).rgb);\nvec2 o254341_0_q = vec2(length(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xyz).xy)-(sin(iTime*0.2)),((vec4(((o479214_0_1_rgba).rgb), 0.0)).xyz).z);\nfloat o254341_0_1_sdf3d = length(o254341_0_q)-p_o254341_r;\nvec3 o207924_0_1_tex3d = mix(o241986_0_1_tex3d, vec3(0.5), clamp(o254341_0_1_sdf3d/max(p_o207924_d, 0.0001), 0.0, 1.0));\nvec3 o245261_0_1_rgb = o207924_0_1_tex3d;\nvec3 o241986_0_3_tex3d = ((o553530_0_1_rgba).rgb);\nvec3 o818931_0_1_rgb = o241986_0_3_tex3d;\nfloat o57201_0_3_f = sphere((vec2(fract(p_o553530_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o553530_radius*length((UV)-vec2(0.5))))), vec2(p_o57201_cx, p_o57201_cy), (sin(iTime*0.2)*sin(iTime*0.9)));\nvec4 o553530_0_3_rgba = vec4(vec3(o57201_0_3_f), 1.0);\nvec4 o398645_0_s1 = vec4(o245261_0_1_rgb, 1.0);\nvec4 o398645_0_s2 = vec4(o818931_0_1_rgb, 1.0);\nfloat o398645_0_a = p_o398645_amount*(dot((o553530_0_3_rgba).rgb, vec3(1.0))/3.0);\nvec4 o398645_0_1_rgba = vec4(blend_soft_light((UV), o398645_0_s1.rgb, o398645_0_s2.rgb, o398645_0_a*o398645_0_s1.a), min(1.0, o398645_0_s2.a+o398645_0_a*o398645_0_s1.a));\nvec4 o419741_0_1_rgba = o419741_gradient_gradient_fct((dot((o398645_0_1_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o419741_0_1_rgba;\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime",value:0}],portsOut:[{name:"trigger",value:0},{name:"Shader"},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.TextureEffects.ChromaticAberration",id:"149",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"add"},{name:"Amount",value:.716},{name:"Pixel",value:5.01},{name:"Lens Distort",value:.762},{name:"Smooth",value:false},{name:"Mask"}],portsOut:[{name:"trigger",links:[{portIn:"exe 14",portOut:"trigger",objIn:"842",objOut:"149"}]}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"150",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"151",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:48},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"152",objOut:"151"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"0"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"152",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:8}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"152"}]}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"153",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:0},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat shape_circle(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float distance = length(uv);\n    return clamp((1.0-distance/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_polygon(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = atan(uv.x, uv.y)+3.14159265359;\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-(cos(floor(0.5+angle/slice)*slice-angle)*length(uv))/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_star(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = atan(uv.x, uv.y);\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-(cos(floor(angle*sides/6.28318530718-0.5+2.0*step(fract(angle*sides/6.28318530718), 0.5))*slice-angle)*length(uv))/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_curved_star(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = 2.0*(atan(uv.x, uv.y)+3.14159265359);\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-cos(floor(0.5+0.5*angle/slice)*2.0*slice-angle)*length(uv)/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_rays(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = 0.5*max(edge, 1.0e-8)*size;\n\tfloat slice = 6.28318530718/sides;\n    float angle = mod(atan(uv.x, uv.y)+3.14159265359, slice)/slice;\n    return clamp(min((size-angle)/edge, angle/edge), 0.0, 1.0);\n}\n\nvec2 rotate(vec2 uv, vec2 center, float rotate) {\n \tvec2 rv;\n\tuv -= center;\n\trv.x = cos(rotate)*uv.x + sin(rotate)*uv.y;\n\trv.y = -sin(rotate)*uv.x + cos(rotate)*uv.y;\n\trv += center;\n    return rv;\t\n}const float p_o370586_cx = 0.000000000;\nconst float p_o370586_cy = 0.000000000;\nconst float p_o265706_gradient_0_pos = 0.000000000;\nconst float p_o265706_gradient_0_r = 1.000000000;\nconst float p_o265706_gradient_0_g = 0.000000000;\nconst float p_o265706_gradient_0_b = 0.000000000;\nconst float p_o265706_gradient_0_a = 1.000000000;\nconst float p_o265706_gradient_1_pos = 0.399003462;\nconst float p_o265706_gradient_1_r = 0.035911076;\nconst float p_o265706_gradient_1_g = 0.145327628;\nconst float p_o265706_gradient_1_b = 0.574577212;\nconst float p_o265706_gradient_1_a = 1.000000000;\nconst float p_o265706_gradient_2_pos = 0.662364613;\nconst float p_o265706_gradient_2_r = 0.098464966;\nconst float p_o265706_gradient_2_g = 0.185065985;\nconst float p_o265706_gradient_2_b = 0.933593750;\nconst float p_o265706_gradient_2_a = 1.000000000;\nconst float p_o265706_gradient_3_pos = 1.000000000;\nconst float p_o265706_gradient_3_r = 0.000000000;\nconst float p_o265706_gradient_3_g = 0.062500000;\nconst float p_o265706_gradient_3_b = 1.000000000;\nconst float p_o265706_gradient_3_a = 1.000000000;\nvec4 o265706_gradient_gradient_fct(float x) {\n  if (x < p_o265706_gradient_0_pos) {\n    return vec4(p_o265706_gradient_0_r,p_o265706_gradient_0_g,p_o265706_gradient_0_b,p_o265706_gradient_0_a);\n  } else if (x < p_o265706_gradient_1_pos) {\n    return mix(vec4(p_o265706_gradient_0_r,p_o265706_gradient_0_g,p_o265706_gradient_0_b,p_o265706_gradient_0_a), vec4(p_o265706_gradient_1_r,p_o265706_gradient_1_g,p_o265706_gradient_1_b,p_o265706_gradient_1_a), ((x-p_o265706_gradient_0_pos)/(p_o265706_gradient_1_pos-p_o265706_gradient_0_pos)));\n  } else if (x < p_o265706_gradient_2_pos) {\n    return mix(vec4(p_o265706_gradient_1_r,p_o265706_gradient_1_g,p_o265706_gradient_1_b,p_o265706_gradient_1_a), vec4(p_o265706_gradient_2_r,p_o265706_gradient_2_g,p_o265706_gradient_2_b,p_o265706_gradient_2_a), ((x-p_o265706_gradient_1_pos)/(p_o265706_gradient_2_pos-p_o265706_gradient_1_pos)));\n  } else if (x < p_o265706_gradient_3_pos) {\n    return mix(vec4(p_o265706_gradient_2_r,p_o265706_gradient_2_g,p_o265706_gradient_2_b,p_o265706_gradient_2_a), vec4(p_o265706_gradient_3_r,p_o265706_gradient_3_g,p_o265706_gradient_3_b,p_o265706_gradient_3_a), ((x-p_o265706_gradient_2_pos)/(p_o265706_gradient_3_pos-p_o265706_gradient_2_pos)));\n  }\n  return vec4(p_o265706_gradient_3_r,p_o265706_gradient_3_g,p_o265706_gradient_3_b,p_o265706_gradient_3_a);\n}\nconst float p_o27497_radius = 1.000000000;\nconst float p_o27497_repeat = 7.000000000;\nconst float p_o22106_radius = 1.000000000;\nconst float p_o22106_repeat = 1.000000000;\nconst float p_o15531_radius = 1.500000000;\nconst float p_o15531_repeat = 1.000000000;\nconst float p_o35637_cx = 0.000000000;\nconst float p_o9383_sides = 5.000000000;\nconst float p_o9383_radius = 0.640000000;\nconst float p_o9383_edge = 0.500000000;\nvec3 o559231_input_in(vec2 uv, float _seed_variation_) {\nfloat o9383_0_1_f = shape_polygon((rotate((vec2(fract(p_o15531_repeat*atan((vec2(fract(p_o22106_repeat*atan((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o22106_radius*length((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5))))).y-0.5, (vec2(fract(p_o22106_repeat*atan((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o22106_radius*length((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o15531_radius*length((vec2(fract(p_o22106_repeat*atan((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o22106_radius*length((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5)))))-vec2(0.5))))), vec2(0.5+p_o35637_cx, 0.5+(sin(iTime * 0.009) * (iTime * 0.0005))), (sin(iTime * 0.05) * (iTime))*0.01745329251)), p_o9383_sides, p_o9383_radius*1.0, p_o9383_edge*1.0);\nvec4 o35637_0_1_rgba = vec4(vec3(o9383_0_1_f), 1.0);\nvec4 o15531_0_1_rgba = o35637_0_1_rgba;\nvec4 o22106_0_1_rgba = o15531_0_1_rgba;\nvec4 o27497_0_1_rgba = o22106_0_1_rgba;\nvec4 o265706_0_1_rgba = o265706_gradient_gradient_fct((dot((o27497_0_1_rgba).rgb, vec3(1.0))/3.0));\nvec4 o370586_0_1_rgba = o265706_0_1_rgba;\n\nreturn ((o370586_0_1_rgba).rgb);\n}\nfloat o559231_fct(vec2 uv, float _seed_variation_) {\n\tvec2 e = vec2(1.0/512.000000000, -1.0/512.000000000);\n\tvec3 rv = 4.0*o559231_input_in(uv, _seed_variation_);\n\trv -= o559231_input_in(uv+e.xy, _seed_variation_);\n\trv -= o559231_input_in(uv-e.xy, _seed_variation_);\n\trv -= o559231_input_in(uv+e.xx, _seed_variation_);\n\trv -= o559231_input_in(uv-e.xx, _seed_variation_);\n\trv = abs(rv);\n\treturn max(rv.x, max(rv.y ,rv.z))*512.000000000;\n}\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o559231_0_1_f = clamp(o559231_fct((UV), _seed_variation_), 0.0, 1.0);\ngl_FragColor = vec4(vec3(o559231_0_1_f), 1.0);\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime",value:0}],portsOut:[{name:"trigger",value:0},{name:"Shader"},{name:"Has Errors",value:false}]},{objName:"Ops.Ui.PatchInput",id:"154",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[],portsOut:[{name:"create port",value:0},{name:"in0 Ops.Trigger.TimedSequence triggerAlways",links:[{portIn:"Trigger",portOut:"in0 Ops.Trigger.TimedSequence triggerAlways",objIn:"230",objOut:"154"}]},{name:"in1 Ops.Values.SequenceNumbers Output 12",links:[{portIn:"posZ",portOut:"in1 Ops.Values.SequenceNumbers Output 12",objIn:"346",objOut:"154"}]},{name:"in2 Ops.Values.SequenceNumbers Output 11",links:[{portIn:"rotX",portOut:"in2 Ops.Values.SequenceNumbers Output 11",objIn:"346",objOut:"154"}]},{name:"in3 Ops.Values.SequenceNumbers Output 10",links:[{portIn:"rotY",portOut:"in3 Ops.Values.SequenceNumbers Output 10",objIn:"346",objOut:"154"}]}]},{objName:"Ops.Ui.PatchOutput",id:"155",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"create port",value:0}],portsOut:[]},{objName:"Ops.Ui.SubPatch",id:"156",uiAttribs:{subPatch:0},portsIn:[{name:"create port",value:null},{name:"dataStr",value:'{"ports":[{"name":"in0 Ops.Trigger.TimedSequence triggerAlways","type":1},{"name":"in1 Ops.Values.SequenceNumbers Output 12","type":0},{"name":"in2 Ops.Values.SequenceNumbers Output 11","type":0},{"name":"in3 Ops.Values.SequenceNumbers Output 10","type":0}],"portsOut":[]}'},{name:"patchId",value:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},{name:"in0 Ops.Trigger.TimedSequence triggerAlways"},{name:"in1 Ops.Values.SequenceNumbers Output 12"},{name:"in2 Ops.Values.SequenceNumbers Output 11"},{name:"in3 Ops.Values.SequenceNumbers Output 10"}],portsOut:[{name:"create port out",value:0}]},{objName:"Ops.Trigger.TimedSequence",id:"157",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"exe"},{name:"current"},{name:"overwriteTime",value:false},{name:"ignoreInSubPatch",value:false}],portsOut:[{name:"triggerAlways",links:[{portIn:"Render",portOut:"triggerAlways",objIn:"171",objOut:"157"},{portIn:"render",portOut:"triggerAlways",objIn:"180",objOut:"157"},{portIn:"render",portOut:"triggerAlways",objIn:"207",objOut:"157"}]},{name:"Names"},{name:"currentKeyTime",value:0},{name:"Current",value:1},{name:"trigger 0",value:0},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0},{name:"trigger 16",value:0},{name:"trigger 17",value:0},{name:"trigger 18",value:0},{name:"trigger 19",value:0},{name:"trigger 20",value:0},{name:"trigger 21",value:0},{name:"trigger 22",value:0},{name:"trigger 23",value:0},{name:"trigger 24",value:0},{name:"trigger 25",value:0},{name:"trigger 26",value:0},{name:"trigger 27",value:0},{name:"trigger 28",value:0},{name:"trigger 29",value:0},{name:"trigger 30",value:0},{name:"trigger 31",value:0}]},{objName:"Ops.Value.ToggleNumber",id:"158",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Use Value 1"},{name:"Value 0"},{name:"Value 1"}],portsOut:[{name:"Out Value",links:[{portIn:"current",portOut:"Out Value",objIn:"157",objOut:"158"}]}]},{objName:"Ops.Value.Number",id:"159",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"value",value:0}],portsOut:[{name:"result",links:[{portIn:"Value 1",portOut:"result",objIn:"158",objOut:"159"}]}]},{objName:"Ops.Value.Number",id:"160",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"value",value:1}],portsOut:[{name:"result",links:[{portIn:"Value 0",portOut:"result",objIn:"158",objOut:"160"}]}]},{objName:"Ops.Math.Clamp",id:"161",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"val",value:.5},{name:"min",value:0},{name:"max",value:1},{name:"ignore outside values",value:false}],portsOut:[{name:"result",links:[{portIn:"Use Value 1",portOut:"result",objIn:"158",objOut:"161"},{portIn:"Value",portOut:"result",objIn:"162",objOut:"161"}]}]},{objName:"Ops.Boolean.IsOne",id:"162",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Value"}],portsOut:[{name:"Result",value:false}]},{objName:"Ops.Math.Clamp",id:"163",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"val",value:.5},{name:"min",value:0},{name:"max",value:200},{name:"ignore outside values",value:false}],portsOut:[{name:"result",value:0}]},{objName:"Ops.Gl.Matrix.OrbitControls",id:"164",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"min distance",value:.74},{name:"max distance",value:-.09},{name:"min rot y",value:0},{name:"max rot y",value:0},{name:"initial radius",value:.05},{name:"initial axis y",value:.5},{name:"initial axis x",value:.25},{name:"mul",value:1},{name:"Smoothness",value:1},{name:"Speed X",value:1},{name:"Speed Y",value:1},{name:"Active",value:true},{name:"Allow Panning",value:true},{name:"Allow Zooming",value:true},{name:"Allow Rotation",value:true},{name:"restricted",value:true},{name:"Reset",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"165",objOut:"164"},{portIn:"render",portOut:"trigger",objIn:"169",objOut:"164"},{portIn:"Render",portOut:"trigger",objIn:"199",objOut:"164"}]},{name:"radius",value:-.09},{name:"Rot X",value:123.518031015153},{name:"Rot Y",value:75.24000000000007}]},{objName:"Ops.Gl.Render2Texture",id:"165",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"use viewport size",value:true},{name:"texture width",value:640},{name:"texture height",value:320},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"169",objOut:"165"}]},{name:"texture",links:[{portIn:"Image",portOut:"texture",objIn:"200",objOut:"165"}]},{name:"textureDepth"}]},{objName:"Ops.Ui.VizTexture",id:"166",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Texture",portOut:"Texture Out",objIn:"176",objOut:"166"}]},{name:"Info",value:""}]},{objName:"Ops.Gl.TextureToPointArray3",id:"167",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"update",value:null},{name:"Center",value:true},{name:"Threshold Remove",value:.008},{name:"Z Multiply",value:2.78},{name:"texture",value:0},{name:"Width",value:2},{name:"Height",value:2}],portsOut:[{name:"trigger",value:0},{name:"Points"},{name:"Total Points",value:0},{name:"Min Z",value:99999999},{name:"Max Z",value:0}]},{objName:"Ops.Gl.Meshes.PointCloudFromArray",id:"168",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"exe",value:null},{name:"Array",value:null},{name:"Num Points",value:4028},{name:"Scramble Texcoords",value:true},{name:"Seed",value:0},{name:"Coordinates",value:0},{name:"Vertex Colors",value:0}],portsOut:[{name:"Trigger out",value:0},{name:"Geometry"}]},{objName:"Ops.Gl.Shader.PointMaterial_v4",id:"169",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"PointSize",value:10.01},{name:"Size in Pixels",value:false},{name:"Random Size",value:0},{name:"Round",value:true},{name:"Round Antialias",value:false},{name:"Scale by Distance",value:true},{name:"r",value:.4364169715160746},{name:"g",value:.3131662730492313},{name:"b",value:.8051894048192645},{name:"a",value:1},{name:"Vertex Colors",value:false},{name:"texture"},{name:"Colorize Texture",value:false},{name:"Texture Mask",value:0},{name:"Mask Channel index",value:0},{name:"Mask Channel",value:"R"},{name:"Texture Colorize",value:0},{name:"Colorize Randomize",value:true},{name:"Texture Opacity",value:0},{name:"Texture Point Size",value:0},{name:"Point Size Channel index",value:0},{name:"Point Size Channel",value:"R"},{name:"Texture Point Size Mul",value:1},{name:"Map Size 0 index",value:0},{name:"Map Size 0",value:"Black"},{name:"Flip Texture",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"176",objOut:"169"}]},{name:"shader"}]},{objName:"Ops.Array.ArrayMath",id:"170",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"array 0",value:null},{name:"Number for math",value:2.5},{name:"Math function index",value:0},{name:"Math function",value:"*"}],portsOut:[{name:"Array result"},{name:"Array length",value:0}]},{objName:"Ops.Gl.Meshes.Cube_v2",id:"171",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Render"},{name:"Render Mesh",value:false},{name:"Width",value:2},{name:"Length",value:2},{name:"Height",value:2},{name:"Center",value:true},{name:"Mapping index",value:0},{name:"Mapping",value:"Side"},{name:"Bias",value:0},{name:"Flip X",value:true},{name:"Top",value:true},{name:"Bottom",value:true},{name:"Left",value:true},{name:"Right",value:true},{name:"Front",value:true},{name:"Back",value:true}],portsOut:[{name:"Next",links:[{portIn:"Render",portOut:"Next",objIn:"175",objOut:"171"},{portIn:"Render",portOut:"Next",objIn:"177",objOut:"171"},{portIn:"Render",portOut:"Next",objIn:"183",objOut:"171"},{portIn:"Render",portOut:"Next",objIn:"190",objOut:"171"}]},{name:"geometry"}]},{objName:"Ops.Gl.Geometry.TransformGeometry",id:"172",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Geometry"},{name:"Translate X",value:0},{name:"Translate Y",value:0},{name:"Translate Z",value:0},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Scale Z",value:1},{name:"Rotation X"},{name:"Rotation Y",value:0},{name:"Rotation Z"}],portsOut:[{name:"Result",links:[{portIn:"Geometry",portOut:"Result",objIn:"175",objOut:"172"}]}]},{objName:"Ops.Gl.TesselateGeometry",id:"173",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Geometry",value:0},{name:"Iterations",value:2}],portsOut:[{name:"Result"},{name:"Num Vertices",value:98304}]},{objName:"Ops.Anim.Timer_v2",id:"174",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Speed",value:25},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Rotation Z",portOut:"Time",objIn:"172",objOut:"174"},{portIn:"Rotation X",portOut:"Time",objIn:"172",objOut:"174"}]}]},{objName:"Ops.Gl.Meshes.GeometryToTexture",id:"175",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Render"},{name:"Geometry"},{name:"Tex Size",value:42},{name:"filter index",value:0},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"repeat"},{name:"Randomize",value:false}],portsOut:[{name:"Next",value:0},{name:"Total Vertices",value:1089},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"166",objOut:"175"}]}]},{objName:"Ops.Gl.Meshes.PointCloudFromTexture",id:"176",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"Num Points",value:12626},{name:"Axis index",value:0},{name:"Axis",value:"XYZ"},{name:"Texture"},{name:"Point Size",value:null},{name:"Normalize",value:false},{name:"Remove Point at 0",value:false}],portsOut:[{name:"Trigger",value:0},{name:"Total Points",value:0}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"177",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"178",objOut:"177"}]},{name:"texture_out",links:[{portIn:"Image",portOut:"texture_out",objIn:"182",objOut:"177"},{portIn:"Image",portOut:"texture_out",objIn:"192",objOut:"177"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"178",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"179",objOut:"178"}]}]},{objName:"Ops.Gl.TextureEffects.RGBMath",id:"179",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Render"},{name:"Operation index",value:3},{name:"Operation",value:"c*x"},{name:"R Active",value:true},{name:"G Active",value:true},{name:"B Active",value:true},{name:"A Active",value:false},{name:"r",value:1},{name:"g",value:1},{name:"b",value:1},{name:"a",value:1},{name:"Mask",value:0}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Render2Texture",id:"180",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"use viewport size",value:true},{name:"texture width",value:640},{name:"texture height",value:320},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"4x"},{name:"HDR",value:false},{name:"Depth",value:false},{name:"Clear",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"164",objOut:"180"}]},{name:"texture",links:[{portIn:"Image",portOut:"texture",objIn:"178",objOut:"180"}]},{name:"textureDepth"}]},{objName:"Ops.Ui.VizTexture",id:"181",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out"},{name:"Info",value:""}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"182",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"188",objOut:"182"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"183",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"182",objOut:"183"}]},{name:"texture_out",links:[{portIn:"Image",portOut:"texture_out",objIn:"189",objOut:"183"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"184",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:0},{name:"Max",value:1},{name:"Position",value:.5}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.GradientTexture",id:"185",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":0,"g":0,"b":0},{"pos":0.026,"r":0,"g":0,"b":0},{"pos":0.262,"r":0.48684987386067713,"g":0.6895833333333333,"b":0.0888916015625},{"pos":0.524,"r":0.21749999999999936,"g":0,"b":1},{"pos":1,"r":0.21749999999999936,"g":0,"b":1}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:false},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Gradient",portOut:"Texture",objIn:"184",objOut:"185"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"186",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Trigger In"},{name:"R",value:.21197367389630606},{name:"G",value:.7027053276936261},{name:"B",value:.7328845150546268},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:true},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:.7092145833333332},{name:"Fresnel G",value:.09104166666666666},{name:"Fresnel B",value:.7283333333333333},{name:"Emissive Active",value:true},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.617967797038889},{name:"Emissive G",value:.8561376527022462},{name:"Emissive B",value:.06255031581689696},{name:"Shininess",value:10.03},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Schlick"},{name:"Energy Conservation",value:true},{name:"Double Sided Material",value:true},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture",value:0},{name:"Specular Texture",value:0},{name:"Normal Map"},{name:"AO Texture"},{name:"Emissive Texture",value:0},{name:"Emissive Mask",value:0},{name:"Opacity Texture",value:0},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:false}],portsOut:[{name:"Trigger Out",links:[{portIn:"render",portOut:"Trigger Out",objIn:"212",objOut:"186"}]},{name:"Shader"}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"187",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render",value:null},{name:"width",value:3},{name:"height",value:3},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"188",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image",value:0},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"184",objOut:"188"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"189",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"screen"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"192",objOut:"189"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"190",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"189",objOut:"190"}]},{name:"texture_out",links:[{portIn:"texture",portOut:"texture_out",objIn:"196",objOut:"190"},{portIn:"Image",portOut:"texture_out",objIn:"209",objOut:"190"},{portIn:"Texture In",portOut:"texture_out",objIn:"181",objOut:"190"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.Plasma",id:"191",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"multiply"},{name:"Amount",value:.387},{name:"Width",value:20},{name:"Height",value:20},{name:"Mul",value:2.58},{name:"offset X",value:0},{name:"offset Y",value:0},{name:"Time"},{name:"Greyscale",value:true}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"192",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"191",objOut:"192"}]}]},{objName:"Ops.Anim.Timer_v2",id:"193",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Speed",value:1},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Time",portOut:"Time",objIn:"191",objOut:"193"}]}]},{objName:"Ops.Gl.Matrix.OrbitControls",id:"194",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"min distance",value:-.06},{name:"max distance",value:4e4},{name:"min rot y",value:0},{name:"max rot y",value:0},{name:"initial radius",value:.05},{name:"initial axis y",value:.5},{name:"initial axis x",value:.25},{name:"mul",value:1},{name:"Smoothness",value:1},{name:"Speed X",value:1},{name:"Speed Y",value:1},{name:"Active",value:true},{name:"Allow Panning",value:true},{name:"Allow Zooming",value:false},{name:"Allow Rotation",value:true},{name:"restricted",value:true},{name:"Reset",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"208",objOut:"194"},{portIn:"render",portOut:"trigger",objIn:"213",objOut:"194"}]},{name:"radius",value:.05},{name:"Rot X",value:123.518031015153},{name:"Rot Y",value:75.24000000000007}]},{objName:"Ops.Gl.Shader.PointMaterial_v4",id:"195",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"PointSize",value:2.69},{name:"Size in Pixels",value:false},{name:"Random Size",value:0},{name:"Round",value:true},{name:"Round Antialias",value:true},{name:"Scale by Distance",value:false},{name:"r",value:.24502929687500002},{name:"g",value:.88},{name:"b",value:.4482199218750002},{name:"a",value:1},{name:"Vertex Colors",value:false},{name:"texture",value:0},{name:"Colorize Texture",value:false},{name:"Texture Mask",value:0},{name:"Mask Channel index",value:0},{name:"Mask Channel",value:"R"},{name:"Texture Colorize",value:0},{name:"Colorize Randomize",value:true},{name:"Texture Opacity",value:0},{name:"Texture Point Size",value:0},{name:"Point Size Channel index",value:0},{name:"Point Size Channel",value:"R"},{name:"Texture Point Size Mul",value:1},{name:"Map Size 0 index",value:0},{name:"Map Size 0",value:"Black"},{name:"Flip Texture",value:false}],portsOut:[{name:"trigger",links:[{portIn:"update",portOut:"trigger",objIn:"196",objOut:"195"},{portIn:"exe",portOut:"trigger",objIn:"197",objOut:"195"}]},{name:"shader"}]},{objName:"Ops.Gl.TextureToPointArray3",id:"196",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"update"},{name:"Center",value:true},{name:"Threshold Remove",value:.002},{name:"Z Multiply",value:1.33},{name:"texture"},{name:"Width",value:2.75},{name:"Height",value:2.8}],portsOut:[{name:"trigger",value:0},{name:"Points",links:[{portIn:"Array",portOut:"Points",objIn:"197",objOut:"196"}]},{name:"Total Points",value:12150},{name:"Min Z",value:.09871093750000001},{name:"Max Z",value:.571484375}]},{objName:"Ops.Gl.Meshes.PointCloudFromArray",id:"197",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"exe"},{name:"Array"},{name:"Num Points",value:27374},{name:"Scramble Texcoords",value:false},{name:"Seed",value:189.42},{name:"Coordinates",value:0},{name:"Vertex Colors",value:0}],portsOut:[{name:"Trigger out",value:0},{name:"Geometry"}]},{objName:"Ops.Gl.GradientTexture",id:"198",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":1,"g":0,"b":0.8225000000000007},{"pos":0.25,"r":1,"g":0,"b":0.8225000000000007},{"pos":0.522,"r":0.033863932291666704,"g":0.036574331805139755,"b":0.042916666666666714},{"pos":0.75,"r":0.1607843137254902,"g":0.1747254901960787,"b":0.7803921568627451},{"pos":1,"r":0.1607843137254902,"g":0.1747254901960787,"b":0.7803921568627451}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:false},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Gradient",portOut:"Texture",objIn:"202",objOut:"198"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"199",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"200",objOut:"199"},{portIn:"exe",portOut:"Next",objIn:"206",objOut:"199"}]},{name:"texture_out",links:[{portIn:"texture",portOut:"texture_out",objIn:"169",objOut:"199"},{portIn:"Texture In",portOut:"texture_out",objIn:"203",objOut:"199"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"200",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"202",objOut:"200"}]}]},{objName:"Ops.Gl.TextureEffects.WaveformGradient_v2",id:"201",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render",value:null},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"multiply invert"},{name:"Amount",value:1},{name:"Mode index",value:0},{name:"Mode",value:"Sawtooth"},{name:"Frequency",value:4},{name:"Pow factor",value:6},{name:"Offset",value:0},{name:"Rotate",value:0},{name:"r",value:1},{name:"g",value:1},{name:"b",value:1}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"202",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:0},{name:"Max",value:1},{name:"Position",value:.5}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"205",objOut:"202"}]}]},{objName:"Ops.Ui.VizTexture",id:"203",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out"},{name:"Info",value:""}]},{objName:"Ops.Gl.TextureEffects.CircleTexture_v3",id:"204",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render",value:null},{name:"Amount",value:1},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"average"},{name:"size",value:.25},{name:"Inner",value:0},{name:"Stretch",value:0},{name:"Pos X",value:0},{name:"Pos Y",value:0},{name:"fallOff index",value:0},{name:"fallOff",value:"Linear"},{name:"fade Out",value:0},{name:"warn overflow",value:false},{name:"r",value:1},{name:"g",value:1},{name:"b",value:1},{name:"a",value:1}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.Desaturate",id:"205",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"amount"},{name:"Mask",value:0},{name:"Invert Mask",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Anim.SineAnim",id:"206",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:1},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"amount",portOut:"result",objIn:"205",objOut:"206"}]}]},{objName:"Ops.Gl.Meshes.Sphere_v2",id:"207",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"radius",value:1},{name:"stacks",value:32},{name:"slices",value:32},{name:"Filloffset",value:1},{name:"Render",value:false}],portsOut:[{name:"trigger",value:0},{name:"geometry",links:[{portIn:"Geometry",portOut:"geometry",objIn:"172",objOut:"207"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"208",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"posX",value:.011},{name:"posY",value:.02},{name:"posZ"},{name:"scale",value:.86},{name:"rotX",value:0},{name:"rotY",value:180.74},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"Trigger In",portOut:"trigger",objIn:"186",objOut:"208"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"209",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:true},{name:"flip y",value:false},{name:"Transform",value:true},{name:"Scale X",value:.778},{name:"Scale Y",value:.864},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"210",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"209",objOut:"210"}]},{name:"texture_out",links:[{portIn:"Normal Map",portOut:"texture_out",objIn:"186",objOut:"210"},{portIn:"AO Texture",portOut:"texture_out",objIn:"186",objOut:"210"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.Matrix.Transform",id:"211",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render",value:null},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:0},{name:"scale",value:2.26},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Meshes.Circle",id:"212",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"radius",value:1.82},{name:"innerRadius",value:.009},{name:"segments",value:40},{name:"percent",value:1},{name:"steps",value:0},{name:"invertSteps",value:false},{name:"mapping index",value:0},{name:"mapping",value:"flat"},{name:"Spline",value:false},{name:"Draw",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.Matrix.Transform",id:"213",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:-2.92},{name:"scale",value:4.47},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"210",objOut:"213"}]}]},{objName:"Ops.Value.Number",id:"214",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"value",value:-2.49}],portsOut:[{name:"result",links:[{portIn:"posZ",portOut:"result",objIn:"208",objOut:"214"}]}]},{objName:"Ops.Array.SplinePositionAtDistanceArray3",id:"215",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Calculate"},{name:"Array3x"},{name:"Distance"},{name:"Normalized",value:true}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"218",objOut:"215"},{portIn:"exe",portOut:"Next",objIn:"227",objOut:"215"}]},{name:"X",links:[{portIn:"x",portOut:"X",objIn:"218",objOut:"215"}]},{name:"Y",links:[{portIn:"y",portOut:"Y",objIn:"218",objOut:"215"}]},{name:"Z",links:[{portIn:"z",portOut:"Z",objIn:"218",objOut:"215"}]},{name:"Spline Length",value:27.504077685824317}]},{objName:"Ops.Array.LissajouseSpline",id:"216",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Formula index"},{name:"Formula",value:1},{name:"A",value:5},{name:"B",value:4},{name:"C",value:1},{name:"D",value:2}],portsOut:[{name:"Result",links:[{portIn:"Array3x",portOut:"Result",objIn:"215",objOut:"216"}]},{name:"Total points",value:158},{name:"Array length",value:474}]},{objName:"Ops.Anim.Timer_v2",id:"217",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Speed",value:.1},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Distance",portOut:"Time",objIn:"215",objOut:"217"},{portIn:"Input",portOut:"Time",objIn:"228",objOut:"217"}]}]},{objName:"Ops.Gl.Matrix.Translate",id:"218",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"x"},{name:"y"},{name:"z"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"219",objOut:"218"}]}]},{objName:"Ops.Gl.Meshes.Cube_v2",id:"219",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Render"},{name:"Render Mesh",value:false},{name:"Width",value:1},{name:"Length",value:1},{name:"Height",value:1},{name:"Center",value:true},{name:"Mapping index",value:0},{name:"Mapping",value:"Side"},{name:"Bias",value:0},{name:"Flip X",value:true},{name:"Top",value:true},{name:"Bottom",value:true},{name:"Left",value:true},{name:"Right",value:true},{name:"Front",value:true},{name:"Back",value:true}],portsOut:[{name:"Next",links:[{portIn:"Trigger In",portOut:"Next",objIn:"223",objOut:"219"}]},{name:"geometry",links:[{portIn:"geom",portOut:"geometry",objIn:"220",objOut:"219"}]}]},{objName:"Ops.Gl.MeshInstancer_v4",id:"220",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"exe"},{name:"geom"},{name:"Scale",value:.05},{name:"Limit Instances",value:false},{name:"Limit",value:100},{name:"positions"},{name:"Scale Array",value:0},{name:"Rotations"},{name:"Rotation Type index",value:0},{name:"Rotation Type",value:"Euler"},{name:"Material blend mode index",value:0},{name:"Material blend mode",value:"Multiply"},{name:"Colors"},{name:"TexCoords",value:0}],portsOut:[{name:"Trigger Out",value:0},{name:"Num",value:100}]},{objName:"Ops.Array.RandomArrays",id:"221",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Num Values",value:100},{name:"Mode index",value:0},{name:"Mode",value:"A"},{name:"Random Seed ",value:0},{name:"Integer",value:false},{name:"Min A",value:-1},{name:"Max A",value:1},{name:"Min B",value:-1},{name:"Max B",value:1},{name:"Min C",value:-1},{name:"Max C",value:1},{name:"Min D",value:-1},{name:"Max D",value:1}],portsOut:[{name:"Array Out"},{name:"Chunks Amount",value:100},{name:"Array length",value:100}]},{objName:"Ops.Array.RandomNumbersArray3_v2",id:"222",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"numValues",value:100},{name:"Min",value:-1},{name:"Max",value:1},{name:"random seed",value:0},{name:"Last == First",value:false},{name:"Integer",value:false}],portsOut:[{name:"values",links:[{portIn:"positions",portOut:"values",objIn:"220",objOut:"222"},{portIn:"Array",portOut:"values",objIn:"229",objOut:"222"},{portIn:"Colors",portOut:"values",objIn:"220",objOut:"222"}]},{name:"Total points",value:100},{name:"Array length",value:300}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"223",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Trigger In"},{name:"R",value:.2503510900862149},{name:"G",value:.23475818351568556},{name:"B",value:.590720051702383},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:false},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:1},{name:"Fresnel G",value:1},{name:"Fresnel B",value:1},{name:"Emissive Active",value:false},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.044264880348055646},{name:"Emissive G",value:.5743154157074919},{name:"Emissive B",value:.7147898498988461},{name:"Shininess",value:4},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Blinn"},{name:"Energy Conservation",value:false},{name:"Double Sided Material",value:false},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture"},{name:"Specular Texture",value:0},{name:"Normal Map",value:0},{name:"AO Texture",value:0},{name:"Emissive Texture",value:0},{name:"Emissive Mask",value:0},{name:"Opacity Texture",value:0},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:false}],portsOut:[{name:"Trigger Out",links:[{portIn:"exe",portOut:"Trigger Out",objIn:"220",objOut:"223"}]},{name:"Shader"}]},{objName:"Ops.Array.RandomNumbersArray3_v2",id:"224",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"numValues",value:100},{name:"Min"},{name:"Max"},{name:"random seed",value:0},{name:"Last == First",value:false},{name:"Integer",value:false}],portsOut:[{name:"values",links:[{portIn:"Rotations",portOut:"values",objIn:"220",objOut:"224"}]},{name:"Total points",value:100},{name:"Array length",value:300}]},{objName:"Ops.Anim.Timer_v2",id:"225",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Speed",value:.03},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Max",portOut:"Time",objIn:"224",objOut:"225"}]}]},{objName:"Ops.Anim.Timer_v2",id:"226",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Speed",value:51.88},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Min",portOut:"Time",objIn:"224",objOut:"226"}]}]},{objName:"Ops.Anim.SineAnim",id:"227",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:1},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"Formula index",portOut:"result",objIn:"216",objOut:"227"}]}]},{objName:"Ops.Trigger.Threshold",id:"228",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Input"},{name:"Threshold",value:1}],portsOut:[{name:"Output",links:[{portIn:"Reset",portOut:"Output",objIn:"217",objOut:"228"}]}]},{objName:"Ops.Gl.Array3ToTexture",id:"229",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Array"},{name:"wrap index",value:0},{name:"wrap",value:"repeat"},{name:"filter index",value:2},{name:"filter",value:"mipmap"}],portsOut:[{name:"Texture",links:[{portIn:"Diffuse Texture",portOut:"Texture",objIn:"223",objOut:"229"}]}]},{objName:"Ops.Gl.ForceCanvasSize",id:"230",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"Trigger"},{name:"Active",value:false},{name:"Force index",value:0},{name:"Force",value:"Resolution"},{name:"Center In Parent",value:true},{name:"Scale to fit Parent",value:false},{name:"Set Width",value:489},{name:"Set Height",value:374},{name:"Aspect Ratio index",value:3},{name:"Aspect Ratio",value:"16:9"},{name:"Ratio",value:0},{name:"Fill Parent index",value:0},{name:"Fill Parent",value:"Auto"}],portsOut:[{name:"Next",links:[{portIn:"exe",portOut:"Next",objIn:"157",objOut:"230"},{portIn:"render",portOut:"Next",objIn:"195",objOut:"230"},{portIn:"Calculate",portOut:"Next",objIn:"215",objOut:"230"},{portIn:"render",portOut:"Next",objIn:"346",objOut:"230"}]},{name:"Width",value:489},{name:"Height",value:374},{name:"Margin Left",value:0},{name:"Margin Top",value:0}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"231",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:50},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"232",objOut:"231"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"2"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"232",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:31}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"232"}]}]},{objName:"Ops.Trigger.TriggerReceive",id:"233",uiAttribs:{subPatch:0},portsIn:[{name:"Named Trigger",value:"TimerStart"}],portsOut:[{name:"Triggered",links:[{portIn:"Reset",portOut:"Triggered",objIn:"127",objOut:"233"}]}]},{objName:"Ops.Trigger.TriggerReceive",id:"234",uiAttribs:{subPatch:0},portsIn:[{name:"Named Trigger",value:"TimerStart"}],portsOut:[{name:"Triggered",links:[{portIn:"Reset",portOut:"Triggered",objIn:"141",objOut:"234"}]}]},{objName:"Ops.Devices.Midi.MidiInputDevice_v2",id:"235",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"Device index",value:0},{name:"Device",value:"TouchOSC"},{name:"Learn",value:0},{name:"Panic",value:0}],portsOut:[{name:"Event",links:[{portIn:"MIDI Event In",portOut:"Event",objIn:"236",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"237",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"238",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"239",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"240",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"241",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"242",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"243",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"244",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"245",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"246",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"247",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"248",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"249",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"250",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"251",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"252",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"253",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"254",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"255",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"256",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"257",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"258",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"259",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"260",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"261",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"262",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"263",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"264",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"265",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"266",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"267",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"268",objOut:"235"},{portIn:"MIDI Event In",portOut:"Event",objIn:"269",objOut:"235"}]},{name:"Note"},{name:"CC"},{name:"NRPN"},{name:"Program Change"},{name:"Clock"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"236",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:5},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:5},{name:"CC Value Out",links:[{portIn:"out0 Ops.Values.SequenceNumbers Number 0",portOut:"CC Value Out",objIn:"271",objOut:"236"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"237",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:7},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:7},{name:"CC Value Out",links:[{portIn:"out2 Ops.Values.SequenceNumbers Number 2",portOut:"CC Value Out",objIn:"271",objOut:"237"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"238",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:6},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:6},{name:"CC Value Out",links:[{portIn:"out1 Ops.Values.SequenceNumbers Number 1",portOut:"CC Value Out",objIn:"271",objOut:"238"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"239",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:9},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:9},{name:"CC Value Out",links:[{portIn:"out3 Ops.Values.SequenceNumbers Number 3",portOut:"CC Value Out",objIn:"271",objOut:"239"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"240",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:13},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:13},{name:"CC Value Out",links:[{portIn:"out5 Ops.Values.SequenceNumbers Number 5",portOut:"CC Value Out",objIn:"271",objOut:"240"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"241",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:11},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:11},{name:"CC Value Out",links:[{portIn:"out4 Ops.Values.SequenceNumbers Number 4",portOut:"CC Value Out",objIn:"271",objOut:"241"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"242",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:10},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:10},{name:"CC Value Out",links:[{portIn:"out6 Ops.Values.SequenceNumbers Number 6",portOut:"CC Value Out",objIn:"271",objOut:"242"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"243",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:14},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:14},{name:"CC Value Out",links:[{portIn:"out8 Ops.Values.SequenceNumbers Number 8",portOut:"CC Value Out",objIn:"271",objOut:"243"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"244",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:12},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:12},{name:"CC Value Out",links:[{portIn:"out7 Ops.Values.SequenceNumbers Number 7",portOut:"CC Value Out",objIn:"271",objOut:"244"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"245",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:15},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:15},{name:"CC Value Out",links:[{portIn:"out9 Ops.Values.SequenceNumbers Number 9",portOut:"CC Value Out",objIn:"271",objOut:"245"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"246",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:17},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:17},{name:"CC Value Out",links:[{portIn:"out11 Ops.Values.SequenceNumbers Number 11",portOut:"CC Value Out",objIn:"271",objOut:"246"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"247",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:16},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:16},{name:"CC Value Out",links:[{portIn:"out10 Ops.Values.SequenceNumbers Number 10",portOut:"CC Value Out",objIn:"271",objOut:"247"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"248",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:21},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:21},{name:"CC Value Out",links:[{portIn:"out12 Ops.Values.SequenceNumbers Number 12",portOut:"CC Value Out",objIn:"271",objOut:"248"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"249",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:23},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:23},{name:"CC Value Out",links:[{portIn:"out14 Ops.Values.SequenceNumbers Number 14",portOut:"CC Value Out",objIn:"271",objOut:"249"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"250",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:22},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:22},{name:"CC Value Out",links:[{portIn:"out13 Ops.Values.SequenceNumbers Number 13",portOut:"CC Value Out",objIn:"271",objOut:"250"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"251",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:24},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:24},{name:"CC Value Out",links:[{portIn:"out15 Ops.Values.SequenceNumbers Number 15",portOut:"CC Value Out",objIn:"271",objOut:"251"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"252",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:26},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:26},{name:"CC Value Out",links:[{portIn:"out17 Ops.Values.SequenceNumbers Number 1",portOut:"CC Value Out",objIn:"271",objOut:"252"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"253",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:25},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:25},{name:"CC Value Out",links:[{portIn:"out16 Ops.Values.SequenceNumbers Number 0",portOut:"CC Value Out",objIn:"271",objOut:"253"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"254",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:18},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:18},{name:"CC Value Out",links:[{portIn:"out18 Ops.Values.SequenceNumbers Number 2",portOut:"CC Value Out",objIn:"271",objOut:"254"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"255",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:20},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:20},{name:"CC Value Out",links:[{portIn:"out20 Ops.Values.SequenceNumbers Number 4",portOut:"CC Value Out",objIn:"271",objOut:"255"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"256",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:19},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:19},{name:"CC Value Out",links:[{portIn:"out19 Ops.Values.SequenceNumbers Number 3",portOut:"CC Value Out",objIn:"271",objOut:"256"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"257",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:37},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:37},{name:"CC Value Out",links:[{portIn:"out21 Ops.Values.SequenceNumbers Number 5",portOut:"CC Value Out",objIn:"271",objOut:"257"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"258",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:8},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:8},{name:"CC Value Out",links:[{portIn:"out23 Ops.Values.SequenceNumbers Number 7",portOut:"CC Value Out",objIn:"271",objOut:"258"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"259",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:0},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:0},{name:"CC Value Out",links:[{portIn:"out22 Ops.Values.SequenceNumbers Number 6",portOut:"CC Value Out",objIn:"271",objOut:"259"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"260",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:2},{name:"CC Index",value:35},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:35},{name:"CC Value Out",links:[{portIn:"out24 Ops.Values.SequenceNumbers Number 8",portOut:"CC Value Out",objIn:"271",objOut:"260"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"261",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:2},{name:"CC Index",value:34},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:34},{name:"CC Value Out",links:[{portIn:"out25 Ops.Values.SequenceNumbers Number 9",portOut:"CC Value Out",objIn:"271",objOut:"261"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"262",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:27},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:27},{name:"CC Value Out",value:52},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"263",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:2},{name:"CC Index",value:28},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:28},{name:"CC Value Out",links:[{portIn:"out26 Ops.Values.SequenceNumbers Number 10",portOut:"CC Value Out",objIn:"271",objOut:"263"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"264",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:2},{name:"CC Index",value:29},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:29},{name:"CC Value Out",links:[{portIn:"out27 Ops.Values.SequenceNumbers Number 11",portOut:"CC Value Out",objIn:"271",objOut:"264"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"265",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:38},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:27},{name:"CC Value Out",value:88},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"266",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:2},{name:"CC Index",value:30},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:30},{name:"CC Value Out",links:[{portIn:"out28 Ops.Values.SequenceNumbers Number 12",portOut:"CC Value Out",objIn:"271",objOut:"266"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"267",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:2},{name:"CC Index",value:31},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:31},{name:"CC Value Out",links:[{portIn:"out29 Ops.Values.SequenceNumbers Number 13",portOut:"CC Value Out",objIn:"271",objOut:"267"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"268",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"CC Index",value:32},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:32},{name:"CC Value Out",links:[{portIn:"out30 Ops.Values.SequenceNumbers Number 14",portOut:"CC Value Out",objIn:"271",objOut:"268"}]},{name:"Value Array"}]},{objName:"Ops.Devices.Midi.MidiCC",id:"269",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In"},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:2},{name:"CC Index",value:33},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"Event"},{name:"Trigger Out",value:0},{name:"CC Index Out",value:33},{name:"CC Value Out",links:[{portIn:"out31 Ops.Values.SequenceNumbers Number 15",portOut:"CC Value Out",objIn:"271",objOut:"269"}]},{name:"Value Array"}]},{objName:"Ops.Ui.PatchInput",id:"270",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[],portsOut:[{name:"create port",value:0}]},{objName:"Ops.Ui.PatchOutput",id:"271",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"create port",value:0},{name:"out0 Ops.Values.SequenceNumbers Number 0"},{name:"out1 Ops.Values.SequenceNumbers Number 1"},{name:"out2 Ops.Values.SequenceNumbers Number 2"},{name:"out3 Ops.Values.SequenceNumbers Number 3"},{name:"out4 Ops.Values.SequenceNumbers Number 4"},{name:"out5 Ops.Values.SequenceNumbers Number 5"},{name:"out6 Ops.Values.SequenceNumbers Number 6"},{name:"out7 Ops.Values.SequenceNumbers Number 7"},{name:"out8 Ops.Values.SequenceNumbers Number 8"},{name:"out9 Ops.Values.SequenceNumbers Number 9"},{name:"out10 Ops.Values.SequenceNumbers Number 10"},{name:"out11 Ops.Values.SequenceNumbers Number 11"},{name:"out12 Ops.Values.SequenceNumbers Number 12"},{name:"out13 Ops.Values.SequenceNumbers Number 13"},{name:"out14 Ops.Values.SequenceNumbers Number 14"},{name:"out15 Ops.Values.SequenceNumbers Number 15"},{name:"out16 Ops.Values.SequenceNumbers Number 0"},{name:"out17 Ops.Values.SequenceNumbers Number 1"},{name:"out18 Ops.Values.SequenceNumbers Number 2"},{name:"out19 Ops.Values.SequenceNumbers Number 3"},{name:"out20 Ops.Values.SequenceNumbers Number 4"},{name:"out21 Ops.Values.SequenceNumbers Number 5"},{name:"out22 Ops.Values.SequenceNumbers Number 6"},{name:"out23 Ops.Values.SequenceNumbers Number 7"},{name:"out24 Ops.Values.SequenceNumbers Number 8"},{name:"out25 Ops.Values.SequenceNumbers Number 9"},{name:"out26 Ops.Values.SequenceNumbers Number 10"},{name:"out27 Ops.Values.SequenceNumbers Number 11"},{name:"out28 Ops.Values.SequenceNumbers Number 12"},{name:"out29 Ops.Values.SequenceNumbers Number 13"},{name:"out30 Ops.Values.SequenceNumbers Number 14"},{name:"out31 Ops.Values.SequenceNumbers Number 15"}],portsOut:[]},{objName:"Ops.Ui.SubPatch",id:"272",uiAttribs:{subPatch:0},portsIn:[{name:"create port",value:0},{name:"dataStr",value:'{"ports":[],"portsOut":[{"name":"out0 Ops.Values.SequenceNumbers Number 0","type":0},{"name":"out1 Ops.Values.SequenceNumbers Number 1","type":0},{"name":"out2 Ops.Values.SequenceNumbers Number 2","type":0},{"name":"out3 Ops.Values.SequenceNumbers Number 3","type":0},{"name":"out4 Ops.Values.SequenceNumbers Number 4","type":0},{"name":"out5 Ops.Values.SequenceNumbers Number 5","type":0},{"name":"out6 Ops.Values.SequenceNumbers Number 6","type":0},{"name":"out7 Ops.Values.SequenceNumbers Number 7","type":0},{"name":"out8 Ops.Values.SequenceNumbers Number 8","type":0},{"name":"out9 Ops.Values.SequenceNumbers Number 9","type":0},{"name":"out10 Ops.Values.SequenceNumbers Number 10","type":0},{"name":"out11 Ops.Values.SequenceNumbers Number 11","type":0},{"name":"out12 Ops.Values.SequenceNumbers Number 12","type":0},{"name":"out13 Ops.Values.SequenceNumbers Number 13","type":0},{"name":"out14 Ops.Values.SequenceNumbers Number 14","type":0},{"name":"out15 Ops.Values.SequenceNumbers Number 15","type":0},{"name":"out16 Ops.Values.SequenceNumbers Number 0","type":0},{"name":"out17 Ops.Values.SequenceNumbers Number 1","type":0},{"name":"out18 Ops.Values.SequenceNumbers Number 2","type":0},{"name":"out19 Ops.Values.SequenceNumbers Number 3","type":0},{"name":"out20 Ops.Values.SequenceNumbers Number 4","type":0},{"name":"out21 Ops.Values.SequenceNumbers Number 5","type":0},{"name":"out22 Ops.Values.SequenceNumbers Number 6","type":0},{"name":"out23 Ops.Values.SequenceNumbers Number 7","type":0},{"name":"out24 Ops.Values.SequenceNumbers Number 8","type":0},{"name":"out25 Ops.Values.SequenceNumbers Number 9","type":0},{"name":"out26 Ops.Values.SequenceNumbers Number 10","type":0},{"name":"out27 Ops.Values.SequenceNumbers Number 11","type":0},{"name":"out28 Ops.Values.SequenceNumbers Number 12","type":0},{"name":"out29 Ops.Values.SequenceNumbers Number 13","type":0},{"name":"out30 Ops.Values.SequenceNumbers Number 14","type":0},{"name":"out31 Ops.Values.SequenceNumbers Number 15","type":0}]}'},{name:"patchId",value:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"}],portsOut:[{name:"create port out",value:0},{name:"out0 Ops.Values.SequenceNumbers Number 0",links:[{portIn:"Number 0",portOut:"out0 Ops.Values.SequenceNumbers Number 0",objIn:"275",objOut:"272"},{portIn:"Value",portOut:"out0 Ops.Values.SequenceNumbers Number 0",objIn:"388",objOut:"272"}]},{name:"out1 Ops.Values.SequenceNumbers Number 1",links:[{portIn:"Number 1",portOut:"out1 Ops.Values.SequenceNumbers Number 1",objIn:"275",objOut:"272"},{portIn:"Value",portOut:"out1 Ops.Values.SequenceNumbers Number 1",objIn:"387",objOut:"272"}]},{name:"out2 Ops.Values.SequenceNumbers Number 2",links:[{portIn:"Number 2",portOut:"out2 Ops.Values.SequenceNumbers Number 2",objIn:"275",objOut:"272"}]},{name:"out3 Ops.Values.SequenceNumbers Number 3",links:[{portIn:"Number 3",portOut:"out3 Ops.Values.SequenceNumbers Number 3",objIn:"275",objOut:"272"}]},{name:"out4 Ops.Values.SequenceNumbers Number 4",links:[{portIn:"Number 4",portOut:"out4 Ops.Values.SequenceNumbers Number 4",objIn:"275",objOut:"272"}]},{name:"out5 Ops.Values.SequenceNumbers Number 5",links:[{portIn:"Number 5",portOut:"out5 Ops.Values.SequenceNumbers Number 5",objIn:"275",objOut:"272"}]},{name:"out6 Ops.Values.SequenceNumbers Number 6",links:[{portIn:"Number 6",portOut:"out6 Ops.Values.SequenceNumbers Number 6",objIn:"275",objOut:"272"}]},{name:"out7 Ops.Values.SequenceNumbers Number 7",links:[{portIn:"Number 7",portOut:"out7 Ops.Values.SequenceNumbers Number 7",objIn:"275",objOut:"272"}]},{name:"out8 Ops.Values.SequenceNumbers Number 8",links:[{portIn:"Number 8",portOut:"out8 Ops.Values.SequenceNumbers Number 8",objIn:"275",objOut:"272"}]},{name:"out9 Ops.Values.SequenceNumbers Number 9",links:[{portIn:"Number 9",portOut:"out9 Ops.Values.SequenceNumbers Number 9",objIn:"275",objOut:"272"}]},{name:"out10 Ops.Values.SequenceNumbers Number 10",links:[{portIn:"Number 10",portOut:"out10 Ops.Values.SequenceNumbers Number 10",objIn:"275",objOut:"272"}]},{name:"out11 Ops.Values.SequenceNumbers Number 11",links:[{portIn:"Number 11",portOut:"out11 Ops.Values.SequenceNumbers Number 11",objIn:"275",objOut:"272"}]},{name:"out12 Ops.Values.SequenceNumbers Number 12",links:[{portIn:"Number 12",portOut:"out12 Ops.Values.SequenceNumbers Number 12",objIn:"275",objOut:"272"}]},{name:"out13 Ops.Values.SequenceNumbers Number 13",links:[{portIn:"Number 13",portOut:"out13 Ops.Values.SequenceNumbers Number 13",objIn:"275",objOut:"272"},{portIn:"value",portOut:"out13 Ops.Values.SequenceNumbers Number 13",objIn:"764",objOut:"272"}]},{name:"out14 Ops.Values.SequenceNumbers Number 14",links:[{portIn:"Number 14",portOut:"out14 Ops.Values.SequenceNumbers Number 14",objIn:"275",objOut:"272"},{portIn:"Value",portOut:"out14 Ops.Values.SequenceNumbers Number 14",objIn:"398",objOut:"272"}]},{name:"out15 Ops.Values.SequenceNumbers Number 15",links:[{portIn:"Number 15",portOut:"out15 Ops.Values.SequenceNumbers Number 15",objIn:"275",objOut:"272"}]},{name:"out16 Ops.Values.SequenceNumbers Number 0",links:[{portIn:"Number 0",portOut:"out16 Ops.Values.SequenceNumbers Number 0",objIn:"276",objOut:"272"}]},{name:"out17 Ops.Values.SequenceNumbers Number 1",links:[{portIn:"Number 1",portOut:"out17 Ops.Values.SequenceNumbers Number 1",objIn:"276",objOut:"272"},{portIn:"Value",portOut:"out17 Ops.Values.SequenceNumbers Number 1",objIn:"770",objOut:"272"}]},{name:"out18 Ops.Values.SequenceNumbers Number 2",links:[{portIn:"Number 2",portOut:"out18 Ops.Values.SequenceNumbers Number 2",objIn:"276",objOut:"272"}]},{name:"out19 Ops.Values.SequenceNumbers Number 3",links:[{portIn:"Number 3",portOut:"out19 Ops.Values.SequenceNumbers Number 3",objIn:"276",objOut:"272"}]},{name:"out20 Ops.Values.SequenceNumbers Number 4",links:[{portIn:"Number 4",portOut:"out20 Ops.Values.SequenceNumbers Number 4",objIn:"276",objOut:"272"}]},{name:"out21 Ops.Values.SequenceNumbers Number 5",links:[{portIn:"Number 5",portOut:"out21 Ops.Values.SequenceNumbers Number 5",objIn:"276",objOut:"272"}]},{name:"out22 Ops.Values.SequenceNumbers Number 6",links:[{portIn:"Number 6",portOut:"out22 Ops.Values.SequenceNumbers Number 6",objIn:"276",objOut:"272"}]},{name:"out23 Ops.Values.SequenceNumbers Number 7",links:[{portIn:"Number 7",portOut:"out23 Ops.Values.SequenceNumbers Number 7",objIn:"276",objOut:"272"},{portIn:"in2 Ops.Anim.SineAnim frequency",portOut:"out23 Ops.Values.SequenceNumbers Number 7",objIn:"856",objOut:"272"}]},{name:"out24 Ops.Values.SequenceNumbers Number 8",links:[{portIn:"Number 8",portOut:"out24 Ops.Values.SequenceNumbers Number 8",objIn:"276",objOut:"272"}]},{name:"out25 Ops.Values.SequenceNumbers Number 9",links:[{portIn:"Number 9",portOut:"out25 Ops.Values.SequenceNumbers Number 9",objIn:"276",objOut:"272"}]},{name:"out26 Ops.Values.SequenceNumbers Number 10",links:[{portIn:"Number 10",portOut:"out26 Ops.Values.SequenceNumbers Number 10",objIn:"276",objOut:"272"}]},{name:"out27 Ops.Values.SequenceNumbers Number 11",links:[{portIn:"Number 11",portOut:"out27 Ops.Values.SequenceNumbers Number 11",objIn:"276",objOut:"272"}]},{name:"out28 Ops.Values.SequenceNumbers Number 12",links:[{portIn:"Number 12",portOut:"out28 Ops.Values.SequenceNumbers Number 12",objIn:"276",objOut:"272"}]},{name:"out29 Ops.Values.SequenceNumbers Number 13",links:[{portIn:"Number 13",portOut:"out29 Ops.Values.SequenceNumbers Number 13",objIn:"276",objOut:"272"}]},{name:"out30 Ops.Values.SequenceNumbers Number 14",links:[{portIn:"Number 14",portOut:"out30 Ops.Values.SequenceNumbers Number 14",objIn:"276",objOut:"272"}]},{name:"out31 Ops.Values.SequenceNumbers Number 15",links:[{portIn:"Number 15",portOut:"out31 Ops.Values.SequenceNumbers Number 15",objIn:"276",objOut:"272"}]}]},{objName:"Ops.Devices.Midi.MidiNRPN",id:"273",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"MIDI Event In",value:0},{name:"MIDI Channel index",value:0},{name:"MIDI Channel",value:1},{name:"NRPN Index",value:0},{name:"Normalize index",value:0},{name:"Normalize",value:"none"},{name:"learn",value:0},{name:"clear",value:0}],portsOut:[{name:"MIDI Event Out"},{name:"Trigger Out",value:0},{name:"NRPN Index",value:0},{name:"NRPN Value",value:5355}]},{objName:"Ops.Date.DateFormatter",id:"274",uiAttribs:{subPatch:"95f0cbb0-2f27-495f-a79e-68de96d02d0a"},portsIn:[{name:"Timestamp",value:0},{name:"Date",value:0},{name:"Format",value:"YYYY-MM-DD"}],portsOut:[{name:"StringDate",value:""}]},{objName:"Ops.Values.SequenceNumbers",id:"275",uiAttribs:{subPatch:0},portsIn:[{name:"Number 0"},{name:"Number 1"},{name:"Number 2"},{name:"Number 3"},{name:"Number 4"},{name:"Number 5"},{name:"Number 6"},{name:"Number 7"},{name:"Number 8"},{name:"Number 9"},{name:"Number 10"},{name:"Number 11"},{name:"Number 12"},{name:"Number 13"},{name:"Number 14"},{name:"Number 15"}],portsOut:[{name:"Output 0",value:0},{name:"Output 1",value:0},{name:"Output 2",value:0},{name:"Output 3",value:0},{name:"Output 4",value:0},{name:"Output 5",value:0},{name:"Output 6",value:0},{name:"Output 7",value:0},{name:"Output 8",value:0},{name:"Output 9",value:0},{name:"Output 10",value:0},{name:"Output 11",value:0},{name:"Output 12",value:0},{name:"Output 13",value:0},{name:"Output 14",value:0},{name:"Output 15",value:0}]},{objName:"Ops.Values.SequenceNumbers",id:"276",uiAttribs:{subPatch:0},portsIn:[{name:"Number 0"},{name:"Number 1"},{name:"Number 2"},{name:"Number 3"},{name:"Number 4"},{name:"Number 5"},{name:"Number 6"},{name:"Number 7"},{name:"Number 8"},{name:"Number 9"},{name:"Number 10"},{name:"Number 11"},{name:"Number 12"},{name:"Number 13"},{name:"Number 14"},{name:"Number 15"}],portsOut:[{name:"Output 0",value:1},{name:"Output 1",value:1},{name:"Output 2",value:1},{name:"Output 3",value:1},{name:"Output 4",value:1},{name:"Output 5",links:[{portIn:"value",portOut:"Output 5",objIn:"864",objOut:"276"}]},{name:"Output 6",value:1},{name:"Output 7",links:[{portIn:"in2 Ops.Values.SequenceNumbers Output 14",portOut:"Output 7",objIn:"279",objOut:"276"}]},{name:"Output 8",value:1},{name:"Output 9",value:1},{name:"Output 10",links:[{portIn:"in3 Ops.Values.SequenceNumbers Output 10",portOut:"Output 10",objIn:"156",objOut:"276"}]},{name:"Output 11",links:[{portIn:"in2 Ops.Values.SequenceNumbers Output 11",portOut:"Output 11",objIn:"156",objOut:"276"}]},{name:"Output 12",links:[{portIn:"in1 Ops.Values.SequenceNumbers Output 12",portOut:"Output 12",objIn:"156",objOut:"276"}]},{name:"Output 13",links:[{portIn:"in3 Ops.Values.SequenceNumbers Output 13",portOut:"Output 13",objIn:"279",objOut:"276"}]},{name:"Output 14",value:1},{name:"Output 15",links:[{portIn:"in1 Ops.Values.SequenceNumbers Output 15",portOut:"Output 15",objIn:"279",objOut:"276"}]}]},{objName:"Ops.Ui.PatchInput",id:"277",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[],portsOut:[{name:"create port",value:0},{name:"in0 Ops.Trigger.TimedSequence trigger 30",links:[{portIn:"exe",portOut:"in0 Ops.Trigger.TimedSequence trigger 30",objIn:"294",objOut:"277"}]},{name:"in1 Ops.Values.SequenceNumbers Output 15",links:[{portIn:"val",portOut:"in1 Ops.Values.SequenceNumbers Output 15",objIn:"337",objOut:"277"},{portIn:"val",portOut:"in1 Ops.Values.SequenceNumbers Output 15",objIn:"338",objOut:"277"},{portIn:"val",portOut:"in1 Ops.Values.SequenceNumbers Output 15",objIn:"339",objOut:"277"}]},{name:"in2 Ops.Values.SequenceNumbers Output 14",links:[{portIn:"number1",portOut:"in2 Ops.Values.SequenceNumbers Output 14",objIn:"344",objOut:"277"}]},{name:"in3 Ops.Values.SequenceNumbers Output 13",links:[{portIn:"number",portOut:"in3 Ops.Values.SequenceNumbers Output 13",objIn:"316",objOut:"277"}]}]},{objName:"Ops.Ui.PatchOutput",id:"278",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"create port",value:0}],portsOut:[]},{objName:"Ops.Ui.SubPatch",id:"279",uiAttribs:{subPatch:0},portsIn:[{name:"create port",value:null},{name:"dataStr",value:'{"ports":[{"name":"in0 Ops.Trigger.TimedSequence trigger 30","type":1},{"name":"in1 Ops.Values.SequenceNumbers Output 15","type":0},{"name":"in2 Ops.Values.SequenceNumbers Output 14","type":0},{"name":"in3 Ops.Values.SequenceNumbers Output 13","type":0}],"portsOut":[]}'},{name:"patchId",value:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},{name:"in0 Ops.Trigger.TimedSequence trigger 30"},{name:"in1 Ops.Values.SequenceNumbers Output 15"},{name:"in2 Ops.Values.SequenceNumbers Output 14"},{name:"in3 Ops.Values.SequenceNumbers Output 13"}],portsOut:[{name:"create port out",value:0}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"280",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI float iTime;\nUNI vec3 iResolution;\n\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nvec3 perlin_color(vec2 uv, vec2 size, int iterations, float persistence, float seed) {\n\tvec2 seed2 = rand2(vec2(seed, 1.0-seed));\n    vec3 rv = vec3(0.0);\n    float coef = 1.0;\n    float acc = 0.0;\n    for (int i = 0; i < iterations; ++i) {\n    \tvec2 step = vec2(1.0)/size;\n\t\tvec2 xy = floor(uv*size);\n        vec3 f0 = rand3(seed2+mod(xy, size));\n        vec3 f1 = rand3(seed2+mod(xy+vec2(1.0, 0.0), size));\n        vec3 f2 = rand3(seed2+mod(xy+vec2(0.0, 1.0), size));\n        vec3 f3 = rand3(seed2+mod(xy+vec2(1.0, 1.0), size));\n        vec2 mixval = smoothstep(0.0, 1.0, fract(uv*size));\n        rv += coef * mix(mix(f0, f1, mixval.x), mix(f2, f3, mixval.x), mixval.y);\n        acc += coef;\n        size *= 2.0;\n        coef *= persistence;\n    }\n    \n    return rv / acc;\n}\nfloat truchet1(vec2 uv, vec2 seed) {\n    vec2 i = floor(uv);\n    vec2 f = fract(uv)-vec2(0.5);\n    return 1.0-abs(abs((2.0*step(rand(i+seed), 0.5)-1.0)*f.x+f.y)-0.5);\n}\n\nfloat truchet2(vec2 uv, vec2 seed) {\n    vec2 i = floor(uv);\n    vec2 f = fract(uv);\n    float random = step(rand(i+seed), 0.5);\n    f.x *= 2.0*random-1.0;\n    f.x += 1.0-random;\n    return 1.0-min(abs(length(f)-0.5), abs(length(1.0-f)-0.5));\n}\nvec4 brick(vec2 uv, vec2 bmin, vec2 bmax, float mortar, float round, float bevel) {\n\tfloat color;\n\tvec2 size = bmax - bmin;\n\tfloat min_size = min(size.x, size.y);\n\tmortar *= min_size;\n\tbevel *= min_size;\n\tround *= min_size;\n\tvec2 center = 0.5*(bmin+bmax);\n    vec2 d = abs(uv-center)-0.5*(size)+vec2(round+mortar);\n    color = length(max(d,vec2(0))) + min(max(d.x,d.y),0.0)-round;\n\tcolor = clamp(-color/bevel, 0.0, 1.0);\n\tvec2 tiled_brick_pos = mod(bmin, vec2(1.0, 1.0));\n\treturn vec4(color, center, tiled_brick_pos.x+7.0*tiled_brick_pos.y);\n}\n\nvec3 brick_random_color(vec2 bmin, vec2 bmax, float seed) {\n\tvec2 center = 0.5*(bmin + bmax);\n\treturn rand3(fract(center + vec2(seed)));\n}\n\nvec3 brick_uv(vec2 uv, vec2 bmin, vec2 bmax, float seed) {\n\tvec2 center = 0.5*(bmin + bmax);\n\tvec2 size = bmax - bmin;\n\tfloat max_size = max(size.x, size.y);\n\treturn vec3(0.5+(uv-center)/max_size, rand(fract(center)+vec2(seed)));\n}\n\nvec3 brick_corner_uv(vec2 uv, vec2 bmin, vec2 bmax, float mortar, float corner, float seed) {\n\tvec2 center = 0.5*(bmin + bmax);\n\tvec2 size = bmax - bmin;\n\tfloat max_size = max(size.x, size.y);\n\tfloat min_size = min(size.x, size.y);\n\tmortar *= min_size;\n\tcorner *= min_size;\n\treturn vec3(clamp((0.5*size-vec2(mortar)-abs(uv-center))/corner, vec2(0.0), vec2(1.0)), rand(fract(center)+vec2(seed)+ceil(vec2(uv-center))));\n}\n\nvec4 bricks_rb(vec2 uv, vec2 count, float repeat, float offset) {\n\tcount *= repeat;\n\tfloat x_offset = offset*step(0.5, fract(uv.y*count.y*0.5));\n\tvec2 bmin = floor(vec2(uv.x*count.x-x_offset, uv.y*count.y));\n\tbmin.x += x_offset;\n\tbmin /= count;\n\treturn vec4(bmin, bmin+vec2(1.0)/count);\n}\n\nvec4 bricks_rb2(vec2 uv, vec2 count, float repeat, float offset) {\n\tcount *= repeat;\n\tfloat x_offset = offset*step(0.5, fract(uv.y*count.y*0.5));\n\tcount.x = count.x*(1.0+step(0.5, fract(uv.y*count.y*0.5)));\n\tvec2 bmin = floor(vec2(uv.x*count.x-x_offset, uv.y*count.y));\n\tbmin.x += x_offset;\n\tbmin /= count;\n\treturn vec4(bmin, bmin+vec2(1.0)/count);\n}\n\nvec4 bricks_hb(vec2 uv, vec2 count, float repeat, float offset) {\n\tfloat pc = count.x+count.y;\n\tfloat c = pc*repeat;\n\tvec2 corner = floor(uv*c);\n\tfloat cdiff = mod(corner.x-corner.y, pc);\n\tif (cdiff < count.x) {\n\t\treturn vec4((corner-vec2(cdiff, 0.0))/c, (corner-vec2(cdiff, 0.0)+vec2(count.x, 1.0))/c);\n\t} else {\n\t\treturn vec4((corner-vec2(0.0, pc-cdiff-1.0))/c, (corner-vec2(0.0, pc-cdiff-1.0)+vec2(1.0, count.y))/c);\n\t}\n}\n\nvec4 bricks_bw(vec2 uv, vec2 count, float repeat, float offset) {\n\tvec2 c = 2.0*count*repeat;\n\tfloat mc = max(c.x, c.y);\n\tvec2 corner1 = floor(uv*c);\n\tvec2 corner2 = count*floor(repeat*2.0*uv);\n\tfloat cdiff = mod(dot(floor(repeat*2.0*uv), vec2(1.0)), 2.0);\n\tvec2 corner;\n\tvec2 size;\n\tif (cdiff == 0.0) {\n\t\tcorner = vec2(corner1.x, corner2.y);\n\t\tsize = vec2(1.0, count.y);\n\t} else {\n\t\tcorner = vec2(corner2.x, corner1.y);\n\t\tsize = vec2(count.x, 1.0);\n\t}\n\treturn vec4(corner/c, (corner+size)/c);\n}\n\nvec4 bricks_sb(vec2 uv, vec2 count, float repeat, float offset) {\n\tvec2 c = (count+vec2(1.0))*repeat;\n\tfloat mc = max(c.x, c.y);\n\tvec2 corner1 = floor(uv*c);\n\tvec2 corner2 = (count+vec2(1.0))*floor(repeat*uv);\n\tvec2 rcorner = corner1 - corner2;\n\tvec2 corner;\n\tvec2 size;\n\tif (rcorner.x == 0.0 && rcorner.y < count.y) {\n\t\tcorner = corner2;\n\t\tsize = vec2(1.0, count.y);\n\t} else if (rcorner.y == 0.0) {\n\t\tcorner = corner2+vec2(1.0, 0.0);\n\t\tsize = vec2(count.x, 1.0);\n\t} else if (rcorner.x == count.x) {\n\t\tcorner = corner2+vec2(count.x, 1.0);\n\t\tsize = vec2(1.0, count.y);\n\t} else if (rcorner.y == count.y) {\n\t\tcorner = corner2+vec2(0.0, count.y);\n\t\tsize = vec2(count.x, 1.0);\n\t} else {\n\t\tcorner = corner2+vec2(1.0);\n\t\tsize = vec2(count.x-1.0, count.y-1.0);\n\t}\n\treturn vec4(corner/c, (corner+size)/c);\n}vec3 normal_blend(vec2 uv, vec3 n1, vec3 n2, float opacity) {\n\tn1.z = 1.0 - n1.z; // inverting z channel before calculations\n\tn2.z = 1.0 - n2.z; // inverting z channel before calculations\n\tvec3 t = n1*vec3( 2,  2, 2) + vec3(-1, -1,  0);\n\tvec3 u = n2*vec3(-2, -2, 2) + vec3( 1,  1, -1);\n\tvec3 r = mix(n2 * 2.0 - 1.0, t * dot(t, u) / t.z - u, opacity);\n\tr.z = r.z * -1.0; // inverting z channel after calculations\n\treturn r * 0.5 + 0.5;\n}const float p_o74629_amount = 8.350000000;\nconst float seed_o66387 = 0.000000000;\nconst float p_o66387_scale_x = 4.000000000;\nconst float p_o66387_scale_y = 4.000000000;\nconst float p_o66387_iterations = 9.000000000;\nconst float seed_o64133 = 0.000000000;\nconst float p_o64133_size = 12.000000000;\nconst float seed_o14639 = 0.000000000;\nconst float p_o14639_repeat = 1.000000000;\nconst float p_o14639_rows = 43.000000000;\nconst float p_o14639_columns = 13.000000000;\nconst float p_o14639_row_offset = 0.500000000;\nconst float p_o14639_mortar = 0.160000000;\nconst float p_o14639_bevel = 0.080000000;\nconst float p_o14639_round = 0.500000000;\nconst float p_o14639_corner = 0.500000000;\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec3 o66387_0_1_rgb = perlin_color((UV), vec2(p_o66387_scale_x, p_o66387_scale_y), int(p_o66387_iterations), (sin(iTime*0.3)+0.5), (seed_o66387+_seed_variation_));\nfloat o64133_0_1_f = truchet2((UV)*p_o64133_size, vec2(float((seed_o64133+_seed_variation_))));\nvec4 o14639_0_rect = bricks_rb((UV), vec2(p_o14639_columns, p_o14639_rows), p_o14639_repeat, p_o14639_row_offset);\nvec4 o14639_0 = brick((UV), o14639_0_rect.xy, o14639_0_rect.zw, p_o14639_mortar*1.0, p_o14639_round*1.0, max(0.001, p_o14639_bevel*1.0));\nvec3 o14639_1_2_rgb = brick_random_color(o14639_0_rect.xy, o14639_0_rect.zw, float((seed_o14639+_seed_variation_)));\nvec3 o74629_0_1_rgb = normal_blend((UV), o66387_0_1_rgb, vec3(o64133_0_1_f), p_o74629_amount * (dot(o14639_1_2_rgb, vec3(1.0))/3.0));\ngl_FragColor = vec4(o74629_0_1_rgb, 1.0);\n}"},{name:"Vertex Code",value:"\n{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\nIN float attrVertIndex;\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}"},{name:"Use As Material",value:true},{name:"iTime"},{name:"iResolution X",value:1.2},{name:"iResolution Y",value:1.26},{name:"iResolution Z",value:0}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"281",objOut:"280"},{portIn:"exe",portOut:"trigger",objIn:"287",objOut:"280"},{portIn:"exe",portOut:"trigger",objIn:"289",objOut:"280"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"281",objOut:"280"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"281",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:360},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Floating Point",value:false},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture"},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Gl.Meshes.Cone",id:"282",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"slices",value:329.5},{name:"stacks",value:5},{name:"radius",value:1.56},{name:"height",value:2},{name:"Active",value:true}],portsOut:[{name:"trigger",links:[{portIn:"Exec",portOut:"trigger",objIn:"285",objOut:"282"}]},{name:"geometry"}]},{objName:"Ops.Gl.Matrix.Transform",id:"283",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:0},{name:"scale",value:.58},{name:"rotX",value:-78.02},{name:"rotY",value:-180.5},{name:"rotZ",value:-101.4}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"282",objOut:"283"},{portIn:"render",portOut:"trigger",objIn:"293",objOut:"283"}]}]},{objName:"Ops.Anim.Timer_v2",id:"284",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Speed",value:-2},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"280",objOut:"284"}]}]},{objName:"Ops.Gl.Shader.ShaderInfo",id:"285",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Exec"},{name:"Show Fragment",value:0},{name:"Show Vertex",value:0},{name:"Show Modules",value:0},{name:"Show Uniforms",value:0},{name:"State Info",value:0}],portsOut:[{name:"Next",value:0},{name:"Name",value:"Ops.Gl.Shader.CustomShader_v2 copy copy"},{name:"Id",value:309},{name:"needsBarycentric",value:0},{name:"Num Uniforms",value:15},{name:"Num Attributes",value:3},{name:"Arributes Names"},{name:"Num Defines"}]},{objName:"Ops.Gl.ShaderEffects.Bend_v2",id:"286",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"Amount",value:-.64},{name:"RotX"},{name:"RotY",value:5.49},{name:"RotZ",value:7.24},{name:"Scale",value:-195.78},{name:"Offset",value:.2},{name:"Limited",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"283",objOut:"286"}]}]},{objName:"Ops.Anim.SineAnim",id:"287",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:1},{name:"amplitude",value:233.95}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"RotX",portOut:"result",objIn:"286",objOut:"287"}]}]},{objName:"Ops.Gl.ShaderEffects.DeformArea",id:"288",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"Size",value:1.31},{name:"Strength"},{name:"Smooth",value:true},{name:"WorldSpace",value:false},{name:"x",value:0},{name:"y",value:0},{name:"z",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"286",objOut:"288"}]}]},{objName:"Ops.Anim.SineAnim",id:"289",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:1.64},{name:"frequency",value:1.12},{name:"amplitude",value:327.95}],portsOut:[{name:"Trigger out",links:[{portIn:"render",portOut:"Trigger out",objIn:"288",objOut:"289"}]},{name:"result",links:[{portIn:"Strength",portOut:"result",objIn:"288",objOut:"289"}]}]},{objName:"Ops.Gl.Meshes.Cone",id:"290",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"slices",value:329.5},{name:"stacks",value:5},{name:"radius",value:1.56},{name:"height",value:2},{name:"Active",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"292",objOut:"290"}]},{name:"geometry"}]},{objName:"Ops.Gl.Meshes.Cone",id:"291",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"slices",value:329.5},{name:"stacks",value:5},{name:"radius",value:1.56},{name:"height",value:2},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.Matrix.Transform",id:"292",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:-7.97},{name:"posZ",value:0},{name:"scale",value:1},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"291",objOut:"292"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"293",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"posX",value:.04},{name:"posY",value:.5},{name:"posZ",value:-.69},{name:"scale",value:.13},{name:"rotX",value:-3.4},{name:"rotY",value:-67.04},{name:"rotZ",value:.79}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"290",objOut:"293"}]}]},{objName:"Ops.Sequence",id:"294",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"280",objOut:"294"}]},{name:"trigger 1",links:[{portIn:"exe",portOut:"trigger 1",objIn:"323",objOut:"294"},{portIn:"update",portOut:"trigger 1",objIn:"309",objOut:"294"},{portIn:"Update",portOut:"trigger 1",objIn:"311",objOut:"294"},{portIn:"Render",portOut:"trigger 1",objIn:"319",objOut:"294"}]},{name:"trigger 2",links:[{portIn:"render",portOut:"trigger 2",objIn:"308",objOut:"294"}]},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",links:[{portIn:"exe",portOut:"trigger 11",objIn:"342",objOut:"294"}]},{name:"trigger 12",links:[{portIn:"exe",portOut:"trigger 12",objIn:"341",objOut:"294"}]},{name:"trigger 13",links:[{portIn:"exe",portOut:"trigger 13",objIn:"340",objOut:"294"}]},{name:"trigger 14",value:0},{name:"trigger 15",links:[{portIn:"render",portOut:"trigger 15",objIn:"306",objOut:"294"}]}]},{objName:"Ops.Anim.Timer_v2",id:"295",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Speed",value:99.01},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"time",portOut:"Time",objIn:"296",objOut:"295"},{portIn:"Random Seed ",portOut:"Time",objIn:"300",objOut:"295"}]}]},{objName:"Ops.Systems.ArraySpray",id:"296",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"exe"},{name:"time"},{name:"num",value:417.39},{name:"Size X",value:0},{name:"Size Y",value:0},{name:"Size Z",value:0},{name:"movement x",value:1},{name:"movement y",value:1},{name:"movement z",value:1},{name:"Center X",value:false},{name:"Center Y",value:false},{name:"Center Z",value:false},{name:"Reset",value:0},{name:"lifetime",value:444.03},{name:"Lifetime Minimum",value:.99}],portsOut:[{name:"Trigger Out",links:[{portIn:"render",portOut:"Trigger Out",objIn:"299",objOut:"296"},{portIn:"Update",portOut:"Trigger Out",objIn:"303",objOut:"296"},{portIn:"Render",portOut:"Trigger Out",objIn:"305",objOut:"296"}]},{name:"Positions",links:[{portIn:"Array",portOut:"Positions",objIn:"297",objOut:"296"}]},{name:"Lifetime"}]},{objName:"Ops.Gl.Meshes.PointCloudFromArray",id:"297",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"exe"},{name:"Array"},{name:"Num Points",value:0},{name:"Scramble Texcoords",value:true},{name:"Seed",value:0},{name:"Coordinates",value:0},{name:"Vertex Colors"}],portsOut:[{name:"Trigger out",value:0},{name:"Geometry"}]},{objName:"Ops.Gl.Shader.PointMaterial_v4",id:"298",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"PointSize",value:134.65},{name:"Size in Pixels",value:true},{name:"Random Size",value:10.14},{name:"Round",value:true},{name:"Round Antialias",value:false},{name:"Scale by Distance",value:false},{name:"r",value:.8743162439825047},{name:"g",value:.314668866824934},{name:"b",value:.11935955205787785},{name:"a",value:1},{name:"Vertex Colors",value:false},{name:"texture"},{name:"Colorize Texture",value:false},{name:"Texture Mask",value:0},{name:"Mask Channel index",value:0},{name:"Mask Channel",value:"R"},{name:"Texture Colorize",value:0},{name:"Colorize Randomize",value:true},{name:"Texture Opacity",value:0},{name:"Texture Point Size",value:0},{name:"Point Size Channel index",value:0},{name:"Point Size Channel",value:"R"},{name:"Texture Point Size Mul",value:1},{name:"Map Size 0 index",value:0},{name:"Map Size 0",value:"Black"},{name:"Flip Texture",value:false}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"297",objOut:"298"}]},{name:"shader"}]},{objName:"Ops.Gl.Matrix.Transform",id:"299",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:0},{name:"scale",value:-64.22},{name:"rotX",value:264.66},{name:"rotY",value:135.93},{name:"rotZ",value:-354}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"298",objOut:"299"}]}]},{objName:"Ops.Array.RandomArrays",id:"300",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Num Values",value:100},{name:"Mode index",value:0},{name:"Mode",value:"A"},{name:"Random Seed "},{name:"Integer",value:false},{name:"Min A",value:100},{name:"Max A",value:200},{name:"Min B",value:0},{name:"Max B",value:1},{name:"Min C",value:0},{name:"Max C",value:1},{name:"Min D",value:0},{name:"Max D",value:1}],portsOut:[{name:"Array Out",links:[{portIn:"Points",portOut:"Array Out",objIn:"301",objOut:"300"}]},{name:"Chunks Amount",value:100},{name:"Array length",value:100}]},{objName:"Ops.Array.Array3FlipAxis",id:"301",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Points"},{name:"Axis 1 index",value:0},{name:"Axis 1",value:"X"},{name:"Axis 2 index",value:1},{name:"Axis 2",value:"Y"},{name:"Axis 3 index",value:2},{name:"Axis 3",value:"Z"},{name:"Flip Order X"},{name:"Flip Order Y"},{name:"Flip Order Z"}],portsOut:[{name:"Result",links:[{portIn:"Array3x",portOut:"Result",objIn:"302",objOut:"301"}]}]},{objName:"Ops.Array.Array3Multiply",id:"302",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Array3x"},{name:"Mul X",value:-.48},{name:"Mul Y",value:.22},{name:"Mul Z",value:.29}],portsOut:[{name:"Result",links:[{portIn:"Vertex Colors",portOut:"Result",objIn:"297",objOut:"302"},{portIn:"array",portOut:"Result",objIn:"303",objOut:"302"}]}]},{objName:"Ops.Gl.TextureFromColorArray",id:"303",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Update"},{name:"array"},{name:"width",value:1},{name:"height",value:1},{name:"Filter index",value:0},{name:"Filter",value:"nearest"},{name:"Wrap index",value:0},{name:"Wrap",value:"repeat"}],portsOut:[{name:"Next",value:0},{name:"Texture out",links:[{portIn:"texture",portOut:"Texture out",objIn:"298",objOut:"303"},{portIn:"Image",portOut:"Texture out",objIn:"304",objOut:"303"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"304",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"305",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:440},{name:"Height",value:400},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"304",objOut:"305"}]},{name:"texture_out"},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.Matrix.OrbitControls",id:"306",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"min distance",value:.05},{name:"max distance",value:99999},{name:"min rot y",value:0},{name:"max rot y",value:0},{name:"initial radius",value:.05},{name:"initial axis y",value:.5},{name:"initial axis x",value:.25},{name:"mul",value:1},{name:"Smoothness",value:1},{name:"Speed X",value:1},{name:"Speed Y",value:1},{name:"Active",value:true},{name:"Allow Panning",value:true},{name:"Allow Zooming",value:true},{name:"Allow Rotation",value:true},{name:"restricted",value:true},{name:"Reset",value:0}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"296",objOut:"306"}]},{name:"radius",value:9.985999999999999},{name:"Rot X",value:122.83048120317153},{name:"Rot Y",value:74.88000013049722}]},{objName:"Ops.Gl.Meshes.PointCloudFromArray",id:"307",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"exe"},{name:"Array"},{name:"Num Points",value:0},{name:"Scramble Texcoords",value:true},{name:"Seed",value:0},{name:"Coordinates",value:0},{name:"Vertex Colors",value:0}],portsOut:[{name:"Trigger out",value:0},{name:"Geometry"}]},{objName:"Ops.Gl.Shader.PointMaterial_v4",id:"308",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"PointSize",value:2.26},{name:"Size in Pixels",value:false},{name:"Random Size",value:0},{name:"Round",value:true},{name:"Round Antialias",value:false},{name:"Scale by Distance",value:false},{name:"r",value:.24803338657415552},{name:"g",value:.7198259679852583},{name:"b",value:.4887564168275904},{name:"a",value:1},{name:"Vertex Colors",value:false},{name:"texture"},{name:"Colorize Texture",value:false},{name:"Texture Mask",value:0},{name:"Mask Channel index",value:0},{name:"Mask Channel",value:"A"},{name:"Texture Colorize",value:0},{name:"Colorize Randomize",value:true},{name:"Texture Opacity",value:0},{name:"Texture Point Size",value:0},{name:"Point Size Channel index",value:0},{name:"Point Size Channel",value:"R"},{name:"Texture Point Size Mul",value:9.25},{name:"Map Size 0 index",value:0},{name:"Map Size 0",value:"Grey"},{name:"Flip Texture",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"314",objOut:"308"}]},{name:"shader"}]},{objName:"Ops.Gl.TextureToPointArray3",id:"309",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"update"},{name:"Center",value:true},{name:"Threshold Remove",value:.506},{name:"Z Multiply"},{name:"texture"},{name:"Width",value:3.42},{name:"Height",value:2}],portsOut:[{name:"trigger",value:0},{name:"Points",links:[{portIn:"Array",portOut:"Points",objIn:"307",objOut:"309"}]},{name:"Total Points",value:795},{name:"Min Z",value:-.94140625},{name:"Max Z",value:0}]},{objName:"Ops.Gl.Textures.ColorTexture",id:"310",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"r"},{name:"g"},{name:"b"},{name:"a",value:1}],portsOut:[{name:"texture_out",links:[{portIn:"texture",portOut:"texture_out",objIn:"308",objOut:"310"},{portIn:"Texture In",portOut:"texture_out",objIn:"322",objOut:"310"}]}]},{objName:"Ops.Array.AnimArray_v2",id:"311",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Update"},{name:"Next Array"},{name:"Duration",value:.03},{name:"easing index",value:0},{name:"easing",value:"Quart In Out"}],portsOut:[{name:"Next",value:0},{name:"Matrix",links:[{portIn:"Array",portOut:"Matrix",objIn:"312",objOut:"311"},{portIn:"array",portOut:"Matrix",objIn:"325",objOut:"311"}]}]},{objName:"Ops.Array.Array3GetNumbers",id:"312",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Array"},{name:"Index",value:8}],portsOut:[{name:"X",links:[{portIn:"number1",portOut:"X",objIn:"328",objOut:"312"}]},{name:"Y",links:[{portIn:"number1",portOut:"Y",objIn:"326",objOut:"312"}]},{name:"Z",links:[{portIn:"number1",portOut:"Z",objIn:"327",objOut:"312"}]}]},{objName:"Ops.Array.RandomArrays",id:"313",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Num Values",value:100},{name:"Mode index",value:0},{name:"Mode",value:"A"},{name:"Random Seed "},{name:"Integer",value:false},{name:"Min A",value:.01},{name:"Max A",value:1},{name:"Min B",value:.01},{name:"Max B",value:1},{name:"Min C",value:.01},{name:"Max C",value:1},{name:"Min D",value:-1},{name:"Max D",value:1}],portsOut:[{name:"Array Out",links:[{portIn:"Next Array",portOut:"Array Out",objIn:"311",objOut:"313"}]},{name:"Chunks Amount",value:100},{name:"Array length",value:100}]},{objName:"Ops.Gl.Matrix.Transform",id:"314",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:-1.09},{name:"posZ",value:.3},{name:"scale",value:1.9},{name:"rotX"},{name:"rotY",value:0},{name:"rotZ",value:2.92}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"307",objOut:"314"}]}]},{objName:"Ops.Math.Pow",id:"315",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Base"},{name:"Exponent",value:1.18}],portsOut:[{name:"Result",links:[{portIn:"rotX",portOut:"Result",objIn:"314",objOut:"315"}]}]},{objName:"Ops.Math.Abs",id:"316",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"number"}],portsOut:[{name:"result",links:[{portIn:"number1",portOut:"result",objIn:"317",objOut:"316"}]}]},{objName:"Ops.Math.Sum",id:"317",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"number1"},{name:"number2",value:.2}],portsOut:[{name:"result",links:[{portIn:"number1",portOut:"result",objIn:"318",objOut:"317"}]}]},{objName:"Ops.Math.Multiply",id:"318",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"number1"},{name:"number2",value:2}],portsOut:[{name:"result",links:[{portIn:"Base",portOut:"result",objIn:"315",objOut:"318"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"319",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Render"},{name:"Use viewport size",value:false},{name:"Width",value:30},{name:"Height",value:63},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"320",objOut:"319"}]},{name:"texture_out",links:[{portIn:"texture",portOut:"texture_out",objIn:"309",objOut:"319"}]},{name:"Aspect Ratio",value:.47619047619047616}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"320",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"add"},{name:"amount",value:.47},{name:"Image",value:0},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:true},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:.169},{name:"Scale Y",value:.169},{name:"Position X",value:-57.94},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"321",objOut:"320"}]}]},{objName:"Ops.Gl.TextureEffects.Plasma",id:"321",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Width",value:4},{name:"Height",value:3.85},{name:"Mul",value:2.59},{name:"offset X",value:0},{name:"offset Y"},{name:"Time"},{name:"Greyscale",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"324",objOut:"321"}]}]},{objName:"Ops.Ui.VizTexture",id:"322",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out"},{name:"Info",value:""}]},{objName:"Ops.Anim.SineAnim",id:"323",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:9.46},{name:"amplitude",value:.45}],portsOut:[{name:"Trigger out",links:[{portIn:"Update",portOut:"Trigger out",objIn:"325",objOut:"323"}]},{name:"result",links:[{portIn:"value",portOut:"result",objIn:"329",objOut:"323"},{portIn:"value",portOut:"result",objIn:"330",objOut:"323"},{portIn:"value",portOut:"result",objIn:"331",objOut:"323"},{portIn:"Random Seed ",portOut:"result",objIn:"313",objOut:"323"}]}]},{objName:"Ops.Gl.TextureEffects.Blur",id:"324",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"amount",value:10.69},{name:"direction index",value:0},{name:"direction",value:"both"},{name:"Fast",value:true},{name:"mask",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"334",objOut:"324"}]}]},{objName:"Ops.Gl.TextureFromColorArray",id:"325",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Update"},{name:"array"},{name:"width",value:32},{name:"height",value:32},{name:"Filter index",value:0},{name:"Filter",value:"nearest"},{name:"Wrap index",value:0},{name:"Wrap",value:"repeat"}],portsOut:[{name:"Next",value:0},{name:"Texture out"}]},{objName:"Ops.Math.Divide",id:"326",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"number1"},{name:"number2"}],portsOut:[{name:"result",links:[{portIn:"g",portOut:"result",objIn:"310",objOut:"326"}]}]},{objName:"Ops.Math.Multiply",id:"327",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"number1"},{name:"number2"}],portsOut:[{name:"result",links:[{portIn:"b",portOut:"result",objIn:"310",objOut:"327"}]}]},{objName:"Ops.Math.Multiply",id:"328",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"number1"},{name:"number2"}],portsOut:[{name:"result",links:[{portIn:"r",portOut:"result",objIn:"310",objOut:"328"}]}]},{objName:"Ops.Math.Sine",id:"329",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"value"},{name:"phase",value:0},{name:"frequency",value:3.39},{name:"amplitude",value:3.13},{name:"asine",value:false}],portsOut:[{name:"result",links:[{portIn:"number2",portOut:"result",objIn:"328",objOut:"329"}]}]},{objName:"Ops.Math.Sine",id:"330",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"value"},{name:"phase",value:0},{name:"frequency",value:4.12},{name:"amplitude",value:1.53},{name:"asine",value:false}],portsOut:[{name:"result",links:[{portIn:"number2",portOut:"result",objIn:"326",objOut:"330"}]}]},{objName:"Ops.Math.Sine",id:"331",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"value"},{name:"phase",value:0},{name:"frequency",value:.97},{name:"amplitude",value:2.82},{name:"asine",value:false}],portsOut:[{name:"result",links:[{portIn:"number2",portOut:"result",objIn:"327",objOut:"331"}]}]},{objName:"Ops.Anim.Timer_v2",id:"332",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"Speed",value:.37},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Time",portOut:"Time",objIn:"321",objOut:"332"},{portIn:"number1",portOut:"Time",objIn:"333",objOut:"332"}]}]},{objName:"Ops.Math.Multiply",id:"333",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"number1"},{name:"number2",value:2.44}],portsOut:[{name:"result",links:[{portIn:"offset Y",portOut:"result",objIn:"321",objOut:"333"}]}]},{objName:"Ops.Gl.TextureEffects.BarrelDistortion_v2",id:"334",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Intensity",value:-45.59}],portsOut:[{name:"Trigger",value:0}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"335",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:49},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"336",objOut:"335"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"1"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"336",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:30}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"336"}]}]},{objName:"Ops.Math.Clamp",id:"337",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"val"},{name:"min",value:0},{name:"max",value:33},{name:"ignore outside values",value:false}],portsOut:[{name:"result",links:[{portIn:"number",portOut:"result",objIn:"340",objOut:"337"}]}]},{objName:"Ops.Math.Clamp",id:"338",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"val"},{name:"min",value:34},{name:"max",value:66},{name:"ignore outside values",value:true}],portsOut:[{name:"result",links:[{portIn:"number",portOut:"result",objIn:"341",objOut:"338"}]}]},{objName:"Ops.Math.Clamp",id:"339",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"val"},{name:"min",value:67},{name:"max",value:100},{name:"ignore outside values",value:false}],portsOut:[{name:"result",links:[{portIn:"number",portOut:"result",objIn:"342",objOut:"339"}]}]},{objName:"Ops.Math.Compare.IfBetweenThen",id:"340",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"exe"},{name:"number"},{name:"min",value:0},{name:"max",value:32}],portsOut:[{name:"then",value:0},{name:"else",value:0},{name:"bs between",links:[{portIn:"Flip Order X",portOut:"bs between",objIn:"301",objOut:"340"}]}]},{objName:"Ops.Math.Compare.IfBetweenThen",id:"341",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"exe"},{name:"number"},{name:"min",value:35},{name:"max",value:63}],portsOut:[{name:"then",value:0},{name:"else",value:0},{name:"bs between",links:[{portIn:"Flip Order Y",portOut:"bs between",objIn:"301",objOut:"341"}]}]},{objName:"Ops.Math.Compare.IfBetweenThen",id:"342",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"exe"},{name:"number"},{name:"min",value:68},{name:"max",value:1}],portsOut:[{name:"then",value:0},{name:"else",value:0},{name:"bs between",links:[{portIn:"Flip Order Z",portOut:"bs between",objIn:"301",objOut:"342"}]}]},{objName:"Ops.Math.Clamp",id:"343",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"val"},{name:"min",value:-1},{name:"max",value:2},{name:"ignore outside values",value:false}],portsOut:[{name:"result",links:[{portIn:"Z Multiply",portOut:"result",objIn:"309",objOut:"343"}]}]},{objName:"Ops.Math.Divide",id:"344",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"number1"},{name:"number2",value:29.5}],portsOut:[{name:"result",links:[{portIn:"number1",portOut:"result",objIn:"345",objOut:"344"},{portIn:"val",portOut:"result",objIn:"343",objOut:"344"}]}]},{objName:"Ops.Math.Subtract",id:"345",uiAttribs:{subPatch:"97f15fc4-dae7-469b-ba45-95b9a08ea0e3"},portsIn:[{name:"number1"},{name:"number2",value:1}],portsOut:[{name:"result",links:[{portIn:"val",portOut:"result",objIn:"343",objOut:"345"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"346",uiAttribs:{subPatch:"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4"},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ"},{name:"scale",value:1},{name:"rotX"},{name:"rotY"},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"194",objOut:"346"}]}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"347",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nvec3 rotate3d(vec3 p, vec3 a) {\n\tvec3 rv;\n\tfloat c;\n\tfloat s;\n\tc = cos(a.x);\n\ts = sin(a.x);\n\trv.x = p.x;\n\trv.y = p.y*c+p.z*s;\n\trv.z = -p.y*s+p.z*c;\n\tc = cos(a.y);\n\ts = sin(a.y);\n\tp.x = rv.x*c+rv.z*s;\n\tp.y = rv.y;\n\tp.z = -rv.x*s+rv.z*c;\n\tc = cos(a.z);\n\ts = sin(a.z);\n\trv.x = p.x*c+p.y*s;\n\trv.y = -p.x*s+p.y*c;\n\trv.z = p.z;\n\treturn rv;\n}\nvec3 circle_repeat_transform(vec3 p, float count) {\n\tfloat r = 6.28/count;\n\tfloat pa = atan(p.x, p.y);\n\tfloat a = mod(pa+0.5*r, r)-0.5*r;\n\tvec3 rv;\n\tfloat c = cos(a-pa);\n\tfloat s = sin(a-pa);\n\trv.x = p.x*c+p.y*s;\n\trv.y = -p.x*s+p.y*c;\n\trv.z = p.z;\n\treturn rv;\n}\nvec2 sdf3dc_union(vec2 a, vec2 b) {\n\treturn vec2(min(a.x, b.x), mix(b.y, a.y, step(a.x, b.x)));\n}\nvec2 sdf3dc_sub(vec2 a, vec2 b) {\n\treturn vec2(max(-a.x, b.x), a.y);\n}\nvec2 sdf3dc_inter(vec2 a, vec2 b) {\n\treturn vec2(max(a.x, b.x), mix(a.y, b.y, step(a.x, b.x)));\n}\nvec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nvec2 scale(vec2 uv, vec2 center, vec2 scale) {\n\tuv -= center;\n\tuv /= scale;\n\tuv += center;\n    return uv;\n}const float p_o766970_cx = 0.000000000;\nconst float p_o766970_cy = 0.000000000;\nconst float p_o766970_scale_x = 0.135000005;\nconst float p_o766970_scale_y = 0.135000005;\nconst float p_o224937_gradient_0_pos = 0.363767312;\nconst float p_o224937_gradient_0_r = 1.000000000;\nconst float p_o224937_gradient_0_g = 0.000000000;\nconst float p_o224937_gradient_0_b = 0.000000000;\nconst float p_o224937_gradient_0_a = 1.000000000;\nconst float p_o224937_gradient_1_pos = 0.740309837;\nconst float p_o224937_gradient_1_r = 0.000000000;\nconst float p_o224937_gradient_1_g = 0.062500000;\nconst float p_o224937_gradient_1_b = 1.000000000;\nconst float p_o224937_gradient_1_a = 1.000000000;\nvec4 o224937_gradient_gradient_fct(float x) {\n  if (x < p_o224937_gradient_0_pos) {\n    return vec4(p_o224937_gradient_0_r,p_o224937_gradient_0_g,p_o224937_gradient_0_b,p_o224937_gradient_0_a);\n  } else if (x < p_o224937_gradient_1_pos) {\n    return mix(vec4(p_o224937_gradient_0_r,p_o224937_gradient_0_g,p_o224937_gradient_0_b,p_o224937_gradient_0_a), vec4(p_o224937_gradient_1_r,p_o224937_gradient_1_g,p_o224937_gradient_1_b,p_o224937_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o224937_gradient_0_pos)/(p_o224937_gradient_1_pos-p_o224937_gradient_0_pos)));\n  }\n  return vec4(p_o224937_gradient_1_r,p_o224937_gradient_1_g,p_o224937_gradient_1_b,p_o224937_gradient_1_a);\n}\nconst float p_o163427_amount = 0.020000000;\nconst float p_o914359_r = 0.150000000;\nconst float p_o7924_l = 0.140000000;\nconst float p_o7924_r = 0.370000000;\nconst float p_o14143_c = 10.000000000;\nconst float p_o44957_ay = 35.000000000;\nconst float p_o44957_az = 19.000000000;\nvec2 o77319_input_sdf(vec3 p, float _seed_variation_) {\nvec2 o7924_0_d = abs(vec2(length((p).xy),(p).z)) - vec2(p_o7924_r,p_o7924_l);\nfloat o7924_0_1_sdf3d = min(max(o7924_0_d.x,o7924_0_d.y),0.0) + length(max(o7924_0_d,0.0));\nvec2 o914359_0_v = vec2(o7924_0_1_sdf3d, 0.0);vec2 o914359_0_1_sdf3dc = vec2(o914359_0_v.x-p_o914359_r, o914359_0_v.y);\nvec2 o7924_2_d = abs(vec2(length((rotate3d((circle_repeat_transform((p), p_o14143_c)), -vec3((round(iTime * 0.001) * sin(iTime * 0.7) * (iTime)), p_o44957_ay, p_o44957_az)*0.01745329251)).xy),(rotate3d((circle_repeat_transform((p), p_o14143_c)), -vec3((round(iTime * 0.001) * sin(iTime * 0.7) * (iTime)), p_o44957_ay, p_o44957_az)*0.01745329251)).z)) - vec2(p_o7924_r,p_o7924_l);\nfloat o7924_0_3_sdf3d = min(max(o7924_2_d.x,o7924_2_d.y),0.0) + length(max(o7924_2_d,0.0));\nvec2 o44957_0_1_sdf3dc = vec2(o7924_0_3_sdf3d, 0.0);\nvec2 o14143_0_1_sdf3dc = o44957_0_1_sdf3dc;\nvec2 o20241_0_1_sdf3dc = sdf3dc_sub(o914359_0_1_sdf3dc, o14143_0_1_sdf3dc);\nvec2 o95491_0_v = o20241_0_1_sdf3dc;vec2 o95491_0_1_sdf3dc = vec2(o95491_0_v.x-(round(iTime * 0.001) * sin(iTime * 0.7)), o95491_0_v.y);\n\nreturn o95491_0_1_sdf3dc;\n}\nvec2 raymarch_o77319(vec2 uv, float _seed_variation_) {\n\tvec3 ro = vec3(uv-vec2(0.5), 1.0);\n\tvec3 rd = vec3(0.0, 0.0, -1.0);\n\tfloat dO = 0.0;\n\tfloat c = 0.0;\n    for (int i=0; i < 100; i++) {\n    \tvec3 p = ro + rd*dO;\n        vec2 dS = o77319_input_sdf(p, _seed_variation_);\n        dO += dS.x;\n\n        if (dO >= 1.0) {\n\t\t\tbreak;\n\t\t} else if (dS.x < 0.0001) {\n\t\t\tc = dS.y;\n\t\t\tbreak;\n\t\t}\n    }\n    \n    return vec2(dO, c);\n}\n\nvec3 normal_o77319(vec3 p, float _seed_variation_) {\n\tif (p.z <= 0.0) {\n\t\treturn vec3(0.0, 0.0, 1.0);\n\t}\n\n\tfloat d = o77319_input_sdf(p, _seed_variation_).x;\n    float e = .001;\n    \n    vec3 n = d - vec3(\n        o77319_input_sdf(p-vec3(e, 0.0, 0.0), _seed_variation_).x,\n        o77319_input_sdf(p-vec3(0.0, e, 0.0), _seed_variation_).x,\n        o77319_input_sdf(p-vec3(0.0, 0.0, e), _seed_variation_).x);\n    \n    return vec3(-1.0, -1.0, -1.0)*normalize(n);\n}\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o77319_0_d = raymarch_o77319((scale((UV), vec2(0.5+p_o766970_cx, 0.5+p_o766970_cy), vec2(p_o766970_scale_x, p_o766970_scale_y))), _seed_variation_);\nvec3 o77319_1_1_rgb = vec3(0.5)+0.5*normal_o77319(vec3((scale((UV), vec2(0.5+p_o766970_cx, 0.5+p_o766970_cy), vec2(p_o766970_scale_x, p_o766970_scale_y)))-vec2(0.5), 1.0-o77319_0_d.x), _seed_variation_);\nvec4 o163427_0_s1 = vec4(o77319_1_1_rgb, 1.0);\nvec4 o163427_0_s2 = vec4(o77319_1_1_rgb, 1.0);\nfloat o163427_0_a = p_o163427_amount*1.0;\nvec4 o163427_0_2_rgba = vec4(blend_burn((scale((UV), vec2(0.5+p_o766970_cx, 0.5+p_o766970_cy), vec2(p_o766970_scale_x, p_o766970_scale_y))), o163427_0_s1.rgb, o163427_0_s2.rgb, o163427_0_a*o163427_0_s1.a), min(1.0, o163427_0_s2.a+o163427_0_a*o163427_0_s1.a));\nvec4 o224937_0_1_rgba = o224937_gradient_gradient_fct((dot((o163427_0_2_rgba).rgb, vec3(1.0))/3.0));\nvec4 o766970_0_1_rgba = o224937_0_1_rgba;\ngl_FragColor = o766970_0_1_rgba;\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.21},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"348",objOut:"347"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"348",objOut:"347"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"348",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"351",objOut:"348"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"349",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:23.69},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"time",portOut:"Time",objIn:"354",objOut:"349"}]}]},{objName:"Ops.Sequence",id:"350",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"347",objOut:"350"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",links:[{portIn:"exe",portOut:"trigger 15",objIn:"361",objOut:"350"}]}]},{objName:"Ops.Ui.VizTexture",id:"351",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"352",objOut:"351"}]},{name:"Info",value:"unknown"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"352",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"354",objOut:"352"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"353",uiAttribs:{subPatch:0},portsIn:[{name:"Render",value:null},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"352",objOut:"353"},{portIn:"exe",portOut:"Next",objIn:"350",objOut:"353"},{portIn:"exe",portOut:"Next",objIn:"357",objOut:"353"}]},{name:"texture_out"},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"354",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"time"},{name:"SpeedX",value:4},{name:"SpeedY",value:8},{name:"RepeatX",value:57.62},{name:"RepeatY",value:11},{name:"Multiply",value:.01},{name:"Mask",value:0}],portsOut:[{name:"Trigger",links:[{portIn:"render",portOut:"Trigger",objIn:"355",objOut:"354"}]}]},{objName:"Ops.Gl.TextureEffects.Mirror",id:"355",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"axis index",value:0},{name:"axis",value:"X"},{name:"width",value:.42},{name:"offset"},{name:"flip",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"356",objOut:"355"}]}]},{objName:"Ops.Gl.TextureEffects.Mirror",id:"356",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"axis index",value:0},{name:"axis",value:"Y"},{name:"width",value:-.87},{name:"offset",value:-.54},{name:"flip",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Anim.SineAnim",id:"357",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:1.33},{name:"frequency",value:.36},{name:"amplitude",value:1.45}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"number",portOut:"result",objIn:"358",objOut:"357"}]}]},{objName:"Ops.Math.Abs",id:"358",uiAttribs:{subPatch:0},portsIn:[{name:"number"}],portsOut:[{name:"result",links:[{portIn:"value",portOut:"result",objIn:"359",objOut:"358"}]}]},{objName:"Ops.Math.Sine",id:"359",uiAttribs:{subPatch:0},portsIn:[{name:"value"},{name:"phase",value:.48},{name:"frequency",value:1},{name:"amplitude",value:-.85},{name:"asine",value:false}],portsOut:[{name:"result",links:[{portIn:"offset",portOut:"result",objIn:"355",objOut:"359"}]}]},{objName:"Ops.Trigger.TriggerOnce",id:"360",uiAttribs:{subPatch:0},portsIn:[{name:"Exec"},{name:"Reset"}],portsOut:[{name:"Next",links:[{portIn:"reset",portOut:"Next",objIn:"374",objOut:"360"}]},{name:"Was Triggered",value:false}]},{objName:"Ops.Anim.SimpleAnim",id:"361",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"reset",value:null},{name:"rewind",value:0},{name:"start",value:505.24},{name:"end",value:503.43},{name:"duration",value:.12},{name:"loop",value:false},{name:"Wait for Reset",value:true},{name:"easing index",value:0},{name:"easing",value:"smootherstep"}],portsOut:[{name:"Next",value:0},{name:"result",links:[{portIn:"iTime",portOut:"result",objIn:"347",objOut:"361"}]},{name:"finished",value:false},{name:"Finished Trigger",value:0}]},{objName:"Ops.Gl.TextureToPointArray3",id:"362",uiAttribs:{subPatch:0},portsIn:[{name:"update",value:null},{name:"Center",value:true},{name:"Threshold Remove",value:0},{name:"Z Multiply",value:.55},{name:"texture",value:0},{name:"Width",value:2},{name:"Height",value:2}],portsOut:[{name:"trigger",value:0},{name:"Points"},{name:"Total Points",value:204800},{name:"Min Z",value:0},{name:"Max Z",value:.33730468750000003}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"363",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nvec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nconst float p_o294215_gradient_0_pos = 0.318181818;\nconst float p_o294215_gradient_0_r = 1.000000000;\nconst float p_o294215_gradient_0_g = 0.000000000;\nconst float p_o294215_gradient_0_b = 0.000000000;\nconst float p_o294215_gradient_0_a = 1.000000000;\nconst float p_o294215_gradient_1_pos = 0.490909368;\nconst float p_o294215_gradient_1_r = 0.000000000;\nconst float p_o294215_gradient_1_g = 0.000000000;\nconst float p_o294215_gradient_1_b = 0.000000000;\nconst float p_o294215_gradient_1_a = 1.000000000;\nconst float p_o294215_gradient_2_pos = 0.613222712;\nconst float p_o294215_gradient_2_r = 0.000000000;\nconst float p_o294215_gradient_2_g = 0.062500000;\nconst float p_o294215_gradient_2_b = 1.000000000;\nconst float p_o294215_gradient_2_a = 1.000000000;\nvec4 o294215_gradient_gradient_fct(float x) {\n  if (x < p_o294215_gradient_0_pos) {\n    return vec4(p_o294215_gradient_0_r,p_o294215_gradient_0_g,p_o294215_gradient_0_b,p_o294215_gradient_0_a);\n  } else if (x < p_o294215_gradient_1_pos) {\n    return mix(vec4(p_o294215_gradient_0_r,p_o294215_gradient_0_g,p_o294215_gradient_0_b,p_o294215_gradient_0_a), vec4(p_o294215_gradient_1_r,p_o294215_gradient_1_g,p_o294215_gradient_1_b,p_o294215_gradient_1_a), ((x-p_o294215_gradient_0_pos)/(p_o294215_gradient_1_pos-p_o294215_gradient_0_pos)));\n  } else if (x < p_o294215_gradient_2_pos) {\n    return mix(vec4(p_o294215_gradient_1_r,p_o294215_gradient_1_g,p_o294215_gradient_1_b,p_o294215_gradient_1_a), vec4(p_o294215_gradient_2_r,p_o294215_gradient_2_g,p_o294215_gradient_2_b,p_o294215_gradient_2_a), ((x-p_o294215_gradient_1_pos)/(p_o294215_gradient_2_pos-p_o294215_gradient_1_pos)));\n  }\n  return vec4(p_o294215_gradient_2_r,p_o294215_gradient_2_g,p_o294215_gradient_2_b,p_o294215_gradient_2_a);\n}\nconst float p_o55848_amount = 0.910000000;\nconst float p_o14212_x = 0.000000000;\nconst float p_o14212_y = -0.380000000;\nconst float p_o8455_r = 0.440000000;\nconst float p_o8455_cx = 0.000000000;\nconst float p_o8455_cy = 0.000000000;\nvec2 o51306_input_sdf(vec3 p, float _seed_variation_) {\nvec2 o49338_0_q = vec2(length((p).xy)-(sin(iTime * 0.5) * 0.22)+0.5, (p).z+0.5);\nfloat o8455_0_1_sdf2d = length(((o49338_0_q)-vec2(p_o14212_x, p_o14212_y))-vec2(p_o8455_cx+0.5, p_o8455_cy+0.5))-p_o8455_r;\nfloat o14212_0_1_sdf2d = o8455_0_1_sdf2d;\nfloat o49338_0_1_sdf3d = o14212_0_1_sdf2d;\n\nreturn vec2(o49338_0_1_sdf3d, 0.0);\n}\nvec2 raymarch_o51306(vec2 uv, float _seed_variation_) {\n\tvec3 ro = vec3(uv-vec2(0.5), 1.0);\n\tvec3 rd = vec3(0.0, 0.0, -1.0);\n\tfloat dO = 0.0;\n\tfloat c = 0.0;\n    for (int i=0; i < 100; i++) {\n    \tvec3 p = ro + rd*dO;\n        vec2 dS = o51306_input_sdf(p, _seed_variation_);\n        dO += dS.x;\n\n        if (dO >= 1.0) {\n\t\t\tbreak;\n\t\t} else if (dS.x < 0.0001) {\n\t\t\tc = dS.y;\n\t\t\tbreak;\n\t\t}\n    }\n    \n    return vec2(dO, c);\n}\n\nvec3 normal_o51306(vec3 p, float _seed_variation_) {\n\tif (p.z <= 0.0) {\n\t\treturn vec3(0.0, 0.0, 1.0);\n\t}\n\n\tfloat d = o51306_input_sdf(p, _seed_variation_).x;\n    float e = .001;\n    \n    vec3 n = d - vec3(\n        o51306_input_sdf(p-vec3(e, 0.0, 0.0), _seed_variation_).x,\n        o51306_input_sdf(p-vec3(0.0, e, 0.0), _seed_variation_).x,\n        o51306_input_sdf(p-vec3(0.0, 0.0, e), _seed_variation_).x);\n    \n    return vec3(-1.0, -1.0, -1.0)*normalize(n);\n}\n\nconst float p_o61673_gradient_0_pos = 0.767441860;\nconst float p_o61673_gradient_0_r = 0.000000000;\nconst float p_o61673_gradient_0_g = 0.000000000;\nconst float p_o61673_gradient_0_b = 0.000000000;\nconst float p_o61673_gradient_0_a = 1.000000000;\nconst float p_o61673_gradient_1_pos = 1.000000000;\nconst float p_o61673_gradient_1_r = 1.000000000;\nconst float p_o61673_gradient_1_g = 1.000000000;\nconst float p_o61673_gradient_1_b = 1.000000000;\nconst float p_o61673_gradient_1_a = 1.000000000;\nvec4 o61673_gradient_gradient_fct(float x) {\n  if (x < p_o61673_gradient_0_pos) {\n    return vec4(p_o61673_gradient_0_r,p_o61673_gradient_0_g,p_o61673_gradient_0_b,p_o61673_gradient_0_a);\n  } else if (x < p_o61673_gradient_1_pos) {\n    return mix(vec4(p_o61673_gradient_0_r,p_o61673_gradient_0_g,p_o61673_gradient_0_b,p_o61673_gradient_0_a), vec4(p_o61673_gradient_1_r,p_o61673_gradient_1_g,p_o61673_gradient_1_b,p_o61673_gradient_1_a), (x-p_o61673_gradient_0_pos)/(p_o61673_gradient_1_pos-p_o61673_gradient_0_pos));\n  }\n  return vec4(p_o61673_gradient_1_r,p_o61673_gradient_1_g,p_o61673_gradient_1_b,p_o61673_gradient_1_a);\n}\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o51306_0_d = raymarch_o51306((UV), _seed_variation_);\nvec3 o51306_1_1_rgb = vec3(0.5)+0.5*normal_o51306(vec3((UV)-vec2(0.5), 1.0-o51306_0_d.x), _seed_variation_);\nvec4 o61673_0_1_rgba = o61673_gradient_gradient_fct(fract((sin(iTime * 0.5))*1.41421356237*length(fract((UV))-vec2(0.5, 0.5))));\nvec4 o55848_0_s1 = vec4(o51306_1_1_rgb, 1.0);\nvec4 o55848_0_s2 = o61673_0_1_rgba;\nfloat o55848_0_a = p_o55848_amount*1.0;\nvec4 o55848_0_2_rgba = vec4(blend_normal((UV), o55848_0_s1.rgb, o55848_0_s2.rgb, o55848_0_a*o55848_0_s1.a), min(1.0, o55848_0_s2.a+o55848_0_a*o55848_0_s1.a));\nvec4 o294215_0_1_rgba = o294215_gradient_gradient_fct((dot((o55848_0_2_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o294215_0_1_rgba;\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.21},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"364",objOut:"363"},{portIn:"exec",portOut:"trigger",objIn:"861",objOut:"363"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"364",objOut:"363"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"364",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture",links:[{portIn:"texture0",portOut:"Texture",objIn:"861",objOut:"364"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Ui.VizTexture",id:"365",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"366",objOut:"365"}]},{name:"Info",value:"640 x 320 32bit nearest repeatmir"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"366",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"color dodge"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:true},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"865",objOut:"366"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"367",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"exe",portOut:"Next",objIn:"371",objOut:"367"},{portIn:"render",portOut:"Next",objIn:"363",objOut:"367"},{portIn:"exe",portOut:"Next",objIn:"379",objOut:"367"},{portIn:"exe",portOut:"Next",objIn:"380",objOut:"367"},{portIn:"render",portOut:"Next",objIn:"366",objOut:"367"},{portIn:"render",portOut:"Next",objIn:"391",objOut:"367"},{portIn:"render",portOut:"Next",objIn:"844",objOut:"367"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"395",objOut:"367"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"368",uiAttribs:{subPatch:0},portsIn:[{name:"Render",value:null},{name:"time"},{name:"SpeedX",value:4},{name:"SpeedY",value:4.81},{name:"RepeatX",value:57.62},{name:"RepeatY",value:11},{name:"Multiply",value:.001},{name:"Mask",value:0}],portsOut:[{name:"Trigger",links:[{portIn:"render",portOut:"Trigger",objIn:"375",objOut:"368"}]}]},{objName:"Ops.Gl.TextureEffects.Mirror",id:"369",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"axis index",value:0},{name:"axis",value:"X"},{name:"width",value:.53},{name:"offset"},{name:"flip",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"370",objOut:"369"}]}]},{objName:"Ops.Gl.TextureEffects.Mirror",id:"370",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"axis index",value:0},{name:"axis",value:"X"},{name:"width",value:-.54},{name:"offset",value:.43},{name:"flip",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Anim.SineAnim",id:"371",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:1.33},{name:"frequency",value:.36},{name:"amplitude",value:1.45}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"number",portOut:"result",objIn:"372",objOut:"371"}]}]},{objName:"Ops.Math.Abs",id:"372",uiAttribs:{subPatch:0},portsIn:[{name:"number"}],portsOut:[{name:"result",links:[{portIn:"value",portOut:"result",objIn:"373",objOut:"372"}]}]},{objName:"Ops.Math.Sine",id:"373",uiAttribs:{subPatch:0},portsIn:[{name:"value"},{name:"phase",value:.48},{name:"frequency",value:1},{name:"amplitude",value:-.85},{name:"asine",value:false}],portsOut:[{name:"result",links:[{portIn:"offset",portOut:"result",objIn:"369",objOut:"373"},{portIn:"time",portOut:"result",objIn:"368",objOut:"373"}]}]},{objName:"Ops.Anim.SimpleAnim",id:"374",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"reset"},{name:"rewind",value:0},{name:"start",value:498.18},{name:"end",value:499.36},{name:"duration",value:.14},{name:"loop",value:false},{name:"Wait for Reset",value:true},{name:"easing index",value:0},{name:"easing",value:"linear"}],portsOut:[{name:"Next",links:[{portIn:"Reset",portOut:"Next",objIn:"360",objOut:"374"}]},{name:"result",links:[{portIn:"iTime",portOut:"result",objIn:"844",objOut:"374"},{portIn:"number1",portOut:"result",objIn:"863",objOut:"374"}]},{name:"finished",value:true},{name:"Finished Trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.Blur",id:"375",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"amount",value:-3.47},{name:"direction index",value:0},{name:"direction",value:"both"},{name:"Fast",value:true},{name:"mask",value:0}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"376",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"overlay"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Channels"},{name:"Min",value:.535},{name:"Max",value:1},{name:"Position",value:.447}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.LumaKey_v2",id:"377",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Invert",value:false},{name:"Black White",value:true},{name:"Threshold low ",value:.05},{name:"Threshold high",value:.999}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"376",objOut:"377"}]}]},{objName:"Ops.Gl.Textures.ColorTexture",id:"378",uiAttribs:{subPatch:0},portsIn:[{name:"r"},{name:"g",value:0},{name:"b"},{name:"a",value:1}],portsOut:[{name:"texture_out",links:[{portIn:"Gradient",portOut:"texture_out",objIn:"376",objOut:"378"},{portIn:"in1 Ops.Gl.TextureEffects.ColorMap Gradient",portOut:"texture_out",objIn:"856",objOut:"378"}]}]},{objName:"Ops.Anim.SimpleAnim",id:"379",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"reset"},{name:"rewind"},{name:"start",value:0},{name:"end",value:1},{name:"duration",value:.15},{name:"loop",value:false},{name:"Wait for Reset",value:false},{name:"easing index",value:0},{name:"easing",value:"linear"}],portsOut:[{name:"Next",value:0},{name:"result",links:[{portIn:"b",portOut:"result",objIn:"378",objOut:"379"},{portIn:"Value",portOut:"result",objIn:"386",objOut:"379"}]},{name:"finished",value:true},{name:"Finished Trigger",value:0}]},{objName:"Ops.Anim.SimpleAnim",id:"380",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"reset"},{name:"rewind"},{name:"start",value:0},{name:"end",value:1},{name:"duration",value:.12},{name:"loop",value:false},{name:"Wait for Reset",value:false},{name:"easing index",value:0},{name:"easing",value:"linear"}],portsOut:[{name:"Next",value:0},{name:"result",links:[{portIn:"r",portOut:"result",objIn:"378",objOut:"380"},{portIn:"Value",portOut:"result",objIn:"381",objOut:"380"}]},{name:"finished",value:true},{name:"Finished Trigger",value:0}]},{objName:"Ops.Value.TriggerOnChangeNumber",id:"381",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Next",links:[{portIn:"rewind",portOut:"Next",objIn:"379",objOut:"381"}]},{name:"Number",value:1}]},{objName:"Ops.Trigger.TriggerIfIncreased",id:"382",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Trigger",links:[{portIn:"reset",portOut:"Trigger",objIn:"380",objOut:"382"}]}]},{objName:"Ops.Math.Incrementor",id:"383",uiAttribs:{subPatch:0},portsIn:[{name:"Increment"},{name:"Decrement",value:0},{name:"Length",value:10},{name:"Limit",value:true},{name:"Reset",value:0},{name:"Mode index",value:0},{name:"Mode",value:"Rewind"},{name:"Default",value:0}],portsOut:[{name:"Changed",value:0},{name:"Value",links:[{portIn:"Value",portOut:"Value",objIn:"382",objOut:"383"}]},{name:"Restarted",value:0}]},{objName:"Ops.Trigger.TriggerIfIncreased",id:"384",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Trigger",links:[{portIn:"reset",portOut:"Trigger",objIn:"379",objOut:"384"}]}]},{objName:"Ops.Math.Incrementor",id:"385",uiAttribs:{subPatch:0},portsIn:[{name:"Increment"},{name:"Decrement",value:0},{name:"Length",value:10},{name:"Limit",value:true},{name:"Reset",value:0},{name:"Mode index",value:0},{name:"Mode",value:"Rewind"},{name:"Default",value:0}],portsOut:[{name:"Changed",value:0},{name:"Value",links:[{portIn:"Value",portOut:"Value",objIn:"384",objOut:"385"}]},{name:"Restarted",value:0}]},{objName:"Ops.Value.TriggerOnChangeNumber",id:"386",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Next",links:[{portIn:"rewind",portOut:"Next",objIn:"380",objOut:"386"}]},{name:"Number",value:1}]},{objName:"Ops.Trigger.TriggerIfIncreased",id:"387",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Trigger",links:[{portIn:"Increment",portOut:"Trigger",objIn:"383",objOut:"387"}]}]},{objName:"Ops.Trigger.TriggerIfIncreased",id:"388",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Trigger",links:[{portIn:"Increment",portOut:"Trigger",objIn:"385",objOut:"388"}]}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"389",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"hardlight"},{name:"Amount",value:1},{name:"Gradient",value:0},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:0},{name:"Max",value:.788},{name:"Position",value:.81}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.GradientTexture",id:"390",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":0,"g":0,"b":0},{"pos":0.22,"r":0,"g":0,"b":0},{"pos":0.768,"r":1,"g":0,"b":0.9365079365079366},{"pos":0.844,"r":0,"g":0,"b":0},{"pos":1,"r":0,"g":0,"b":0}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:false},{name:"Step",value:true},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:46},{name:"filter index",value:1},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Gradient",portOut:"Texture",objIn:"391",objOut:"390"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"391",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Channels"},{name:"Min",value:0},{name:"Max",value:1},{name:"Position",value:1}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.GradientTexture",id:"392",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":0,"g":0,"b":0},{"pos":0.298,"r":0,"g":0,"b":0},{"pos":1,"r":0,"g":0,"b":0}]}'},{name:"Direction index",value:0},{name:"Direction",value:"Radial"},{name:"Smoothstep",value:false},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture"},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.Texture_v2",id:"393",uiAttribs:{subPatch:0},portsIn:[{name:"File",value:0,display:"file"},{name:"Filter index",value:0},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:2},{name:"Wrap",value:"repeat"},{name:"Anisotropic index",value:0},{name:"Anisotropic",value:0},{name:"Flip",value:false},{name:"Pre Multiplied Alpha",value:false},{name:"Active",value:true},{name:"Save Memory",value:true}],portsOut:[{name:"Texture"},{name:"Width",value:0},{name:"Height",value:0},{name:"Aspect Ratio",value:0},{name:"Loaded",value:false},{name:"Loading",value:false}]},{objName:"Ops.Gl.Textures.ColorTexture",id:"394",uiAttribs:{subPatch:0},portsIn:[{name:"r",value:.456},{name:"g",value:.6283333333333334},{name:"b",value:0},{name:"a",value:1}],portsOut:[{name:"texture_out"}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"395",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"367",objOut:"395"},{portIn:"exe",portOut:"trigger",objIn:"374",objOut:"395"}]}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"396",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:81},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"397",objOut:"396"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"Q"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"397",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:9}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"397"}]}]},{objName:"Ops.Trigger.TriggerIfIncreased",id:"398",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Trigger",links:[{portIn:"Exec",portOut:"Trigger",objIn:"360",objOut:"398"}]}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"399",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"Render"},{name:"time"},{name:"SpeedX",value:7.74},{name:"SpeedY",value:115.13},{name:"RepeatX",value:12.79},{name:"RepeatY",value:35.12},{name:"Multiply",value:-.009},{name:"Mask",value:0}],portsOut:[{name:"Trigger",links:[{portIn:"render",portOut:"Trigger",objIn:"413",objOut:"399"}]}]},{objName:"Ops.Gl.TextureEffects.Mirror",id:"400",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"render",value:null},{name:"axis index",value:0},{name:"axis",value:"X"},{name:"width",value:.4},{name:"offset"},{name:"flip",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"401",objOut:"400"}]}]},{objName:"Ops.Gl.TextureEffects.Mirror",id:"401",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"render"},{name:"axis index",value:0},{name:"axis",value:"X"},{name:"width",value:.74},{name:"offset",value:1.46},{name:"flip",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Anim.SineAnim",id:"402",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:1.25},{name:"frequency"},{name:"amplitude",value:.43}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"number",portOut:"result",objIn:"403",objOut:"402"}]}]},{objName:"Ops.Math.Abs",id:"403",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"number"}],portsOut:[{name:"result",links:[{portIn:"value",portOut:"result",objIn:"404",objOut:"403"}]}]},{objName:"Ops.Math.Sine",id:"404",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"value"},{name:"phase",value:.48},{name:"frequency",value:1},{name:"amplitude",value:-.85},{name:"asine",value:false}],portsOut:[{name:"result",links:[{portIn:"offset",portOut:"result",objIn:"400",objOut:"404"},{portIn:"time",portOut:"result",objIn:"399",objOut:"404"},{portIn:"Value",portOut:"result",objIn:"414",objOut:"404"}]}]},{objName:"Ops.Gl.TextureEffects.Blur",id:"405",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"render"},{name:"amount",value:3.86},{name:"direction index",value:0},{name:"direction",value:"both"},{name:"Fast",value:true},{name:"mask",value:0}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"399",objOut:"405"}]}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"406",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"difference"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Channels"},{name:"Min",value:.535},{name:"Max",value:1},{name:"Position",value:.447}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"405",objOut:"406"}]}]},{objName:"Ops.Gl.TextureEffects.LumaKey_v2",id:"407",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"render"},{name:"Invert",value:false},{name:"Black White",value:true},{name:"Threshold low ",value:.118},{name:"Threshold high",value:1}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"406",objOut:"407"}]}]},{objName:"Ops.Ui.PatchInput",id:"408",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[],portsOut:[{name:"create port",value:0},{name:"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger",links:[{portIn:"render",portOut:"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger",objIn:"407",objOut:"408"},{portIn:"exe",portOut:"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger",objIn:"402",objOut:"408"}]},{name:"in1 Ops.Gl.TextureEffects.ColorMap Gradient",links:[{portIn:"Gradient",portOut:"in1 Ops.Gl.TextureEffects.ColorMap Gradient",objIn:"406",objOut:"408"}]},{name:"in2 Ops.Anim.SineAnim frequency",links:[{portIn:"number1",portOut:"in2 Ops.Anim.SineAnim frequency",objIn:"412",objOut:"408"}]}]},{objName:"Ops.Ui.PatchOutput",id:"409",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"create port",value:0}],portsOut:[]},{objName:"Ops.Ui.SubPatch",id:"410",uiAttribs:{subPatch:0},portsIn:[{name:"create port",value:null},{name:"dataStr",value:'{"ports":[{"name":"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger","type":1},{"name":"in1 Ops.Gl.TextureEffects.ColorMap Gradient","type":2,"objType":"texture"},{"name":"in2 Ops.Anim.SineAnim frequency","type":0}],"portsOut":[]}'},{name:"patchId",value:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},{name:"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger"},{name:"in1 Ops.Gl.TextureEffects.ColorMap Gradient"},{name:"in2 Ops.Anim.SineAnim frequency"}],portsOut:[{name:"create port out",value:0}]},{objName:"Ops.Trigger.TriggerOnce",id:"411",uiAttribs:{subPatch:0},portsIn:[{name:"Exec",value:null},{name:"Reset",value:0}],portsOut:[{name:"Next",links:[{portIn:"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger",portOut:"Next",objIn:"856",objOut:"411"}]},{name:"Was Triggered",value:true}]},{objName:"Ops.Math.Divide",id:"412",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"number1"},{name:"number2",value:70}],portsOut:[{name:"result",links:[{portIn:"frequency",portOut:"result",objIn:"402",objOut:"412"}]}]},{objName:"Ops.Gl.TextureEffects.RotateTexture",id:"413",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"render"},{name:"Multiplier",value:0},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Rotate"},{name:"Crop",value:true}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Value.ValueChangeCounter",id:"414",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"Value"},{name:"Reset",value:0}],portsOut:[{name:"Result",links:[{portIn:"number1",portOut:"Result",objIn:"415",objOut:"414"}]}]},{objName:"Ops.Math.Divide",id:"415",uiAttribs:{subPatch:"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5"},portsIn:[{name:"number1"},{name:"number2",value:100}],portsOut:[{name:"result",links:[{portIn:"Rotate",portOut:"result",objIn:"413",objOut:"415"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"416",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:true},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"473",objOut:"416"},{portIn:"Execute",portOut:"Next",objIn:"474",objOut:"416"}]},{name:"texture_out",links:[{portIn:"Image",portOut:"texture_out",objIn:"494",objOut:"416"}]},{name:"Aspect Ratio",value:1.5658536585365854}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"417",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"add"},{name:"amount",value:.715},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:true},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:.16},{name:"Position Y",value:.6},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"440",objOut:"417"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"418",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:791},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"nearest"},{name:"Wrap index",value:1},{name:"Wrap",value:"clamp to edge"},{name:"HDR",value:true},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"419",objOut:"418"}]},{name:"texture_out",links:[{portIn:"Position Texture",portOut:"texture_out",objIn:"425",objOut:"418"},{portIn:"Texture In",portOut:"texture_out",objIn:"427",objOut:"418"},{portIn:"Position Texture",portOut:"texture_out",objIn:"443",objOut:"418"},{portIn:"Position Texture",portOut:"texture_out",objIn:"444",objOut:"418"},{portIn:"Position Texture",portOut:"texture_out",objIn:"445",objOut:"418"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"419",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"add"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:true},{name:"Scale X",value:.937},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:-.6},{name:"Rotation",value:-.78},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"439",objOut:"419"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"420",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"421",objOut:"420"}]},{name:"texture_out"},{name:"Aspect Ratio",value:1.5658536585365854}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"421",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image",value:0},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"422",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI float iTime;\nUNI vec2 iResolution;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat pavement(vec2 uv, float bevel, float mortar) {\n\tuv = abs(uv-vec2(0.5));\n\treturn clamp((0.5*(1.0-mortar)-max(uv.x, uv.y))/max(0.0001, bevel), 0.0, 1.0);\n}\n\nvec4 arc_pavement(vec2 uv, float acount, float lcount, out vec2 seed) {\n\tfloat PI = 3.141592654;\n\tfloat radius = (0.5/sqrt(2.0));\n    float uvx = uv.x;\n    uv.x = 0.5*fract(uv.x+0.5)+0.25;\n    float center = (uv.x-0.5)/radius;\n    center *= center;\n    center = floor(acount*(uv.y-radius*sqrt(1.0-center))+0.5)/acount;\n    vec2 v = uv-vec2(0.5, center);\n    float cornerangle = 0.85/acount+0.25*PI;\n    float acountangle = (PI-2.0*cornerangle)/(lcount+floor(mod(center*acount, 2.0)));\n    float angle = mod(atan(v.y, v.x), 2.0*PI);\n\tfloat base_angle;\n\tfloat local_uvy = 0.5+acount*(length(v)-radius)*(1.54-0.71*cos(1.44*(angle-PI*0.5)));\n\tvec2 local_uv;\n    if (angle < cornerangle) {\n        base_angle = 0.25*PI;\n\t\tlocal_uv = vec2((angle-0.25*PI)/cornerangle*0.38*acount+0.5, 1.0-local_uvy);\n\t\tseed = vec2(fract(center), 0.0);\n    } else if (angle > PI-cornerangle) {\n        base_angle = 0.75*PI;\n\t\tlocal_uv = vec2(local_uvy, 0.5-(0.75*PI-angle)/cornerangle*0.38*acount);\n\t\tseed = vec2(fract(center), 0.0);\n    } else {\n        base_angle = cornerangle+(floor((angle-cornerangle)/acountangle)+0.5)*acountangle;\n\t\tlocal_uv = vec2((angle-base_angle)/acountangle+0.5, 1.0-local_uvy);\n\t\tseed = vec2(fract(center), base_angle);\n    }\n    vec2 brick_center = vec2(0.5, center)+radius*vec2(cos(base_angle), sin(base_angle));\n    return vec4(brick_center.x+uvx-uv.x, brick_center.y, local_uv);\n}\nvec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nvec2 scale(vec2 uv, vec2 center, vec2 scale) {\n\tuv -= center;\n\tuv /= scale;\n\tuv += center;\n    return uv;\n}const float p_o139846_cx = 0.000000000;\nconst float p_o139846_cy = 0.000000000;\nconst float p_o139846_scale_x = 0.675000000;\nconst float p_o139846_scale_y = 0.495000000;\nconst float p_o110958_translate_x = 1.005000000;\nconst float p_o110958_translate_y = 0.000000000;\nconst float p_o68303_amount = 0.990000000;\nconst float p_o148066_translate_y = 0.000000000;\nconst float p_o64625_repeat = 4.000000000;\nconst float p_o64625_rows = 18.000000000;\nconst float p_o64625_bricks = 13.000000000;\nconst float p_o64625_mortar = 0.070000000;\nconst float p_o64625_bevel = 0.500000000;\nconst float p_o54724_amplitude = 0.840000000;\nconst float p_o54724_frequency = 1.000000000;\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o64625_0_uv = fract((((scale((UV), vec2(0.5+p_o139846_cx, 0.5+p_o139846_cy), vec2(p_o139846_scale_x, p_o139846_scale_y)))-vec2(p_o110958_translate_x, p_o110958_translate_y))-vec2(((iTime)), p_o148066_translate_y)))*vec2(p_o64625_repeat, -1.0);\nvec2 o64625_0_seed;\nvec4 o64625_0_ap = arc_pavement(o64625_0_uv, p_o64625_rows, p_o64625_bricks, o64625_0_seed);\nvec3 o64625_2_1_rgb = vec3(o64625_0_ap.zw, 0.0);\nvec4 o148066_0_1_rgba = vec4(o64625_2_1_rgb, 1.0);\nfloat o54724_0_1_f = 1.0-abs(2.0*(((scale((UV), vec2(0.5+p_o139846_cx, 0.5+p_o139846_cy), vec2(p_o139846_scale_x, p_o139846_scale_y)))-vec2(p_o110958_translate_x, p_o110958_translate_y)).y-0.5)-p_o54724_amplitude*sin((p_o54724_frequency*((scale((UV), vec2(0.5+p_o139846_cx, 0.5+p_o139846_cy), vec2(p_o139846_scale_x, p_o139846_scale_y)))-vec2(p_o110958_translate_x, p_o110958_translate_y)).x+(-(iTime)))*6.28318530718));\nvec4 o68303_0_s1 = o148066_0_1_rgba;\nvec4 o68303_0_s2 = vec4(vec3(o54724_0_1_f), 1.0);\nfloat o68303_0_a = p_o68303_amount*1.0;\nvec4 o68303_0_2_rgba = vec4(blend_dodge(((scale((UV), vec2(0.5+p_o139846_cx, 0.5+p_o139846_cy), vec2(p_o139846_scale_x, p_o139846_scale_y)))-vec2(p_o110958_translate_x, p_o110958_translate_y)), o68303_0_s1.rgb, o68303_0_s2.rgb, o68303_0_a*o68303_0_s1.a), min(1.0, o68303_0_s2.a+o68303_0_a*o68303_0_s1.a));\nvec4 o110958_0_1_rgba = o68303_0_2_rgba;\nvec4 o139846_0_1_rgba = o110958_0_1_rgba;\ngl_FragColor = o139846_0_1_rgba;\n}"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iTime"},{name:"iResolution X",value:-.11},{name:"iResolution Y",value:1.34}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"423",objOut:"422"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"423",objOut:"422"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"423",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Floating Point",value:false},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture",links:[{portIn:"RGBE Texture",portOut:"Texture",objIn:"428",objOut:"423"},{portIn:"Texture In",portOut:"Texture",objIn:"432",objOut:"423"},{portIn:"Mask",portOut:"Texture",objIn:"429",objOut:"423"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"424",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Speed",value:1},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"422",objOut:"424"}]}]},{objName:"Ops.Gl.Meshes.MeshInstancerFromTexture_v2",id:"425",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"exe"},{name:"Geometry"},{name:"Num Instances",value:1e5},{name:"Position Texture"},{name:"Rotation Texture",value:null},{name:"Scale Texture",value:null},{name:"Color Texture"},{name:"Color Texture Blendmode index",value:0},{name:"Color Texture Blendmode",value:"Add"},{name:"Scale",value:1},{name:"Multiply Pos X",value:1.61},{name:"Multiply Pos Y",value:.76},{name:"Multiply Pos Z",value:.65}],portsOut:[{name:"Trigger Out",links:[{portIn:"Render",portOut:"Trigger Out",objIn:"426",objOut:"425"}]},{name:"Num",value:1e5}]},{objName:"Ops.Gl.Meshes.Pyramid",id:"426",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Render"},{name:"Width",value:.01},{name:"Length",value:.01},{name:"Height",value:.02},{name:"Smooth",value:false},{name:"Draw",value:true}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"438",objOut:"426"}]},{name:"geometry",links:[{portIn:"Geometry",portOut:"geometry",objIn:"425",objOut:"426"},{portIn:"Geometry",portOut:"geometry",objIn:"443",objOut:"426"},{portIn:"Geometry",portOut:"geometry",objIn:"444",objOut:"426"},{portIn:"Geometry",portOut:"geometry",objIn:"445",objOut:"426"}]}]},{objName:"Ops.Ui.VizTexture",id:"427",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out"},{name:"Info",value:""}]},{objName:"Ops.Gl.Textures.TextureToCoordinateGrid",id:"428",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Execute"},{name:"RGBE Texture"},{name:"Aspect",value:1},{name:"Threshold",value:.2}],portsOut:[{name:"Next",value:0},{name:"HDR Texture",links:[{portIn:"Image",portOut:"HDR Texture",objIn:"419",objOut:"428"}]}]},{objName:"Ops.Gl.TextureEffects.RGBMath",id:"429",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Render"},{name:"Operation index",value:3},{name:"Operation",value:"c+x"},{name:"R Active",value:true},{name:"G Active",value:true},{name:"B Active",value:true},{name:"A Active",value:false},{name:"r",value:.59},{name:"g",value:.86},{name:"b",value:.44},{name:"a",value:1},{name:"Mask"}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"417",objOut:"429"}]}]},{objName:"Ops.Gl.Matrix.OrbitControls",id:"430",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"min distance",value:.05},{name:"max distance",value:99999},{name:"min rot y",value:0},{name:"max rot y",value:0},{name:"initial radius",value:.05},{name:"initial axis y",value:.5},{name:"initial axis x",value:.25},{name:"mul",value:1},{name:"Smoothness",value:1},{name:"Speed X",value:1},{name:"Speed Y",value:1},{name:"Active",value:true},{name:"Allow Panning",value:true},{name:"Allow Zooming",value:true},{name:"Allow Rotation",value:true},{name:"restricted",value:true},{name:"Reset",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"441",objOut:"430"},{portIn:"exe",portOut:"trigger",objIn:"443",objOut:"430"},{portIn:"render",portOut:"trigger",objIn:"446",objOut:"430"},{portIn:"render",portOut:"trigger",objIn:"447",objOut:"430"}]},{name:"radius",value:.05},{name:"Rot X",value:90},{name:"Rot Y",value:90}]},{objName:"Ops.Gl.Textures.ColorTexture",id:"431",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"r",value:.217},{name:"g",value:.979},{name:"b",value:0},{name:"a",value:.995}],portsOut:[{name:"texture_out",links:[{portIn:"Color Texture",portOut:"texture_out",objIn:"425",objOut:"431"},{portIn:"Color Texture",portOut:"texture_out",objIn:"443",objOut:"431"},{portIn:"Color Texture",portOut:"texture_out",objIn:"444",objOut:"431"},{portIn:"Color Texture",portOut:"texture_out",objIn:"445",objOut:"431"}]}]},{objName:"Ops.Ui.VizTexture",id:"432",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out"},{name:"Info",value:""}]},{objName:"Ops.Gl.Texture_v2",id:"433",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"File",value:0,display:"file"},{name:"Filter index",value:0},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:2},{name:"Wrap",value:"repeat"},{name:"Anisotropic index",value:0},{name:"Anisotropic",value:0},{name:"Flip",value:false},{name:"Pre Multiplied Alpha",value:false},{name:"Active",value:true},{name:"Save Memory",value:true}],portsOut:[{name:"Texture"},{name:"Width",value:0},{name:"Height",value:0},{name:"Aspect Ratio",value:0},{name:"Loaded",value:false},{name:"Loading",value:false}]},{objName:"Ops.Gl.Meshes.Cube_v2",id:"434",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Render"},{name:"Render Mesh",value:false},{name:"Width",value:1},{name:"Length",value:1},{name:"Height",value:1},{name:"Center",value:true},{name:"Mapping index",value:0},{name:"Mapping",value:"Side"},{name:"Bias",value:0},{name:"Flip X",value:true},{name:"Top",value:true},{name:"Bottom",value:true},{name:"Left",value:true},{name:"Right",value:true},{name:"Front",value:true},{name:"Back",value:true}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"437",objOut:"434"}]},{name:"geometry",links:[{portIn:"Geometry",portOut:"geometry",objIn:"436",objOut:"434"}]}]},{objName:"Ops.Gl.Meshes.GeometryToTexture",id:"435",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Render"},{name:"Geometry"},{name:"Tex Size",value:256},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Randomize",value:false}],portsOut:[{name:"Next",value:0},{name:"Total Vertices",value:9216},{name:"Texture",links:[{portIn:"Image",portOut:"Texture",objIn:"417",objOut:"435"}]}]},{objName:"Ops.Gl.TesselateGeometry",id:"436",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Geometry"},{name:"Iterations",value:4}],portsOut:[{name:"Result",links:[{portIn:"Geometry",portOut:"Result",objIn:"435",objOut:"436"}]},{name:"Num Vertices",value:9216}]},{objName:"Ops.Gl.ShaderEffects.TransformVertex",id:"437",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"Translate X",value:0},{name:"Translate Y"},{name:"Translate Z",value:0},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Scale Z",value:1},{name:"Rotation X",value:0},{name:"Rotation Y",value:0},{name:"Rotation Z",value:0},{name:"Transform normals",value:false}],portsOut:[{name:"Trigger",links:[{portIn:"Render",portOut:"Trigger",objIn:"435",objOut:"437"}]}]},{objName:"Ops.Anim.SineAnim",id:"438",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:11.75},{name:"amplitude",value:1.61}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"Translate Y",portOut:"result",objIn:"437",objOut:"438"},{portIn:"value",portOut:"result",objIn:"449",objOut:"438"}]}]},{objName:"Ops.Gl.TextureEffects.RgbMultiply",id:"439",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"r",value:1.22},{name:"g",value:3.68},{name:"b",value:2.96}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"429",objOut:"439"}]}]},{objName:"Ops.Gl.TextureEffects.Blur",id:"440",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"amount",value:1.21},{name:"direction index",value:0},{name:"direction",value:"vertical"},{name:"Fast",value:true},{name:"mask",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"466",objOut:"440"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"441",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"posX"},{name:"posY",value:.14},{name:"posZ",value:-.5},{name:"scale",value:1},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"425",objOut:"441"}]}]},{objName:"Ops.Gl.TextureEffects.ScaleTexture",id:"442",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"Multiplier",value:0},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"negation"},{name:"Amount",value:1},{name:"Scale X",value:1.14},{name:"Scale Y",value:2.33},{name:"offset X",value:0},{name:"offset Y",value:.34},{name:"center X",value:.646},{name:"center Y",value:.5}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Meshes.MeshInstancerFromTexture_v2",id:"443",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"exe"},{name:"Geometry"},{name:"Num Instances",value:1e5},{name:"Position Texture"},{name:"Rotation Texture",value:null},{name:"Scale Texture",value:null},{name:"Color Texture"},{name:"Color Texture Blendmode index",value:0},{name:"Color Texture Blendmode",value:"Add"},{name:"Scale",value:1},{name:"Multiply Pos X",value:1.61},{name:"Multiply Pos Y",value:.76},{name:"Multiply Pos Z",value:.65}],portsOut:[{name:"Trigger Out",value:0},{name:"Num",value:1e5}]},{objName:"Ops.Gl.Meshes.MeshInstancerFromTexture_v2",id:"444",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"exe"},{name:"Geometry"},{name:"Num Instances",value:1e5},{name:"Position Texture"},{name:"Rotation Texture",value:null},{name:"Scale Texture",value:null},{name:"Color Texture"},{name:"Color Texture Blendmode index",value:0},{name:"Color Texture Blendmode",value:"Add"},{name:"Scale",value:1},{name:"Multiply Pos X",value:1.61},{name:"Multiply Pos Y",value:.76},{name:"Multiply Pos Z",value:.65}],portsOut:[{name:"Trigger Out",value:0},{name:"Num",value:1e5}]},{objName:"Ops.Gl.Meshes.MeshInstancerFromTexture_v2",id:"445",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"exe"},{name:"Geometry"},{name:"Num Instances",value:1e5},{name:"Position Texture"},{name:"Rotation Texture",value:null},{name:"Scale Texture",value:null},{name:"Color Texture"},{name:"Color Texture Blendmode index",value:0},{name:"Color Texture Blendmode",value:"Add"},{name:"Scale",value:1},{name:"Multiply Pos X",value:1.61},{name:"Multiply Pos Y",value:.76},{name:"Multiply Pos Z",value:.65}],portsOut:[{name:"Trigger Out",value:0},{name:"Num",value:1e5}]},{objName:"Ops.Gl.Matrix.Transform",id:"446",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:.48},{name:"posZ"},{name:"scale",value:3},{name:"rotX",value:171.5},{name:"rotY",value:181},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"445",objOut:"446"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"447",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:1.08},{name:"posZ",value:-.46},{name:"scale",value:3},{name:"rotX",value:171.5},{name:"rotY",value:181},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"444",objOut:"447"}]}]},{objName:"Ops.Gl.Matrix.CircleTransform",id:"448",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"segments",value:6},{name:"radius"},{name:"percent",value:1},{name:"Absolute",value:true},{name:"Flip",value:false},{name:"Rotate",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"430",objOut:"448"}]},{name:"index",value:5}]},{objName:"Ops.Math.Sine",id:"449",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"value"},{name:"phase",value:0},{name:"frequency",value:.39},{name:"amplitude",value:4.24},{name:"asine",value:false}],portsOut:[{name:"result",links:[{portIn:"value",portOut:"result",objIn:"450",objOut:"449"}]}]},{objName:"Ops.Math.Sine",id:"450",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"value"},{name:"phase",value:0},{name:"frequency",value:1.6},{name:"amplitude",value:1.14},{name:"asine",value:false}],portsOut:[{name:"result",links:[{portIn:"Number 1",portOut:"result",objIn:"451",objOut:"450"},{portIn:"posZ",portOut:"result",objIn:"446",objOut:"450"},{portIn:"posX",portOut:"result",objIn:"441",objOut:"450"},{portIn:"radius",portOut:"result",objIn:"448",objOut:"450"}]}]},{objName:"Ops.Ui.VizGraph",id:"451",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Number 1"},{name:"Number 2",value:0},{name:"Number 3",value:0},{name:"Number 4",value:0},{name:"Number 5",value:0},{name:"Number 6",value:0},{name:"Number 7",value:0},{name:"Number 8",value:0},{name:"Reset",value:0}],portsOut:[]},{objName:"Ops.Ui.PatchInput",id:"452",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[],portsOut:[{name:"create port",value:0},{name:"in0 Ops.Sequence trigger 2",links:[{portIn:"Render",portOut:"in0 Ops.Sequence trigger 2",objIn:"418",objOut:"452"}]},{name:"in1 Ops.Sequence trigger 15",links:[{portIn:"render",portOut:"in1 Ops.Sequence trigger 15",objIn:"422",objOut:"452"}]},{name:"in2 Ops.Sequence trigger 13",links:[{portIn:"Execute",portOut:"in2 Ops.Sequence trigger 13",objIn:"428",objOut:"452"}]},{name:"in3 Ops.Gl.MainLoop trigger",links:[{portIn:"Render",portOut:"in3 Ops.Gl.MainLoop trigger",objIn:"434",objOut:"452"}]},{name:"in4 Ops.Gl.MainLoop trigger",links:[{portIn:"render",portOut:"in4 Ops.Gl.MainLoop trigger",objIn:"448",objOut:"452"}]},{name:"in5 Ops.Gl.TextureEffects.Plasma Amount",links:[{portIn:"Amount",portOut:"in5 Ops.Gl.TextureEffects.Plasma Amount",objIn:"466",objOut:"452"}]}]},{objName:"Ops.Ui.PatchOutput",id:"453",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"create port",value:0}],portsOut:[]},{objName:"Ops.Ui.SubPatch",id:"454",uiAttribs:{subPatch:0},portsIn:[{name:"create port",value:null},{name:"dataStr",value:'{"ports":[{"name":"in0 Ops.Sequence trigger 2","type":1},{"name":"in1 Ops.Sequence trigger 15","type":1},{"name":"in2 Ops.Sequence trigger 13","type":1},{"name":"in3 Ops.Gl.MainLoop trigger","type":1},{"name":"in4 Ops.Gl.MainLoop trigger","type":1},{"name":"in5 Ops.Gl.TextureEffects.Plasma Amount","type":0}],"portsOut":[]}'},{name:"patchId",value:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},{name:"in0 Ops.Sequence trigger 2"},{name:"in1 Ops.Sequence trigger 15"},{name:"in2 Ops.Sequence trigger 13"},{name:"in3 Ops.Gl.MainLoop trigger"},{name:"in4 Ops.Gl.MainLoop trigger"},{name:"in5 Ops.Gl.TextureEffects.Plasma Amount"}],portsOut:[{name:"create port out",value:0}]},{objName:"Ops.Trigger.TriggerOnce",id:"455",uiAttribs:{subPatch:0},portsIn:[{name:"Exec"},{name:"Reset"}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"459",objOut:"455"},{portIn:"Trigger In",portOut:"Next",objIn:"460",objOut:"455"},{portIn:"in4 Ops.Gl.MainLoop trigger",portOut:"Next",objIn:"454",objOut:"455"},{portIn:"Trigger In",portOut:"Next",objIn:"463",objOut:"455"}]},{name:"Was Triggered",value:true}]},{objName:"Ops.Anim.SineAnim",id:"456",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:4.32},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"val",portOut:"result",objIn:"458",objOut:"456"}]}]},{objName:"Ops.Value.TriggerOnChangeNumber",id:"457",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Next",links:[{portIn:"Reset",portOut:"Next",objIn:"455",objOut:"457"},{portIn:"Exec",portOut:"Next",objIn:"455",objOut:"457"}]},{name:"Number",value:.23}]},{objName:"Ops.Math.Clamp",id:"458",uiAttribs:{subPatch:0},portsIn:[{name:"val"},{name:"min",value:.01},{name:"max",value:.23},{name:"ignore outside values",value:false}],portsOut:[{name:"result",links:[{portIn:"Value",portOut:"result",objIn:"457",objOut:"458"}]}]},{objName:"Ops.Gl.Render2Texture",id:"459",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"use viewport size",value:true},{name:"texture width",value:0},{name:"texture height",value:0},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",value:0},{name:"texture",links:[{portIn:"Normal Map",portOut:"texture",objIn:"460",objOut:"459"},{portIn:"Opacity Texture",portOut:"texture",objIn:"460",objOut:"459"},{portIn:"Normal Map",portOut:"texture",objIn:"463",objOut:"459"},{portIn:"Opacity Texture",portOut:"texture",objIn:"463",objOut:"459"},{portIn:"Texture In",portOut:"texture",objIn:"662",objOut:"459"}]},{name:"textureDepth"}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"460",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"R",value:.08773803710937499},{name:"G",value:.7666666666666666},{name:"B",value:.27783805338541684},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:true},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:.1197847564697265},{name:"Fresnel G",value:.7150000000000001},{name:"Fresnel B",value:.10137603759765626},{name:"Emissive Active",value:false},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.7852679163428646},{name:"Emissive G",value:.8702783922874415},{name:"Emissive B",value:.9472288515943788},{name:"Shininess",value:4},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Blinn"},{name:"Energy Conservation",value:false},{name:"Double Sided Material",value:false},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture",value:0},{name:"Specular Texture",value:0},{name:"Normal Map"},{name:"AO Texture",value:0},{name:"Emissive Texture",value:0},{name:"Emissive Mask",value:0},{name:"Opacity Texture"},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:true}],portsOut:[{name:"Trigger Out",links:[{portIn:"render",portOut:"Trigger Out",objIn:"462",objOut:"460"}]},{name:"Shader"}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"461",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"width",value:1},{name:"height",value:1},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.Matrix.Transform",id:"462",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:1.61},{name:"posY",value:.59},{name:"posZ",value:0},{name:"scale",value:1},{name:"rotX",value:172.04},{name:"rotY",value:70},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"461",objOut:"462"}]}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"463",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"R",value:.7273454496780194},{name:"G",value:.5473496635335047},{name:"B",value:.7885904043857035},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:true},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:.9333333333333333},{name:"Fresnel G",value:.2274509803921569},{name:"Fresnel B",value:.2274509803921569},{name:"Emissive Active",value:false},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.7852679163428646},{name:"Emissive G",value:.8702783922874415},{name:"Emissive B",value:.9472288515943788},{name:"Shininess",value:4},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Blinn"},{name:"Energy Conservation",value:false},{name:"Double Sided Material",value:false},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture",value:0},{name:"Specular Texture",value:0},{name:"Normal Map"},{name:"AO Texture",value:0},{name:"Emissive Texture",value:0},{name:"Emissive Mask",value:0},{name:"Opacity Texture"},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:true}],portsOut:[{name:"Trigger Out",links:[{portIn:"render",portOut:"Trigger Out",objIn:"465",objOut:"463"}]},{name:"Shader"}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"464",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"width",value:1},{name:"height",value:1},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.Matrix.Transform",id:"465",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:1.61},{name:"posY",value:-.53},{name:"posZ",value:0},{name:"scale",value:1},{name:"rotX",value:172.04},{name:"rotY",value:70},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"464",objOut:"465"}]}]},{objName:"Ops.Gl.TextureEffects.Plasma",id:"466",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"lighten"},{name:"Amount"},{name:"Width",value:20},{name:"Height",value:20},{name:"Mul",value:1},{name:"offset X",value:0},{name:"offset Y",value:0},{name:"Time"},{name:"Greyscale",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Anim.Timer_v2",id:"467",uiAttribs:{subPatch:"bf06e3be-27ad-46d0-8997-10c6e33bd413"},portsIn:[{name:"Speed",value:1},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Time",portOut:"Time",objIn:"466",objOut:"467"}]}]},{objName:"Ops.Sidebar.Button_v2",id:"468",uiAttribs:{subPatch:0},portsIn:[{name:"link"},{name:"Text",value:"Button"},{name:"Grey Out",value:false},{name:"Visible",value:true}],portsOut:[{name:"childs"},{name:"Pressed Trigger",links:[{portIn:"Set",portOut:"Pressed Trigger",objIn:"470",objOut:"468"}]}]},{objName:"Ops.Sidebar.Sidebar",id:"469",uiAttribs:{subPatch:0},portsIn:[{name:"Visible",value:false},{name:"Opacity",value:.204},{name:"Default Minimized",value:false},{name:"Minimized Opacity",value:.5},{name:"Show undo button",value:false},{name:"Show Minimize",value:true},{name:"Title",value:"Sidebar"},{name:"Side",value:false}],portsOut:[{name:"childs",links:[{portIn:"link",portOut:"childs",objIn:"468",objOut:"469"},{portIn:"link",portOut:"childs",objIn:"471",objOut:"469"}]},{name:"Opfened",value:false}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"470",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:1}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"in5 Ops.Gl.TextureEffects.Plasma Amount",portOut:"Out Value",objIn:"454",objOut:"470"}]}]},{objName:"Ops.Sidebar.Button_v2",id:"471",uiAttribs:{subPatch:0},portsIn:[{name:"link"},{name:"Text",value:"Witchcraft-Modul off"},{name:"Grey Out",value:false},{name:"Visible",value:true}],portsOut:[{name:"childs"},{name:"Pressed Trigger",links:[{portIn:"Set",portOut:"Pressed Trigger",objIn:"472",objOut:"471"}]}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"472",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:0}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"in5 Ops.Gl.TextureEffects.Plasma Amount",portOut:"Out Value",objIn:"454",objOut:"472"}]}]},{objName:"Ops.Gl.TextureEffects.Plasma",id:"473",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"add"},{name:"Amount",value:1},{name:"Width",value:3},{name:"Height",value:11.5},{name:"Mul",value:.65},{name:"offset X"},{name:"offset Y",value:0},{name:"Time"},{name:"Greyscale",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"498",objOut:"473"}]}]},{objName:"Ops.Gl.Textures.TextureToCoordinateGrid",id:"474",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Execute"},{name:"RGBE Texture"},{name:"Aspect",value:1.51},{name:"Threshold",value:.179}],portsOut:[{name:"Next",value:0},{name:"HDR Texture",links:[{portIn:"Texture In",portOut:"HDR Texture",objIn:"475",objOut:"474"}]}]},{objName:"Ops.Ui.VizTexture",id:"475",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Position Texture",portOut:"Texture Out",objIn:"489",objOut:"475"}]},{name:"Info",value:""}]},{objName:"Ops.Anim.Timer_v2",id:"476",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Speed",value:1},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Time",portOut:"Time",objIn:"473",objOut:"476"},{portIn:"offset X",portOut:"Time",objIn:"473",objOut:"476"},{portIn:"offset X",portOut:"Time",objIn:"498",objOut:"476"},{portIn:"Time",portOut:"Time",objIn:"498",objOut:"476"}]}]},{objName:"Ops.Gl.TextureToPointArray3",id:"477",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"update"},{name:"Center",value:true},{name:"Threshold Remove",value:.997},{name:"Z Multiply",value:5.25},{name:"texture",value:0},{name:"Width",value:10.05},{name:"Height",value:14.21}],portsOut:[{name:"trigger",value:0},{name:"Points"},{name:"Total Points",value:0},{name:"Min Z",value:99999999},{name:"Max Z",value:0}]},{objName:"Ops.Sequence",id:"478",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0"},{name:"exe 1"},{name:"exe 2"},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"483",objOut:"478"}]},{name:"trigger 1",links:[{portIn:"render",portOut:"trigger 1",objIn:"499",objOut:"478"}]},{name:"trigger 2",links:[{portIn:"Render",portOut:"trigger 2",objIn:"490",objOut:"478"}]},{name:"trigger 3",links:[{portIn:"Render",portOut:"trigger 3",objIn:"493",objOut:"478"}]},{name:"trigger 4",links:[{portIn:"exe",portOut:"trigger 4",objIn:"501",objOut:"478"}]},{name:"trigger 5",links:[{portIn:"Render",portOut:"trigger 5",objIn:"416",objOut:"478"}]},{name:"trigger 6",links:[{portIn:"Render",portOut:"trigger 6",objIn:"420",objOut:"478"}]},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",links:[{portIn:"exe",portOut:"trigger 9",objIn:"500",objOut:"478"}]},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0}]},{objName:"Ops.Gl.Shader.PointMaterial_v4",id:"479",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"PointSize",value:1.6},{name:"Size in Pixels",value:false},{name:"Random Size",value:.62},{name:"Round",value:true},{name:"Round Antialias",value:false},{name:"Scale by Distance",value:false},{name:"r",value:.5144597538162488},{name:"g",value:.1858951970785987},{name:"b",value:.6408660349953732},{name:"a",value:1},{name:"Vertex Colors",value:false},{name:"texture",value:0},{name:"Colorize Texture",value:false},{name:"Texture Mask",value:0},{name:"Mask Channel index",value:0},{name:"Mask Channel",value:"R"},{name:"Texture Colorize",value:0},{name:"Colorize Randomize",value:true},{name:"Texture Opacity",value:0},{name:"Texture Point Size",value:0},{name:"Point Size Channel index",value:0},{name:"Point Size Channel",value:"R"},{name:"Texture Point Size Mul",value:1},{name:"Map Size 0 index",value:0},{name:"Map Size 0",value:"Black"},{name:"Flip Texture",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"480",objOut:"479"},{portIn:"update",portOut:"trigger",objIn:"487",objOut:"479"},{portIn:"update",portOut:"trigger",objIn:"488",objOut:"479"}]},{name:"shader"}]},{objName:"Ops.Gl.Meshes.PointCloudFromTexture",id:"480",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"Num Points",value:19433},{name:"Axis index",value:0},{name:"Axis",value:"XYZ"},{name:"Texture",value:null},{name:"Point Size",value:null},{name:"Normalize",value:false},{name:"Remove Point at 0",value:false}],portsOut:[{name:"Trigger",value:0},{name:"Total Points",value:0}]},{objName:"Ops.Gl.ShaderEffects.InstancedDisplacementMap",id:"481",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Trigger",value:null},{name:"Texture",value:0},{name:"Source index",value:0},{name:"Source",value:"Inst Pos"},{name:"Mode index",value:0},{name:"Mode",value:"Translate"},{name:"Strength",value:1},{name:"Min",value:0},{name:"Scale",value:9.5},{name:"Clamp",value:false},{name:"Colorize",value:false},{name:"Debug Bounds",value:false},{name:"Normalize",value:false},{name:"Offset X",value:0},{name:"Offset Y",value:0},{name:"Abs",value:false},{name:"Channel index",value:0},{name:"Channel",value:"R"},{name:"X",value:true},{name:"Y",value:true},{name:"Z",value:false}],portsOut:[{name:"Next",links:[{portIn:"Render",portOut:"Next",objIn:"482",objOut:"481"}]}]},{objName:"Ops.Gl.Meshes.Cube_v2",id:"482",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Render"},{name:"Render Mesh",value:false},{name:"Width",value:1},{name:"Length",value:1},{name:"Height",value:1},{name:"Center",value:true},{name:"Mapping index",value:0},{name:"Mapping",value:"Side"},{name:"Bias",value:0},{name:"Flip X",value:true},{name:"Top",value:true},{name:"Bottom",value:true},{name:"Left",value:true},{name:"Right",value:true},{name:"Front",value:true},{name:"Back",value:true}],portsOut:[{name:"Next",links:[{portIn:"exe",portOut:"Next",objIn:"484",objOut:"482"}]},{name:"geometry",links:[{portIn:"geom",portOut:"geometry",objIn:"484",objOut:"482"}]}]},{objName:"Ops.Gl.Matrix.OrbitControls",id:"483",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"min distance",value:.05},{name:"max distance",value:99999},{name:"min rot y",value:0},{name:"max rot y",value:0},{name:"initial radius",value:.05},{name:"initial axis y",value:.5},{name:"initial axis x",value:.25},{name:"mul",value:1},{name:"Smoothness",value:1},{name:"Speed X",value:1},{name:"Speed Y",value:1},{name:"Active",value:true},{name:"Allow Panning",value:true},{name:"Allow Zooming",value:true},{name:"Allow Rotation",value:true},{name:"restricted",value:true},{name:"Reset",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"479",objOut:"483"}]},{name:"radius",value:9.985999999999999},{name:"Rot X",value:90},{name:"Rot Y",value:90}]},{objName:"Ops.Gl.MeshInstancer_v4",id:"484",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"exe"},{name:"geom"},{name:"Scale",value:1},{name:"Limit Instances",value:false},{name:"Limit",value:100},{name:"positions",value:null},{name:"Scale Array",value:0},{name:"Rotations",value:0},{name:"Rotation Type index",value:0},{name:"Rotation Type",value:"Euler"},{name:"Material blend mode index",value:0},{name:"Material blend mode",value:"Multiply"},{name:"Colors",value:0},{name:"TexCoords",value:0}],portsOut:[{name:"Trigger Out",value:0},{name:"Num",value:1}]},{objName:"Ops.Gl.TextureEffects.RGBMath",id:"485",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Render"},{name:"Operation index",value:3},{name:"Operation",value:"c+x"},{name:"R Active",value:true},{name:"G Active",value:true},{name:"B Active",value:true},{name:"A Active",value:true},{name:"r",value:.79},{name:"g",value:.43},{name:"b",value:4.15},{name:"a",value:1},{name:"Mask",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"496",objOut:"485"}]}]},{objName:"Ops.Gl.Geometry.TransformGeometry",id:"486",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Geometry",value:0},{name:"Translate X",value:0},{name:"Translate Y",value:0},{name:"Translate Z",value:0},{name:"Scale X",value:.999},{name:"Scale Y",value:1},{name:"Scale Z",value:1},{name:"Rotation X",value:.5},{name:"Rotation Y",value:.01},{name:"Rotation Z",value:0}],portsOut:[{name:"Result"}]},{objName:"Ops.Gl.TextureToPointArray3",id:"487",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"update"},{name:"Center",value:true},{name:"Threshold Remove",value:0},{name:"Z Multiply",value:1},{name:"texture",value:0},{name:"Width",value:2},{name:"Height",value:2}],portsOut:[{name:"trigger",value:0},{name:"Points"},{name:"Total Points",value:0},{name:"Min Z",value:0},{name:"Max Z",value:0}]},{objName:"Ops.Gl.TextureToPoints",id:"488",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"update"},{name:"Num Points",value:2e3},{name:"Seed",value:1},{name:"Z Position index",value:1},{name:"Z Position",value:"Red"},{name:"Z Multiply",value:1},{name:"texture",value:0}],portsOut:[{name:"trigger",links:[{portIn:"update",portOut:"trigger",objIn:"477",objOut:"488"}]},{name:"Points"},{name:"NumPoints",value:0}]},{objName:"Ops.Gl.Meshes.MeshInstancerFromTexture_v2",id:"489",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"exe"},{name:"Geometry"},{name:"Num Instances",value:227390},{name:"Position Texture"},{name:"Rotation Texture",value:null},{name:"Scale Texture",value:null},{name:"Color Texture",value:null},{name:"Color Texture Blendmode index",value:0},{name:"Color Texture Blendmode",value:"Normal"},{name:"Scale"},{name:"Multiply Pos X",value:.8},{name:"Multiply Pos Y",value:-31.09},{name:"Multiply Pos Z",value:14.05}],portsOut:[{name:"Trigger Out",value:0},{name:"Num",value:227390}]},{objName:"Ops.Gl.Meshes.Cube_v2",id:"490",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Render"},{name:"Render Mesh",value:true},{name:"Width",value:-7.21},{name:"Length",value:5.61},{name:"Height",value:4.45},{name:"Center",value:true},{name:"Mapping index",value:0},{name:"Mapping",value:"Side"},{name:"Bias",value:0},{name:"Flip X",value:true},{name:"Top",value:true},{name:"Bottom",value:true},{name:"Left",value:true},{name:"Right",value:true},{name:"Front",value:true},{name:"Back",value:true}],portsOut:[{name:"Next",links:[{portIn:"exe",portOut:"Next",objIn:"502",objOut:"490"}]},{name:"geometry",links:[{portIn:"Geometry",portOut:"geometry",objIn:"489",objOut:"490"}]}]},{objName:"Ops.Gl.TextureEffects.RgbMultiply",id:"491",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"r",value:.21},{name:"g",value:.26},{name:"b",value:2.05}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"494",objOut:"491"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"492",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"add"},{name:"amount",value:1},{name:"Image",value:0},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:true},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"491",objOut:"492"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"493",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"nearest"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:true},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"Render",portOut:"Next",objIn:"485",objOut:"493"}]},{name:"texture_out",links:[{portIn:"RGBE Texture",portOut:"texture_out",objIn:"474",objOut:"493"},{portIn:"Texture In",portOut:"texture_out",objIn:"495",objOut:"493"}]},{name:"Aspect Ratio",value:1.5658536585365854}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"494",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"multiply"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:true},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Ui.VizTexture",id:"495",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out"},{name:"Info",value:""}]},{objName:"Ops.Gl.ShaderEffects.VertexWobble_v2",id:"496",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"Source index",value:0},{name:"Source",value:"X * Z + Time"},{name:"amount",value:.622},{name:"Time",value:438.67},{name:"Scale",value:3},{name:"axisX",value:true},{name:"axisY",value:true},{name:"axisZ",value:true},{name:"Range index",value:0},{name:"Range",value:"-1 to 1"},{name:"Area index",value:0},{name:"Area",value:"Sphere"},{name:"Size",value:1},{name:"Falloff",value:0},{name:"x",value:0},{name:"y",value:0},{name:"z",value:0},{name:"WorldSpace",value:true},{name:"Invert",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"497",objOut:"496"}]}]},{objName:"Ops.Gl.TextureEffects.WaveformGradient_v2",id:"497",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"Frequency",value:5.69},{name:"Pow factor",value:.34},{name:"Offset",value:0},{name:"Rotate",value:.918},{name:"r",value:.8266666666666667},{name:"g",value:0},{name:"b",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"492",objOut:"497"}]}]},{objName:"Ops.Gl.TextureEffects.Plasma",id:"498",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"multiply"},{name:"Amount",value:1},{name:"Width",value:13.29},{name:"Height",value:11.5},{name:"Mul",value:7.51},{name:"offset X"},{name:"offset Y",value:2.59},{name:"Time"},{name:"Greyscale",value:true}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Matrix.CircleTransform",id:"499",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"segments",value:8},{name:"radius"},{name:"percent",value:1},{name:"Absolute",value:true},{name:"Flip",value:false},{name:"Rotate",value:true}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"489",objOut:"499"}]},{name:"index",value:7}]},{objName:"Ops.Anim.SineAnim",id:"500",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:3.16},{name:"amplitude",value:4.5}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"radius",portOut:"result",objIn:"499",objOut:"500"},{portIn:"Value",portOut:"result",objIn:"501",objOut:"500"},{portIn:"Value",portOut:"result",objIn:"502",objOut:"500"}]}]},{objName:"Ops.Anim.AnimNumber",id:"501",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"exe"},{name:"Value"},{name:"duration",value:.5},{name:"easing index",value:0},{name:"easing",value:"Bounce In"}],portsOut:[{name:"Next",value:0},{name:"result",links:[{portIn:"rotY",portOut:"result",objIn:"506",objOut:"501"}]},{name:"Finished",value:0}]},{objName:"Ops.Anim.AnimNumber",id:"502",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"exe"},{name:"Value"},{name:"duration",value:-1.57},{name:"easing index",value:0},{name:"easing",value:"Cubic In Out"}],portsOut:[{name:"Next",value:0},{name:"result",links:[{portIn:"Scale",portOut:"result",objIn:"489",objOut:"502"}]},{name:"Finished",value:0}]},{objName:"Ops.Ui.PatchInput",id:"503",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[],portsOut:[{name:"create port",value:0},{name:"in0 Ops.Gl.MainLoop trigger",links:[{portIn:"render",portOut:"in0 Ops.Gl.MainLoop trigger",objIn:"507",objOut:"503"}]}]},{objName:"Ops.Ui.PatchOutput",id:"504",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"create port",value:0}],portsOut:[]},{objName:"Ops.Ui.SubPatch",id:"505",uiAttribs:{subPatch:0},portsIn:[{name:"create port",value:null},{name:"dataStr",value:'{"ports":[{"name":"in0 Ops.Gl.MainLoop trigger","type":1}],"portsOut":[]}'},{name:"patchId",value:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},{name:"in0 Ops.Gl.MainLoop trigger"}],portsOut:[{name:"create port out",value:0}]},{objName:"Ops.Gl.Matrix.Transform",id:"506",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:-13.05},{name:"scale",value:1},{name:"rotX",value:701.5},{name:"rotY"},{name:"rotZ"}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"478",objOut:"506"}]}]},{objName:"Ops.Deprecated.Gl.Matrix.CircleMovement_v2",id:"507",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render"},{name:"Duration ",value:18.38},{name:"offset",value:0},{name:"Time"},{name:"segments",value:5},{name:"radius",value:-5.03},{name:"mulX",value:1},{name:"mulY",value:-1.06}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"506",objOut:"507"}]},{name:"index",value:5},{name:"X",value:2.48412988326061},{name:"Y",value:-3.679928689274957}]},{objName:"Ops.Anim.Timer_v2",id:"508",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"Speed",value:1},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Time",portOut:"Time",objIn:"507",objOut:"508"},{portIn:"number1",portOut:"Time",objIn:"512",objOut:"508"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"509",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render",value:null},{name:"posX",value:22.31},{name:"posY",value:17.35},{name:"posZ",value:-32.74},{name:"scale",value:-.11},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"exe 0",portOut:"trigger",objIn:"478",objOut:"509"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"510",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render",value:null},{name:"posX",value:-12.17},{name:"posY",value:17.35},{name:"posZ",value:-32.74},{name:"scale",value:-.11},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"exe 1",portOut:"trigger",objIn:"478",objOut:"510"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"511",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"render",value:null},{name:"posX",value:21.18},{name:"posY",value:35.09},{name:"posZ",value:38.37},{name:"scale",value:3.71},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"exe 2",portOut:"trigger",objIn:"478",objOut:"511"}]}]},{objName:"Ops.Math.Multiply",id:"512",uiAttribs:{subPatch:"5dddd26e-8cb2-4ab1-a3d1-a04c1b1d27d3"},portsIn:[{name:"number1"},{name:"number2",value:58.48}],portsOut:[{name:"result",links:[{portIn:"rotZ",portOut:"result",objIn:"506",objOut:"512"}]}]},{objName:"Ops.Gl.Meshes.Cube_v2",id:"513",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Render Mesh",value:true},{name:"Width",value:1},{name:"Length",value:1},{name:"Height",value:1},{name:"Center",value:true},{name:"Mapping index",value:0},{name:"Mapping",value:"Side"},{name:"Bias",value:0},{name:"Flip X",value:true},{name:"Top",value:true},{name:"Bottom",value:true},{name:"Left",value:true},{name:"Right",value:true},{name:"Front",value:true},{name:"Back",value:true}],portsOut:[{name:"Next",links:[{portIn:"Render",portOut:"Next",objIn:"515",objOut:"513"},{portIn:"render",portOut:"Next",objIn:"518",objOut:"513"}]},{name:"geometry",links:[{portIn:"Geometry",portOut:"geometry",objIn:"521",objOut:"513"}]}]},{objName:"Ops.Gl.TesselateGeometry",id:"514",uiAttribs:{subPatch:0},portsIn:[{name:"Geometry"},{name:"Iterations",value:1}],portsOut:[{name:"Result",links:[{portIn:"Geometry",portOut:"Result",objIn:"515",objOut:"514"}]},{name:"Num Vertices",value:144}]},{objName:"Ops.Gl.Meshes.GeometryToTexture",id:"515",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Geometry"},{name:"Tex Size",value:12},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Randomize",value:true}],portsOut:[{name:"Next",value:0},{name:"Total Vertices",value:144},{name:"Texture",links:[{portIn:"Image",portOut:"Texture",objIn:"516",objOut:"515"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"516",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"add"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"517",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"516",objOut:"517"},{portIn:"render",portOut:"Next",objIn:"520",objOut:"517"},{portIn:"render",portOut:"Next",objIn:"525",objOut:"517"}]},{name:"texture_out",links:[{portIn:"RGBE Texture",portOut:"texture_out",objIn:"524",objOut:"517"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"518",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture",value:0}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Meshes.MeshInstancerFromTexture_v2",id:"519",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Geometry"},{name:"Num Instances",value:40020},{name:"Position Texture"},{name:"Rotation Texture",value:null},{name:"Scale Texture",value:null},{name:"Color Texture"},{name:"Color Texture Blendmode index",value:0},{name:"Color Texture Blendmode",value:"Add"},{name:"Scale",value:1},{name:"Multiply Pos X",value:1},{name:"Multiply Pos Y",value:1},{name:"Multiply Pos Z",value:1}],portsOut:[{name:"Trigger Out",value:0},{name:"Num",value:40020}]},{objName:"Ops.Gl.Meshes.Cone",id:"520",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"slices",value:10.32},{name:"stacks",value:3.21},{name:"radius",value:.02},{name:"height",value:.48},{name:"Active",value:false}],portsOut:[{name:"trigger",links:[{portIn:"Execute",portOut:"trigger",objIn:"524",objOut:"520"}]},{name:"geometry",links:[{portIn:"Geometry",portOut:"geometry",objIn:"519",objOut:"520"}]}]},{objName:"Ops.Gl.Geometry.TransformGeometry",id:"521",uiAttribs:{subPatch:0},portsIn:[{name:"Geometry"},{name:"Translate X",value:0},{name:"Translate Y",value:-.7},{name:"Translate Z",value:-.62},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Scale Z",value:1},{name:"Rotation X",value:-15.16},{name:"Rotation Y",value:.23},{name:"Rotation Z"}],portsOut:[{name:"Result",links:[{portIn:"Geometry",portOut:"Result",objIn:"514",objOut:"521"}]}]},{objName:"Ops.Anim.SineAnim",id:"522",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:.06},{name:"amplitude",value:808}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"Rotation Z",portOut:"result",objIn:"521",objOut:"522"}]}]},{objName:"Ops.Gl.GradientTexture",id:"523",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":0.6695833333333333,"g":0.6177756306966147,"b":0.3060205078125},{"pos":0.25,"r":0.6695833333333333,"g":0.6177756306966147,"b":0.3060205078125},{"pos":0.75,"r":0.9429166666666666,"g":0,"b":0},{"pos":1,"r":0.9429166666666666,"g":0,"b":0}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:false},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Color Texture",portOut:"Texture",objIn:"519",objOut:"523"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.Textures.TextureToCoordinateGrid",id:"524",uiAttribs:{subPatch:0},portsIn:[{name:"Execute"},{name:"RGBE Texture"},{name:"Aspect",value:1},{name:"Threshold",value:.2}],portsOut:[{name:"Next",value:0},{name:"HDR Texture",links:[{portIn:"Position Texture",portOut:"HDR Texture",objIn:"519",objOut:"524"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"525",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:1.02},{name:"posZ",value:.06},{name:"scale",value:1},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"519",objOut:"525"}]}]},{objName:"Ops.Sequence",id:"526",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"527",objOut:"526"}]},{name:"trigger 1",links:[{portIn:"Trigger In",portOut:"trigger 1",objIn:"530",objOut:"526"}]},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",links:[{portIn:"Render",portOut:"trigger 14",objIn:"534",objOut:"526"}]},{name:"trigger 15",value:0}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"527",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI float iTime;\nUNI vec2 iResolution;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat pavement(vec2 uv, float bevel, float mortar) {\n\tuv = abs(uv-vec2(0.5));\n\treturn clamp((0.5*(1.0-mortar)-max(uv.x, uv.y))/max(0.0001, bevel), 0.0, 1.0);\n}\n\nvec4 arc_pavement(vec2 uv, float acount, float lcount, out vec2 seed) {\n\tfloat PI = 3.141592654;\n\tfloat radius = (0.5/sqrt(2.0));\n    float uvx = uv.x;\n    uv.x = 0.5*fract(uv.x+0.5)+0.25;\n    float center = (uv.x-0.5)/radius;\n    center *= center;\n    center = floor(acount*(uv.y-radius*sqrt(1.0-center))+0.5)/acount;\n    vec2 v = uv-vec2(0.5, center);\n    float cornerangle = 0.85/acount+0.25*PI;\n    float acountangle = (PI-2.0*cornerangle)/(lcount+floor(mod(center*acount, 2.0)));\n    float angle = mod(atan(v.y, v.x), 2.0*PI);\n\tfloat base_angle;\n\tfloat local_uvy = 0.5+acount*(length(v)-radius)*(1.54-0.71*cos(1.44*(angle-PI*0.5)));\n\tvec2 local_uv;\n    if (angle < cornerangle) {\n        base_angle = 0.25*PI;\n\t\tlocal_uv = vec2((angle-0.25*PI)/cornerangle*0.38*acount+0.5, 1.0-local_uvy);\n\t\tseed = vec2(fract(center), 0.0);\n    } else if (angle > PI-cornerangle) {\n        base_angle = 0.75*PI;\n\t\tlocal_uv = vec2(local_uvy, 0.5-(0.75*PI-angle)/cornerangle*0.38*acount);\n\t\tseed = vec2(fract(center), 0.0);\n    } else {\n        base_angle = cornerangle+(floor((angle-cornerangle)/acountangle)+0.5)*acountangle;\n\t\tlocal_uv = vec2((angle-base_angle)/acountangle+0.5, 1.0-local_uvy);\n\t\tseed = vec2(fract(center), base_angle);\n    }\n    vec2 brick_center = vec2(0.5, center)+radius*vec2(cos(base_angle), sin(base_angle));\n    return vec4(brick_center.x+uvx-uv.x, brick_center.y, local_uv);\n}\nvec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nvec2 scale(vec2 uv, vec2 center, vec2 scale) {\n\tuv -= center;\n\tuv /= scale;\n\tuv += center;\n    return uv;\n}vec4 brick(vec2 uv, vec2 bmin, vec2 bmax, float mortar, float round, float bevel) {\n\tfloat color;\n\tvec2 size = bmax - bmin;\n\tfloat min_size = min(size.x, size.y);\n\tmortar *= min_size;\n\tbevel *= min_size;\n\tround *= min_size;\n\tvec2 center = 0.5*(bmin+bmax);\n    vec2 d = abs(uv-center)-0.5*(size)+vec2(round+mortar);\n    color = length(max(d,vec2(0))) + min(max(d.x,d.y),0.0)-round;\n\tcolor = clamp(-color/bevel, 0.0, 1.0);\n\tvec2 tiled_brick_pos = mod(bmin, vec2(1.0, 1.0));\n\treturn vec4(color, center, tiled_brick_pos.x+7.0*tiled_brick_pos.y);\n}\n\nvec3 brick_random_color(vec2 bmin, vec2 bmax, float seed) {\n\tvec2 center = 0.5*(bmin + bmax);\n\treturn rand3(fract(center + vec2(seed)));\n}\n\nvec3 brick_uv(vec2 uv, vec2 bmin, vec2 bmax, float seed) {\n\tvec2 center = 0.5*(bmin + bmax);\n\tvec2 size = bmax - bmin;\n\tfloat max_size = max(size.x, size.y);\n\treturn vec3(0.5+(uv-center)/max_size, rand(fract(center)+vec2(seed)));\n}\n\nvec3 brick_corner_uv(vec2 uv, vec2 bmin, vec2 bmax, float mortar, float corner, float seed) {\n\tvec2 center = 0.5*(bmin + bmax);\n\tvec2 size = bmax - bmin;\n\tfloat max_size = max(size.x, size.y);\n\tfloat min_size = min(size.x, size.y);\n\tmortar *= min_size;\n\tcorner *= min_size;\n\treturn vec3(clamp((0.5*size-vec2(mortar)-abs(uv-center))/corner, vec2(0.0), vec2(1.0)), rand(fract(center)+vec2(seed)+ceil(vec2(uv-center))));\n}\n\nvec4 bricks_rb(vec2 uv, vec2 count, float repeat, float offset) {\n\tcount *= repeat;\n\tfloat x_offset = offset*step(0.5, fract(uv.y*count.y*0.5));\n\tvec2 bmin = floor(vec2(uv.x*count.x-x_offset, uv.y*count.y));\n\tbmin.x += x_offset;\n\tbmin /= count;\n\treturn vec4(bmin, bmin+vec2(1.0)/count);\n}\n\nvec4 bricks_rb2(vec2 uv, vec2 count, float repeat, float offset) {\n\tcount *= repeat;\n\tfloat x_offset = offset*step(0.5, fract(uv.y*count.y*0.5));\n\tcount.x = count.x*(1.0+step(0.5, fract(uv.y*count.y*0.5)));\n\tvec2 bmin = floor(vec2(uv.x*count.x-x_offset, uv.y*count.y));\n\tbmin.x += x_offset;\n\tbmin /= count;\n\treturn vec4(bmin, bmin+vec2(1.0)/count);\n}\n\nvec4 bricks_hb(vec2 uv, vec2 count, float repeat, float offset) {\n\tfloat pc = count.x+count.y;\n\tfloat c = pc*repeat;\n\tvec2 corner = floor(uv*c);\n\tfloat cdiff = mod(corner.x-corner.y, pc);\n\tif (cdiff < count.x) {\n\t\treturn vec4((corner-vec2(cdiff, 0.0))/c, (corner-vec2(cdiff, 0.0)+vec2(count.x, 1.0))/c);\n\t} else {\n\t\treturn vec4((corner-vec2(0.0, pc-cdiff-1.0))/c, (corner-vec2(0.0, pc-cdiff-1.0)+vec2(1.0, count.y))/c);\n\t}\n}\n\nvec4 bricks_bw(vec2 uv, vec2 count, float repeat, float offset) {\n\tvec2 c = 2.0*count*repeat;\n\tfloat mc = max(c.x, c.y);\n\tvec2 corner1 = floor(uv*c);\n\tvec2 corner2 = count*floor(repeat*2.0*uv);\n\tfloat cdiff = mod(dot(floor(repeat*2.0*uv), vec2(1.0)), 2.0);\n\tvec2 corner;\n\tvec2 size;\n\tif (cdiff == 0.0) {\n\t\tcorner = vec2(corner1.x, corner2.y);\n\t\tsize = vec2(1.0, count.y);\n\t} else {\n\t\tcorner = vec2(corner2.x, corner1.y);\n\t\tsize = vec2(count.x, 1.0);\n\t}\n\treturn vec4(corner/c, (corner+size)/c);\n}\n\nvec4 bricks_sb(vec2 uv, vec2 count, float repeat, float offset) {\n\tvec2 c = (count+vec2(1.0))*repeat;\n\tfloat mc = max(c.x, c.y);\n\tvec2 corner1 = floor(uv*c);\n\tvec2 corner2 = (count+vec2(1.0))*floor(repeat*uv);\n\tvec2 rcorner = corner1 - corner2;\n\tvec2 corner;\n\tvec2 size;\n\tif (rcorner.x == 0.0 && rcorner.y < count.y) {\n\t\tcorner = corner2;\n\t\tsize = vec2(1.0, count.y);\n\t} else if (rcorner.y == 0.0) {\n\t\tcorner = corner2+vec2(1.0, 0.0);\n\t\tsize = vec2(count.x, 1.0);\n\t} else if (rcorner.x == count.x) {\n\t\tcorner = corner2+vec2(count.x, 1.0);\n\t\tsize = vec2(1.0, count.y);\n\t} else if (rcorner.y == count.y) {\n\t\tcorner = corner2+vec2(0.0, count.y);\n\t\tsize = vec2(count.x, 1.0);\n\t} else {\n\t\tcorner = corner2+vec2(1.0);\n\t\tsize = vec2(count.x-1.0, count.y-1.0);\n\t}\n\treturn vec4(corner/c, (corner+size)/c);\n}vec2 rotate(vec2 uv, vec2 center, float rotate) {\n \tvec2 rv;\n\tuv -= center;\n\trv.x = cos(rotate)*uv.x + sin(rotate)*uv.y;\n\trv.y = -sin(rotate)*uv.x + cos(rotate)*uv.y;\n\trv += center;\n    return rv;\t\n}const float p_o398718_gradient_0_pos = 0.009090077;\nconst float p_o398718_gradient_0_r = 0.000000000;\nconst float p_o398718_gradient_0_g = 1.000000000;\nconst float p_o398718_gradient_0_b = 0.125000000;\nconst float p_o398718_gradient_0_a = 1.000000000;\nconst float p_o398718_gradient_1_pos = 0.518180708;\nconst float p_o398718_gradient_1_r = 0.843750000;\nconst float p_o398718_gradient_1_g = 0.000000000;\nconst float p_o398718_gradient_1_b = 1.000000000;\nconst float p_o398718_gradient_1_a = 1.000000000;\nconst float p_o398718_gradient_2_pos = 1.000000000;\nconst float p_o398718_gradient_2_r = 1.000000000;\nconst float p_o398718_gradient_2_g = 0.000000000;\nconst float p_o398718_gradient_2_b = 0.000000000;\nconst float p_o398718_gradient_2_a = 1.000000000;\nvec4 o398718_gradient_gradient_fct(float x) {\n  if (x < p_o398718_gradient_0_pos) {\n    return vec4(p_o398718_gradient_0_r,p_o398718_gradient_0_g,p_o398718_gradient_0_b,p_o398718_gradient_0_a);\n  } else if (x < p_o398718_gradient_1_pos) {\n    return mix(vec4(p_o398718_gradient_0_r,p_o398718_gradient_0_g,p_o398718_gradient_0_b,p_o398718_gradient_0_a), vec4(p_o398718_gradient_1_r,p_o398718_gradient_1_g,p_o398718_gradient_1_b,p_o398718_gradient_1_a), ((x-p_o398718_gradient_0_pos)/(p_o398718_gradient_1_pos-p_o398718_gradient_0_pos)));\n  } else if (x < p_o398718_gradient_2_pos) {\n    return mix(vec4(p_o398718_gradient_1_r,p_o398718_gradient_1_g,p_o398718_gradient_1_b,p_o398718_gradient_1_a), vec4(p_o398718_gradient_2_r,p_o398718_gradient_2_g,p_o398718_gradient_2_b,p_o398718_gradient_2_a), ((x-p_o398718_gradient_1_pos)/(p_o398718_gradient_2_pos-p_o398718_gradient_1_pos)));\n  }\n  return vec4(p_o398718_gradient_2_r,p_o398718_gradient_2_g,p_o398718_gradient_2_b,p_o398718_gradient_2_a);\n}\nconst float p_o145310_amount = 0.400000000;\nconst float p_o56973_amount = 1.000000000;\nconst float p_o116601_translate_x = -0.020000000;\nconst float p_o116601_translate_y = -0.225000000;\nconst float seed_o48532 = 0.000000000;\nconst float p_o48532_repeat = 1.000000000;\nconst float p_o48532_rows = 5.000000000;\nconst float p_o48532_columns = 3.000000000;\nconst float p_o48532_row_offset = 0.500000000;\nconst float p_o48532_mortar = 0.100000000;\nconst float p_o48532_bevel = 0.100000000;\nconst float p_o48532_round = 0.000000000;\nconst float p_o48532_corner = 0.300000000;\nconst float p_o6375_cx = 0.030000000;\nconst float p_o6375_cy = 0.110000000;\nconst float p_o6375_scale_x = 0.500000000;\nconst float p_o6375_scale_y = 0.140000000;\nconst float p_o6374_translate_x = 0.165000000;\nconst float p_o6374_translate_y = 0.395000000;\nconst float p_o6373_amount = 4.040000000;\nconst float p_o6376_translate_y = 0.020000000;\nconst float p_o6372_repeat = 4.000000000;\nconst float p_o6372_rows = 12.000000000;\nconst float p_o6372_bricks = 13.000000000;\nconst float p_o6372_mortar = 0.070000000;\nconst float p_o6372_bevel = 0.500000000;\nconst float p_o6371_amplitude = 0.840000000;\nconst float p_o6371_frequency = 1.000000000;\nconst float p_o339093_cx = 0.000000000;\nconst float p_o339093_cy = 0.000000000;\nconst float p_o339093_scale_x = 0.480000000;\nconst float p_o339093_scale_y = 0.500000000;\nconst float p_o227315_translate_y = -0.010000000;\nconst float p_o179263_cx = 0.580000000;\nconst float p_o179263_cy = -0.170000000;\nconst float p_o179263_rotate = -134.915000000;\nconst float seed_o152678 = 0.000000000;\nconst float p_o152678_repeat = 1.000000000;\nconst float p_o152678_rows = 4.000000000;\nconst float p_o152678_columns = 4.000000000;\nconst float p_o152678_row_offset = 0.910000000;\nconst float p_o152678_mortar = 0.050000000;\nconst float p_o152678_bevel = 0.500000000;\nconst float p_o152678_round = 0.020000000;\nconst float p_o152678_corner = 0.300000000;\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o6372_0_uv = fract((((scale(((UV)-vec2(p_o116601_translate_x, p_o116601_translate_y)), vec2(0.5+p_o6375_cx, 0.5+p_o6375_cy), vec2(p_o6375_scale_x, p_o6375_scale_y)))-vec2(p_o6374_translate_x, p_o6374_translate_y))-vec2(((iTime)), p_o6376_translate_y)))*vec2(p_o6372_repeat, -1.0);\nvec2 o6372_0_seed;\nvec4 o6372_0_ap = arc_pavement(o6372_0_uv, p_o6372_rows, p_o6372_bricks, o6372_0_seed);\nfloat o6372_0_1_f = pavement(o6372_0_ap.zw, p_o6372_bevel, 2.0*p_o6372_mortar);\nvec4 o6376_0_1_rgba = vec4(vec3(o6372_0_1_f), 1.0);\nfloat o6371_0_1_f = 1.0-abs(2.0*(((scale(((UV)-vec2(p_o116601_translate_x, p_o116601_translate_y)), vec2(0.5+p_o6375_cx, 0.5+p_o6375_cy), vec2(p_o6375_scale_x, p_o6375_scale_y)))-vec2(p_o6374_translate_x, p_o6374_translate_y)).y-0.5)-p_o6371_amplitude*sin((p_o6371_frequency*((scale(((UV)-vec2(p_o116601_translate_x, p_o116601_translate_y)), vec2(0.5+p_o6375_cx, 0.5+p_o6375_cy), vec2(p_o6375_scale_x, p_o6375_scale_y)))-vec2(p_o6374_translate_x, p_o6374_translate_y)).x+(-(iTime)))*6.28318530718));\nvec4 o6373_0_s1 = o6376_0_1_rgba;\nvec4 o6373_0_s2 = vec4(vec3(o6371_0_1_f), 1.0);\nfloat o6373_0_a = p_o6373_amount*1.0;\nvec4 o6373_0_2_rgba = vec4(blend_dodge(((scale(((UV)-vec2(p_o116601_translate_x, p_o116601_translate_y)), vec2(0.5+p_o6375_cx, 0.5+p_o6375_cy), vec2(p_o6375_scale_x, p_o6375_scale_y)))-vec2(p_o6374_translate_x, p_o6374_translate_y)), o6373_0_s1.rgb, o6373_0_s2.rgb, o6373_0_a*o6373_0_s1.a), min(1.0, o6373_0_s2.a+o6373_0_a*o6373_0_s1.a));\nvec4 o6374_0_1_rgba = o6373_0_2_rgba;\nvec4 o6375_0_1_rgba = o6374_0_1_rgba;\nvec4 o48532_0_rect = bricks_rb(((UV)-vec2(p_o116601_translate_x, p_o116601_translate_y)), vec2(p_o48532_columns, p_o48532_rows), p_o48532_repeat, p_o48532_row_offset);\nvec4 o48532_0 = brick(((UV)-vec2(p_o116601_translate_x, p_o116601_translate_y)), o48532_0_rect.xy, o48532_0_rect.zw, p_o48532_mortar*(dot((o6375_0_1_rgba).rgb, vec3(1.0))/3.0), p_o48532_round*1.0, max(0.001, p_o48532_bevel*1.0));\nfloat o48532_0_2_f = o48532_0.x;\nvec4 o116601_0_1_rgba = vec4(vec3(o48532_0_2_f), 1.0);\nvec2 o6372_2_uv = fract((((scale((UV), vec2(0.5+p_o6375_cx, 0.5+p_o6375_cy), vec2(p_o6375_scale_x, p_o6375_scale_y)))-vec2(p_o6374_translate_x, p_o6374_translate_y))-vec2(((iTime)), p_o6376_translate_y)))*vec2(p_o6372_repeat, -1.0);\nvec2 o6372_2_seed;\nvec4 o6372_2_ap = arc_pavement(o6372_2_uv, p_o6372_rows, p_o6372_bricks, o6372_2_seed);\nfloat o6372_0_3_f = pavement(o6372_2_ap.zw, p_o6372_bevel, 2.0*p_o6372_mortar);\nvec4 o6376_0_3_rgba = vec4(vec3(o6372_0_3_f), 1.0);\nfloat o6371_0_3_f = 1.0-abs(2.0*(((scale((UV), vec2(0.5+p_o6375_cx, 0.5+p_o6375_cy), vec2(p_o6375_scale_x, p_o6375_scale_y)))-vec2(p_o6374_translate_x, p_o6374_translate_y)).y-0.5)-p_o6371_amplitude*sin((p_o6371_frequency*((scale((UV), vec2(0.5+p_o6375_cx, 0.5+p_o6375_cy), vec2(p_o6375_scale_x, p_o6375_scale_y)))-vec2(p_o6374_translate_x, p_o6374_translate_y)).x+(-(iTime)))*6.28318530718));\nvec4 o6373_3_s1 = o6376_0_3_rgba;\nvec4 o6373_3_s2 = vec4(vec3(o6371_0_3_f), 1.0);\nfloat o6373_3_a = p_o6373_amount*1.0;\nvec4 o6373_0_5_rgba = vec4(blend_dodge(((scale((UV), vec2(0.5+p_o6375_cx, 0.5+p_o6375_cy), vec2(p_o6375_scale_x, p_o6375_scale_y)))-vec2(p_o6374_translate_x, p_o6374_translate_y)), o6373_3_s1.rgb, o6373_3_s2.rgb, o6373_3_a*o6373_3_s1.a), min(1.0, o6373_3_s2.a+o6373_3_a*o6373_3_s1.a));\nvec4 o6374_0_3_rgba = o6373_0_5_rgba;\nvec4 o6375_0_3_rgba = o6374_0_3_rgba;\nvec4 o56973_0_s1 = o116601_0_1_rgba;\nvec4 o56973_0_s2 = o6375_0_3_rgba;\nfloat o56973_0_a = p_o56973_amount*1.0;\nvec4 o56973_0_2_rgba = vec4(blend_multiply((UV), o56973_0_s1.rgb, o56973_0_s2.rgb, o56973_0_a*o56973_0_s1.a), min(1.0, o56973_0_s2.a+o56973_0_a*o56973_0_s1.a));\nvec4 o152678_0_rect = bricks_rb2((rotate(((scale((UV), vec2(0.5+p_o339093_cx, 0.5+p_o339093_cy), vec2(p_o339093_scale_x, p_o339093_scale_y)))-vec2(((iTime)), p_o227315_translate_y)), vec2(0.5+p_o179263_cx, 0.5+p_o179263_cy), p_o179263_rotate*0.01745329251)), vec2(p_o152678_columns, p_o152678_rows), p_o152678_repeat, p_o152678_row_offset);\nvec4 o152678_0 = brick((rotate(((scale((UV), vec2(0.5+p_o339093_cx, 0.5+p_o339093_cy), vec2(p_o339093_scale_x, p_o339093_scale_y)))-vec2(((iTime)), p_o227315_translate_y)), vec2(0.5+p_o179263_cx, 0.5+p_o179263_cy), p_o179263_rotate*0.01745329251)), o152678_0_rect.xy, o152678_0_rect.zw, p_o152678_mortar*1.0, p_o152678_round*1.0, max(0.001, p_o152678_bevel*1.0));\nfloat o152678_0_2_f = o152678_0.x;\nvec4 o179263_0_1_rgba = vec4(vec3(o152678_0_2_f), 1.0);\nvec4 o227315_0_1_rgba = o179263_0_1_rgba;\nvec4 o339093_0_1_rgba = o227315_0_1_rgba;\nvec4 o145310_0_s1 = o56973_0_2_rgba;\nvec4 o145310_0_s2 = o339093_0_1_rgba;\nfloat o145310_0_a = p_o145310_amount*1.0;\nvec4 o145310_0_2_rgba = vec4(blend_multiply((UV), o145310_0_s1.rgb, o145310_0_s2.rgb, o145310_0_a*o145310_0_s1.a), min(1.0, o145310_0_s2.a+o145310_0_a*o145310_0_s1.a));\nvec4 o359525_0_s1 = o145310_0_2_rgba;\nvec4 o359525_0_s2 = o56973_0_2_rgba;\nfloat o359525_0_a = (sin(iTime))*1.0;\nvec4 o359525_0_2_rgba = vec4(blend_overlay((UV), o359525_0_s1.rgb, o359525_0_s2.rgb, o359525_0_a*o359525_0_s1.a), min(1.0, o359525_0_s2.a+o359525_0_a*o359525_0_s1.a));\nvec4 o398718_0_1_rgba = o398718_gradient_gradient_fct((dot((o359525_0_2_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o398718_0_1_rgba;\n}"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iTime"},{name:"iResolution X",value:1},{name:"iResolution Y",value:.98}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"528",objOut:"527"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"528",objOut:"527"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"528",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Floating Point",value:false},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture",links:[{portIn:"Image",portOut:"Texture",objIn:"533",objOut:"528"},{portIn:"Normal Map",portOut:"Texture",objIn:"530",objOut:"528"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"529",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"Speed",value:1},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"527",objOut:"529"},{portIn:"Time",portOut:"Time",objIn:"536",objOut:"529"}]}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"530",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"Trigger In"},{name:"R",value:.6303983384111558},{name:"G",value:.3613060375783159},{name:"B",value:.8420742678116908},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:false},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:1},{name:"Fresnel G",value:1},{name:"Fresnel B",value:1},{name:"Emissive Active",value:false},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.4539840878796928},{name:"Emissive G",value:.6508028908636025},{name:"Emissive B",value:.9178766842626245},{name:"Shininess",value:4},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Blinn"},{name:"Energy Conservation",value:true},{name:"Double Sided Material",value:true},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture",value:0},{name:"Specular Texture",value:0},{name:"Normal Map"},{name:"AO Texture",value:0},{name:"Emissive Texture",value:0},{name:"Emissive Mask",value:0},{name:"Opacity Texture"},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:true}],portsOut:[{name:"Trigger Out",links:[{portIn:"render",portOut:"Trigger Out",objIn:"532",objOut:"530"}]},{name:"Shader"}]},{objName:"Ops.Gl.Meshes.Sphere_v2",id:"531",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"render"},{name:"radius",value:1},{name:"stacks",value:32},{name:"slices",value:32},{name:"Filloffset",value:1},{name:"Render",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.Matrix.Transform",id:"532",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:0},{name:"scale",value:1},{name:"rotX",value:90},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"531",objOut:"532"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"533",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"536",objOut:"533"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"534",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"533",objOut:"534"}]},{name:"texture_out",links:[{portIn:"Opacity Texture",portOut:"texture_out",objIn:"530",objOut:"534"},{portIn:"Texture In",portOut:"texture_out",objIn:"535",objOut:"534"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Ui.VizTexture",id:"535",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out"},{name:"Info",value:""}]},{objName:"Ops.Gl.TextureEffects.Plasma",id:"536",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"screen"},{name:"Amount",value:1},{name:"Width",value:20},{name:"Height",value:20},{name:"Mul",value:3.43},{name:"offset X",value:0},{name:"offset Y",value:0},{name:"Time"},{name:"Greyscale",value:true}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Ui.PatchInput",id:"537",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[],portsOut:[{name:"create port",value:0},{name:"in0 Ops.Gl.MainLoop trigger",links:[{portIn:"render",portOut:"in0 Ops.Gl.MainLoop trigger",objIn:"540",objOut:"537"},{portIn:"exe",portOut:"in0 Ops.Gl.MainLoop trigger",objIn:"541",objOut:"537"}]}]},{objName:"Ops.Ui.PatchOutput",id:"538",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"create port",value:0}],portsOut:[]},{objName:"Ops.Ui.SubPatch",id:"539",uiAttribs:{subPatch:0},portsIn:[{name:"create port",value:null},{name:"dataStr",value:'{"ports":[{"name":"in0 Ops.Gl.MainLoop trigger","type":1}],"portsOut":[]}'},{name:"patchId",value:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},{name:"in0 Ops.Gl.MainLoop trigger"}],portsOut:[{name:"create port out",value:0}]},{objName:"Ops.Gl.Matrix.Transform",id:"540",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ"},{name:"scale",value:1},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"526",objOut:"540"}]}]},{objName:"Ops.Anim.SineAnim",id:"541",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:1.63},{name:"amplitude",value:5.11}],portsOut:[{name:"Trigger out",links:[{portIn:"exe",portOut:"Trigger out",objIn:"542",objOut:"541"}]},{name:"result",links:[{portIn:"Value",portOut:"result",objIn:"542",objOut:"541"}]}]},{objName:"Ops.Anim.AnimNumber",id:"542",uiAttribs:{subPatch:"382537ec-8ebc-4c4b-89aa-bdb5289bb72e"},portsIn:[{name:"exe"},{name:"Value"},{name:"duration",value:8.65},{name:"easing index",value:0},{name:"easing",value:"Expo Out"}],portsOut:[{name:"Next",value:0},{name:"result",links:[{portIn:"posZ",portOut:"result",objIn:"540",objOut:"542"}]},{name:"Finished",value:0}]},{objName:"Ops.Sequence",id:"543",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"exe",portOut:"trigger 0",objIn:"544",objOut:"543"}]},{name:"trigger 1",links:[{portIn:"render",portOut:"trigger 1",objIn:"550",objOut:"543"}]},{name:"trigger 2",links:[{portIn:"in0 Ops.Gl.MainLoop trigger",portOut:"trigger 2",objIn:"539",objOut:"543"}]},{name:"trigger 3",links:[{portIn:"exe",portOut:"trigger 3",objIn:"601",objOut:"543"}]},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",links:[{portIn:"exe",portOut:"trigger 14",objIn:"456",objOut:"543"}]},{name:"trigger 15",value:0}]},{objName:"Ops.Sequence",id:"544",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"545",objOut:"544"}]},{name:"trigger 1",value:0},{name:"trigger 2",links:[{portIn:"Render",portOut:"trigger 2",objIn:"551",objOut:"544"}]},{name:"trigger 3",links:[{portIn:"render",portOut:"trigger 3",objIn:"763",objOut:"544"}]},{name:"trigger 4",links:[{portIn:"Render",portOut:"trigger 4",objIn:"582",objOut:"544"}]},{name:"trigger 5",links:[{portIn:"Render",portOut:"trigger 5",objIn:"561",objOut:"544"}]},{name:"trigger 6",links:[{portIn:"render",portOut:"trigger 6",objIn:"584",objOut:"544"}]},{name:"trigger 7",links:[{portIn:"Render",portOut:"trigger 7",objIn:"566",objOut:"544"}]},{name:"trigger 8",links:[{portIn:"Render",portOut:"trigger 8",objIn:"592",objOut:"544"}]},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"545",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI float iTime;\nUNI vec2 iResolution;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nconst float p_o51744_r = 0.340000000;\nvec2 o54249_input_sdf(vec3 p, float _seed_variation_) {\nfloat o51744_0_1_sdf3d = length((p))-p_o51744_r;\n\nreturn vec2(o51744_0_1_sdf3d, 0.0);\n}\nvec2 raymarch_o54249(vec2 uv, float _seed_variation_) {\n\tvec3 ro = vec3(uv-vec2(0.5), 1.0);\n\tvec3 rd = vec3(0.0, 0.0, -1.0);\n\tfloat dO = 0.0;\n\tfloat c = 0.0;\n    for (int i=0; i < 100; i++) {\n    \tvec3 p = ro + rd*dO;\n        vec2 dS = o54249_input_sdf(p, _seed_variation_);\n        dO += dS.x;\n\n        if (dO >= 1.0) {\n\t\t\tbreak;\n\t\t} else if (dS.x < 0.0001) {\n\t\t\tc = dS.y;\n\t\t\tbreak;\n\t\t}\n    }\n    \n    return vec2(dO, c);\n}\n\nvec3 normal_o54249(vec3 p, float _seed_variation_) {\n\tif (p.z <= 0.0) {\n\t\treturn vec3(0.0, 0.0, 1.0);\n\t}\n\n\tfloat d = o54249_input_sdf(p, _seed_variation_).x;\n    float e = .001;\n    \n    vec3 n = d - vec3(\n        o54249_input_sdf(p-vec3(e, 0.0, 0.0), _seed_variation_).x,\n        o54249_input_sdf(p-vec3(0.0, e, 0.0), _seed_variation_).x,\n        o54249_input_sdf(p-vec3(0.0, 0.0, e), _seed_variation_).x);\n    \n    return vec3(-1.0, -1.0, -1.0)*normalize(n);\n}\n\nconst float p_o16804_gradient_0_pos = 0.000000000;\nconst float p_o16804_gradient_0_r = 1.000000000;\nconst float p_o16804_gradient_0_g = 0.000000000;\nconst float p_o16804_gradient_0_b = 0.000000000;\nconst float p_o16804_gradient_0_a = 1.000000000;\nconst float p_o16804_gradient_1_pos = 1.000000000;\nconst float p_o16804_gradient_1_r = 0.000000000;\nconst float p_o16804_gradient_1_g = 1.000000000;\nconst float p_o16804_gradient_1_b = 0.085937500;\nconst float p_o16804_gradient_1_a = 1.000000000;\nvec4 o16804_gradient_gradient_fct(float x) {\n  if (x < 0.5*(p_o16804_gradient_0_pos+p_o16804_gradient_1_pos)) {\n    return vec4(p_o16804_gradient_0_r,p_o16804_gradient_0_g,p_o16804_gradient_0_b,p_o16804_gradient_0_a);\n  }\n  return vec4(p_o16804_gradient_1_r,p_o16804_gradient_1_g,p_o16804_gradient_1_b,p_o16804_gradient_1_a);\n}\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o54249_0_d = raymarch_o54249((UV), _seed_variation_);\nfloat o54249_0_1_f = 1.0-o54249_0_d.x;\nvec4 o16804_0_1_rgba = o16804_gradient_gradient_fct(fract(((iTime ))*0.15915494309*atan(((vec4(vec3(o54249_0_1_f), 0.0)).xy+vec2(0.5)).y-0.5, ((vec4(vec3(o54249_0_1_f), 0.0)).xy+vec2(0.5)).x-0.5)));\nvec3 o63415_0_1_tex3d = ((o16804_0_1_rgba).rgb);\nvec3 o49538_0_1_rgb = o63415_0_1_tex3d;\ngl_FragColor = vec4(o49538_0_1_rgb, 1.0);\n}"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iTime",value:3},{name:"iResolution X",value:1},{name:"iResolution Y",value:1}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"546",objOut:"545"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"546",objOut:"545"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"546",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Floating Point",value:false},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"558",objOut:"546"},{portIn:"RGBE Texture",portOut:"Texture",objIn:"553",objOut:"546"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"547",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:4.49},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"val",portOut:"Time",objIn:"549",objOut:"547"},{portIn:"Time",portOut:"Time",objIn:"571",objOut:"547"},{portIn:"offset Y",portOut:"Time",objIn:"572",objOut:"547"}]}]},{objName:"Ops.Value.TriggerOnChangeNumber",id:"548",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Next",links:[{portIn:"Reset",portOut:"Next",objIn:"547",objOut:"548"}]},{name:"Number",value:50}]},{objName:"Ops.Math.Clamp",id:"549",uiAttribs:{subPatch:0},portsIn:[{name:"val"},{name:"min",value:50},{name:"max",value:51},{name:"ignore outside values",value:false}],portsOut:[{name:"result",links:[{portIn:"Value",portOut:"result",objIn:"548",objOut:"549"}]}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"550",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Fit"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"551",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"552",objOut:"551"},{portIn:"Execute",portOut:"Next",objIn:"553",objOut:"551"}]},{name:"texture_out",links:[{portIn:"Texture In",portOut:"texture_out",objIn:"554",objOut:"551"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"552",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Textures.TextureToCoordinateGrid",id:"553",uiAttribs:{subPatch:0},portsIn:[{name:"Execute"},{name:"RGBE Texture"},{name:"Aspect",value:-1.99},{name:"Threshold",value:.014}],portsOut:[{name:"Next",value:0},{name:"HDR Texture",links:[{portIn:"Image",portOut:"HDR Texture",objIn:"560",objOut:"553"}]}]},{objName:"Ops.Ui.VizTexture",id:"554",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Texture Point Size",portOut:"Texture Out",objIn:"556",objOut:"554"}]},{name:"Info",value:"8 x 8 8bit nearest repeat"}]},{objName:"Ops.Gl.Meshes.PointCloudFromTexture",id:"555",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Num Points",value:0},{name:"Axis index",value:0},{name:"Axis",value:"XYZ"},{name:"Texture"},{name:"Point Size",value:null},{name:"Normalize",value:false},{name:"Remove Point at 0",value:false}],portsOut:[{name:"Trigger",links:[{portIn:"Trigger In",portOut:"Trigger",objIn:"597",objOut:"555"}]},{name:"Total Points",value:1e4}]},{objName:"Ops.Gl.Shader.PointMaterial_v4",id:"556",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"PointSize",value:10.16},{name:"Size in Pixels",value:true},{name:"Random Size",value:.33},{name:"Round",value:true},{name:"Round Antialias",value:false},{name:"Scale by Distance",value:false},{name:"r",value:.19622499999999998},{name:"g",value:.165234375},{name:"b",value:.94},{name:"a",value:1},{name:"Vertex Colors",value:false},{name:"texture"},{name:"Colorize Texture",value:false},{name:"Texture Mask",value:0},{name:"Mask Channel index",value:0},{name:"Mask Channel",value:"A"},{name:"Texture Colorize"},{name:"Colorize Randomize",value:true},{name:"Texture Opacity",value:0},{name:"Texture Point Size"},{name:"Point Size Channel index",value:0},{name:"Point Size Channel",value:"R"},{name:"Texture Point Size Mul",value:1},{name:"Map Size 0 index",value:0},{name:"Map Size 0",value:"Black"},{name:"Flip Texture",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"571",objOut:"556"}]},{name:"shader"}]},{objName:"Ops.Gl.Matrix.OrbitControls",id:"557",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"min distance",value:.05},{name:"max distance",value:99999},{name:"min rot y",value:0},{name:"max rot y",value:0},{name:"initial radius",value:.05},{name:"initial axis y",value:.5},{name:"initial axis x",value:.25},{name:"mul",value:1},{name:"Smoothness",value:1},{name:"Speed X",value:1},{name:"Speed Y",value:1},{name:"Active",value:true},{name:"Allow Panning",value:true},{name:"Allow Zooming",value:true},{name:"Allow Rotation",value:true},{name:"restricted",value:true},{name:"Reset",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"556",objOut:"557"}]},{name:"radius",value:.05},{name:"Rot X",value:90},{name:"Rot Y",value:90}]},{objName:"Ops.Ui.VizTexture",id:"558",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"552",objOut:"558"}]},{name:"Info",value:"unknown"}]},{objName:"Ops.Gl.TextureEffects.RGBMath",id:"559",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Operation index",value:3},{name:"Operation",value:"c*x"},{name:"R Active",value:false},{name:"G Active",value:true},{name:"B Active",value:true},{name:"A Active",value:false},{name:"r",value:1.01},{name:"g",value:.99},{name:"b",value:.33},{name:"a",value:4.99},{name:"Mask",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"567",objOut:"559"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"560",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"563",objOut:"560"},{portIn:"exe",portOut:"trigger",objIn:"569",objOut:"560"},{portIn:"render",portOut:"trigger",objIn:"585",objOut:"560"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"561",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:false},{name:"Width",value:100},{name:"Height",value:100},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:true},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"560",objOut:"561"}]},{name:"texture_out",links:[{portIn:"Texture In",portOut:"texture_out",objIn:"562",objOut:"561"}]},{name:"Aspect Ratio",value:1}]},{objName:"Ops.Ui.VizTexture",id:"562",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Texture",portOut:"Texture Out",objIn:"555",objOut:"562"}]},{name:"Info",value:"8 x 8 8bit nearest repeat"}]},{objName:"Ops.Anim.SineAnim",id:"563",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:3.49},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",links:[{portIn:"exe",portOut:"Trigger out",objIn:"590",objOut:"563"}]},{name:"result",links:[{portIn:"b",portOut:"result",objIn:"567",objOut:"563"},{portIn:"Pos X",portOut:"result",objIn:"567",objOut:"563"},{portIn:"value",portOut:"result",objIn:"568",objOut:"563"},{portIn:"Y",portOut:"result",objIn:"586",objOut:"563"}]}]},{objName:"Ops.Gl.Render2Texture",id:"564",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"use viewport size",value:true},{name:"texture width",value:640},{name:"texture height",value:320},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"557",objOut:"564"}]},{name:"texture",links:[{portIn:"Image",portOut:"texture",objIn:"591",objOut:"564"}]},{name:"textureDepth"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"565",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image",value:0},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"566",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"565",objOut:"566"}]},{name:"texture_out"},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.CircleTexture_v3",id:"567",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Amount",value:1},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"lighten"},{name:"size",value:1},{name:"Inner"},{name:"Stretch",value:.47},{name:"Pos X"},{name:"Pos Y"},{name:"fallOff index",value:0},{name:"fallOff",value:"SmoothStep"},{name:"fade Out",value:1},{name:"warn overflow",value:true},{name:"r",value:0},{name:"g",value:1},{name:"b"},{name:"a",value:1}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"572",objOut:"567"}]}]},{objName:"Ops.Math.Sine",id:"568",uiAttribs:{subPatch:0},portsIn:[{name:"value"},{name:"phase",value:0},{name:"frequency",value:6.99},{name:"amplitude",value:.45},{name:"asine",value:true}],portsOut:[{name:"result",links:[{portIn:"Pos Y",portOut:"result",objIn:"567",objOut:"568"}]}]},{objName:"Ops.Anim.SineAnim",id:"569",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:1.06},{name:"frequency",value:3.49},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"Inner",portOut:"result",objIn:"567",objOut:"569"}]}]},{objName:"Ops.Ui.Area",id:"570",uiAttribs:{subPatch:0},portsIn:[{name:"Title",value:""}],portsOut:[]},{objName:"Ops.Gl.ShaderEffects.VertexWobble_v2",id:"571",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Source index",value:0},{name:"Source",value:"Z + Time"},{name:"amount",value:.175},{name:"Time"},{name:"Scale",value:2.94},{name:"axisX",value:true},{name:"axisY",value:true},{name:"axisZ",value:true},{name:"Range index",value:0},{name:"Range",value:"-1 to 1"},{name:"Area index",value:0},{name:"Area",value:"Sphere"},{name:"Size",value:5.08},{name:"Falloff",value:0},{name:"x",value:0},{name:"y",value:6.82},{name:"z",value:0},{name:"WorldSpace",value:true},{name:"Invert",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"555",objOut:"571"}]}]},{objName:"Ops.Gl.TextureEffects.Plasma",id:"572",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"screen"},{name:"Amount"},{name:"Width",value:20},{name:"Height",value:20},{name:"Mul",value:-3.01},{name:"offset X",value:0},{name:"offset Y"},{name:"Time",value:1.7},{name:"Greyscale",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Sidebar.Slider_v3",id:"573",uiAttribs:{subPatch:0},portsIn:[{name:"link"},{name:"Text",value:"Slider"},{name:"Min",value:0},{name:"Max",value:1},{name:"Step",value:1e-5},{name:"Suffix",value:""},{name:"Grey Out",value:false},{name:"Visible",value:true},{name:"Input",value:.5},{name:"Set Default",value:0},{name:"Reset",value:0},{name:"Default",value:.5}],portsOut:[{name:"childs"},{name:"Result",links:[{portIn:"Amount",portOut:"Result",objIn:"572",objOut:"573"}]}]},{objName:"Ops.Gl.GLTF.GltfScene_v3",id:"574",uiAttribs:{subPatch:0},portsIn:[{name:"data",value:""},{name:"Render"},{name:"glb File",value:"assets/62529a263107bab411532090_solobedclr.glb",display:"file"},{name:"Draw",value:false},{name:"Camera index",value:0},{name:"Camera",value:"None"},{name:"Animation",value:""},{name:"Show Structure",value:0},{name:"Center index",value:1},{name:"Center",value:"XYZ"},{name:"Rescale",value:true},{name:"Rescale Size",value:.43},{name:"Time",value:0},{name:"Sync to timeline",value:false},{name:"Loop",value:true},{name:"Normals Format index",value:0},{name:"Normals Format",value:"XYZ"},{name:"Vertices Format index",value:0},{name:"Vertices Format",value:"XYZ"},{name:"Calc Normals",value:false},{name:"Materials",value:0},{name:"Hide Nodes",value:0},{name:"Use Material Properties",value:false},{name:"Active",value:true}],portsOut:[{name:"Render Before",value:0},{name:"Next",links:[{portIn:"Render",portOut:"Next",objIn:"575",objOut:"574"},{portIn:"Render",portOut:"Next",objIn:"576",objOut:"574"},{portIn:"Render",portOut:"Next",objIn:"577",objOut:"574"},{portIn:"Render",portOut:"Next",objIn:"578",objOut:"574"},{portIn:"render",portOut:"Next",objIn:"581",objOut:"574"}]},{name:"Generator",value:"Microsoft GLTF Exporter 2.4.2.17"},{name:"GLTF Version",value:2},{name:"GLTF Extensions Used"},{name:"Anim Length",value:0},{name:"Anim Time",value:0},{name:"Json"},{name:"Anims"},{name:"BoundingPoints"},{name:"Bounds"},{name:"Finished",value:0},{name:"Loading",value:false}]},{objName:"Ops.Gl.GLTF.GltfTexture",id:"575",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Name",value:"5"},{name:"Filter index",value:2},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:2},{name:"Wrap",value:"clamp to edge"},{name:"Anisotropic index",value:0},{name:"Anisotropic",value:0},{name:"Flip",value:false},{name:"Pre Multiplied Alpha",value:false}],portsOut:[{name:"Texture",links:[{portIn:"Diffuse Texture",portOut:"Texture",objIn:"580",objOut:"575"}]},{name:"Width",value:2048},{name:"Height",value:2048},{name:"Type",value:"image/png"},{name:"Found",value:true}]},{objName:"Ops.Gl.GLTF.GltfTexture",id:"576",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Name",value:"6"},{name:"Filter index",value:2},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:2},{name:"Wrap",value:"clamp to edge"},{name:"Anisotropic index",value:0},{name:"Anisotropic",value:0},{name:"Flip",value:false},{name:"Pre Multiplied Alpha",value:false}],portsOut:[{name:"Texture",links:[{portIn:"Normal Map",portOut:"Texture",objIn:"580",objOut:"576"}]},{name:"Width",value:2048},{name:"Height",value:2048},{name:"Type",value:"image/png"},{name:"Found",value:true}]},{objName:"Ops.Gl.GLTF.GltfTexture",id:"577",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Name",value:"7"},{name:"Filter index",value:2},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:2},{name:"Wrap",value:"clamp to edge"},{name:"Anisotropic index",value:0},{name:"Anisotropic",value:0},{name:"Flip",value:false},{name:"Pre Multiplied Alpha",value:false}],portsOut:[{name:"Texture",links:[{portIn:"Emissive Texture",portOut:"Texture",objIn:"580",objOut:"577"}]},{name:"Width",value:2048},{name:"Height",value:2048},{name:"Type",value:"image/png"},{name:"Found",value:true}]},{objName:"Ops.Gl.GLTF.GltfTexture",id:"578",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Name",value:"8"},{name:"Filter index",value:2},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:2},{name:"Wrap",value:"clamp to edge"},{name:"Anisotropic index",value:0},{name:"Anisotropic",value:0},{name:"Flip",value:false},{name:"Pre Multiplied Alpha",value:false}],portsOut:[{name:"Texture",links:[{portIn:"AO Texture",portOut:"Texture",objIn:"580",objOut:"578"}]},{name:"Width",value:2048},{name:"Height",value:2048},{name:"Type",value:"image/png"},{name:"Found",value:true}]},{objName:"Ops.Gl.GLTF.GltfNode_v2",id:"579",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Node Name",value:"node_id7"},{name:"Transformation",value:true},{name:"Draw Mesh",value:true},{name:"Draw Childs",value:true},{name:"Ignore Material",value:true},{name:"Use Scene Time",value:true},{name:"Time",value:0}],portsOut:[{name:"Next",value:0},{name:"Geometry"},{name:"Found",value:true}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"580",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"R",value:.09777684147175592},{name:"G",value:.9326875127396004},{name:"B",value:.34678087158375237},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:false},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:1},{name:"Fresnel G",value:1},{name:"Fresnel B",value:1},{name:"Emissive Active",value:false},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.8605483130899327},{name:"Emissive G",value:.6038060672934462},{name:"Emissive B",value:.8181495901591669},{name:"Shininess",value:4},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Blinn"},{name:"Energy Conservation",value:false},{name:"Double Sided Material",value:false},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture"},{name:"Specular Texture",value:0},{name:"Normal Map"},{name:"AO Texture"},{name:"Emissive Texture"},{name:"Emissive Mask",value:0},{name:"Opacity Texture",value:0},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:false}],portsOut:[{name:"Trigger Out",links:[{portIn:"Render",portOut:"Trigger Out",objIn:"574",objOut:"580"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"582",objOut:"580"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"581",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:0},{name:"scale",value:.94},{name:"rotX"},{name:"rotY"},{name:"rotZ"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"579",objOut:"581"}]}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"582",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Floating Point",value:false},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture"},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Ui.VizTexture",id:"583",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"585",objOut:"583"},{portIn:"Texture Colorize",portOut:"Texture Out",objIn:"556",objOut:"583"},{portIn:"texture",portOut:"Texture Out",objIn:"556",objOut:"583"},{portIn:"Diffuse Texture",portOut:"Texture Out",objIn:"597",objOut:"583"}]},{name:"Info",value:"8 x 8 8bit nearest repeat"}]},{objName:"Ops.Gl.Render2Texture",id:"584",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"use viewport size",value:false},{name:"texture width",value:642},{name:"texture height",value:410},{name:"Auto Aspect",value:true},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",links:[{portIn:"Trigger In",portOut:"trigger",objIn:"586",objOut:"584"}]},{name:"texture",links:[{portIn:"Texture In",portOut:"texture",objIn:"583",objOut:"584"}]},{name:"textureDepth"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"585",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"screen"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"559",objOut:"585"}]}]},{objName:"Ops.Gl.Phong.PointLight_v5",id:"586",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"Cast Light",value:true},{name:"Intensity",value:.96},{name:"Radius",value:-.6},{name:"X"},{name:"Y"},{name:"Z",value:.75},{name:"R",value:.8},{name:"G",value:.8},{name:"B",value:.8},{name:"Specular R",value:1},{name:"Specular G",value:1},{name:"Specular B",value:1},{name:"Falloff",value:.5},{name:"Cast Shadow",value:false},{name:"Rendering Active",value:true},{name:"Map Size index",value:1},{name:"Map Size",value:512},{name:"Shadow Strength",value:1},{name:"Near",value:.1},{name:"Far",value:30},{name:"Bias",value:.004},{name:"Polygon Offset",value:0}],portsOut:[{name:"Trigger Out",links:[{portIn:"Trigger In",portOut:"Trigger Out",objIn:"580",objOut:"586"}]},{name:"Cubemap"},{name:"World Position X",value:-.242018923163414},{name:"World Position Y",value:.9922983050346375},{name:"World Position Z",value:.75}]},{objName:"Ops.Anim.Timer_v2",id:"587",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:2.22},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"rotX",portOut:"Time",objIn:"581",objOut:"587"}]}]},{objName:"Ops.Anim.Timer_v2",id:"588",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:1.57},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"rotY",portOut:"Time",objIn:"581",objOut:"588"}]}]},{objName:"Ops.Anim.Timer_v2",id:"589",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:4.5},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"rotZ",portOut:"Time",objIn:"581",objOut:"589"}]}]},{objName:"Ops.Anim.SineAnim",id:"590",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:6.49},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"X",portOut:"result",objIn:"586",objOut:"590"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"591",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"lighten"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"596",objOut:"591"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"592",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:100},{name:"Height",value:100},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"591",objOut:"592"}]},{name:"texture_out",links:[{portIn:"Texture 1",portOut:"texture_out",objIn:"660",objOut:"592"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.ShaderEffects.FresnelGlow",id:"593",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"Active",value:true},{name:"R",value:.858779067245828},{name:"G",value:.27862694805985},{name:"B",value:.8866958678213337},{name:"Fresnel Intensity",value:1},{name:"Fresnel Exponent",value:2.09}],portsOut:[{name:"Trigger Out",links:[{portIn:"Render",portOut:"Trigger Out",objIn:"595",objOut:"593"}]}]},{objName:"Ops.Gl.ShaderEffects.VertexDisplacementMap_v4",id:"594",uiAttribs:{subPatch:0},portsIn:[{name:"Render",value:null},{name:"Extrude",value:73.02},{name:"Mode index",value:0},{name:"Mode",value:"Norm"},{name:"Axis index",value:0},{name:"Axis",value:"X"},{name:"Coordinates index",value:0},{name:"Coordinates",value:"Tex Coords"},{name:"Texture",value:null},{name:"Channel index",value:0},{name:"Channel",value:"Luminance"},{name:"Flip index",value:0},{name:"Flip",value:"None"},{name:"Range index",value:0},{name:"Range",value:"0-1"},{name:"Offset X",value:6.71},{name:"Offset Y",value:0},{name:"Scale",value:1},{name:"Calc Normals",value:false},{name:"Discard Zero Values",value:false},{name:"colorize",value:false},{name:"Colorize Min",value:0},{name:"Colorize Max",value:1}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.EdgeDetection_v3",id:"595",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"add"},{name:"Amount",value:1},{name:"Strength",value:8.84},{name:"Width",value:.496},{name:"Mul Color",value:.45}],portsOut:[{name:"Trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.Blur",id:"596",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"amount",value:2.11},{name:"direction index",value:0},{name:"direction",value:"vertical"},{name:"Fast",value:true},{name:"mask",value:0}],portsOut:[{name:"trigger",links:[{portIn:"Trigger In",portOut:"trigger",objIn:"593",objOut:"596"}]}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"597",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"R",value:.6953748801608595},{name:"G",value:.4153793785326112},{name:"B",value:.8931188762086044},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:false},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:1},{name:"Fresnel G",value:1},{name:"Fresnel B",value:1},{name:"Emissive Active",value:false},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.706646448004971},{name:"Emissive G",value:.9558982489000367},{name:"Emissive B",value:.6888884182692017},{name:"Shininess",value:4},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Blinn"},{name:"Energy Conservation",value:false},{name:"Double Sided Material",value:false},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture"},{name:"Specular Texture",value:0},{name:"Normal Map",value:0},{name:"AO Texture",value:0},{name:"Emissive Texture",value:0},{name:"Emissive Mask",value:0},{name:"Opacity Texture",value:0},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:false}],portsOut:[{name:"Trigger Out",links:[{portIn:"Render",portOut:"Trigger Out",objIn:"598",objOut:"597"}]},{name:"Shader"}]},{objName:"Ops.Gl.GLTF.GltfScene_v3",id:"598",uiAttribs:{subPatch:0},portsIn:[{name:"data",value:""},{name:"Render"},{name:"glb File",value:"assets/62529a263107bab411532090_solobedclr.glb",display:"file"},{name:"Draw",value:false},{name:"Camera index",value:0},{name:"Camera",value:"None"},{name:"Animation",value:""},{name:"Show Structure",value:0},{name:"Center index",value:1},{name:"Center",value:"XYZ"},{name:"Rescale",value:true},{name:"Rescale Size",value:.43},{name:"Time",value:0},{name:"Sync to timeline",value:false},{name:"Loop",value:true},{name:"Normals Format index",value:0},{name:"Normals Format",value:"XYZ"},{name:"Vertices Format index",value:0},{name:"Vertices Format",value:"XYZ"},{name:"Calc Normals",value:false},{name:"Materials",value:0},{name:"Hide Nodes",value:0},{name:"Use Material Properties",value:false},{name:"Active",value:true}],portsOut:[{name:"Render Before",value:0},{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"600",objOut:"598"}]},{name:"Generator",value:"Microsoft GLTF Exporter 2.4.2.17"},{name:"GLTF Version",value:2},{name:"GLTF Extensions Used"},{name:"Anim Length",value:0},{name:"Anim Time",value:0},{name:"Json"},{name:"Anims"},{name:"BoundingPoints"},{name:"Bounds"},{name:"Finished",value:0},{name:"Loading",value:false}]},{objName:"Ops.Gl.GLTF.GltfNode_v2",id:"599",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Node Name",value:"node_id7"},{name:"Transformation",value:true},{name:"Draw Mesh",value:true},{name:"Draw Childs",value:true},{name:"Ignore Material",value:true},{name:"Use Scene Time",value:true},{name:"Time",value:0}],portsOut:[{name:"Next",value:0},{name:"Geometry"},{name:"Found",value:true}]},{objName:"Ops.Gl.Matrix.Transform",id:"600",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:.91},{name:"posY",value:.08},{name:"posZ",value:.51},{name:"scale",value:.3},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"599",objOut:"600"}]}]},{objName:"Ops.Sequence",id:"601",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"602",objOut:"601"}]},{name:"trigger 1",value:0},{name:"trigger 2",links:[{portIn:"Render",portOut:"trigger 2",objIn:"608",objOut:"601"}]},{name:"trigger 3",links:[{portIn:"render",portOut:"trigger 3",objIn:"621",objOut:"601"}]},{name:"trigger 4",links:[{portIn:"Render",portOut:"trigger 4",objIn:"640",objOut:"601"}]},{name:"trigger 5",links:[{portIn:"Render",portOut:"trigger 5",objIn:"618",objOut:"601"}]},{name:"trigger 6",links:[{portIn:"render",portOut:"trigger 6",objIn:"642",objOut:"601"}]},{name:"trigger 7",links:[{portIn:"Render",portOut:"trigger 7",objIn:"623",objOut:"601"}]},{name:"trigger 8",links:[{portIn:"Render",portOut:"trigger 8",objIn:"650",objOut:"601"}]},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"602",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI float iTime;\nUNI vec2 iResolution;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nconst float p_o51744_r = 0.340000000;\nvec2 o54249_input_sdf(vec3 p, float _seed_variation_) {\nfloat o51744_0_1_sdf3d = length((p))-p_o51744_r;\n\nreturn vec2(o51744_0_1_sdf3d, 0.0);\n}\nvec2 raymarch_o54249(vec2 uv, float _seed_variation_) {\n\tvec3 ro = vec3(uv-vec2(0.5), 1.0);\n\tvec3 rd = vec3(0.0, 0.0, -1.0);\n\tfloat dO = 0.0;\n\tfloat c = 0.0;\n    for (int i=0; i < 100; i++) {\n    \tvec3 p = ro + rd*dO;\n        vec2 dS = o54249_input_sdf(p, _seed_variation_);\n        dO += dS.x;\n\n        if (dO >= 1.0) {\n\t\t\tbreak;\n\t\t} else if (dS.x < 0.0001) {\n\t\t\tc = dS.y;\n\t\t\tbreak;\n\t\t}\n    }\n    \n    return vec2(dO, c);\n}\n\nvec3 normal_o54249(vec3 p, float _seed_variation_) {\n\tif (p.z <= 0.0) {\n\t\treturn vec3(0.0, 0.0, 1.0);\n\t}\n\n\tfloat d = o54249_input_sdf(p, _seed_variation_).x;\n    float e = .001;\n    \n    vec3 n = d - vec3(\n        o54249_input_sdf(p-vec3(e, 0.0, 0.0), _seed_variation_).x,\n        o54249_input_sdf(p-vec3(0.0, e, 0.0), _seed_variation_).x,\n        o54249_input_sdf(p-vec3(0.0, 0.0, e), _seed_variation_).x);\n    \n    return vec3(-1.0, -1.0, -1.0)*normalize(n);\n}\n\nconst float p_o16804_gradient_0_pos = 0.000000000;\nconst float p_o16804_gradient_0_r = 1.000000000;\nconst float p_o16804_gradient_0_g = 0.000000000;\nconst float p_o16804_gradient_0_b = 0.000000000;\nconst float p_o16804_gradient_0_a = 1.000000000;\nconst float p_o16804_gradient_1_pos = 1.000000000;\nconst float p_o16804_gradient_1_r = 0.000000000;\nconst float p_o16804_gradient_1_g = 1.000000000;\nconst float p_o16804_gradient_1_b = 0.085937500;\nconst float p_o16804_gradient_1_a = 1.000000000;\nvec4 o16804_gradient_gradient_fct(float x) {\n  if (x < 0.5*(p_o16804_gradient_0_pos+p_o16804_gradient_1_pos)) {\n    return vec4(p_o16804_gradient_0_r,p_o16804_gradient_0_g,p_o16804_gradient_0_b,p_o16804_gradient_0_a);\n  }\n  return vec4(p_o16804_gradient_1_r,p_o16804_gradient_1_g,p_o16804_gradient_1_b,p_o16804_gradient_1_a);\n}\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o54249_0_d = raymarch_o54249((UV), _seed_variation_);\nfloat o54249_0_1_f = 1.0-o54249_0_d.x;\nvec4 o16804_0_1_rgba = o16804_gradient_gradient_fct(fract(((iTime ))*0.15915494309*atan(((vec4(vec3(o54249_0_1_f), 0.0)).xy+vec2(0.5)).y-0.5, ((vec4(vec3(o54249_0_1_f), 0.0)).xy+vec2(0.5)).x-0.5)));\nvec3 o63415_0_1_tex3d = ((o16804_0_1_rgba).rgb);\nvec3 o49538_0_1_rgb = o63415_0_1_tex3d;\ngl_FragColor = vec4(o49538_0_1_rgb, 1.0);\n}"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iTime",value:3},{name:"iResolution X",value:1},{name:"iResolution Y",value:1}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"603",objOut:"602"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"603",objOut:"602"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"603",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Floating Point",value:false},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"615",objOut:"603"},{portIn:"RGBE Texture",portOut:"Texture",objIn:"610",objOut:"603"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"604",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:4.49},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"val",portOut:"Time",objIn:"606",objOut:"604"},{portIn:"Time",portOut:"Time",objIn:"628",objOut:"604"},{portIn:"offset Y",portOut:"Time",objIn:"629",objOut:"604"}]}]},{objName:"Ops.Value.TriggerOnChangeNumber",id:"605",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Next",links:[{portIn:"Reset",portOut:"Next",objIn:"604",objOut:"605"}]},{name:"Number",value:50}]},{objName:"Ops.Math.Clamp",id:"606",uiAttribs:{subPatch:0},portsIn:[{name:"val"},{name:"min",value:50},{name:"max",value:51},{name:"ignore outside values",value:false}],portsOut:[{name:"result",links:[{portIn:"Value",portOut:"result",objIn:"605",objOut:"606"}]}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"607",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"Scale index",value:0},{name:"Scale",value:"Fit"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture",value:0}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"608",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"609",objOut:"608"},{portIn:"Execute",portOut:"Next",objIn:"610",objOut:"608"}]},{name:"texture_out",links:[{portIn:"Texture In",portOut:"texture_out",objIn:"611",objOut:"608"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"609",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Textures.TextureToCoordinateGrid",id:"610",uiAttribs:{subPatch:0},portsIn:[{name:"Execute"},{name:"RGBE Texture"},{name:"Aspect",value:-1.99},{name:"Threshold",value:.014}],portsOut:[{name:"Next",value:0},{name:"HDR Texture",links:[{portIn:"Image",portOut:"HDR Texture",objIn:"617",objOut:"610"}]}]},{objName:"Ops.Ui.VizTexture",id:"611",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Texture Point Size",portOut:"Texture Out",objIn:"613",objOut:"611"}]},{name:"Info",value:"8 x 8 8bit nearest repeat"}]},{objName:"Ops.Gl.Meshes.PointCloudFromTexture",id:"612",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Num Points",value:0},{name:"Axis index",value:0},{name:"Axis",value:"XYZ"},{name:"Texture"},{name:"Point Size",value:null},{name:"Normalize",value:false},{name:"Remove Point at 0",value:false}],portsOut:[{name:"Trigger",links:[{portIn:"Trigger In",portOut:"Trigger",objIn:"655",objOut:"612"}]},{name:"Total Points",value:1e4}]},{objName:"Ops.Gl.Shader.PointMaterial_v4",id:"613",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"PointSize",value:10.16},{name:"Size in Pixels",value:true},{name:"Random Size",value:.33},{name:"Round",value:true},{name:"Round Antialias",value:false},{name:"Scale by Distance",value:false},{name:"r",value:.19622499999999998},{name:"g",value:.165234375},{name:"b",value:.94},{name:"a",value:1},{name:"Vertex Colors",value:false},{name:"texture"},{name:"Colorize Texture",value:false},{name:"Texture Mask",value:0},{name:"Mask Channel index",value:0},{name:"Mask Channel",value:"A"},{name:"Texture Colorize"},{name:"Colorize Randomize",value:true},{name:"Texture Opacity",value:0},{name:"Texture Point Size"},{name:"Point Size Channel index",value:0},{name:"Point Size Channel",value:"R"},{name:"Texture Point Size Mul",value:1},{name:"Map Size 0 index",value:0},{name:"Map Size 0",value:"Black"},{name:"Flip Texture",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"628",objOut:"613"}]},{name:"shader"}]},{objName:"Ops.Gl.Matrix.OrbitControls",id:"614",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"min distance",value:.05},{name:"max distance",value:99999},{name:"min rot y",value:0},{name:"max rot y",value:0},{name:"initial radius",value:.05},{name:"initial axis y",value:.5},{name:"initial axis x",value:.25},{name:"mul",value:1},{name:"Smoothness",value:1},{name:"Speed X",value:1},{name:"Speed Y",value:1},{name:"Active",value:true},{name:"Allow Panning",value:true},{name:"Allow Zooming",value:true},{name:"Allow Rotation",value:true},{name:"restricted",value:true},{name:"Reset",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"613",objOut:"614"}]},{name:"radius",value:.05},{name:"Rot X",value:90},{name:"Rot Y",value:90}]},{objName:"Ops.Ui.VizTexture",id:"615",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"609",objOut:"615"}]},{name:"Info",value:"unknown"}]},{objName:"Ops.Gl.TextureEffects.RGBMath",id:"616",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Operation index",value:3},{name:"Operation",value:"c*x"},{name:"R Active",value:false},{name:"G Active",value:true},{name:"B Active",value:true},{name:"A Active",value:false},{name:"r",value:1.01},{name:"g",value:.99},{name:"b",value:.33},{name:"a",value:4.99},{name:"Mask",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"624",objOut:"616"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"617",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"exe",portOut:"trigger",objIn:"620",objOut:"617"},{portIn:"exe",portOut:"trigger",objIn:"626",objOut:"617"},{portIn:"render",portOut:"trigger",objIn:"643",objOut:"617"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"618",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:false},{name:"Width",value:100},{name:"Height",value:100},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:true},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"617",objOut:"618"}]},{name:"texture_out",links:[{portIn:"Texture In",portOut:"texture_out",objIn:"619",objOut:"618"}]},{name:"Aspect Ratio",value:1}]},{objName:"Ops.Ui.VizTexture",id:"619",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Texture",portOut:"Texture Out",objIn:"612",objOut:"619"}]},{name:"Info",value:"8 x 8 8bit nearest repeat"}]},{objName:"Ops.Anim.SineAnim",id:"620",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:3.49},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",links:[{portIn:"exe",portOut:"Trigger out",objIn:"648",objOut:"620"}]},{name:"result",links:[{portIn:"b",portOut:"result",objIn:"624",objOut:"620"},{portIn:"Pos X",portOut:"result",objIn:"624",objOut:"620"},{portIn:"value",portOut:"result",objIn:"625",objOut:"620"},{portIn:"Y",portOut:"result",objIn:"644",objOut:"620"}]}]},{objName:"Ops.Gl.Render2Texture",id:"621",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"use viewport size",value:false},{name:"texture width",value:642},{name:"texture height",value:410},{name:"Auto Aspect",value:true},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"663",objOut:"621"}]},{name:"texture",links:[{portIn:"Image",portOut:"texture",objIn:"649",objOut:"621"}]},{name:"textureDepth"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"622",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image",value:0},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"623",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"622",objOut:"623"}]},{name:"texture_out"},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.CircleTexture_v3",id:"624",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Amount",value:1},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"exclusion"},{name:"size",value:1},{name:"Inner"},{name:"Stretch",value:.47},{name:"Pos X"},{name:"Pos Y"},{name:"fallOff index",value:0},{name:"fallOff",value:"SmoothStep"},{name:"fade Out",value:1},{name:"warn overflow",value:true},{name:"r",value:0},{name:"g",value:1},{name:"b"},{name:"a",value:1}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"629",objOut:"624"}]}]},{objName:"Ops.Math.Sine",id:"625",uiAttribs:{subPatch:0},portsIn:[{name:"value"},{name:"phase",value:0},{name:"frequency",value:6.99},{name:"amplitude",value:.45},{name:"asine",value:true}],portsOut:[{name:"result",links:[{portIn:"Pos Y",portOut:"result",objIn:"624",objOut:"625"}]}]},{objName:"Ops.Anim.SineAnim",id:"626",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:1.06},{name:"frequency",value:3.49},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"Inner",portOut:"result",objIn:"624",objOut:"626"}]}]},{objName:"Ops.Ui.Area",id:"627",uiAttribs:{subPatch:0},portsIn:[{name:"Title",value:""}],portsOut:[]},{objName:"Ops.Gl.ShaderEffects.VertexWobble_v2",id:"628",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Source index",value:0},{name:"Source",value:"Z + Time"},{name:"amount",value:.175},{name:"Time"},{name:"Scale",value:2.94},{name:"axisX",value:true},{name:"axisY",value:true},{name:"axisZ",value:true},{name:"Range index",value:0},{name:"Range",value:"-1 to 1"},{name:"Area index",value:0},{name:"Area",value:"Sphere"},{name:"Size",value:5.08},{name:"Falloff",value:0},{name:"x",value:0},{name:"y",value:6.82},{name:"z",value:0},{name:"WorldSpace",value:true},{name:"Invert",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"612",objOut:"628"}]}]},{objName:"Ops.Gl.TextureEffects.Plasma",id:"629",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"exclusion"},{name:"Amount"},{name:"Width",value:20},{name:"Height",value:20},{name:"Mul",value:-3.01},{name:"offset X",value:0},{name:"offset Y"},{name:"Time",value:1.7},{name:"Greyscale",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Sidebar.Sidebar",id:"630",uiAttribs:{subPatch:0},portsIn:[{name:"Visible",value:true},{name:"Opacity",value:.174},{name:"Default Minimized",value:false},{name:"Minimized Opacity",value:.5},{name:"Show undo button",value:false},{name:"Show Minimize",value:true},{name:"Title",value:"Sidebar"},{name:"Side",value:true}],portsOut:[{name:"childs",links:[{portIn:"link",portOut:"childs",objIn:"631",objOut:"630"}]},{name:"Opfened",value:false}]},{objName:"Ops.Sidebar.Slider_v3",id:"631",uiAttribs:{subPatch:0},portsIn:[{name:"link"},{name:"Text",value:"Slider"},{name:"Min",value:0},{name:"Max",value:1},{name:"Step",value:1e-5},{name:"Suffix",value:""},{name:"Grey Out",value:false},{name:"Visible",value:true},{name:"Input",value:.5},{name:"Set Default",value:0},{name:"Reset",value:0},{name:"Default",value:.5}],portsOut:[{name:"childs",links:[{portIn:"link",portOut:"childs",objIn:"573",objOut:"631"}]},{name:"Result",links:[{portIn:"Amount",portOut:"Result",objIn:"629",objOut:"631"}]}]},{objName:"Ops.Gl.GLTF.GltfScene_v3",id:"632",uiAttribs:{subPatch:0},portsIn:[{name:"data",value:""},{name:"Render"},{name:"glb File",value:"assets/62529a263107bab411532090_solobedclr.glb",display:"file"},{name:"Draw",value:false},{name:"Camera index",value:0},{name:"Camera",value:"None"},{name:"Animation",value:""},{name:"Show Structure",value:0},{name:"Center index",value:1},{name:"Center",value:"XYZ"},{name:"Rescale",value:true},{name:"Rescale Size",value:.43},{name:"Time",value:0},{name:"Sync to timeline",value:false},{name:"Loop",value:true},{name:"Normals Format index",value:0},{name:"Normals Format",value:"XYZ"},{name:"Vertices Format index",value:0},{name:"Vertices Format",value:"XYZ"},{name:"Calc Normals",value:false},{name:"Materials",value:0},{name:"Hide Nodes",value:0},{name:"Use Material Properties",value:false},{name:"Active",value:true}],portsOut:[{name:"Render Before",value:0},{name:"Next",links:[{portIn:"Render",portOut:"Next",objIn:"633",objOut:"632"},{portIn:"Render",portOut:"Next",objIn:"634",objOut:"632"},{portIn:"Render",portOut:"Next",objIn:"635",objOut:"632"},{portIn:"Render",portOut:"Next",objIn:"636",objOut:"632"},{portIn:"render",portOut:"Next",objIn:"639",objOut:"632"}]},{name:"Generator",value:"Microsoft GLTF Exporter 2.4.2.17"},{name:"GLTF Version",value:2},{name:"GLTF Extensions Used"},{name:"Anim Length",value:0},{name:"Anim Time",value:0},{name:"Json"},{name:"Anims"},{name:"BoundingPoints"},{name:"Bounds"},{name:"Finished",value:0},{name:"Loading",value:false}]},{objName:"Ops.Gl.GLTF.GltfTexture",id:"633",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Name",value:"5"},{name:"Filter index",value:2},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:2},{name:"Wrap",value:"clamp to edge"},{name:"Anisotropic index",value:0},{name:"Anisotropic",value:0},{name:"Flip",value:false},{name:"Pre Multiplied Alpha",value:false}],portsOut:[{name:"Texture",links:[{portIn:"Diffuse Texture",portOut:"Texture",objIn:"638",objOut:"633"}]},{name:"Width",value:2048},{name:"Height",value:2048},{name:"Type",value:"image/png"},{name:"Found",value:true}]},{objName:"Ops.Gl.GLTF.GltfTexture",id:"634",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Name",value:"6"},{name:"Filter index",value:2},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:2},{name:"Wrap",value:"clamp to edge"},{name:"Anisotropic index",value:0},{name:"Anisotropic",value:0},{name:"Flip",value:false},{name:"Pre Multiplied Alpha",value:false}],portsOut:[{name:"Texture",links:[{portIn:"Normal Map",portOut:"Texture",objIn:"638",objOut:"634"}]},{name:"Width",value:2048},{name:"Height",value:2048},{name:"Type",value:"image/png"},{name:"Found",value:true}]},{objName:"Ops.Gl.GLTF.GltfTexture",id:"635",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Name",value:"7"},{name:"Filter index",value:2},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:2},{name:"Wrap",value:"clamp to edge"},{name:"Anisotropic index",value:0},{name:"Anisotropic",value:0},{name:"Flip",value:false},{name:"Pre Multiplied Alpha",value:false}],portsOut:[{name:"Texture",links:[{portIn:"Emissive Texture",portOut:"Texture",objIn:"638",objOut:"635"}]},{name:"Width",value:2048},{name:"Height",value:2048},{name:"Type",value:"image/png"},{name:"Found",value:true}]},{objName:"Ops.Gl.GLTF.GltfTexture",id:"636",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Name",value:"8"},{name:"Filter index",value:2},{name:"Filter",value:"mipmap"},{name:"Wrap index",value:2},{name:"Wrap",value:"clamp to edge"},{name:"Anisotropic index",value:0},{name:"Anisotropic",value:0},{name:"Flip",value:false},{name:"Pre Multiplied Alpha",value:false}],portsOut:[{name:"Texture",links:[{portIn:"AO Texture",portOut:"Texture",objIn:"638",objOut:"636"}]},{name:"Width",value:2048},{name:"Height",value:2048},{name:"Type",value:"image/png"},{name:"Found",value:true}]},{objName:"Ops.Gl.GLTF.GltfNode_v2",id:"637",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Node Name",value:"node_id7"},{name:"Transformation",value:true},{name:"Draw Mesh",value:true},{name:"Draw Childs",value:true},{name:"Ignore Material",value:true},{name:"Use Scene Time",value:true},{name:"Time",value:0}],portsOut:[{name:"Next",value:0},{name:"Geometry"},{name:"Found",value:true}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"638",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"R",value:.09777684147175592},{name:"G",value:.9326875127396004},{name:"B",value:.34678087158375237},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:false},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:1},{name:"Fresnel G",value:1},{name:"Fresnel B",value:1},{name:"Emissive Active",value:false},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.8605483130899327},{name:"Emissive G",value:.6038060672934462},{name:"Emissive B",value:.8181495901591669},{name:"Shininess",value:4},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Blinn"},{name:"Energy Conservation",value:false},{name:"Double Sided Material",value:false},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture"},{name:"Specular Texture",value:0},{name:"Normal Map"},{name:"AO Texture"},{name:"Emissive Texture"},{name:"Emissive Mask",value:0},{name:"Opacity Texture",value:0},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:false}],portsOut:[{name:"Trigger Out",links:[{portIn:"Render",portOut:"Trigger Out",objIn:"632",objOut:"638"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"640",objOut:"638"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"639",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:0},{name:"scale",value:.94},{name:"rotX"},{name:"rotY"},{name:"rotZ"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"637",objOut:"639"}]}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"640",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Floating Point",value:false},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture"},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Ui.VizTexture",id:"641",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"643",objOut:"641"},{portIn:"Texture Colorize",portOut:"Texture Out",objIn:"613",objOut:"641"},{portIn:"texture",portOut:"Texture Out",objIn:"613",objOut:"641"},{portIn:"Diffuse Texture",portOut:"Texture Out",objIn:"655",objOut:"641"}]},{name:"Info",value:"8 x 8 8bit nearest repeat"}]},{objName:"Ops.Gl.Render2Texture",id:"642",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"use viewport size",value:true},{name:"texture width",value:640},{name:"texture height",value:320},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",links:[{portIn:"Trigger In",portOut:"trigger",objIn:"644",objOut:"642"}]},{name:"texture",links:[{portIn:"Texture In",portOut:"texture",objIn:"641",objOut:"642"}]},{name:"textureDepth"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"643",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"add"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:true},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"616",objOut:"643"}]}]},{objName:"Ops.Gl.Phong.PointLight_v5",id:"644",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"Cast Light",value:true},{name:"Intensity",value:.96},{name:"Radius",value:-.6},{name:"X"},{name:"Y"},{name:"Z",value:.75},{name:"R",value:.8},{name:"G",value:.8},{name:"B",value:.8},{name:"Specular R",value:1},{name:"Specular G",value:1},{name:"Specular B",value:1},{name:"Falloff",value:.5},{name:"Cast Shadow",value:false},{name:"Rendering Active",value:true},{name:"Map Size index",value:1},{name:"Map Size",value:512},{name:"Shadow Strength",value:1},{name:"Near",value:.1},{name:"Far",value:30},{name:"Bias",value:.004},{name:"Polygon Offset",value:0}],portsOut:[{name:"Trigger Out",links:[{portIn:"Trigger In",portOut:"Trigger Out",objIn:"638",objOut:"644"}]},{name:"Cubemap"},{name:"World Position X",value:-.242018923163414},{name:"World Position Y",value:.9922983050346375},{name:"World Position Z",value:.75}]},{objName:"Ops.Anim.Timer_v2",id:"645",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:2.22},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"rotX",portOut:"Time",objIn:"639",objOut:"645"}]}]},{objName:"Ops.Anim.Timer_v2",id:"646",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:1.57},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"rotY",portOut:"Time",objIn:"639",objOut:"646"}]}]},{objName:"Ops.Anim.Timer_v2",id:"647",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:4.5},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"rotZ",portOut:"Time",objIn:"639",objOut:"647"}]}]},{objName:"Ops.Anim.SineAnim",id:"648",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:6.49},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"X",portOut:"result",objIn:"644",objOut:"648"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"649",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"lighten"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"654",objOut:"649"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"650",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"649",objOut:"650"}]},{name:"texture_out",links:[{portIn:"Texture 2",portOut:"texture_out",objIn:"660",objOut:"650"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.ShaderEffects.FresnelGlow",id:"651",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"Active",value:true},{name:"R",value:.858779067245828},{name:"G",value:.27862694805985},{name:"B",value:.8866958678213337},{name:"Fresnel Intensity",value:1},{name:"Fresnel Exponent",value:2.09}],portsOut:[{name:"Trigger Out",links:[{portIn:"Render",portOut:"Trigger Out",objIn:"653",objOut:"651"}]}]},{objName:"Ops.Gl.ShaderEffects.VertexDisplacementMap_v4",id:"652",uiAttribs:{subPatch:0},portsIn:[{name:"Render",value:null},{name:"Extrude",value:73.02},{name:"Mode index",value:0},{name:"Mode",value:"Norm"},{name:"Axis index",value:0},{name:"Axis",value:"X"},{name:"Coordinates index",value:0},{name:"Coordinates",value:"Tex Coords"},{name:"Texture",value:null},{name:"Channel index",value:0},{name:"Channel",value:"Luminance"},{name:"Flip index",value:0},{name:"Flip",value:"None"},{name:"Range index",value:0},{name:"Range",value:"0-1"},{name:"Offset X",value:6.71},{name:"Offset Y",value:0},{name:"Scale",value:1},{name:"Calc Normals",value:false},{name:"Discard Zero Values",value:false},{name:"colorize",value:false},{name:"Colorize Min",value:0},{name:"Colorize Max",value:1}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.EdgeDetection_v3",id:"653",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"add"},{name:"Amount",value:1},{name:"Strength",value:8.84},{name:"Width",value:.496},{name:"Mul Color",value:.45}],portsOut:[{name:"Trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.Blur",id:"654",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"amount",value:1.92},{name:"direction index",value:0},{name:"direction",value:"vertical"},{name:"Fast",value:true},{name:"mask",value:0}],portsOut:[{name:"trigger",links:[{portIn:"Trigger In",portOut:"trigger",objIn:"651",objOut:"654"}]}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"655",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"R",value:.6953748801608595},{name:"G",value:.4153793785326112},{name:"B",value:.8931188762086044},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:false},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:1},{name:"Fresnel G",value:1},{name:"Fresnel B",value:1},{name:"Emissive Active",value:false},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.706646448004971},{name:"Emissive G",value:.9558982489000367},{name:"Emissive B",value:.6888884182692017},{name:"Shininess",value:4},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Blinn"},{name:"Energy Conservation",value:false},{name:"Double Sided Material",value:false},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture"},{name:"Specular Texture",value:0},{name:"Normal Map",value:0},{name:"AO Texture",value:0},{name:"Emissive Texture",value:0},{name:"Emissive Mask",value:0},{name:"Opacity Texture",value:0},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:false}],portsOut:[{name:"Trigger Out",links:[{portIn:"Render",portOut:"Trigger Out",objIn:"656",objOut:"655"}]},{name:"Shader"}]},{objName:"Ops.Gl.GLTF.GltfScene_v3",id:"656",uiAttribs:{subPatch:0},portsIn:[{name:"data",value:""},{name:"Render"},{name:"glb File",value:"assets/62529a263107bab411532090_solobedclr.glb",display:"file"},{name:"Draw",value:false},{name:"Camera index",value:0},{name:"Camera",value:"None"},{name:"Animation",value:""},{name:"Show Structure",value:0},{name:"Center index",value:1},{name:"Center",value:"XYZ"},{name:"Rescale",value:true},{name:"Rescale Size",value:.43},{name:"Time",value:0},{name:"Sync to timeline",value:false},{name:"Loop",value:true},{name:"Normals Format index",value:0},{name:"Normals Format",value:"XYZ"},{name:"Vertices Format index",value:0},{name:"Vertices Format",value:"XYZ"},{name:"Calc Normals",value:false},{name:"Materials",value:0},{name:"Hide Nodes",value:0},{name:"Use Material Properties",value:false},{name:"Active",value:true}],portsOut:[{name:"Render Before",value:0},{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"658",objOut:"656"}]},{name:"Generator",value:"Microsoft GLTF Exporter 2.4.2.17"},{name:"GLTF Version",value:2},{name:"GLTF Extensions Used"},{name:"Anim Length",value:0},{name:"Anim Time",value:0},{name:"Json"},{name:"Anims"},{name:"BoundingPoints"},{name:"Bounds"},{name:"Finished",value:0},{name:"Loading",value:false}]},{objName:"Ops.Gl.GLTF.GltfNode_v2",id:"657",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Node Name",value:"node_id7"},{name:"Transformation",value:true},{name:"Draw Mesh",value:true},{name:"Draw Childs",value:true},{name:"Ignore Material",value:true},{name:"Use Scene Time",value:true},{name:"Time",value:0}],portsOut:[{name:"Next",value:0},{name:"Geometry"},{name:"Found",value:true}]},{objName:"Ops.Gl.Matrix.Transform",id:"658",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:.91},{name:"posY",value:.08},{name:"posZ",value:.51},{name:"scale",value:.3},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"657",objOut:"658"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"659",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:0},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image",value:0},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.MultiDrawImage",id:"660",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Mask Invert",value:false},{name:"Texture 1"},{name:"Blendmode 1 index",value:0},{name:"Blendmode 1",value:"normal"},{name:"Mask 1",value:0},{name:"Mask Source 1 index",value:0},{name:"Mask Source 1",value:"R"},{name:"Opacity 1 index",value:0},{name:"Opacity 1",value:"Normal"},{name:"Amount 1",value:1},{name:"Texture 2"},{name:"Blendmode 2 index",value:0},{name:"Blendmode 2",value:"add"},{name:"Mask 2",value:0},{name:"Mask Source 2 index",value:0},{name:"Mask Source 2",value:"R"},{name:"Opacity 2 index",value:0},{name:"Opacity 2",value:"Normal"},{name:"Amount 2",value:1},{name:"Texture 3"},{name:"Blendmode 3 index",value:0},{name:"Blendmode 3",value:"normal"},{name:"Mask 3",value:0},{name:"Mask Source 3 index",value:0},{name:"Mask Source 3",value:"R"},{name:"Opacity 3 index",value:0},{name:"Opacity 3",value:"Normal"},{name:"Amount 3",value:1},{name:"Texture 4"},{name:"Blendmode 4 index",value:0},{name:"Blendmode 4",value:"difference"},{name:"Mask 4",value:0},{name:"Mask Source 4 index",value:0},{name:"Mask Source 4",value:"R"},{name:"Opacity 4 index",value:0},{name:"Opacity 4",value:"Normal"},{name:"Amount 4",value:1},{name:"Texture 5",value:0},{name:"Blendmode 5 index",value:0},{name:"Blendmode 5",value:"normal"},{name:"Mask 5",value:0},{name:"Mask Source 5 index",value:0},{name:"Mask Source 5",value:"R"},{name:"Opacity 5 index",value:0},{name:"Opacity 5",value:"Normal"},{name:"Amount 5",value:1},{name:"Texture 6",value:0},{name:"Blendmode 6 index",value:0},{name:"Blendmode 6",value:"normal"},{name:"Mask 6",value:0},{name:"Mask Source 6 index",value:0},{name:"Mask Source 6",value:"R"},{name:"Opacity 6 index",value:0},{name:"Opacity 6",value:"Normal"},{name:"Amount 6",value:1},{name:"Texture 7",value:0},{name:"Blendmode 7 index",value:0},{name:"Blendmode 7",value:"normal"},{name:"Mask 7",value:0},{name:"Mask Source 7 index",value:0},{name:"Mask Source 7",value:"R"},{name:"Opacity 7 index",value:0},{name:"Opacity 7",value:"Normal"},{name:"Amount 7",value:1},{name:"Texture 8",value:0},{name:"Blendmode 8 index",value:0},{name:"Blendmode 8",value:"normal"},{name:"Mask 8",value:0},{name:"Mask Source 8 index",value:0},{name:"Mask Source 8",value:"R"},{name:"Opacity 8 index",value:0},{name:"Opacity 8",value:"Normal"},{name:"Amount 8",value:1}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"661",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"660",objOut:"661"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"550",objOut:"661"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Ui.VizTexture",id:"662",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out"},{name:"Info",value:""}]},{objName:"Ops.Gl.Matrix.Transform",id:"663",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:5.76},{name:"posY",value:8.66},{name:"posZ",value:2.08},{name:"scale"},{name:"rotX",value:0},{name:"rotY",value:-61.06},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"614",objOut:"663"}]}]},{objName:"Ops.Trigger.TimedSequence",id:"664",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"current"},{name:"overwriteTime",value:false},{name:"ignoreInSubPatch",value:false}],portsOut:[{name:"triggerAlways",links:[{portIn:"Render",portOut:"triggerAlways",objIn:"678",objOut:"664"},{portIn:"render",portOut:"triggerAlways",objIn:"691",objOut:"664"},{portIn:"render",portOut:"triggerAlways",objIn:"723",objOut:"664"},{portIn:"Render",portOut:"triggerAlways",objIn:"747",objOut:"664"}]},{name:"Names"},{name:"currentKeyTime",value:0},{name:"Current",value:1},{name:"trigger 0",value:0},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0},{name:"trigger 16",value:0},{name:"trigger 17",value:0},{name:"trigger 18",value:0},{name:"trigger 19",value:0},{name:"trigger 20",value:0},{name:"trigger 21",value:0},{name:"trigger 22",value:0},{name:"trigger 23",value:0},{name:"trigger 24",value:0},{name:"trigger 25",value:0},{name:"trigger 26",value:0},{name:"trigger 27",value:0},{name:"trigger 28",value:0},{name:"trigger 29",value:0},{name:"trigger 30",value:0},{name:"trigger 31",value:0}]},{objName:"Ops.Value.ToggleNumber",id:"665",uiAttribs:{subPatch:0},portsIn:[{name:"Use Value 1"},{name:"Value 0"},{name:"Value 1"}],portsOut:[{name:"Out Value",links:[{portIn:"current",portOut:"Out Value",objIn:"664",objOut:"665"}]}]},{objName:"Ops.Value.Number",id:"666",uiAttribs:{subPatch:0},portsIn:[{name:"value",value:0}],portsOut:[{name:"result",links:[{portIn:"Value 1",portOut:"result",objIn:"665",objOut:"666"}]}]},{objName:"Ops.Value.Number",id:"667",uiAttribs:{subPatch:0},portsIn:[{name:"value",value:1}],portsOut:[{name:"result",links:[{portIn:"Value 0",portOut:"result",objIn:"665",objOut:"667"}]}]},{objName:"Ops.Math.Clamp",id:"668",uiAttribs:{subPatch:0},portsIn:[{name:"val",value:.5},{name:"min",value:0},{name:"max",value:1},{name:"ignore outside values",value:false}],portsOut:[{name:"result",links:[{portIn:"Use Value 1",portOut:"result",objIn:"665",objOut:"668"},{portIn:"Value",portOut:"result",objIn:"669",objOut:"668"}]}]},{objName:"Ops.Boolean.IsOne",id:"669",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Result",value:false}]},{objName:"Ops.Math.Clamp",id:"670",uiAttribs:{subPatch:0},portsIn:[{name:"val",value:.5},{name:"min",value:0},{name:"max",value:200},{name:"ignore outside values",value:false}],portsOut:[{name:"result",value:0}]},{objName:"Ops.Gl.Matrix.OrbitControls",id:"671",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"min distance",value:.74},{name:"max distance",value:-.09},{name:"min rot y",value:0},{name:"max rot y",value:0},{name:"initial radius",value:.05},{name:"initial axis y",value:.5},{name:"initial axis x",value:.25},{name:"mul",value:1},{name:"Smoothness",value:1},{name:"Speed X",value:1},{name:"Speed Y",value:1},{name:"Active",value:true},{name:"Allow Panning",value:true},{name:"Allow Zooming",value:true},{name:"Allow Rotation",value:true},{name:"restricted",value:true},{name:"Reset",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"672",objOut:"671"},{portIn:"render",portOut:"trigger",objIn:"676",objOut:"671"},{portIn:"Render",portOut:"trigger",objIn:"715",objOut:"671"}]},{name:"radius",value:-.09},{name:"Rot X",value:90},{name:"Rot Y",value:90}]},{objName:"Ops.Gl.Render2Texture",id:"672",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"use viewport size",value:true},{name:"texture width",value:640},{name:"texture height",value:320},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"676",objOut:"672"}]},{name:"texture",links:[{portIn:"Image",portOut:"texture",objIn:"716",objOut:"672"}]},{name:"textureDepth"}]},{objName:"Ops.Ui.VizTexture",id:"673",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Texture",portOut:"Texture Out",objIn:"684",objOut:"673"}]},{name:"Info",value:""}]},{objName:"Ops.Gl.TextureToPointArray3",id:"674",uiAttribs:{subPatch:0},portsIn:[{name:"update",value:null},{name:"Center",value:true},{name:"Threshold Remove",value:.008},{name:"Z Multiply",value:2.78},{name:"texture",value:0},{name:"Width",value:2},{name:"Height",value:2}],portsOut:[{name:"trigger",value:0},{name:"Points"},{name:"Total Points",value:0},{name:"Min Z",value:99999999},{name:"Max Z",value:0}]},{objName:"Ops.Gl.Meshes.PointCloudFromArray",id:"675",uiAttribs:{subPatch:0},portsIn:[{name:"exe",value:null},{name:"Array",value:null},{name:"Num Points",value:4028},{name:"Scramble Texcoords",value:true},{name:"Seed",value:0},{name:"Coordinates",value:0},{name:"Vertex Colors",value:0}],portsOut:[{name:"Trigger out",value:0},{name:"Geometry"}]},{objName:"Ops.Gl.Shader.PointMaterial_v4",id:"676",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"PointSize",value:17.3},{name:"Size in Pixels",value:false},{name:"Random Size",value:0},{name:"Round",value:true},{name:"Round Antialias",value:false},{name:"Scale by Distance",value:true},{name:"r",value:.4364169715160746},{name:"g",value:.3131662730492313},{name:"b",value:.8051894048192645},{name:"a",value:1},{name:"Vertex Colors",value:false},{name:"texture"},{name:"Colorize Texture",value:false},{name:"Texture Mask",value:0},{name:"Mask Channel index",value:0},{name:"Mask Channel",value:"R"},{name:"Texture Colorize",value:0},{name:"Colorize Randomize",value:true},{name:"Texture Opacity",value:0},{name:"Texture Point Size",value:0},{name:"Point Size Channel index",value:0},{name:"Point Size Channel",value:"R"},{name:"Texture Point Size Mul",value:1},{name:"Map Size 0 index",value:0},{name:"Map Size 0",value:"Black"},{name:"Flip Texture",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"684",objOut:"676"}]},{name:"shader"}]},{objName:"Ops.Array.ArrayMath",id:"677",uiAttribs:{subPatch:0},portsIn:[{name:"array 0",value:null},{name:"Number for math",value:2.5},{name:"Math function index",value:0},{name:"Math function",value:"*"}],portsOut:[{name:"Array result"},{name:"Array length",value:0}]},{objName:"Ops.Gl.Meshes.Cube_v2",id:"678",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Render Mesh",value:false},{name:"Width",value:2},{name:"Length",value:2},{name:"Height",value:2},{name:"Center",value:true},{name:"Mapping index",value:0},{name:"Mapping",value:"Side"},{name:"Bias",value:0},{name:"Flip X",value:true},{name:"Top",value:true},{name:"Bottom",value:true},{name:"Left",value:true},{name:"Right",value:true},{name:"Front",value:true},{name:"Back",value:true}],portsOut:[{name:"Next",links:[{portIn:"Render",portOut:"Next",objIn:"682",objOut:"678"},{portIn:"Render",portOut:"Next",objIn:"685",objOut:"678"},{portIn:"Render",portOut:"Next",objIn:"694",objOut:"678"},{portIn:"Render",portOut:"Next",objIn:"703",objOut:"678"}]},{name:"geometry"}]},{objName:"Ops.Gl.Geometry.TransformGeometry",id:"679",uiAttribs:{subPatch:0},portsIn:[{name:"Geometry"},{name:"Translate X",value:0},{name:"Translate Y",value:0},{name:"Translate Z",value:0},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Scale Z",value:1},{name:"Rotation X"},{name:"Rotation Y",value:0},{name:"Rotation Z"}],portsOut:[{name:"Result",links:[{portIn:"Geometry",portOut:"Result",objIn:"680",objOut:"679"}]}]},{objName:"Ops.Gl.TesselateGeometry",id:"680",uiAttribs:{subPatch:0},portsIn:[{name:"Geometry"},{name:"Iterations",value:2}],portsOut:[{name:"Result",links:[{portIn:"Geometry",portOut:"Result",objIn:"682",objOut:"680"}]},{name:"Num Vertices",value:1824}]},{objName:"Ops.Anim.Timer_v2",id:"681",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:25},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Rotation Z",portOut:"Time",objIn:"679",objOut:"681"},{portIn:"Rotation X",portOut:"Time",objIn:"679",objOut:"681"}]}]},{objName:"Ops.Gl.Meshes.GeometryToTexture",id:"682",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Geometry"},{name:"Tex Size",value:43},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Randomize",value:false}],portsOut:[{name:"Next",value:0},{name:"Total Vertices",value:0},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"673",objOut:"682"}]}]},{objName:"Ops.Gl.TextureToPoints",id:"683",uiAttribs:{subPatch:0},portsIn:[{name:"update",value:null},{name:"Num Points",value:2e3},{name:"Seed",value:1},{name:"Z Position index",value:1},{name:"Z Position",value:"None"},{name:"Z Multiply",value:1},{name:"texture",value:0}],portsOut:[{name:"trigger",value:0},{name:"Points"},{name:"NumPoints",value:0}]},{objName:"Ops.Gl.Meshes.PointCloudFromTexture",id:"684",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Num Points",value:1e4},{name:"Axis index",value:0},{name:"Axis",value:"XYZ"},{name:"Texture"},{name:"Point Size",value:null},{name:"Normalize",value:false},{name:"Remove Point at 0",value:false}],portsOut:[{name:"Trigger",value:0},{name:"Total Points",value:1849}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"685",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"686",objOut:"685"}]},{name:"texture_out",links:[{portIn:"Image",portOut:"texture_out",objIn:"693",objOut:"685"},{portIn:"Image",portOut:"texture_out",objIn:"706",objOut:"685"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"686",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"690",objOut:"686"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"687",uiAttribs:{subPatch:0},portsIn:[{name:"Render",value:0},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"689",objOut:"687"}]},{name:"texture_out"},{name:"Aspect Ratio",value:0}]},{objName:"Ops.Gl.TextureEffects.Gradient",id:"688",uiAttribs:{subPatch:0},portsIn:[{name:"Render",value:0},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Width",value:1},{name:"Type index",value:0},{name:"Type",value:"X"},{name:"Pos",value:.5},{name:"Smoothstep",value:true},{name:"r",value:.04951936312174787},{name:"g",value:.04518380787867948},{name:"b",value:.824609359836832},{name:"r2",value:.06793755463713613},{name:"g2",value:.46876343543553367},{name:"b2",value:.4661609912989553},{name:"r3",value:.8539875968915607},{name:"g3",value:.7091067726207099},{name:"b3",value:.2901528873839079},{name:"Randomize",value:0}],portsOut:[{name:"Next",value:0}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"689",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image",value:0},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.RGBMath",id:"690",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Operation index",value:3},{name:"Operation",value:"c*x"},{name:"R Active",value:true},{name:"G Active",value:true},{name:"B Active",value:true},{name:"A Active",value:false},{name:"r",value:1},{name:"g",value:1},{name:"b",value:1},{name:"a",value:1},{name:"Mask",value:0}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Render2Texture",id:"691",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"use viewport size",value:true},{name:"texture width",value:640},{name:"texture height",value:320},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"4x"},{name:"HDR",value:false},{name:"Depth",value:false},{name:"Clear",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"671",objOut:"691"}]},{name:"texture",links:[{portIn:"Image",portOut:"texture",objIn:"686",objOut:"691"}]},{name:"textureDepth"}]},{objName:"Ops.Ui.VizTexture",id:"692",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out"},{name:"Info",value:""}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"693",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"701",objOut:"693"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"694",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:false},{name:"Width",value:200},{name:"Height",value:200},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"693",objOut:"694"}]},{name:"texture_out",links:[{portIn:"Image",portOut:"texture_out",objIn:"702",objOut:"694"}]},{name:"Aspect Ratio",value:1}]},{objName:"Ops.Gl.ColorMask",id:"695",uiAttribs:{subPatch:0},portsIn:[{name:"Execute",value:null},{name:"Red",value:true},{name:"Green",value:true},{name:"Blue",value:true},{name:"Alpha",value:true}],portsOut:[{name:"Next",value:0}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"696",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:0},{name:"Max",value:1},{name:"Position",value:.5}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.GradientTexture",id:"697",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":0,"g":0,"b":0},{"pos":0.026,"r":0,"g":0,"b":0},{"pos":0.262,"r":0.48684987386067713,"g":0.6895833333333333,"b":0.0888916015625},{"pos":0.524,"r":0.21749999999999936,"g":0,"b":1},{"pos":1,"r":0.21749999999999936,"g":0,"b":1}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:false},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Gradient",portOut:"Texture",objIn:"696",objOut:"697"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"698",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"R",value:.21197367389630606},{name:"G",value:.7027053276936261},{name:"B",value:.7328845150546268},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:true},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:.7092145833333332},{name:"Fresnel G",value:.09104166666666666},{name:"Fresnel B",value:.7283333333333333},{name:"Emissive Active",value:true},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.617967797038889},{name:"Emissive G",value:.8561376527022462},{name:"Emissive B",value:.06255031581689696},{name:"Shininess",value:10.03},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Schlick"},{name:"Energy Conservation",value:true},{name:"Double Sided Material",value:true},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture",value:0},{name:"Specular Texture",value:0},{name:"Normal Map"},{name:"AO Texture"},{name:"Emissive Texture",value:0},{name:"Emissive Mask",value:0},{name:"Opacity Texture",value:0},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:false}],portsOut:[{name:"Trigger Out",links:[{portIn:"render",portOut:"Trigger Out",objIn:"728",objOut:"698"}]},{name:"Shader"}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"699",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"width",value:3},{name:"height",value:3},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.TextureEffects.Plasma",id:"700",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"overlay"},{name:"Amount",value:.476},{name:"Width",value:7.88},{name:"Height",value:8.18},{name:"Mul",value:1},{name:"offset X",value:0},{name:"offset Y",value:0},{name:"Time",value:1},{name:"Greyscale",value:true}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"701",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image",value:0},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"696",objOut:"701"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"702",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"screen"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:true},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"706",objOut:"702"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"703",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:100},{name:"Height",value:100},{name:"Filter index",value:1},{name:"Filter",value:"nearest"},{name:"Wrap index",value:1},{name:"Wrap",value:"mirrored repeat"},{name:"HDR",value:false},{name:"Transparent",value:true}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"702",objOut:"703"}]},{name:"texture_out",links:[{portIn:"Image",portOut:"texture_out",objIn:"725",objOut:"703"},{portIn:"Texture In",portOut:"texture_out",objIn:"692",objOut:"703"},{portIn:"Texture 4",portOut:"texture_out",objIn:"660",objOut:"703"},{portIn:"texture",portOut:"texture_out",objIn:"711",objOut:"703"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"704",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Gradient",value:0},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:0},{name:"Max",value:1},{name:"Position",value:.5}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.Plasma",id:"705",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"multiply"},{name:"Amount",value:.355},{name:"Width",value:20},{name:"Height",value:20},{name:"Mul",value:2.34},{name:"offset X",value:0},{name:"offset Y",value:0},{name:"Time"},{name:"Greyscale",value:true}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"755",objOut:"705"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"706",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:true},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"769",objOut:"706"}]}]},{objName:"Ops.Anim.Timer_v2",id:"707",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:1},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Time",portOut:"Time",objIn:"705",objOut:"707"},{portIn:"val",portOut:"Time",objIn:"756",objOut:"707"},{portIn:"Twist amount",portOut:"Time",objIn:"755",objOut:"707"}]}]},{objName:"Ops.Gl.Matrix.OrbitControls",id:"708",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"min distance",value:-.06},{name:"max distance",value:4e4},{name:"min rot y",value:0},{name:"max rot y",value:0},{name:"initial radius",value:.05},{name:"initial axis y",value:.5},{name:"initial axis x",value:.25},{name:"mul",value:1},{name:"Smoothness",value:1},{name:"Speed X",value:1},{name:"Speed Y",value:1},{name:"Active",value:true},{name:"Allow Panning",value:true},{name:"Allow Zooming",value:false},{name:"Allow Rotation",value:true},{name:"restricted",value:true},{name:"Reset",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"724",objOut:"708"},{portIn:"render",portOut:"trigger",objIn:"729",objOut:"708"}]},{name:"radius",value:.05},{name:"Rot X",value:90},{name:"Rot Y",value:90}]},{objName:"Ops.Gl.Shader.PointMaterial_v4",id:"709",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"PointSize",value:2.82},{name:"Size in Pixels",value:false},{name:"Random Size",value:0},{name:"Round",value:true},{name:"Round Antialias",value:false},{name:"Scale by Distance",value:true},{name:"r",value:.24502929687500002},{name:"g",value:.88},{name:"b",value:.4482199218750002},{name:"a",value:1},{name:"Vertex Colors",value:false},{name:"texture",value:0},{name:"Colorize Texture",value:false},{name:"Texture Mask",value:0},{name:"Mask Channel index",value:0},{name:"Mask Channel",value:"R"},{name:"Texture Colorize",value:0},{name:"Colorize Randomize",value:true},{name:"Texture Opacity",value:0},{name:"Texture Point Size",value:0},{name:"Point Size Channel index",value:0},{name:"Point Size Channel",value:"R"},{name:"Texture Point Size Mul",value:1},{name:"Map Size 0 index",value:0},{name:"Map Size 0",value:"Black"},{name:"Flip Texture",value:false}],portsOut:[{name:"trigger",links:[{portIn:"update",portOut:"trigger",objIn:"711",objOut:"709"},{portIn:"exe",portOut:"trigger",objIn:"712",objOut:"709"}]},{name:"shader"}]},{objName:"Ops.Gl.TextureEffects.RGBMath",id:"710",uiAttribs:{subPatch:0},portsIn:[{name:"Render",value:null},{name:"Operation index",value:3},{name:"Operation",value:"c*x"},{name:"R Active",value:true},{name:"G Active",value:true},{name:"B Active",value:true},{name:"A Active",value:false},{name:"r",value:1},{name:"g",value:1},{name:"b",value:1},{name:"a",value:1},{name:"Mask",value:0}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureToPointArray3",id:"711",uiAttribs:{subPatch:0},portsIn:[{name:"update"},{name:"Center",value:true},{name:"Threshold Remove",value:.002},{name:"Z Multiply",value:1.48},{name:"texture"},{name:"Width",value:4.06},{name:"Height",value:2.8}],portsOut:[{name:"trigger",value:0},{name:"Points",links:[{portIn:"Array",portOut:"Points",objIn:"712",objOut:"711"}]},{name:"Total Points",value:6572},{name:"Min Z",value:0},{name:"Max Z",value:.578125}]},{objName:"Ops.Gl.Meshes.PointCloudFromArray",id:"712",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Array"},{name:"Num Points",value:23574},{name:"Scramble Texcoords",value:false},{name:"Seed",value:189.42},{name:"Coordinates",value:0},{name:"Vertex Colors",value:0}],portsOut:[{name:"Trigger out",value:0},{name:"Geometry"}]},{objName:"Ops.Array.ArrayMath",id:"713",uiAttribs:{subPatch:0},portsIn:[{name:"array 0",value:null},{name:"Number for math",value:1},{name:"Math function index",value:0},{name:"Math function",value:"/"}],portsOut:[{name:"Array result"},{name:"Array length",value:0}]},{objName:"Ops.Gl.GradientTexture",id:"714",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":1,"g":0,"b":0.8225000000000007},{"pos":0.25,"r":1,"g":0,"b":0.8225000000000007},{"pos":0.522,"r":0.033863932291666704,"g":0.036574331805139755,"b":0.042916666666666714},{"pos":0.75,"r":0.1607843137254902,"g":0.1747254901960787,"b":0.7803921568627451},{"pos":1,"r":0.1607843137254902,"g":0.1747254901960787,"b":0.7803921568627451}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:false},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Gradient",portOut:"Texture",objIn:"718",objOut:"714"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"715",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"716",objOut:"715"},{portIn:"exe",portOut:"Next",objIn:"722",objOut:"715"}]},{name:"texture_out",links:[{portIn:"texture",portOut:"texture_out",objIn:"676",objOut:"715"},{portIn:"Texture In",portOut:"texture_out",objIn:"719",objOut:"715"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"716",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"718",objOut:"716"}]}]},{objName:"Ops.Gl.TextureEffects.WaveformGradient_v2",id:"717",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Mode index",value:0},{name:"Mode",value:"Sawtooth"},{name:"Frequency",value:4},{name:"Pow factor",value:6},{name:"Offset",value:-490.49},{name:"Rotate",value:.517},{name:"r",value:1},{name:"g",value:1},{name:"b",value:1}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"718",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:0},{name:"Max",value:1},{name:"Position",value:.5}],portsOut:[{name:"trigger",links:[{portIn:"Trigger In",portOut:"trigger",objIn:"752",objOut:"718"}]}]},{objName:"Ops.Ui.VizTexture",id:"719",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out"},{name:"Info",value:""}]},{objName:"Ops.Gl.TextureEffects.CircleTexture_v3",id:"720",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"Amount",value:1},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"average"},{name:"size",value:.25},{name:"Inner",value:0},{name:"Stretch",value:0},{name:"Pos X",value:0},{name:"Pos Y",value:0},{name:"fallOff index",value:0},{name:"fallOff",value:"Linear"},{name:"fade Out",value:0},{name:"warn overflow",value:false},{name:"r",value:1},{name:"g",value:1},{name:"b",value:1},{name:"a",value:1}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.Desaturate",id:"721",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"amount"},{name:"Mask",value:0},{name:"Invert Mask",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Anim.SineAnim",id:"722",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:1},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"amount",portOut:"result",objIn:"721",objOut:"722"}]}]},{objName:"Ops.Gl.Meshes.Sphere_v2",id:"723",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"radius",value:1},{name:"stacks",value:32},{name:"slices",value:32},{name:"Filloffset",value:1},{name:"Render",value:false}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.Matrix.Transform",id:"724",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:.011},{name:"posY",value:.02},{name:"posZ"},{name:"scale",value:.86},{name:"rotX",value:0},{name:"rotY",value:180.74},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"Trigger In",portOut:"trigger",objIn:"698",objOut:"724"}]}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"725",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:true},{name:"flip y",value:false},{name:"Transform",value:true},{name:"Scale X",value:.778},{name:"Scale Y",value:.864},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"726",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"repeat"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"725",objOut:"726"}]},{name:"texture_out",links:[{portIn:"Normal Map",portOut:"texture_out",objIn:"698",objOut:"726"},{portIn:"AO Texture",portOut:"texture_out",objIn:"698",objOut:"726"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.Matrix.Transform",id:"727",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:0},{name:"scale",value:2.26},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"676",objOut:"727"}]}]},{objName:"Ops.Gl.Meshes.Circle",id:"728",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"radius",value:1.82},{name:"innerRadius",value:.009},{name:"segments",value:40},{name:"percent",value:1},{name:"steps",value:0},{name:"invertSteps",value:false},{name:"mapping index",value:0},{name:"mapping",value:"flat"},{name:"Spline",value:false},{name:"Draw",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.Matrix.Transform",id:"729",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:-2.92},{name:"scale",value:4.47},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"726",objOut:"729"}]}]},{objName:"Ops.Value.Number",id:"730",uiAttribs:{subPatch:0},portsIn:[{name:"value",value:-2.49}],portsOut:[{name:"result",links:[{portIn:"posZ",portOut:"result",objIn:"724",objOut:"730"}]}]},{objName:"Ops.Array.SplinePositionAtDistanceArray3",id:"731",uiAttribs:{subPatch:0},portsIn:[{name:"Calculate"},{name:"Array3x"},{name:"Distance"},{name:"Normalized",value:true}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"734",objOut:"731"},{portIn:"exe",portOut:"Next",objIn:"743",objOut:"731"}]},{name:"X",links:[{portIn:"x",portOut:"X",objIn:"734",objOut:"731"}]},{name:"Y",links:[{portIn:"y",portOut:"Y",objIn:"734",objOut:"731"}]},{name:"Z",links:[{portIn:"z",portOut:"Z",objIn:"734",objOut:"731"}]},{name:"Spline Length",value:27.504077685824317}]},{objName:"Ops.Array.LissajouseSpline",id:"732",uiAttribs:{subPatch:0},portsIn:[{name:"Formula index"},{name:"Formula",value:1},{name:"A",value:5},{name:"B",value:4},{name:"C",value:1},{name:"D",value:2}],portsOut:[{name:"Result",links:[{portIn:"Array3x",portOut:"Result",objIn:"731",objOut:"732"}]},{name:"Total points",value:158},{name:"Array length",value:474}]},{objName:"Ops.Anim.Timer_v2",id:"733",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:.1},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Distance",portOut:"Time",objIn:"731",objOut:"733"},{portIn:"Input",portOut:"Time",objIn:"744",objOut:"733"}]}]},{objName:"Ops.Gl.Matrix.Translate",id:"734",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"x"},{name:"y"},{name:"z"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"735",objOut:"734"}]}]},{objName:"Ops.Gl.Meshes.Cube_v2",id:"735",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Render Mesh",value:false},{name:"Width",value:1},{name:"Length",value:1},{name:"Height",value:1},{name:"Center",value:true},{name:"Mapping index",value:0},{name:"Mapping",value:"Side"},{name:"Bias",value:0},{name:"Flip X",value:true},{name:"Top",value:true},{name:"Bottom",value:true},{name:"Left",value:true},{name:"Right",value:true},{name:"Front",value:true},{name:"Back",value:true}],portsOut:[{name:"Next",links:[{portIn:"Trigger In",portOut:"Next",objIn:"739",objOut:"735"}]},{name:"geometry",links:[{portIn:"geom",portOut:"geometry",objIn:"736",objOut:"735"}]}]},{objName:"Ops.Gl.MeshInstancer_v4",id:"736",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"geom"},{name:"Scale",value:.05},{name:"Limit Instances",value:false},{name:"Limit",value:100},{name:"positions"},{name:"Scale Array",value:0},{name:"Rotations"},{name:"Rotation Type index",value:0},{name:"Rotation Type",value:"Euler"},{name:"Material blend mode index",value:0},{name:"Material blend mode",value:"Multiply"},{name:"Colors"},{name:"TexCoords",value:0}],portsOut:[{name:"Trigger Out",value:0},{name:"Num",value:"exe"}]},{objName:"Ops.Array.RandomArrays",id:"737",uiAttribs:{subPatch:0},portsIn:[{name:"Num Values",value:100},{name:"Mode index",value:0},{name:"Mode",value:"A"},{name:"Random Seed ",value:0},{name:"Integer",value:false},{name:"Min A",value:-1},{name:"Max A",value:1},{name:"Min B",value:-1},{name:"Max B",value:1},{name:"Min C",value:-1},{name:"Max C",value:1},{name:"Min D",value:-1},{name:"Max D",value:1}],portsOut:[{name:"Array Out"},{name:"Chunks Amount",value:100},{name:"Array length",value:100}]},{objName:"Ops.Array.RandomNumbersArray3_v2",id:"738",uiAttribs:{subPatch:0},portsIn:[{name:"numValues",value:100},{name:"Min",value:-1},{name:"Max",value:1},{name:"random seed",value:0},{name:"Last == First",value:false},{name:"Integer",value:false}],portsOut:[{name:"values",links:[{portIn:"positions",portOut:"values",objIn:"736",objOut:"738"},{portIn:"Array",portOut:"values",objIn:"745",objOut:"738"},{portIn:"Colors",portOut:"values",objIn:"736",objOut:"738"}]},{name:"Total points",value:100},{name:"Array length",value:300}]},{objName:"Ops.Gl.Phong.PhongMaterial_v6",id:"739",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"R",value:.2503510900862149},{name:"G",value:.23475818351568556},{name:"B",value:.590720051702383},{name:"A",value:1},{name:"Enable",value:false},{name:"Albedo",value:.707},{name:"Roughness",value:.835},{name:"Active",value:false},{name:"Fresnel Intensity",value:.7},{name:"Fresnel Width",value:1},{name:"Fresnel Exponent",value:6},{name:"Fresnel R",value:1},{name:"Fresnel G",value:1},{name:"Fresnel B",value:1},{name:"Emissive Active",value:false},{name:"Color Intensity",value:.3},{name:"Emissive R",value:.044264880348055646},{name:"Emissive G",value:.5743154157074919},{name:"Emissive B",value:.7147898498988461},{name:"Shininess",value:4},{name:"Specular Amount",value:.5},{name:"Specular Model index",value:0},{name:"Specular Model",value:"Blinn"},{name:"Energy Conservation",value:false},{name:"Double Sided Material",value:false},{name:"Falloff Mode index",value:0},{name:"Falloff Mode",value:"A"},{name:"Diffuse Texture"},{name:"Specular Texture",value:0},{name:"Normal Map",value:0},{name:"AO Texture",value:0},{name:"Emissive Texture",value:0},{name:"Emissive Mask",value:0},{name:"Opacity Texture",value:0},{name:"Environment Map",value:0},{name:"Env Map Mask",value:0},{name:"Colorize Texture",value:false},{name:"Diffuse Repeat X",value:1},{name:"Diffuse Repeat Y",value:1},{name:"Texture Offset X",value:0},{name:"Texture Offset Y",value:0},{name:"Specular Intensity",value:1},{name:"Normal Map Intensity",value:.5},{name:"AO Intensity",value:1},{name:"Emissive Intensity",value:1},{name:"Emissive Mask Intensity",value:1},{name:"Env Map Intensity",value:1},{name:"Env Map Blend index",value:0},{name:"Env Map Blend",value:"Add"},{name:"Env Mask Intensity",value:1},{name:"Alpha Mask Source index",value:0},{name:"Alpha Mask Source",value:"Luminance"},{name:"Discard Transparent Pixels",value:false}],portsOut:[{name:"Trigger Out",links:[{portIn:"exe",portOut:"Trigger Out",objIn:"736",objOut:"739"}]},{name:"Shader"}]},{objName:"Ops.Array.RandomNumbersArray3_v2",id:"740",uiAttribs:{subPatch:0},portsIn:[{name:"numValues",value:100},{name:"Min"},{name:"Max"},{name:"random seed",value:0},{name:"Last == First",value:false},{name:"Integer",value:false}],portsOut:[{name:"values",links:[{portIn:"Rotations",portOut:"values",objIn:"736",objOut:"740"}]},{name:"Total points",value:100},{name:"Array length",value:300}]},{objName:"Ops.Anim.Timer_v2",id:"741",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:.03},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Max",portOut:"Time",objIn:"740",objOut:"741"}]}]},{objName:"Ops.Anim.Timer_v2",id:"742",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:51.88},{name:"Play",value:true},{name:"Reset",value:0},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Min",portOut:"Time",objIn:"740",objOut:"742"}]}]},{objName:"Ops.Anim.SineAnim",id:"743",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:0},{name:"frequency",value:1},{name:"amplitude",value:1}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"Formula index",portOut:"result",objIn:"732",objOut:"743"}]}]},{objName:"Ops.Trigger.Threshold",id:"744",uiAttribs:{subPatch:0},portsIn:[{name:"Input"},{name:"Threshold",value:1}],portsOut:[{name:"Output",links:[{portIn:"Reset",portOut:"Output",objIn:"733",objOut:"744"}]}]},{objName:"Ops.Gl.Array3ToTexture",id:"745",uiAttribs:{subPatch:0},portsIn:[{name:"Array"},{name:"wrap index",value:0},{name:"wrap",value:"repeat"},{name:"filter index",value:2},{name:"filter",value:"mipmap"}],portsOut:[{name:"Texture",links:[{portIn:"Diffuse Texture",portOut:"Texture",objIn:"739",objOut:"745"}]}]},{objName:"Ops.Gl.ForceCanvasSize",id:"746",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger"},{name:"Active",value:false},{name:"Force index",value:0},{name:"Force",value:"Resolution"},{name:"Center In Parent",value:true},{name:"Scale to fit Parent",value:false},{name:"Set Width",value:489},{name:"Set Height",value:374},{name:"Aspect Ratio index",value:3},{name:"Aspect Ratio",value:"16:9"},{name:"Ratio",value:0},{name:"Fill Parent index",value:0},{name:"Fill Parent",value:"Auto"}],portsOut:[{name:"Next",links:[{portIn:"exe",portOut:"Next",objIn:"664",objOut:"746"},{portIn:"render",portOut:"Next",objIn:"708",objOut:"746"},{portIn:"Calculate",portOut:"Next",objIn:"731",objOut:"746"},{portIn:"render",portOut:"Next",objIn:"753",objOut:"746"}]},{name:"Width",value:489},{name:"Height",value:374},{name:"Margin Left",value:0},{name:"Margin Top",value:0}]},{objName:"Ops.Gl.GLTF.GltfScene_v3",id:"747",uiAttribs:{subPatch:0},portsIn:[{name:"data",value:""},{name:"Render"},{name:"glb File",value:"assets/622f3a4e52614f6d8c8b6740_solobed.glb",display:"file"},{name:"Draw",value:false},{name:"Camera index",value:0},{name:"Camera",value:"None"},{name:"Animation",value:""},{name:"Show Structure",value:0},{name:"Center index",value:1},{name:"Center",value:"XYZ"},{name:"Rescale",value:true},{name:"Rescale Size",value:1.56},{name:"Time",value:3.34},{name:"Sync to timeline",value:false},{name:"Loop",value:true},{name:"Normals Format index",value:0},{name:"Normals Format",value:"XYZ"},{name:"Vertices Format index",value:0},{name:"Vertices Format",value:"XYZ"},{name:"Calc Normals",value:false},{name:"Materials",value:0},{name:"Hide Nodes",value:0},{name:"Use Material Properties",value:false},{name:"Active",value:true}],portsOut:[{name:"Render Before",value:0},{name:"Next",links:[{portIn:"Render",portOut:"Next",objIn:"748",objOut:"747"}]},{name:"Generator",value:"Khronos glTF Blender I/O v1.6.16"},{name:"GLTF Version",value:2},{name:"GLTF Extensions Used"},{name:"Anim Length",value:0},{name:"Anim Time",value:0},{name:"Json"},{name:"Anims"},{name:"BoundingPoints"},{name:"Bounds"},{name:"Finished",value:0},{name:"Loading",value:false}]},{objName:"Ops.Gl.GLTF.GltfNode_v2",id:"748",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Node Name",value:"Icokugel"},{name:"Transformation",value:true},{name:"Draw Mesh",value:false},{name:"Draw Childs",value:true},{name:"Ignore Material",value:true},{name:"Use Scene Time",value:true},{name:"Time",value:0}],portsOut:[{name:"Next",value:0},{name:"Geometry",links:[{portIn:"Geometry",portOut:"Geometry",objIn:"679",objOut:"748"}]},{name:"Found",value:true}]},{objName:"Ops.Gl.Matrix.Transform",id:"749",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:-.35260650179143177},{name:"scale",value:250.38},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.MeshMorph",id:"750",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"Method index",value:0},{name:"Method",value:"Auto Anim"},{name:"Geometry",value:0},{name:"Duration",value:1},{name:"Index",value:0},{name:"Index 2",value:0},{name:"Fade",value:0},{name:"Easing index",value:0},{name:"Easing",value:"linear"},{name:"Geometry 0",value:0},{name:"Geometry 1",value:0},{name:"Geometry 2",value:0},{name:"Geometry 3",value:0},{name:"Geometry 4",value:0},{name:"Geometry 5",value:0},{name:"Geometry 6",value:0},{name:"Geometry 7",value:0},{name:"Geometry 8",value:0},{name:"Geometry 9",value:0},{name:"Geometry 10",value:0},{name:"Geometry 11",value:0},{name:"Geometry 12",value:0},{name:"Geometry 13",value:0},{name:"Geometry 14",value:0},{name:"Geometry 15",value:0}],portsOut:[{name:"Finished",value:0},{name:"trigger",value:0}]},{objName:"Ops.Gl.Geometry.ScaleGeometry",id:"751",uiAttribs:{subPatch:0},portsIn:[{name:"Geometry",value:0},{name:"Scale",value:.04}],portsOut:[{name:"Result"}]},{objName:"Ops.Gl.ShaderEffects.FresnelGlow",id:"752",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger In"},{name:"Active",value:true},{name:"R",value:.4111474934323809},{name:"G",value:.3668370026596022},{name:"B",value:.9338517552233878},{name:"Fresnel Intensity",value:4.71},{name:"Fresnel Exponent",value:5.15}],portsOut:[{name:"Trigger Out",links:[{portIn:"render",portOut:"Trigger Out",objIn:"721",objOut:"752"}]}]},{objName:"Ops.Gl.Matrix.Transform",id:"753",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:0},{name:"posY",value:0},{name:"posZ",value:0},{name:"scale",value:.69},{name:"rotX",value:0},{name:"rotY",value:0},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"709",objOut:"753"}]}]},{objName:"Ops.Gl.Render2Texture",id:"754",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"use viewport size",value:true},{name:"texture width",value:640},{name:"texture height",value:320},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",links:[{portIn:"Trigger",portOut:"trigger",objIn:"746",objOut:"754"}]},{name:"texture",links:[{portIn:"Texture 3",portOut:"texture",objIn:"660",objOut:"754"}]},{name:"textureDepth"}]},{objName:"Ops.Gl.TextureEffects.Twirl_v3",id:"755",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Twist amount"},{name:"Radius",value:.5},{name:"Center X",value:.5},{name:"Center Y",value:.5}],portsOut:[{name:"Next",value:0}]},{objName:"Ops.Math.Clamp",id:"756",uiAttribs:{subPatch:0},portsIn:[{name:"val"},{name:"min",value:700},{name:"max",value:701},{name:"ignore outside values",value:false}],portsOut:[{name:"result",links:[{portIn:"Value",portOut:"result",objIn:"757",objOut:"756"}]}]},{objName:"Ops.Value.TriggerOnChangeNumber",id:"757",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Next",links:[{portIn:"Reset",portOut:"Next",objIn:"707",objOut:"757"}]},{name:"Number",value:700}]},{objName:"Ops.Sequence",id:"758",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"Render",portOut:"trigger 0",objIn:"513",objOut:"758"},{portIn:"Render",portOut:"trigger 0",objIn:"517",objOut:"758"},{portIn:"exe",portOut:"trigger 0",objIn:"522",objOut:"758"},{portIn:"exe",portOut:"trigger 0",objIn:"543",objOut:"758"},{portIn:"Render",portOut:"trigger 0",objIn:"661",objOut:"758"},{portIn:"render",portOut:"trigger 0",objIn:"754",objOut:"758"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"759",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:82},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"760",objOut:"759"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"R"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"760",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:29}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"760"}]}]},{objName:"Ops.Trigger.TriggerIfIncreased",id:"761",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Trigger",links:[{portIn:"exe",portOut:"Trigger",objIn:"762",objOut:"761"},{portIn:"false",portOut:"Trigger",objIn:"768",objOut:"761"}]}]},{objName:"Ops.Anim.AnimNumber",id:"762",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Value",value:2.34},{name:"duration",value:.001},{name:"easing index",value:0},{name:"easing",value:"absolute"}],portsOut:[{name:"Next",value:0},{name:"result",links:[{portIn:"Value 1",portOut:"result",objIn:"767",objOut:"762"}]},{name:"Finished",value:0}]},{objName:"Ops.Gl.Matrix.Transform",id:"763",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"posX",value:-2.19},{name:"posY",value:4.12},{name:"posZ",value:7.55},{name:"scale"},{name:"rotX",value:9.5},{name:"rotY",value:-47},{name:"rotZ",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"564",objOut:"763"}]}]},{objName:"Ops.Value.Number",id:"764",uiAttribs:{subPatch:0},portsIn:[{name:"value"}],portsOut:[{name:"result",links:[{portIn:"Value",portOut:"result",objIn:"761",objOut:"764"},{portIn:"Value",portOut:"result",objIn:"765",objOut:"764"}]}]},{objName:"Ops.Trigger.TriggerIfDecreased",id:"765",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Trigger",links:[{portIn:"exe",portOut:"Trigger",objIn:"766",objOut:"765"},{portIn:"True",portOut:"Trigger",objIn:"768",objOut:"765"}]}]},{objName:"Ops.Anim.AnimNumber",id:"766",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Value",value:1.02},{name:"duration",value:.001},{name:"easing index",value:0},{name:"easing",value:"absolute"}],portsOut:[{name:"Next",value:0},{name:"result",links:[{portIn:"Value 0",portOut:"result",objIn:"767",objOut:"766"}]},{name:"Finished",value:0}]},{objName:"Ops.Value.ToggleNumber",id:"767",uiAttribs:{subPatch:0},portsIn:[{name:"Use Value 1"},{name:"Value 0"},{name:"Value 1"}],portsOut:[{name:"Out Value",links:[{portIn:"scale",portOut:"Out Value",objIn:"663",objOut:"767"},{portIn:"scale",portOut:"Out Value",objIn:"763",objOut:"767"}]}]},{objName:"Ops.Boolean.TriggerBoolean",id:"768",uiAttribs:{subPatch:0},portsIn:[{name:"True"},{name:"false"}],portsOut:[{name:"Result",links:[{portIn:"Use Value 1",portOut:"Result",objIn:"767",objOut:"768"}]}]},{objName:"Ops.Gl.TextureEffects.RotateTexture",id:"769",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Multiplier",value:0},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Rotate"},{name:"Crop",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"705",objOut:"769"}]}]},{objName:"Ops.Trigger.TriggerIfIncreased",id:"770",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Trigger",links:[{portIn:"trigger in",portOut:"Trigger",objIn:"772",objOut:"770"}]}]},{objName:"Ops.Anim.Timer_v2",id:"771",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:2.25},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"Rotate",portOut:"Time",objIn:"769",objOut:"771"}]}]},{objName:"Ops.Trigger.TriggerCounterLoop",id:"772",uiAttribs:{subPatch:0},portsIn:[{name:"trigger in"},{name:"reset",value:0},{name:"Loop min",value:0},{name:"Loop max",value:16}],portsOut:[{name:"trigger out",value:0},{name:"current count",links:[{portIn:"Value",portOut:"current count",objIn:"773",objOut:"772"}]}]},{objName:"Ops.Trigger.TriggerIfIncreased",id:"773",uiAttribs:{subPatch:0},portsIn:[{name:"Value"}],portsOut:[{name:"Trigger",links:[{portIn:"Reset",portOut:"Trigger",objIn:"771",objOut:"773"}]}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"774",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat sdArc(vec2 p, float a1, float a2, float ra, float rb) {\n\tfloat amid = 0.5*(a1+a2)+1.6+3.14*step(a1, a2);\n\tfloat alength = 0.5*(a1-a2)-1.6+3.14*step(a1, a2);\n\tvec2 sca = vec2(cos(amid), sin(amid));\n\tvec2 scb = vec2(cos(alength), sin(alength));\n    p *= mat2(vec2(sca.x,sca.y),vec2(-sca.y,sca.x));\n    p.x = abs(p.x);\n    float k = (scb.y*p.x>scb.x*p.y) ? dot(p.xy,scb) : length(p.xy);\n    return sqrt( dot(p,p) + ra*ra - 2.0*ra*k ) - rb;\n}\nvec2 sdLine(vec2 p, vec2 a, vec2 b) {\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp(dot(pa,ba)/dot(ba,ba), 0.0, 1.0);\n    return vec2(length(pa-ba*h), h);\n}\nconst float p_o119967_gradient_0_pos = 0.209090909;\nconst float p_o119967_gradient_0_r = 1.000000000;\nconst float p_o119967_gradient_0_g = 0.000000000;\nconst float p_o119967_gradient_0_b = 0.000000000;\nconst float p_o119967_gradient_0_a = 1.000000000;\nconst float p_o119967_gradient_1_pos = 0.827272727;\nconst float p_o119967_gradient_1_r = 0.000000000;\nconst float p_o119967_gradient_1_g = 0.062500000;\nconst float p_o119967_gradient_1_b = 1.000000000;\nconst float p_o119967_gradient_1_a = 1.000000000;\nvec4 o119967_gradient_gradient_fct(float x) {\n  if (x < p_o119967_gradient_0_pos) {\n    return vec4(p_o119967_gradient_0_r,p_o119967_gradient_0_g,p_o119967_gradient_0_b,p_o119967_gradient_0_a);\n  } else if (x < p_o119967_gradient_1_pos) {\n    return mix(vec4(p_o119967_gradient_0_r,p_o119967_gradient_0_g,p_o119967_gradient_0_b,p_o119967_gradient_0_a), vec4(p_o119967_gradient_1_r,p_o119967_gradient_1_g,p_o119967_gradient_1_b,p_o119967_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o119967_gradient_0_pos)/(p_o119967_gradient_1_pos-p_o119967_gradient_0_pos)));\n  }\n  return vec4(p_o119967_gradient_1_r,p_o119967_gradient_1_g,p_o119967_gradient_1_b,p_o119967_gradient_1_a);\n}\nconst float p_o47866_radius = 0.980000019;\nconst float p_o36150_d = 0.390000000;\nconst float p_o14099_a1 = 30.000000000;\nconst float p_o14099_a2 = 150.000000000;\nconst float p_o14099_r1 = 0.300000000;\nconst float p_o14099_r2 = 0.100000000;\nconst float p_o20177_ax = -0.300000000;\nconst float p_o20177_ay = -0.300000000;\nconst float p_o20177_bx = 0.270000000;\nconst float p_o20177_by = 0.300000000;\nconst float p_o20177_r = 0.050000000;\nvec2 o44908_input_sdf(vec3 p, float _seed_variation_) {\nvec2 o36150_0_q = vec2(length((p).xy)-p_o36150_d+0.5, (p).z+0.5);\nfloat o14099_0_1_sdf2d = sdArc((o36150_0_q)-vec2(0.5), mod(p_o14099_a1, 360.0)*0.01745329251, mod(p_o14099_a2, 360.0)*0.01745329251, p_o14099_r1, p_o14099_r2);\nvec2 o20177_0_sdl = sdLine((o36150_0_q), vec2(p_o20177_ax+0.5, p_o20177_ay+0.5), vec2(p_o20177_bx+0.5, p_o20177_by+0.5));float o20177_0_1_sdf2d = o20177_0_sdl.x-p_o20177_r*1.0;\nfloat o8300_0_1_sdf2d = mix(o14099_0_1_sdf2d, o20177_0_1_sdf2d, (cos(iTime) * 5.6 * 3.1426));\nfloat o36150_0_1_sdf3d = o8300_0_1_sdf2d;\n\nreturn vec2(o36150_0_1_sdf3d, 0.0);\n}\nvec2 raymarch_o44908(vec2 uv, float _seed_variation_) {\n\tvec3 ro = vec3(uv-vec2(0.5), 1.0);\n\tvec3 rd = vec3(0.0, 0.0, -1.0);\n\tfloat dO = 0.0;\n\tfloat c = 0.0;\n    for (int i=0; i < 100; i++) {\n    \tvec3 p = ro + rd*dO;\n        vec2 dS = o44908_input_sdf(p, _seed_variation_);\n        dO += dS.x;\n\n        if (dO >= 1.0) {\n\t\t\tbreak;\n\t\t} else if (dS.x < 0.0001) {\n\t\t\tc = dS.y;\n\t\t\tbreak;\n\t\t}\n    }\n    \n    return vec2(dO, c);\n}\n\nvec3 normal_o44908(vec3 p, float _seed_variation_) {\n\tif (p.z <= 0.0) {\n\t\treturn vec3(0.0, 0.0, 1.0);\n\t}\n\n\tfloat d = o44908_input_sdf(p, _seed_variation_).x;\n    float e = .001;\n    \n    vec3 n = d - vec3(\n        o44908_input_sdf(p-vec3(e, 0.0, 0.0), _seed_variation_).x,\n        o44908_input_sdf(p-vec3(0.0, e, 0.0), _seed_variation_).x,\n        o44908_input_sdf(p-vec3(0.0, 0.0, e), _seed_variation_).x);\n    \n    return vec3(-1.0, -1.0, -1.0)*normalize(n);\n}\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o44908_0_d = raymarch_o44908((vec2(fract((tan(iTime))*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o47866_radius*length((UV)-vec2(0.5))))), _seed_variation_);\nvec3 o44908_1_1_rgb = vec3(0.5)+0.5*normal_o44908(vec3((vec2(fract((tan(iTime))*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o47866_radius*length((UV)-vec2(0.5)))))-vec2(0.5), 1.0-o44908_0_d.x), _seed_variation_);\nvec4 o47866_0_1_rgba = vec4(o44908_1_1_rgb, 1.0);\nvec4 o119967_0_1_rgba = o119967_gradient_gradient_fct((dot((o47866_0_1_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o119967_0_1_rgba;\n}\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"775",objOut:"774"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"775",objOut:"774"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"775",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"778",objOut:"775"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"776",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:.72},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"774",objOut:"776"}]}]},{objName:"Ops.Sequence",id:"777",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"774",objOut:"777"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",links:[{portIn:"Render",portOut:"trigger 15",objIn:"800",objOut:"777"}]}]},{objName:"Ops.Ui.VizTexture",id:"778",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"780",objOut:"778"}]},{name:"Info",value:""}]},{objName:"Ops.Gl.Render2Texture",id:"779",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"use viewport size",value:true},{name:"texture width",value:640},{name:"texture height",value:320},{name:"Auto Aspect",value:false},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"Repeat"},{name:"MSAA index",value:0},{name:"MSAA",value:"none"},{name:"HDR",value:false},{name:"Depth",value:true},{name:"Clear",value:true}],portsOut:[{name:"trigger",value:0},{name:"texture"},{name:"textureDepth"}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"780",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"787",objOut:"780"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"781",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"clamp to edge"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"render",portOut:"Next",objIn:"780",objOut:"781"},{portIn:"exe",portOut:"Next",objIn:"777",objOut:"781"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"788",objOut:"781"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.Meshes.Rectangle_v2",id:"782",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"width",value:1},{name:"height",value:1},{name:"pivot x index",value:0},{name:"pivot x",value:"center"},{name:"pivot y index",value:0},{name:"pivot y",value:"center"},{name:"num columns",value:1},{name:"num rows",value:1},{name:"axis index",value:0},{name:"axis",value:"xy"},{name:"Active",value:true}],portsOut:[{name:"trigger",value:0},{name:"geometry"}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"783",uiAttribs:{subPatch:0},portsIn:[{name:"Render",value:null},{name:"time",value:0},{name:"SpeedX",value:4},{name:"SpeedY",value:8},{name:"RepeatX",value:10.94},{name:"RepeatY",value:7.17},{name:"Multiply",value:.08},{name:"Mask",value:0}],portsOut:[{name:"Trigger",value:0}]},{objName:"Ops.Gl.GradientTexture",id:"784",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":8.881784197001252e-16,"g":0,"b":1},{"pos":0.02,"r":8.881784197001252e-16,"g":0,"b":1},{"pos":0.21,"r":1,"g":0,"b":0},{"pos":0.488,"r":0.7520159698207888,"g":0.2980955505283348,"b":0.7255181847110971},{"pos":1,"r":0.7520159698207888,"g":0.2980955505283348,"b":0.7255181847110971}]}'},{name:"Direction index",value:0},{name:"Direction",value:"X"},{name:"Smoothstep",value:false},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:256},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Mask",portOut:"Texture",objIn:"787",objOut:"784"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"785",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"lighten"},{name:"Amount",value:1},{name:"Gradient",value:0},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:0},{name:"Max",value:1},{name:"Position",value:.5}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"786",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:0},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat box(vec2 uv, vec3 center, vec3 rad, vec3 rot) {\n\tvec3 ro = vec3(uv, 1.0)-center;\n\tvec3 rd = vec3(0.0000001, 0.0000001, -1.0);\n\tmat3 r = mat3(vec3(1, 0, 0), vec3(0, cos(rot.x), -sin(rot.x)), vec3(0, sin(rot.x), cos(rot.x)));\n\tr *= mat3(vec3(cos(rot.y), 0, -sin(rot.y)), vec3(0, 1, 0), vec3(sin(rot.y), 0, cos(rot.y)));\n\tr *= mat3(vec3(cos(rot.z), -sin(rot.z), 0), vec3(sin(rot.z), cos(rot.z), 0), vec3(0, 0, 1));\n\tro = r * ro;\n\trd = r * rd;\n    vec3 m = 1.0/rd;\n    vec3 n = m*ro;\n    vec3 k = abs(m)*rad;\n    vec3 t1 = -n - k;\n    vec3 t2 = -n + k;\n\n    float tN = max(max(t1.x, t1.y), t1.z);\n    float tF = min(min(t2.x, t2.y), t2.z);\n    if(tN>tF || tF<0.0) return 1.0;\n    return tN;\n}float sphere(vec2 uv, vec2 c, float r) {\n\tuv -= c;\n\tuv /= r;\n\treturn 2.0*r*sqrt(max(0.0, 1.0-dot(uv, uv)));\n}\nvec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nconst float p_o419741_gradient_0_pos = 0.000000000;\nconst float p_o419741_gradient_0_r = 1.000000000;\nconst float p_o419741_gradient_0_g = 0.000000000;\nconst float p_o419741_gradient_0_b = 0.000000000;\nconst float p_o419741_gradient_0_a = 1.000000000;\nconst float p_o419741_gradient_1_pos = 0.144273793;\nconst float p_o419741_gradient_1_r = 1.000000000;\nconst float p_o419741_gradient_1_g = 0.968750000;\nconst float p_o419741_gradient_1_b = 0.000000000;\nconst float p_o419741_gradient_1_a = 1.000000000;\nconst float p_o419741_gradient_2_pos = 0.274273404;\nconst float p_o419741_gradient_2_r = 1.000000000;\nconst float p_o419741_gradient_2_g = 0.000000000;\nconst float p_o419741_gradient_2_b = 0.000000000;\nconst float p_o419741_gradient_2_a = 1.000000000;\nconst float p_o419741_gradient_3_pos = 0.414273349;\nconst float p_o419741_gradient_3_r = 0.843750000;\nconst float p_o419741_gradient_3_g = 0.000000000;\nconst float p_o419741_gradient_3_b = 1.000000000;\nconst float p_o419741_gradient_3_a = 1.000000000;\nconst float p_o419741_gradient_4_pos = 0.854273571;\nconst float p_o419741_gradient_4_r = 0.000000000;\nconst float p_o419741_gradient_4_g = 0.062500000;\nconst float p_o419741_gradient_4_b = 1.000000000;\nconst float p_o419741_gradient_4_a = 1.000000000;\nvec4 o419741_gradient_gradient_fct(float x) {\n  if (x < p_o419741_gradient_0_pos) {\n    return vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a);\n  } else if (x < p_o419741_gradient_1_pos) {\n    return mix(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)), mix(vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a), vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), (x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos)), 1.0-0.5*(x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos));\n  } else if (x < p_o419741_gradient_2_pos) {\n    return 0.5*(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)) + mix(mix(vec4(p_o419741_gradient_0_r,p_o419741_gradient_0_g,p_o419741_gradient_0_b,p_o419741_gradient_0_a), vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), (x-p_o419741_gradient_0_pos)/(p_o419741_gradient_1_pos-p_o419741_gradient_0_pos)), mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)), 0.5-0.5*cos(3.14159265359*(x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos))));\n  } else if (x < p_o419741_gradient_3_pos) {\n    return 0.5*(mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)) + mix(mix(vec4(p_o419741_gradient_1_r,p_o419741_gradient_1_g,p_o419741_gradient_1_b,p_o419741_gradient_1_a), vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), (x-p_o419741_gradient_1_pos)/(p_o419741_gradient_2_pos-p_o419741_gradient_1_pos)), mix(vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a), (x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos)), 0.5-0.5*cos(3.14159265359*(x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos))));\n  } else if (x < p_o419741_gradient_4_pos) {\n    return mix(mix(vec4(p_o419741_gradient_2_r,p_o419741_gradient_2_g,p_o419741_gradient_2_b,p_o419741_gradient_2_a), vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), (x-p_o419741_gradient_2_pos)/(p_o419741_gradient_3_pos-p_o419741_gradient_2_pos)), mix(vec4(p_o419741_gradient_3_r,p_o419741_gradient_3_g,p_o419741_gradient_3_b,p_o419741_gradient_3_a), vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a), (x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos)), 0.5+0.5*(x-p_o419741_gradient_3_pos)/(p_o419741_gradient_4_pos-p_o419741_gradient_3_pos));\n  }\n  return vec4(p_o419741_gradient_4_r,p_o419741_gradient_4_g,p_o419741_gradient_4_b,p_o419741_gradient_4_a);\n}\nconst float p_o398645_amount = 11.760000000;\nconst float p_o479214_gradient_0_pos = 0.025183105;\nconst float p_o479214_gradient_0_r = 1.000000000;\nconst float p_o479214_gradient_0_g = 0.000000000;\nconst float p_o479214_gradient_0_b = 0.000000000;\nconst float p_o479214_gradient_0_a = 1.000000000;\nconst float p_o479214_gradient_1_pos = 0.435182884;\nconst float p_o479214_gradient_1_r = 1.000000000;\nconst float p_o479214_gradient_1_g = 0.968750000;\nconst float p_o479214_gradient_1_b = 0.000000000;\nconst float p_o479214_gradient_1_a = 1.000000000;\nconst float p_o479214_gradient_2_pos = 0.590909368;\nconst float p_o479214_gradient_2_r = 0.000000000;\nconst float p_o479214_gradient_2_g = 1.000000000;\nconst float p_o479214_gradient_2_b = 0.125000000;\nconst float p_o479214_gradient_2_a = 1.000000000;\nconst float p_o479214_gradient_3_pos = 0.915182218;\nconst float p_o479214_gradient_3_r = 0.000000000;\nconst float p_o479214_gradient_3_g = 0.062500000;\nconst float p_o479214_gradient_3_b = 1.000000000;\nconst float p_o479214_gradient_3_a = 1.000000000;\nvec4 o479214_gradient_gradient_fct(float x) {\n  if (x < p_o479214_gradient_0_pos) {\n    return vec4(p_o479214_gradient_0_r,p_o479214_gradient_0_g,p_o479214_gradient_0_b,p_o479214_gradient_0_a);\n  } else if (x < p_o479214_gradient_1_pos) {\n    return mix(vec4(p_o479214_gradient_0_r,p_o479214_gradient_0_g,p_o479214_gradient_0_b,p_o479214_gradient_0_a), vec4(p_o479214_gradient_1_r,p_o479214_gradient_1_g,p_o479214_gradient_1_b,p_o479214_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_0_pos)/(p_o479214_gradient_1_pos-p_o479214_gradient_0_pos)));\n  } else if (x < p_o479214_gradient_2_pos) {\n    return mix(vec4(p_o479214_gradient_1_r,p_o479214_gradient_1_g,p_o479214_gradient_1_b,p_o479214_gradient_1_a), vec4(p_o479214_gradient_2_r,p_o479214_gradient_2_g,p_o479214_gradient_2_b,p_o479214_gradient_2_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_1_pos)/(p_o479214_gradient_2_pos-p_o479214_gradient_1_pos)));\n  } else if (x < p_o479214_gradient_3_pos) {\n    return mix(vec4(p_o479214_gradient_2_r,p_o479214_gradient_2_g,p_o479214_gradient_2_b,p_o479214_gradient_2_a), vec4(p_o479214_gradient_3_r,p_o479214_gradient_3_g,p_o479214_gradient_3_b,p_o479214_gradient_3_a), 0.5-0.5*cos(3.14159265359*(x-p_o479214_gradient_2_pos)/(p_o479214_gradient_3_pos-p_o479214_gradient_2_pos)));\n  }\n  return vec4(p_o479214_gradient_3_r,p_o479214_gradient_3_g,p_o479214_gradient_3_b,p_o479214_gradient_3_a);\n}\nconst float p_o520101_repeat = 6.000000000;\nconst float p_o270325_cx = 0.500000000;\nconst float p_o270325_cy = 0.500000000;\nconst float p_o270325_cz = 0.500000000;\nconst float p_o270325_sx = 0.250000000;\nconst float p_o270325_sy = 0.250000000;\nconst float p_o270325_sz = 0.250000000;\nconst float p_o270325_ry = 2.000000000;\nconst float p_o207924_d = 0.710000000;\nconst float p_o553530_radius = 0.320000000;\nconst float p_o553530_repeat = 5.000000000;\nconst float p_o57201_cx = 0.500000000;\nconst float p_o57201_cy = 0.710000000;\nconst float p_o254341_r = 0.500000000;\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o270325_0_1_f = 1.0-box((vec2(fract(p_o520101_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/(cos(iTime*0.001))*length((UV)-vec2(0.5))))), vec3(p_o270325_cx, p_o270325_cy, p_o270325_cz), vec3(p_o270325_sx, p_o270325_sy, p_o270325_sz), 0.01745329251*vec3((sin(iTime*0.9)*sin(iTime*0.9)), p_o270325_ry, (sin(iTime*0.9)*sin(iTime*0.9)*abs(iTime))));\nvec4 o520101_0_1_rgba = vec4(vec3(o270325_0_1_f), 1.0);\nvec4 o479214_0_1_rgba = o479214_gradient_gradient_fct((dot((o520101_0_1_rgba).rgb, vec3(1.0))/3.0));\nfloat o57201_0_1_f = sphere((vec2(fract(p_o553530_repeat*atan(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5)).y-0.5, ((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o553530_radius*length(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xy+vec2(0.5))-vec2(0.5))))), vec2(p_o57201_cx, p_o57201_cy), (sin(iTime*0.2)*sin(iTime*0.9)));\nvec4 o553530_0_1_rgba = vec4(vec3(o57201_0_1_f), 1.0);\nvec3 o241986_0_1_tex3d = ((o553530_0_1_rgba).rgb);\nvec2 o254341_0_q = vec2(length(((vec4(((o479214_0_1_rgba).rgb), 0.0)).xyz).xy)-(sin(iTime*0.2)),((vec4(((o479214_0_1_rgba).rgb), 0.0)).xyz).z);\nfloat o254341_0_1_sdf3d = length(o254341_0_q)-p_o254341_r;\nvec3 o207924_0_1_tex3d = mix(o241986_0_1_tex3d, vec3(0.5), clamp(o254341_0_1_sdf3d/max(p_o207924_d, 0.0001), 0.0, 1.0));\nvec3 o245261_0_1_rgb = o207924_0_1_tex3d;\nvec3 o241986_0_3_tex3d = ((o553530_0_1_rgba).rgb);\nvec3 o818931_0_1_rgb = o241986_0_3_tex3d;\nfloat o57201_0_3_f = sphere((vec2(fract(p_o553530_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o553530_radius*length((UV)-vec2(0.5))))), vec2(p_o57201_cx, p_o57201_cy), (sin(iTime*0.2)*sin(iTime*0.9)));\nvec4 o553530_0_3_rgba = vec4(vec3(o57201_0_3_f), 1.0);\nvec4 o398645_0_s1 = vec4(o245261_0_1_rgb, 1.0);\nvec4 o398645_0_s2 = vec4(o818931_0_1_rgb, 1.0);\nfloat o398645_0_a = p_o398645_amount*(dot((o553530_0_3_rgba).rgb, vec3(1.0))/3.0);\nvec4 o398645_0_1_rgba = vec4(blend_soft_light((UV), o398645_0_s1.rgb, o398645_0_s2.rgb, o398645_0_a*o398645_0_s1.a), min(1.0, o398645_0_s2.a+o398645_0_a*o398645_0_s1.a));\nvec4 o419741_0_1_rgba = o419741_gradient_gradient_fct((dot((o398645_0_1_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o419741_0_1_rgba;\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime",value:0}],portsOut:[{name:"trigger",value:0},{name:"Shader"},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.TextureEffects.ChromaticAberration",id:"787",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"add"},{name:"Amount",value:.716},{name:"Pixel",value:5.01},{name:"Lens Distort",value:.762},{name:"Smooth",value:false},{name:"Mask"}],portsOut:[{name:"trigger",links:[{portIn:"in0 Ops.Gl.TextureEffects.FastBlur trigger",portOut:"trigger",objIn:"841",objOut:"787"}]}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"788",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"789",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:0},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n//---\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat shape_circle(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float distance = length(uv);\n    return clamp((1.0-distance/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_polygon(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = atan(uv.x, uv.y)+3.14159265359;\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-(cos(floor(0.5+angle/slice)*slice-angle)*length(uv))/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_star(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = atan(uv.x, uv.y);\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-(cos(floor(angle*sides/6.28318530718-0.5+2.0*step(fract(angle*sides/6.28318530718), 0.5))*slice-angle)*length(uv))/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_curved_star(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = 2.0*(atan(uv.x, uv.y)+3.14159265359);\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-cos(floor(0.5+0.5*angle/slice)*2.0*slice-angle)*length(uv)/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_rays(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = 0.5*max(edge, 1.0e-8)*size;\n\tfloat slice = 6.28318530718/sides;\n    float angle = mod(atan(uv.x, uv.y)+3.14159265359, slice)/slice;\n    return clamp(min((size-angle)/edge, angle/edge), 0.0, 1.0);\n}\n\nvec2 rotate(vec2 uv, vec2 center, float rotate) {\n \tvec2 rv;\n\tuv -= center;\n\trv.x = cos(rotate)*uv.x + sin(rotate)*uv.y;\n\trv.y = -sin(rotate)*uv.x + cos(rotate)*uv.y;\n\trv += center;\n    return rv;\t\n}const float p_o370586_cx = 0.000000000;\nconst float p_o370586_cy = 0.000000000;\nconst float p_o265706_gradient_0_pos = 0.000000000;\nconst float p_o265706_gradient_0_r = 1.000000000;\nconst float p_o265706_gradient_0_g = 0.000000000;\nconst float p_o265706_gradient_0_b = 0.000000000;\nconst float p_o265706_gradient_0_a = 1.000000000;\nconst float p_o265706_gradient_1_pos = 0.399003462;\nconst float p_o265706_gradient_1_r = 0.035911076;\nconst float p_o265706_gradient_1_g = 0.145327628;\nconst float p_o265706_gradient_1_b = 0.574577212;\nconst float p_o265706_gradient_1_a = 1.000000000;\nconst float p_o265706_gradient_2_pos = 0.662364613;\nconst float p_o265706_gradient_2_r = 0.098464966;\nconst float p_o265706_gradient_2_g = 0.185065985;\nconst float p_o265706_gradient_2_b = 0.933593750;\nconst float p_o265706_gradient_2_a = 1.000000000;\nconst float p_o265706_gradient_3_pos = 1.000000000;\nconst float p_o265706_gradient_3_r = 0.000000000;\nconst float p_o265706_gradient_3_g = 0.062500000;\nconst float p_o265706_gradient_3_b = 1.000000000;\nconst float p_o265706_gradient_3_a = 1.000000000;\nvec4 o265706_gradient_gradient_fct(float x) {\n  if (x < p_o265706_gradient_0_pos) {\n    return vec4(p_o265706_gradient_0_r,p_o265706_gradient_0_g,p_o265706_gradient_0_b,p_o265706_gradient_0_a);\n  } else if (x < p_o265706_gradient_1_pos) {\n    return mix(vec4(p_o265706_gradient_0_r,p_o265706_gradient_0_g,p_o265706_gradient_0_b,p_o265706_gradient_0_a), vec4(p_o265706_gradient_1_r,p_o265706_gradient_1_g,p_o265706_gradient_1_b,p_o265706_gradient_1_a), ((x-p_o265706_gradient_0_pos)/(p_o265706_gradient_1_pos-p_o265706_gradient_0_pos)));\n  } else if (x < p_o265706_gradient_2_pos) {\n    return mix(vec4(p_o265706_gradient_1_r,p_o265706_gradient_1_g,p_o265706_gradient_1_b,p_o265706_gradient_1_a), vec4(p_o265706_gradient_2_r,p_o265706_gradient_2_g,p_o265706_gradient_2_b,p_o265706_gradient_2_a), ((x-p_o265706_gradient_1_pos)/(p_o265706_gradient_2_pos-p_o265706_gradient_1_pos)));\n  } else if (x < p_o265706_gradient_3_pos) {\n    return mix(vec4(p_o265706_gradient_2_r,p_o265706_gradient_2_g,p_o265706_gradient_2_b,p_o265706_gradient_2_a), vec4(p_o265706_gradient_3_r,p_o265706_gradient_3_g,p_o265706_gradient_3_b,p_o265706_gradient_3_a), ((x-p_o265706_gradient_2_pos)/(p_o265706_gradient_3_pos-p_o265706_gradient_2_pos)));\n  }\n  return vec4(p_o265706_gradient_3_r,p_o265706_gradient_3_g,p_o265706_gradient_3_b,p_o265706_gradient_3_a);\n}\nconst float p_o27497_radius = 1.000000000;\nconst float p_o27497_repeat = 7.000000000;\nconst float p_o22106_radius = 1.000000000;\nconst float p_o22106_repeat = 1.000000000;\nconst float p_o15531_radius = 1.500000000;\nconst float p_o15531_repeat = 1.000000000;\nconst float p_o35637_cx = 0.000000000;\nconst float p_o9383_sides = 5.000000000;\nconst float p_o9383_radius = 0.640000000;\nconst float p_o9383_edge = 0.500000000;\nvec3 o559231_input_in(vec2 uv, float _seed_variation_) {\nfloat o9383_0_1_f = shape_polygon((rotate((vec2(fract(p_o15531_repeat*atan((vec2(fract(p_o22106_repeat*atan((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o22106_radius*length((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5))))).y-0.5, (vec2(fract(p_o22106_repeat*atan((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o22106_radius*length((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o15531_radius*length((vec2(fract(p_o22106_repeat*atan((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).y-0.5, (vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5))))).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o22106_radius*length((vec2(fract(p_o27497_repeat*atan((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).y-0.5, (rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251)).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o27497_radius*length((rotate((uv), vec2(0.5+p_o370586_cx, 0.5+p_o370586_cy), (abs(iTime))*0.01745329251))-vec2(0.5)))))-vec2(0.5)))))-vec2(0.5))))), vec2(0.5+p_o35637_cx, 0.5+(sin(iTime * 0.009) * (iTime * 0.0005))), (sin(iTime * 0.05) * (iTime))*0.01745329251)), p_o9383_sides, p_o9383_radius*1.0, p_o9383_edge*1.0);\nvec4 o35637_0_1_rgba = vec4(vec3(o9383_0_1_f), 1.0);\nvec4 o15531_0_1_rgba = o35637_0_1_rgba;\nvec4 o22106_0_1_rgba = o15531_0_1_rgba;\nvec4 o27497_0_1_rgba = o22106_0_1_rgba;\nvec4 o265706_0_1_rgba = o265706_gradient_gradient_fct((dot((o27497_0_1_rgba).rgb, vec3(1.0))/3.0));\nvec4 o370586_0_1_rgba = o265706_0_1_rgba;\n\nreturn ((o370586_0_1_rgba).rgb);\n}\nfloat o559231_fct(vec2 uv, float _seed_variation_) {\n\tvec2 e = vec2(1.0/512.000000000, -1.0/512.000000000);\n\tvec3 rv = 4.0*o559231_input_in(uv, _seed_variation_);\n\trv -= o559231_input_in(uv+e.xy, _seed_variation_);\n\trv -= o559231_input_in(uv-e.xy, _seed_variation_);\n\trv -= o559231_input_in(uv+e.xx, _seed_variation_);\n\trv -= o559231_input_in(uv-e.xx, _seed_variation_);\n\trv = abs(rv);\n\treturn max(rv.x, max(rv.y ,rv.z))*512.000000000;\n}\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o559231_0_1_f = clamp(o559231_fct((UV), _seed_variation_), 0.0, 1.0);\ngl_FragColor = vec4(vec3(o559231_0_1_f), 1.0);\n}\n\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime",value:0}],portsOut:[{name:"trigger",value:0},{name:"Shader"},{name:"Has Errors",value:false}]},{objName:"Ops.Trigger.TriggerReceive",id:"790",uiAttribs:{subPatch:0},portsIn:[{name:"Named Trigger",value:"TimerStart"}],portsOut:[{name:"Triggered",links:[{portIn:"Reset",portOut:"Triggered",objIn:"776",objOut:"790"}]}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"791",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:89},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"792",objOut:"791"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"Y"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"792",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:11}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"792"}]}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"793",uiAttribs:{subPatch:0},portsIn:[{name:"render",value:null},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture",value:0}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"794",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n\n\nfloat dot2(vec2 x) {\n\treturn dot(x, x);\n}\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat wave_constant(float x) {\n\treturn 1.0;\n}\n\nfloat wave_sine(float x) {\n\treturn 0.5-0.5*cos(3.14159265359*2.0*x);\n}\n\nfloat wave_triangle(float x) {\n\tx = fract(x);\n\treturn min(2.0*x, 2.0-2.0*x);\n}\n\nfloat wave_sawtooth(float x) {\n\treturn fract(x);\n}\n\nfloat wave_square(float x) {\n\treturn (fract(x) < 0.5) ? 0.0 : 1.0;\n}\n\nfloat wave_bounce(float x) {\n\tx = 2.0*(fract(x)-0.5);\n\treturn sqrt(1.0-x*x);\n}\n\nfloat mix_mul(float x, float y) {\n\treturn x*y;\n}\n\nfloat mix_add(float x, float y) {\n\treturn min(x+y, 1.0);\n}\n\nfloat mix_max(float x, float y) {\n\treturn max(x, y);\n}\n\nfloat mix_min(float x, float y) {\n\treturn min(x, y);\n}\n\nfloat mix_xor(float x, float y) {\n\treturn min(x+y, 2.0-x-y);\n}\n\nfloat mix_pow(float x, float y) {\n\treturn pow(x, y);\n}vec4 brick(vec2 uv, vec2 bmin, vec2 bmax, float mortar, float round, float bevel) {\n\tfloat color;\n\tvec2 size = bmax - bmin;\n\tfloat min_size = min(size.x, size.y);\n\tmortar *= min_size;\n\tbevel *= min_size;\n\tround *= min_size;\n\tvec2 center = 0.5*(bmin+bmax);\n    vec2 d = abs(uv-center)-0.5*(size)+vec2(round+mortar);\n    color = length(max(d,vec2(0))) + min(max(d.x,d.y),0.0)-round;\n\tcolor = clamp(-color/bevel, 0.0, 1.0);\n\tvec2 tiled_brick_pos = mod(bmin, vec2(1.0, 1.0));\n\treturn vec4(color, center, tiled_brick_pos.x+7.0*tiled_brick_pos.y);\n}\n\nvec3 brick_random_color(vec2 bmin, vec2 bmax, float seed) {\n\tvec2 center = 0.5*(bmin + bmax);\n\treturn rand3(fract(center + vec2(seed)));\n}\n\nvec3 brick_uv(vec2 uv, vec2 bmin, vec2 bmax, float seed) {\n\tvec2 center = 0.5*(bmin + bmax);\n\tvec2 size = bmax - bmin;\n\tfloat max_size = max(size.x, size.y);\n\treturn vec3(0.5+(uv-center)/max_size, rand(fract(center)+vec2(seed)));\n}\n\nvec3 brick_corner_uv(vec2 uv, vec2 bmin, vec2 bmax, float mortar, float corner, float seed) {\n\tvec2 center = 0.5*(bmin + bmax);\n\tvec2 size = bmax - bmin;\n\tfloat max_size = max(size.x, size.y);\n\tfloat min_size = min(size.x, size.y);\n\tmortar *= min_size;\n\tcorner *= min_size;\n\treturn vec3(clamp((0.5*size-vec2(mortar)-abs(uv-center))/corner, vec2(0.0), vec2(1.0)), rand(fract(center)+vec2(seed)+ceil(vec2(uv-center))));\n}\n\nvec4 bricks_rb(vec2 uv, vec2 count, float repeat, float offset) {\n\tcount *= repeat;\n\tfloat x_offset = offset*step(0.5, fract(uv.y*count.y*0.5));\n\tvec2 bmin = floor(vec2(uv.x*count.x-x_offset, uv.y*count.y));\n\tbmin.x += x_offset;\n\tbmin /= count;\n\treturn vec4(bmin, bmin+vec2(1.0)/count);\n}\n\nvec4 bricks_rb2(vec2 uv, vec2 count, float repeat, float offset) {\n\tcount *= repeat;\n\tfloat x_offset = offset*step(0.5, fract(uv.y*count.y*0.5));\n\tcount.x = count.x*(1.0+step(0.5, fract(uv.y*count.y*0.5)));\n\tvec2 bmin = floor(vec2(uv.x*count.x-x_offset, uv.y*count.y));\n\tbmin.x += x_offset;\n\tbmin /= count;\n\treturn vec4(bmin, bmin+vec2(1.0)/count);\n}\n\nvec4 bricks_hb(vec2 uv, vec2 count, float repeat, float offset) {\n\tfloat pc = count.x+count.y;\n\tfloat c = pc*repeat;\n\tvec2 corner = floor(uv*c);\n\tfloat cdiff = mod(corner.x-corner.y, pc);\n\tif (cdiff < count.x) {\n\t\treturn vec4((corner-vec2(cdiff, 0.0))/c, (corner-vec2(cdiff, 0.0)+vec2(count.x, 1.0))/c);\n\t} else {\n\t\treturn vec4((corner-vec2(0.0, pc-cdiff-1.0))/c, (corner-vec2(0.0, pc-cdiff-1.0)+vec2(1.0, count.y))/c);\n\t}\n}\n\nvec4 bricks_bw(vec2 uv, vec2 count, float repeat, float offset) {\n\tvec2 c = 2.0*count*repeat;\n\tfloat mc = max(c.x, c.y);\n\tvec2 corner1 = floor(uv*c);\n\tvec2 corner2 = count*floor(repeat*2.0*uv);\n\tfloat cdiff = mod(dot(floor(repeat*2.0*uv), vec2(1.0)), 2.0);\n\tvec2 corner;\n\tvec2 size;\n\tif (cdiff == 0.0) {\n\t\tcorner = vec2(corner1.x, corner2.y);\n\t\tsize = vec2(1.0, count.y);\n\t} else {\n\t\tcorner = vec2(corner2.x, corner1.y);\n\t\tsize = vec2(count.x, 1.0);\n\t}\n\treturn vec4(corner/c, (corner+size)/c);\n}\n\nvec4 bricks_sb(vec2 uv, vec2 count, float repeat, float offset) {\n\tvec2 c = (count+vec2(1.0))*repeat;\n\tfloat mc = max(c.x, c.y);\n\tvec2 corner1 = floor(uv*c);\n\tvec2 corner2 = (count+vec2(1.0))*floor(repeat*uv);\n\tvec2 rcorner = corner1 - corner2;\n\tvec2 corner;\n\tvec2 size;\n\tif (rcorner.x == 0.0 && rcorner.y < count.y) {\n\t\tcorner = corner2;\n\t\tsize = vec2(1.0, count.y);\n\t} else if (rcorner.y == 0.0) {\n\t\tcorner = corner2+vec2(1.0, 0.0);\n\t\tsize = vec2(count.x, 1.0);\n\t} else if (rcorner.x == count.x) {\n\t\tcorner = corner2+vec2(count.x, 1.0);\n\t\tsize = vec2(1.0, count.y);\n\t} else if (rcorner.y == count.y) {\n\t\tcorner = corner2+vec2(0.0, count.y);\n\t\tsize = vec2(count.x, 1.0);\n\t} else {\n\t\tcorner = corner2+vec2(1.0);\n\t\tsize = vec2(count.x-1.0, count.y-1.0);\n\t}\n\treturn vec4(corner/c, (corner+size)/c);\n}vec2 transform(vec2 uv, vec2 translate, float rotate, vec2 scale, bool repeat) {\n \tvec2 rv;\n\tuv -= translate;\n\tuv -= vec2(0.5);\n\trv.x = cos(rotate)*uv.x + sin(rotate)*uv.y;\n\trv.y = -sin(rotate)*uv.x + cos(rotate)*uv.y;\n\trv /= scale;\n\trv += vec2(0.5);\n    if (repeat) {\n\t\treturn fract(rv);\n\t} else {\n\t\treturn clamp(rv, vec2(0.0), vec2(1.0));\n\t}\t\n}vec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nfloat sphere(vec2 uv, vec2 c, float r) {\n\tuv -= c;\n\tuv /= r;\n\treturn 2.0*r*sqrt(max(0.0, 1.0-dot(uv, uv)));\n}\nvec2 sdLine(vec2 p, vec2 a, vec2 b) {\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp(dot(pa,ba)/dot(ba,ba), 0.0, 1.0);\n    return vec2(length(pa-ba*h), h);\n}\nfloat smin(float d1, float d2, float k) {\n    float h = clamp( 0.5 + 0.5*(d2-d1)/k, 0.0, 1.0 );\n    return mix( d2, d1, h ) - k*h*(1.0-h);\n}\n\nfloat smax(float d1, float d2, float k) {\n\tfloat h = clamp( 0.5 - 0.5*(d2-d1)/k, 0.0, 1.0 );\n\treturn mix( d2, d1, h ) + k*h*(1.0-h); \n}float rand31(vec3 p) {\n\treturn fract(sin(dot(p,vec3(127.1,311.7, 74.7)))*43758.5453123);\n}\nvec3 rand33(vec3 p){\n\tp = vec3( dot(p,vec3(127.1,311.7, 74.7)),\n\t\t\t  dot(p,vec3(269.5,183.3,246.1)),\n\t\t\t  dot(p,vec3(113.5,271.9,124.6)));\n\n\treturn -1.0 + 2.0*fract(sin(p)*43758.5453123);\n}\n\nfloat tex3d_fbm_value(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tfloat p000 = rand31(mod(o, size));\n\tfloat p001 = rand31(mod(o + vec3(0.0, 0.0, 1.0), size));\n\tfloat p010 = rand31(mod(o + vec3(0.0, 1.0, 0.0), size));\n\tfloat p011 = rand31(mod(o + vec3(0.0, 1.0, 1.0), size));\n\tfloat p100 = rand31(mod(o + vec3(1.0, 0.0, 0.0), size));\n\tfloat p101 = rand31(mod(o + vec3(1.0, 0.0, 1.0), size));\n\tfloat p110 = rand31(mod(o + vec3(1.0, 1.0, 0.0), size));\n\tfloat p111 = rand31(mod(o + vec3(1.0, 1.0, 1.0), size));\n\tvec3 t = f * f * (3.0 - 2.0 * f);\n\treturn mix(mix(mix(p000, p100, t.x), mix(p010, p110, t.x), t.y), mix(mix(p001, p101, t.x), mix(p011, p111, t.x), t.y), t.z);\n}\n\nfloat tex3d_fbm_value_nowrap(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tfloat p000 = rand31(o);\n\tfloat p001 = rand31(o + vec3(0.0, 0.0, 1.0));\n\tfloat p010 = rand31(o + vec3(0.0, 1.0, 0.0));\n\tfloat p011 = rand31(o + vec3(0.0, 1.0, 1.0));\n\tfloat p100 = rand31(o + vec3(1.0, 0.0, 0.0));\n\tfloat p101 = rand31(o + vec3(1.0, 0.0, 1.0));\n\tfloat p110 = rand31(o + vec3(1.0, 1.0, 0.0));\n\tfloat p111 = rand31(o + vec3(1.0, 1.0, 1.0));\n\tvec3 t = f * f * (3.0 - 2.0 * f);\n\treturn mix(mix(mix(p000, p100, t.x), mix(p010, p110, t.x), t.y), mix(mix(p001, p101, t.x), mix(p011, p111, t.x), t.y), t.z);\n}\n\nfloat tex3d_fbm_perlin(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tvec3 v000 = normalize(rand33(mod(o, size))-vec3(0.5));\n\tvec3 v001 = normalize(rand33(mod(o + vec3(0.0, 0.0, 1.0), size))-vec3(0.5));\n\tvec3 v010 = normalize(rand33(mod(o + vec3(0.0, 1.0, 0.0), size))-vec3(0.5));\n\tvec3 v011 = normalize(rand33(mod(o + vec3(0.0, 1.0, 1.0), size))-vec3(0.5));\n\tvec3 v100 = normalize(rand33(mod(o + vec3(1.0, 0.0, 0.0), size))-vec3(0.5));\n\tvec3 v101 = normalize(rand33(mod(o + vec3(1.0, 0.0, 1.0), size))-vec3(0.5));\n\tvec3 v110 = normalize(rand33(mod(o + vec3(1.0, 1.0, 0.0), size))-vec3(0.5));\n\tvec3 v111 = normalize(rand33(mod(o + vec3(1.0, 1.0, 1.0), size))-vec3(0.5));\n\tfloat p000 = dot(v000, f);\n\tfloat p001 = dot(v001, f - vec3(0.0, 0.0, 1.0));\n\tfloat p010 = dot(v010, f - vec3(0.0, 1.0, 0.0));\n\tfloat p011 = dot(v011, f - vec3(0.0, 1.0, 1.0));\n\tfloat p100 = dot(v100, f - vec3(1.0, 0.0, 0.0));\n\tfloat p101 = dot(v101, f - vec3(1.0, 0.0, 1.0));\n\tfloat p110 = dot(v110, f - vec3(1.0, 1.0, 0.0));\n\tfloat p111 = dot(v111, f - vec3(1.0, 1.0, 1.0));\n\tvec3 t = f * f * (3.0 - 2.0 * f);\n\treturn 0.5 + mix(mix(mix(p000, p100, t.x), mix(p010, p110, t.x), t.y), mix(mix(p001, p101, t.x), mix(p011, p111, t.x), t.y), t.z);\n}\n\nfloat tex3d_fbm_perlin_nowrap(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tvec3 v000 = normalize(rand33(o)-vec3(0.5));\n\tvec3 v001 = normalize(rand33(o + vec3(0.0, 0.0, 1.0))-vec3(0.5));\n\tvec3 v010 = normalize(rand33(o + vec3(0.0, 1.0, 0.0))-vec3(0.5));\n\tvec3 v011 = normalize(rand33(o + vec3(0.0, 1.0, 1.0))-vec3(0.5));\n\tvec3 v100 = normalize(rand33(o + vec3(1.0, 0.0, 0.0))-vec3(0.5));\n\tvec3 v101 = normalize(rand33(o + vec3(1.0, 0.0, 1.0))-vec3(0.5));\n\tvec3 v110 = normalize(rand33(o + vec3(1.0, 1.0, 0.0))-vec3(0.5));\n\tvec3 v111 = normalize(rand33(o + vec3(1.0, 1.0, 1.0))-vec3(0.5));\n\tfloat p000 = dot(v000, f);\n\tfloat p001 = dot(v001, f - vec3(0.0, 0.0, 1.0));\n\tfloat p010 = dot(v010, f - vec3(0.0, 1.0, 0.0));\n\tfloat p011 = dot(v011, f - vec3(0.0, 1.0, 1.0));\n\tfloat p100 = dot(v100, f - vec3(1.0, 0.0, 0.0));\n\tfloat p101 = dot(v101, f - vec3(1.0, 0.0, 1.0));\n\tfloat p110 = dot(v110, f - vec3(1.0, 1.0, 0.0));\n\tfloat p111 = dot(v111, f - vec3(1.0, 1.0, 1.0));\n\tvec3 t = f * f * (3.0 - 2.0 * f);\n\treturn 0.5 + mix(mix(mix(p000, p100, t.x), mix(p010, p110, t.x), t.y), mix(mix(p001, p101, t.x), mix(p011, p111, t.x), t.y), t.z);\n}\n\nfloat tex3d_fbm_cellular(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tfloat min_dist = 3.0;\n\tfor (float x = -1.0; x <= 1.0; x++) {\n\t\tfor (float y = -1.0; y <= 1.0; y++) {\n\t\t\tfor (float z = -1.0; z <= 1.0; z++) {\n\t\t\t\tvec3 node = 0.4*rand33(mod(o + vec3(x, y, z), size)) + vec3(x, y, z);\n\t\t\t\tfloat dist = sqrt((f - node).x * (f - node).x + (f - node).y * (f - node).y + (f - node).z * (f - node).z);\n\t\t\t\tmin_dist = min(min_dist, dist);\n\t\t\t}\n\t\t}\n\t}\n\treturn min_dist;\n}\n\nfloat tex3d_fbm_cellular_nowrap(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tfloat min_dist = 3.0;\n\tfor (float x = -1.0; x <= 1.0; x++) {\n\t\tfor (float y = -1.0; y <= 1.0; y++) {\n\t\t\tfor (float z = -1.0; z <= 1.0; z++) {\n\t\t\t\tvec3 node = 0.4*rand33(o + vec3(x, y, z)) + vec3(x, y, z);\n\t\t\t\tfloat dist = sqrt((f - node).x * (f - node).x + (f - node).y * (f - node).y + (f - node).z * (f - node).z);\n\t\t\t\tmin_dist = min(min_dist, dist);\n\t\t\t}\n\t\t}\n\t}\n\treturn min_dist;\n}\n// https://iquilezles.org/www/articles/fbmsdf/fbmsdf.htm\nfloat fbm_sph( ivec3 i, vec3 f, ivec3 c, float seed )\n{\n\t// Line below randomizes the positions of each sphere, this can cause a bit of artifacting,\n\t// but also makes for a much more natural effect. Disabled for now.\n\t//f += rand3( vec2(i.xy + c.xy) - vec2( float(i.z + c.z) ) ) - vec3(0.5);\n\t// random radius at grid vertex i+c\n\tfloat rad = 0.5*rand31(vec3(i+c) + vec3(seed));\n\t// distance to sphere at grid vertex i+c\n\treturn length(f-vec3(c)) - rad; \n}\n\nfloat sdBase( vec3 p, float seed )\n{\n   ivec3 i = ivec3(floor(p));\n    vec3 f =       fract(p);\n   // distance to the 8 corners spheres\n   return min(min(min(fbm_sph(i,f,ivec3(0,0,0), seed),\n                      fbm_sph(i,f,ivec3(0,0,1), seed)),\n                  min(fbm_sph(i,f,ivec3(0,1,0), seed),\n                      fbm_sph(i,f,ivec3(0,1,1), seed))),\n              min(min(fbm_sph(i,f,ivec3(1,0,0), seed),\n                      fbm_sph(i,f,ivec3(1,0,1), seed)),\n                  min(fbm_sph(i,f,ivec3(1,1,0), seed),\n                      fbm_sph(i,f,ivec3(1,1,1), seed))));\n}\n\nfloat sdFbm( vec3 p, float d, int iterations, float smoothness, float seed, float scaling, int mode)\n{\n\tfloat s = 1.0;\n\tfor( int i=0; i<iterations; i++ )\n\t{\n\t\t// evaluate new octave\n\t\tfloat n = s*sdBase(p, seed);\n\t\t\n\t\tif(mode == 0) {\n\t\t\t// add\n\t\t\tn = smax(n,d - scaling * s,smoothness * s);\n\t\t\td = smin(n,d             ,smoothness * s);\n\t\t} else {\n\t\t\t// subtract\n\t\t\td = smax(d - scaling * s, -n, smoothness * s );\n\t\t}\n\t\t\n\t\t// prepare next octave\n\t\tp = mat3(vec3(0.02, 1.60, 1.20),\n\t\t\t\tvec3(-1.60, 0.72,-0.96),\n\t\t\t\tvec3(-1.20,-0.96, 1.28))*p;\n\t\ts = 0.5*s;\n\t}\n\treturn d;\n}vec2 sdf3d_smooth_union(vec2 d1, vec2 d2, float k) {\n    float h = clamp(0.5+0.5*(d2.x-d1.x)/k, 0.0, 1.0);\n    return vec2(mix(d2.x, d1.x, h)-k*h*(1.0-h), mix(d2.y, d1.y, step(d1.x, d2.x)));\n}\n\nvec2 sdf3d_smooth_subtraction(vec2 d1, vec2 d2, float k ) {\n    float h = clamp(0.5-0.5*(d2.x+d1.x)/k, 0.0, 1.0);\n    return vec2(mix(d2.x, -d1.x, h )+k*h*(1.0-h), d2.y);\n}\n\nvec2 sdf3d_smooth_intersection(vec2 d1, vec2 d2, float k ) {\n    float h = clamp(0.5-0.5*(d2.x-d1.x)/k, 0.0, 1.0);\n    return vec2(mix(d2.x, d1.x, h)+k*h*(1.0-h), mix(d1.y, d2.y, step(d1.x, d2.x)));\n}\nvec2 rotate(vec2 uv, vec2 center, float rotate) {\n \tvec2 rv;\n\tuv -= center;\n\trv.x = cos(rotate)*uv.x + sin(rotate)*uv.y;\n\trv.y = -sin(rotate)*uv.x + cos(rotate)*uv.y;\n\trv += center;\n    return rv;\t\n}vec2 sdf3dc_union(vec2 a, vec2 b) {\n\treturn vec2(min(a.x, b.x), mix(b.y, a.y, step(a.x, b.x)));\n}\nvec2 sdf3dc_sub(vec2 a, vec2 b) {\n\treturn vec2(max(-a.x, b.x), a.y);\n}\nvec2 sdf3dc_inter(vec2 a, vec2 b) {\n\treturn vec2(max(a.x, b.x), mix(a.y, b.y, step(a.x, b.x)));\n}\nconst float p_o208638_amount = 0.800000000;\nconst float p_o202919_radius = 1.000000000;\nconst float p_o202919_repeat = 3.000000000;\nconst float p_o200479_amount = 1.000000000;\nconst float p_o200480_x_scale = 4.000000000;\nconst float p_o200480_y_scale = 4.000000000;\nfloat o200480_fct(vec2 uv, float _seed_variation_) {\n\treturn mix_mul(wave_sine(p_o200480_x_scale*uv.x), wave_constant(p_o200480_y_scale*uv.y));\n}const float p_o200460_translate_x = 0.975000000;\nconst float p_o200460_translate_y = 0.000000000;\nconst float p_o200460_rotate = 30.125000000;\nconst float p_o200460_scale_x = 0.500000000;\nconst float p_o200460_scale_y = 1.000000000;\nconst float seed_o200474 = -61325.000000000;\nconst float p_o200474_repeat = 1.000000000;\nconst float p_o200474_rows = 1.000000000;\nconst float p_o200474_columns = 4.000000000;\nconst float p_o200474_row_offset = 0.500000000;\nconst float p_o200474_mortar = 0.100000000;\nconst float p_o200474_bevel = 0.100000000;\nconst float p_o200474_round = 0.000000000;\nconst float p_o200474_corner = 0.000000000;\nconst float p_o200461_gradient_0_pos = 0.000000000;\nconst float p_o200461_gradient_0_r = 0.437500000;\nconst float p_o200461_gradient_0_g = 0.437500000;\nconst float p_o200461_gradient_0_b = 0.437500000;\nconst float p_o200461_gradient_0_a = 1.000000000;\nconst float p_o200461_gradient_1_pos = 1.000000000;\nconst float p_o200461_gradient_1_r = 1.000000000;\nconst float p_o200461_gradient_1_g = 1.000000000;\nconst float p_o200461_gradient_1_b = 1.000000000;\nconst float p_o200461_gradient_1_a = 1.000000000;\nvec4 o200461_gradient_gradient_fct(float x) {\n  if (x < p_o200461_gradient_0_pos) {\n    return vec4(p_o200461_gradient_0_r,p_o200461_gradient_0_g,p_o200461_gradient_0_b,p_o200461_gradient_0_a);\n  } else if (x < p_o200461_gradient_1_pos) {\n    return mix(vec4(p_o200461_gradient_0_r,p_o200461_gradient_0_g,p_o200461_gradient_0_b,p_o200461_gradient_0_a), vec4(p_o200461_gradient_1_r,p_o200461_gradient_1_g,p_o200461_gradient_1_b,p_o200461_gradient_1_a), ((x-p_o200461_gradient_0_pos)/(p_o200461_gradient_1_pos-p_o200461_gradient_0_pos)));\n  }\n  return vec4(p_o200461_gradient_1_r,p_o200461_gradient_1_g,p_o200461_gradient_1_b,p_o200461_gradient_1_a);\n}\nconst float p_o200475_x_scale = 4.000000000;\nconst float p_o200475_y_scale = 4.000000000;\nfloat o200475_fct(vec2 uv, float _seed_variation_) {\n\treturn mix_mul(wave_sine(p_o200475_x_scale*uv.x), wave_constant(p_o200475_y_scale*uv.y));\n}const float seed_o9593 = 0.000000000;\nconst float p_o9593_iterations = 8.000000000;\nconst float p_o9593_scaling = 0.300000000;\nconst float p_o7952_d = 0.670000000;\nconst float p_o484473_ax = 0.152238786;\nconst float p_o484473_ay = -0.244776070;\nconst float p_o484473_bx = 0.199999988;\nconst float p_o484473_by = 0.197014928;\nconst float p_o484473_r = 0.250000000;\nconst float p_o78207_cx = 0.370000000;\nconst float p_o78207_cy = 0.420000000;\nconst float p_o78207_r = 0.870000000;\nconst float seed_o46634 = 0.721985400;\nconst float p_o46634_v1 = 0.100000000;\nconst float p_o46634_v2 = 0.100000000;\nconst float p_o46634_v3 = 0.200000000;\nconst float p_o46634_v4 = 0.300000000;\nconst float p_o46634_v5 = 0.400000000;\nconst float p_o36911_x = 0.200000000;\nconst float p_o36911_y = 0.020000000;\nconst float p_o36911_z = -0.130000000;\nconst float p_o11735_x = 0.000000000;\nconst float p_o11735_y = 0.130000000;\nconst float p_o11735_z = 0.070000000;\nconst float p_o14203_k = 0.750000000;\nconst float p_o17347_a = 47.000000000;\nconst float p_o16591_R = -0.610000000;\nvec2 o46634_input_in(vec3 p, float _seed_variation_) {\nfloat o17347_0_1_sdf3d = dot(vec2(cos(p_o17347_a*0.01745329251),sin(p_o17347_a*0.01745329251)),vec2(length((((p)-clamp((p), -abs(vec3(p_o36911_x, p_o36911_y, p_o36911_z)), abs(vec3(p_o36911_x, p_o36911_y, p_o36911_z))))-vec3(p_o11735_x, p_o11735_y, p_o11735_z)).xz),(((p)-clamp((p), -abs(vec3(p_o36911_x, p_o36911_y, p_o36911_z)), abs(vec3(p_o36911_x, p_o36911_y, p_o36911_z))))-vec3(p_o11735_x, p_o11735_y, p_o11735_z)).y));\nvec2 o16591_0_q = vec2(length((((p)-clamp((p), -abs(vec3(p_o36911_x, p_o36911_y, p_o36911_z)), abs(vec3(p_o36911_x, p_o36911_y, p_o36911_z))))-vec3(p_o11735_x, p_o11735_y, p_o11735_z)).xy)-p_o16591_R,(((p)-clamp((p), -abs(vec3(p_o36911_x, p_o36911_y, p_o36911_z)), abs(vec3(p_o36911_x, p_o36911_y, p_o36911_z))))-vec3(p_o11735_x, p_o11735_y, p_o11735_z)).z);\nfloat o16591_0_1_sdf3d = length(o16591_0_q)-(cos(iTime));\nvec2 o14203_0_1_sdf3dc = sdf3d_smooth_union(vec2(o17347_0_1_sdf3d, 0.0), vec2(o16591_0_1_sdf3d, 0.0), p_o14203_k);\nvec2 o11735_0_1_sdf3dc = o14203_0_1_sdf3dc;\nvec2 o36911_0_1_sdf3dc = o11735_0_1_sdf3dc;\n\nreturn o36911_0_1_sdf3dc;\n}\nvec2 o124264_input_sdf(vec3 p, float _seed_variation_) {\nvec2 o7952_0_q = vec2(length((p).xy)-p_o7952_d+0.5, (p).z+0.5);\nvec2 o484473_0_sdl = sdLine((o7952_0_q), vec2(p_o484473_ax+0.5, p_o484473_ay+0.5), vec2(p_o484473_bx+0.5, p_o484473_by+0.5));float o78207_0_1_f = sphere((vec2(o484473_0_sdl.y, 0.5)), vec2(p_o78207_cx, p_o78207_cy), p_o78207_r);\nfloat o484473_0_1_sdf2d = o484473_0_sdl.x-p_o484473_r*o78207_0_1_f;\nfloat o7952_0_1_sdf3d = o484473_0_1_sdf2d;\nfloat o9593_0_1_sdf3d = sdFbm((p), o7952_0_1_sdf3d, int(p_o9593_iterations), (sin(iTime) + 1.2), (seed_o9593+_seed_variation_), p_o9593_scaling, 0);\nvec2 o46634_2_1_sdf3dc = o46634_input_in((p), (seed_o46634+_seed_variation_)+p_o46634_v3);\nvec2 o86520_0_1_sdf3dc = sdf3dc_sub(vec2(o9593_0_1_sdf3d, 0.0), o46634_2_1_sdf3dc);\n\nreturn o86520_0_1_sdf3dc;\n}\nvec2 raymarch_o124264(vec2 uv, float _seed_variation_) {\n\tvec3 ro = vec3(uv-vec2(0.5), 1.0);\n\tvec3 rd = vec3(0.0, 0.0, -1.0);\n\tfloat dO = 0.0;\n\tfloat c = 0.0;\n    for (int i=0; i < 100; i++) {\n    \tvec3 p = ro + rd*dO;\n        vec2 dS = o124264_input_sdf(p, _seed_variation_);\n        dO += dS.x;\n\n        if (dO >= 1.0) {\n\t\t\tbreak;\n\t\t} else if (dS.x < 0.0001) {\n\t\t\tc = dS.y;\n\t\t\tbreak;\n\t\t}\n    }\n    \n    return vec2(dO, c);\n}\n\nvec3 normal_o124264(vec3 p, float _seed_variation_) {\n\tif (p.z <= 0.0) {\n\t\treturn vec3(0.0, 0.0, -1.0);\n\t}\n\n\tfloat d = o124264_input_sdf(p, _seed_variation_).x;\n    float e = .001;\n    \n    vec3 n = d - vec3(\n        o124264_input_sdf(p-vec3(e, 0.0, 0.0), _seed_variation_).x,\n        o124264_input_sdf(p-vec3(0.0, e, 0.0), _seed_variation_).x,\n        o124264_input_sdf(p-vec3(0.0, 0.0, e), _seed_variation_).x);\n    \n    return vec3(-1.0, -1.0, -1.0)*normalize(n);\n}\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nfloat o200480_0_1_f = o200480_fct((vec2(fract(p_o202919_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o202919_radius*length((UV)-vec2(0.5))))), _seed_variation_);\nvec4 o200474_0_rect = bricks_rb((vec2(fract(p_o202919_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o202919_radius*length((UV)-vec2(0.5))))), vec2(p_o200474_columns, p_o200474_rows), p_o200474_repeat, p_o200474_row_offset);\nvec4 o200474_0 = brick((vec2(fract(p_o202919_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o202919_radius*length((UV)-vec2(0.5))))), o200474_0_rect.xy, o200474_0_rect.zw, p_o200474_mortar*1.0, p_o200474_round*1.0, max(0.001, p_o200474_bevel*1.0));\nvec3 o200474_1_2_rgb = brick_random_color(o200474_0_rect.xy, o200474_0_rect.zw, float((seed_o200474+_seed_variation_)));\nfloat o200475_0_1_f = o200475_fct((transform((vec2(fract(p_o202919_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o202919_radius*length((UV)-vec2(0.5))))), vec2(p_o200460_translate_x*(2.0*(dot(o200474_1_2_rgb, vec3(1.0))/3.0)-1.0), p_o200460_translate_y*(2.0*1.0-1.0)), p_o200460_rotate*0.01745329251*(2.0*1.0-1.0), vec2(p_o200460_scale_x*(2.0*1.0-1.0), p_o200460_scale_y*(2.0*1.0-1.0)), true)), _seed_variation_);\nvec4 o200461_0_1_rgba = o200461_gradient_gradient_fct(o200475_0_1_f);\nvec4 o200460_0_1_rgba = o200461_0_1_rgba;\nvec4 o200479_0_s1 = vec4(vec3(o200480_0_1_f), 1.0);\nvec4 o200479_0_s2 = o200460_0_1_rgba;\nfloat o200479_0_a = p_o200479_amount*1.0;\nvec4 o200479_0_2_rgba = vec4(blend_multiply((vec2(fract(p_o202919_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o202919_radius*length((UV)-vec2(0.5))))), o200479_0_s1.rgb, o200479_0_s2.rgb, o200479_0_a*o200479_0_s1.a), min(1.0, o200479_0_s2.a+o200479_0_a*o200479_0_s1.a));\nvec4 o202919_0_1_rgba = o200479_0_2_rgba;\nvec2 o124264_0_d = raymarch_o124264((UV), _seed_variation_);\nvec3 o124264_1_1_rgb = vec3(0.5)+0.5*normal_o124264(vec3((UV)-vec2(0.5), 1.0-o124264_0_d.x), _seed_variation_);\nfloat o124264_0_2_f = clamp(1.0-o124264_0_d.x, 0.0, 1.0);\nvec4 o208638_0_s1 = o202919_0_1_rgba;\nvec4 o208638_0_s2 = vec4(o124264_1_1_rgb, 1.0);\nfloat o208638_0_a = p_o208638_amount*o124264_0_2_f;\nvec4 o208638_0_1_rgba = vec4(blend_difference((UV), o208638_0_s1.rgb, o208638_0_s2.rgb, o208638_0_a*o208638_0_s1.a), min(1.0, o208638_0_s2.a+o208638_0_a*o208638_0_s1.a));\ngl_FragColor = o208638_0_1_rgba;\n}\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"795",objOut:"794"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"795",objOut:"794"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"795",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"798",objOut:"795"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"796",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:.72},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"794",objOut:"796"},{portIn:"Time",portOut:"Time",objIn:"807",objOut:"796"}]}]},{objName:"Ops.Sequence",id:"797",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"794",objOut:"797"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",links:[{portIn:"Render",portOut:"trigger 15",objIn:"817",objOut:"797"}]}]},{objName:"Ops.Ui.VizTexture",id:"798",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"799",objOut:"798"}]},{name:"Info",value:""}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"799",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"806",objOut:"799"},{portIn:"render",portOut:"trigger",objIn:"808",objOut:"799"},{portIn:"render",portOut:"trigger",objIn:"809",objOut:"799"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"800",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"clamp to edge"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"exe",portOut:"Next",objIn:"797",objOut:"800"},{portIn:"render",portOut:"Next",objIn:"799",objOut:"800"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"802",objOut:"800"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.GradientTexture",id:"801",uiAttribs:{subPatch:0},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":8.881784197001252e-16,"g":0,"b":1},{"pos":0.208,"r":8.881784197001252e-16,"g":0,"b":1},{"pos":0.976,"r":1,"g":0,"b":0},{"pos":1,"r":1,"g":0,"b":0}]}'},{name:"Direction index",value:0},{name:"Direction",value:"Radial"},{name:"Smoothstep",value:false},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:512},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Gradient",portOut:"Texture",objIn:"806",objOut:"801"},{portIn:"Gradient",portOut:"Texture",objIn:"810",objOut:"801"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"802",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Trigger.TriggerReceive",id:"803",uiAttribs:{subPatch:0},portsIn:[{name:"Named Trigger",value:"TimerStart"}],portsOut:[{name:"Triggered",links:[{portIn:"Reset",portOut:"Triggered",objIn:"796",objOut:"803"}]}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"804",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:88},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"805",objOut:"804"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"X"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"805",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:12}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"805"}]}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"806",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"multiply invert"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:0},{name:"Max",value:.436},{name:"Position",value:1}],portsOut:[{name:"trigger",links:[{portIn:"in0 Ops.Gl.TextureEffects.FastBlur trigger",portOut:"trigger",objIn:"841",objOut:"806"}]}]},{objName:"Ops.Gl.TextureEffects.Plasma",id:"807",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"color dodge"},{name:"Amount",value:1},{name:"Width",value:19.39},{name:"Height",value:25.1},{name:"Mul",value:5.78},{name:"offset X",value:-.13},{name:"offset Y",value:2.96},{name:"Time"},{name:"Greyscale",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"810",objOut:"807"}]}]},{objName:"Ops.Gl.TextureEffects.ScaleTexture",id:"808",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Multiplier",value:0},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"color dodge"},{name:"Amount",value:1},{name:"Scale X",value:1},{name:"Scale Y",value:.49},{name:"offset X",value:0},{name:"offset Y",value:0},{name:"center X",value:.567},{name:"center Y",value:0}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"807",objOut:"808"}]}]},{objName:"Ops.Gl.TextureEffects.FastBlur",id:"809",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"amount",value:.28},{name:"Clamp",value:false},{name:"Mask Invert",value:false},{name:"Mask",value:0},{name:"direction index",value:0},{name:"direction",value:"both"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"810",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:0},{name:"Max",value:.822},{name:"Position",value:.489}],portsOut:[{name:"trigger",links:[{portIn:"in0 Ops.Gl.TextureEffects.FastBlur trigger",portOut:"trigger",objIn:"841",objOut:"810"}]}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"811",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI sampler2D iChannel0;\nUNI vec3 iResolution;\nUNI float iTime;\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n\nfloat dot2(vec2 x) {\n\treturn dot(x, x);\n}\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nfloat wave_constant(float x) {\n\treturn 1.0;\n}\n\nfloat wave_sine(float x) {\n\treturn 0.5-0.5*cos(3.14159265359*2.0*x);\n}\n\nfloat wave_triangle(float x) {\n\tx = fract(x);\n\treturn min(2.0*x, 2.0-2.0*x);\n}\n\nfloat wave_sawtooth(float x) {\n\treturn fract(x);\n}\n\nfloat wave_square(float x) {\n\treturn (fract(x) < 0.5) ? 0.0 : 1.0;\n}\n\nfloat wave_bounce(float x) {\n\tx = 2.0*(fract(x)-0.5);\n\treturn sqrt(1.0-x*x);\n}\n\nfloat mix_mul(float x, float y) {\n\treturn x*y;\n}\n\nfloat mix_add(float x, float y) {\n\treturn min(x+y, 1.0);\n}\n\nfloat mix_max(float x, float y) {\n\treturn max(x, y);\n}\n\nfloat mix_min(float x, float y) {\n\treturn min(x, y);\n}\n\nfloat mix_xor(float x, float y) {\n\treturn min(x+y, 2.0-x-y);\n}\n\nfloat mix_pow(float x, float y) {\n\treturn pow(x, y);\n}vec4 brick(vec2 uv, vec2 bmin, vec2 bmax, float mortar, float round, float bevel, float brick_height) {\n\tfloat color;\n\tvec2 size = bmax - bmin;\n\tfloat min_size = min(size.x, size.y);\n\n\tmortar *= brick_height;\n\tbevel *= brick_height;\n\tround *= brick_height;\n\n\tvec2 center = 0.5*(bmin+bmax);\n    vec2 d = abs(uv-center)-0.5*(size)+vec2(round+mortar);\n    color = length(max(d,vec2(0))) + min(max(d.x,d.y),0.0)-round;\n\tcolor = clamp(-color/bevel, 0.0, 1.0);\n\tvec2 tiled_brick_pos = mod(bmin, vec2(1.0, 1.0));\n\treturn vec4(color, center, tiled_brick_pos.x+7.0*tiled_brick_pos.y);\n}\n\nvec4 brick_corner_bb(vec2 uv, vec2 bmin, vec2 bmax, float mortar, float corner, float brick_height) {\n\tvec2 center = 0.5*(bmin + bmax);\n\tvec2 size = bmax - bmin;\n\tfloat max_size = max(size.x, size.y);\n\tfloat min_size = min(size.x, size.y);\n\n\tmortar *= brick_height;\n\tcorner *= brick_height;\n\t\n\tvec2 corner1 = vec2(bmin + mortar);\n\tvec2 corner2 = vec2(bmax.x - mortar - corner, bmin.y + mortar);\n\tvec2 corner3 = vec2(bmin.x + mortar, bmax.y - mortar - corner);\n\tvec2 corner4 = vec2(bmax - mortar - corner);\n\tvec2 top = uv.x < center.x ? corner1 : corner2;\n\tvec2 bottom = uv.x < center.x ? corner3 : corner4;\n\tvec2 positions = uv.y < center.y ? top : bottom;\n\treturn vec4(round(fract(positions)*4096.0)/4096.0, corner, corner);\n}\n\nvec4 bricks_rb(vec2 uv, vec2 count, float offset) {\n\tfloat x_offset = offset*step(0.5, fract(uv.y*count.y*0.5));\n\tvec2 bmin = floor(vec2(uv.x*count.x-x_offset, uv.y*count.y));\n\tbmin.x += x_offset;\n\tbmin /= count;\n\treturn vec4(bmin, bmin+vec2(1.0)/count);\n}\n\nvec4 bricks_rb2(vec2 uv, vec2 count, float offset) {\n\tfloat x_offset = offset*step(0.5, fract(uv.y*count.y*0.5));\n\tcount.x = count.x*(1.0+step(0.5, fract(uv.y*count.y*0.5)));\n\tvec2 bmin = floor(vec2(uv.x*count.x-x_offset, uv.y*count.y));\n\tbmin.x += x_offset;\n\tbmin /= count;\n\treturn vec4(bmin, bmin+vec2(1.0)/count);\n}\n\nvec4 bricks_rb3(vec2 uv, vec2 count, float offset) {\n\tvec4 bb = bricks_rb(uv, count, offset);\n\t\n\tif ( (uv.x - bb.x) / (bb.z - bb.x) < 1.0/3.0) {\n\t\tbb.z = bb.x + (bb.z - bb.x) / 3.0;\n\t} else {\n\t\tbb.x = bb.x + (bb.z - bb.x) / 3.0;\n\t}\n\treturn bb;\n}\n\nvec4 bricks_hb(vec2 uv, vec2 count, float offset) {\n\tfloat pc = count.x+count.y;\n\tfloat c = pc;\n\tvec2 corner = floor(uv*c);\n\tfloat cdiff = mod(corner.x-corner.y, pc);\n\tif (cdiff < count.x) {\n\t\treturn vec4((corner-vec2(cdiff, 0.0))/c, (corner-vec2(cdiff, 0.0)+vec2(count.x, 1.0))/c);\n\t} else {\n\t\treturn vec4((corner-vec2(0.0, pc-cdiff-1.0))/c, (corner-vec2(0.0, pc-cdiff-1.0)+vec2(1.0, count.y))/c);\n\t}\n}\n\nvec4 bricks_bw(vec2 uv, vec2 count, float offset) {\n\tvec2 c = 2.0*count;\n\tfloat mc = max(c.x, c.y);\n\tvec2 corner1 = floor(uv*c);\n\tvec2 corner2 = count*floor(2.0*uv);\n\tfloat cdiff = mod(dot(floor(2.0*uv), vec2(1.0)), 2.0);\n\tvec2 corner;\n\tvec2 size;\n\tif (cdiff == 0.0) {\n\t\tcorner = vec2(corner1.x, corner2.y);\n\t\tsize = vec2(1.0, count.y);\n\t} else {\n\t\tcorner = vec2(corner2.x, corner1.y);\n\t\tsize = vec2(count.x, 1.0);\n\t}\n\treturn vec4(corner/c, (corner+size)/c);\n}\n\nvec4 bricks_sb(vec2 uv, vec2 count, float offset) {\n\tvec2 c = (count+vec2(1.0));\n\tfloat mc = max(c.x, c.y);\n\tvec2 corner1 = floor(uv*c);\n\tvec2 corner2 = (count+vec2(1.0))*floor(uv);\n\tvec2 rcorner = corner1 - corner2;\n\tvec2 corner;\n\tvec2 size;\n\tif (rcorner.x == 0.0 && rcorner.y < count.y) {\n\t\tcorner = corner2;\n\t\tsize = vec2(1.0, count.y);\n\t} else if (rcorner.y == 0.0) {\n\t\tcorner = corner2+vec2(1.0, 0.0);\n\t\tsize = vec2(count.x, 1.0);\n\t} else if (rcorner.x == count.x) {\n\t\tcorner = corner2+vec2(count.x, 1.0);\n\t\tsize = vec2(1.0, count.y);\n\t} else if (rcorner.y == count.y) {\n\t\tcorner = corner2+vec2(0.0, count.y);\n\t\tsize = vec2(count.x, 1.0);\n\t} else {\n\t\tcorner = corner2+vec2(1.0);\n\t\tsize = vec2(count.x-1.0, count.y-1.0);\n\t}\n\treturn vec4(corner/c, (corner+size)/c);\n}float shape_circle(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float distance = length(uv);\n    return clamp((1.0-distance/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_polygon(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = atan(uv.x, uv.y)+3.14159265359;\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-(cos(floor(0.5+angle/slice)*slice-angle)*length(uv))/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_star(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = atan(uv.x, uv.y);\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-(cos(floor(angle*sides/6.28318530718-0.5+2.0*step(fract(angle*sides/6.28318530718), 0.5))*slice-angle)*length(uv))/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_curved_star(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = max(edge, 1.0e-8);\n    float angle = 2.0*(atan(uv.x, uv.y)+3.14159265359);\n    float slice = 6.28318530718/sides;\n    return clamp((1.0-cos(floor(0.5+0.5*angle/slice)*2.0*slice-angle)*length(uv)/size)/edge, 0.0, 1.0);\n}\n\nfloat shape_rays(vec2 uv, float sides, float size, float edge) {\n    uv = 2.0*uv-1.0;\n\tedge = 0.5*max(edge, 1.0e-8)*size;\n\tfloat slice = 6.28318530718/sides;\n    float angle = mod(atan(uv.x, uv.y)+3.14159265359, slice)/slice;\n    return clamp(min((size-angle)/edge, angle/edge), 0.0, 1.0);\n}\n\nvec2 sdLine(vec2 p, vec2 a, vec2 b) {\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp(dot(pa,ba)/dot(ba,ba), 0.0, 1.0);\n    return vec2(length(pa-ba*h), h);\n}\nvec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nconst float p_o380864_amount = 0.890000000;\nconst float p_o273771_radius = 0.990000000;\nconst float p_o273771_repeat = 6.000000000;\nconst float p_o188690_gradient_0_pos = 0.000000000;\nconst float p_o188690_gradient_0_r = 1.000000000;\nconst float p_o188690_gradient_0_g = 0.000000000;\nconst float p_o188690_gradient_0_b = 0.000000000;\nconst float p_o188690_gradient_0_a = 1.000000000;\nconst float p_o188690_gradient_1_pos = 0.527273005;\nconst float p_o188690_gradient_1_r = 0.000000000;\nconst float p_o188690_gradient_1_g = 1.000000000;\nconst float p_o188690_gradient_1_b = 0.125000000;\nconst float p_o188690_gradient_1_a = 1.000000000;\nconst float p_o188690_gradient_2_pos = 0.772726995;\nconst float p_o188690_gradient_2_r = 0.000000000;\nconst float p_o188690_gradient_2_g = 0.062500000;\nconst float p_o188690_gradient_2_b = 1.000000000;\nconst float p_o188690_gradient_2_a = 1.000000000;\nvec4 o188690_gradient_gradient_fct(float x) {\n  if (x < p_o188690_gradient_0_pos) {\n    return vec4(p_o188690_gradient_0_r,p_o188690_gradient_0_g,p_o188690_gradient_0_b,p_o188690_gradient_0_a);\n  } else if (x < p_o188690_gradient_1_pos) {\n    return mix(vec4(p_o188690_gradient_0_r,p_o188690_gradient_0_g,p_o188690_gradient_0_b,p_o188690_gradient_0_a), vec4(p_o188690_gradient_1_r,p_o188690_gradient_1_g,p_o188690_gradient_1_b,p_o188690_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o188690_gradient_0_pos)/(p_o188690_gradient_1_pos-p_o188690_gradient_0_pos)));\n  } else if (x < p_o188690_gradient_2_pos) {\n    return mix(vec4(p_o188690_gradient_1_r,p_o188690_gradient_1_g,p_o188690_gradient_1_b,p_o188690_gradient_1_a), vec4(p_o188690_gradient_2_r,p_o188690_gradient_2_g,p_o188690_gradient_2_b,p_o188690_gradient_2_a), 0.5-0.5*cos(3.14159265359*(x-p_o188690_gradient_1_pos)/(p_o188690_gradient_2_pos-p_o188690_gradient_1_pos)));\n  }\n  return vec4(p_o188690_gradient_2_r,p_o188690_gradient_2_g,p_o188690_gradient_2_b,p_o188690_gradient_2_a);\n}\nconst float p_o226039_bevel = 0.080000000;\nconst float p_o226039_base = 0.170000000;\nconst float p_o263115_s = 1.100000000;\nconst float p_o214466_ax = 0.280000000;\nconst float p_o214466_by = 0.160000000;\nconst float p_o214466_r = 0.600000000;\nconst float p_o132339_x_scale = 0.210000000;\nconst float p_o132339_y_scale = 0.200000000;\nfloat o132339_fct(vec2 uv, float _seed_variation_) {\n\treturn mix_xor(wave_sine(p_o132339_x_scale*uv.x), wave_sawtooth(p_o132339_y_scale*uv.y));\n}const float p_o80009_d = 0.300000000;\nconst float p_o12323_sides = 6.000000000;\nconst float p_o12323_radius = 0.760000000;\nconst float p_o12323_edge = 0.100000000;\nconst float p_o24363_amplitude = 0.910000000;\nconst float p_o24363_frequency = 6.000000000;\nconst float p_o7873_rows = 28.000000000;\nconst float p_o7873_columns = 1.000000000;\nconst float p_o7873_row_offset = 0.040000000;\nconst float p_o7873_mortar = 0.220000000;\nconst float p_o7873_bevel = 0.280000000;\nconst float p_o7873_round = 0.180000000;\nconst float p_o7873_corner = 0.310000000;\nconst float p_o154128_x = -0.010000000;\nconst float p_o154128_z = -0.030000000;\nconst float p_o50538_l = 0.640000000;\nconst float p_o50538_r = 0.510000000;\n\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o214466_0_sdl = sdLine((((vec2(fract(p_o273771_repeat*atan((UV).y-0.5, (UV).x-0.5)*0.15915494309), min(0.99999, 2.0/p_o273771_radius*length((UV)-vec2(0.5)))))-vec2(0.5))/p_o263115_s+vec2(0.5)), vec2(p_o214466_ax+0.5, (sin(iTime*.3))+0.5), vec2((sin(iTime  *.3))+0.5, p_o214466_by+0.5));float o132339_0_1_f = o132339_fct((vec2(o214466_0_sdl.y, 0.5)), _seed_variation_);\nfloat o24363_0_1_f = 1.0-abs(2.0*(((vec4(vec3(o132339_0_1_f), 0.0)).xy+vec2(0.5)).y-0.5)-p_o24363_amplitude*sin((p_o24363_frequency*((vec4(vec3(o132339_0_1_f), 0.0)).xy+vec2(0.5)).x+(cos(iTime)))*6.28318530718));\nvec4 o7873_0_rect = bricks_hb(((vec4(vec3(o132339_0_1_f), 0.0)).xy+vec2(0.5)), vec2(p_o7873_columns, p_o7873_rows), p_o7873_row_offset);\nvec4 o7873_0 = brick(((vec4(vec3(o132339_0_1_f), 0.0)).xy+vec2(0.5)), o7873_0_rect.xy, o7873_0_rect.zw, p_o7873_mortar*o24363_0_1_f, p_o7873_round*1.0, max(0.001, p_o7873_bevel*1.0), 1.0 / p_o7873_rows);float o7873_0_2_f = o7873_0.x;\nfloat o12323_0_1_f = shape_polygon(((vec4(vec3(o132339_0_1_f), 0.0)).xy+vec2(0.5)), p_o12323_sides, p_o12323_radius*o24363_0_1_f, p_o12323_edge*o7873_0_2_f);\nvec3 o85291_0_1_tex3d = vec3(o12323_0_1_f);\nvec3 o50538_0_p = (((vec4(vec3(o132339_0_1_f), 0.0)).xyz)-vec3(p_o154128_x, (sin(iTime)), p_o154128_z));\no50538_0_p.y -= clamp(o50538_0_p.y, -p_o50538_l, p_o50538_l);\nfloat o24363_0_3_f = 1.0-abs(2.0*((vec2(clamp(0.5+0.5*((((vec4(vec3(o132339_0_1_f), 0.0)).xyz)-vec3(p_o154128_x, (sin(iTime)), p_o154128_z))).y/p_o50538_l, 0.0, 1.0), 0.5)).y-0.5)-p_o24363_amplitude*sin((p_o24363_frequency*(vec2(clamp(0.5+0.5*((((vec4(vec3(o132339_0_1_f), 0.0)).xyz)-vec3(p_o154128_x, (sin(iTime)), p_o154128_z))).y/p_o50538_l, 0.0, 1.0), 0.5)).x+(cos(iTime)))*6.28318530718));\nvec4 o7873_3_rect = bricks_hb((vec2(clamp(0.5+0.5*((((vec4(vec3(o132339_0_1_f), 0.0)).xyz)-vec3(p_o154128_x, (sin(iTime)), p_o154128_z))).y/p_o50538_l, 0.0, 1.0), 0.5)), vec2(p_o7873_columns, p_o7873_rows), p_o7873_row_offset);\nvec4 o7873_3 = brick((vec2(clamp(0.5+0.5*((((vec4(vec3(o132339_0_1_f), 0.0)).xyz)-vec3(p_o154128_x, (sin(iTime)), p_o154128_z))).y/p_o50538_l, 0.0, 1.0), 0.5)), o7873_3_rect.xy, o7873_3_rect.zw, p_o7873_mortar*o24363_0_3_f, p_o7873_round*1.0, max(0.001, p_o7873_bevel*1.0), 1.0 / p_o7873_rows);float o7873_0_5_f = o7873_3.x;\nfloat o50538_0_1_sdf3d = length(o50538_0_p)-p_o50538_r*o7873_0_5_f;\nvec2 o154128_0_1_sdf3dc = vec2(o50538_0_1_sdf3d, 0.0);\nvec3 o80009_0_1_tex3d = mix(o85291_0_1_tex3d, vec3(0.5), clamp((o154128_0_1_sdf3dc).x/max(p_o80009_d, 0.0001), 0.0, 1.0));\nvec3 o96275_0_1_rgb = o80009_0_1_tex3d;\nfloat o214466_0_1_sdf2d = o214466_0_sdl.x-p_o214466_r*(dot(o96275_0_1_rgb, vec3(1.0))/3.0);\nfloat o263115_0_1_sdf2d = o214466_0_1_sdf2d*p_o263115_s;\nfloat o226039_0_1_f = clamp(p_o226039_base-o263115_0_1_sdf2d/max(p_o226039_bevel, 0.00001), 0.0, 1.0);\nvec4 o188690_0_1_rgba = o188690_gradient_gradient_fct(o226039_0_1_f);\nvec4 o273771_0_1_rgba = o188690_0_1_rgba;\nfloat o132339_0_3_f = o132339_fct((UV), _seed_variation_);\nfloat o24363_0_5_f = 1.0-abs(2.0*(((vec4(vec3(o132339_0_3_f), 0.0)).xy+vec2(0.5)).y-0.5)-p_o24363_amplitude*sin((p_o24363_frequency*((vec4(vec3(o132339_0_3_f), 0.0)).xy+vec2(0.5)).x+(cos(iTime)))*6.28318530718));\nvec4 o7873_6_rect = bricks_hb(((vec4(vec3(o132339_0_3_f), 0.0)).xy+vec2(0.5)), vec2(p_o7873_columns, p_o7873_rows), p_o7873_row_offset);\nvec4 o7873_6 = brick(((vec4(vec3(o132339_0_3_f), 0.0)).xy+vec2(0.5)), o7873_6_rect.xy, o7873_6_rect.zw, p_o7873_mortar*o24363_0_5_f, p_o7873_round*1.0, max(0.001, p_o7873_bevel*1.0), 1.0 / p_o7873_rows);float o7873_0_8_f = o7873_6.x;\nfloat o12323_0_3_f = shape_polygon(((vec4(vec3(o132339_0_3_f), 0.0)).xy+vec2(0.5)), p_o12323_sides, p_o12323_radius*o24363_0_5_f, p_o12323_edge*o7873_0_8_f);\nvec3 o85291_0_3_tex3d = vec3(o12323_0_3_f);\nvec3 o50538_2_p = (((vec4(vec3(o132339_0_3_f), 0.0)).xyz)-vec3(p_o154128_x, (sin(iTime)), p_o154128_z));\no50538_2_p.y -= clamp(o50538_2_p.y, -p_o50538_l, p_o50538_l);\nfloat o24363_0_7_f = 1.0-abs(2.0*((vec2(clamp(0.5+0.5*((((vec4(vec3(o132339_0_3_f), 0.0)).xyz)-vec3(p_o154128_x, (sin(iTime)), p_o154128_z))).y/p_o50538_l, 0.0, 1.0), 0.5)).y-0.5)-p_o24363_amplitude*sin((p_o24363_frequency*(vec2(clamp(0.5+0.5*((((vec4(vec3(o132339_0_3_f), 0.0)).xyz)-vec3(p_o154128_x, (sin(iTime)), p_o154128_z))).y/p_o50538_l, 0.0, 1.0), 0.5)).x+(cos(iTime)))*6.28318530718));\nvec4 o7873_9_rect = bricks_hb((vec2(clamp(0.5+0.5*((((vec4(vec3(o132339_0_3_f), 0.0)).xyz)-vec3(p_o154128_x, (sin(iTime)), p_o154128_z))).y/p_o50538_l, 0.0, 1.0), 0.5)), vec2(p_o7873_columns, p_o7873_rows), p_o7873_row_offset);\nvec4 o7873_9 = brick((vec2(clamp(0.5+0.5*((((vec4(vec3(o132339_0_3_f), 0.0)).xyz)-vec3(p_o154128_x, (sin(iTime)), p_o154128_z))).y/p_o50538_l, 0.0, 1.0), 0.5)), o7873_9_rect.xy, o7873_9_rect.zw, p_o7873_mortar*o24363_0_7_f, p_o7873_round*1.0, max(0.001, p_o7873_bevel*1.0), 1.0 / p_o7873_rows);float o7873_0_11_f = o7873_9.x;\nfloat o50538_0_3_sdf3d = length(o50538_2_p)-p_o50538_r*o7873_0_11_f;\nvec2 o154128_0_3_sdf3dc = vec2(o50538_0_3_sdf3d, 0.0);\nvec3 o80009_0_4_tex3d = mix(o85291_0_3_tex3d, vec3(0.5), clamp((o154128_0_3_sdf3dc).x/max(p_o80009_d, 0.0001), 0.0, 1.0));\nvec3 o96275_0_3_rgb = o80009_0_4_tex3d;\nvec4 o380864_0_s1 = o273771_0_1_rgba;\nvec4 o380864_0_s2 = vec4(o96275_0_3_rgb, 1.0);\nfloat o380864_0_a = p_o380864_amount*1.0;\nvec4 o380864_0_2_rgba = vec4(blend_normal((UV), o380864_0_s1.rgb, o380864_0_s2.rgb, o380864_0_a*o380864_0_s1.a), min(1.0, o380864_0_s2.a+o380864_0_a*o380864_0_s1.a));\ngl_FragColor = o380864_0_2_rgba;\n}\n"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iChannel0"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1},{name:"iResolution Z",value:1.29},{name:"iTime"}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"812",objOut:"811"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"812",objOut:"811"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"812",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture",links:[{portIn:"Texture In",portOut:"Texture",objIn:"815",objOut:"812"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Anim.Timer_v2",id:"813",uiAttribs:{subPatch:0},portsIn:[{name:"Speed",value:1.2},{name:"Play",value:true},{name:"Reset"},{name:"Sync to timeline",value:false}],portsOut:[{name:"Time",links:[{portIn:"iTime",portOut:"Time",objIn:"811",objOut:"813"}]}]},{objName:"Ops.Sequence",id:"814",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"render",portOut:"trigger 0",objIn:"811",objOut:"814"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0}]},{objName:"Ops.Ui.VizTexture",id:"815",uiAttribs:{subPatch:0},portsIn:[{name:"Texture In"}],portsOut:[{name:"Texture Out",links:[{portIn:"Image",portOut:"Texture Out",objIn:"816",objOut:"815"}]},{name:"Info",value:""}]},{objName:"Ops.Gl.TextureEffects.DrawImage_v3",id:"816",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"blendMode index",value:0},{name:"blendMode",value:"normal"},{name:"amount",value:1},{name:"Image"},{name:"Premultiplied",value:false},{name:"Alpha Mask",value:false},{name:"removeAlphaSrc",value:false},{name:"Mask",value:0},{name:"Mask Src index",value:1},{name:"Mask Src",value:"alpha channel"},{name:"Invert alpha channel",value:false},{name:"Aspect Ratio",value:false},{name:"Stretch Axis index",value:0},{name:"Stretch Axis",value:"X"},{name:"Position",value:0},{name:"Crop",value:false},{name:"flip x",value:false},{name:"flip y",value:false},{name:"Transform",value:false},{name:"Scale X",value:1},{name:"Scale Y",value:1},{name:"Position X",value:0},{name:"Position Y",value:0},{name:"Rotation",value:0},{name:"Clip Repeat",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"821",objOut:"816"}]}]},{objName:"Ops.Gl.TextureEffects.ImageCompose_v2",id:"817",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Use viewport size",value:true},{name:"Width",value:640},{name:"Height",value:480},{name:"Filter index",value:1},{name:"Filter",value:"linear"},{name:"Wrap index",value:1},{name:"Wrap",value:"clamp to edge"},{name:"HDR",value:false},{name:"Transparent",value:false}],portsOut:[{name:"Next",links:[{portIn:"exe",portOut:"Next",objIn:"814",objOut:"817"},{portIn:"render",portOut:"Next",objIn:"816",objOut:"817"}]},{name:"texture_out",links:[{portIn:"Texture",portOut:"texture_out",objIn:"819",objOut:"817"}]},{name:"Aspect Ratio",value:2}]},{objName:"Ops.Gl.GradientTexture",id:"818",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[{name:"Gradient",value:'{"keys":[{"pos":0,"r":8.881784197001252e-16,"g":0,"b":1},{"pos":0.704,"r":8.881784197001252e-16,"g":0,"b":1},{"pos":0.976,"r":1,"g":0,"b":0},{"pos":1,"r":1,"g":0,"b":0}]}'},{name:"Direction index",value:0},{name:"Direction",value:"Radial"},{name:"Smoothstep",value:true},{name:"Step",value:false},{name:"Flip",value:false},{name:"sRGB",value:false},{name:"Oklab",value:false},{name:"Size",value:512},{name:"filter index",value:1},{name:"filter",value:"linear"},{name:"wrap index",value:0},{name:"wrap",value:"clamp to edge"},{name:"Gradient Array",value:0}],portsOut:[{name:"Texture",links:[{portIn:"Gradient",portOut:"Texture",objIn:"822",objOut:"818"},{portIn:"Offset",portOut:"Texture",objIn:"825",objOut:"818"}]},{name:"Colors"},{name:"Colors Pos"}]},{objName:"Ops.Gl.Meshes.FullscreenRectangle",id:"819",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Scale index",value:0},{name:"Scale",value:"Stretch"},{name:"Flip Y",value:false},{name:"Flip X",value:false},{name:"Texture"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Trigger.TriggerReceive",id:"820",uiAttribs:{subPatch:0},portsIn:[{name:"Named Trigger",value:"TimerStart"}],portsOut:[{name:"Triggered",links:[{portIn:"Reset",portOut:"Triggered",objIn:"813",objOut:"820"}]}]},{objName:"Ops.Gl.TextureEffects.FastBlur",id:"821",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"amount",value:.28},{name:"Clamp",value:false},{name:"Mask Invert",value:false},{name:"Mask",value:0},{name:"direction index",value:0},{name:"direction",value:"both"}],portsOut:[{name:"trigger",links:[{portIn:"in0 Ops.Gl.TextureEffects.FastBlur trigger",portOut:"trigger",objIn:"841",objOut:"821"}]}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"822",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Luminance"},{name:"Min",value:0},{name:"Max",value:.822},{name:"Position",value:.489}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"823",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:67},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Set",portOut:"on press",objIn:"824",objOut:"823"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"C"}]},{objName:"Ops.Trigger.SetNumberOnTrigger",id:"824",uiAttribs:{subPatch:0},portsIn:[{name:"Set"},{name:"Number",value:13}],portsOut:[{name:"Next",value:0},{name:"Out Value",links:[{portIn:"value",portOut:"Out Value",objIn:"45",objOut:"824"}]}]},{objName:"Ops.Gl.TextureEffects.Hue",id:"825",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[{name:"render"},{name:"hue"},{name:"Mask",value:0},{name:"Offset"}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Gl.TextureEffects.EdgeDetection_v3",id:"826",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[{name:"Render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"softlight"},{name:"Amount",value:1},{name:"Strength",value:4.5},{name:"Width",value:.471},{name:"Mul Color",value:.077}],portsOut:[{name:"Trigger",links:[{portIn:"render",portOut:"Trigger",objIn:"825",objOut:"826"},{portIn:"exe",portOut:"Trigger",objIn:"833",objOut:"826"}]}]},{objName:"Ops.Boolean.IfTrueThen_v2",id:"827",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[{name:"exe"},{name:"boolean"}],portsOut:[{name:"then",links:[{portIn:"Render",portOut:"then",objIn:"826",objOut:"827"}]},{name:"else",value:0}]},{objName:"Ops.TimeLine.TimeLineTime",id:"828",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[],portsOut:[{name:"time",links:[{portIn:"hue",portOut:"time",objIn:"825",objOut:"828"}]}]},{objName:"Ops.Trigger.TriggerReceive",id:"829",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[{name:"Named Trigger",value:"StartOption"}],portsOut:[{name:"Triggered",links:[{portIn:"trigger",portOut:"Triggered",objIn:"830",objOut:"829"}]}]},{objName:"Ops.Boolean.ToggleBool",id:"830",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[{name:"trigger"},{name:"reset",value:0},{name:"Default",value:false}],portsOut:[{name:"result",links:[{portIn:"boolean",portOut:"result",objIn:"827",objOut:"830"}]}]},{objName:"Ops.Trigger.TriggerSend",id:"831",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger"},{name:"Named Trigger",value:"StartOption"}],portsOut:[]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"832",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:18},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Trigger",portOut:"on press",objIn:"831",objOut:"832"}]},{name:"on release",value:0},{name:"Pressed",value:1},{name:"Key",value:"Alt"}]},{objName:"Ops.Boolean.IfTrueThen_v2",id:"833",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[{name:"exe"},{name:"boolean"}],portsOut:[{name:"then",links:[{portIn:"render",portOut:"then",objIn:"822",objOut:"833"}]},{name:"else",value:0}]},{objName:"Ops.Boolean.ToggleBool",id:"834",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[{name:"trigger"},{name:"reset",value:0},{name:"Default",value:false}],portsOut:[{name:"result",links:[{portIn:"boolean",portOut:"result",objIn:"833",objOut:"834"}]}]},{objName:"Ops.Trigger.TriggerSend",id:"835",uiAttribs:{subPatch:0},portsIn:[{name:"Trigger"},{name:"Named Trigger",value:"Kanool"}],portsOut:[]},{objName:"Ops.Trigger.TriggerReceive",id:"836",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[{name:"Named Trigger",value:"Kanool"}],portsOut:[{name:"Triggered",links:[{portIn:"trigger",portOut:"Triggered",objIn:"834",objOut:"836"}]}]},{objName:"Ops.Devices.Keyboard.KeyPressLearn",id:"837",uiAttribs:{subPatch:0},portsIn:[{name:"key code",value:220},{name:"canvas only",value:true},{name:"Mod Key index",value:0},{name:"Mod Key",value:"none"},{name:"Enabled",value:true},{name:"Prevent Default",value:false},{name:"learn",value:0}],portsOut:[{name:"on press",links:[{portIn:"Trigger",portOut:"on press",objIn:"835",objOut:"837"}]},{name:"on release",value:0},{name:"Pressed",value:0},{name:"Key",value:"Ü"}]},{objName:"Ops.Ui.Area",id:"838",uiAttribs:{subPatch:0},portsIn:[{name:"Title",value:""}],portsOut:[]},{objName:"Ops.Ui.PatchInput",id:"839",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[],portsOut:[{name:"create port",value:0},{name:"in0 Ops.Gl.TextureEffects.FastBlur trigger",links:[{portIn:"exe",portOut:"in0 Ops.Gl.TextureEffects.FastBlur trigger",objIn:"827",objOut:"839"}]}]},{objName:"Ops.Ui.PatchOutput",id:"840",uiAttribs:{subPatch:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},portsIn:[{name:"create port",value:0}],portsOut:[]},{objName:"Ops.Ui.SubPatch",id:"841",uiAttribs:{subPatch:0},portsIn:[{name:"create port",value:null},{name:"dataStr",value:'{"ports":[{"name":"in0 Ops.Gl.TextureEffects.FastBlur trigger","type":1}],"portsOut":[]}'},{name:"patchId",value:"adc50a25-9f4e-47c9-9d47-e24be2e6e1d0"},{name:"in0 Ops.Gl.TextureEffects.FastBlur trigger"}],portsOut:[{name:"create port out",value:0}]},{objName:"Ops.Sequence",id:"842",uiAttribs:{subPatch:0},portsIn:[{name:"exe",value:0},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7"},{name:"exe 8"},{name:"exe 9"},{name:"exe 10"},{name:"exe 11"},{name:"exe 12"},{name:"exe 13"},{name:"exe 14"}],portsOut:[{name:"trigger 0",links:[{portIn:"in0 Ops.Gl.TextureEffects.FastBlur trigger",portOut:"trigger 0",objIn:"841",objOut:"842"}]},{name:"trigger 1",value:0},{name:"trigger 2",value:0},{name:"trigger 3",value:0},{name:"trigger 4",value:0},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0}]},{objName:"Ops.Sequence",id:"843",uiAttribs:{subPatch:0},portsIn:[{name:"exe",value:null},{name:"Clean up connections",value:0},{name:"exe 0",value:0},{name:"exe 1",value:0},{name:"exe 2",value:0},{name:"exe 3",value:0},{name:"exe 4",value:0},{name:"exe 5",value:0},{name:"exe 6",value:0},{name:"exe 7",value:0},{name:"exe 8",value:0},{name:"exe 9",value:0},{name:"exe 10",value:0},{name:"exe 11",value:0},{name:"exe 12",value:0},{name:"exe 13",value:0},{name:"exe 14",value:0}],portsOut:[{name:"trigger 0",links:[{portIn:"in4 Ops.Gl.MainLoop trigger",portOut:"trigger 0",objIn:"454",objOut:"843"}]},{name:"trigger 1",links:[{portIn:"in0 Ops.Sequence trigger 2",portOut:"trigger 1",objIn:"454",objOut:"843"}]},{name:"trigger 2",links:[{portIn:"in1 Ops.Sequence trigger 15",portOut:"trigger 2",objIn:"454",objOut:"843"}]},{name:"trigger 3",links:[{portIn:"in2 Ops.Sequence trigger 13",portOut:"trigger 3",objIn:"454",objOut:"843"}]},{name:"trigger 4",links:[{portIn:"in3 Ops.Gl.MainLoop trigger",portOut:"trigger 4",objIn:"454",objOut:"843"}]},{name:"trigger 5",value:0},{name:"trigger 6",value:0},{name:"trigger 7",value:0},{name:"trigger 8",value:0},{name:"trigger 9",value:0},{name:"trigger 10",value:0},{name:"trigger 11",value:0},{name:"trigger 12",value:0},{name:"trigger 13",value:0},{name:"trigger 14",value:0},{name:"trigger 15",value:0}]},{objName:"Ops.Gl.Shader.CustomShader_v2",id:"844",uiAttribs:{subPatch:0},portsIn:[{name:"render"},{name:"Fragment Code",value:"UNI float iTime;\nUNI vec2 iResolution;\n\n\n/* Generated by Material Maker */\n\n#define SEED_VARIATION 0.0\n\n\n\nfloat dot2(vec2 x) {\n\treturn dot(x, x);\n}\n\nfloat rand(vec2 x) {\n    return fract(cos(mod(dot(x, vec2(13.9898, 8.141)), 3.14)) * 43758.5453);\n}\n\nvec2 rand2(vec2 x) {\n    return fract(cos(mod(vec2(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t      dot(x, vec2(3.4562, 17.398))), vec2(3.14))) * 43758.5453);\n}\n\nvec3 rand3(vec2 x) {\n    return fract(cos(mod(vec3(dot(x, vec2(13.9898, 8.141)),\n\t\t\t\t\t\t\t  dot(x, vec2(3.4562, 17.398)),\n                              dot(x, vec2(13.254, 5.867))), vec3(3.14))) * 43758.5453);\n}\n\nvec3 rgb2hsv(vec3 c) {\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n\tvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nfloat param_rnd(float minimum, float maximum, float seed) {\n\treturn minimum+(maximum-minimum)*rand(vec2(seed));\n}\nvec2 sdLine(vec2 p, vec2 a, vec2 b) {\n    vec2 pa = p-a, ba = b-a;\n    float h = clamp(dot(pa,ba)/dot(ba,ba), 0.0, 1.0);\n    return vec2(length(pa-ba*h), h);\n}\nfloat smin(float d1, float d2, float k) {\n    float h = clamp( 0.5 + 0.5*(d2-d1)/k, 0.0, 1.0 );\n    return mix( d2, d1, h ) - k*h*(1.0-h);\n}\n\nfloat smax(float d1, float d2, float k) {\n\tfloat h = clamp( 0.5 - 0.5*(d2-d1)/k, 0.0, 1.0 );\n\treturn mix( d2, d1, h ) + k*h*(1.0-h); \n}float rand31(vec3 p) {\n\treturn fract(sin(dot(p,vec3(127.1,311.7, 74.7)))*43758.5453123);\n}\nvec3 rand33(vec3 p){\n\tp = vec3( dot(p,vec3(127.1,311.7, 74.7)),\n\t\t\t  dot(p,vec3(269.5,183.3,246.1)),\n\t\t\t  dot(p,vec3(113.5,271.9,124.6)));\n\n\treturn -1.0 + 2.0*fract(sin(p)*43758.5453123);\n}\n\nfloat tex3d_fbm_value(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tfloat p000 = rand31(mod(o, size));\n\tfloat p001 = rand31(mod(o + vec3(0.0, 0.0, 1.0), size));\n\tfloat p010 = rand31(mod(o + vec3(0.0, 1.0, 0.0), size));\n\tfloat p011 = rand31(mod(o + vec3(0.0, 1.0, 1.0), size));\n\tfloat p100 = rand31(mod(o + vec3(1.0, 0.0, 0.0), size));\n\tfloat p101 = rand31(mod(o + vec3(1.0, 0.0, 1.0), size));\n\tfloat p110 = rand31(mod(o + vec3(1.0, 1.0, 0.0), size));\n\tfloat p111 = rand31(mod(o + vec3(1.0, 1.0, 1.0), size));\n\tvec3 t = f * f * (3.0 - 2.0 * f);\n\treturn mix(mix(mix(p000, p100, t.x), mix(p010, p110, t.x), t.y), mix(mix(p001, p101, t.x), mix(p011, p111, t.x), t.y), t.z);\n}\n\nfloat tex3d_fbm_value_nowrap(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tfloat p000 = rand31(o);\n\tfloat p001 = rand31(o + vec3(0.0, 0.0, 1.0));\n\tfloat p010 = rand31(o + vec3(0.0, 1.0, 0.0));\n\tfloat p011 = rand31(o + vec3(0.0, 1.0, 1.0));\n\tfloat p100 = rand31(o + vec3(1.0, 0.0, 0.0));\n\tfloat p101 = rand31(o + vec3(1.0, 0.0, 1.0));\n\tfloat p110 = rand31(o + vec3(1.0, 1.0, 0.0));\n\tfloat p111 = rand31(o + vec3(1.0, 1.0, 1.0));\n\tvec3 t = f * f * (3.0 - 2.0 * f);\n\treturn mix(mix(mix(p000, p100, t.x), mix(p010, p110, t.x), t.y), mix(mix(p001, p101, t.x), mix(p011, p111, t.x), t.y), t.z);\n}\n\nfloat tex3d_fbm_perlin(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tvec3 v000 = normalize(rand33(mod(o, size))-vec3(0.5));\n\tvec3 v001 = normalize(rand33(mod(o + vec3(0.0, 0.0, 1.0), size))-vec3(0.5));\n\tvec3 v010 = normalize(rand33(mod(o + vec3(0.0, 1.0, 0.0), size))-vec3(0.5));\n\tvec3 v011 = normalize(rand33(mod(o + vec3(0.0, 1.0, 1.0), size))-vec3(0.5));\n\tvec3 v100 = normalize(rand33(mod(o + vec3(1.0, 0.0, 0.0), size))-vec3(0.5));\n\tvec3 v101 = normalize(rand33(mod(o + vec3(1.0, 0.0, 1.0), size))-vec3(0.5));\n\tvec3 v110 = normalize(rand33(mod(o + vec3(1.0, 1.0, 0.0), size))-vec3(0.5));\n\tvec3 v111 = normalize(rand33(mod(o + vec3(1.0, 1.0, 1.0), size))-vec3(0.5));\n\tfloat p000 = dot(v000, f);\n\tfloat p001 = dot(v001, f - vec3(0.0, 0.0, 1.0));\n\tfloat p010 = dot(v010, f - vec3(0.0, 1.0, 0.0));\n\tfloat p011 = dot(v011, f - vec3(0.0, 1.0, 1.0));\n\tfloat p100 = dot(v100, f - vec3(1.0, 0.0, 0.0));\n\tfloat p101 = dot(v101, f - vec3(1.0, 0.0, 1.0));\n\tfloat p110 = dot(v110, f - vec3(1.0, 1.0, 0.0));\n\tfloat p111 = dot(v111, f - vec3(1.0, 1.0, 1.0));\n\tvec3 t = f * f * (3.0 - 2.0 * f);\n\treturn 0.5 + mix(mix(mix(p000, p100, t.x), mix(p010, p110, t.x), t.y), mix(mix(p001, p101, t.x), mix(p011, p111, t.x), t.y), t.z);\n}\n\nfloat tex3d_fbm_perlin_nowrap(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tvec3 v000 = normalize(rand33(o)-vec3(0.5));\n\tvec3 v001 = normalize(rand33(o + vec3(0.0, 0.0, 1.0))-vec3(0.5));\n\tvec3 v010 = normalize(rand33(o + vec3(0.0, 1.0, 0.0))-vec3(0.5));\n\tvec3 v011 = normalize(rand33(o + vec3(0.0, 1.0, 1.0))-vec3(0.5));\n\tvec3 v100 = normalize(rand33(o + vec3(1.0, 0.0, 0.0))-vec3(0.5));\n\tvec3 v101 = normalize(rand33(o + vec3(1.0, 0.0, 1.0))-vec3(0.5));\n\tvec3 v110 = normalize(rand33(o + vec3(1.0, 1.0, 0.0))-vec3(0.5));\n\tvec3 v111 = normalize(rand33(o + vec3(1.0, 1.0, 1.0))-vec3(0.5));\n\tfloat p000 = dot(v000, f);\n\tfloat p001 = dot(v001, f - vec3(0.0, 0.0, 1.0));\n\tfloat p010 = dot(v010, f - vec3(0.0, 1.0, 0.0));\n\tfloat p011 = dot(v011, f - vec3(0.0, 1.0, 1.0));\n\tfloat p100 = dot(v100, f - vec3(1.0, 0.0, 0.0));\n\tfloat p101 = dot(v101, f - vec3(1.0, 0.0, 1.0));\n\tfloat p110 = dot(v110, f - vec3(1.0, 1.0, 0.0));\n\tfloat p111 = dot(v111, f - vec3(1.0, 1.0, 1.0));\n\tvec3 t = f * f * (3.0 - 2.0 * f);\n\treturn 0.5 + mix(mix(mix(p000, p100, t.x), mix(p010, p110, t.x), t.y), mix(mix(p001, p101, t.x), mix(p011, p111, t.x), t.y), t.z);\n}\n\nfloat tex3d_fbm_cellular(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tfloat min_dist = 3.0;\n\tfor (float x = -1.0; x <= 1.0; x++) {\n\t\tfor (float y = -1.0; y <= 1.0; y++) {\n\t\t\tfor (float z = -1.0; z <= 1.0; z++) {\n\t\t\t\tvec3 node = 0.4*rand33(mod(o + vec3(x, y, z), size)) + vec3(x, y, z);\n\t\t\t\tfloat dist = sqrt((f - node).x * (f - node).x + (f - node).y * (f - node).y + (f - node).z * (f - node).z);\n\t\t\t\tmin_dist = min(min_dist, dist);\n\t\t\t}\n\t\t}\n\t}\n\treturn min_dist;\n}\n\nfloat tex3d_fbm_cellular_nowrap(vec3 coord, vec3 size, float seed) {\n\tvec3 o = floor(coord)+rand3(vec2(seed, 1.0-seed))+size;\n\tvec3 f = fract(coord);\n\tfloat min_dist = 3.0;\n\tfor (float x = -1.0; x <= 1.0; x++) {\n\t\tfor (float y = -1.0; y <= 1.0; y++) {\n\t\t\tfor (float z = -1.0; z <= 1.0; z++) {\n\t\t\t\tvec3 node = 0.4*rand33(o + vec3(x, y, z)) + vec3(x, y, z);\n\t\t\t\tfloat dist = sqrt((f - node).x * (f - node).x + (f - node).y * (f - node).y + (f - node).z * (f - node).z);\n\t\t\t\tmin_dist = min(min_dist, dist);\n\t\t\t}\n\t\t}\n\t}\n\treturn min_dist;\n}\n// https://iquilezles.org/www/articles/fbmsdf/fbmsdf.htm\nfloat fbm_sph( ivec3 i, vec3 f, ivec3 c, float seed )\n{\n\t// Line below randomizes the positions of each sphere, this can cause a bit of artifacting,\n\t// but also makes for a much more natural effect. Disabled for now.\n\t//f += rand3( vec2(i.xy + c.xy) - vec2( float(i.z + c.z) ) ) - vec3(0.5);\n\t// random radius at grid vertex i+c\n\tfloat rad = 0.5*rand31(vec3(i+c) + vec3(seed));\n\t// distance to sphere at grid vertex i+c\n\treturn length(f-vec3(c)) - rad; \n}\n\nfloat sdBase( vec3 p, float seed )\n{\n   ivec3 i = ivec3(floor(p));\n    vec3 f =       fract(p);\n   // distance to the 8 corners spheres\n   return min(min(min(fbm_sph(i,f,ivec3(0,0,0), seed),\n                      fbm_sph(i,f,ivec3(0,0,1), seed)),\n                  min(fbm_sph(i,f,ivec3(0,1,0), seed),\n                      fbm_sph(i,f,ivec3(0,1,1), seed))),\n              min(min(fbm_sph(i,f,ivec3(1,0,0), seed),\n                      fbm_sph(i,f,ivec3(1,0,1), seed)),\n                  min(fbm_sph(i,f,ivec3(1,1,0), seed),\n                      fbm_sph(i,f,ivec3(1,1,1), seed))));\n}\n\nfloat sdFbm( vec3 p, float d, int iterations, float smoothness, float seed, float scaling, int mode)\n{\n\tfloat s = 1.0;\n\tfor( int i=0; i<iterations; i++ )\n\t{\n\t\t// evaluate new octave\n\t\tfloat n = s*sdBase(p, seed);\n\t\t\n\t\tif(mode == 0) {\n\t\t\t// add\n\t\t\tn = smax(n,d - scaling * s,smoothness * s);\n\t\t\td = smin(n,d             ,smoothness * s);\n\t\t} else {\n\t\t\t// subtract\n\t\t\td = smax(d - scaling * s, -n, smoothness * s );\n\t\t}\n\t\t\n\t\t// prepare next octave\n\t\tp = mat3(vec3(0.02, 1.60, 1.20),\n\t\t\t\tvec3(-1.60, 0.72,-0.96),\n\t\t\t\tvec3(-1.20,-0.96, 1.28))*p;\n\t\ts = 0.5*s;\n\t}\n\treturn d;\n}vec3 blend_normal(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1 + (1.0-opacity)*c2;\n}\n\nvec3 blend_dissolve(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\tif (rand(uv) < opacity) {\n\t\treturn c1;\n\t} else {\n\t\treturn c2;\n\t}\n}\n\nvec3 blend_multiply(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*c1*c2 + (1.0-opacity)*c2;\n}\n\nvec3 blend_screen(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*(1.0-(1.0-c1)*(1.0-c2)) + (1.0-opacity)*c2;\n}\n\nfloat blend_overlay_f(float c1, float c2) {\n\treturn (c1 < 0.5) ? (2.0*c1*c2) : (1.0-2.0*(1.0-c1)*(1.0-c2));\n}\n\nvec3 blend_overlay(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_overlay_f(c1.x, c2.x), blend_overlay_f(c1.y, c2.y), blend_overlay_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_hard_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*0.5*(c1*c2+blend_overlay(uv, c1, c2, 1.0)) + (1.0-opacity)*c2;\n}\n\nfloat blend_soft_light_f(float c1, float c2) {\n\treturn (c2 < 0.5) ? (2.0*c1*c2+c1*c1*(1.0-2.0*c2)) : 2.0*c1*(1.0-c2)+sqrt(c1)*(2.0*c2-1.0);\n}\n\nvec3 blend_soft_light(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_soft_light_f(c1.x, c2.x), blend_soft_light_f(c1.y, c2.y), blend_soft_light_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_burn_f(float c1, float c2) {\n\treturn (c1==0.0)?c1:max((1.0-((1.0-c2)/c1)),0.0);\n}\n\nvec3 blend_burn(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_burn_f(c1.x, c2.x), blend_burn_f(c1.y, c2.y), blend_burn_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nfloat blend_dodge_f(float c1, float c2) {\n\treturn (c1==1.0)?c1:min(c2/(1.0-c1),1.0);\n}\n\nvec3 blend_dodge(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*vec3(blend_dodge_f(c1.x, c2.x), blend_dodge_f(c1.y, c2.y), blend_dodge_f(c1.z, c2.z)) + (1.0-opacity)*c2;\n}\n\nvec3 blend_lighten(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*max(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_darken(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*min(c1, c2) + (1.0-opacity)*c2;\n}\n\nvec3 blend_difference(vec2 uv, vec3 c1, vec3 c2, float opacity) {\n\treturn opacity*clamp(c2-c1, vec3(0.0), vec3(1.0)) + (1.0-opacity)*c2;\n}\nvec2 scale(vec2 uv, vec2 center, vec2 scale) {\n\tuv -= center;\n\tuv /= scale;\n\tuv += center;\n    return uv;\n}const float p_o956263_gradient_0_pos = 0.000000000;\nconst float p_o956263_gradient_0_r = 0.047059000;\nconst float p_o956263_gradient_0_g = 0.054901998;\nconst float p_o956263_gradient_0_b = 0.066666998;\nconst float p_o956263_gradient_0_a = 0.792156994;\nconst float p_o956263_gradient_1_pos = 0.045455000;\nconst float p_o956263_gradient_1_r = 1.000000000;\nconst float p_o956263_gradient_1_g = 1.000000000;\nconst float p_o956263_gradient_1_b = 0.125489995;\nconst float p_o956263_gradient_1_a = 1.000000000;\nconst float p_o956263_gradient_2_pos = 0.054545000;\nconst float p_o956263_gradient_2_r = 1.000000000;\nconst float p_o956263_gradient_2_g = 0.968750000;\nconst float p_o956263_gradient_2_b = 0.000000000;\nconst float p_o956263_gradient_2_a = 1.000000000;\nconst float p_o956263_gradient_3_pos = 0.772727000;\nconst float p_o956263_gradient_3_r = 1.000000000;\nconst float p_o956263_gradient_3_g = 0.062744997;\nconst float p_o956263_gradient_3_b = 1.000000000;\nconst float p_o956263_gradient_3_a = 1.000000000;\nconst float p_o956263_gradient_4_pos = 1.000000000;\nconst float p_o956263_gradient_4_r = 0.843750000;\nconst float p_o956263_gradient_4_g = 0.000000000;\nconst float p_o956263_gradient_4_b = 1.000000000;\nconst float p_o956263_gradient_4_a = 1.000000000;\nvec4 o956263_gradient_gradient_fct(float x) {\n  if (x < p_o956263_gradient_0_pos) {\n    return vec4(p_o956263_gradient_0_r,p_o956263_gradient_0_g,p_o956263_gradient_0_b,p_o956263_gradient_0_a);\n  } else if (x < p_o956263_gradient_1_pos) {\n    return mix(vec4(p_o956263_gradient_0_r,p_o956263_gradient_0_g,p_o956263_gradient_0_b,p_o956263_gradient_0_a), vec4(p_o956263_gradient_1_r,p_o956263_gradient_1_g,p_o956263_gradient_1_b,p_o956263_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o956263_gradient_0_pos)/(p_o956263_gradient_1_pos-p_o956263_gradient_0_pos)));\n  } else if (x < p_o956263_gradient_2_pos) {\n    return mix(vec4(p_o956263_gradient_1_r,p_o956263_gradient_1_g,p_o956263_gradient_1_b,p_o956263_gradient_1_a), vec4(p_o956263_gradient_2_r,p_o956263_gradient_2_g,p_o956263_gradient_2_b,p_o956263_gradient_2_a), 0.5-0.5*cos(3.14159265359*(x-p_o956263_gradient_1_pos)/(p_o956263_gradient_2_pos-p_o956263_gradient_1_pos)));\n  } else if (x < p_o956263_gradient_3_pos) {\n    return mix(vec4(p_o956263_gradient_2_r,p_o956263_gradient_2_g,p_o956263_gradient_2_b,p_o956263_gradient_2_a), vec4(p_o956263_gradient_3_r,p_o956263_gradient_3_g,p_o956263_gradient_3_b,p_o956263_gradient_3_a), 0.5-0.5*cos(3.14159265359*(x-p_o956263_gradient_2_pos)/(p_o956263_gradient_3_pos-p_o956263_gradient_2_pos)));\n  } else if (x < p_o956263_gradient_4_pos) {\n    return mix(vec4(p_o956263_gradient_3_r,p_o956263_gradient_3_g,p_o956263_gradient_3_b,p_o956263_gradient_3_a), vec4(p_o956263_gradient_4_r,p_o956263_gradient_4_g,p_o956263_gradient_4_b,p_o956263_gradient_4_a), 0.5-0.5*cos(3.14159265359*(x-p_o956263_gradient_3_pos)/(p_o956263_gradient_4_pos-p_o956263_gradient_3_pos)));\n  }\n  return vec4(p_o956263_gradient_4_r,p_o956263_gradient_4_g,p_o956263_gradient_4_b,p_o956263_gradient_4_a);\n}\nconst float p_o956280_cx = 0.000000000;\nconst float p_o956280_cy = 0.000000000;\nconst float p_o956280_scale_x = 0.800000000;\nconst float p_o956280_scale_y = 0.800000000;\nconst float p_o956243_amount = 1.350000000;\nconst float seed_o956262 = 0.574584000;\nconst float p_o956262_iterations = 6.000000000;\nconst float p_o956262_smoothness = 0.000000000;\nconst float p_o956262_scaling = 0.056500000;\nconst float seed_o956259 = 0.000000000;\nconst float p_o956259_iterations = 5.000000000;\nconst float p_o956259_smoothness = 0.000000000;\nconst float p_o956259_scaling = 0.019500000;\nconst float p_o956260_amount = 0.170100000;\nconst float p_o956242_s = 0.430000000;\nconst float p_o956239_d = 0.450000000;\nconst float p_o956240_ax = -0.330000000;\nconst float p_o956240_ay = 0.040000000;\nconst float p_o956240_bx = 0.080000000;\nconst float p_o956240_by = 0.300000000;\nconst float p_o956240_r = 0.090000000;\nconst float p_o956241_r = 0.250000000;\nconst float p_o956261_r = 0.260000000;\nvec2 o956234_input_sdf(vec3 p, float _seed_variation_) {\nvec2 o956239_0_q = vec2(length((((p))/p_o956242_s).xy)-p_o956239_d+0.5, (((p))/p_o956242_s).z+0.5);\nvec2 o956240_0_sdl = sdLine((o956239_0_q), vec2(p_o956240_ax+0.5, p_o956240_ay+0.5), vec2(p_o956240_bx+0.5, p_o956240_by+0.5));float o956240_0_1_sdf2d = o956240_0_sdl.x-p_o956240_r*1.0;\nfloat o956239_0_1_sdf3d = o956240_0_1_sdf2d;\nvec2 o956242_0_in = vec2(o956239_0_1_sdf3d, 0.0);vec2 o956242_0_1_sdf3dc = vec2(o956242_0_in.x*p_o956242_s, o956242_0_in.y);\nvec2 o956241_0_q = vec2(length((p).xy)-(cos(iTime * 2.5) / 3.6),(p).z);\nfloat o956241_0_1_sdf3d = length(o956241_0_q)-p_o956241_r;\nfloat o956233_0_1_sdf3d = mix((o956242_0_1_sdf3dc).x, o956241_0_1_sdf3d, (sin(iTime * 2.5)));\nfloat o956261_0_1_sdf3d = length((p))-p_o956261_r;\nfloat o956260_0_1_sdf3d = mix(o956233_0_1_sdf3d, o956261_0_1_sdf3d, p_o956260_amount);\nfloat o956259_0_1_sdf3d = sdFbm((p), o956260_0_1_sdf3d, int(p_o956259_iterations), p_o956259_smoothness, (seed_o956259+_seed_variation_), p_o956259_scaling, 1);\nfloat o956262_0_1_sdf3d = sdFbm((p), o956259_0_1_sdf3d, int(p_o956262_iterations), p_o956262_smoothness, (seed_o956262+_seed_variation_), p_o956262_scaling, 0);\n\nreturn vec2(o956262_0_1_sdf3d, 0.0);\n}\nvec2 raymarch_o956234(vec2 uv, float _seed_variation_) {\n\tvec3 ro = vec3(uv-vec2(0.5), 1.0);\n\tvec3 rd = vec3(0.0, 0.0, -1.0);\n\tfloat dO = 0.0;\n\tfloat c = 0.0;\n    for (int i=0; i < 100; i++) {\n    \tvec3 p = ro + rd*dO;\n        vec2 dS = o956234_input_sdf(p, _seed_variation_);\n        dO += dS.x;\n\n        if (dO >= 1.0) {\n\t\t\tbreak;\n\t\t} else if (dS.x < 0.0001) {\n\t\t\tc = dS.y;\n\t\t\tbreak;\n\t\t}\n    }\n    \n    return vec2(dO, c);\n}\n\nvec3 normal_o956234(vec3 p, float _seed_variation_) {\n\tif (p.z <= 0.0) {\n\t\treturn vec3(0.0, 0.0, -1.0);\n\t}\n\n\tfloat d = o956234_input_sdf(p, _seed_variation_).x;\n    float e = .001;\n    \n    vec3 n = d - vec3(\n        o956234_input_sdf(p-vec3(e, 0.0, 0.0), _seed_variation_).x,\n        o956234_input_sdf(p-vec3(0.0, e, 0.0), _seed_variation_).x,\n        o956234_input_sdf(p-vec3(0.0, 0.0, e), _seed_variation_).x);\n    \n    return vec3(-1.0, -1.0, -1.0)*normalize(n);\n}\n\nconst float p_o956244_gradient_0_pos = 0.260859000;\nconst float p_o956244_gradient_0_r = 0.199219003;\nconst float p_o956244_gradient_0_g = 0.192993000;\nconst float p_o956244_gradient_0_b = 0.000000000;\nconst float p_o956244_gradient_0_a = 1.000000000;\nconst float p_o956244_gradient_1_pos = 0.361868000;\nconst float p_o956244_gradient_1_r = 0.000000000;\nconst float p_o956244_gradient_1_g = 0.000000000;\nconst float p_o956244_gradient_1_b = 0.000000000;\nconst float p_o956244_gradient_1_a = 1.000000000;\nconst float p_o956244_gradient_2_pos = 0.481818000;\nconst float p_o956244_gradient_2_r = 1.000000000;\nconst float p_o956244_gradient_2_g = 1.000000000;\nconst float p_o956244_gradient_2_b = 1.000000000;\nconst float p_o956244_gradient_2_a = 1.000000000;\nconst float p_o956244_gradient_3_pos = 0.731264000;\nconst float p_o956244_gradient_3_r = 1.000000000;\nconst float p_o956244_gradient_3_g = 1.000000000;\nconst float p_o956244_gradient_3_b = 1.000000000;\nconst float p_o956244_gradient_3_a = 1.000000000;\nvec4 o956244_gradient_gradient_fct(float x) {\n  if (x < p_o956244_gradient_0_pos) {\n    return vec4(p_o956244_gradient_0_r,p_o956244_gradient_0_g,p_o956244_gradient_0_b,p_o956244_gradient_0_a);\n  } else if (x < p_o956244_gradient_1_pos) {\n    return mix(vec4(p_o956244_gradient_0_r,p_o956244_gradient_0_g,p_o956244_gradient_0_b,p_o956244_gradient_0_a), vec4(p_o956244_gradient_1_r,p_o956244_gradient_1_g,p_o956244_gradient_1_b,p_o956244_gradient_1_a), 0.5-0.5*cos(3.14159265359*(x-p_o956244_gradient_0_pos)/(p_o956244_gradient_1_pos-p_o956244_gradient_0_pos)));\n  } else if (x < p_o956244_gradient_2_pos) {\n    return mix(vec4(p_o956244_gradient_1_r,p_o956244_gradient_1_g,p_o956244_gradient_1_b,p_o956244_gradient_1_a), vec4(p_o956244_gradient_2_r,p_o956244_gradient_2_g,p_o956244_gradient_2_b,p_o956244_gradient_2_a), 0.5-0.5*cos(3.14159265359*(x-p_o956244_gradient_1_pos)/(p_o956244_gradient_2_pos-p_o956244_gradient_1_pos)));\n  } else if (x < p_o956244_gradient_3_pos) {\n    return mix(vec4(p_o956244_gradient_2_r,p_o956244_gradient_2_g,p_o956244_gradient_2_b,p_o956244_gradient_2_a), vec4(p_o956244_gradient_3_r,p_o956244_gradient_3_g,p_o956244_gradient_3_b,p_o956244_gradient_3_a), 0.5-0.5*cos(3.14159265359*(x-p_o956244_gradient_2_pos)/(p_o956244_gradient_3_pos-p_o956244_gradient_2_pos)));\n  }\n  return vec4(p_o956244_gradient_3_r,p_o956244_gradient_3_g,p_o956244_gradient_3_b,p_o956244_gradient_3_a);\n}\n\n\n\nIN vec2 texCoord;\n{{MODULES_HEAD}}\nvoid main()\n{\nfloat minSize = min(iResolution.x, iResolution.y);\nfloat _seed_variation_ = SEED_VARIATION;\nvec2 UV = vec2(0.0, 1.0) + vec2(1.0, -1.0) * (texCoord-0.5*(iResolution.xy-vec2(minSize)))/minSize;\nvec2 o956234_0_d = raymarch_o956234((scale((UV), vec2(0.5+p_o956280_cx, 0.5+p_o956280_cy), vec2(p_o956280_scale_x, p_o956280_scale_y))), _seed_variation_);\nfloat o956234_2_1_f = o956234_0_d.y;\nvec3 o956234_1_2_rgb = vec3(0.5)+0.5*normal_o956234(vec3((scale((UV), vec2(0.5+p_o956280_cx, 0.5+p_o956280_cy), vec2(p_o956280_scale_x, p_o956280_scale_y)))-vec2(0.5), 1.0-o956234_0_d.x), _seed_variation_);\nvec4 o956244_0_1_rgba = o956244_gradient_gradient_fct((dot(o956234_1_2_rgb, vec3(1.0))/3.0));\nvec4 o956243_0_s1 = vec4(vec3(o956234_2_1_f), 1.0);\nvec4 o956243_0_s2 = o956244_0_1_rgba;\nfloat o956243_0_a = p_o956243_amount*1.0;\nvec4 o956243_0_2_rgba = vec4(blend_difference((scale((UV), vec2(0.5+p_o956280_cx, 0.5+p_o956280_cy), vec2(p_o956280_scale_x, p_o956280_scale_y))), o956243_0_s1.rgb, o956243_0_s2.rgb, o956243_0_a*o956243_0_s1.a), min(1.0, o956243_0_s2.a+o956243_0_a*o956243_0_s1.a));\nvec4 o956280_0_1_rgba = o956243_0_2_rgba;\nvec4 o956263_0_1_rgba = o956263_gradient_gradient_fct((dot((o956280_0_1_rgba).rgb, vec3(1.0))/3.0));\ngl_FragColor = o956263_0_1_rgba;\n}"},{name:"Vertex Code",value:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent,attrBiTangent;\n\nIN float attrVertIndex;\n\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n    mat4 mMatrix=modelMatrix;\n    {{MODULE_VERTEX_POSITION}}\n    gl_Position = projMatrix * (viewMatrix*mMatrix) * pos;\n}\n"},{name:"Use As Material",value:true},{name:"iTime"},{name:"iResolution X",value:1},{name:"iResolution Y",value:1}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"862",objOut:"844"}]},{name:"Shader",links:[{portIn:"Shader",portOut:"Shader",objIn:"862",objOut:"844"}]},{name:"Has Errors",value:false}]},{objName:"Ops.Gl.TextureEffects.Wobble",id:"845",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"Render"},{name:"time"},{name:"SpeedX",value:7.74},{name:"SpeedY",value:115.13},{name:"RepeatX",value:12.79},{name:"RepeatY",value:35.12},{name:"Multiply",value:-.009},{name:"Mask",value:0}],portsOut:[{name:"Trigger",links:[{portIn:"render",portOut:"Trigger",objIn:"858",objOut:"845"}]}]},{objName:"Ops.Gl.TextureEffects.Mirror",id:"846",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"render"},{name:"axis index",value:0},{name:"axis",value:"X"},{name:"width",value:.4},{name:"offset"},{name:"flip",value:false}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"847",objOut:"846"}]}]},{objName:"Ops.Gl.TextureEffects.Mirror",id:"847",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"render"},{name:"axis index",value:0},{name:"axis",value:"X"},{name:"width",value:.74},{name:"offset",value:1.46},{name:"flip",value:false}],portsOut:[{name:"trigger",value:0}]},{objName:"Ops.Anim.SineAnim",id:"848",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"exe"},{name:"Mode index",value:0},{name:"Mode",value:"Sine"},{name:"phase",value:1.25},{name:"frequency"},{name:"amplitude",value:.43}],portsOut:[{name:"Trigger out",value:0},{name:"result",links:[{portIn:"number",portOut:"result",objIn:"849",objOut:"848"}]}]},{objName:"Ops.Math.Abs",id:"849",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"number"}],portsOut:[{name:"result",links:[{portIn:"value",portOut:"result",objIn:"850",objOut:"849"}]}]},{objName:"Ops.Math.Sine",id:"850",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"value"},{name:"phase",value:.48},{name:"frequency",value:1},{name:"amplitude",value:-.85},{name:"asine",value:false}],portsOut:[{name:"result",links:[{portIn:"offset",portOut:"result",objIn:"846",objOut:"850"},{portIn:"time",portOut:"result",objIn:"845",objOut:"850"},{portIn:"Value",portOut:"result",objIn:"859",objOut:"850"}]}]},{objName:"Ops.Gl.TextureEffects.Blur",id:"851",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"render"},{name:"amount",value:3.86},{name:"direction index",value:0},{name:"direction",value:"both"},{name:"Fast",value:true},{name:"mask",value:0}],portsOut:[{name:"trigger",links:[{portIn:"Render",portOut:"trigger",objIn:"845",objOut:"851"}]}]},{objName:"Ops.Gl.TextureEffects.ColorMap",id:"852",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"render"},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"overlay"},{name:"Amount",value:1},{name:"Gradient"},{name:"Method index",value:0},{name:"Method",value:"Channels"},{name:"Min",value:.535},{name:"Max",value:1},{name:"Position",value:.447}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"851",objOut:"852"}]}]},{objName:"Ops.Gl.TextureEffects.LumaKey_v2",id:"853",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"render"},{name:"Invert",value:false},{name:"Black White",value:true},{name:"Threshold low ",value:.118},{name:"Threshold high",value:1}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"852",objOut:"853"}]}]},{objName:"Ops.Ui.PatchInput",id:"854",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[],portsOut:[{name:"create port",value:0},{name:"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger",links:[{portIn:"render",portOut:"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger",objIn:"853",objOut:"854"},{portIn:"exe",portOut:"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger",objIn:"848",objOut:"854"}]},{name:"in1 Ops.Gl.TextureEffects.ColorMap Gradient",links:[{portIn:"Gradient",portOut:"in1 Ops.Gl.TextureEffects.ColorMap Gradient",objIn:"852",objOut:"854"}]},{name:"in2 Ops.Anim.SineAnim frequency",links:[{portIn:"number1",portOut:"in2 Ops.Anim.SineAnim frequency",objIn:"857",objOut:"854"}]}]},{objName:"Ops.Ui.PatchOutput",id:"855",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"create port",value:0}],portsOut:[]},{objName:"Ops.Ui.SubPatch",id:"856",uiAttribs:{subPatch:0},portsIn:[{name:"create port",value:null},{name:"dataStr",value:'{"ports":[{"name":"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger","type":1},{"name":"in1 Ops.Gl.TextureEffects.ColorMap Gradient","type":2,"objType":"texture"},{"name":"in2 Ops.Anim.SineAnim frequency","type":0}],"portsOut":[]}'},{name:"patchId",value:"9007de36-d70f-4531-aacf-4e759b7598b5"},{name:"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger"},{name:"in1 Ops.Gl.TextureEffects.ColorMap Gradient"},{name:"in2 Ops.Anim.SineAnim frequency"}],portsOut:[{name:"create port out",value:0}]},{objName:"Ops.Math.Divide",id:"857",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"number1"},{name:"number2",value:70}],portsOut:[{name:"result",links:[{portIn:"frequency",portOut:"result",objIn:"848",objOut:"857"}]}]},{objName:"Ops.Gl.TextureEffects.RotateTexture",id:"858",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"render"},{name:"Multiplier",value:0},{name:"Blend Mode index",value:0},{name:"Blend Mode",value:"normal"},{name:"Amount",value:1},{name:"Rotate"},{name:"Crop",value:true}],portsOut:[{name:"trigger",links:[{portIn:"render",portOut:"trigger",objIn:"846",objOut:"858"}]}]},{objName:"Ops.Value.ValueChangeCounter",id:"859",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"Value"},{name:"Reset",value:0}],portsOut:[{name:"Result",links:[{portIn:"number1",portOut:"Result",objIn:"860",objOut:"859"}]}]},{objName:"Ops.Math.Divide",id:"860",uiAttribs:{subPatch:"9007de36-d70f-4531-aacf-4e759b7598b5"},portsIn:[{name:"number1"},{name:"number2",value:100}],portsOut:[{name:"result",links:[{portIn:"Rotate",portOut:"result",objIn:"858",objOut:"860"}]}]},{objName:"Ops.Gl.Textures.SwitchTextures_v2",id:"861",uiAttribs:{subPatch:0},portsIn:[{name:"exec"},{name:"num"},{name:"Default Texture Transparent",value:true},{name:"texture0"},{name:"texture1"},{name:"texture2",value:0},{name:"texture3",value:0},{name:"texture4",value:0},{name:"texture5",value:0},{name:"texture6",value:0},{name:"texture7",value:0},{name:"texture8",value:0},{name:"texture9",value:0},{name:"texture10",value:0},{name:"texture11",value:0},{name:"texture12",value:0},{name:"texture13",value:0},{name:"texture14",value:0},{name:"texture15",value:0}],portsOut:[{name:"Next",value:0},{name:"texture",links:[{portIn:"Texture In",portOut:"texture",objIn:"365",objOut:"861"}]}]},{objName:"Ops.Gl.Shader.Shader2Texture",id:"862",uiAttribs:{subPatch:0},portsIn:[{name:"Render"},{name:"Shader"},{name:"Use Viewport Size",value:true},{name:"Width",value:640},{name:"Height",value:320},{name:"filter index",value:0},{name:"filter",value:"nearest"},{name:"wrap index",value:0},{name:"wrap",value:"mirrored repeat"},{name:"Floating Point",value:true},{name:"Num Textures index",value:0},{name:"Num Textures",value:"1"}],portsOut:[{name:"Next",value:0},{name:"Texture",links:[{portIn:"texture1",portOut:"Texture",objIn:"861",objOut:"862"}]},{name:"Texture 2"},{name:"Texture 3"},{name:"Texture 4"}]},{objName:"Ops.Math.Sum",id:"863",uiAttribs:{subPatch:0},portsIn:[{name:"number1"},{name:"number2",value:3.49}],portsOut:[{name:"result",links:[{portIn:"iTime",portOut:"result",objIn:"363",objOut:"863"}]}]},{objName:"Ops.Value.Number",id:"864",uiAttribs:{subPatch:0},portsIn:[{name:"value"}],portsOut:[{name:"result",links:[{portIn:"boolean",portOut:"result",objIn:"865",objOut:"864"},{portIn:"num",portOut:"result",objIn:"861",objOut:"864"}]}]},{objName:"Ops.Boolean.IfTrueThen_v2",id:"865",uiAttribs:{subPatch:0},portsIn:[{name:"exe"},{name:"boolean"}],portsOut:[{name:"then",links:[{portIn:"render",portOut:"then",objIn:"377",objOut:"865"}]},{name:"else",links:[{portIn:"in0 Ops.Gl.TextureEffects.DrawImage_v3 trigger",portOut:"else",objIn:"856",objOut:"865"}]}]}],users:[],userOps:[],tags:[],_id:"62c82553ba12fb87a74b74c8",name:"WinSt0.010-b2",userId:"5ef4b35539e82f6dc9d86144",created:"2022-07-08T12:38:43.992Z",cloneOf:"62c81ddaba12fb87a74b74a5",updated:"2022-07-08T12:38:48.950Z",log:[{_id:"62c82553ba12fb87a74b74ca",key:"collabsatcreate",text:"initial list of collaborators:"}],__v:2,shortId:"oOsQt7",buildInfo:{core:{timestamp:1656574516241,created:"2022-06-30T07:35:16.241Z",git:{branch:"master",commit:"abda58d5c2d1731d2d3526a32ffa23ace4933120",date:null,message:null}},ui:{timestamp:1656574563915,created:"2022-06-30T07:36:03.915Z",git:{branch:"master",commit:"cde4fa72579470c06fa2ad7390223a8b7a061095",date:"2022-06-29T13:18:31.000Z",message:"idiot sandwitch"}},host:"cables.gl"},opsHash:"12e2779d1a83c40b5e858f5514295ebf76f90c6e",ui:{timeLineLength:20,bookmarks:[],viewBoxesGl:{0:{x:-1862.5478184284013,y:154.32295230694652,z:710.8796907360984},"5fd2d066-66b7-4180-9b9b-ad73ec1170f1":{x:298.8647298438121,y:558.6594230399988,z:1534.9802914325571},"1501bc92-36a1-4682-a50c-acdf31333594":{x:22.727868121013877,y:-71.37969652753532,z:984.9312022579263},"b3e95f9b-ba2e-42f5-8bf3-3499d2b216d4":{x:2049.021185396222,y:1162.8431553364449,z:803.2654976434088},"95f0cbb0-2f27-495f-a79e-68de96d02d0a":{x:4303.842205900749,y:-1169.7331191276253,z:741.5748791237147},"97f15fc4-dae7-469b-ba45-95b9a08ea0e3":{x:893.3080495320535,y:453.1958609197112,z:623.8450198932846},"94224d65-fab2-4f55-ab9a-d14cb5b7bfe5":{x:-1961.3913016642834,y:725.7160269970265,z:463.36529908032014},"bf06e3be-27ad-46d0-8997-10c6e33bd413":{x:2056.3416296141877,y:3001.508696786922,z:747.3227699497154}},renderer:{w:640,h:320,s:1}},updatedByUser:"Olixaf",deployments:{lastDeployment:{date:1657283998934,service:"download"}},exports:2};if(!CABLES.exportedPatch){CABLES.exportedPatch=CABLES.exportedPatches["oOsQt7"]}"use strict";var CABLES=CABLES||{};CABLES.OPS=CABLES.OPS||{};var Ops=Ops||{};Ops.Gl=Ops.Gl||{};Ops.Ui=Ops.Ui||{};Ops.Anim=Ops.Anim||{};Ops.Date=Ops.Date||{};Ops.Math=Ops.Math||{};Ops.Array=Ops.Array||{};Ops.Value=Ops.Value||{};Ops.Values=Ops.Values||{};Ops.Boolean=Ops.Boolean||{};Ops.Devices=Ops.Devices||{};Ops.Gl.GLTF=Ops.Gl.GLTF||{};Ops.Sidebar=Ops.Sidebar||{};Ops.Systems=Ops.Systems||{};Ops.Trigger=Ops.Trigger||{};Ops.Geometry=Ops.Geometry||{};Ops.Gl.Phong=Ops.Gl.Phong||{};Ops.TimeLine=Ops.TimeLine||{};Ops.Gl.Matrix=Ops.Gl.Matrix||{};Ops.Gl.Meshes=Ops.Gl.Meshes||{};Ops.Gl.Shader=Ops.Gl.Shader||{};Ops.Deprecated=Ops.Deprecated||{};Ops.Gl.Geometry=Ops.Gl.Geometry||{};Ops.Gl.Textures=Ops.Gl.Textures||{};Ops.Devices.Midi=Ops.Devices.Midi||{};Ops.Math.Compare=Ops.Math.Compare||{};Ops.Deprecated.Gl=Ops.Deprecated.Gl||{};Ops.Devices.Keyboard=Ops.Devices.Keyboard||{};Ops.Gl.ShaderEffects=Ops.Gl.ShaderEffects||{};Ops.Gl.TextureEffects=Ops.Gl.TextureEffects||{};Ops.Deprecated.Gl.Matrix=Ops.Deprecated.Gl.Matrix||{};Ops.Gl.TextureEffects.Noise=Ops.Gl.TextureEffects.Noise||{};Ops.Gl.Shader.CustomShader_v2=function(){CABLES.Op.apply(this,arguments);const f=this;const e={};const t=f.inTrigger("render"),n=f.inStringEditor("Fragment Code"),a=f.inStringEditor("Vertex Code"),r=f.inValueBool("Use As Material",true),o=f.outTrigger("trigger"),i=f.outObject("Shader",null,"shader"),s=f.outBool("Has Errors");const g=f.patch.cgl;const h=[];const b=[];const x=[];f.toWorkPortsNeedToBeLinked(t);n.setUiAttribs({editorSyntax:"glsl"});a.setUiAttribs({editorSyntax:"glsl"});const O=new CGL.Shader(g,f.name);O.setModules(["MODULE_VERTEX_POSITION","MODULE_COLOR","MODULE_BEGIN_FRAG"]);f.setPortGroup("Source Code",[n,a]);f.setPortGroup("Options",[r]);n.set(CGL.Shader.getDefaultFragmentShader());a.set(CGL.Shader.getDefaultVertexShader());n.onChange=a.onChange=function(){l=true};t.onTriggered=c;var l=true;f.onLoadedValueSet=u;function u(n){p();for(let t=0;t<h.length;t++)for(let e=0;e<n.portsIn.length;e++)if(h[t]&&h[t].name==n.portsIn[e].name){h[t].set(n.portsIn[e].value);h[t].deSerializeSettings(n.portsIn[e])}}f.init=function(){p()};function c(){v();if(l)p();if(r.get())g.pushShader(O);o.trigger();if(r.get())g.popShader()}function m(){for(let e=0;e<b.length;e++)if(b[e]&&b[e].get()&&b[e].get().tex)g.setTexture(0+e+3,b[e].get().tex)}function I(t){for(let e=0;e<h.length;e++)if(h[e]&&h[e].name==t)return true;for(let e=0;e<b.length;e++)if(b[e]&&b[e].name==t)return true;return false}const _=mat4.create();const T=["modelMatrix","viewMatrix","normalMatrix","mvMatrix","projMatrix","inverseViewMatrix","camPos"];let y=0;const S=[];function d(e){const t=e.split("\n");const a=[];for(let e=0;e<t.length;e++){const o=t[e].split(";");for(let e=0;e<o.length;e++){let n=o[e].split(" ");for(var r=0;r<n.length;r++)n[r]=(n[r]+"").trim();if(n[0]==="UNI"||n[0]==="uniform"){let e=n[2];if(n.length>4)for(var r=3;r<n.length;r++)e+=n[r];n=n.filter(function(e){return e!==""});const i=n[1];let t=[e];if(e.indexOf(",")>-1)t=e.split(",");for(let e=0;e<t.length;e++){if(T.indexOf(t[e])>-1)continue;const s=t[e].trim();if(i==="float"){S.push(s);if(!I(s)){const l=f.inFloat(s,0);l.uniform=new CGL.Uniform(O,"f",s,l);h.push(l);a.push(l)}}else if(i==="int"){S.push(s);if(!I(s)){const l=f.inInt(s,0);l.uniform=new CGL.Uniform(O,"i",s,l);h.push(l);a.push(l)}}else if(i==="bool"){S.push(s);if(!I(s)){const l=f.inBool(s,false);l.uniform=new CGL.Uniform(O,"b",s,l);h.push(l);a.push(l)}}else if(i==="mat4"){S.push(s);if(!I(s)){const l=f.inArray(s,0);l.uniform=new CGL.Uniform(O,"m4",s,l);h.push(l);a.push(l);const u={name:s,num:16,port:l,uni:l.uniform,changed:false};l.onChange=function(){this.changed=true}.bind(u);x.push(u)}}else if(i==="sampler2D"||i==="samplerCube"){S.push(s);if(!I(s)){const c=f.inObject(s);let e="t";if(i==="samplerCube")e="tc";c.uniform=new CGL.Uniform(O,e,s,3+b.length);b.push(c);a.push(c);c.set(CGL.Texture.getTempTexture(g));c.on("change",(e,t)=>{if(!e)t.set(CGL.Texture.getTempTexture(g))});y++}}else if(i==="vec3"||i==="vec2"||i==="vec4"){let e=2;if(i==="vec4")e=4;if(i==="vec3")e=3;S.push(s+" X");S.push(s+" Y");if(e>2)S.push(s+" Z");if(e>3)S.push(s+" W");if(!I(s+" X")){const m=[];const u={name:s,num:e,changed:false};x.push(u);A(u);const _=f.inFloat(s+" X",0);_.onChange=function(){this.changed=true}.bind(u);h.push(_);m.push(_);u.x=_;const d=f.inFloat(s+" Y",0);d.onChange=function(){this.changed=true}.bind(u);h.push(d);m.push(d);u.y=d;if(e>2){const p=f.inFloat(s+" Z",0);p.onChange=function(){this.changed=true}.bind(u);h.push(p);m.push(p);u.z=p}if(e>3){const v=f.inFloat(s+" W",0);v.onChange=function(){this.changed=true}.bind(u);h.push(v);m.push(v);u.w=v}f.setPortGroup(s,m)}}}}}}f.setPortGroup("uniforms",a)}function p(){if(!O)return;O.bindTextures=m.bind(this);O.setSource(a.get(),n.get());if(g.glVersion==1){g.gl.getExtension("OES_standard_derivatives");O.enableExtension("GL_OES_standard_derivatives")}y=0;S.length=0;d(a.get());d(n.get());for(var e=0;e<b.length;e++)for(var t=0;t<S.length;t++)if(b[e]&&S.indexOf(b[e].name)==-1){b[e].remove();b[e]=null}for(var e=0;e<h.length;e++)for(var t=0;t<S.length;t++)if(h[e]&&S.indexOf(h[e].name)==-1){h[e].remove();h[e]=null}for(var e=0;e<x.length;e++){A(x[e]);x[e].changed=true}for(t=0;t<h.length;t++)if(h[t]&&h[t].uniform)h[t].uniform.needsUpdate=true;O.compile();if(CABLES.UI)gui.opParams.show(f);i.set(null);i.set(O);l=false;if(O.hasErrors())f.setUiError("compile","Shader has errors");else f.setUiError("compile",null);s.set(O.hasErrors())}function A(e){if(e.num==2)e.uni=new CGL.Uniform(O,"2f",e.name,[0,0]);else if(e.num==3)e.uni=new CGL.Uniform(O,"3f",e.name,[0,0,0]);else if(e.num==4)e.uni=new CGL.Uniform(O,"4f",e.name,[0,0,0,0])}function v(){for(let e=0;e<x.length;e++){const t=x[e];if(t.changed){if(t.num===2)t.uni.setValue([t.x.get(),t.y.get()]);else if(t.num===3)t.uni.setValue([t.x.get(),t.y.get(),t.z.get()]);else if(t.num===4)t.uni.setValue([t.x.get(),t.y.get(),t.z.get(),t.w.get()]);else if(t.num>4){t.uni.setValue(t.port.get())}t.changed=false}}}};Ops.Gl.Shader.CustomShader_v2.prototype=new CABLES.Op;CABLES.OPS["a165fc89-a35b-4d39-8930-7345b098bd9d"]={f:Ops.Gl.Shader.CustomShader_v2,objName:"Ops.Gl.Shader.CustomShader_v2"};Ops.Gl.Shader.Shader2Texture=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("Render"),a=e.inObject("Shader",null,"shader"),o=e.inValueBool("Use Viewport Size",true),i=e.inValueInt("Width",512),s=e.inValueInt("Height",512),l=e.inValueSelect("filter",["nearest","linear","mipmap"]),u=e.inValueSelect("wrap",["clamp to edge","repeat","mirrored repeat"],"clamp to edge"),c=e.inValueBool("Floating Point",false),m=e.inSwitch("Num Textures",["1","4"],"1"),r=e.outTrigger("Next"),_=e.outTexture("Texture"),d=e.outTexture("Texture 2"),p=e.outTexture("Texture 3"),v=e.outTexture("Texture 4");e.setPortGroup("Texture Size",[o,i,s]);e.setPortGroup("Texture settings",[l,u,c]);let f=1;const g=e.patch.cgl;const h=[0,0,0,0];const b=null;const x=[];let O=null;let I=null;i.onChange=s.onChange=c.onChange=l.onChange=m.onChange=u.onChange=N;o.onChange=E;const T=false;let y=null;const S=null;let A=true;const M=CGL.MESHES.getSimpleRect(g,"shader2texture rect");e.toWorkPortsNeedToBeLinked(a);l.set("nearest");E();function C(){if(l.get()=="mipmap"&&c.get()){e.setUiError("warning","HDR and mipmap filtering at the same time is not possible")}else{e.setUiError("warning",null)}}function E(){i.setUiAttribs({greyout:o.get()});s.setUiAttribs({greyout:o.get()});i.set(g.getViewPort()[2]);s.set(g.getViewPort()[3])}function N(){A=true;C()}function P(){if(I)I.dispose();O=null;I=null}function j(){A=false;if(y)y.delete();const e=x.length;f=parseInt(m.get());x.length=0;for(let e=0;e<f;e++)x[e]=true;if(e!=x.length){P()}y=null;let t=i.get();let n=s.get();if(o.get()){t=g.getViewPort()[2];n=g.getViewPort()[3]}let a=CGL.Texture.FILTER_NEAREST;if(l.get()=="linear")a=CGL.Texture.FILTER_LINEAR;else if(l.get()=="mipmap")a=CGL.Texture.FILTER_MIPMAP;let r=CGL.Texture.WRAP_CLAMP_TO_EDGE;if(u.get()=="repeat")r=CGL.Texture.WRAP_REPEAT;if(u.get()=="mirrored repeat")r=CGL.Texture.WRAP_MIRRORED_REPEAT;if(g.glVersion>=2){y=new CGL.Framebuffer2(g,t,n,{isFloatingPointTexture:c.get(),multisampling:false,numRenderBuffers:f,wrap:r,filter:a,depth:true,multisamplingSamples:0,clear:true})}else{y=new CGL.Framebuffer(g,i.get(),s.get(),{isFloatingPointTexture:c.get(),filter:a,wrap:r})}}n.onTriggered=function(){const e=g.getViewPort();if(!y||A)j();if(o.get()&&y&&(e[2]!=y.getTextureColor().width||e[3]!=y.getTextureColor().height))j();if(!a.get()||!a.get().setDrawBuffers)return;if(a.get()!=O){O=a.get();I=a.get().copy();I.setDrawBuffers(x)}if(!I){_.set(null);return}h[0]=e[0];h[1]=e[1];h[2]=e[2];h[3]=e[3];y.renderStart(g);g.pushPMatrix();mat4.identity(g.pMatrix);g.pushViewMatrix();mat4.identity(g.vMatrix);g.pushModelMatrix();mat4.identity(g.mMatrix);g.pushShader(a.get());if(I.bindTextures)I.bindTextures();g.pushBlend(false);M.render(a.get());g.popBlend();g.popPMatrix();g.popModelMatrix();g.popViewMatrix();y.renderEnd(g);if(f>=2){_.set(y.getTextureColorNum(0));d.set(y.getTextureColorNum(1));p.set(y.getTextureColorNum(2));v.set(y.getTextureColorNum(3))}else _.set(y.getTextureColor());g.popShader();g.gl.viewport(h[0],h[1],h[2],h[3]);r.trigger()}};Ops.Gl.Shader.Shader2Texture.prototype=new CABLES.Op;CABLES.OPS["a3debb76-7d84-4548-9e7b-24891423dcce"]={f:Ops.Gl.Shader.Shader2Texture,objName:"Ops.Gl.Shader.Shader2Texture"};Ops.Anim.Timer_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const a=e.inValue("Speed",1),n=e.inValueBool("Play",true),r=e.inTriggerButton("Reset"),o=e.inValueBool("Sync to timeline",false),i=e.outValue("Time");e.setPortGroup("Controls",[n,r,a]);const s=new CABLES.Timer;let l=null;let u=0;let c=false;n.onChange=m;m();function m(){if(n.get()){s.play();e.patch.addOnAnimFrame(e)}else{s.pause();e.patch.removeOnAnimFrame(e)}}r.onTriggered=_;function _(){u=0;l=null;s.setTime(0);i.set(0)}o.onChange=function(){c=o.get();n.setUiAttribs({greyout:c});r.setUiAttribs({greyout:c})};e.onAnimFrame=function(e){if(s.isPlaying()){if(CABLES.overwriteTime!==undefined){i.set(CABLES.overwriteTime*a.get())}else if(c){i.set(e*a.get())}else{s.update();const t=s.get();if(l===null){l=t;return}const n=Math.abs(t-l);l=t;u+=n*a.get();if(u!=u)u=0;i.set(u)}}}};Ops.Anim.Timer_v2.prototype=new CABLES.Op;CABLES.OPS["aac7f721-208f-411a-adb3-79adae2e471a"]={f:Ops.Anim.Timer_v2,objName:"Ops.Anim.Timer_v2"};Ops.Sequence=function(){CABLES.Op.apply(this,arguments);const o=this;const e={};const t=o.inTrigger("exe"),n=o.inTriggerButton("Clean up connections");const a=[],i=[],r=16;let s=null;t.onTriggered=u;n.onTriggered=c;n.setUiAttribs({hidePort:true});n.setUiAttribs({hideParam:true});for(let t=0;t<r;t++){const m=o.outTrigger("trigger "+t);i.push(m);m.onLinkChanged=l;if(t<r-1){let e=o.inTrigger("exe "+t);e.onTriggered=u;a.push(e)}}function l(){clearTimeout(s);s=setTimeout(()=>{let t=false;for(let e=0;e<i.length;e++)if(i[e].links.length>1)t=true;n.setUiAttribs({hideParam:!t});if(o.isCurrentUiOp())o.refreshParams()},60)}function u(){for(let e=0;e<i.length;e++)i[e].trigger()}function c(){let a=0;for(let n=0;n<i.length;n++){let t=[];if(i[n].links.length>1)for(let e=1;e<i[n].links.length;e++){while(i[a].links.length>0)a++;t.push(i[n].links[e]);const r=i[n].links[e].getOtherPort(i[n]);o.patch.link(o,"trigger "+a,r.parent,r.name);a++}for(let e=0;e<t.length;e++)t[e].remove()}l()}};Ops.Sequence.prototype=new CABLES.Op;CABLES.OPS["a466bc1f-06e9-4595-8849-bffb9fe22f99"]={f:Ops.Sequence,objName:"Ops.Sequence"};Ops.Gl.MainLoop=function(){CABLES.Op.apply(this,arguments);const a=this;const e={};const t=a.inValue("FPS Limit",0),n=a.outTrigger("trigger"),r=a.outNumber("width"),o=a.outNumber("height"),i=a.inValueBool("Reduce FPS not focussed",true),s=a.inValueBool("Reduce FPS loading"),l=a.inValueBool("Clear",true),u=a.inValueBool("ClearAlpha",true),c=a.inValueBool("Fullscreen Button",false),m=a.inValueBool("Active",true),_=a.inValueBool("Hires Displays",false),d=a.inSwitch("Pixel Unit",["Display","CSS"],"Display");a.onAnimFrame=y;_.onChange=function(){if(_.get())a.patch.cgl.pixelDensity=window.devicePixelRatio;else a.patch.cgl.pixelDensity=1;a.patch.cgl.updateSize();if(CABLES.UI)gui.setLayout();d.setUiAttribs({greyout:!_.get()})};m.onChange=function(){a.patch.removeOnAnimFrame(a);if(m.get()){a.setUiAttrib({extendTitle:""});a.onAnimFrame=y;a.patch.addOnAnimFrame(a);a.log("adding again!")}else{a.setUiAttrib({extendTitle:"Inactive"})}};const p=a.patch.cgl;let v=0;let f=0;if(!a.patch.cgl)a.uiAttr({error:"No webgl cgl context"});const g=vec3.create();vec3.set(g,0,0,0);const h=vec3.create();vec3.set(h,0,0,-2);c.onChange=T;setTimeout(T,100);let b=null;let x=true;let O=true;window.addEventListener("blur",()=>{x=false});window.addEventListener("focus",()=>{x=true});document.addEventListener("visibilitychange",()=>{O=!document.hidden});S();d.onChange=()=>{r.set(0);o.set(0)};function I(){if(s.get()&&a.patch.loading.getProgress()<1)return 5;if(i.get()){if(!O)return 10;if(!x)return 30}return t.get()}function T(){function e(){if(b)b.style.display="block"}function t(){if(b)b.style.display="none"}a.patch.cgl.canvas.addEventListener("mouseleave",t);a.patch.cgl.canvas.addEventListener("mouseenter",e);if(c.get()){if(!b){b=document.createElement("div");const n=a.patch.cgl.canvas.parentElement;if(n)n.appendChild(b);b.addEventListener("mouseenter",e);b.addEventListener("click",function(e){if(CABLES.UI&&!e.shiftKey)gui.cycleFullscreen();else p.fullScreen()})}b.style.padding="10px";b.style.position="absolute";b.style.right="5px";b.style.top="5px";b.style.width="20px";b.style.height="20px";b.style.cursor="pointer";b.style["border-radius"]="40px";b.style.background="#444";b.style["z-index"]="9999";b.style.display="none";b.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 490 490" style="width:20px;height:20px;" xml:space="preserve" width="512px" height="512px"><g><path d="M173.792,301.792L21.333,454.251v-80.917c0-5.891-4.776-10.667-10.667-10.667C4.776,362.667,0,367.442,0,373.333V480     c0,5.891,4.776,10.667,10.667,10.667h106.667c5.891,0,10.667-4.776,10.667-10.667s-4.776-10.667-10.667-10.667H36.416     l152.459-152.459c4.093-4.237,3.975-10.99-0.262-15.083C184.479,297.799,177.926,297.799,173.792,301.792z" fill="#FFFFFF"/><path d="M480,0H373.333c-5.891,0-10.667,4.776-10.667,10.667c0,5.891,4.776,10.667,10.667,10.667h80.917L301.792,173.792     c-4.237,4.093-4.354,10.845-0.262,15.083c4.093,4.237,10.845,4.354,15.083,0.262c0.089-0.086,0.176-0.173,0.262-0.262     L469.333,36.416v80.917c0,5.891,4.776,10.667,10.667,10.667s10.667-4.776,10.667-10.667V10.667C490.667,4.776,485.891,0,480,0z" fill="#FFFFFF"/><path d="M36.416,21.333h80.917c5.891,0,10.667-4.776,10.667-10.667C128,4.776,123.224,0,117.333,0H10.667     C4.776,0,0,4.776,0,10.667v106.667C0,123.224,4.776,128,10.667,128c5.891,0,10.667-4.776,10.667-10.667V36.416l152.459,152.459     c4.237,4.093,10.99,3.975,15.083-0.262c3.992-4.134,3.992-10.687,0-14.82L36.416,21.333z" fill="#FFFFFF"/><path d="M480,362.667c-5.891,0-10.667,4.776-10.667,10.667v80.917L316.875,301.792c-4.237-4.093-10.99-3.976-15.083,0.261     c-3.993,4.134-3.993,10.688,0,14.821l152.459,152.459h-80.917c-5.891,0-10.667,4.776-10.667,10.667s4.776,10.667,10.667,10.667     H480c5.891,0,10.667-4.776,10.667-10.667V373.333C490.667,367.442,485.891,362.667,480,362.667z" fill="#FFFFFF"/></g></svg>'}else{if(b){b.style.display="none";b.remove();b=null}}}a.onDelete=function(){p.gl.clearColor(0,0,0,0);p.gl.clear(p.gl.COLOR_BUFFER_BIT|p.gl.DEPTH_BUFFER_BIT)};function y(e){if(!m.get())return;if(p.aborted||p.canvas.clientWidth===0||p.canvas.clientHeight===0)return;const t=performance.now();a.patch.config.fpsLimit=I();if(p.canvasWidth==-1){p.setCanvas(a.patch.config.glCanvasId);return}if(p.canvasWidth!=r.get()||p.canvasHeight!=o.get()){let e=1;if(d.get()=="CSS")e=a.patch.cgl.pixelDensity;r.set(p.canvasWidth/e);o.set(p.canvasHeight/e)}if(CABLES.now()-f>1e3){CGL.fpsReport=CGL.fpsReport||[];if(a.patch.loading.getProgress()>=1&&f!==0)CGL.fpsReport.push(v);v=0;f=CABLES.now()}CGL.MESH.lastShader=null;CGL.MESH.lastMesh=null;p.renderStart(p,g,h);if(l.get()){p.gl.clearColor(0,0,0,1);p.gl.clear(p.gl.COLOR_BUFFER_BIT|p.gl.DEPTH_BUFFER_BIT)}n.trigger();if(CGL.MESH.lastMesh)CGL.MESH.lastMesh.unBind();if(CGL.Texture.previewTexture){if(!CGL.Texture.texturePreviewer)CGL.Texture.texturePreviewer=new CGL.Texture.texturePreview(p);CGL.Texture.texturePreviewer.render(CGL.Texture.previewTexture)}p.renderEnd(p);if(u.get()){p.gl.clearColor(1,1,1,1);p.gl.colorMask(false,false,false,true);p.gl.clear(p.gl.COLOR_BUFFER_BIT);p.gl.colorMask(true,true,true,true)}if(!p.frameStore.phong)p.frameStore.phong={};v++;a.patch.cgl.profileData.profileMainloopMs=performance.now()-t}function S(){setTimeout(()=>{if(a.patch.getOpsByObjName(a.name).length>1){a.setUiError("multimainloop","there should only be one mainloop op!");a.patch.addEventListener("onOpDelete",S)}else a.setUiError("multimainloop",null,1)},500)}};Ops.Gl.MainLoop.prototype=new CABLES.Op;CABLES.OPS["b0472a1d-db16-4ba6-8787-f300fbdc77bb"]={f:Ops.Gl.MainLoop,objName:"Ops.Gl.MainLoop"};Ops.Ui.VizTexture=function(){CABLES.Op.apply(this,arguments);const e=this;const I={viztex_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI samplerCube cubeMap;\nUNI float width;\nUNI float height;\nUNI float type;\n\nfloat LinearizeDepth(float d,float zNear,float zFar)\n{\n    float z_n = 2.0 * d - 1.0;\n    return 2.0 * zNear / (zFar + zNear - z_n * (zFar - zNear));\n}\n\nvoid main()\n{\n    vec4 col=vec4(vec3(0.),0.0);\n\n    vec4 colTex=texture2D(tex,texCoord);\n\n    if(type==0.0)\n    {\n    }\n\n    if(type==1.0)\n    {\n        vec4 depth=vec4(0.);\n        vec2 localST=texCoord;\n        localST.y = 1. - localST.y;\n\n        localST.t = mod(localST.t*3.,1.);\n        localST.s = mod(localST.s*4.,1.);\n\n        #ifdef WEBGL2\n            #define texCube texture\n        #endif\n        #ifdef WEBGL1\n            #define texCube textureCube\n        #endif\n\n//         //Due to the way my depth-cubeMap is rendered, objects to the -x,y,z side is projected to the positive x,y,z side\n//         //Inside where top/bottom is to be drawn?\n        if (texCoord.s*4.> 1. && texCoord.s*4.<2.)\n        {\n            //Bottom (-y) quad\n            if (texCoord.t*3. < 1.)\n            {\n                vec3 dir=vec3(localST.s*2.-1.,-1.,-localST.t*2.+1.);//Due to the (arbitrary) way I choose as up in my depth-viewmatrix, i her emultiply the latter coordinate with -1\n                depth = texCube(cubeMap, dir);\n            }\n            //top (+y) quad\n            else if (texCoord.t*3. > 2.)\n            {\n                vec3 dir=vec3(localST.s*2.-1.,1.,localST.t*2.-1.);//Get lower y texture, which is projected to the +y part of my cubeMap\n                depth = texCube(cubeMap, dir);\n            }\n            else//Front (-z) quad\n            {\n                vec3 dir=vec3(localST.s*2.-1.,-localST.t*2.+1.,1.);\n                depth = texCube(cubeMap, dir);\n            }\n        }\n//         //If not, only these ranges should be drawn\n        else if (texCoord.t*3. > 1. && texCoord.t*3. < 2.)\n        {\n            if (texCoord.x*4. < 1.)//left (-x) quad\n            {\n                vec3 dir=vec3(-1.,-localST.t*2.+1.,localST.s*2.-1.);\n                depth = texCube(cubeMap, dir);\n            }\n            else if (texCoord.x*4. < 3.)//right (+x) quad (front was done above)\n            {\n                vec3 dir=vec3(1,-localST.t*2.+1.,-localST.s*2.+1.);\n                depth = texCube(cubeMap, dir);\n            }\n            else //back (+z) quad\n            {\n                vec3 dir=vec3(-localST.s*2.+1.,-localST.t*2.+1.,-1.);\n                depth = texCube(cubeMap, dir);\n            }\n        }\n        colTex = vec4(vec3(depth),1.);\n    }\n\n    if(type==2.0)\n    {\n       float near = 0.1;\n       float far = 50.;\n       float depth = LinearizeDepth(colTex.r, near, far);\n       colTex.rgb = vec3(depth);\n    }\n\n\n    outColor = mix(col,colTex,colTex.a);\n}\n\n",viztex_vert:"IN vec3 vPosition;\nIN vec2 attrTexCoord;\nOUT vec2 texCoord;\nUNI mat4 projMatrix;\nUNI mat4 modelMatrix;\nUNI mat4 viewMatrix;\n\nvoid main()\n{\n    texCoord=vec2(attrTexCoord.x,1.0-attrTexCoord.y);\n    vec4 pos = vec4( vPosition, 1. );\n    mat4 mvMatrix=viewMatrix * modelMatrix;\n    gl_Position = projMatrix * mvMatrix * pos;\n}"};const T=e.inTexture("Texture In"),t=e.outTexture("Texture Out"),y=e.outString("Info");e.setUiAttrib({height:150,resizable:true});T.onChange=()=>{t.set(CGL.Texture.getEmptyTexture(e.patch.cgl));t.set(T.get())};e.renderVizLayer=(n,a)=>{const e=T;const t=5;const r=t+1;const o=CABLES.UI.uiProfiler.start("previewlayer texture");const i=e.parent.patch.cgl;if(!this._emptyCubemap)this._emptyCubemap=CGL.Texture.getEmptyCubemapTexture(i);e.parent.patch.cgl.profileData.profileTexPreviews++;const s=e.get()||CGL.Texture.getEmptyTexture(i);if(!this._mesh){const x=new CGL.Geometry("preview op rect");x.vertices=[1,1,0,-1,1,0,1,-1,0,-1,-1,0];x.texCoords=[1,1,0,1,1,0,0,0];x.verticesIndices=[0,1,2,3,1,2];this._mesh=new CGL.Mesh(i,x)}if(!this._shader){this._shader=new CGL.Shader(i,"glpreviewtex");this._shader.setModules(["MODULE_VERTEX_POSITION","MODULE_COLOR","MODULE_BEGIN_FRAG"]);this._shader.setSource(I.viztex_vert,I.viztex_frag);this._shaderTexUniform=new CGL.Uniform(this._shader,"t","tex",t);this._shaderTexCubemapUniform=new CGL.Uniform(this._shader,"tc","cubeMap",r);this._shaderTexUniformW=new CGL.Uniform(this._shader,"f","width",s.width);this._shaderTexUniformH=new CGL.Uniform(this._shader,"f","height",s.height);this._shaderTypeUniform=new CGL.Uniform(this._shader,"f","type",0)}i.pushPMatrix();const l=[s.width,s.height];const u=e.parent.patch.cgl.canvasWidth>l[0]&&e.parent.patch.cgl.canvasHeight>l[1];if(u){mat4.ortho(i.pMatrix,0,e.parent.patch.cgl.canvasWidth,e.parent.patch.cgl.canvasHeight,0,.001,11)}else mat4.ortho(i.pMatrix,-1,1,1,-1,.001,11);const c=i.getTexture(t);const m=i.getTexture(r);let _=0;if(!s)return;if(s.cubemap)_=1;if(s.textureType==CGL.Texture.TYPE_DEPTH)_=2;if(_==0||_==2){i.setTexture(t,s.tex);i.setTexture(r,this._emptyCubemap.cubemap,i.gl.TEXTURE_CUBE_MAP)}else if(_==1){i.setTexture(r,s.cubemap,i.gl.TEXTURE_CUBE_MAP)}this._shaderTypeUniform.setValue(_);let d=[e.parent.patch.cgl.canvasWidth,e.parent.patch.cgl.canvasHeight];i.gl.clearColor(0,0,0,0);i.gl.clear(i.gl.COLOR_BUFFER_BIT|i.gl.DEPTH_BUFFER_BIT);i.pushModelMatrix();if(u){d=l;mat4.translate(i.mMatrix,i.mMatrix,[l[0]/2,l[1]/2,0]);mat4.scale(i.mMatrix,i.mMatrix,[l[0]/2,l[1]/2,0])}this._mesh.render(this._shader);i.popModelMatrix();if(_==0)i.setTexture(t,c);if(_==1)i.setTexture(r,m);i.popPMatrix();i.resetViewPort();const p=[a.width,a.height];const v=false;if(!v){if(s.width>s.height)p[1]=a.width*l[1]/l[0];else{p[1]=a.width*(l[1]/l[0]);if(p[1]>a.height){const O=a.height/p[1];p[0]*=O;p[1]*=O}}}const f=p[0]>l[0]&&p[1]>l[1];n.imageSmoothingEnabled=!u||!f;if(!n.imageSmoothingEnabled){n.fillStyle="#ffffff";n.fillRect(a.x,a.y-10,10,10);n.fillStyle="#000000";n.fillRect(a.x,a.y-10,5,5);n.fillRect(a.x+5,a.y-10+5,5,5)}let g=10*a.width/a.height;let h=a.height/10;let b=a.width/g;for(let t=0;t<g;t++)for(let e=0;e<10;e++){if((t+e)%2==0)n.fillStyle="#333333";else n.fillStyle="#393939";n.fillRect(a.x+b*t,a.y+h*e,b,h)}if(l[1]==1)n.drawImage(i.canvas,0,0,d[0],d[1],a.x,a.y,a.width,a.height*5);if(l[0]==1)n.drawImage(i.canvas,0,0,d[0],d[1],a.x,a.y,a.width*5,a.height);else n.drawImage(i.canvas,0,0,d[0],d[1],a.x+(a.width-p[0])/2,a.y+(a.height-p[1])/2,p[0],p[1]);if(e.get()&&e.get().getInfoOneLine)y.set(e.get().getInfoOneLine());else y.set("unknown");i.gl.clearColor(0,0,0,0);i.gl.clear(i.gl.COLOR_BUFFER_BIT|i.gl.DEPTH_BUFFER_BIT);o.finish()}};Ops.Ui.VizTexture.prototype=new CABLES.Op;CABLES.OPS["4ea2d7b0-ca74-45db-962b-4d1965ac20c0"]={f:Ops.Ui.VizTexture,objName:"Ops.Ui.VizTexture"};Ops.Gl.Render2Texture=function(){CABLES.Op.apply(this,arguments);const r=this;const e={};const o=r.patch.cgl;const t=r.inTrigger("render"),n=r.inValueBool("use viewport size",true),a=r.inValueInt("texture width",512),i=r.inValueInt("texture height",512),s=r.inBool("Auto Aspect",false),l=r.inSwitch("filter",["nearest","linear","mipmap"],"linear"),u=r.inSwitch("Wrap",["Clamp","Repeat","Mirror"],"Repeat"),c=r.inSwitch("MSAA",["none","2x","4x","8x"],"none"),m=r.outTrigger("trigger"),_=r.outTexture("texture"),d=r.outTexture("textureDepth"),p=r.inValueBool("HDR"),v=r.inValueBool("Depth",true),f=r.inValueBool("Clear",true);let g=null;let h=true;_.set(CGL.Texture.getEmptyTexture(o));r.setPortGroup("Size",[n,a,i,s]);const b=[0,0,0,0];p.setUiAttribs({title:"Pixelformat Float 32bit"});p.onChange=v.onChange=f.onChange=l.onChange=u.onChange=c.onChange=O;n.onChange=x;t.onTriggered=r.preRender=I;x();function x(){a.setUiAttribs({greyout:n.get()});i.setUiAttribs({greyout:n.get()});s.setUiAttribs({greyout:n.get()})}function O(){h=true}function I(){const e=o.getViewPort();b[0]=e[0];b[1]=e[1];b[2]=e[2];b[3]=e[3];if(!g||h){if(g)g.delete();let n=CGL.Texture.WRAP_REPEAT;if(u.get()=="Clamp")n=CGL.Texture.WRAP_CLAMP_TO_EDGE;else if(u.get()=="Mirror")n=CGL.Texture.WRAP_MIRRORED_REPEAT;let a=CGL.Texture.FILTER_NEAREST;if(l.get()=="nearest")a=CGL.Texture.FILTER_NEAREST;else if(l.get()=="linear")a=CGL.Texture.FILTER_LINEAR;else if(l.get()=="mipmap")a=CGL.Texture.FILTER_MIPMAP;if(p.get()&&l.get()=="mipmap")r.setUiError("fpmipmap","Don't use mipmap and HDR at the same time, many systems do not support this.");else r.setUiError("fpmipmap",null);if(o.glVersion>=2){let e=true;let t=4;if(c.get()=="none"){t=0;e=false}if(c.get()=="2x")t=2;if(c.get()=="4x")t=4;if(c.get()=="8x")t=8;g=new CGL.Framebuffer2(o,8,8,{name:"render2texture "+r.id,isFloatingPointTexture:p.get(),multisampling:e,wrap:n,filter:a,depth:v.get(),multisamplingSamples:t,clear:f.get()})}else{g=new CGL.Framebuffer(o,8,8,{isFloatingPointTexture:p.get(),clear:f.get()})}d.set(g.getTextureDepth());h=false}if(n.get()){a.set(o.getViewPort()[2]);i.set(o.getViewPort()[3])}if(g.getWidth()!=Math.ceil(a.get())||g.getHeight()!=Math.ceil(i.get())){g.setSize(Math.max(1,Math.ceil(a.get())),Math.max(1,Math.ceil(i.get())))}g.renderStart(o);if(s.get())mat4.perspective(o.pMatrix,45,a.get()/i.get(),.1,1e3);m.trigger();g.renderEnd(o);o.setViewPort(b[0],b[1],b[2],b[3]);_.set(CGL.Texture.getEmptyTexture(r.patch.cgl));_.set(g.getTextureColor())}};Ops.Gl.Render2Texture.prototype=new CABLES.Op;CABLES.OPS["d01fa820-396c-4cb5-9d78-6b14762852af"]={f:Ops.Gl.Render2Texture,objName:"Ops.Gl.Render2Texture"};Ops.Gl.TextureEffects.DrawImage_v3=function(){CABLES.Op.apply(this,arguments);const a=this;const e={drawimage_frag:"#ifdef HAS_TEXTURES\n    IN vec2 texCoord;\n    UNI sampler2D tex;\n    UNI sampler2D image;\n#endif\n\n#ifdef TEX_TRANSFORM\n    IN mat3 transform;\n#endif\n// UNI float rotate;\n\n{{CGL.BLENDMODES}}\n\n#ifdef HAS_TEXTUREALPHA\n   UNI sampler2D imageAlpha;\n#endif\n\nUNI float amount;\n\n#ifdef ASPECT_RATIO\n    UNI float aspectTex;\n    UNI float aspectPos;\n#endif\n\nvoid main()\n{\n    vec4 blendRGBA=vec4(0.0,0.0,0.0,1.0);\n\n    #ifdef HAS_TEXTURES\n        vec2 tc=texCoord;\n\n        #ifdef TEX_FLIP_X\n            tc.x=1.0-tc.x;\n        #endif\n        #ifdef TEX_FLIP_Y\n            tc.y=1.0-tc.y;\n        #endif\n\n        #ifdef ASPECT_RATIO\n            #ifdef ASPECT_AXIS_X\n                tc.y=(1.0-aspectPos)-(((1.0-aspectPos)-tc.y)*aspectTex);\n            #endif\n            #ifdef ASPECT_AXIS_Y\n                tc.x=(1.0-aspectPos)-(((1.0-aspectPos)-tc.x)/aspectTex);\n            #endif\n        #endif\n\n        #ifdef TEX_TRANSFORM\n            vec3 coordinates=vec3(tc.x, tc.y,1.0);\n            tc=(transform * coordinates ).xy;\n        #endif\n\n        blendRGBA=texture(image,tc);\n\n        vec3 blend=blendRGBA.rgb;\n        vec4 baseRGBA=texture(tex,texCoord);\n        vec3 base=baseRGBA.rgb;\n\n\n        #ifdef PREMUL\n            blend.rgb = (blend.rgb) + (base.rgb * (1.0 - blendRGBA.a));\n        #endif\n\n        vec3 colNew=_blend(base,blend);\n\n\n\n\n        #ifdef REMOVE_ALPHA_SRC\n            blendRGBA.a=1.0;\n        #endif\n\n        #ifdef HAS_TEXTUREALPHA\n            vec4 colImgAlpha=texture(imageAlpha,tc);\n            float colImgAlphaAlpha=colImgAlpha.a;\n\n            #ifdef ALPHA_FROM_LUMINANCE\n                vec3 gray = vec3(dot(vec3(0.2126,0.7152,0.0722), colImgAlpha.rgb ));\n                colImgAlphaAlpha=(gray.r+gray.g+gray.b)/3.0;\n            #endif\n\n            #ifdef ALPHA_FROM_INV_UMINANCE\n                vec3 gray = vec3(dot(vec3(0.2126,0.7152,0.0722), colImgAlpha.rgb ));\n                colImgAlphaAlpha=1.0-(gray.r+gray.g+gray.b)/3.0;\n            #endif\n\n            #ifdef INVERT_ALPHA\n                colImgAlphaAlpha=clamp(colImgAlphaAlpha,0.0,1.0);\n                colImgAlphaAlpha=1.0-colImgAlphaAlpha;\n            #endif\n\n            blendRGBA.a=colImgAlphaAlpha*blendRGBA.a;\n        #endif\n    #endif\n\n    float am=amount;\n\n    #ifdef CLIP_REPEAT\n        if(tc.y>1.0 || tc.y<0.0 || tc.x>1.0 || tc.x<0.0)\n        {\n            // colNew.rgb=vec3(0.0);\n            am=0.0;\n        }\n    #endif\n\n    #ifdef ASPECT_RATIO\n        #ifdef ASPECT_CROP\n            if(tc.y>1.0 || tc.y<0.0 || tc.x>1.0 || tc.x<0.0)\n            {\n                colNew.rgb=base.rgb;\n                am=0.0;\n            }\n\n        #endif\n    #endif\n\n\n\n    #ifndef PREMUL\n        blendRGBA.rgb=mix(colNew,base,1.0-(am*blendRGBA.a));\n        blendRGBA.a=clamp(baseRGBA.a+(blendRGBA.a*am),0.,1.);\n    #endif\n\n    #ifdef PREMUL\n        // premultiply\n        // blendRGBA.rgb = (blendRGBA.rgb) + (baseRGBA.rgb * (1.0 - blendRGBA.a));\n        blendRGBA=vec4(\n            mix(colNew.rgb,base,1.0-(am*blendRGBA.a)),\n            blendRGBA.a*am+baseRGBA.a\n            );\n    #endif\n\n    #ifdef ALPHA_MASK\n    blendRGBA.a=baseRGBA.a;\n    #endif\n\n    outColor=blendRGBA;\n}\n\n\n\n\n\n\n\n",drawimage_vert:"IN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\n\nUNI mat4 projMatrix;\nUNI mat4 mvMatrix;\n\nOUT vec2 texCoord;\n// OUT vec3 norm;\n\n#ifdef TEX_TRANSFORM\n    UNI float posX;\n    UNI float posY;\n    UNI float scaleX;\n    UNI float scaleY;\n    UNI float rotate;\n    OUT mat3 transform;\n#endif\n\nvoid main()\n{\n   texCoord=attrTexCoord;\n//   norm=attrVertNormal;\n\n   #ifdef TEX_TRANSFORM\n        vec3 coordinates=vec3(attrTexCoord.x, attrTexCoord.y,1.0);\n        float angle = radians( rotate );\n        vec2 scale= vec2(scaleX,scaleY);\n        vec2 translate= vec2(posX,posY);\n\n        transform = mat3(   scale.x * cos( angle ), scale.x * sin( angle ), 0.0,\n            - scale.y * sin( angle ), scale.y * cos( angle ), 0.0,\n            - 0.5 * scale.x * cos( angle ) + 0.5 * scale.y * sin( angle ) - 0.5 * translate.x*2.0 + 0.5,  - 0.5 * scale.x * sin( angle ) - 0.5 * scale.y * cos( angle ) - 0.5 * translate.y*2.0 + 0.5, 1.0);\n   #endif\n\n   gl_Position = projMatrix * mvMatrix * vec4(vPosition,  1.0);\n}\n"};const t=a.inTrigger("render"),n=CGL.TextureEffect.AddBlendSelect(a,"blendMode"),r=a.inValueSlider("amount",1),o=a.inTexture("Image"),i=a.inValueBool("Premultiplied",false),s=a.inValueBool("Alpha Mask",false),l=a.inValueBool("removeAlphaSrc",false),u=a.inTexture("Mask"),c=a.inValueSelect("Mask Src",["alpha channel","luminance","luminance inv"],"luminance"),m=a.inValueBool("Invert alpha channel"),_=a.inValueBool("Aspect Ratio",false),d=a.inValueSelect("Stretch Axis",["X","Y"],"X"),p=a.inValueSlider("Position",0),v=a.inValueBool("Crop",false),f=a.outTrigger("trigger");n.set("normal");const g=a.patch.cgl;const h=new CGL.Shader(g,"drawimage");u.onLinkChanged=b;a.setPortGroup("Mask",[u,c,m]);a.setPortGroup("Aspect Ratio",[_,p,v,d]);function b(){if(u.isLinked()){l.setUiAttribs({greyout:true});c.setUiAttribs({greyout:false});m.setUiAttribs({greyout:false})}else{l.setUiAttribs({greyout:false});c.setUiAttribs({greyout:true});m.setUiAttribs({greyout:true})}}a.toWorkPortsNeedToBeLinked(o);h.setSource(e.drawimage_vert,e.drawimage_frag);const x=new CGL.Uniform(h,"t","tex",0),O=new CGL.Uniform(h,"t","image",1),I=new CGL.Uniform(h,"t","imageAlpha",2),T=new CGL.Uniform(h,"f","aspectTex",1),y=new CGL.Uniform(h,"f","aspectPos",p);_.onChange=v.onChange=d.onChange=S;function S(){h.removeDefine("ASPECT_AXIS_X");h.removeDefine("ASPECT_AXIS_Y");h.removeDefine("ASPECT_CROP");p.setUiAttribs({greyout:!_.get()});v.setUiAttribs({greyout:!_.get()});d.setUiAttribs({greyout:!_.get()});if(_.get()){h.define("ASPECT_RATIO");if(v.get())h.define("ASPECT_CROP");if(d.get()=="X")h.define("ASPECT_AXIS_X");if(d.get()=="Y")h.define("ASPECT_AXIS_Y")}else{h.removeDefine("ASPECT_RATIO");if(v.get())h.define("ASPECT_CROP");if(d.get()=="X")h.define("ASPECT_AXIS_X");if(d.get()=="Y")h.define("ASPECT_AXIS_Y")}}c.set("alpha channel");const A=a.inValueBool("flip x");const M=a.inValueBool("flip y");let C=a.inValueBool("Transform");let E=a.inValueSlider("Scale X",1);let N=a.inValueSlider("Scale Y",1);let P=a.inValue("Position X",0);let j=a.inValue("Position Y",0);let R=a.inValue("Rotation",0);const D=a.inValueBool("Clip Repeat",false);const w=new CGL.Uniform(h,"f","scaleX",E);const L=new CGL.Uniform(h,"f","scaleY",N);const G=new CGL.Uniform(h,"f","posX",P);const k=new CGL.Uniform(h,"f","posY",j);const U=new CGL.Uniform(h,"f","rotate",R);C.onChange=V;function V(){h.toggleDefine("TEX_TRANSFORM",C.get());E.setUiAttribs({greyout:!C.get()});N.setUiAttribs({greyout:!C.get()});P.setUiAttribs({greyout:!C.get()});j.setUiAttribs({greyout:!C.get()});R.setUiAttribs({greyout:!C.get()})}CGL.TextureEffect.setupBlending(a,h,n,r);const B=new CGL.Uniform(h,"f","amount",r);t.onTriggered=F;D.onChange=u.onChange=i.onChange=s.onChange=m.onChange=M.onChange=A.onChange=l.onChange=c.onChange=z;V();b();S();z();function z(){h.toggleDefine("REMOVE_ALPHA_SRC",l.get());h.toggleDefine("ALPHA_MASK",s.get());h.toggleDefine("CLIP_REPEAT",D.get());h.toggleDefine("HAS_TEXTUREALPHA",u.get()&&u.get().tex);h.toggleDefine("TEX_FLIP_X",A.get());h.toggleDefine("TEX_FLIP_Y",M.get());h.toggleDefine("INVERT_ALPHA",m.get());h.toggleDefine("ALPHA_FROM_LUMINANCE",c.get()=="luminance");h.toggleDefine("ALPHA_FROM_INV_UMINANCE",c.get()=="luminance_inv");h.toggleDefine("PREMUL",i.get())}function F(){if(!CGL.TextureEffect.checkOpInEffect(a))return;const e=o.get();if(e&&e.tex&&r.get()>0){g.pushShader(h);g.currentTextureEffect.bind();const t=g.currentTextureEffect.getCurrentSourceTexture();g.setTexture(0,t.tex);if(t&&e){if(e.textureType!=t.textureType&&(e.textureType!=CGL.Texture.TYPE_FLOAT||t.textureType!=CGL.Texture.TYPE_FLOAT))a.setUiError("textypediff","Drawing 32bit texture into an 8 bit can result in data/precision loss",1);else a.setUiError("textypediff",null)}const n=1/(g.currentTextureEffect.getWidth()/g.currentTextureEffect.getHeight())*(e.width/e.height);T.setValue(n);g.setTexture(1,e.tex);if(u.get()&&u.get().tex){g.setTexture(2,u.get().tex)}g.pushBlendMode(CGL.BLEND_NONE,true);g.currentTextureEffect.finish();g.popBlendMode();g.popShader()}f.trigger()}};Ops.Gl.TextureEffects.DrawImage_v3.prototype=new CABLES.Op;CABLES.OPS["8f6b2f15-fcb0-4597-90c0-e5173f2969fe"]={f:Ops.Gl.TextureEffects.DrawImage_v3,objName:"Ops.Gl.TextureEffects.DrawImage_v3"};Ops.Gl.TextureEffects.ImageCompose_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={imgcomp_frag:"UNI float a;\nvoid main()\n{\n   outColor= vec4(0.0,0.0,0.0,a);\n}\n"};const n=e.inTrigger("Render"),a=e.inBool("Use viewport size",true),r=e.inValueInt("Width",640),o=e.inValueInt("Height",480),i=e.inSwitch("Filter",["nearest","linear","mipmap"],"linear"),s=e.inValueSelect("Wrap",["clamp to edge","repeat","mirrored repeat"],"repeat"),l=e.inValueBool("HDR"),u=e.inValueBool("Transparent",false),c=e.outTrigger("Next"),m=e.outTexture("texture_out"),_=e.outValue("Aspect Ratio");const d=e.patch.cgl;e.setPortGroup("Texture Size",[a,r,o]);e.setPortGroup("Texture Settings",[s,i,l,u]);m.set(CGL.Texture.getEmptyTexture(d,l.get()));let p=null;let v=null;let f=8,g=8;const h=[0,0,0,0];let b=true;let x=CGL.Texture.FILTER_LINEAR;let O=CGL.Texture.WRAP_CLAMP_TO_EDGE;const I=0;const T=0;s.onChange=C;i.onChange=E;n.onTriggered=e.preRender=M;E();C();A();function y(){if(p)p.delete();if(v)v.delete();if(l.get()&&i.get()=="mipmap")e.setUiError("fpmipmap","Don't use mipmap and HDR at the same time, many systems do not support this.");else e.setUiError("fpmipmap",null);p=new CGL.TextureEffect(d,{isFloatingPointTexture:l.get()});v=new CGL.Texture(d,{name:"image_compose_v2_"+e.id,isFloatingPointTexture:l.get(),filter:x,wrap:O,width:Math.ceil(r.get()),height:Math.ceil(o.get())});p.setSourceTexture(v);m.set(CGL.Texture.getEmptyTexture(d,l.get()));b=false}l.onChange=function(){b=true};function S(){if(!p)y();if(a.get()){f=d.getViewPort()[2];g=d.getViewPort()[3]}else{f=Math.ceil(r.get());g=Math.ceil(o.get())}_.set(f/g);if((f!=v.width||g!=v.height)&&(f!==0&&g!==0)){v.setSize(f,g);p.setSourceTexture(v);m.set(CGL.Texture.getEmptyTexture(d,l.get()));m.set(v)}}function A(){r.setUiAttribs({greyout:a.get()});o.setUiAttribs({greyout:a.get()})}a.onChange=function(){A()};e.preRender=function(){M()};function M(){if(!p||b)y();const e=d.getViewPort();h[0]=e[0];h[1]=e[1];h[2]=e[2];h[3]=e[3];d.pushBlend(false);S();const t=d.currentTextureEffect;d.currentTextureEffect=p;d.currentTextureEffect.width=r.get();d.currentTextureEffect.height=o.get();p.setSourceTexture(v);let n=CGL.Texture.getBlackTexture(d);if(u.get())n=CGL.Texture.getEmptyTexture(d,l.get());p.startEffect(n);c.trigger();m.set(p.getCurrentSourceTexture());p.endEffect();d.setViewPort(h[0],h[1],h[2],h[3]);d.popBlend(false);d.currentTextureEffect=t}function C(){if(s.get()=="repeat")O=CGL.Texture.WRAP_REPEAT;if(s.get()=="mirrored repeat")O=CGL.Texture.WRAP_MIRRORED_REPEAT;if(s.get()=="clamp to edge")O=CGL.Texture.WRAP_CLAMP_TO_EDGE;b=true}function E(){if(i.get()=="nearest")x=CGL.Texture.FILTER_NEAREST;if(i.get()=="linear")x=CGL.Texture.FILTER_LINEAR;if(i.get()=="mipmap")x=CGL.Texture.FILTER_MIPMAP;b=true}};Ops.Gl.TextureEffects.ImageCompose_v2.prototype=new CABLES.Op;CABLES.OPS["a5b43d4c-a9ea-4eaf-9ed0-f257d222659d"]={f:Ops.Gl.TextureEffects.ImageCompose_v2,objName:"Ops.Gl.TextureEffects.ImageCompose_v2"};Ops.Gl.Meshes.FullscreenRectangle=function(){CABLES.Op.apply(this,arguments);const e=this;const t={shader_frag:"UNI sampler2D tex;\nIN vec2 texCoord;\n\nvoid main()\n{\n    outColor= texture(tex,texCoord);\n}\n",shader_vert:"{{MODULES_HEAD}}\n\nIN vec3 vPosition;\nUNI mat4 projMatrix;\nUNI mat4 mvMatrix;\n\nOUT vec2 texCoord;\nIN vec2 attrTexCoord;\n\nvoid main()\n{\n   vec4 pos=vec4(vPosition,  1.0);\n\n   texCoord=vec2(attrTexCoord.x,(1.0-attrTexCoord.y));\n\n   gl_Position = projMatrix * mvMatrix * pos;\n}\n"};const n=e.inTrigger("render"),a=e.inSwitch("Scale",["Stretch","Fit"],"Stretch"),r=e.inValueBool("Flip Y"),o=e.inValueBool("Flip X"),i=e.inTexture("Texture"),s=e.outTrigger("trigger");const l=e.patch.cgl;let u=null;let c=new CGL.Geometry("fullscreen rectangle");let m=0,_=0,d=0,p=0,v=0;o.onChange=T;r.onChange=T;const f=new CGL.Shader(l,"fullscreenrectangle");f.setModules(["MODULE_VERTEX_POSITION","MODULE_COLOR","MODULE_BEGIN_FRAG"]);f.setSource(t.shader_vert,t.shader_frag);f.fullscreenRectUniform=new CGL.Uniform(f,"t","tex",0);f.aspectUni=new CGL.Uniform(f,"f","aspectTex",0);let g=false;let h=true;let b=false;let x=[];n.onTriggered=I;e.toWorkPortsNeedToBeLinked(n);i.onChange=function(){h=true};function O(){let e=i.get();if(e)g=true;else g=false}e.preRender=function(){O();f.bind();if(u)u.render(f);I()};a.onChange=()=>{b=a.get()=="Fit"};function I(){if(l.getViewPort()[2]!=p||l.getViewPort()[3]!=v||!u)y();if(h)O();l.pushPMatrix();mat4.identity(l.pMatrix);mat4.ortho(l.pMatrix,0,p,v,0,-10,1e3);l.pushModelMatrix();mat4.identity(l.mMatrix);l.pushViewMatrix();mat4.identity(l.vMatrix);if(b&&i.get()){const n=i.get().width/i.get().height;let e=v;let t=v*n;if(t>p){e=p*1/n;t=p}x[0]=l.getViewPort()[0];x[1]=l.getViewPort()[1];x[2]=l.getViewPort()[2];x[3]=l.getViewPort()[3];l.setViewPort((p-t)/2,(v-e)/2,t,e)}if(g){if(i.get())l.setTexture(0,i.get().tex);u.render(f)}else{u.render(l.getShader())}l.gl.clear(l.gl.DEPTH_BUFFER_BIT);l.popPMatrix();l.popModelMatrix();l.popViewMatrix();if(b&&i.get())l.setViewPort(x[0],x[1],x[2],x[3]);s.trigger()}function T(){u=null}function y(){const e=l.getViewPort();if(e[2]==p&&e[3]==v&&u)return;let t=0,n=0;p=e[2];v=e[3];c.vertices=new Float32Array([t+p,n+v,0,t,n+v,0,t+p,n,0,t,n,0]);let a=null;if(r.get())a=new Float32Array([1,0,0,0,1,1,0,1]);else a=new Float32Array([1,1,0,1,1,0,0,0]);if(o.get()){a[0]=0;a[2]=1;a[4]=0;a[6]=1}c.setTexCoords(a);c.verticesIndices=new Uint16Array([2,1,0,3,1,2]);c.vertexNormals=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]);c.tangents=new Float32Array([-1,0,0,-1,0,0,-1,0,0,-1,0,0]);c.biTangents==new Float32Array([0,-1,0,0,-1,0,0,-1,0,0,-1,0]);if(!u)u=new CGL.Mesh(l,c);else u.setGeom(c)}};Ops.Gl.Meshes.FullscreenRectangle.prototype=new CABLES.Op;CABLES.OPS["255bd15b-cc91-4a12-9b4e-53c710cbb282"]={f:Ops.Gl.Meshes.FullscreenRectangle,objName:"Ops.Gl.Meshes.FullscreenRectangle"};Ops.Gl.Meshes.Rectangle_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("render"),a=e.outTrigger("trigger"),I=e.inValue("width",1),T=e.inValue("height",1),y=e.inSwitch("pivot x",["left","center","right"]),S=e.inSwitch("pivot y",["top","center","bottom"]),A=e.inValueInt("num columns",1),M=e.inValueInt("num rows",1),C=e.inSwitch("axis",["xy","xz"],"xy"),r=e.inValueBool("Active",true),E=e.outObject("geometry",null,"geometry");E.ignoreValueSerialize=true;const N=e.patch.cgl;C.set("xy");y.set("center");S.set("center");e.setPortGroup("Pivot",[y,S]);e.setPortGroup("Size",[I,T]);e.setPortGroup("Structure",[A,M]);e.toWorkPortsNeedToBeLinked(n);const P=new CGL.Geometry("rectangle");let j=null;let R=false;C.onChange=y.onChange=S.onChange=I.onChange=T.onChange=M.onChange=A.onChange=o;i();function o(){R=true}e.preRender=n.onTriggered=function(){if(!CGL.TextureEffect.checkOpNotInTextureEffect(e))return;if(R)i();if(r.get()&&j)j.render(N.getShader());a.trigger()};function i(){let e=I.get();let t=parseFloat(T.get());let n=0;let a=0;if(typeof e=="string")e=parseFloat(e);if(typeof t=="string")t=parseFloat(t);if(y.get()=="center")n=0;else if(y.get()=="right")n=-e/2;else if(y.get()=="left")n=+e/2;if(S.get()=="center")a=0;else if(S.get()=="top")a=-t/2;else if(S.get()=="bottom")a=+t/2;const r=[];const o=[];const i=[];const s=[];const l=[];const u=[];const c=Math.round(M.get());const m=Math.round(A.get());const _=e/m;const d=t/c;let p,v,f;f=C.get();for(v=0;v<=c;v++){for(p=0;p<=m;p++){r.push(p*_-I.get()/2+n);if(f=="xz")r.push(0);r.push(v*d-T.get()/2+a);if(f=="xy")r.push(0);o.push(p/m);o.push(1-v/c);if(f=="xz"){i.push(0,1,0);s.push(1,0,0);l.push(0,0,1)}else if(f=="xy"){i.push(0,0,1);s.push(-1,0,0);l.push(0,-1,0)}}}for(p=0;p<m;p++){for(v=0;v<c;v++){const g=p+(m+1)*v;const h=g;const b=g+1;const x=g+m+1;const O=g+1+m+1;u.push(h);u.push(x);u.push(b);u.push(b);u.push(x);u.push(O)}}P.clear();P.vertices=r;P.texCoords=o;P.verticesIndices=u;P.vertexNormals=i;P.tangents=s;P.biTangents=l;if(m*c>64e3)P.unIndex();if(!j)j=new CGL.Mesh(N,P);else j.setGeom(P);E.set(null);E.set(P);R=false}e.onDelete=function(){if(j)j.dispose()}};Ops.Gl.Meshes.Rectangle_v2.prototype=new CABLES.Op;CABLES.OPS["fc5718d6-11a5-496e-8f16-1c78b1a2824c"]={f:Ops.Gl.Meshes.Rectangle_v2,objName:"Ops.Gl.Meshes.Rectangle_v2"};Ops.Gl.TextureEffects.Wobble=function(){CABLES.Op.apply(this,arguments);const e=this;const t={wobble_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI sampler2D texMask;\nUNI float time;\nUNI float speedX;\nUNI float speedY;\nUNI float repeatX;\nUNI float repeatY;\nUNI float mul;\n\nconst vec4 lumcoeff = vec4(0.299,0.587,0.114, 0.);\n\nvoid main()\n{\n    vec4 col=vec4(1.0,0.0,0.0,1.0);\n\nfloat mult=mul;\n#ifdef MASK\n    mult*=texture(texMask,texCoord).r;\n#endif\n\n    vec2 tc = texCoord + cos( (time*vec2(speedX, speedY) + vec2(texCoord.s*repeatX,texCoord.t*repeatY)))*mult;\n\n    col=texture(tex,tc);\n\n    outColor= col;\n}"};const n=e.inTrigger("Render"),a=e.inValue("time",0),r=e.inValue("SpeedX",4),o=e.inValue("SpeedY",8),i=e.inValue("RepeatX",11),s=e.inValue("RepeatY",11),l=e.inValue("Multiply",.01),u=e.inTexture("Mask"),c=e.outTrigger("Trigger");const m=e.patch.cgl;const _=new CGL.Shader(m,e.name);_.setSource(_.getDefaultVertexShader(),t.wobble_frag);const d=new CGL.Uniform(_,"t","tex",0);const p=new CGL.Uniform(_,"f","time",a);const v=new CGL.Uniform(_,"f","speedX",r);const f=new CGL.Uniform(_,"f","speedY",o);const g=new CGL.Uniform(_,"f","repeatX",i);const h=new CGL.Uniform(_,"f","repeatY",s);const b=new CGL.Uniform(_,"f","mul",l);const x=new CGL.Uniform(_,"t","texMask",1);u.onChange=function(){_.toggleDefine("MASK",u.isLinked())};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;m.pushShader(_);m.currentTextureEffect.bind();m.setTexture(0,m.currentTextureEffect.getCurrentSourceTexture().tex);if(u.get())m.setTexture(1,u.get().tex);m.currentTextureEffect.finish();m.popShader();c.trigger()}};Ops.Gl.TextureEffects.Wobble.prototype=new CABLES.Op;CABLES.OPS["c349f178-eb83-4753-829e-c9a50b7f459c"]={f:Ops.Gl.TextureEffects.Wobble,objName:"Ops.Gl.TextureEffects.Wobble"};Ops.Trigger.TimedSequence=function(){CABLES.Op.apply(this,arguments);const n=this;const e={};const t=n.inTrigger("exe");const r=n.inValueInt("current",0);const o=n.inValueBool("overwriteTime");const i=n.inValueBool("ignoreInSubPatch",false);const s=n.outTrigger("triggerAlways");const a=n.outArray("Names",[]);const l=n.outValue("currentKeyTime");const u=n.outValue("Current");let c=[];for(let t=0;t<32;t++){let e=n.outTrigger("trigger "+t);e.onLinkChanged=m;c.push(e)}function m(){let t=[];for(let e=0;e<c.length;e++)if(c[e].isLinked())t.push(c[e].links[0].getOtherPort(c[e]).parent.uiAttribs.title);else t.push("none");a.set(t)}n.onLoaded=m;let _=-1;t.onTriggered=d;function d(a){let t=0;let e=Math.round(r.get()-.5);if(window.gui){if(r.get()!=_){_=r.get();for(t=0;t<c.length;t++){if(t==_)c[t].setUiActiveState(true);else c[t].setUiActiveState(false)}}}if(r.anim){let e=a;if(a===undefined)e=r.parent.patch.timer.getTime();let t=r.anim.getKey(e);let n=0;if(t)n=t.time;l.set(e-n);if(r.isAnimated()){if(o.get()){r.parent.patch.timer.overwriteTime=l.get()}}}if(n.patch.gui&&i.get()){for(let e=0;e<c.length;e++){for(t=0;t<c[e].links.length;t++){if(c[e].links[t]){if(c[e].links[t].portIn.parent.patchId){if(CABLES.UI)if(gui.patchView.getCurrentSubPatch()==c[e].links[t].portIn.parent.patchId.get()){n.patch.timer.overwriteTime=-1;c[e].trigger();return}}}}}}if(e>=0&&e<c.length){u.set(e);c[e].trigger()}n.patch.timer.overwriteTime=-1;s.trigger()}};Ops.Trigger.TimedSequence.prototype=new CABLES.Op;CABLES.OPS["73c892c9-3e81-4ddc-952a-fbe6bf00ef2c"]={f:Ops.Trigger.TimedSequence,objName:"Ops.Trigger.TimedSequence"};Ops.Sidebar.Slider_v3=function(){CABLES.Op.apply(this,arguments);const r=this;const e={};const t=1e-5;const n=r.inObject("link");const a=r.inString("Text","Slider");const o=r.inValue("Min",0);const i=r.inValue("Max",1);const s=r.inValue("Step",t);const l=r.inString("Suffix","");const u=r.inBool("Grey Out",false);const c=r.inBool("Visible",true);const m=r.inValue("Input",.5);const _=r.inTriggerButton("Set Default");const d=r.inTriggerButton("Reset");let p=null;const v=r.inValue("Default",.5);v.setUiAttribs({hidePort:true,greyout:true});const f=r.outObject("childs");const g=r.outValue("Result",v.get());r.toWorkNeedsParent("Ops.Sidebar.Sidebar");r.setPortGroup("Range",[o,i,s]);r.setPortGroup("Display",[u,c]);const h=document.createElement("div");h.addEventListener("dblclick",function(){g.set(parseFloat(v.get()));m.set(parseFloat(v.get()))});h.dataset.op=r.id;h.classList.add("cablesEle");h.classList.add("sidebar__item");h.classList.add("sidebar__slider");h.classList.add("sidebar__reloadable");r.patch.on("sidebarStylesChanged",()=>{j()});const b=document.createElement("div");b.classList.add("sidebar__item-label");const x=document.createElement("div");x.classList.add("sidebar__greyout");h.appendChild(x);x.style.display="none";const O=document.createTextNode(a.get());b.appendChild(O);h.appendChild(b);const I=document.createElement("input");I.value=v.get();I.classList.add("sidebar__text-input-input");I.setAttribute("type","text");I.oninput=M;h.appendChild(I);const T=document.createElement("span");h.appendChild(T);l.onChange=()=>{T.innerHTML=l.get()};const y=document.createElement("div");y.classList.add("sidebar__slider-input-wrapper");h.appendChild(y);const S=document.createElement("div");S.classList.add("sidebar__slider-input-active-track");y.appendChild(S);const A=document.createElement("input");A.classList.add("sidebar__slider-input");A.setAttribute("min",o.get());A.setAttribute("max",i.get());A.setAttribute("type","range");A.setAttribute("step",s.get());A.setAttribute("value",v.get());A.style.display="block";y.appendChild(A);j();A.addEventListener("input",N);n.onChange=G;a.onChange=L;m.onChange=C;v.onChange=w;_.onTriggered=E;o.onChange=R;i.onChange=D;s.onChange=P;r.onDelete=z;r.onLoaded=r.onInit=function(){if(r.patch.config.sidebar){r.patch.config.sidebar[a.get()];g.set(r.patch.config.sidebar[a.get()])}else{g.set(parseFloat(v.get()));m.set(parseFloat(v.get()))}};d.onTriggered=function(){const e=parseFloat(v.get());g.set(e);k(e);U(e);m.set(e);j()};u.onChange=function(){x.style.display=u.get()?"block":"none"};c.onChange=function(){h.style.display=c.get()?"block":"none"};function M(e){let t=parseFloat(e.target.value);if(isNaN(t))t=0;const n=o.get();const a=i.get();if(t<n){t=n}else if(t>a){t=a}g.set(t);j();m.set(t);if(r.isCurrentUiOp())gui.opParams.show(r)}function C(){let e=parseFloat(m.get());const t=o.get();const n=i.get();if(e>n){e=n}else if(e<t){e=t}k(e);U(e);g.set(e);j()}function E(){let e=parseFloat(m.get());const t=o.get();const n=i.get();if(e>n){e=n}else if(e<t){e=t}k(e);U(e);g.set(e);v.set(e);if(r.isCurrentUiOp())gui.opParams.show(r);j()}function N(e){e.preventDefault();e.stopPropagation();k(e.target.value);const t=parseFloat(e.target.value);g.set(t);m.set(t);if(r.isCurrentUiOp())gui.opParams.show(r);j();return false}function P(){const e=s.get();A.setAttribute("step",e);j()}function j(e){let t=parseFloat(A.value);if(typeof e!=="undefined")t=e;let n=S.parentElement.getBoundingClientRect().width||220;if(p)n=parseInt(getComputedStyle(p.parentElement).getPropertyValue("--sidebar-width"))-20;const a=CABLES.map(t,parseFloat(A.min),parseFloat(A.max),0,n-16);S.style.width=a+"px"}function R(){const e=o.get();A.setAttribute("min",e);j()}function D(){const e=i.get();A.setAttribute("max",e);j()}function w(){const e=v.get();g.set(parseFloat(e));R();D();U(e);k(e);j(e)}function L(){const e=a.get();b.textContent=e;if(CABLES.UI)r.setTitle("Slider: "+e)}function G(){f.set(null);p=n.get();if(p&&p.parentElement){p.parentElement.appendChild(h);f.set(p)}else if(h.parentElement)h.parentElement.removeChild(h);j()}function k(e){I.value=e}function U(e){A.value=e}function V(e){if(e)e.style.display="block"}function B(e){if(e)e.style.display="none"}function z(){F(h)}function F(e){if(e&&e.parentNode&&e.parentNode.removeChild)e.parentNode.removeChild(e)}};Ops.Sidebar.Slider_v3.prototype=new CABLES.Op;CABLES.OPS["74730122-5cba-4d0d-b610-df334ec6220a"]={f:Ops.Sidebar.Slider_v3,objName:"Ops.Sidebar.Slider_v3"};Ops.Sidebar.Button_v2=function(){CABLES.Op.apply(this,arguments);const t=this;const e={};const n=t.inObject("link");const a=t.inString("Text","Button");const r=t.outObject("childs");const o=t.outTrigger("Pressed Trigger");const i=t.inBool("Grey Out",false);const s=t.inBool("Visible",true);const l=document.createElement("div");l.dataset.op=t.id;l.classList.add("cablesEle");l.classList.add("sidebar__item");l.classList.add("sidebar--button");const u=document.createElement("div");u.classList.add("sidebar__button-input");l.appendChild(u);u.addEventListener("click",_);const c=document.createTextNode(a.get());u.appendChild(c);t.toWorkNeedsParent("Ops.Sidebar.Sidebar");n.onChange=p;a.onChange=d;t.onDelete=g;const m=document.createElement("div");m.classList.add("sidebar__greyout");l.appendChild(m);m.style.display="none";i.onChange=function(){m.style.display=i.get()?"block":"none"};s.onChange=function(){l.style.display=s.get()?"block":"none"};function _(){o.trigger()}function d(){const e=a.get();u.textContent=e;if(CABLES.UI){t.setTitle("Button: "+e)}}function p(){r.set(null);const e=n.get();if(e&&e.parentElement){e.parentElement.appendChild(l);r.set(e)}else{if(l.parentElement){l.parentElement.removeChild(l)}}}function v(e){if(e){e.style.display="block"}}function f(e){if(e){e.style.display="none"}}function g(){h(l)}function h(e){if(e&&e.parentNode&&e.parentNode.removeChild){e.parentNode.removeChild(e)}}};Ops.Sidebar.Button_v2.prototype=new CABLES.Op;CABLES.OPS["5e9c6933-0605-4bf7-8671-a016d917f327"]={f:Ops.Sidebar.Button_v2,objName:"Ops.Sidebar.Button_v2"};Ops.Trigger.GateTrigger=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("Execute"),a=e.inValueBool("Pass Through",true),r=e.outTrigger("Trigger out");n.onTriggered=function(){if(a.get())r.trigger()}};Ops.Trigger.GateTrigger.prototype=new CABLES.Op;CABLES.OPS["65e8b8a2-ba13-485f-883a-2bcf377989da"]={f:Ops.Trigger.GateTrigger,objName:"Ops.Trigger.GateTrigger"};Ops.Boolean.ToggleBool=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTriggerButton("trigger"),a=e.inTriggerButton("reset"),r=e.outBool("result"),o=e.inBool("Default",false);let i=false;r.set(i);r.ignoreValueSerialize=true;n.onTriggered=function(){i=!i;r.set(i)};a.onTriggered=function(){i=o.get();r.set(i)}};Ops.Boolean.ToggleBool.prototype=new CABLES.Op;CABLES.OPS["712a25f4-3a93-4042-b8c5-2f56169186cc"]={f:Ops.Boolean.ToggleBool,objName:"Ops.Boolean.ToggleBool"};Ops.Gl.TextureEffects.Gradient=function(){CABLES.Op.apply(this,arguments);const e=this;const t={gradient_frag:"IN vec2 texCoord;\nUNI float amount;\nUNI float pos;\nUNI float width;\n\nUNI vec3 colA;\nUNI vec3 colB;\nUNI vec3 colC;\nUNI sampler2D tex;\n\n{{CGL.BLENDMODES}}\n\nvoid main()\n{\n    vec4 base=texture(tex,texCoord);\n    vec4 col;\n    float ax=texCoord.x;\n\n    #ifdef GRAD_Y\n        ax=texCoord.y;\n    #endif\n    #ifdef GRAD_XY\n        ax=(texCoord.x+texCoord.y)/2.0;\n    #endif\n    #ifdef GRAD_RADIAL\n        ax=distance(texCoord,vec2(0.5,0.5))*2.0;\n    #endif\n\n    ax=((ax-0.5)*width)+0.5;\n\n    // ax-=0.03;\n\n    #ifndef GRAD_SMOOTHSTEP\n        if(ax<=pos) col = vec4(mix(colA, colB, ax*1.0/pos),1.0);\n        else col = vec4(mix(colB, colC, min(1.0,(ax-pos)*1.0/(1.0-pos))),1.0);\n    #endif\n\n    #ifdef GRAD_SMOOTHSTEP\n        if(ax<=pos) col = vec4(mix(colA, colB, smoothstep(0.0,1.0,ax*1.0/pos)),1.0);\n        else col = vec4(mix(colB, colC, smoothstep(0.0,1.0,min(1.0,(ax-pos)*1.0/(1.0-pos)))),1.0);\n    #endif\n\n    outColor=cgl_blend(base,col,amount);\n}"};const n=e.inTrigger("Render");const a=CGL.TextureEffect.AddBlendSelect(e,"Blend Mode","normal");const r=e.inValueSlider("Amount",1);const o=e.inValue("Width",1);const i=e.inSwitch("Type",["X","Y","XY","Radial"],"X");const s=e.inValueSlider("Pos",.5);const l=e.inValueBool("Smoothstep",true);const u=e.inValueSlider("r",Math.random());const c=e.inValueSlider("g",Math.random());const m=e.inValueSlider("b",Math.random());u.setUiAttribs({colorPick:true});const _=e.inValueSlider("r2",Math.random());const d=e.inValueSlider("g2",Math.random());const p=e.inValueSlider("b2",Math.random());_.setUiAttribs({colorPick:true});const v=e.inValueSlider("r3",Math.random());const f=e.inValueSlider("g3",Math.random());const g=e.inValueSlider("b3",Math.random());v.setUiAttribs({colorPick:true});l.onChange=E;e.setPortGroup("Blending",[a,r]);e.setPortGroup("Color A",[u,c,m]);e.setPortGroup("Color B",[_,d,p]);e.setPortGroup("Color C",[v,f,g]);const h=e.inTriggerButton("Randomize");const b=e.outTrigger("Next");const x=e.patch.cgl;const O=new CGL.Shader(x,"gradient");O.setSource(O.getDefaultVertexShader(),t.gradient_frag);const I=new CGL.Uniform(O,"f","amount",r);const T=new CGL.Uniform(O,"f","pos",s);const y=new CGL.Uniform(O,"f","width",o);const S=new CGL.Uniform(O,"t","tex",0);let A,M,C;_.onChange=d.onChange=p.onChange=P;v.onChange=f.onChange=g.onChange=j;u.onChange=c.onChange=m.onChange=N;N();P();j();E();function E(){if(l.get())O.define("GRAD_SMOOTHSTEP");else O.removeDefine("GRAD_SMOOTHSTEP")}i.onChange=function(){O.removeDefine("GRAD_X");O.removeDefine("GRAD_Y");O.removeDefine("GRAD_XY");O.removeDefine("GRAD_RADIAL");if(i.get()=="XY")O.define("GRAD_XY");if(i.get()=="X")O.define("GRAD_X");if(i.get()=="Y")O.define("GRAD_Y");if(i.get()=="Radial")O.define("GRAD_RADIAL")};CGL.TextureEffect.setupBlending(e,O,a,r);h.onTriggered=function(){u.set(Math.random());c.set(Math.random());m.set(Math.random());_.set(Math.random());d.set(Math.random());p.set(Math.random());v.set(Math.random());f.set(Math.random());g.set(Math.random())};function N(){const e=[u.get(),c.get(),m.get()];if(!C)C=new CGL.Uniform(O,"3f","colA",e);else C.setValue(e)}function P(){const e=[_.get(),d.get(),p.get()];if(!M)M=new CGL.Uniform(O,"3f","colB",e);else M.setValue(e)}function j(){const e=[v.get(),f.get(),g.get()];if(!A)A=new CGL.Uniform(O,"3f","colC",e);else A.setValue(e)}n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;x.pushShader(O);x.currentTextureEffect.bind();x.setTexture(0,x.currentTextureEffect.getCurrentSourceTexture().tex);x.currentTextureEffect.finish();x.popShader();b.trigger()}};Ops.Gl.TextureEffects.Gradient.prototype=new CABLES.Op;CABLES.OPS["5ada9bd8-227a-4a1f-87ad-0f879c7aa84d"]={f:Ops.Gl.TextureEffects.Gradient,objName:"Ops.Gl.TextureEffects.Gradient"};Ops.Devices.Keyboard.KeyPressLearn=function(){CABLES.Op.apply(this,arguments);const n=this;const e={};const a=n.inValueInt("key code");const t=n.inValueBool("canvas only",true);const r=n.inValueSelect("Mod Key",["none","alt"],"none");const o=n.inValueBool("Enabled",true);const i=n.inValueBool("Prevent Default");const s=n.inTriggerButton("learn");const l=n.outTrigger("on press");const u=n.outTrigger("on release");const c=n.outBoolNum("Pressed",false);const m=n.outString("Key");const _=n.patch.cgl;let d=false;r.onChange=a.onChange=x;function p(e){if(d){a.set(e.keyCode);if(CABLES.UI){gui.opParams.show(n)}d=false;g();f()}else{if(e.keyCode==a.get()){if(r.get()=="alt"){if(e.altKey===true){l.trigger();c.set(true);if(i.get())e.preventDefault()}}else{l.trigger();c.set(true);if(i.get())e.preventDefault()}}}}function v(e){if(e.keyCode==a.get()){u.trigger();c.set(false)}}n.onDelete=function(){_.canvas.removeEventListener("keyup",v,false);_.canvas.removeEventListener("keydown",p,false);document.removeEventListener("keyup",v,false);document.removeEventListener("keydown",p,false)};s.onTriggered=function(){d=true;b();setTimeout(function(){d=false;g();f()},3e3)};function f(){if(t.get())h();else b()}function g(){document.removeEventListener("keydown",p,false);document.removeEventListener("keyup",v,false);_.canvas.removeEventListener("keydown",p,false);_.canvas.removeEventListener("keyup",v,false);c.set(false)}function h(){_.canvas.addEventListener("keydown",p,false);_.canvas.addEventListener("keyup",v,false)}function b(){document.addEventListener("keydown",p,false);document.addEventListener("keyup",v,false)}o.onChange=function(){if(!o.get()){g()}else{f()}};t.onChange=function(){g();f()};function x(){let e=CABLES.keyCodeToName(a.get());const t=r.get();if(t&&t!=="none"){e=t.charAt(0).toUpperCase()+t.slice(1)+"-"+e}n.setUiAttribs({extendTitle:e});m.set(e)}h()};Ops.Devices.Keyboard.KeyPressLearn.prototype=new CABLES.Op;CABLES.OPS["f069c0db-4051-4eae-989e-6ef7953787fd"]={f:Ops.Devices.Keyboard.KeyPressLearn,objName:"Ops.Devices.Keyboard.KeyPressLearn"};Ops.Value.Number=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValueFloat("value"),a=e.outNumber("result");n.onChange=r;function r(){a.set(Number(n.get()))}};Ops.Value.Number.prototype=new CABLES.Op;CABLES.OPS["8fb2bb5d-665a-4d0a-8079-12710ae453be"]={f:Ops.Value.Number,objName:"Ops.Value.Number"};Ops.Trigger.SetNumberOnTrigger=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTriggerButton("Set"),a=e.inValueFloat("Number"),r=e.outTrigger("Next"),o=e.outValue("Out Value");o.changeAlways=true;n.onTriggered=function(){o.set(a.get());r.trigger()}};Ops.Trigger.SetNumberOnTrigger.prototype=new CABLES.Op;CABLES.OPS["9989b1c0-1073-4d5f-bfa0-36dd98b66e27"]={f:Ops.Trigger.SetNumberOnTrigger,objName:"Ops.Trigger.SetNumberOnTrigger"};Ops.Gl.TextureEffects.ColorMap=function(){CABLES.Op.apply(this,arguments);const e=this;const t={colormap_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI sampler2D gradient;\nUNI float pos;\nUNI float amount;\nUNI float vmin;\nUNI float vmax;\n\n{{CGL.BLENDMODES}}\n\n\nfloat lumi(vec3 color)\n{\n   return vec3(dot(vec3(0.2126,0.7152,0.0722), color)).r;\n}\n\nvoid main()\n{\n    vec4 base=texture(tex,texCoord);\n\n   base=clamp(base,vmin,vmax);\n\n    #ifdef METH_LUMI\n        vec4 color=texture(gradient,vec2(lumi(base.rgb),pos));\n    #endif\n\n    #ifdef METH_CHANNELS\n        vec4 color=vec4(1.0);\n        color.r=texture(gradient,vec2(base.r,pos)).r;\n        color.g=texture(gradient,vec2(base.g,pos)).g;\n        color.b=texture(gradient,vec2(base.b,pos)).b;\n    #endif\n\n//   outColor= vec4(color);\n   outColor=cgl_blend(base,color,amount);\n\n}\n"};let n=e.inTrigger("render");let a=e.outTrigger("trigger");const r=CGL.TextureEffect.AddBlendSelect(e,"Blend Mode","normal");const o=e.inValueSlider("Amount",1);let i=e.inTexture("Gradient");let s=e.inSwitch("Method",["Luminance","Channels"],"Luminance");let l=e.inFloatSlider("Min",0);let u=e.inFloatSlider("Max",1);let c=e.inValueSlider("Position",.5);e.setPortGroup("Vertical Position",[l,u,c]);let m=e.patch.cgl;let _=new CGL.Shader(m,e.name);_.define("METH_LUMI");_.setSource(_.getDefaultVertexShader(),t.colormap_frag);var d=new CGL.Uniform(_,"t","tex",0);var d=new CGL.Uniform(_,"t","gradient",1);let p=new CGL.Uniform(_,"f","pos",c);let v=new CGL.Uniform(_,"f","vmin",l);let f=new CGL.Uniform(_,"f","vmax",u);let g=new CGL.Uniform(_,"f","amount",o);CGL.TextureEffect.setupBlending(e,_,r,o);s.onChange=()=>{_.toggleDefine("METH_LUMI",s.get()=="Luminance");_.toggleDefine("METH_CHANNELS",s.get()=="Channels")};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;if(!i.get())return;m.pushShader(_);m.currentTextureEffect.bind();m.setTexture(0,m.currentTextureEffect.getCurrentSourceTexture().tex);m.setTexture(1,i.get().tex);m.currentTextureEffect.finish();m.popShader();a.trigger()}};Ops.Gl.TextureEffects.ColorMap.prototype=new CABLES.Op;CABLES.OPS["58e302d7-4b84-4077-aa13-4f3cf0885205"]={f:Ops.Gl.TextureEffects.ColorMap,objName:"Ops.Gl.TextureEffects.ColorMap"};Ops.Gl.GradientTexture=function(){CABLES.Op.apply(this,arguments);const C=this;const e={};const E=C.inGradient("Gradient"),N=C.inValueSelect("Direction",["X","Y","Radial"],"X"),P=C.inValueBool("Smoothstep",false),j=C.inBool("Step",false),R=C.inBool("Flip",false),D=C.inBool("sRGB",false),w=C.inBool("Oklab",false),L=C.inValueInt("Size",256),G=C.inSwitch("filter",["nearest","linear","mipmap"],"linear"),k=C.inValueSelect("wrap",["clamp to edge","repeat","mirrored repeat"],"clamp to edge"),U=C.inArray("Gradient Array"),V=C.outTexture("Texture"),B=C.outArray("Colors",null,3),z=C.outArray("Colors Pos",null,1);const F=C.patch.cgl;k.onChange=G.onChange=j.onChange=R.onChange=D.onChange=w.onChange=L.onChange=E.onChange=P.onChange=N.onChange=U.onChange=t;E.set('{"keys" : [{"pos":0,"r":0,"g":0,"b":0},{"pos":0.25,"r":0,"g":0,"b":0},{"pos":0.75,"r":1,"g":1,"b":1},{"pos":1,"r":1,"g":1,"b":1}]}');C.onLoaded=t;function X(e,t,n){let a=.4122214708*e+.5363325363*t+.0514459929*n;let r=.2119034982*e+.6806995451*t+.1073969566*n;let o=.0883024619*e+.2817188376*t+.6299787005*n;a=Math.cbrt(a);r=Math.cbrt(r);o=Math.cbrt(o);return[a*+.2104542553+r*+.793617785+o*-.0040720468,a*+1.9779984951+r*-2.428592205+o*+.4505937099,a*+.0259040371+r*+.7827717662+o*-.808675766]}function l(e,t,n){return Math.max(Math.min(e,n),t)}function Y(e,t,n){let a=e+t*+.3963377774+n*+.2158037573;let r=e+t*-.1055613458+n*-.0638541728;let o=e+t*-.0894841775+n*-1.291485548;a**=3;r**=3;o**=3;let i=a*+4.0767416621+r*-3.3077115913+o*+.2309699292;let s=a*-1.2684380046+r*+2.6097574011+o*-.3413193965;var n=a*-.0041960863+r*-.7034186147+o*+1.707614701;i=l(i,0,1);s=l(s,0,1);n=l(n,0,1);return[i,s,n]}function H(e,t,n){e/=255;const a=.0031308;let r=12.92*e;let o=1.055*Math.pow(e,.41666)-.055;return(e<a?r:o)*255}function t(){let a=Math.round(L.get());if(a<4)a=4;let t=null;C.setUiError("nodata",null);C.setUiError("parse",null);let e=0;let n=0;if(k.get()=="repeat")e=CGL.Texture.WRAP_REPEAT;else if(k.get()=="mirrored repeat")e=CGL.Texture.WRAP_MIRRORED_REPEAT;else if(k.get()=="clamp to edge")e=CGL.Texture.WRAP_CLAMP_TO_EDGE;if(G.get()=="nearest")n=CGL.Texture.FILTER_NEAREST;else if(G.get()=="linear")n=CGL.Texture.FILTER_LINEAR;else if(G.get()=="mipmap")n=CGL.Texture.FILTER_MIPMAP;if(Array.isArray(U.get())){t=U.get()}else{let e=null;if(!E.get()||E.get()===""){C.setUiError("nodata","gradient no data");return}try{e=JSON.parse(E.get())}catch(e){C.setUiError("parse","could not parse gradient data")}if(!e||!e.keys){C.setUiError("nodata","gradient no data");return}t=e.keys}const r=new CGL.Texture(F);if(N.get()=="X"||N.get()=="Y"){const s=new Uint8Array(a*4);for(let e=0;e<t.length-1;e++){const l=t[e];const u=t[e+1];for(let n=l.pos*a;n<u.pos*a;n++){let e=CABLES.map(n,l.pos*a,u.pos*a,0,1);if(j.get())e=Math.round(e);if(P.get())e=CABLES.smoothStep(e);n=Math.round(n);let t=n;if(R.get())t=a-n-1;if(w.get()){const c=X(l.r,l.g,l.b);const m=c[0];const _=c[1];const d=c[2];const p=X(u.r,u.g,u.b);const v=p[0];const f=p[1];const g=p[2];const h=e*v+(1-e)*m;const b=e*f+(1-e)*_;const x=e*g+(1-e)*d;const O=Y(h,b,x);s[t*4+0]=Math.round(O[0]*255);s[t*4+1]=Math.round(O[1]*255);s[t*4+2]=Math.round(O[2]*255)}else{s[t*4+0]=Math.round((e*u.r+(1-e)*l.r)*255);s[t*4+1]=Math.round((e*u.g+(1-e)*l.g)*255);s[t*4+2]=Math.round((e*u.b+(1-e)*l.b)*255)}if(typeof l.a!=="undefined"&&typeof u.a!=="undefined"){const I=Math.round((e*u.a+(1-e)*l.a)*255);s[t*4+3]=I}else{s[t*4+3]=Math.round(255)}}}if(D.get())for(let e=0;e<s.length;e+=4){s[e+0]=H(s[e+0]);s[e+1]=H(s[e+1]);s[e+2]=H(s[e+2])}if(N.get()=="X")r.initFromData(s,a,1,n,e);if(N.get()=="Y")r.initFromData(s,1,a,n,e)}if(N.get()=="Radial"){const s=new Uint8Array(a*a*4);const T=new CABLES.Anim;const y=new CABLES.Anim;const S=new CABLES.Anim;for(let e=0;e<t.length-1;e++){T.setValue(t[e].pos,t[e].r);y.setValue(t[e].pos,t[e].g);S.setValue(t[e].pos,t[e].b)}for(let n=0;n<a;n++){for(let t=0;t<a;t++){const A=n-(a-1)/2;const M=t-(a-1)/2;let e=Math.sqrt(A*A+M*M)/a*2;if(P.get())e=CABLES.smoothStep(e);s[n*4+t*4*a+0]=T.getValue(e)*255;s[n*4+t*4*a+1]=y.getValue(e)*255;s[n*4+t*4*a+2]=S.getValue(e)*255;s[n*4+t*4*a+3]=Math.round(255)}}if(D.get())for(let e=0;e<s.length;e+=4){s[e+0]=H(s[e+0]);s[e+1]=H(s[e+1]);s[e+2]=H(s[e+2])}r.initFromData(s,a,a,n,e)}const o=[];for(let e=0;e<t.length-1;e++){o.push(t[e].r,t[e].g,t[e].b)}const i=[];for(let e=0;e<t.length-1;e++){i.push(t[e].pos)}B.set(o);z.set(i);V.set(null);V.set(r)}};Ops.Gl.GradientTexture.prototype=new CABLES.Op;CABLES.OPS["01380a50-2dbb-4465-ae80-86349b0b717a"]={f:Ops.Gl.GradientTexture,objName:"Ops.Gl.GradientTexture"};Ops.Gl.TextureEffects.Mirror=function(){CABLES.Op.apply(this,arguments);const e=this;const t={mirror_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI float axis;\nUNI float width;\nUNI float flip;\nUNI float offset;\n\nvoid main()\n{\n   vec4 col=vec4(1.0,0.0,0.0,1.0);\n\n   float tc=texCoord.x;\n   if(axis==1.0) tc=(texCoord.y);\n\n   float x=(tc);\n   if(tc>=0.5)x=1.0-tc;\n\n   x*=width*2.0;\n   if(flip==1.0)x=1.0-x;\n   x*=1.0-offset;\n\n   if(axis==1.0) col=texture(tex,vec2(texCoord.x,x) );\n       else col=texture(tex,vec2(x,texCoord.y) );\n\n   outColor= col;\n}"};const n=e.inTrigger("render"),a=e.outTrigger("trigger"),r=e.inSwitch("axis",["X","Y"],"X"),o=e.inValueFloat("width",.5),i=e.inValueFloat("offset"),s=e.inValueBool("flip");const l=e.patch.cgl;const u=new CGL.Shader(l,e.name);u.setSource(u.getDefaultVertexShader(),t.mirror_frag);const c=new CGL.Uniform(u,"t","tex",0),m=new CGL.Uniform(u,"f","axis",0),_=new CGL.Uniform(u,"f","width",o),d=new CGL.Uniform(u,"f","offset",i),p=new CGL.Uniform(u,"f","flip",0);s.onChange=function(){if(s.get())p.setValue(1);else p.setValue(0)};r.onChange=function(){if(r.get()=="X")m.setValue(0);else if(r.get()=="Y")m.setValue(1)};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;l.pushShader(u);l.currentTextureEffect.bind();l.setTexture(0,l.currentTextureEffect.getCurrentSourceTexture().tex);l.currentTextureEffect.finish();l.popShader();a.trigger()}};Ops.Gl.TextureEffects.Mirror.prototype=new CABLES.Op;CABLES.OPS["10d3c769-9a7f-4bd3-a849-7354d3e5f7f0"]={f:Ops.Gl.TextureEffects.Mirror,objName:"Ops.Gl.TextureEffects.Mirror"};Ops.Gl.TextureEffects.Waveform_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={wave_v2_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI sampler2D tex1;\nUNI float amount;\n\nUNI float r;\nUNI float g;\nUNI float b;\n\nUNI float uAmp;\nUNI float uFreq;\nUNI float uWidth;\nUNI float uGlow;\nUNI float uWaveSelect;\nUNI bool uInvert;\nUNI bool uSolid;\n\nUNI float uOffSetX;\nUNI float uOffSetY;\nUNI float uRotate;\n\n{{CGL.BLENDMODES}}\n\n#define PI 3.14159265359\n#define TAU (2.0*PI)\n\nfloat vmax(vec2 v)\n{\n\treturn max(v.x, v.y);\n}\n\nvoid pR(inout vec2 p, float a)\n{\n    float s = sin(a),c=cos(a); p *= mat2(c,s,-s,c);\n}\n\nfloat pMod1(inout float p, float size)\n{\n\tfloat halfsize = size * 0.5;\n\tfloat c = floor((p + halfsize) / size);\n\tp = mod(p + halfsize, size) - halfsize;\n\treturn c;\n}\n\nfloat pModMirror1(inout float p, float size)\n{\n\tfloat halfsize = size * 0.5;\n\tfloat c = floor((p + halfsize) / size);\n\tp = mod(p + halfsize,size) - halfsize;\n\tp *= mod(c, 2.0) * 2.0 - 1.0;\n\treturn c;\n}\n\nfloat fCapsule2D(vec2 p, float r, float c)\n{\n\treturn mix(abs(p.x) - r, length(vec2(p.x, abs(p.y) - c)) - r, step(c, abs(p.y)));\n}\n\nfloat SineWave(vec2 p, float amplitude, float frequency, float line_width, float line_glow, bool solid)\n{\n    float v = sin(p.x * frequency * PI);\n    v *= amplitude;\n\n    float d = 0.0;\n\n    if (solid == false)\n    {\n        d = abs(v * amplitude - p.y * 0.5);\n        d -= line_width;\n        return smoothstep(0.0, line_glow, d);\n    }\n    else\n    {\n        d = v * amplitude - p.y * 0.5;\n        d -= -line_width;\n        return smoothstep(0.0, line_glow, -d);\n    }\n}\n\nfloat SawWave(vec2 p, float amplitude, float frequency, float line_width, float line_glow, bool solid)\n{\n    float inverse_frequency = 2.0 / frequency;\n    vec2 p1 = p;\n    pMod1(p1.x, inverse_frequency);\n\n    float d1 = fCapsule2D(p1, 0.0, amplitude);\n    p.x += inverse_frequency * 0.5;\n    pMod1(p.x, inverse_frequency);\n    pR(p, atan(inverse_frequency, amplitude * 2.0));\n\n    float d = fCapsule2D(p, 0.0, 0.5 * length(vec2(inverse_frequency, 2.0 * amplitude)));\n\td = min(d, d1);\n    d -= line_width;\n\n    if(solid == false)\n    {\n        return smoothstep(0.0, line_glow, d);\n    }\n    else\n        return smoothstep(0.0, line_glow, min(d,p.x));\n}\n\nfloat TriangleWave(vec2 p, float amplitude, float frequency, float line_width, float line_glow, bool solid)\n{\n    float inverse_frequency = 1.0 / frequency;\n    p.x -= inverse_frequency;\n    pModMirror1(p.x, inverse_frequency);\n    pR(p, atan(inverse_frequency, amplitude * 2.0));\n\n    float d = fCapsule2D(p, 0.0, 0.5 * length(vec2(inverse_frequency, 2.0 * amplitude)));\n    d -= line_width;\n\n    if (solid == false)\n    {\n        return smoothstep(0.0, line_glow, d);\n    }\n    else\n        return smoothstep(0.0, line_glow, min(d,p.x));\n}\n\nfloat SquareWave(vec2 p, float amplitude, float frequency, float line_width, float line_glow, bool solid)\n{\n    float inverse_frequency = 0.5 / frequency;\n    vec2 p1 = p;\n    pMod1(p1.x, 2.0 * inverse_frequency);\n\n    float d1 = fCapsule2D(p1, 0.0, abs(amplitude));\n    p.x -= inverse_frequency * 0.5;\n    float cell = pMod1(p.x, inverse_frequency);\n\n    if(cell < 0.0) cell = -cell + 1.0;\n    if(int(cell * 0.5) % 2 == 1) p.y -= amplitude;\n        else p.y += amplitude;\n\n    float d = fCapsule2D(p.yx, 0.0, abs(inverse_frequency));\n    d = min(d, d1);\n    d -= line_width;\n\n    if (solid == false)\n    {\n        return smoothstep(0.0, line_glow, d);\n    }\n    else\n        return smoothstep(0.0, line_glow, p.y);\n}\n\nvoid main()\n{\n    vec4 rgb = vec4(r,g,b,1.0);\n\tvec2 uv = texCoord;\n\n    uv -= 0.5;\n    pR(uv.xy,uRotate * TAU);\n    uv += 0.5;\n\n    float wave = 0.0;\n    #ifdef SINE\n        wave = 1.0 - SineWave     (uv - vec2(uOffSetX,uOffSetY), uAmp,  uFreq , uWidth, uGlow, uSolid);\n    #endif\n    #ifdef SAWTOOTH\n        wave = 1.0 - SawWave      (uv - vec2(uOffSetX,uOffSetY), uAmp,  uFreq, uWidth, uGlow, uSolid);\n    #endif\n    #ifdef TRIANGLE\n        wave = 1.0 - TriangleWave (uv - vec2(uOffSetX,uOffSetY), uAmp,  uFreq, uWidth, uGlow, uSolid);\n    #endif\n    #ifdef SQUARE\n        wave = 1.0 - SquareWave   (uv - vec2(uOffSetX,uOffSetY), uAmp,  uFreq, uWidth, uGlow, uSolid);\n    #endif\n\n    #ifdef INVERT\n        wave = 1.0-wave;\n    #endif\n\n    vec4 col = vec4(r,g,b,1.0);\n\n    vec4 base=texture(tex,texCoord);\n\n    outColor=cgl_blend(base,col,wave*amount);\n}\n"};const n=e.inTrigger("render"),a=CGL.TextureEffect.AddBlendSelect(e,"Blend Mode","normal"),r=e.inValueSlider("Amount",1),o=e.inValueSelect("Waveform",["Sine","Sawtooth","Triangle","Square"],"Sine"),i=e.inValueSlider("Amplitude",.5),s=e.inFloat("Frequency",2),l=e.inValueSlider("Line Width",.1),u=e.inValueSlider("Line Glow",.1),c=e.inValueBool("invert color",false),m=e.inValueBool("Solid fill",false),_=e.inValueSlider("Offset X",0),d=e.inValueSlider("Offset Y",.5),p=e.inValueSlider("Rotate",0),v=e.inValueSlider("r",1),f=e.inValueSlider("g",1),g=e.inValueSlider("b",1);const h=e.outTrigger("trigger");v.setUiAttribs({colorPick:true});const b=e.patch.cgl;const x=new CGL.Shader(b,e.name);x.setSource(x.getDefaultVertexShader(),t.wave_v2_frag);const O=new CGL.Uniform(x,"t","tex",0);const I=new CGL.Uniform(x,"f","amount",r);const T=new CGL.Uniform(x,"f","r",v);const y=new CGL.Uniform(x,"f","g",f);const S=new CGL.Uniform(x,"f","b",g);const A=new CGL.Uniform(x,"f","uAmp",i);const M=new CGL.Uniform(x,"f","uFreq",s);const C=new CGL.Uniform(x,"f","uWidth",l);const E=new CGL.Uniform(x,"f","uGlow",u);const N=new CGL.Uniform(x,"f","uWaveSelect",1);const P=new CGL.Uniform(x,"b","uInvert",c);const j=new CGL.Uniform(x,"b","uSolid",m);const R=new CGL.Uniform(x,"f","uOffSetX",_);const D=new CGL.Uniform(x,"f","uOffSetY",d);const w=new CGL.Uniform(x,"f","uRotate",p);o.onChange=c.onChange=L;L();function L(){x.toggleDefine("SINE",o.get()=="Sine");x.toggleDefine("SAWTOOTH",o.get()=="Sawtooth");x.toggleDefine("TRIANGLE",o.get()=="Triangle");x.toggleDefine("SQUARE",o.get()=="Square");x.toggleDefine("INVERT",c.get()==true)}CGL.TextureEffect.setupBlending(e,x,a,r);n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;b.pushShader(x);b.currentTextureEffect.bind();b.setTexture(0,b.currentTextureEffect.getCurrentSourceTexture().tex);b.currentTextureEffect.finish();b.popShader();h.trigger()}};Ops.Gl.TextureEffects.Waveform_v2.prototype=new CABLES.Op;CABLES.OPS["46c786f1-3d60-4fa4-9c89-e785db4ac692"]={f:Ops.Gl.TextureEffects.Waveform_v2,objName:"Ops.Gl.TextureEffects.Waveform_v2"};Ops.Gl.TextureEffects.Twirl_v3=function(){CABLES.Op.apply(this,arguments);const t=this;const e={twirl_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI float amount;\nUNI float twistAmount;\nUNI float times;\nUNI float radius;\nUNI float centerX;\nUNI float centerY;\n\n{{CGL.BLENDMODES}}\n\nvoid main()\n{\n    vec2 center=vec2(centerX,centerY);\n    vec2 tc = texCoord;\n    tc -= center;\n    float dist = length(tc);\n    if (dist < radius)\n    {\n        float percent = (radius - dist) / radius;\n        float theta = percent * percent * twistAmount * 8.0;\n        float s = sin(theta);\n        float c = cos(theta);\n        tc = vec2(dot(tc, vec2(c, -s)), dot(tc, vec2(s, c)));\n    }\n    tc += center;\n\n    vec4 col = texture(tex, tc);\n    vec4 base=texture(tex,texCoord);\n    outColor=cgl_blend(base,col,amount);\n}\n"};const n=t.inTrigger("Render"),a=CGL.TextureEffect.AddBlendSelect(t,"Blend Mode","normal"),r=t.inValueSlider("Amount",1),o=t.inValue("Twist amount",200),i=t.inValue("Radius",.5),s=t.inValue("Center X",.5),l=t.inValue("Center Y",.5),u=t.outTrigger("Next");const c=t.patch.cgl;const m=new CGL.Shader(c,t.name);m.setSource(m.getDefaultVertexShader(),e.twirl_frag);const _=new CGL.Uniform(m,"t","tex",0),d=new CGL.Uniform(m,"f","amount",r),p=new CGL.Uniform(m,"f","twistAmount",1),v=new CGL.Uniform(m,"f","radius",i),f=new CGL.Uniform(m,"f","centerX",s),g=new CGL.Uniform(m,"f","centerY",l);CGL.TextureEffect.setupBlending(t,m,a,r);n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(t))return;let e=c.currentTextureEffect.getCurrentSourceTexture();p.setValue(o.get()*(1/e.width));c.pushShader(m);c.currentTextureEffect.bind();c.setTexture(0,c.currentTextureEffect.getCurrentSourceTexture().tex);c.currentTextureEffect.finish();c.popShader();u.trigger()}};Ops.Gl.TextureEffects.Twirl_v3.prototype=new CABLES.Op;CABLES.OPS["5c128ea4-14df-4248-a02e-b05d2783ed58"]={f:Ops.Gl.TextureEffects.Twirl_v3,objName:"Ops.Gl.TextureEffects.Twirl_v3"};Ops.Trigger.TriggerSend=function(){CABLES.Op.apply(this,arguments);const a=this;const e={};const t=a.inTriggerButton("Trigger");a.varName=a.inValueSelect("Named Trigger",[],"",true);a.varName.onChange=r;t.onTriggered=o;a.patch.addEventListener("namedTriggersChanged",n);n();function n(){if(CABLES.UI){const e=[];const t=a.patch.namedTriggers;e.push("+ create new one");for(const n in t)e.push(n);a.varName.uiAttribs.values=e}}function r(){if(CABLES.UI){if(a.varName.get()=="+ create new one"){new CABLES.UI.ModalDialog({prompt:true,title:"New Trigger",text:"enter a name for the new trigger",promptValue:"",promptOk:e=>{a.varName.set(e);a.patch.namedTriggers[e]=a.patch.namedTriggers[e]||[];n()}});return}if(a.isCurrentUiOp())gui.opParams.show(a)}if(!a.patch.namedTriggers[a.varName.get()]){a.patch.namedTriggers[a.varName.get()]=a.patch.namedTriggers[a.varName.get()]||[];a.patch.emitEvent("namedTriggersChanged")}a.setTitle(">"+a.varName.get());if(a.isCurrentUiOp())gui.opParams.show(a);a.patch.emitEvent("opTriggerNameChanged",a,a.varName.get())}function o(){const t=a.patch.namedTriggers[a.varName.get()];a.patch.emitEvent("namedTriggerSent",a.varName.get());if(!t){a.setUiError("unknowntrigger","unknown trigger");return}else a.setUiError("unknowntrigger",null);for(let e=0;e<t.length;e++){t[e]()}}};Ops.Trigger.TriggerSend.prototype=new CABLES.Op;CABLES.OPS["ce1eaf2b-943b-4dc0-ab5e-ee11b63c9ed0"]={f:Ops.Trigger.TriggerSend,objName:"Ops.Trigger.TriggerSend"};Ops.Trigger.TriggerReceive=function(){CABLES.Op.apply(this,arguments);const a=this;const e={};const t=a.outTrigger("Triggered");a.varName=a.inValueSelect("Named Trigger",[],"",true);o();a.patch.addEventListener("namedTriggersChanged",o);let n=null;function r(){t.trigger()}function o(){if(CABLES.UI){let t=[];let n=a.patch.namedTriggers;for(let e in n)t.push(e);a.varName.uiAttribs.values=t}}a.varName.onChange=function(){if(n){let e=a.patch.namedTriggers[n];let t=e.indexOf(r);if(t!=-1)e.splice(t,1)}a.setTitle(">"+a.varName.get());a.patch.namedTriggers[a.varName.get()]=a.patch.namedTriggers[a.varName.get()]||[];let e=a.patch.namedTriggers[a.varName.get()];e.push(r);n=a.varName.get();i();a.patch.emitEvent("opTriggerNameChanged",a,a.varName.get())};a.on("uiParamPanel",i);function i(){if(!a.varName.get()){a.setUiError("unknowntrigger","unknown trigger")}else a.setUiError("unknowntrigger",null)}};Ops.Trigger.TriggerReceive.prototype=new CABLES.Op;CABLES.OPS["0816c999-f2db-466b-9777-2814573574c5"]={f:Ops.Trigger.TriggerReceive,objName:"Ops.Trigger.TriggerReceive"};Ops.Gl.TextureEffects.RepeatTexture=function(){CABLES.Op.apply(this,arguments);const e=this;const t={repeat_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI sampler2D mulTex;\nUNI float amount;\nUNI float amountX;\nUNI float amountY;\n\n{{CGL.BLENDMODES}}\n\nvoid main()\n{\n    float am=amount;\n\n    float mul=1.0;\n\n    #ifdef HAS_MASK\n        mul=texture(mulTex,texCoord).r;\n    #endif\n\n    vec2 coord = vec2(\n        mod(texCoord.x*amountX*mul,1.0),\n        mod(texCoord.y*amountY*mul,1.0));\n\n    vec4 col=texture(tex,coord);\n    vec4 base=texture(tex,texCoord);\n\n\n\n    outColor=cgl_blend(base,col,am);\n}"};const n=e.inTrigger("render");const a=CGL.TextureEffect.AddBlendSelect(e,"Blend Mode","normal");const r=e.inValueSlider("Amount",1);const o=e.inValue("x",3);const i=e.inValue("y",3);const s=e.outTrigger("trigger");const l=e.inTexture("Multiply");const u=e.patch.cgl;const c=new CGL.Shader(u,e.name);c.setSource(c.getDefaultVertexShader(),t.repeat_frag);const m=new CGL.Uniform(c,"t","tex",0);const _=new CGL.Uniform(c,"t","mulTex",2);const d=new CGL.Uniform(c,"f","amount",r);const p=new CGL.Uniform(c,"f","amountX",o);const v=new CGL.Uniform(c,"f","amountY",i);CGL.TextureEffect.setupBlending(e,c,a,r);l.onChange=()=>{c.toggleDefine("HAS_MASK",l.get())};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;u.pushShader(c);u.currentTextureEffect.bind();u.setTexture(0,u.currentTextureEffect.getCurrentSourceTexture().tex);if(l.get())u.setTexture(2,l.get().tex);u.currentTextureEffect.finish();u.popShader();s.trigger()}};Ops.Gl.TextureEffects.RepeatTexture.prototype=new CABLES.Op;CABLES.OPS["f477746c-2699-4da5-9786-04867aeae8a6"]={f:Ops.Gl.TextureEffects.RepeatTexture,objName:"Ops.Gl.TextureEffects.RepeatTexture"};Ops.Gl.TextureEffects.PolarCoords=function(){CABLES.Op.apply(this,arguments);const e=this;const t={polarcoords_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI float amount;\nUNI float inner;\nUNI float outer;\n\nvoid main()\n{\n    vec4 col=vec4(1.0,0.0,0.0,1.0);\n    vec2 x = texCoord - vec2(0.5);\n    float radius = length(x);\n    float angle = atan(x.y, x.x);\n\n    vec2 tc;\n    tc.s = ( radius - inner) / (outer - inner);\n    tc.t = angle * 0.5 / 3.141592653589793 + 0.5;\n\n    #ifdef CROP_IMAGE\n        if(tc.s<0.0 || tc.t<0.0 || tc.s>1.0 || tc.t>1.0) discard;\n    #endif\n\n    col=texture(tex,tc);\n    outColor= col;\n}\n"};const n=e.inTrigger("render"),a=e.inValueSlider("Radius Inner",0),r=e.inValueSlider("Radius Outer",1),o=e.inValueBool("Crop",false),i=e.outTrigger("trigger"),s=e.patch.cgl;const l=new CGL.Shader(s,e.name);l.setSource(l.getDefaultVertexShader(),t.polarcoords_frag);const u=new CGL.Uniform(l,"t","tex",0),c=new CGL.Uniform(l,"f","inner",a),m=new CGL.Uniform(l,"f","outer",r);o.onChange=_;function _(){if(o.get())l.define("CROP_IMAGE");else l.removeDefine("CROP_IMAGE")}n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;s.pushShader(l);s.currentTextureEffect.bind();s.setTexture(0,s.currentTextureEffect.getCurrentSourceTexture().tex);s.currentTextureEffect.finish();s.popShader();i.trigger()}};Ops.Gl.TextureEffects.PolarCoords.prototype=new CABLES.Op;CABLES.OPS["1555fefe-4eb4-4aed-84c0-ad54e0dae1c1"]={f:Ops.Gl.TextureEffects.PolarCoords,objName:"Ops.Gl.TextureEffects.PolarCoords"};Ops.Anim.SineAnim=function(){CABLES.Op.apply(this,arguments);const t=this;const e={};const n=t.inTrigger("exe"),a=t.outTrigger("Trigger out"),r=t.outValue("result"),o=t.inSwitch("Mode",["Sine","Cosine"],"Sine"),i=t.inValueFloat("phase",0),s=t.inValueFloat("frequency",1),l=t.inValueFloat("amplitude",1);var u=0;const c=0;const m=1;t.toWorkPortsNeedToBeLinked(n);d();_();function _(){var e=o.get();if(e==="Sine")u=c;else if(e==="Cosine")u=m;t.setUiAttrib({extendTitle:e});d()}function d(){if(u==c)r.set(l.get()*Math.sin(t.patch.freeTimer.get()*s.get()+i.get()));else r.set(l.get()*Math.cos(t.patch.freeTimer.get()*s.get()+i.get()));a.trigger()}n.onTriggered=d;o.onChange=_};Ops.Anim.SineAnim.prototype=new CABLES.Op;CABLES.OPS["736d3d0e-c920-449e-ade0-f5ca6018fb5c"]={f:Ops.Anim.SineAnim,objName:"Ops.Anim.SineAnim"};Ops.Math.Abs=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValue("number");const a=e.outValue("result");n.onChange=function(){a.set(Math.abs(n.get()))}};Ops.Math.Abs.prototype=new CABLES.Op;CABLES.OPS["6b5af21d-065f-44d2-9442-8b7a254753f6"]={f:Ops.Math.Abs,objName:"Ops.Math.Abs"};Ops.Math.Sine=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValue("value"),a=e.inValue("phase",0),r=e.inValue("frequency",1),o=e.inValue("amplitude",1),i=e.inValueBool("asine",false),s=e.outValue("result");let l=Math.sin;r.onChange=o.onChange=a.onChange=n.onChange=function(){s.set(o.get()*l(n.get()*r.get()+a.get()))};i.onChange=function(){if(i.get())l=Math.asin;else l=Math.sin}};Ops.Math.Sine.prototype=new CABLES.Op;CABLES.OPS["d24da018-9f3d-428b-85c9-6ff14d77548b"]={f:Ops.Math.Sine,objName:"Ops.Math.Sine"};Ops.Gl.TextureEffects.Noise.FBMNoise=function(){CABLES.Op.apply(this,arguments);const e=this;const t={fbmnoise_frag:"UNI sampler2D tex;\nUNI float anim;\n\nUNI float scale;\nUNI float repeat;\n\nUNI float scrollX;\nUNI float scrollY;\n\nUNI float amount;\n\nUNI bool layer1;\nUNI bool layer2;\nUNI bool layer3;\nUNI bool layer4;\nUNI vec3 color;\nUNI float aspect;\n\nIN vec2 texCoord;\n\n\n{{CGL.BLENDMODES}}\n\n// csdcsdcds\n// adapted from warp shader by inigo quilez/iq\n// License Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.\n\n// See here for a tutorial on how to make this: http://www.iquilezles.org/www/articles/warp/warp.htm\n\nconst mat2 m = mat2( 0.80,  0.60, -0.60,  0.80 );\n\nfloat noise( in vec2 x )\n{\n\treturn sin(1.5*x.x)*sin(1.5*x.y);\n}\n\nfloat fbm4( vec2 p )\n{\n    float f = 0.0;\n    f += 0.5000*noise( p ); p = m*p*2.02;\n    f += 0.2500*noise( p ); p = m*p*2.03;\n    f += 0.1250*noise( p ); p = m*p*2.01;\n    f += 0.0625*noise( p );\n    return f/0.9375;\n}\n\nfloat fbm6( vec2 p )\n{\n    float f = 0.0;\n    f += 0.500000*(0.5+0.5*noise( p )); p = m*p*2.02;\n    f += 0.250000*(0.5+0.5*noise( p )); p = m*p*2.03;\n    f += 0.125000*(0.5+0.5*noise( p )); p = m*p*2.01;\n    f += 0.062500*(0.5+0.5*noise( p )); p = m*p*2.04;\n    f += 0.031250*(0.5+0.5*noise( p )); p = m*p*2.01;\n    f += 0.015625*(0.5+0.5*noise( p ));\n    return f/0.96875;\n}\n\nvoid main()\n{\n    // vec4 col=texture(tex,texCoord+2.0*fbm4(texCoord+2.0*fbm6(texCoord+anim)));\n\n    vec2 tc=texCoord;\n\t#ifdef DO_TILEABLE\n\t    tc=abs(texCoord-0.5);\n\t#endif\n\n\n    vec2 p=(tc-0.5)*scale;\n\n\n    p.y/=aspect;\n    vec2 q = vec2( fbm4( p + vec2(0.3+scrollX,0.20+scrollY) ),\n                   fbm4( p + vec2(3.1+scrollX,1.3+scrollY) ) );\n\n    vec2 q2 = vec2( fbm4( p + vec2(2.0+scrollX,1.0+scrollY) ),\n                   fbm4( p + vec2(3.1+scrollX,1.3+scrollY) ) );\n\n    vec2 q3 = vec2( fbm4( p + vec2(9.0+scrollX,4.0+scrollY) ),\n                   fbm4( p + vec2(3.1+scrollX,4.3+scrollY) ) );\n\n\n\n    float v= fbm4( ( p + 4.0*q +anim*0.1)*repeat);\n    float v2= fbm4( (p + 4.0*q2 +anim*0.1)*repeat );\n\n    float v3= fbm6( (p + 4.0*q3 +anim*0.1)*repeat );\n    float v4= fbm6( (p + 4.0*q2 +anim*0.1)*repeat );\n\n\n\n\n    vec4 base=texture(tex,texCoord);\n\n    vec4 finalColor;\n    float colVal=0.0;\n    float numLayers=0.0;\n\n    if(layer1)\n    {\n        colVal+=v;\n        numLayers++;\n    }\n\n    if(layer2)\n    {\n        colVal+=v2;\n        numLayers++;\n    }\n\n    if(layer3)\n    {\n        colVal+=v3;\n        numLayers++;\n    }\n\n    if(layer4)\n    {\n        colVal+=v4;\n        numLayers++;\n    }\n\n    finalColor=vec4( color*vec3(colVal/numLayers),1.0);\n\n    outColor = cgl_blend(base,finalColor,amount);;\n}\n"};const n=e.inTrigger("render"),a=CGL.TextureEffect.AddBlendSelect(e,"Blend Mode","normal"),r=e.inValueSlider("Amount",1),o=e.inValueSlider("r",1),i=e.inValueSlider("g",1),s=e.inValueSlider("b",1),l=e.outTrigger("trigger");o.setUiAttribs({colorPick:true});const u=e.patch.cgl;const c=new CGL.Shader(u,"fbmnoise");c.setSource(c.getDefaultVertexShader(),t.fbmnoise_frag);const m=new CGL.Uniform(c,"t","tex",0);const _=new CGL.Uniform(c,"f","scale",e.inValue("scale",2));const d=new CGL.Uniform(c,"f","anim",e.inValue("anim",0));const p=new CGL.Uniform(c,"f","scrollX",e.inValue("scrollX",9));const v=new CGL.Uniform(c,"f","scrollY",e.inValue("scrollY",0));const f=new CGL.Uniform(c,"f","repeat",e.inValue("repeat",1));const g=new CGL.Uniform(c,"f","aspect",e.inValue("aspect",1));const h=new CGL.Uniform(c,"b","layer1",e.inValueBool("Layer 1",true));const b=new CGL.Uniform(c,"b","layer2",e.inValueBool("Layer 2",true));const x=new CGL.Uniform(c,"b","layer3",e.inValueBool("Layer 3",true));const O=new CGL.Uniform(c,"b","layer4",e.inValueBool("Layer 4",true));const I=new CGL.Uniform(c,"3f","color",o,i,s);const T=new CGL.Uniform(c,"f","amount",r);const y=e.inValueBool("Tileable",false);y.onChange=S;function S(){if(y.get())c.define("DO_TILEABLE");else c.removeDefine("DO_TILEABLE")}CGL.TextureEffect.setupBlending(e,c,a,r);n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;u.pushShader(c);u.currentTextureEffect.bind();g.set(u.currentTextureEffect.getCurrentSourceTexture().width/u.currentTextureEffect.getCurrentSourceTexture().height);u.setTexture(0,u.currentTextureEffect.getCurrentSourceTexture().tex);u.currentTextureEffect.finish();u.popShader();l.trigger()}};Ops.Gl.TextureEffects.Noise.FBMNoise.prototype=new CABLES.Op;CABLES.OPS["7073186c-b776-48c2-a01e-041df88ad88a"]={f:Ops.Gl.TextureEffects.Noise.FBMNoise,objName:"Ops.Gl.TextureEffects.Noise.FBMNoise"};Ops.Gl.Phong.PhongMaterial_v6=function(){CABLES.Op.apply(this,arguments);const e=this;const s={phong_frag:'IN vec3 viewDirection;\nIN vec3 normInterpolated;\nIN vec2 texCoord;\n\n#ifdef ENABLE_FRESNEL\n    IN vec4 cameraSpace_pos;\n#endif\n\n// IN mat3 normalMatrix; // when instancing...\n\n#ifdef HAS_TEXTURE_NORMAL\n    IN mat3 TBN_Matrix; // tangent bitangent normal space transform matrix\n#endif\n\nIN vec3 fragPos;\nIN vec3 v_viewDirection;\n\nUNI vec4 inDiffuseColor;\nUNI vec4 inMaterialProperties;\n\n#ifdef ADD_EMISSIVE_COLOR\n    UNI vec4 inEmissiveColor; // .w = intensity\n#endif\n\n#ifdef ENABLE_FRESNEL\n    UNI mat4 viewMatrix;\n    UNI vec4 inFresnel;\n    UNI vec2 inFresnelWidthExponent;\n#endif\n\n#ifdef ENVMAP_MATCAP\n    IN vec3 viewSpaceNormal;\n    IN vec3 viewSpacePosition;\n#endif\n\nstruct Light {\n    vec3 color;\n    vec3 position;\n    vec3 specular;\n\n\n    // * SPOT LIGHT * //\n    #ifdef HAS_SPOT\n        vec3 conePointAt;\n        #define COSCONEANGLE x\n        #define COSCONEANGLEINNER y\n        #define SPOTEXPONENT z\n        vec3 spotProperties;\n    #endif\n\n    #define INTENSITY x\n    #define ATTENUATION y\n    #define FALLOFF z\n    #define RADIUS w\n    vec4 lightProperties;\n\n    int castLight;\n};\n\n/* CONSTANTS */\n#define NONE -1\n#define ALBEDO x\n#define ROUGHNESS y\n#define SHININESS z\n#define SPECULAR_AMT w\n#define NORMAL x\n#define AO y\n#define SPECULAR z\n#define EMISSIVE w\nconst float PI = 3.1415926535897932384626433832795;\nconst float TWO_PI = (2. * PI);\nconst float EIGHT_PI = (8. * PI);\n\n#define RECIPROCAL_PI 1./PI\n#define RECIPROCAL_PI2 RECIPROCAL_PI/2.\n\n// TEXTURES\n// #ifdef HAS_TEXTURES\n    UNI vec4 inTextureIntensities;\n\n    #ifdef HAS_TEXTURE_ENV\n        #ifdef TEX_FORMAT_CUBEMAP\n            UNI samplerCube texEnv;\n            #ifndef WEBGL1\n                #define SAMPLETEX textureLod\n            #endif\n            #ifdef WEBGL1\n                #define SAMPLETEX textureCubeLodEXT\n            #endif\n        #endif\n\n        #ifdef TEX_FORMAT_EQUIRECT\n            UNI sampler2D texEnv;\n            #ifdef WEBGL1\n                // #extension GL_EXT_shader_texture_lod : enable\n                #ifdef GL_EXT_shader_texture_lod\n                    #define textureLod texture2DLodEXT\n                #endif\n                // #define textureLod texture2D\n            #endif\n\n            #define SAMPLETEX sampleEquirect\n\n            const vec2 invAtan = vec2(0.1591, 0.3183);\n            vec4 sampleEquirect(sampler2D tex,vec3 direction,float lod)\n            {\n                #ifndef WEBGL1\n                    vec3 newDirection = normalize(direction);\n            \t\tvec2 sampleUV;\n            \t\tsampleUV.x = -1. * (atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.75);\n            \t\tsampleUV.y = asin( clamp(direction.y, -1., 1.) ) * RECIPROCAL_PI + 0.5;\n                #endif\n\n                #ifdef WEBGL1\n                    vec3 newDirection = normalize(direction);\n                \t\tvec2 sampleUV = vec2(atan(newDirection.z, newDirection.x), asin(newDirection.y+1e-6));\n                        sampleUV *= vec2(0.1591, 0.3183);\n                        sampleUV += 0.5;\n                #endif\n                return textureLod(tex, sampleUV, lod);\n            }\n        #endif\n        #ifdef ENVMAP_MATCAP\n            UNI sampler2D texEnv;\n            #ifdef WEBGL1\n                // #extension GL_EXT_shader_texture_lod : enable\n                #ifdef GL_EXT_shader_texture_lod\n                    #define textureLod texture2DLodEXT\n                #endif\n                // #define textureLod texture2D\n            #endif\n\n\n            // * taken & modified from https://github.com/mrdoob/three.js/blob/dev/src/renderers/shaders/ShaderLib/meshmatcap_frag.glsl.js\n            vec2 getMatCapUV(vec3 viewSpacePosition, vec3 viewSpaceNormal) {\n                vec3 viewDir = normalize(-viewSpacePosition);\n            \tvec3 x = normalize(vec3(viewDir.z, 0.0, - viewDir.x));\n            \tvec3 y = normalize(cross(viewDir, x));\n            \tvec2 uv = vec2(dot(x, viewSpaceNormal), dot(y, viewSpaceNormal)) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n            \treturn uv;\n            }\n        #endif\n\n        UNI float inEnvMapIntensity;\n        UNI float inEnvMapWidth;\n    #endif\n\n    #ifdef HAS_TEXTURE_LUMINANCE_MASK\n        UNI sampler2D texLuminance;\n        UNI float inLuminanceMaskIntensity;\n    #endif\n\n    #ifdef HAS_TEXTURE_DIFFUSE\n        UNI sampler2D texDiffuse;\n    #endif\n\n    #ifdef HAS_TEXTURE_SPECULAR\n        UNI sampler2D texSpecular;\n    #endif\n\n    #ifdef HAS_TEXTURE_NORMAL\n        UNI sampler2D texNormal;\n    #endif\n\n    #ifdef HAS_TEXTURE_AO\n        UNI sampler2D texAO;\n    #endif\n\n    #ifdef HAS_TEXTURE_EMISSIVE\n        UNI sampler2D texEmissive;\n    #endif\n\n    #ifdef HAS_TEXTURE_EMISSIVE_MASK\n        UNI sampler2D texMaskEmissive;\n        UNI float inEmissiveMaskIntensity;\n    #endif\n    #ifdef HAS_TEXTURE_ALPHA\n        UNI sampler2D texAlpha;\n    #endif\n// #endif\n\n{{MODULES_HEAD}}\n\nfloat when_gt(float x, float y) { return max(sign(x - y), 0.0); } // comparator function\nfloat when_lt(float x, float y) { return max(sign(y - x), 0.0); }\nfloat when_eq(float x, float y) { return 1. - abs(sign(x - y)); } // comparator function\nfloat when_neq(float x, float y) { return abs(sign(x - y)); } // comparator function\nfloat when_ge(float x, float y) { return 1.0 - when_lt(x, y); }\nfloat when_le(float x, float y) { return 1.0 - when_gt(x, y); }\n\n#ifdef FALLOFF_MODE_A\n    float CalculateFalloff(float distance, vec3 lightDirection, float falloff, float radius) {\n        // * original falloff\n        float denom = distance / radius + 1.0;\n        float attenuation = 1.0 / (denom*denom);\n        float t = (attenuation - falloff) / (1.0 - falloff);\n        return max(t, 0.0);\n    }\n#endif\n\n#ifdef FALLOFF_MODE_B\n    float CalculateFalloff(float distance, vec3 lightDirection, float falloff, float radius) {\n        float distanceSquared = dot(lightDirection, lightDirection);\n        float factor = distanceSquared * falloff;\n        float smoothFactor = clamp(1. - factor * factor, 0., 1.);\n        float attenuation = smoothFactor * smoothFactor;\n\n        return attenuation * 1. / max(distanceSquared, 0.00001);\n    }\n#endif\n\n#ifdef FALLOFF_MODE_C\n    float CalculateFalloff(float distance, vec3 lightDirection, float falloff, float radius) {\n        // https://blog.selfshadow.com/publications/s2013-shading-course/karis/s2013_pbs_epic_notes_v2.pdf\n        float falloffNumerator = 1. - pow(distance/radius, 4.);\n        falloffNumerator = clamp(falloffNumerator, 0., 1.);\n        falloffNumerator *= falloffNumerator;\n\n        float denominator = distance*distance + falloff;\n\n        return falloffNumerator/denominator;\n    }\n#endif\n\n#ifdef FALLOFF_MODE_D\n    float CalculateFalloff(float distance, vec3 lightDirection, float falloff, float radius) {\n        // inverse square falloff, "physically correct"\n        return 1.0 / max(distance * distance, 0.0001);\n    }\n#endif\n\n#ifdef ENABLE_FRESNEL\n    float CalculateFresnel(vec3 direction, vec3 normal)\n    {\n        vec3 nDirection = normalize( direction );\n        vec3 nNormal = normalize( mat3(viewMatrix) * normal );\n        vec3 halfDirection = normalize( nNormal + nDirection );\n\n        float cosine = dot( halfDirection, nDirection );\n        float product = max( cosine, 0.0 );\n        float factor = pow(product, inFresnelWidthExponent.y);\n\n        return 5. * factor;\n    }\n#endif\n\n#ifdef CONSERVE_ENERGY\n    // http://www.rorydriscoll.com/2009/01/25/energy-conservation-in-games/\n    // http://www.farbrausch.de/~fg/articles/phong.pdf\n    float EnergyConservation(float shininess) {\n        #ifdef SPECULAR_PHONG\n            return (shininess + 2.)/TWO_PI;\n        #endif\n        #ifdef SPECULAR_BLINN\n            return (shininess + 8.)/EIGHT_PI;\n        #endif\n\n        #ifdef SPECULAR_SCHLICK\n            return (shininess + 8.)/EIGHT_PI;\n        #endif\n\n        #ifdef SPECULAR_GAUSS\n            return (shininess + 8.)/EIGHT_PI;\n        #endif\n    }\n#endif\n\n#ifdef ENABLE_OREN_NAYAR_DIFFUSE\n    float CalculateOrenNayar(vec3 lightDirection, vec3 viewDirection, vec3 normal) {\n        float LdotV = dot(lightDirection, viewDirection);\n        float NdotL = dot(lightDirection, normal);\n        float NdotV = dot(normal, viewDirection);\n\n        float albedo = inMaterialProperties.ALBEDO;\n        albedo *= 1.8;\n        float s = LdotV - NdotL * NdotV;\n        float t = mix(1., max(NdotL, NdotV), step(0., s));\n\n        float roughness = inMaterialProperties.ROUGHNESS;\n        float sigma2 = roughness * roughness;\n        float A = 1. + sigma2 * (albedo / (sigma2 + 0.13) + 0.5 / (sigma2 + 0.33));\n        float B = 0.45 * sigma2 / (sigma2 + 0.09);\n\n        float factor = albedo * max(0., NdotL) * (A + B * s / t) / PI;\n\n        return factor;\n\n    }\n#endif\n\nvec3 CalculateDiffuseColor(\n    vec3 lightDirection,\n    vec3 viewDirection,\n    vec3 normal,\n    vec3 lightColor,\n    vec3 materialColor,\n    inout float lambert\n) {\n    #ifndef ENABLE_OREN_NAYAR_DIFFUSE\n        lambert = clamp(dot(lightDirection, normal), 0., 1.);\n    #endif\n\n    #ifdef ENABLE_OREN_NAYAR_DIFFUSE\n        lambert = CalculateOrenNayar(lightDirection, viewDirection, normal);\n    #endif\n\n    vec3 diffuseColor = lambert * lightColor * materialColor;\n    return diffuseColor;\n}\n\nvec3 CalculateSpecularColor(\n    vec3 specularColor,\n    float specularCoefficient,\n    float shininess,\n    vec3 lightDirection,\n    vec3 viewDirection,\n    vec3 normal,\n    float lambertian\n) {\n    vec3 resultColor = vec3(0.);\n\n    #ifdef SPECULAR_PHONG\n        vec3 reflectDirection = reflect(-lightDirection, normal);\n        float specularAngle = max(dot(reflectDirection, viewDirection), 0.);\n        float specularFactor = pow(specularAngle, max(0., shininess));\n    resultColor = lambertian * specularFactor * specularCoefficient * specularColor;\n    #endif\n\n    #ifdef SPECULAR_BLINN\n        vec3 halfDirection = normalize(lightDirection + viewDirection);\n        float specularAngle = max(dot(halfDirection, normal), 0.);\n        float specularFactor = pow(specularAngle, max(0., shininess));\n        resultColor = lambertian * specularFactor * specularCoefficient * specularColor;\n    #endif\n\n    #ifdef SPECULAR_SCHLICK\n        vec3 halfDirection = normalize(lightDirection + viewDirection);\n        float specularAngle = dot(halfDirection, normal);\n        float schlickShininess = max(0., shininess);\n        float specularFactor = specularAngle / (schlickShininess - schlickShininess*specularAngle + specularAngle);\n        resultColor = lambertian * specularFactor * specularCoefficient * specularColor;\n    #endif\n\n    #ifdef SPECULAR_GAUSS\n        vec3 halfDirection = normalize(lightDirection + viewDirection);\n        float specularAngle = acos(max(dot(halfDirection, normal), 0.));\n        float exponent = specularAngle * shininess * 0.17;\n        exponent = -(exponent*exponent);\n        float specularFactor = exp(exponent);\n\n        resultColor = lambertian * specularFactor * specularCoefficient * specularColor;\n    #endif\n\n    #ifdef CONSERVE_ENERGY\n        float conserveEnergyFactor = EnergyConservation(shininess);\n        resultColor = conserveEnergyFactor * resultColor;\n    #endif\n\n    return resultColor;\n}\n\n#ifdef HAS_SPOT\n    float CalculateSpotLightEffect(vec3 lightPosition, vec3 conePointAt, float cosConeAngle, float cosConeAngleInner, float spotExponent, vec3 lightDirection) {\n        vec3 spotLightDirection = normalize(lightPosition-conePointAt);\n        float spotAngle = dot(-lightDirection, spotLightDirection);\n        float epsilon = cosConeAngle - cosConeAngleInner;\n\n        float spotIntensity = clamp((spotAngle - cosConeAngle)/epsilon, 0.0, 1.0);\n        spotIntensity = pow(spotIntensity, max(0.01, spotExponent));\n\n        return max(0., spotIntensity);\n    }\n#endif\n\n\n\n{{PHONG_FRAGMENT_HEAD}}\n\n\nvoid main()\n{\n    {{MODULE_BEGIN_FRAG}}\n\n    vec4 col=vec4(0., 0., 0., inDiffuseColor.a);\n    vec3 calculatedColor = vec3(0.);\n    vec3 normal = normalize(normInterpolated);\n    vec3 baseColor = inDiffuseColor.rgb;\n\n    {{MODULE_BASE_COLOR}}\n\n\n    vec3 viewDirection = normalize(v_viewDirection);\n\n    #ifdef DOUBLE_SIDED\n        if(!gl_FrontFacing) normal = normal * -1.0;\n    #endif\n\n    #ifdef HAS_TEXTURES\n        #ifdef HAS_TEXTURE_DIFFUSE\n            baseColor = texture(texDiffuse, texCoord).rgb;\n\n            #ifdef COLORIZE_TEXTURE\n                baseColor *= inDiffuseColor.rgb;\n            #endif\n        #endif\n\n        #ifdef HAS_TEXTURE_NORMAL\n            normal = texture(texNormal, texCoord).rgb;\n            normal = normalize(normal * 2. - 1.);\n            float normalIntensity = inTextureIntensities.NORMAL;\n            normal = normalize(mix(vec3(0., 0., 1.), normal, 2. * normalIntensity));\n            normal = normalize(TBN_Matrix * normal);\n        #endif\n    #endif\n\n    {{PHONG_FRAGMENT_BODY}}\n\n\n\n\n\n\n    #ifdef ENABLE_FRESNEL\n        calculatedColor += inFresnel.rgb * (CalculateFresnel(vec3(cameraSpace_pos), normal) * inFresnel.w * inFresnelWidthExponent.x);\n    #endif\n\n     #ifdef HAS_TEXTURE_ALPHA\n        #ifdef ALPHA_MASK_ALPHA\n            col.a*=texture(texAlpha,texCoord).a;\n        #endif\n        #ifdef ALPHA_MASK_LUMI\n            col.a*= dot(vec3(0.2126,0.7152,0.0722), texture(texAlpha,texCoord).rgb);\n        #endif\n        #ifdef ALPHA_MASK_R\n            col.a*=texture(texAlpha,texCoord).r;\n        #endif\n        #ifdef ALPHA_MASK_G\n            col.a*=texture(texAlpha,texCoord).g;\n        #endif\n        #ifdef ALPHA_MASK_B\n            col.a*=texture(texAlpha,texCoord).b;\n        #endif\n    #endif\n\n    #ifdef DISCARDTRANS\n        if(col.a<0.2) discard;\n    #endif\n\n\n    #ifdef HAS_TEXTURE_ENV\n        vec3 luminanceColor = vec3(0.);\n\n        #ifndef ENVMAP_MATCAP\n            float environmentMapWidth = inEnvMapWidth;\n            float glossyExponent = inMaterialProperties.SHININESS;\n            float glossyCoefficient = inMaterialProperties.SPECULAR_AMT;\n\n            vec3 envMapNormal =  normal;\n            vec3 reflectDirection = reflect(normalize(-viewDirection), normal);\n\n            float lambertianCoefficient = dot(viewDirection, reflectDirection); //0.44; // TODO: need prefiltered map for this\n            // lambertianCoefficient = 1.;\n            float specularAngle = max(dot(reflectDirection, viewDirection), 0.);\n            float specularFactor = pow(specularAngle, max(0., inMaterialProperties.SHININESS));\n\n            glossyExponent = specularFactor;\n\n            float maxMIPLevel = 10.;\n            float MIPlevel = log2(environmentMapWidth / 1024. * sqrt(3.)) - 0.5 * log2(glossyExponent + 1.);\n\n            luminanceColor = inEnvMapIntensity * (\n                inDiffuseColor.rgb *\n                SAMPLETEX(texEnv, envMapNormal, maxMIPLevel).rgb\n                +\n                glossyCoefficient * SAMPLETEX(texEnv, reflectDirection, MIPlevel).rgb\n            );\n        #endif\n        #ifdef ENVMAP_MATCAP\n            luminanceColor = inEnvMapIntensity * (\n                texture(texEnv, getMatCapUV(viewSpacePosition, viewSpaceNormal)).rgb\n                //inDiffuseColor.rgb\n                //* textureLod(texEnv, getMatCapUV(envMapNormal), maxMIPLevel).rgb\n                //+\n                //glossyCoefficient * textureLod(texEnv, getMatCapUV(reflectDirection), MIPlevel).rgb\n            );\n        #endif\n\n\n\n        #ifdef HAS_TEXTURE_LUMINANCE_MASK\n            luminanceColor *= texture(texLuminance, texCoord).r * inLuminanceMaskIntensity;\n        #endif\n\n        #ifdef HAS_TEXTURE_AO\n            // luminanceColor *= mix(vec3(1.), texture(texAO, texCoord).rgb, inTextureIntensities.AO);\n            luminanceColor *= texture(texAO, texCoord).g*inTextureIntensities.AO;\n        #endif\n\n        #ifdef ENV_BLEND_ADD\n            calculatedColor.rgb += luminanceColor;\n        #endif\n        #ifdef ENV_BLEND_MUL\n            calculatedColor.rgb *= luminanceColor;\n        #endif\n\n        #ifdef ENV_BLEND_MIX\n            calculatedColor.rgb=mix(luminanceColor,calculatedColor.rgb,luminanceColor);\n        #endif\n\n\n    #endif\n\n    #ifdef ADD_EMISSIVE_COLOR\n        vec3 emissiveRadiance = mix(calculatedColor, inEmissiveColor.rgb, inEmissiveColor.w); // .w = intensity of color;\n\n        #ifdef HAS_TEXTURE_EMISSIVE\n            float emissiveIntensity = inTextureIntensities.EMISSIVE;\n            emissiveRadiance = mix(calculatedColor, texture(texEmissive, texCoord).rgb, emissiveIntensity);\n        #endif\n\n        #ifdef HAS_TEXTURE_EMISSIVE_MASK\n           float emissiveMixValue = mix(1., texture(texMaskEmissive, texCoord).r, inEmissiveMaskIntensity);\n           calculatedColor = mix(calculatedColor, emissiveRadiance, emissiveMixValue);\n        #endif\n\n        #ifndef HAS_TEXTURE_EMISSIVE_MASK\n            calculatedColor = emissiveRadiance;\n        #endif\n    #endif\n\n    col.rgb = clamp(calculatedColor, 0., 1.);\n\n\n    {{MODULE_COLOR}}\n\n    outColor = col;\n}\n',phong_vert:"\n{{MODULES_HEAD}}\n\n#define NONE -1\n#define AMBIENT 0\n#define POINT 1\n#define DIRECTIONAL 2\n#define SPOT 3\n\n#define TEX_REPEAT_X x;\n#define TEX_REPEAT_Y y;\n#define TEX_OFFSET_X z;\n#define TEX_OFFSET_Y w;\n\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN float attrVertIndex;\nIN vec3 attrTangent;\nIN vec3 attrBiTangent;\n\nOUT vec2 texCoord;\nOUT vec3 normInterpolated;\nOUT vec3 fragPos;\n\n#ifdef HAS_TEXTURE_NORMAL\n    OUT mat3 TBN_Matrix; // tangent bitangent normal space transform matrix\n#endif\n\n#ifdef ENABLE_FRESNEL\n    OUT vec4 cameraSpace_pos;\n#endif\n\nOUT vec3 v_viewDirection;\nOUT mat3 normalMatrix;\nOUT mat4 mvMatrix;\n\n#ifdef HAS_TEXTURES\n    UNI vec4 inTextureRepeatOffset;\n#endif\n\nUNI vec3 camPos;\nUNI mat4 projMatrix;\nUNI mat4 viewMatrix;\nUNI mat4 modelMatrix;\n\n#ifdef ENVMAP_MATCAP\n    OUT vec3 viewSpaceNormal;\n    OUT vec3 viewSpacePosition;\n#endif\n\n\nmat3 transposeMat3(mat3 m)\n{\n    return mat3(m[0][0], m[1][0], m[2][0],\n        m[0][1], m[1][1], m[2][1],\n        m[0][2], m[1][2], m[2][2]);\n}\n\nmat3 inverseMat3(mat3 m)\n{\n    float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];\n    float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];\n    float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];\n\n    float b01 = a22 * a11 - a12 * a21;\n    float b11 = -a22 * a10 + a12 * a20;\n    float b21 = a21 * a10 - a11 * a20;\n\n    float det = a00 * b01 + a01 * b11 + a02 * b21;\n\n    return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),\n        b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),\n        b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;\n}\n\nvoid main()\n{\n    mat4 mMatrix=modelMatrix;\n    vec4 pos=vec4(vPosition,  1.0);\n\n    texCoord=attrTexCoord;\n    texCoord.y = 1. - texCoord.y;\n    vec3 norm=attrVertNormal;\n\n    vec3 tangent = attrTangent;\n    vec3 bitangent = attrBiTangent;\n\n    {{MODULE_VERTEX_POSITION}}\n\n    normalMatrix = transposeMat3(inverseMat3(mat3(mMatrix)));\n    mvMatrix = (viewMatrix * mMatrix);\n\n\n\n    #ifdef ENABLE_FRESNEL\n        cameraSpace_pos = mvMatrix * pos;\n    #endif\n\n    #ifdef HAS_TEXTURES\n        float repeatX = inTextureRepeatOffset.TEX_REPEAT_X;\n        float offsetX = inTextureRepeatOffset.TEX_OFFSET_X;\n        float repeatY = inTextureRepeatOffset.TEX_REPEAT_Y;\n        float offsetY = inTextureRepeatOffset.TEX_OFFSET_Y;\n\n        texCoord.x *= repeatX;\n        texCoord.x += offsetX;\n        texCoord.y *= repeatY;\n        texCoord.y += offsetY;\n    #endif\n\n   normInterpolated = vec3(normalMatrix*norm);\n\n    #ifdef HAS_TEXTURE_NORMAL\n        vec3 normCameraSpace = normalize((vec4(normInterpolated, 0.0)).xyz);\n        vec3 tangCameraSpace = normalize((mMatrix * vec4(tangent, 0.0)).xyz);\n        vec3 bitangCameraSpace = normalize((mMatrix * vec4(bitangent, 0.0)).xyz);\n\n        // re orthogonalization for smoother normals\n        tangCameraSpace = normalize(tangCameraSpace - dot(tangCameraSpace, normCameraSpace) * normCameraSpace);\n        bitangCameraSpace = cross(normCameraSpace, tangCameraSpace);\n\n        TBN_Matrix = mat3(tangCameraSpace, bitangCameraSpace, normCameraSpace);\n    #endif\n\n    fragPos = vec3((mMatrix) * pos);\n    v_viewDirection = normalize(camPos - fragPos);\n    // modelPos=mMatrix*pos;\n\n    #ifdef ENVMAP_MATCAP\n        mat3 viewSpaceNormalMatrix = normalMatrix = transposeMat3(inverseMat3(mat3(mvMatrix)));\n        viewSpaceNormal = normalize(viewSpaceNormalMatrix * norm);\n        viewSpacePosition = vec3(mvMatrix * pos);\n    #endif\n    gl_Position = projMatrix * mvMatrix * pos;\n}\n",snippet_body_ambient_frag:"    // * AMBIENT LIGHT {{LIGHT_INDEX}} *\n    vec3 diffuseColor{{LIGHT_INDEX}} = phongLight{{LIGHT_INDEX}}.lightProperties.INTENSITY*phongLight{{LIGHT_INDEX}}.color;\n    calculatedColor += diffuseColor{{LIGHT_INDEX}};\n",snippet_body_directional_frag:"    // * DIRECTIONAL LIGHT {{LIGHT_INDEX}} *\n\n    if (phongLight{{LIGHT_INDEX}}.castLight == 1) {\n        vec3 phongLightDirection{{LIGHT_INDEX}} = normalize(phongLight{{LIGHT_INDEX}}.position);\n\n        float phongLambert{{LIGHT_INDEX}} = 1.; // inout variable\n\n        vec3 lightColor{{LIGHT_INDEX}} = phongLight{{LIGHT_INDEX}}.color;\n        vec3 lightSpecular{{LIGHT_INDEX}} = phongLight{{LIGHT_INDEX}}.specular;\n\n        #ifdef HAS_TEXTURES\n            #ifdef HAS_TEXTURE_AO\n                // lightColor{{LIGHT_INDEX}} *= mix(vec3(1.), texture(texAO, texCoord).rgb, inTextureIntensities.AO);\n                lightColor{{LIGHT_INDEX}} *= texture(texAO, texCoord).g, inTextureIntensities.AO;\n\n            #endif\n\n            #ifdef HAS_TEXTURE_SPECULAR\n                lightSpecular{{LIGHT_INDEX}} *= mix(1., texture(texSpecular, texCoord).r, inTextureIntensities.SPECULAR);\n            #endif\n        #endif\n\n        vec3 diffuseColor{{LIGHT_INDEX}} = CalculateDiffuseColor(phongLightDirection{{LIGHT_INDEX}}, viewDirection, normal, lightColor{{LIGHT_INDEX}}, baseColor, phongLambert{{LIGHT_INDEX}});\n        vec3 specularColor{{LIGHT_INDEX}} = CalculateSpecularColor(\n            lightSpecular{{LIGHT_INDEX}},\n            inMaterialProperties.SPECULAR_AMT,\n            inMaterialProperties.SHININESS,\n            phongLightDirection{{LIGHT_INDEX}},\n            viewDirection,\n            normal,\n            phongLambert{{LIGHT_INDEX}}\n        );\n\n        vec3 combinedColor{{LIGHT_INDEX}} = (diffuseColor{{LIGHT_INDEX}} + specularColor{{LIGHT_INDEX}});\n\n        vec3 lightModelDiff{{LIGHT_INDEX}} = phongLight{{LIGHT_INDEX}}.position - fragPos.xyz;\n\n        combinedColor{{LIGHT_INDEX}} *= phongLight{{LIGHT_INDEX}}.lightProperties.INTENSITY;\n        calculatedColor += combinedColor{{LIGHT_INDEX}};\n    }",snippet_body_point_frag:"// * POINT LIGHT {{LIGHT_INDEX}} *\n    if (phongLight{{LIGHT_INDEX}}.castLight == 1) {\n        vec3 phongLightDirection{{LIGHT_INDEX}} = phongLight{{LIGHT_INDEX}}.position - fragPos.xyz;\n        // * get length before normalization for falloff calculation\n        phongLightDirection{{LIGHT_INDEX}} = normalize(phongLightDirection{{LIGHT_INDEX}});\n        float phongLightDistance{{LIGHT_INDEX}} = length(phongLightDirection{{LIGHT_INDEX}});\n\n        float phongLambert{{LIGHT_INDEX}} = 1.; // inout variable\n\n        vec3 lightColor{{LIGHT_INDEX}} = phongLight{{LIGHT_INDEX}}.color;\n        vec3 lightSpecular{{LIGHT_INDEX}} = phongLight{{LIGHT_INDEX}}.specular;\n\n        #ifdef HAS_TEXTURES\n            #ifdef HAS_TEXTURE_AO\n                // lightColor{{LIGHT_INDEX}} *= mix(vec3(1.), texture(texAO, texCoord).rgb, inTextureIntensities.AO);\n                lightColor{{LIGHT_INDEX}} *= texture(texAO, texCoord).g, inTextureIntensities.AO;\n\n            #endif\n\n            #ifdef HAS_TEXTURE_SPECULAR\n                lightSpecular{{LIGHT_INDEX}} *= mix(1., texture(texSpecular, texCoord).r, inTextureIntensities.SPECULAR);\n            #endif\n        #endif\n\n        vec3 diffuseColor{{LIGHT_INDEX}} = CalculateDiffuseColor(phongLightDirection{{LIGHT_INDEX}}, viewDirection, normal, lightColor{{LIGHT_INDEX}}, baseColor, phongLambert{{LIGHT_INDEX}});\n        vec3 specularColor{{LIGHT_INDEX}} = CalculateSpecularColor(\n            lightSpecular{{LIGHT_INDEX}},\n            inMaterialProperties.SPECULAR_AMT,\n            inMaterialProperties.SHININESS,\n            phongLightDirection{{LIGHT_INDEX}},\n            viewDirection,\n            normal,\n            phongLambert{{LIGHT_INDEX}}\n        );\n\n        vec3 combinedColor{{LIGHT_INDEX}} = (diffuseColor{{LIGHT_INDEX}} + specularColor{{LIGHT_INDEX}});\n\n        combinedColor{{LIGHT_INDEX}} *= phongLight{{LIGHT_INDEX}}.lightProperties.INTENSITY;\n\n        float attenuation{{LIGHT_INDEX}} = CalculateFalloff(\n            phongLightDistance{{LIGHT_INDEX}},\n            phongLightDirection{{LIGHT_INDEX}},\n            phongLight{{LIGHT_INDEX}}.lightProperties.FALLOFF,\n            phongLight{{LIGHT_INDEX}}.lightProperties.RADIUS\n        );\n\n        attenuation{{LIGHT_INDEX}} *= when_gt(phongLambert{{LIGHT_INDEX}}, 0.);\n        combinedColor{{LIGHT_INDEX}} *= attenuation{{LIGHT_INDEX}};\n\n        calculatedColor += combinedColor{{LIGHT_INDEX}};\n    }\n",snippet_body_spot_frag:"    // * SPOT LIGHT {{LIGHT_INDEX}} *\n    if (phongLight{{LIGHT_INDEX}}.castLight == 1) {\n        vec3 phongLightDirection{{LIGHT_INDEX}} = phongLight{{LIGHT_INDEX}}.position - fragPos.xyz;\n        phongLightDirection{{LIGHT_INDEX}} = normalize( phongLightDirection{{LIGHT_INDEX}});\n        float phongLightDistance{{LIGHT_INDEX}} = length(phongLightDirection{{LIGHT_INDEX}});\n\n        float phongLambert{{LIGHT_INDEX}} = 1.; // inout variable\n\n        vec3 lightColor{{LIGHT_INDEX}} = phongLight{{LIGHT_INDEX}}.color;\n        vec3 lightSpecular{{LIGHT_INDEX}} = phongLight{{LIGHT_INDEX}}.specular;\n\n        #ifdef HAS_TEXTURES\n            #ifdef HAS_TEXTURE_AO\n                // lightColor{{LIGHT_INDEX}} *= mix(vec3(1.), texture(texAO, texCoord).rgb, inTextureIntensities.AO);\n                lightColor{{LIGHT_INDEX}} *= texture(texAO, texCoord).g, inTextureIntensities.AO;\n\n            #endif\n\n            #ifdef HAS_TEXTURE_SPECULAR\n                lightSpecular{{LIGHT_INDEX}} *= mix(1., texture(texSpecular, texCoord).r, inTextureIntensities.SPECULAR);\n            #endif\n        #endif\n\n        vec3 diffuseColor{{LIGHT_INDEX}} = CalculateDiffuseColor(phongLightDirection{{LIGHT_INDEX}}, viewDirection, normal, lightColor{{LIGHT_INDEX}}, baseColor, phongLambert{{LIGHT_INDEX}});\n        vec3 specularColor{{LIGHT_INDEX}} = CalculateSpecularColor(\n            lightSpecular{{LIGHT_INDEX}},\n            inMaterialProperties.SPECULAR_AMT,\n            inMaterialProperties.SHININESS,\n            phongLightDirection{{LIGHT_INDEX}},\n            viewDirection,\n            normal,\n            phongLambert{{LIGHT_INDEX}}\n        );\n\n        vec3 combinedColor{{LIGHT_INDEX}} = (diffuseColor{{LIGHT_INDEX}} + specularColor{{LIGHT_INDEX}});\n\n        float spotIntensity{{LIGHT_INDEX}} = CalculateSpotLightEffect(\n            phongLight{{LIGHT_INDEX}}.position, phongLight{{LIGHT_INDEX}}.conePointAt, phongLight{{LIGHT_INDEX}}.spotProperties.COSCONEANGLE,\n            phongLight{{LIGHT_INDEX}}.spotProperties.COSCONEANGLEINNER, phongLight{{LIGHT_INDEX}}.spotProperties.SPOTEXPONENT,\n            phongLightDirection{{LIGHT_INDEX}}\n        );\n\n        combinedColor{{LIGHT_INDEX}} *= spotIntensity{{LIGHT_INDEX}};\n\n        vec3 lightModelDiff{{LIGHT_INDEX}} = phongLight{{LIGHT_INDEX}}.position - fragPos.xyz;\n\n        float attenuation{{LIGHT_INDEX}} = CalculateFalloff(\n            phongLightDistance{{LIGHT_INDEX}},\n            phongLightDirection{{LIGHT_INDEX}},\n            phongLight{{LIGHT_INDEX}}.lightProperties.FALLOFF,\n            phongLight{{LIGHT_INDEX}}.lightProperties.RADIUS\n        );\n\n        attenuation{{LIGHT_INDEX}} *= when_gt(phongLambert{{LIGHT_INDEX}}, 0.);\n\n        combinedColor{{LIGHT_INDEX}} *= attenuation{{LIGHT_INDEX}};\n\n        combinedColor{{LIGHT_INDEX}} *= phongLight{{LIGHT_INDEX}}.lightProperties.INTENSITY;\n        calculatedColor += combinedColor{{LIGHT_INDEX}};\n    }",snippet_head_frag:"UNI Light phongLight{{LIGHT_INDEX}};\n"};const t=e.patch.cgl;const n=s.snippet_head_frag;const a={point:s.snippet_body_point_frag,spot:s.snippet_body_spot_frag,ambient:s.snippet_body_ambient_frag,directional:s.snippet_body_directional_frag,area:s.snippet_body_area_frag};const r=new RegExp("{{LIGHT_INDEX}}","g");const l=e=>n.replace("{{LIGHT_INDEX}}",e);const u=(e,t)=>a[t].replace(r,e);function o(){const e=s.phong_vert;let t=s.phong_frag;let n="";let a="";n=n.concat(l(0));a=a.concat(u(0,rt[0].type));t=t.replace(fe,n);t=t.replace(ge,a);pe.setSource(e,t);pe.define("HAS_POINT");pe.removeDefine("HAS_SPOT");pe.removeDefine("HAS_DIRECTIONAL");pe.removeDefine("HAS_AMBIENT")}const i=e.inTrigger("Trigger In");const c=e.inFloat("R",Math.random());const m=e.inFloat("G",Math.random());const _=e.inFloat("B",Math.random());const d=e.inFloatSlider("A",1);const p=[c,m,_,d];e.setPortGroup("Diffuse Color",p);const v=e.inBool("Enable",false);const f=e.inFloatSlider("Albedo",.707);const g=e.inFloatSlider("Roughness",.835);v.setUiAttribs({hidePort:true});f.setUiAttribs({greyout:true});g.setUiAttribs({greyout:true});c.setUiAttribs({colorPick:true});e.setPortGroup("Oren-Nayar Diffuse",[v,f,g]);v.onChange=function(){pe.toggleDefine("ENABLE_OREN_NAYAR_DIFFUSE",v);f.setUiAttribs({greyout:!v.get()});g.setUiAttribs({greyout:!v.get()})};const h=e.inValueBool("Active",false);h.setUiAttribs({hidePort:true});const b=e.inValueSlider("Fresnel Intensity",.7);const x=e.inFloat("Fresnel Width",1);const O=e.inFloat("Fresnel Exponent",6);const I=e.inFloat("Fresnel R",1);const T=e.inFloat("Fresnel G",1);const y=e.inFloat("Fresnel B",1);I.setUiAttribs({colorPick:true});const S=[b,x,O,I,T,y];S.forEach(function(e){e.setUiAttribs({greyout:true})});e.setPortGroup("Fresnel",S.concat([h]));let A=null;let M=null;h.onChange=function(){pe.toggleDefine("ENABLE_FRESNEL",h);if(h.get()){if(!A)A=new CGL.Uniform(pe,"4f","inFresnel",I,T,y,b);if(!M)M=new CGL.Uniform(pe,"2f","inFresnelWidthExponent",x,O)}else{if(A){pe.removeUniform("inFresnel");A=null}if(M){pe.removeUniform("inFresnelWidthExponent");M=null}}S.forEach(function(e){e.setUiAttribs({greyout:!h.get()})})};const C=e.inBool("Emissive Active",false);const E=e.inFloatSlider("Color Intensity",.3);const N=e.inFloatSlider("Emissive R",Math.random());const P=e.inFloatSlider("Emissive G",Math.random());const j=e.inFloatSlider("Emissive B",Math.random());N.setUiAttribs({colorPick:true});e.setPortGroup("Emissive Color",[C,E,N,P,j]);E.setUiAttribs({greyout:!C.get()});N.setUiAttribs({greyout:!C.get()});P.setUiAttribs({greyout:!C.get()});j.setUiAttribs({greyout:!C.get()});let R=null;C.onChange=()=>{pe.toggleDefine("ADD_EMISSIVE_COLOR",C);if(C.get()){R=new CGL.Uniform(pe,"4f","inEmissiveColor",N,P,j,E);H.setUiAttribs({greyout:false});W.setUiAttribs({greyout:false});if(H.get())oe.setUiAttribs({greyout:false});if(W.get())ie.setUiAttribs({greyout:false})}else{e.log("ayayay");H.setUiAttribs({greyout:true});W.setUiAttribs({greyout:true});oe.setUiAttribs({greyout:true});ie.setUiAttribs({greyout:true});pe.removeUniform("inEmissiveColor");R=null}if(H.get()){E.setUiAttribs({greyout:true});N.setUiAttribs({greyout:true});P.setUiAttribs({greyout:true});j.setUiAttribs({greyout:true})}else{if(C.get()){E.setUiAttribs({greyout:false});N.setUiAttribs({greyout:false});P.setUiAttribs({greyout:false});j.setUiAttribs({greyout:false})}else{E.setUiAttribs({greyout:true});N.setUiAttribs({greyout:true});P.setUiAttribs({greyout:true});j.setUiAttribs({greyout:true})}}};const D=e.inFloat("Shininess",4);const w=e.inFloatSlider("Specular Amount",.5);const L=e.inSwitch("Specular Model",["Blinn","Schlick","Phong","Gauss"],"Blinn");L.setUiAttribs({hidePort:true});const G=[D,w,L];e.setPortGroup("Specular",G);const k=e.inValueBool("Energy Conservation",false);const U=e.inBool("Double Sided Material",false);const V=e.inSwitch("Falloff Mode",["A","B","C","D"],"A");k.setUiAttribs({hidePort:true});U.setUiAttribs({hidePort:true});V.setUiAttribs({hidePort:true});V.onChange=()=>{const e=["A","B","C","D"];pe.define("FALLOFF_MODE_"+V.get());e.filter(e=>e!==V.get()).forEach(e=>pe.removeDefine("FALLOFF_MODE_"+e))};const B=[k,U,V];e.setPortGroup("Light Options",B);const z=e.inTexture("Diffuse Texture");const F=e.inTexture("Specular Texture");const X=e.inTexture("Normal Map");const Y=e.inTexture("AO Texture");const H=e.inTexture("Emissive Texture");const W=e.inTexture("Emissive Mask");const q=e.inTexture("Opacity Texture");const K=e.inTexture("Environment Map");const Z=e.inTexture("Env Map Mask");e.setPortGroup("Textures",[z,F,X,Y,H,W,q,K,Z]);const Q=e.inBool("Colorize Texture",false);const J=e.inFloat("Diffuse Repeat X",1);const $=e.inFloat("Diffuse Repeat Y",1);const ee=e.inFloat("Texture Offset X",0);const te=e.inFloat("Texture Offset Y",0);const ne=e.inFloatSlider("Specular Intensity",1);const ae=e.inFloatSlider("Normal Map Intensity",.5);const re=e.inFloatSlider("AO Intensity",1);const oe=e.inFloatSlider("Emissive Intensity",1);const ie=e.inFloatSlider("Emissive Mask Intensity",1);const se=e.inFloatSlider("Env Map Intensity",1);const le=e.inSwitch("Env Map Blend",["Add","Multiply","Mix"],"Add");const ue=e.inFloatSlider("Env Mask Intensity",1);Q.setUiAttribs({hidePort:true});e.setPortGroup("Texture Transforms",[Q,$,J,te,ee]);e.setPortGroup("Texture Intensities",[ae,re,ne,oe,le,ie,se,ue]);const ce=e.inSwitch("Alpha Mask Source",["Luminance","R","G","B","A"],"Luminance");ce.setUiAttribs({greyout:true});const me=e.inValueBool("Discard Transparent Pixels");me.setUiAttribs({hidePort:true});e.setPortGroup("Opacity Texture",[ce,me]);const _e=e.outTrigger("Trigger Out");const de=e.outObject("Shader",null,"shader");de.ignoreValueSerialize=true;const pe=new CGL.Shader(t,"phongmaterial_"+e.id);pe.setModules(["MODULE_VERTEX_POSITION","MODULE_COLOR","MODULE_BEGIN_FRAG","MODULE_BASE_COLOR"]);pe.setSource(s.simosphong_vert,s.simosphong_frag);let ve=false;pe.define("FALLOFF_MODE_A");if(t.glVersion<2){pe.enableExtension("GL_OES_standard_derivatives");if(t.gl.getExtension("OES_texture_float"))pe.enableExtension("GL_OES_texture_float");else e.log("error loading extension OES_texture_float");if(t.gl.getExtension("OES_texture_float_linear"))pe.enableExtension("GL_OES_texture_float_linear");else e.log("error loading extention OES_texture_float_linear");if(t.gl.getExtension("GL_OES_texture_half_float"))pe.enableExtension("GL_OES_texture_half_float");else e.log("error loading extention GL_OES_texture_half_float");if(t.gl.getExtension("GL_OES_texture_half_float_linear"))pe.enableExtension("GL_OES_texture_half_float_linear");else e.log("error loading extention GL_OES_texture_half_float_linear")}const fe=new RegExp("{{PHONG_FRAGMENT_HEAD}}","g");const ge=new RegExp("{{PHONG_FRAGMENT_BODY}}","g");const he={directional:false,spot:false,ambient:false,point:false};function be(t){let e=s.phong_frag;let n="";let a="";he.directional=false;he.spot=false;he.ambient=false;he.point=false;for(let e=0;e<t.length;e+=1){const r=t[e];const o=r.type;if(!he[o]){he[o]=true}n=n.concat(l(e));a=a.concat(u(e,r.type))}e=e.replace(fe,n);e=e.replace(ge,a);pe.setSource(s.phong_vert,e);for(let e=0,t=Object.keys(he);e<t.length;e+=1){const i=t[e];if(he[i]){if(!pe.hasDefine("HAS_"+i.toUpperCase())){pe.define("HAS_"+i.toUpperCase())}}else{if(pe.hasDefine("HAS_"+i.toUpperCase())){pe.removeDefine("HAS_"+i.toUpperCase())}}}}de.set(pe);let xe=null;let Oe=null;let Ie=null;let Te=null;let ye=null;let Se=null;let Ae=null;let Me=null;let Ce=null;let Ee=null;let Ne=null;let Pe=null;let je=null;Q.onChange=function(){pe.toggleDefine("COLORIZE_TEXTURE",Q.get())};function Re(){if(z.get()){if(!pe.hasDefine("HAS_TEXTURE_DIFFUSE")){pe.define("HAS_TEXTURE_DIFFUSE");if(!xe)xe=new CGL.Uniform(pe,"t","texDiffuse",0)}}else{pe.removeUniform("texDiffuse");pe.removeDefine("HAS_TEXTURE_DIFFUSE");xe=null}}function De(){if(F.get()){ne.setUiAttribs({greyout:false});if(!pe.hasDefine("HAS_TEXTURE_SPECULAR")){pe.define("HAS_TEXTURE_SPECULAR");if(!Oe)Oe=new CGL.Uniform(pe,"t","texSpecular",0)}}else{ne.setUiAttribs({greyout:true});pe.removeUniform("texSpecular");pe.removeDefine("HAS_TEXTURE_SPECULAR");Oe=null}}function we(){if(X.get()){ae.setUiAttribs({greyout:false});if(!pe.hasDefine("HAS_TEXTURE_NORMAL")){pe.define("HAS_TEXTURE_NORMAL");if(!Ie)Ie=new CGL.Uniform(pe,"t","texNormal",0)}}else{ae.setUiAttribs({greyout:true});pe.removeUniform("texNormal");pe.removeDefine("HAS_TEXTURE_NORMAL");Ie=null}}Te=new CGL.Uniform(pe,"t","texAO");function Le(){pe.toggleDefine("HAS_TEXTURE_AO",Y.get());re.setUiAttribs({greyout:!Y.get()})}function Ge(){if(H.get()){N.setUiAttribs({greyout:true});P.setUiAttribs({greyout:true});j.setUiAttribs({greyout:true});E.setUiAttribs({greyout:true});if(C.get()){oe.setUiAttribs({greyout:false})}if(!pe.hasDefine("HAS_TEXTURE_EMISSIVE")){pe.define("HAS_TEXTURE_EMISSIVE");if(!ye)ye=new CGL.Uniform(pe,"t","texEmissive",0)}}else{oe.setUiAttribs({greyout:true});if(C.get()){N.setUiAttribs({greyout:false});P.setUiAttribs({greyout:false});j.setUiAttribs({greyout:false});E.setUiAttribs({greyout:false})}else{H.setUiAttribs({greyout:true})}pe.removeUniform("texEmissive");pe.removeDefine("HAS_TEXTURE_EMISSIVE");ye=null}}function ke(){if(W.get()){if(C.get()){ie.setUiAttribs({greyout:false})}if(!pe.hasDefine("HAS_TEXTURE_EMISSIVE_MASK")){pe.define("HAS_TEXTURE_EMISSIVE_MASK");if(!Se)Se=new CGL.Uniform(pe,"t","texMaskEmissive",0);if(!Ae)Ae=new CGL.Uniform(pe,"f","inEmissiveMaskIntensity",ie)}}else{if(!C.get()){W.setUiAttribs({greyout:true})}ie.setUiAttribs({greyout:true});pe.removeUniform("texMaskEmissive");pe.removeUniform("inEmissiveMaskIntensity");pe.removeDefine("HAS_TEXTURE_EMISSIVE_MASK");Se=null;Ae=null}}let Ue=false;function Ve(){pe.toggleDefine("HAS_TEXTURE_ENV",K.get());se.setUiAttribs({greyout:!K.get()});if(K.get()){if(!Ce)Ce=new CGL.Uniform(pe,"t","texEnv",0);pe.toggleDefine("TEX_FORMAT_CUBEMAP",K.get().cubemap);if(K.get().cubemap){pe.removeDefine("TEX_FORMAT_EQUIRECT");pe.removeDefine("ENVMAP_MATCAP");if(!Ee)Ee=new CGL.Uniform(pe,"f","inEnvMapIntensity",se);if(!Ne)Ne=new CGL.Uniform(pe,"f","inEnvMapWidth",K.get().cubemap.width)}else{const e=K.get().width===K.get().height;pe.toggleDefine("TEX_FORMAT_EQUIRECT",!e);pe.toggleDefine("ENVMAP_MATCAP",e);if(!Ee)Ee=new CGL.Uniform(pe,"f","inEnvMapIntensity",se);if(!Ne)Ne=new CGL.Uniform(pe,"f","inEnvMapWidth",K.get().width)}}else{pe.removeUniform("inEnvMapIntensity");pe.removeUniform("inEnvMapWidth");pe.removeUniform("texEnv");pe.removeDefine("HAS_TEXTURE_ENV");pe.removeDefine("ENVMAP_MATCAP");Ce=null;Ee=null}Ue=false}function Be(){if(Z.get()){ue.setUiAttribs({greyout:false});if(!Pe){pe.define("HAS_TEXTURE_LUMINANCE_MASK");Pe=new CGL.Uniform(pe,"t","texLuminance",0);je=new CGL.Uniform(pe,"f","inLuminanceMaskIntensity",ue)}}else{ue.setUiAttribs({greyout:true});pe.removeDefine("HAS_TEXTURE_LUMINANCE_MASK");pe.removeUniform("inLuminanceMaskIntensity");pe.removeUniform("texLuminance");Pe=null;je=null}}function ze(){pe.toggleDefine("ENV_BLEND_ADD",le.get()=="Add");pe.toggleDefine("ENV_BLEND_MUL",le.get()=="Multiply");pe.toggleDefine("ENV_BLEND_MIX",le.get()=="Mix");pe.toggleDefine("ALPHA_MASK_ALPHA",ce.get()=="Alpha Channel");pe.toggleDefine("ALPHA_MASK_LUMI",ce.get()=="Luminance");pe.toggleDefine("ALPHA_MASK_R",ce.get()=="R");pe.toggleDefine("ALPHA_MASK_G",ce.get()=="G");pe.toggleDefine("ALPHA_MASK_B",ce.get()=="B")}le.onChange=ze;ce.onChange=ze;function Fe(){if(q.get()){if(Me!==null)return;pe.removeUniform("texAlpha");pe.define("HAS_TEXTURE_ALPHA");if(!Me)Me=new CGL.Uniform(pe,"t","texAlpha",0);ce.setUiAttribs({greyout:false});me.setUiAttribs({greyout:false})}else{pe.removeUniform("texAlpha");pe.removeDefine("HAS_TEXTURE_ALPHA");Me=null;ce.setUiAttribs({greyout:true});me.setUiAttribs({greyout:true})}ze()}me.onChange=function(){pe.toggleDefine("DISCARDTRANS",me.get())};z.onChange=Re;F.onChange=De;X.onChange=we;Y.onChange=Le;H.onChange=Ge;W.onChange=ke;q.onChange=Fe;K.onChange=()=>{Ue=true};Z.onChange=Be;const Xe=t.maxUniformsFrag;const Ye=Xe===64?6:16;pe.define("MAX_LIGHTS",Ye.toString());pe.define("SPECULAR_PHONG");L.onChange=function(){if(L.get()==="Phong"){pe.define("SPECULAR_PHONG");pe.removeDefine("SPECULAR_BLINN");pe.removeDefine("SPECULAR_GAUSS");pe.removeDefine("SPECULAR_SCHLICK")}else if(L.get()==="Blinn"){pe.define("SPECULAR_BLINN");pe.removeDefine("SPECULAR_PHONG");pe.removeDefine("SPECULAR_GAUSS");pe.removeDefine("SPECULAR_SCHLICK")}else if(L.get()==="Gauss"){pe.define("SPECULAR_GAUSS");pe.removeDefine("SPECULAR_BLINN");pe.removeDefine("SPECULAR_PHONG");pe.removeDefine("SPECULAR_SCHLICK")}else if(L.get()==="Schlick"){pe.define("SPECULAR_SCHLICK");pe.removeDefine("SPECULAR_BLINN");pe.removeDefine("SPECULAR_PHONG");pe.removeDefine("SPECULAR_GAUSS")}};k.onChange=function(){pe.toggleDefine("CONSERVE_ENERGY",k.get())};U.onChange=function(){pe.toggleDefine("DOUBLE_SIDED",U.get())};const He=new CGL.Uniform(pe,"4f","inMaterialProperties",f,g,D,w);const We=new CGL.Uniform(pe,"4f","inDiffuseColor",c,m,_,d);const qe=new CGL.Uniform(pe,"4f","inTextureIntensities",ae,re,ne,oe);const Ke=new CGL.Uniform(pe,"4f","inTextureRepeatOffset",J,$,ee,te);pe.uniformColorDiffuse=We;const Ze=[];let Qe=0;function Je(t){for(let e=0;e<Ze.length;e+=1){Ze[e]=null}for(let e=0;e<t;e+=1){Ze[e]=null;if(!Ze[e]){Ze[e]={color:new CGL.Uniform(pe,"3f","phongLight"+e+".color",[1,1,1]),position:new CGL.Uniform(pe,"3f","phongLight"+e+".position",[0,11,0]),specular:new CGL.Uniform(pe,"3f","phongLight"+e+".specular",[1,1,1]),lightProperties:new CGL.Uniform(pe,"4f","phongLight"+e+".lightProperties",[1,1,1,1]),conePointAt:new CGL.Uniform(pe,"3f","phongLight"+e+".conePointAt",vec3.create()),spotProperties:new CGL.Uniform(pe,"3f","phongLight"+e+".spotProperties",[0,0,0,0]),castLight:new CGL.Uniform(pe,"i","phongLight"+e+".castLight",1)}}}}function $e(e){nt.position.setValue(e.position);nt.color.setValue(e.color);nt.specular.setValue(e.specular);nt.lightProperties.setValue([e.intensity,e.attenuation,e.falloff,e.radius]);nt.conePointAt.setValue(e.conePointAt);nt.spotProperties.setValue([e.cosConeAngle,e.cosConeAngleInner,e.spotExponent])}function et(t){for(let e=0;e<t.length;e+=1){const n=t[e];n.isUsed=true;Ze[e].position.setValue(n.position);Ze[e].color.setValue(n.color);Ze[e].specular.setValue(n.specular);Ze[e].lightProperties.setValue([n.intensity,n.attenuation,n.falloff,n.radius]);Ze[e].conePointAt.setValue(n.conePointAt);Ze[e].spotProperties.setValue([n.cosConeAngle,n.cosConeAngleInner,n.spotExponent]);Ze[e].castLight.setValue(n.castLight)}}function tt(e){if(e.length!==Qe){be(e);Je(e.length);Qe=e.length;et(e);ve=false}else{if(ve){be(e);Je(e.length);ve=false}et(e)}}let nt=null;function at(){nt={color:new CGL.Uniform(pe,"3f","phongLight"+0+".color",[1,1,1]),specular:new CGL.Uniform(pe,"3f","phongLight"+0+".specular",[1,1,1]),position:new CGL.Uniform(pe,"3f","phongLight"+0+".position",[0,11,0]),lightProperties:new CGL.Uniform(pe,"4f","phongLight"+0+".lightProperties",[1,1,1,1]),conePointAt:new CGL.Uniform(pe,"3f","phongLight"+0+".conePointAt",vec3.create()),spotProperties:new CGL.Uniform(pe,"3f","phongLight"+0+".spotProperties",[0,0,0,0]),castLight:new CGL.Uniform(pe,"i","phongLight"+0+".castLight",1)}}const rt=[{type:"point",position:[5,5,5],color:[1,1,1],specular:[1,1,1],intensity:1,attenuation:0,falloff:.5,radius:80,castLight:1}];const ot=mat4.create();function it(){if(t.frameStore.lightStack){if(t.frameStore.lightStack.length===0){e.setUiError("deflight","Default light is enabled. Please add lights to your patch to make this warning disappear.",1)}else e.setUiError("deflight",null)}if(!t.frameStore.lightStack||!t.frameStore.lightStack.length){if(!nt){o();at()}mat4.invert(ot,t.vMatrix);rt[0].position=[ot[12],ot[13],ot[14]];$e(rt[0]);Qe=-1}else{if(pe){if(t.frameStore.lightStack){if(t.frameStore.lightStack.length){nt=null;tt(t.frameStore.lightStack)}}}}}const st=function(){if(!pe){e.log("NO SHADER");return}t.pushShader(pe);pe.popTextures();_e.trigger();t.popShader()};e.preRender=function(){pe.bind();st()};const lt=mat4.create();const ut=vec3.create();const ct=vec3.create();i.onTriggered=function(){if(!pe){e.log("phong has no shader...");return}if(Ue)Ve();t.setShader(pe);pe.popTextures();if(z.get())pe.pushTexture(xe,z.get());if(F.get())pe.pushTexture(Oe,F.get());if(X.get())pe.pushTexture(Ie,X.get());if(Y.get())pe.pushTexture(Te,Y.get());if(H.get())pe.pushTexture(ye,H.get());if(W.get())pe.pushTexture(Se,W.get());if(q.get())pe.pushTexture(Me,q.get());if(K.get()){if(K.get().cubemap)pe.pushTexture(Ce,K.get().cubemap,t.gl.TEXTURE_CUBE_MAP);else pe.pushTexture(Ce,K.get())}if(Z.get()){pe.pushTexture(Pe,Z.get())}it();_e.trigger();t.setPreviousShader()};if(t.glVersion==1){if(!t.gl.getExtension("EXT_shader_texture_lod")){e.log("no EXT_shader_texture_lod texture extension")}else{pe.enableExtension("GL_EXT_shader_texture_lod");t.gl.getExtension("OES_texture_float");t.gl.getExtension("OES_texture_float_linear");t.gl.getExtension("OES_texture_half_float");t.gl.getExtension("OES_texture_half_float_linear");pe.enableExtension("GL_OES_standard_derivatives");pe.enableExtension("GL_OES_texture_float");pe.enableExtension("GL_OES_texture_float_linear");pe.enableExtension("GL_OES_texture_half_float");pe.enableExtension("GL_OES_texture_half_float_linear")}}Re();De();we();Le();Fe();Ge();ke();Ve();Be()};Ops.Gl.Phong.PhongMaterial_v6.prototype=new CABLES.Op;CABLES.OPS["0d83ed06-cdbe-4fe0-87bb-0ccece7fb6e1"]={f:Ops.Gl.Phong.PhongMaterial_v6,objName:"Ops.Gl.Phong.PhongMaterial_v6"};Ops.Geometry.GeometryToWireframeArray3=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const a=e.inObject("Geometry"),r=e.outArray("Array");a.onChange=function(){const t=a.get();r.set(null);if(!t)return;const n=[];for(let e=0;e<t.verticesIndices.length;e+=3){n.push(t.vertices[t.verticesIndices[e+0]*3+0],t.vertices[t.verticesIndices[e+0]*3+1],t.vertices[t.verticesIndices[e+0]*3+2],t.vertices[t.verticesIndices[e+1]*3+0],t.vertices[t.verticesIndices[e+1]*3+1],t.vertices[t.verticesIndices[e+1]*3+2],t.vertices[t.verticesIndices[e+1]*3+0],t.vertices[t.verticesIndices[e+1]*3+1],t.vertices[t.verticesIndices[e+1]*3+2],t.vertices[t.verticesIndices[e+2]*3+0],t.vertices[t.verticesIndices[e+2]*3+1],t.vertices[t.verticesIndices[e+2]*3+2],t.vertices[t.verticesIndices[e+2]*3+0],t.vertices[t.verticesIndices[e+2]*3+1],t.vertices[t.verticesIndices[e+2]*3+2],t.vertices[t.verticesIndices[e+0]*3+0],t.vertices[t.verticesIndices[e+0]*3+1],t.vertices[t.verticesIndices[e+0]*3+2])}r.set(n)}};Ops.Geometry.GeometryToWireframeArray3.prototype=new CABLES.Op;CABLES.OPS["d6d0f3ce-5670-49bb-893a-7c9b0262b991"]={f:Ops.Geometry.GeometryToWireframeArray3,objName:"Ops.Geometry.GeometryToWireframeArray3"};Ops.Gl.Meshes.Torus=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("render"),r=e.inValue("sides",32),o=e.inValue("rings",32),i=e.inValue("innerRadius",.5),s=e.inValue("outerRadius",1),a=e.inBool("Draw",true),l=e.outTrigger("trigger"),d=e.outObject("geometry");const p=vec3.fromValues(0,1,0),v=vec3.fromValues(1,0,0);let f=vec3.create(),g=vec3.create();d.ignoreValueSerialize=true;let h=e.patch.cgl;let b=null;let x=null;let O=0,I=0,T=0;let u=true;o.onChange=r.onChange=i.onChange=s.onChange=function(){u=true};n.onTriggered=function(){if(u)c();if(a.get()&&b!==null)b.render(h.getShader());l.trigger()};function c(){let e=Math.round(o.get());let t=Math.round(r.get());if(e<2)e=2;if(t<2)t=2;let n=i.get();let a=s.get();m(n,a,e,t);u=false}function y(e,t){let n;let a=Math.abs(e);let r=(t?1:2)*Math.PI/e;let o=[];let i=[];o[0]=0;i[0]=1;for(n=1;n<a;n++){o[n]=Math.sin(r*n);i[n]=Math.cos(r*n)}if(t){o[a]=0;i[a]=-1}else{o[a]=o[0];i[a]=i[0]}return{cost:i,sint:o}}function m(e,t,n,a){let r=y(n,false);let o=y(-a,false);let i;x=new CGL.Geometry("torus");x.glPrimitive=h.gl.TRIANGLE_STRIP;let s=[];let l=[];let u=[];let c=[];for(O=0;O<n;O++){for(I=0;I<a;I++){var m=3*(O*a+I);var _=2*(O*a+I);x.vertices[m]=r.cost[O]*(t+o.cost[I]*e);x.vertices[m+1]=r.sint[O]*(t+o.cost[I]*e);x.vertices[m+2]=o.sint[I]*e;u[m]=f[0]=r.cost[O]*o.cost[I];u[m+1]=f[1]=r.sint[O]*o.cost[I];u[m+2]=f[2]=o.sint[I];if(Math.abs(f[1])==1)i=v;else i=p;vec3.cross(g,f,i);vec3.normalize(g,g);s[m]=g[0];s[m+1]=g[1];s[m+2]=g[2];vec3.cross(g,g,f);l[m]=g[0];l[m+1]=g[1];l[m+2]=g[2];c[_]=O/(n-1);c[_+1]=I/(a-1)}}for(I=0,T=0;I<a;I++){let e=1;if(I==a-1)e=-I;for(O=0;O<n;O++,T+=2){var m=O*a+I;x.verticesIndices[T]=m;x.verticesIndices[T+1]=m+e;c[_]=O/(n+1);c[_+1]=I/(a+1)}x.verticesIndices[T]=I;x.verticesIndices[T+1]=I+e;T+=2}if(x.biTangents.length==l.length)x.biTangents.set(l);else x.biTangents=new Float32Array(l);if(x.tangents.length==s.length)x.tangents.set(s);else x.tangents=new Float32Array(s);if(x.vertexNormals.length==u.length)x.vertexNormals.set(u);else x.vertexNormals=new Float32Array(u);x.setTexCoords(c);d.set(null);d.set(x);if(!b)b=new CGL.Mesh(h,x,h.gl.TRIANGLE_STRIP);else b.setGeom(x)}};Ops.Gl.Meshes.Torus.prototype=new CABLES.Op;CABLES.OPS["d921e008-21b9-4cf5-84a2-4dedca34f0c8"]={f:Ops.Gl.Meshes.Torus,objName:"Ops.Gl.Meshes.Torus"};Ops.Gl.Meshes.PointCloudFromArray=function(){CABLES.Op.apply(this,arguments);const r=this;const e={};const t=r.inTrigger("exe"),o=r.inArray("Array",3),n=r.inValueInt("Num Points"),a=r.outTrigger("Trigger out"),i=r.outObject("Geometry"),s=r.inValueBool("Scramble Texcoords",true),l=r.inValue("Seed"),u=r.inArray("Coordinates",2),c=r.inArray("Vertex Colors",4);const m=r.patch.cgl;u.onChange=x;s.onChange=x;c.onChange=l.onChange=o.onChange=b;n.onChange=O;r.toWorkPortsNeedToBeLinked(o,t);r.setPortGroup("Texture Coordinates",[s,l,u]);let _=false;t.onTriggered=h;let d=null;const p=new CGL.Geometry("pointcloudfromarray");let v=[];let f=true;let g=false;function h(){a.trigger();if(CABLES.UI){let e=m.getShader();if(e.glPrimitive!=m.gl.POINTS)r.setUiError("nopointmat","Using a Material not made for point rendering. Try to use PointMaterial.");else r.setUiError("nopointmat",null)}if(f||!d)I();if(!_&&d)d.render(m.getShader())}function b(){_=o.get()==null;if(!_)f=true;else f=false}function x(){if(u.isLinked()){l.setUiAttribs({greyout:true});s.setUiAttribs({greyout:true})}else{s.setUiAttribs({greyout:false});if(!s.get())l.setUiAttribs({greyout:true});else l.setUiAttribs({greyout:false})}d=null;f=true}function O(){if(d){d.setNumVertices(Math.min(p.vertices.length/3,n.get()));if(n.get()==0)d.setNumVertices(p.vertices.length/3)}}function I(){let t=o.get();if(!t||t.length==0){return}if(t.length%3!==0){r.setUiError("div3","Array length not multiple of 3");return}else r.setUiError("div3",null);if(p.vertices.length==t.length&&d&&!u.isLinked()&&!c.isLinked()){d.setAttribute(CGL.SHADERVAR_VERTEX_POSITION,t,3);p.vertices=t;f=false;return}p.clear();let n=t.length/3;n=Math.abs(Math.floor(n));if(n==0)return;if(!v||v.length!=n*2)v=new Float32Array(n*2);let e=true;let a=s.get();if(!u.isLinked()){Math.randomSeed=l.get();v=[];for(let e=0;e<n;e++){if(p.vertices[e*3]!=t[e*3]||p.vertices[e*3+1]!=t[e*3+1]||p.vertices[e*3+2]!=t[e*3+2]){if(a){v[e*2]=Math.seededRandom();v[e*2+1]=Math.seededRandom()}else{v[e*2]=e/n;v[e*2+1]=e/n}}}}if(c.get()){if(!g&&c.get().length!=n*4){r.uiAttr({error:"Color array does not have the correct length! (should be "+n*4+")"});g=true;d=null;return}p.vertexColors=c.get()}else p.vertexColors=[];if(e){if(u.isLinked())v=u.get();p.setPointVertices(t);p.setTexCoords(v);p.verticesIndices=[];if(d)d.dispose();d=new CGL.Mesh(m,p,m.gl.POINTS);d.addVertexNumbers=true;d.setGeom(p);i.set(p)}O();f=false}};Ops.Gl.Meshes.PointCloudFromArray.prototype=new CABLES.Op;CABLES.OPS["0a6d9c6f-6459-45ca-88ad-268a1f7304db"]={f:Ops.Gl.Meshes.PointCloudFromArray,objName:"Ops.Gl.Meshes.PointCloudFromArray"};Ops.Gl.Shader.PointMaterial_v4=function(){CABLES.Op.apply(this,arguments);const e=this;const t={pointmat_frag:"\n{{MODULES_HEAD}}\n\nUNI vec4 color;\n// IN vec2 pointCoord;\nIN float ps;\n\n#ifdef HAS_TEXTURE_DIFFUSE\n    UNI sampler2D diffTex;\n#endif\n#ifdef HAS_TEXTURE_MASK\n    UNI sampler2D texMask;\n#endif\n#ifdef HAS_TEXTURE_COLORIZE\n    IN vec4 colorize;\n#endif\n#ifdef HAS_TEXTURE_OPACITY\n    IN float opacity;\n#endif\n#ifdef VERTEX_COLORS\n    IN vec4 vertexColor;\n#endif\n\nvoid main()\n{\n    #ifdef FLIP_TEX\n        vec2 pointCoord=vec2(gl_PointCoord.x,(1.0-gl_PointCoord.y));\n    #endif\n    #ifndef FLIP_TEX\n        vec2 pointCoord=gl_PointCoord;\n    #endif\n    {{MODULE_BEGIN_FRAG}}\n\n    if(ps<1.0)discard;\n\n    vec4 col=color;\n\n    #ifdef HAS_TEXTURE_MASK\n        float mask;\n        #ifdef TEXTURE_MASK_R\n            mask=texture(texMask,pointCoord).r;\n        #endif\n        #ifdef TEXTURE_MASK_A\n            mask=texture(texMask,pointCoord).a;\n        #endif\n        #ifdef TEXTURE_MASK_LUMI\n        \tvec3 lumcoeff = vec3(0.299,0.587,0.114);\n        \tmask = dot(texture(texMask,pointCoord).rgb, lumcoeff);\n        #endif\n\n    #endif\n\n    #ifdef HAS_TEXTURE_DIFFUSE\n        col=texture(diffTex,pointCoord);\n        #ifdef COLORIZE_TEXTURE\n          col.rgb*=color.rgb;\n        #endif\n    #endif\n    col.a*=color.a;\n\n    {{MODULE_COLOR}}\n\n    #ifdef MAKE_ROUND\n\n        #ifndef MAKE_ROUNDAA\n            if ((gl_PointCoord.x-0.5)*(gl_PointCoord.x-0.5) + (gl_PointCoord.y-0.5)*(gl_PointCoord.y-0.5) > 0.25) discard; //col.a=0.0;\n        #endif\n\n        #ifdef MAKE_ROUNDAA\n            float circ=(gl_PointCoord.x-0.5)*(gl_PointCoord.x-0.5) + (gl_PointCoord.y-0.5)*(gl_PointCoord.y-0.5);\n\n            float a=smoothstep(0.25,0.25-fwidth(gl_PointCoord.x),circ);\n            if(a==0.0)discard;\n            col.a=a*color.a;\n        #endif\n    #endif\n\n    #ifdef HAS_TEXTURE_COLORIZE\n        col*=colorize;\n    #endif\n\n    #ifdef TEXTURE_COLORIZE_MUL\n        col*=color;\n    #endif\n\n    #ifdef HAS_TEXTURE_MASK\n        col.a*=mask;\n    #endif\n\n    #ifdef HAS_TEXTURE_OPACITY\n        col.a*=opacity;\n    #endif\n\n    #ifdef VERTEX_COLORS\n        col.rgb = vertexColor.rgb;\n        col.a *= vertexColor.a;\n    #endif\n\n    if (col.a <= 0.0) discard;\n\n    #ifdef HAS_TEXTURE_COLORIZE\n        col*=colorize;\n    #endif\n\n    outColor = col;\n}\n",pointmat_vert:"{{MODULES_HEAD}}\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN vec3 attrTangent;\nIN vec3 attrBiTangent;\n\n#ifdef VERTEX_COLORS\n    IN vec4 attrVertColor;\n    OUT vec4 vertexColor;\n#endif\n\nOUT vec3 norm;\nOUT float ps;\n\nOUT vec2 texCoord;\n\n\n#ifdef HAS_TEXTURES\n#endif\n\n#ifdef HAS_TEXTURE_COLORIZE\n   UNI sampler2D texColorize;\n   OUT vec4 colorize;\n#endif\n#ifdef HAS_TEXTURE_OPACITY\n    UNI sampler2D texOpacity;\n    OUT float opacity;\n#endif\n\n#ifdef HAS_TEXTURE_POINTSIZE\n   UNI sampler2D texPointSize;\n   UNI float texPointSizeMul;\n#endif\n\nUNI mat4 projMatrix;\nUNI mat4 modelMatrix;\nUNI mat4 viewMatrix;\n\nUNI float pointSize;\nUNI vec3 camPos;\n\nUNI float canvasWidth;\nUNI float canvasHeight;\nUNI float camDistMul;\nUNI float randomSize;\n\nIN float attrVertIndex;\n\n\n\nfloat rand(float n){return fract(sin(n) * 5711.5711123);}\n\n#define POINTMATERIAL\n\nvoid main()\n{\n    norm=attrVertNormal;\n    #ifdef PIXELSIZE\n        float psMul=1.0;\n    #endif\n\n    #ifndef PIXELSIZE\n        float psMul=sqrt(canvasWidth/canvasHeight)+0.00000000001;\n    #endif\n\n    // float sizeMultiply=1.0;\n\n    vec3 tangent=attrTangent;\n    vec3 bitangent=attrBiTangent;\n\n\n    #ifdef VERTEX_COLORS\n        vertexColor=attrVertColor;\n    #endif\n\n    // #ifdef HAS_TEXTURES\n        texCoord=attrTexCoord;\n    // #endif\n\n    #ifdef HAS_TEXTURE_OPACITY\n        // opacity=texture(texOpacity,vec2(rand(attrVertIndex+texCoord.x*texCoord.y+texCoord.y+texCoord.x),rand(texCoord.y*texCoord.x-texCoord.x-texCoord.y-attrVertIndex))).r;\n        opacity=texture(texOpacity,texCoord).r;\n    #endif\n\n\n    #ifdef HAS_TEXTURE_COLORIZE\n        #ifdef RANDOM_COLORIZE\n            colorize=texture(texColorize,vec2(rand(attrVertIndex+texCoord.x*texCoord.y+texCoord.y+texCoord.x),rand(texCoord.y*texCoord.x-texCoord.x-texCoord.y-attrVertIndex)));\n        #endif\n        #ifndef RANDOM_COLORIZE\n            colorize=texture(texColorize,texCoord);\n        #endif\n    #endif\n\n\n\n\n\n    mat4 mMatrix=modelMatrix;\n    vec4 pos = vec4( vPosition, 1. );\n\n    gl_PointSize=0.0;\n\n    {{MODULE_VERTEX_POSITION}}\n\n    vec4 model=mMatrix * pos;\n\n    psMul+=rand(texCoord.x*texCoord.y+texCoord.y*3.0+texCoord.x*2.0+attrVertIndex)*randomSize;\n    // psMul*=sizeMultiply;\n\n    float addPointSize=0.0;\n    #ifdef HAS_TEXTURE_POINTSIZE\n\n        #ifdef POINTSIZE_CHAN_R\n            addPointSize=texture(texPointSize,texCoord).r;\n        #endif\n        #ifdef POINTSIZE_CHAN_G\n            addPointSize=texture(texPointSize,texCoord).g;\n        #endif\n        #ifdef POINTSIZE_CHAN_B\n            addPointSize=texture(texPointSize,texCoord).b;\n        #endif\n\n\n        #ifdef DOTSIZEREMAPABS\n            // addPointSize=(( (texture(texPointSize,texCoord).r) * texPointSizeMul)-0.5)*2.0;\n\n            addPointSize=1.0-(distance(addPointSize,0.5)*2.0);\n            // addPointSize=abs(1.0-(distance(addPointSize,0.5)*2.0));\n            addPointSize=addPointSize*addPointSize*addPointSize*2.0;\n\n            // addPointSize=(( (texture(texPointSize,texCoord).r) * texPointSizeMul)-0.5)*2.0;\n        #endif\n\n        addPointSize*=texPointSizeMul;\n\n    #endif\n\n    ps=0.0;\n    #ifndef SCALE_BY_DISTANCE\n        ps = (pointSize+addPointSize) * psMul;\n    #endif\n    #ifdef SCALE_BY_DISTANCE\n        float cameraDist = distance(model.xyz, camPos);\n        ps = ( (pointSize+addPointSize) / cameraDist) * psMul;\n    #endif\n\n    gl_PointSize += ps;\n\n\n    gl_Position = projMatrix * viewMatrix * model;\n}\n"};const n=e.patch.cgl;const a=e.inTrigger("render"),r=e.inValueFloat("PointSize",3),o=e.inBool("Size in Pixels",false),i=e.inValue("Random Size",0),s=e.inValueBool("Round",true),l=e.inValueBool("Round Antialias",false),u=e.inValueBool("Scale by Distance",false),c=e.inValueSlider("r",Math.random()),m=e.inValueSlider("g",Math.random()),_=e.inValueSlider("b",Math.random()),d=e.inValueSlider("a",1),p=e.inBool("Vertex Colors",false),v=e.inTexture("texture"),f=e.inBool("Colorize Texture"),g=e.inTexture("Texture Mask"),h=e.inSwitch("Mask Channel",["R","A","Luminance"],"R"),b=e.inTexture("Texture Colorize"),x=e.inValueBool("Colorize Randomize",true),O=e.inTexture("Texture Opacity"),I=e.inTexture("Texture Point Size"),T=e.inSwitch("Point Size Channel",["R","G","B"],"R"),y=e.inFloat("Texture Point Size Mul",1),S=e.inSwitch("Map Size 0",["Black","Grey"],"Black"),A=e.inValueBool("Flip Texture",false),M=e.outTrigger("trigger"),C=e.outObject("shader",null,"shader");e.setPortGroup("Texture",[v,f,g,h,b,O,x]);e.setPortGroup("Color",[c,m,_,d,p]);e.setPortGroup("Size",[r,i,s,l,u,o,I,y,T,S]);c.setUiAttribs({colorPick:true});const E=new CGL.Shader(n,"PointMaterial");E.setModules(["MODULE_VERTEX_POSITION","MODULE_COLOR","MODULE_BEGIN_FRAG"]);E.define("MAKE_ROUND");const N=new CGL.Uniform(E,"f","pointSize",r),P=new CGL.Uniform(E,"f","texPointSizeMul",y),j=new CGL.Uniform(E,"f","randomSize",i),R=new CGL.Uniform(E,"4f","color",c,m,_,d),D=new CGL.Uniform(E,"f","canvasWidth",n.canvasWidth),w=new CGL.Uniform(E,"f","canvasHeight",n.canvasHeight),L=new CGL.Uniform(E,"t","diffTex"),G=new CGL.Uniform(E,"t","texColorize"),k=new CGL.Uniform(E,"t","texOpacity"),U=new CGL.Uniform(E,"t","texPointSize"),V=new CGL.Uniform(E,"t","texPointSize"),B=new CGL.Uniform(E,"t","texMask");E.setSource(t.pointmat_vert,t.pointmat_frag);E.glPrimitive=n.gl.POINTS;C.set(E);C.ignoreValueSerialize=true;a.onTriggered=z;u.onChange=s.onChange=l.onChange=v.onChange=b.onChange=g.onChange=x.onChange=A.onChange=h.onChange=o.onChange=O.onChange=I.onChange=S.onChange=T.onChange=f.onChange=p.onChange=X;F();e.preRender=function(){if(E)E.bind();z()};function z(){D.setValue(n.canvasWidth);w.setValue(n.canvasHeight);n.pushShader(E);E.popTextures();if(v.get()&&!v.get().deleted)E.pushTexture(L,v.get());if(g.get())E.pushTexture(B,g.get());if(b.get())E.pushTexture(G,b.get());if(O.get())E.pushTexture(k,O.get());if(I.get())E.pushTexture(V,I.get());M.trigger();n.popShader()}function F(){h.setUiAttribs({greyout:!g.isLinked()});T.setUiAttribs({greyout:!I.isLinked()});y.setUiAttribs({greyout:!I.isLinked()});S.setUiAttribs({greyout:!I.isLinked()})}function X(){E.toggleDefine("SCALE_BY_DISTANCE",u.get());E.toggleDefine("MAKE_ROUND",s.get());E.toggleDefine("MAKE_ROUNDAA",l.get());E.toggleDefine("VERTEX_COLORS",p.get());E.toggleDefine("RANDOM_COLORIZE",x.get());E.toggleDefine("HAS_TEXTURE_DIFFUSE",v.get());E.toggleDefine("HAS_TEXTURE_MASK",g.get());E.toggleDefine("HAS_TEXTURE_COLORIZE",b.get());E.toggleDefine("HAS_TEXTURE_OPACITY",O.get());E.toggleDefine("HAS_TEXTURE_POINTSIZE",I.get());E.toggleDefine("TEXTURE_COLORIZE_MUL",f.get());E.toggleDefine("FLIP_TEX",A.get());E.toggleDefine("TEXTURE_MASK_R",h.get()=="R");E.toggleDefine("TEXTURE_MASK_A",h.get()=="A");E.toggleDefine("TEXTURE_MASK_LUMI",h.get()=="Luminance");E.toggleDefine("PIXELSIZE",o.get());E.toggleDefine("POINTSIZE_CHAN_R",T.get()=="R");E.toggleDefine("POINTSIZE_CHAN_G",T.get()=="G");E.toggleDefine("POINTSIZE_CHAN_B",T.get()=="B");E.toggleDefine("DOTSIZEREMAPABS",S.get()=="Grey");F()}};Ops.Gl.Shader.PointMaterial_v4.prototype=new CABLES.Op;CABLES.OPS["a7cb5d1c-cd4a-4c28-bb13-7bb9bda187ed"]={f:Ops.Gl.Shader.PointMaterial_v4,objName:"Ops.Gl.Shader.PointMaterial_v4"};Ops.Gl.TextureToPointArray3=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const _=e.patch.cgl,n=e.inTrigger("update"),d=e.inBool("Center",true),p=e.inFloatSlider("Threshold Remove",0),v=e.inFloat("Z Multiply",1),f=e.inObject("texture"),g=e.inFloat("Width",2),h=e.inFloat("Height",2),b=e.outTrigger("trigger"),x=e.outArray("Points"),O=e.outNumber("Total Points"),I=e.outNumber("Min Z"),T=e.outNumber("Max Z");e.setPortGroup("Size",[g,h]);var y=null,S=null,A=null,M=false;f.onChange=function(){M=true};e.toWorkPortsNeedToBeLinked(f,x);var a=false;var C=e.patch.cgl.gl.UNSIGNED_BYTE;n.onTriggered=function(){var n=f.get(),e=_.gl;if(!n){x.set(null);T.set(0);O.set(0);return}if(!y)y=e.createFramebuffer();if(!A)A=[];e.bindFramebuffer(e.FRAMEBUFFER,y);if(M){e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n.tex,0);C=e.UNSIGNED_BYTE;const t=n.width*n.height*4;S=new Uint8Array(t);M=false}e.bindFramebuffer(e.FRAMEBUFFER,y);e.readPixels(0,0,n.width,n.height,e.RGBA,C,S);e.bindFramebuffer(e.FRAMEBUFFER,null);A.length=0;let a=0;let r=0;let o=g.get();let i=h.get();const s=p.get()*256;const l=v.get()/256;let u=0;let c=99999999;if(d.get()){a=n.width/2;r=n.height/2}for(let t=0;t<n.width;t++){for(let e=0;e<n.height;e++){if(S[(t+e*n.width)*4+0]>=s||S[(t+e*n.width)*4+1]>=s||S[(t+e*n.width)*4+2]>=s){const m=S[(t+e*n.width)*4+0]*l;A.push((t-a)/n.width*o,(e-r)/n.height*i,m);u=Math.max(m,u);c=Math.min(m,c)}}}I.set(c);T.set(u);x.set(null);O.set(A.length/3);x.set(A);e.bindFramebuffer(e.FRAMEBUFFER,null);b.trigger()}};Ops.Gl.TextureToPointArray3.prototype=new CABLES.Op;CABLES.OPS["93f03721-4b1e-4dee-aef9-7ef17c9cd6c1"]={f:Ops.Gl.TextureToPointArray3,objName:"Ops.Gl.TextureToPointArray3"};Ops.Gl.Textures.TextureToCoordinateGrid=function(){CABLES.Op.apply(this,arguments);const e=this;const t={rgbe2fp_frag:"UNI sampler2D tex;\nIN vec2 texCoord;\nUNI float aspect;\nUNI float threshold;\n\nvoid main()\n{\n    vec4 col=texture(tex,texCoord);\n    vec4 outCol=vec4(111111110.0);\n\n    if(col.r>threshold)\n    {\n        outCol=vec4(vec2((texCoord.x-0.5)*aspect,texCoord.y-0.5),0.0,1.0);\n        // outCol=vec4(texCoord,0.0,1.0);\n    }\n\n\n    outColor = outCol;\n}"};const n=e.inTrigger("Execute"),a=e.inTexture("RGBE Texture"),r=e.inFloat("Aspect",1),o=e.inFloatSlider("Threshold",.2),i=e.outTrigger("Next"),s=e.outTexture("HDR Texture");const l=new CGL.CopyTexture(e.patch.cgl,"rgbe2hdr",{shader:t.rgbe2fp_frag,isFloatingPointTexture:true});const u=new CGL.Uniform(l.bgShader,"f","aspect",r);const c=new CGL.Uniform(l.bgShader,"f","threshold",o);n.onTriggered=()=>{if(!a.get())return;s.set(CGL.Texture.getEmptyTexture(e.patch.cgl));s.set(l.copy(a.get()));i.trigger()}};Ops.Gl.Textures.TextureToCoordinateGrid.prototype=new CABLES.Op;CABLES.OPS["91f30465-4a4c-4447-9b16-072252f0a977"]={f:Ops.Gl.Textures.TextureToCoordinateGrid,objName:"Ops.Gl.Textures.TextureToCoordinateGrid"};Ops.Gl.TextureEffects.ChromaticAberration=function(){CABLES.Op.apply(this,arguments);const t=this;const e={chromatic_frag:"\nIN vec2 texCoord;\nUNI sampler2D tex;\nUNI float pixel;\nUNI float onePixel;\nUNI float amount;\nUNI float lensDistort;\n\n#ifdef MASK\nUNI sampler2D texMask;\n#endif\n\n{{CGL.BLENDMODES}}\n\nvoid main()\n{\n   vec4 base=texture(tex,texCoord);\n   vec4 col=texture(tex,texCoord);\n\n   vec2 tc=texCoord;;\n   float pix = pixel;\n   if(lensDistort>0.0)\n   {\n       float dist = distance(texCoord, vec2(0.5,0.5));\n       tc-=0.5;\n       tc *=smoothstep(-0.9,1.0*lensDistort,1.0-dist);\n       tc+=0.5;\n   }\n\n    #ifdef MASK\n        vec4 m=texture(texMask,texCoord);\n        pix*=m.r*m.a;\n    #endif\n\n    #ifdef SMOOTH\n    #ifdef WEBGL2\n        float numSamples=round(pix/onePixel/4.0+1.0);\n        col.r=0.0;\n        col.b=0.0;\n\n        for(float off=0.0;off<numSamples;off++)\n        {\n            float diff=(pix/numSamples)*off;\n            col.r+=texture(tex,vec2(tc.x+diff,tc.y)).r/numSamples;\n            col.b+=texture(tex,vec2(tc.x-diff,tc.y)).b/numSamples;\n        }\n    #endif\n    #endif\n\n    #ifndef SMOOTH\n        col.r=texture(tex,vec2(tc.x+pix,tc.y)).r;\n        col.b=texture(tex,vec2(tc.x-pix,tc.y)).b;\n    #endif\n\n//   outColor = col;\n   outColor= cgl_blend(base,col,amount);\n\n}\n"};const n=t.inTrigger("render"),a=CGL.TextureEffect.AddBlendSelect(t,"Blend Mode","normal"),r=t.inValueSlider("Amount",1),o=t.inValue("Pixel",5),i=t.inValueSlider("Lens Distort",0),s=t.inValueBool("Smooth",false),l=t.inTexture("Mask"),u=t.outTrigger("trigger");const c=t.patch.cgl;const m=new CGL.Shader(c,"chromatic");CGL.TextureEffect.setupBlending(t,m,a,r);m.setSource(m.getDefaultVertexShader(),e.chromatic_frag);const _=new CGL.Uniform(m,"t","tex",0),d=new CGL.Uniform(m,"f","pixel",0),p=new CGL.Uniform(m,"f","onePixel",0),v=new CGL.Uniform(m,"t","texMask",1),f=new CGL.Uniform(m,"f","amount",r),g=new CGL.Uniform(m,"f","lensDistort",i);s.onChange=function(){if(s.get())m.define("SMOOTH");else m.removeDefine("SMOOTH")};l.onChange=function(){if(l.get())m.define("MASK");else m.removeDefine("MASK")};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(t))return;var e=c.currentTextureEffect.getCurrentSourceTexture();d.setValue(o.get()*(1/e.width));p.setValue(1/e.width);c.pushShader(m);c.currentTextureEffect.bind();c.setTexture(0,e.tex);if(l.get())c.setTexture(1,l.get().tex);c.currentTextureEffect.finish();c.popShader();u.trigger()}};Ops.Gl.TextureEffects.ChromaticAberration.prototype=new CABLES.Op;CABLES.OPS["38ac43a1-1757-48f4-9450-29f07ac0d376"]={f:Ops.Gl.TextureEffects.ChromaticAberration,objName:"Ops.Gl.TextureEffects.ChromaticAberration"};Ops.Ui.PatchInput=function(){CABLES.Op.apply(this,arguments);const r=this;const e={};const o=r.addOutPort(new CABLES.Port(r,"create port",CABLES.OP_PORT_TYPE_DYNAMIC));function i(){for(let e in r.patch.ops){if(r.patch.ops[e].patchId){if(r.patch.ops[e].patchId.get()==r.uiAttribs.subPatch){return r.patch.ops[e]}}}}o.onLinkChanged=()=>{const e=i();if(!o.links.length)return;const t=o.links[0].getOtherPort(o);o.removeLinks();const n=e.addNewInPort(t);const a=gui.scene().link(t.parent,t.getName(),r,n);e.saveData()}};Ops.Ui.PatchInput.prototype=new CABLES.Op;CABLES.OPS["e3f68bc3-892a-4c78-9974-aca25c27025d"]={f:Ops.Ui.PatchInput,objName:"Ops.Ui.PatchInput"};Ops.Ui.PatchOutput=function(){CABLES.Op.apply(this,arguments);const r=this;const e={};const o=r.addInPort(new CABLES.Port(r,"create port",CABLES.OP_PORT_TYPE_DYNAMIC));function i(){for(let e in r.patch.ops){if(r.patch.ops[e].patchId){if(r.patch.ops[e].patchId.get()==r.uiAttribs.subPatch){return r.patch.ops[e]}}}}o.onLinkChanged=()=>{const e=i();if(!o.links.length)return;const t=o.links[0].getOtherPort(o);o.removeLinks();const n=e.addNewOutPort(t);const a=gui.scene().link(t.parent,t.getName(),r,n);e.saveData()}};Ops.Ui.PatchOutput.prototype=new CABLES.Op;CABLES.OPS["851b44cb-5667-4140-9800-5aeb7031f1d7"]={f:Ops.Ui.PatchOutput,objName:"Ops.Ui.PatchOutput"};Ops.Ui.SubPatch=function(){CABLES.Op.apply(this,arguments);const u=this;const e={};u.dyn=u.addInPort(new CABLES.Port(u,"create port",CABLES.OP_PORT_TYPE_DYNAMIC));u.dynOut=u.addOutPort(new CABLES.Port(u,"create port out",CABLES.OP_PORT_TYPE_DYNAMIC));const t=u.addInPort(new CABLES.Port(u,"dataStr",CABLES.OP_PORT_TYPE_VALUE,{display:"readonly"}));u.patchId=u.addInPort(new CABLES.Port(u,"patchId",CABLES.OP_PORT_TYPE_VALUE,{display:"readonly"}));if(CABLES.UI&&CABLES.sandbox.isDevEnv()){const s=u.inTriggerButton("Create Blueprint");s.setUiAttribs({hidePort:true});s.onTriggered=r}t.setUiAttribs({hideParam:true});u.patchId.setUiAttribs({hideParam:true});let c={ports:[],portsOut:[]};u.patchId.onChange=function(){const t=u.patch.getSubPatchOps(n);if(t.length==2){for(let e=0;e<t.length;e++){u.patch.deleteOp(t[e].id)}}else{}};var n=CABLES.generateUUID();u.patchId.set(n);u.onLoaded=function(){};u.onLoadedValueSet=function(){c=JSON.parse(t.get());if(!c){c={ports:[],portsOut:[]}}i()};function a(){}p();d();let m=false;t.onChange=function(){if(m)return;if(!t.get())return;try{a()}catch(e){u.logError("cannot load subpatch data...");u.logError(e)}};function o(){t.set(JSON.stringify(c))}u.saveData=o;function _(n,e){n.addEventListener("onUiAttrChange",function(t){if(t.title){let e=0;for(e=0;e<c.portsOut.length;e++)if(c.portsOut[e].name==n.name)c.portsOut[e].title=t.title;for(e=0;e<c.ports.length;e++)if(c.ports[e].name==n.name)c.ports[e].title=t.title;o()}});if(n.direction==CABLES.PORT_DIR_IN){if(n.type==CABLES.OP_PORT_TYPE_FUNCTION){n.onTriggered=function(){if(e.isLinked())e.trigger()}}else{n.onChange=function(){e.set(n.get())}}}}function i(){if(!u.patchId.get())return;const e=c.ports||[];const t=c.portsOut||[];let n=0;for(n=0;n<e.length;n++){if(!u.getPortByName(e[n].name)){const a=u.addInPort(new CABLES.Port(u,e[n].name,e[n].type));const r=p();const o=r.addOutPort(new CABLES.Port(r,e[n].name,e[n].type));a.ignoreValueSerialize=true;a.setUiAttribs({editableTitle:true});if(e[n].title){a.setUiAttribs({title:e[n].title});o.setUiAttribs({title:e[n].title})}if(e[n].objType){a.setUiAttribs({objType:e[n].objType});o.setUiAttribs({objType:e[n].objType})}_(a,o)}}for(n=0;n<t.length;n++){if(!u.getPortByName(t[n].name)){const i=u.addOutPort(new CABLES.Port(u,t[n].name,t[n].type));const s=d();const l=s.addInPort(new CABLES.Port(s,t[n].name,t[n].type));i.ignoreValueSerialize=true;i.setUiAttribs({editableTitle:true});if(t[n].title){i.setUiAttribs({title:t[n].title});l.setUiAttribs({title:t[n].title})}if(t[n].objType){i.setUiAttribs({objType:t[n].objType});l.setUiAttribs({objType:t[n].objType})}_(l,i)}}m=true}u.addNewInPort=function(e,t,n){const a="in"+c.ports.length+" "+e.parent.name+" "+e.name;const r={name:a,type:e.type};if(e.uiAttribs.objType)r.objType=e.uiAttribs.objType;c.ports.push(r);i();return a};u.dyn.onLinkChanged=function(){if(u.dyn.isLinked()){const e=u.dyn.links[0].getOtherPort(u.dyn);u.dyn.removeLinks();e.removeLinkTo(u.dyn);u.log("dyn link changed!!!");const t=u.addNewInPort(e);const n=gui.scene().link(e.parent,e.getName(),u,t);m=true;o()}else{setTimeout(function(){u.dyn.removeLinks()},100)}};u.addNewOutPort=function(e,t,n){const a="out"+c.portsOut.length+" "+e.parent.name+" "+e.name;const r={name:a,type:e.type};if(e.uiAttribs.objType)r.objType=e.uiAttribs.objType;c.portsOut.push(r);i();return a};u.dynOut.onLinkChanged=function(){if(u.dynOut.isLinked()){const e=u.dynOut.links[0].getOtherPort(u.dynOut);u.dynOut.removeLinks();e.removeLinkTo(u.dynOut);const t=u.addNewOutPort(e);gui.scene().link(e.parent,e.getName(),u,t);m=true;o()}else{setTimeout(function(){u.dynOut.removeLinks()},100);u.log("dynOut unlinked...")}};function d(){let e=u.patch.getSubPatchOp(u.patchId.get(),"Ops.Ui.PatchOutput");if(!e){u.patch.addOp("Ops.Ui.PatchOutput",{subPatch:u.patchId.get()});e=u.patch.getSubPatchOp(u.patchId.get(),"Ops.Ui.PatchOutput");if(!e)u.warn("no patchinput2!")}return e}function p(){let e=u.patch.getSubPatchOp(u.patchId.get(),"Ops.Ui.PatchInput");if(!e){u.patch.addOp("Ops.Ui.PatchInput",{subPatch:u.patchId.get()});e=u.patch.getSubPatchOp(u.patchId.get(),"Ops.Ui.PatchInput");if(!e)u.warn("no patchinput2!")}return e}u.addSubLink=function(e,t){const n=c.ports.length;const a="in"+(n-1)+" "+t.parent.name+" "+t.name;if(e.direction==CABLES.PORT_DIR_IN){gui.scene().link(e.parent,e.getName(),p(),a)}else{gui.scene().link(e.parent,e.getName(),d(),"out"+n+" "+t.parent.name+" "+t.name)}const r=gui.patchView.getSubPatchBounds(u.patchId.get());u.log("subpatchbounds",r);p().uiAttr({translate:{x:r.minx,y:r.miny-100}});d().uiAttr({translate:{x:r.minx,y:r.maxy+100}});o();return a};u.onDelete=function(){for(let e=u.patch.ops.length-1;e>=0;e--){if(u.patch.ops[e]&&u.patch.ops[e].uiAttribs&&u.patch.ops[e].uiAttribs.subPatch==u.patchId.get()){u.patch.deleteOp(u.patch.ops[e].id)}}};function r(){const e=u.patch.addOp(CABLES.UI.DEFAULTOPNAMES.blueprint);e.getPortByName("externalPatchId").set(gui.patchId);e.getPortByName("subPatchId").set(u.patchId.get());e.getPortByName("active").set(true);e.uiAttr({translate:{x:u.uiAttribs.translate.x-150,y:u.uiAttribs.translate.y}})}};Ops.Ui.SubPatch.prototype=new CABLES.Op;CABLES.OPS["84d9a6f0-ed7a-466d-b386-225ed9e89c60"]={f:Ops.Ui.SubPatch,objName:"Ops.Ui.SubPatch"};Ops.Value.ToggleNumber=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValueBool("Use Value 1",false),a=e.inValue("Value 0",0),r=e.inValue("Value 1",1),o=e.outNumber("Out Value",0);a.onChange=r.onChange=n.onChange=i;function i(){const e=n.get();if(e){o.set(r.get())}else{o.set(a.get())}}};Ops.Value.ToggleNumber.prototype=new CABLES.Op;CABLES.OPS["400eea7d-5a68-4dda-a94d-2bb2ee7c2331"]={f:Ops.Value.ToggleNumber,objName:"Ops.Value.ToggleNumber"};Ops.Math.Clamp=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValueFloat("val",.5);const a=e.inValueFloat("min",0);const r=e.inValueFloat("max",1);const o=e.inValueBool("ignore outside values");const i=e.outValue("result");n.onChange=a.onChange=r.onChange=s;function s(){if(o.get()){if(n.get()>r.get())return;if(n.get()<a.get())return}i.set(Math.min(Math.max(n.get(),a.get()),r.get()))}};Ops.Math.Clamp.prototype=new CABLES.Op;CABLES.OPS["cda1a98e-5e16-40bd-9b18-a67e9eaad5a1"]={f:Ops.Math.Clamp,objName:"Ops.Math.Clamp"};Ops.Boolean.IsOne=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValue("Value"),a=e.outValue("Result",false);n.onChange=function(){a.set(n.get()==1)}};Ops.Boolean.IsOne.prototype=new CABLES.Op;CABLES.OPS["695d35e2-ffe6-498d-9242-12dc4bcb3c2d"]={f:Ops.Boolean.IsOne,objName:"Ops.Boolean.IsOne"};Ops.Gl.Matrix.OrbitControls=function(){CABLES.Op.apply(this,arguments);const t=this;const e={};const n=t.inTrigger("render"),o=t.inValueFloat("min distance"),i=t.inValueFloat("max distance"),a=t.inValue("min rot y",0),r=t.inValue("max rot y",0),s=t.inValue("initial radius",0),l=t.inValueSlider("initial axis y"),u=t.inValueSlider("initial axis x"),c=t.inValueFloat("mul"),m=t.inValueSlider("Smoothness",1),_=t.inValue("Speed X",1),d=t.inValue("Speed Y",1),p=t.inValueBool("Active",true),v=t.inValueBool("Allow Panning",true),f=t.inValueBool("Allow Zooming",true),g=t.inValueBool("Allow Rotation",true),h=t.inValueBool("restricted",true),b=t.outTrigger("trigger"),x=t.outValue("radius"),O=t.outValue("Rot X"),I=t.outValue("Rot Y"),T=t.inTriggerButton("Reset");t.setPortGroup("Initial Values",[l,u,s]);t.setPortGroup("Interaction",[c,m,_,d]);t.setPortGroup("Boundaries",[a,r,o,i]);c.set(1);o.set(.05);i.set(99999);T.onTriggered=q;const y=t.patch.cgl;let S=vec3.create();const A=vec3.create();const M=vec3.create();const C=mat4.create();const E=mat4.create();const N=vec3.create();const P=vec3.create();l.set(.5);let j=false;let R=5;x.set(R);let D=0,w=0;let L=0,G=0;vec3.set(M,0,0,0);vec3.set(A,0,1,0);const k=vec3.create();const U=vec3.create();const V=vec3.create();const B=vec3.create();let z=0;let F=0;let X=1;let Y=null;K();t.onDelete=de;const H=Math.PI;const W=Math.PI*2;function q(){let e=0;if(z%W<-H){e=-W;z%=-W}else if(z%W>H){e=W;z%=W}else z%=W;F%=Math.PI;vec3.set(N,0,0,0);vec3.set(M,0,0,0);vec3.set(A,0,1,0);L=u.get()*Math.PI*2+e;G=l.get()-.5;R=s.get();S=te(G)}function K(){X=m.get()*10+1}m.onChange=K;let Z=true;function Q(e,t){if(Z)return t;return e+(t-e)/X}let J=0;const $=0;n.onTriggered=function(){y.pushViewMatrix();z=Q(z,L);F=Q(F,G);let e=(F+.5)*180;if(a.get()!==0&&e<a.get()){e=a.get();F=J}else if(r.get()!==0&&e>r.get()){e=r.get();F=J}else{J=F}const t=z*CGL.RAD2DEG;I.set(e);O.set(t);ee(S,F);vec3.add(k,S,N);vec3.add(V,M,N);U[0]=Q(U[0],k[0]);U[1]=Q(U[1],k[1]);U[2]=Q(U[2],k[2]);B[0]=Q(B[0],V[0]);B[1]=Q(B[1],V[1]);B[2]=Q(B[2],V[2]);const n=vec3.create();mat4.lookAt(C,U,B,A);mat4.rotate(C,C,z,A);mat4.multiply(y.vMatrix,y.vMatrix,C);b.trigger();y.popViewMatrix();Z=false};function ee(e,t){const n=c.get();if(R<o.get()*n)R=o.get()*n;if(R>i.get()*n)R=i.get()*n;x.set(R*n);let a=0,r=0;r=360*t/2*CGL.DEG2RAD;vec3.set(e,Math.cos(r)*R*n,Math.sin(r)*R*n,0);return e}function te(e){const t=c.get();if(R<o.get()*t)R=o.get()*t;if(R>i.get()*t)R=i.get()*t;x.set(R*t);let n=0,a=0;const r=vec3.create();a=360*e/2*CGL.DEG2RAD;vec3.set(r,Math.cos(a)*R*t,Math.sin(a)*R*t,0);return r}function ne(e){if(!j)return;const t=e.clientX;const n=e.clientY;let a=t-D;let r=n-w;a*=_.get();r*=d.get();if(e.buttons==2&&v.get()){N[2]+=a*.01*c.get();N[1]+=r*.01*c.get()}else if(e.buttons==4&&f.get()){R+=r*.05;S=te(G)}else{if(g.get()){L+=a*.003;G+=r*.002;if(h.get()){if(G>.5)G=.5;if(G<-.5)G=-.5}}}D=t;w=n}function ae(e){D=e.clientX;w=e.clientY;j=true;try{Y.setPointerCapture(e.pointerId)}catch(e){}}function re(e){j=false;try{Y.releasePointerCapture(e.pointerId)}catch(e){}}function oe(){const e=t.patch.cgl.canvas;if(document.pointerLockElement===e||document.mozPointerLockElement===e||document.webkitPointerLockElement===e){document.addEventListener("mousemove",ne,false)}}function ie(e){}s.onChange=function(){R=s.get();q()};u.onChange=function(){z=L=u.get()*Math.PI*2};l.onChange=function(){F=G=l.get()-.5;S=te(G)};const se=function(e){if(f.get()){const t=CGL.getWheelSpeed(e)*.06;R+=parseFloat(t)*1.2;S=te(G)}};const le=function(e){if(e.touches&&e.touches.length>0)ae(e.touches[0])};const ue=function(e){re()};const ce=function(e){if(e.touches&&e.touches.length>0)ne(e.touches[0])};p.onChange=function(){if(p.get())_e();else de()};function me(e){de();Y=e;_e()}function _e(){Y.addEventListener("pointermove",ne);Y.addEventListener("pointerdown",ae);Y.addEventListener("pointerup",re);Y.addEventListener("pointerleave",re);Y.addEventListener("pointerenter",ie);Y.addEventListener("contextmenu",function(e){e.preventDefault()});Y.addEventListener("wheel",se,{passive:true})}function de(){if(!Y)return;Y.removeEventListener("pointermove",ne);Y.removeEventListener("pointerdown",ae);Y.removeEventListener("pointerup",re);Y.removeEventListener("pointerleave",re);Y.removeEventListener("pointerenter",re);Y.removeEventListener("wheel",se)}S=te(0);me(y.canvas);_e();u.set(.25);s.set(.05)};Ops.Gl.Matrix.OrbitControls.prototype=new CABLES.Op;CABLES.OPS["eaf4f7ce-08a3-4d1b-b9f4-ebc0b7b1cde1"]={f:Ops.Gl.Matrix.OrbitControls,objName:"Ops.Gl.Matrix.OrbitControls"};Ops.Array.ArrayMath=function(){CABLES.Op.apply(this,arguments);const t=this;const e={};const a=t.inArray("array 0"),r=t.inValueFloat("Number for math",0),n=t.inSwitch("Math function",["+","-","*","/","%","min","max"],"+"),o=t.outArray("Array result"),i=t.outNumber("Array length");var s;var l=false;var u=[];a.onChange=r.onChange=m;n.onChange=c;c();function c(){var e=n.get();if(e==="+")s=function(e,t){return e+t};else if(e==="-")s=function(e,t){return e-t};else if(e==="*")s=function(e,t){return e*t};else if(e==="/")s=function(e,t){return e/t};else if(e==="%")s=function(e,t){return e%t};else if(e==="min")s=function(e,t){return Math.min(e,t)};else if(e==="max")s=function(e,t){return Math.max(e,t)};m();t.setUiAttrib({extendTitle:e})}function m(){var e=a.get();u.length=0;if(!e){i.set(0);o.set(null);return}var t=r.get();u.length=e.length;var n=0;for(n=0;n<e.length;n++){u[n]=s(e[n],t)}o.set(null);o.set(u);i.set(u.length)}};Ops.Array.ArrayMath.prototype=new CABLES.Op;CABLES.OPS["c7617717-3114-452f-9625-e4fefd841e88"]={f:Ops.Array.ArrayMath,objName:"Ops.Array.ArrayMath"};Ops.Gl.Meshes.Cube_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("Render"),a=e.inValueBool("Render Mesh",true),i=e.inValue("Width",1),s=e.inValue("Length",1),l=e.inValue("Height",1),u=e.inValueBool("Center",true),c=e.inSwitch("Mapping",["Side","Cube +-"],"Side"),_=e.inValue("Bias",0),d=e.inValueBool("Flip X",true),m=e.inValueBool("Top",true),p=e.inValueBool("Bottom",true),v=e.inValueBool("Left",true),f=e.inValueBool("Right",true),g=e.inValueBool("Front",true),h=e.inValueBool("Back",true),r=e.outTrigger("Next"),b=e.outObject("geometry",null,"geometry");const x=e.patch.cgl;e.toWorkPortsNeedToBeLinked(n);e.setPortGroup("Mapping",[c,_,d]);e.setPortGroup("Geometry",[i,l,s,u]);e.setPortGroup("Sides",[m,p,v,f,g,h]);let O=null,I=null,T=true,y=true;_.onChange=d.onChange=m.onChange=p.onChange=v.onChange=f.onChange=g.onChange=h.onChange=c.onChange=i.onChange=l.onChange=s.onChange=u.onChange=o;function o(){y=true}n.onLinkChanged=function(){if(!n.isLinked()){b.set(null);return}S()};n.onTriggered=function(){if(y)S();if(a.get()&&I&&T)I.render(x.getShader());r.trigger()};e.preRender=function(){S();I.render(x.getShader())};function S(){if(!O)O=new CGL.Geometry("cubemesh");O.clear();let e=i.get();let t=-1*i.get();let n=l.get();let a=-1*l.get();let r=s.get();let o=-1*s.get();if(!u.get()){t=0;a=0;o=0}else{e*=.5;t*=.5;n*=.5;a*=.5;r*=.5;o*=.5}if(c.get()=="Side")A(O,e,n,r,t,a,o);else M(O,e,n,r,t,a,o);O.verticesIndices=[];if(m.get())O.verticesIndices.push(8,9,10,8,10,11);if(p.get())O.verticesIndices.push(12,13,14,12,14,15);if(v.get())O.verticesIndices.push(20,21,22,20,22,23);if(f.get())O.verticesIndices.push(16,17,18,16,18,19);if(h.get())O.verticesIndices.push(4,5,6,4,6,7);if(g.get())O.verticesIndices.push(0,1,2,0,2,3);if(O.verticesIndices.length===0)T=false;else T=true;if(I)I.dispose();I=new CGL.Mesh(x,O);b.set(null);b.set(O);y=false}e.onDelete=function(){if(I)I.dispose()};function A(e,t,n,a,r,o,i){e.vertices=[r,o,a,t,o,a,t,n,a,r,n,a,r,o,i,r,n,i,t,n,i,t,o,i,r,n,i,r,n,a,t,n,a,t,n,i,r,o,i,t,o,i,t,o,a,r,o,a,t,o,i,t,n,i,t,n,a,t,o,a,r,o,i,r,o,a,r,n,a,r,n,i];const s=_.get();let l=1;let u=0;if(d.get()){l=0;u=1}e.setTexCoords([u+s,1-s,l-s,1-s,l-s,0+s,u+s,0+s,l-s,1-s,l-s,0+s,u+s,0+s,u+s,1-s,u+s,0+s,u+s,1-s,l-s,1-s,l-s,0+s,l-s,0+s,u+s,0+s,u+s,1-s,l-s,1-s,l-s,1-s,l-s,0+s,u+s,0+s,u+s,1-s,u+s,1-s,l-s,1-s,l-s,0+s,u+s,0+s]);e.vertexNormals=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]);e.tangents=new Float32Array([-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1]);e.biTangents=new Float32Array([0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0])}function M(e,t,n,a,r,o,i){e.vertices=[r,o,a,t,o,a,t,n,a,r,n,a,r,o,i,r,n,i,t,n,i,t,o,i,r,n,i,r,n,a,t,n,a,t,n,i,r,o,i,t,o,i,t,o,a,r,o,a,t,o,i,t,n,i,t,n,a,t,o,a,r,o,i,r,o,a,r,n,a,r,n,i];const s=.25;const l=1/3;const u=_.get();let c=0;if(d.get())c=1;const m=[];m.push(c+s+u,l*2-u,c+s*2-u,l*2-u,c+s*2-u,l+u,c+s+u,l+u,c+s*4-u,l*2-u,c+s*4-u,l+u,c+s*3+u,l+u,c+s*3+u,l*2-u);if(d.get())m.push(s+u,0-u,s*2-u,0-u,s*2-u,l*1+u,s+u,l*1+u,s+u,l*3+u,s+u,l*2-u,s*2-u,l*2-u,s*2-u,l*3+u);else m.push(s+u,0+u,s+u,l*1-u,s*2-u,l*1-u,s*2-u,0+u,s+u,l*3-u,s*2-u,l*3-u,s*2-u,l*2+u,s+u,l*2+u);m.push(c+s*3-u,1-l-u,c+s*3-u,1-l*2+u,c+s*2+u,1-l*2+u,c+s*2+u,1-l-u,c+s*0+u,1-l-u,c+s*1-u,1-l-u,c+s*1-u,1-l*2+u,c+s*0+u,1-l*2+u);e.setTexCoords(m);e.vertexNormals=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0];e.tangents=new Float32Array([-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1]);e.biTangents=new Float32Array([0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0])}};Ops.Gl.Meshes.Cube_v2.prototype=new CABLES.Op;CABLES.OPS["37b92ba4-cea5-42ae-bf28-a513ca28549c"]={f:Ops.Gl.Meshes.Cube_v2,objName:"Ops.Gl.Meshes.Cube_v2"};Ops.Gl.Geometry.TransformGeometry=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const a=e.inObject("Geometry"),r=e.inValue("Translate X"),o=e.inValue("Translate Y"),i=e.inValue("Translate Z"),s=e.inValueSlider("Scale X",1),l=e.inValueSlider("Scale Y",1),u=e.inValueSlider("Scale Z",1),c=e.inValue("Rotation X"),m=e.inValue("Rotation Y"),_=e.inValue("Rotation Z"),d=e.outObject("Result",null,"geometry");r.onChange=o.onChange=i.onChange=s.onChange=l.onChange=u.onChange=c.onChange=m.onChange=_.onChange=a.onChange=g;const p=vec3.create();const n=vec3.create();const v=vec3.create();const f=vec3.create();function g(){const e=a.get();const t=0;if(e){const n=e.copy();for(let e=0;e<n.vertices.length;e+=3){n.vertices[e+0]*=s.get();n.vertices[e+1]*=l.get();n.vertices[e+2]*=u.get();n.vertices[e+0]+=r.get();n.vertices[e+1]+=o.get();n.vertices[e+2]+=i.get()}for(let e=0;e<n.vertices.length;e+=3){vec3.set(p,n.vertices[e+0],n.vertices[e+1],n.vertices[e+2]);vec3.rotateX(p,p,v,c.get()*CGL.DEG2RAD);vec3.rotateY(p,p,v,m.get()*CGL.DEG2RAD);vec3.rotateZ(p,p,v,_.get()*CGL.DEG2RAD);n.vertices[e+0]=p[0];n.vertices[e+1]=p[1];n.vertices[e+2]=p[2]}d.set(null);d.set(n)}else{d.set(null)}}};Ops.Gl.Geometry.TransformGeometry.prototype=new CABLES.Op;CABLES.OPS["9678fee2-5436-499c-b94d-2603cdbeb380"]={f:Ops.Gl.Geometry.TransformGeometry,objName:"Ops.Gl.Geometry.TransformGeometry"};Ops.Gl.TesselateGeometry=function(){CABLES.Op.apply(this,arguments);const c=this;const e={};const n=c.inObject("Geometry");const a=c.inValueInt("Iterations",1);const r=c.outObject("Result");const o=c.outValue("Num Vertices");n.onChange=t;a.onChange=t;function m(e,t,n,a,r,o,i){e.push(t);e.push(n);e.push((t+a)/2);e.push((n+r)/2);e.push((t+o)/2);e.push((n+i)/2);e.push((t+a)/2);e.push((n+r)/2);e.push(a);e.push(r);e.push((a+o)/2);e.push((r+i)/2);e.push((a+o)/2);e.push((r+i)/2);e.push(o);e.push(i);e.push((t+o)/2);e.push((n+i)/2);e.push((t+a)/2);e.push((n+r)/2);e.push((a+o)/2);e.push((r+i)/2);e.push((t+o)/2);e.push((n+i)/2)}function _(e,t,n,a,r,o,i,s,l,u){e.push(t);e.push(n);e.push(a);e.push((t+r)/2);e.push((n+o)/2);e.push((a+i)/2);e.push((t+s)/2);e.push((n+l)/2);e.push((a+u)/2);e.push((t+r)/2);e.push((n+o)/2);e.push((a+i)/2);e.push(r);e.push(o);e.push(i);e.push((r+s)/2);e.push((o+l)/2);e.push((i+u)/2);e.push((r+s)/2);e.push((o+l)/2);e.push((i+u)/2);e.push(s);e.push(l);e.push(u);e.push((t+s)/2);e.push((n+l)/2);e.push((a+u)/2);e.push((t+r)/2);e.push((n+o)/2);e.push((a+i)/2);e.push((r+s)/2);e.push((o+l)/2);e.push((i+u)/2);e.push((t+s)/2);e.push((n+l)/2);e.push((a+u)/2)}function i(e){const t=new CGL.Geometry(c.name);const n=[];const a=[];const r=[];const o=[];const i=[];let s,l,u;if(e.verticesIndices.length>0){for(s=0;s<e.verticesIndices.length;s+=3){for(l=0;l<4;l++)for(u=0;u<3;u++){a.push(e.vertexNormals[e.verticesIndices[s+u]*3+0],e.vertexNormals[e.verticesIndices[s+u]*3+1],e.vertexNormals[e.verticesIndices[s+u]*3+2]);if(e.tangents)o.push(e.tangents[e.verticesIndices[s+u]*3+0],e.tangents[e.verticesIndices[s+u]*3+1],e.tangents[e.verticesIndices[s+u]*3+2]);if(e.biTangents)r.push(e.biTangents[e.verticesIndices[s+u]*3+0],e.biTangents[e.verticesIndices[s+u]*3+1],e.biTangents[e.verticesIndices[s+u]*3+2])}_(n,e.vertices[e.verticesIndices[s+0]*3+0],e.vertices[e.verticesIndices[s+0]*3+1],e.vertices[e.verticesIndices[s+0]*3+2],e.vertices[e.verticesIndices[s+1]*3+0],e.vertices[e.verticesIndices[s+1]*3+1],e.vertices[e.verticesIndices[s+1]*3+2],e.vertices[e.verticesIndices[s+2]*3+0],e.vertices[e.verticesIndices[s+2]*3+1],e.vertices[e.verticesIndices[s+2]*3+2]);m(i,e.texCoords[e.verticesIndices[s+0]*2+0],e.texCoords[e.verticesIndices[s+0]*2+1],e.texCoords[e.verticesIndices[s+1]*2+0],e.texCoords[e.verticesIndices[s+1]*2+1],e.texCoords[e.verticesIndices[s+2]*2+0],e.texCoords[e.verticesIndices[s+2]*2+1])}}else{if(e.vertices.length>0){for(s=0;s<e.vertices.length;s+=9){for(l=0;l<4;l++){for(u=0;u<9;u++)a.push(e.vertexNormals[s+u]);if(e.tangents)for(u=0;u<9;u++)o.push(e.tangents[s+u]);if(e.biTangents)for(u=0;u<9;u++)r.push(e.biTangents[s+u])}_(n,e.vertices[s+0],e.vertices[s+1],e.vertices[s+2],e.vertices[s+3],e.vertices[s+4],e.vertices[s+5],e.vertices[s+6],e.vertices[s+7],e.vertices[s+8]);m(i,e.texCoords[s/9*6+0],e.texCoords[s/9*6+1],e.texCoords[s/9*6+2],e.texCoords[s/9*6+3],e.texCoords[s/9*6+4],e.texCoords[s/9*6+5])}}}t.vertexNormals=a;t.setVertices(n);t.setTexCoords(i);t.tangents=o;t.biTangents=r;return t}function t(){let t=n.get();if(!t)return;const e=CABLES.now();for(let e=0;e<a.get();e++){t=i(t)}o.set(t.vertices.length/3);r.set(null);r.set(t)}};Ops.Gl.TesselateGeometry.prototype=new CABLES.Op;CABLES.OPS["eb3f0bd8-211c-4336-a3ad-fa31c50d705d"]={f:Ops.Gl.TesselateGeometry,objName:"Ops.Gl.TesselateGeometry"};Ops.Gl.Meshes.GeometryToTexture=function(){CABLES.Op.apply(this,arguments);const n=this;const e={fragpos_frag:"outColor0=vec4(MOD_pos.xyz,1.0);\noutColor1=vec4(MOD_pos.xyz,1.0);\n",vertpos_vert:"MOD_pos=pos.xyz;\n\nfloat tx=mod(attrVertIndex,MOD_texSize)+1.0/MOD_texSize;\nfloat ty=floor(attrVertIndex/MOD_texSize);\n\ngl_PointSize=1.0;\n\npos=vec4(tx,ty+1.0,0.0,1.0);\n"};const t=n.inTrigger("Render"),a=n.inObject("Geometry",null,"geometry"),r=n.inValueInt("Tex Size",256),o=n.inValueSelect("filter",["nearest","linear"],"nearest"),i=n.inValueSelect("wrap",["clamp to edge","repeat","mirrored repeat"],"clamp to edge"),s=n.inBool("Randomize",false),l=n.outTrigger("Next"),u=n.outNumber("Total Vertices"),c=n.outTexture("Texture");n.setPortGroup("Texture settings",[o,i]);let m=1;const _=n.patch.cgl;const d=[0,0,0,0];const p=null;let v=true;let f=null;const g=false;const h=null;let b=null;let x=true;let O=null;r.onChange=o.onChange=i.onChange=C;M();const I=[true,true];const T="vert_"+n.name;const y=new CGL.ShaderModifier(_,n.name);y.addModule({title:T,name:"MODULE_VERTEX_POSITION",srcHeadVert:"OUT vec3 MOD_pos;",srcBodyVert:e.vertpos_vert});y.addModule({title:n.name,name:"MODULE_COLOR",srcHeadFrag:"IN vec3 MOD_pos;",srcBodyFrag:e.fragpos_frag});y.addUniformVert("f","MOD_texSize",r);function S(e){let t=0;let n=0;let a=null;for(t=e.length-1;t>0;t-=1){n=Math.floor(Math.seededRandom()*(t+1));a=e[t];e[t]=e[n];e[n]=a}}s.onChange=a.onChange=function(){const e=a.get();v=true;if(O)O.dispose();if(e&&e.copy){const t=e.copy();O=new CGL.Mesh(_,t,_.gl.POINTS);O.addVertexNumbers=true;let n=t.vertices.length/3;if(s.get()){let t=new Float32Array(n);for(let e=0;e<n;e++)t[e]=e;S(t);O._setVertexNumbers(t)}else O._setVertexNumbers();u.set(n)}else{O=null;u.set(0)}};function A(){}function M(){}function C(){x=true;A()}function E(){x=false;if(b)b.delete();b=null;let e=Math.max(1,r.get());let t=Math.max(1,r.get());let n=CGL.Texture.FILTER_NEAREST;if(o.get()=="linear")n=CGL.Texture.FILTER_LINEAR;let a=CGL.Texture.WRAP_CLAMP_TO_EDGE;if(i.get()=="repeat")a=CGL.Texture.WRAP_REPEAT;if(i.get()=="mirrored repeat")a=CGL.Texture.WRAP_MIRRORED_REPEAT;if(_.glVersion>=2){b=new CGL.Framebuffer2(_,e,t,{isFloatingPointTexture:true,multisampling:false,wrap:a,filter:n,depth:true,multisamplingSamples:0,clear:true})}else{b=new CGL.Framebuffer(_,r.get(),r.get(),{isFloatingPointTexture:true,filter:n,wrap:a})}}t.onTriggered=function(){const t=_.getViewPort();if(!b||x)E();if(a.get()){let e=true;d[0]=t[0];d[1]=t[1];d[2]=t[2];d[3]=t[3];b.renderStart(_);_.pushPMatrix();mat4.identity(_.pMatrix);_.pushViewMatrix();mat4.identity(_.vMatrix);_.pushModelMatrix();mat4.identity(_.mMatrix);_.gl.viewport(0,0,r.get(),r.get());mat4.ortho(_.pMatrix,0,r.get(),0,r.get(),-1,100);y.bind();if(!_.getShader()){n.setUiError("not in mainloop","Needs to be connected to mainloop branch");return}else n.setUiError("not in mainloop",null);if(O){_.getShader().setDrawBuffers(I);O.render(_.getShader())}_.popPMatrix();_.popModelMatrix();_.popViewMatrix();b.renderEnd(_);c.set(b.getTextureColor());_.gl.viewport(d[0],d[1],d[2],d[3]);y.unbind()}else{c.set(CGL.Texture.getEmptyTexture(_))}l.trigger()}};Ops.Gl.Meshes.GeometryToTexture.prototype=new CABLES.Op;CABLES.OPS["77fec6dd-b73c-4707-a1ea-290714c98645"]={f:Ops.Gl.Meshes.GeometryToTexture,objName:"Ops.Gl.Meshes.GeometryToTexture"};Ops.Gl.Meshes.PointCloudFromTexture=function(){CABLES.Op.apply(this,arguments);const e=this;const t={vertposbody_vert:"\n// float tx=mod(attrVertIndex,(MOD_texSize))/(MOD_texSize);\n// float ty=float(int((attrVertIndex/(MOD_texSize))))/(MOD_texSize);\n\nhighp vec4 col=texture(MOD_tex,texCoord);//vec2(tx,ty));\n\n// vec4 col=texture(MOD_tex,texCoord);\n\n#ifdef MOD_HAS_PS_TEX\n    psMul*=texture(MOD_texPointSize,texCoord).r;\n    // psMul*=attrVertIndex/21000.0;\n#endif\n\nvec3 MOD_pos=col.xyz+pos.xyz;\n\n#ifdef MOD_NORMALIZE\n    MOD_pos=(MOD_pos.xyz-0.5)*2.0;\n#endif\n\n#ifdef MOD_AXIS_XYZ\n    pos.xyz=MOD_pos.xyz+pos.xyz;\n#endif\n\n#ifdef MOD_AXIS_XY\n    pos.xy=MOD_pos.xy+pos.xy;\n    pos.z=0.0+pos.z;\n    pos.w=1.0;\n#endif\n\n#ifdef MOD_REMOVEZERO\n    if(MOD_pos.x==0.0 && MOD_pos.y==0.0 && MOD_pos.z==0.0) psMul=0.0;\n#endif\n"};const n=e.inTrigger("render"),a=e.inInt("Num Points",0),r=e.inSwitch("Axis",["XYZ","XY"],"XYZ"),o=e.inTexture("Texture",null,"texture"),i=e.inTexture("Point Size",null,"texture"),s=e.inBool("Normalize",false),l=e.inBool("Remove Point at 0",false),u=e.outTrigger("Trigger"),c=e.outNumber("Total Points",0);const m=e.patch.cgl;let _=null;let d=0;let p=0;const v=new CGL.ShaderModifier(m,e.name);v.addModule({priority:-10,title:e.name,name:"MODULE_VERTEX_POSITION",srcHeadVert:"",srcBodyVert:t.vertposbody_vert});v.addUniformVert("t","MOD_tex");v.addUniformVert("t","MOD_texPointSize");n.onTriggered=h;g();v.addUniformVert("f","MOD_texSize",0);s.onChange=i.onChange=l.onChange=r.onChange=g;let f=true;o.onChange=()=>{if(o.get()!=CGL.Texture.getEmptyTexture(m))f=true};a.onChange=()=>{f=true};g();function g(){v.toggleDefine("MOD_REMOVEZERO",l);v.toggleDefine("MOD_AXIS_XY",r.get()=="XY");v.toggleDefine("MOD_AXIS_XYZ",r.get()=="XYZ");v.toggleDefine("MOD_NORMALIZE",s.get());v.toggleDefine("MOD_HAS_PS_TEX",i.get())}function h(){if(o.get()==CGL.Texture.getEmptyTexture(m)){u.trigger();return}if(f)b();v.bind();if(!o.get()||!o.get().tex)return;if(o.get())v.pushTexture("MOD_tex",o.get().tex);if(i.get())v.pushTexture("MOD_texPointSize",i.get().tex);v.setUniformValue("MOD_texSize",o.get().width+1);if(d>0&&a.get()>=0&&_){if(a.get()>0)_.setNumVertices(Math.min(d,a.get()));else _.setNumVertices(d);_.render(m.getShader())}u.trigger();v.unbind()}function b(){if(!o.get()){c.set(0);return}const e=o.get().width*o.get().height;c.set(e);if(e==p)return;p=e;let t=new Float32Array(e*3);let n=new Float32Array(e*2);let a=.5*(1/o.get().width);for(let t=0;t<o.get().width;t++)for(let e=0;e<o.get().height;e++){n[(t+e*o.get().width)*2]=t/o.get().width+a;n[(t+e*o.get().width)*2+1]=e/o.get().height+a}const r=new CGL.Geometry("pointcloudfromTexture");r.setPointVertices(t);r.setTexCoords(n);r.verticesIndices=[];d=t.length/3;if(_)_.dispose();if(d>0)_=new CGL.Mesh(m,r,m.gl.POINTS);if(!_)return;_.addVertexNumbers=true;_.setGeom(r);f=false}};Ops.Gl.Meshes.PointCloudFromTexture.prototype=new CABLES.Op;CABLES.OPS["105d8812-e641-47f2-bbaf-e45d5bc3ea8b"]={f:Ops.Gl.Meshes.PointCloudFromTexture,objName:"Ops.Gl.Meshes.PointCloudFromTexture"};Ops.Gl.TextureEffects.RGBMath=function(){CABLES.Op.apply(this,arguments);const e=this;const t={rgbmul_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\n#ifdef MOD_MASK\n    UNI sampler2D texMask;\n#endif\nUNI float r;\nUNI float g;\nUNI float b;\nUNI float a;\n\n\n\nvoid main()\n{\n    vec4 col=texture(tex,texCoord);\n    vec4 v=vec4(r,g,b,a);\n\n    #ifdef MOD_MASK\n        v*=texture(texMask,texCoord);\n    #endif\n\n    #ifdef MOD_OP_SUB_CX\n        #ifdef MOD_CHAN_R\n            col.r=col.r-v.r;\n        #endif\n        #ifdef MOD_CHAN_G\n            col.g=col.g-v.g;\n        #endif\n        #ifdef MOD_CHAN_B\n            col.b=col.b-v.b;\n        #endif\n        #ifdef MOD_CHAN_A\n            col.a=col.a-v.a;\n        #endif\n    #endif\n\n    #ifdef MOD_OP_SUB_XC\n        #ifdef MOD_CHAN_R\n            col.r=v.r-col.r;\n        #endif\n        #ifdef MOD_CHAN_G\n            col.g=v.g-col.g;\n        #endif\n        #ifdef MOD_CHAN_B\n            col.b=v.b-col.b;\n        #endif\n        #ifdef MOD_CHAN_A\n            col.a=v.a-col.a;\n        #endif\n    #endif\n\n    #ifdef MOD_OP_ADD\n        #ifdef MOD_CHAN_R\n            col.r+=v.r;\n        #endif\n        #ifdef MOD_CHAN_G\n            col.g+=v.g;\n        #endif\n        #ifdef MOD_CHAN_B\n            col.b+=v.b;\n        #endif\n        #ifdef MOD_CHAN_A\n            col.a+=v.a;\n        #endif\n    #endif\n\n    #ifdef MOD_OP_MUL\n        #ifdef MOD_CHAN_R\n            col.r*=v.r;\n        #endif\n        #ifdef MOD_CHAN_G\n            col.g*=v.g;\n        #endif\n        #ifdef MOD_CHAN_B\n            col.b*=v.b;\n        #endif\n        #ifdef MOD_CHAN_A\n            col.a*=v.a;\n        #endif\n    #endif\n\n    #ifdef MOD_OP_DIV_XC\n        #ifdef MOD_CHAN_R\n            col.r=v.r/col.r;\n        #endif\n        #ifdef MOD_CHAN_G\n            col.g=v.g/col.g;\n        #endif\n        #ifdef MOD_CHAN_B\n            col.b=v.b/col.b;\n        #endif\n        #ifdef MOD_CHAN_A\n            col.a=v.a/col.a;\n        #endif\n    #endif\n\n    #ifdef MOD_OP_DIV_CX\n        #ifdef MOD_CHAN_R\n            col.r=col.r/v.r;\n        #endif\n        #ifdef MOD_CHAN_G\n            col.g=col.g/v.g;\n        #endif\n        #ifdef MOD_CHAN_B\n            col.b=col.b/v.b;\n        #endif\n        #ifdef MOD_CHAN_A\n            col.a=col.a/v.a;\n        #endif\n    #endif\n\n    #ifdef MOD_OP_MODULO\n        col=mod(col,v);\n    #endif\n\n// csdcsd\n   outColor= col;\n}\n"};const n=e.inTrigger("Render"),a=e.inSwitch("Operation",["c-x","x-c","c+x","c*x","x/c","c/x","c%x"],"c*x"),r=e.inBool("R Active",true),o=e.inBool("G Active",true),i=e.inBool("B Active",true),s=e.inBool("A Active",false),l=e.inValue("r",1),u=e.inValue("g",1),c=e.inValue("b",1),m=e.inValue("a",1),_=e.inTexture("Mask"),d=e.outTrigger("trigger");const p=e.patch.cgl;const v=new CGL.Shader(p,e.name);v.setSource(v.getDefaultVertexShader(),t.rgbmul_frag);const f=new CGL.Uniform(v,"t","tex",0),g=new CGL.Uniform(v,"t","texMask",1),h=new CGL.Uniform(v,"f","r",l),b=new CGL.Uniform(v,"f","g",u),x=new CGL.Uniform(v,"f","b",c),O=new CGL.Uniform(v,"f","a",m);r.onChange=_.onChange=o.onChange=i.onChange=s.onChange=a.onChange=I;I();function I(){v.toggleDefine("MOD_MASK",_.get());v.toggleDefine("MOD_OP_SUB_CX",a.get()==="c-x");v.toggleDefine("MOD_OP_SUB_XC",a.get()==="x-c");v.toggleDefine("MOD_OP_ADD",a.get()==="c+x");v.toggleDefine("MOD_OP_MUL",a.get()==="c*x");v.toggleDefine("MOD_OP_DIV_XC",a.get()==="x/c");v.toggleDefine("MOD_OP_DIV_CX",a.get()==="c/x");v.toggleDefine("MOD_OP_MODULO",a.get()==="c%x");v.toggleDefine("MOD_CHAN_R",r.get());l.setUiAttribs({greyout:!r.get()});v.toggleDefine("MOD_CHAN_G",o.get());u.setUiAttribs({greyout:!o.get()});v.toggleDefine("MOD_CHAN_B",i.get());c.setUiAttribs({greyout:!i.get()});v.toggleDefine("MOD_CHAN_A",s.get());m.setUiAttribs({greyout:!s.get()})}n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;p.pushShader(v);p.currentTextureEffect.bind();p.setTexture(0,p.currentTextureEffect.getCurrentSourceTexture().tex);if(_.get())p.setTexture(1,_.get().tex);p.currentTextureEffect.finish();p.popShader();d.trigger()}};Ops.Gl.TextureEffects.RGBMath.prototype=new CABLES.Op;CABLES.OPS["dc858e71-1f12-4de5-89f5-67fb41ebfa39"]={f:Ops.Gl.TextureEffects.RGBMath,objName:"Ops.Gl.TextureEffects.RGBMath"};Ops.Gl.TextureEffects.Plasma=function(){CABLES.Op.apply(this,arguments);const e=this;const t={plasma_frag:"#define PI 3.1415926535897932384626433832795\n\nUNI float time;\nUNI float w;\nUNI float h;\nUNI float mul;\nUNI float amount;\nUNI sampler2D tex;\nUNI float offsetX;\nUNI float offsetY;\n\nIN vec2 texCoord;\n\n{{CGL.BLENDMODES}}\n\nvoid main() {\n   vec2 size=vec2(w,h);\n    float v = 0.0;\n    vec2 c = texCoord * size - size/2.0;\n\n    c.x+=offsetX;\n    c.y+=offsetY;\n\n    v += sin((c.x+time));\n    v += sin((c.y+time)/2.0);\n    v += sin((c.x+c.y+time)/2.0);\n    c += size/2.0 * vec2(sin(time/3.0), cos(time/2.0));\n\n    v += sin(sqrt(c.x*c.x+c.y*c.y+1.0)+time);\n    v = v/2.0;\n\n    vec3 newColor = vec3(sin(PI*v*mul/4.0), sin(PI*v*mul), cos(PI*v*mul))*.5 + .5;\n    vec4 base=texture(tex,texCoord);\n\n    #ifndef GREY\n       vec4 col=vec4( _blend(base.rgb,newColor) ,1.0);\n    #endif\n    #ifdef GREY\n       vec4 col=vec4( _blend(base.rgb,vec3(newColor.g)) ,1.0);\n    #endif\n\n    outColor=cgl_blend(base,col,amount);\n\n}"};const n=e.inTrigger("render"),a=CGL.TextureEffect.AddBlendSelect(e,"Blend Mode","normal"),r=e.inValueSlider("Amount",1),o=e.inValue("Width",20),i=e.inValue("Height",20),s=e.inValue("Mul",1),l=e.inValue("offset X",0),u=e.inValue("offset Y",0),c=e.inValue("Time",1),m=e.inValueBool("Greyscale",true),_=e.outTrigger("trigger");const d=e.patch.cgl;const p=new CGL.Shader(d,e.name);p.setSource(p.getDefaultVertexShader(),t.plasma_frag);p.define("GREY");const v=new CGL.Uniform(p,"f","w",o),f=new CGL.Uniform(p,"f","h",i),g=new CGL.Uniform(p,"f","time",c),h=new CGL.Uniform(p,"f","mul",s),b=new CGL.Uniform(p,"f","offsetX",l),x=new CGL.Uniform(p,"f","offsetY",u),O=new CGL.Uniform(p,"t","tex",0),I=new CGL.Uniform(p,"f","amount",r);m.onChange=function(){if(m.get())p.define("GREY");else p.removeDefine("GREY")};CGL.TextureEffect.setupBlending(e,p,a,r);n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;d.pushShader(p);d.currentTextureEffect.bind();d.setTexture(0,d.currentTextureEffect.getCurrentSourceTexture().tex);d.currentTextureEffect.finish();d.popShader();_.trigger()}};Ops.Gl.TextureEffects.Plasma.prototype=new CABLES.Op;CABLES.OPS["6c82c11d-1931-43b1-8e6c-5d20cb1a0d87"]={f:Ops.Gl.TextureEffects.Plasma,objName:"Ops.Gl.TextureEffects.Plasma"};Ops.Gl.TextureEffects.WaveformGradient_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={waveform_v2_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI float uFreq;\nUNI float uOffset;\nUNI float uPow;\nUNI float uRotate;\nUNI float amount;\n\nUNI float r;\nUNI float g;\nUNI float b;\n\n{{CGL.BLENDMODES}}\n\n#define PI 3.14159265359\n#define TAU (2.0 * PI)\n\nvoid pR(inout vec2 p, float a)\n{\n    float s = sin(a),c=cos(a); p *= mat2(c,s,-s,c);\n}\n\nfloat pModMirror1(inout float p, float size) {\n\tfloat halfsize = size * 0.5;\n\tfloat c = floor((p + halfsize)/size);\n\tp = mod(p + halfsize,size) - halfsize;\n\tp *= mod(c, 2.0) * 2.0 - 1.0;\n\treturn c;\n}\n\nvoid main()\n{\n    vec2 uv = texCoord;\n    float v = 0.0;\n\n    uv -= 0.5;\n    pR(uv,TAU * uRotate);\n    uv += 0.5 + uOffset;\n\n    uv.x *= uFreq;\n\n    #ifdef MODE_SINE\n        uv.x += 0.5;\n        pModMirror1(uv.x,1.0);\n        v = pow(cos(PI * uv.x / 2.0),uPow);\n    #endif\n\n    #ifdef MODE_SAW\n        uv.x = mod(uv.x,1.0);\n        v = pow(min(cos(PI * uv.x /2.0),1.0 - abs(uv.x)),uPow);\n    #endif\n\n    #ifdef MODE_TRI\n        uv.x += 0.5;\n        pModMirror1(uv.x,1.0);\n        uv.x = -abs(uv.x);\n        uv.x = fract(uv.x);\n        v = pow(uv.x,uPow);\n    #endif\n\n    #ifdef MODE_SQR\n        pModMirror1(uv.x,1.0);\n        uv.x = -abs(uv.x);\n        uv.x = fract(uv.x);\n        v = step(uv.x,uPow);\n    #endif\n\n    vec4 col = vec4(vec3(r,g,b),1.0);\n    vec4 base = texture(tex,texCoord);\n\n    outColor = cgl_blend(base,col,v*amount);\n}\n"};const n=e.inTrigger("render"),a=CGL.TextureEffect.AddBlendSelect(e,"Blend Mode","normal"),r=e.inValueSlider("Amount",1),o=e.inValueSelect("Mode",["Sine","Sawtooth","Triangle","Square"],"Sine"),i=e.inValue("Frequency",4),s=e.inValue("Pow factor",6),l=e.inValue("Offset",0),u=e.inFloatSlider("Rotate",0),c=e.inValueSlider("r",1),m=e.inValueSlider("g",1),_=e.inValueSlider("b",1),d=e.outTrigger("trigger");e.setPortGroup("Waveform",[o,i,s,l,u]);e.setPortGroup("Color",[c,m,_]);c.setUiAttribs({colorPick:true});const p=e.patch.cgl;const v=new CGL.Shader(p,e.name);v.setSource(v.getDefaultVertexShader(),t.waveform_v2_frag);o.onChange=S;const f=new CGL.Uniform(v,"t","tex",0),g=new CGL.Uniform(v,"f","uFreq",i),h=new CGL.Uniform(v,"f","uOffset",l),b=new CGL.Uniform(v,"f","uPow",s),x=new CGL.Uniform(v,"f","uRotate",u),O=new CGL.Uniform(v,"f","amount",r),I=new CGL.Uniform(v,"f","r",c),T=new CGL.Uniform(v,"f","g",m),y=new CGL.Uniform(v,"f","b",_);S();CGL.TextureEffect.setupBlending(e,v,a,r);function S(){v.removeDefine("MODE_SAW");v.removeDefine("MODE_SINE");v.removeDefine("MODE_TRI");v.removeDefine("MODE_SQR");if(o.get()=="Sine")v.define("MODE_SINE");else if(o.get()=="Sawtooth")v.define("MODE_SAW");else if(o.get()=="Triangle")v.define("MODE_TRI");else if(o.get()=="Square")v.define("MODE_SQR")}n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;p.pushShader(v);p.currentTextureEffect.bind();p.setTexture(0,p.currentTextureEffect.getCurrentSourceTexture().tex);p.currentTextureEffect.finish();p.popShader();d.trigger()}};Ops.Gl.TextureEffects.WaveformGradient_v2.prototype=new CABLES.Op;CABLES.OPS["08d2ef19-3517-4c15-b9c6-56dc107e10ef"]={f:Ops.Gl.TextureEffects.WaveformGradient_v2,objName:"Ops.Gl.TextureEffects.WaveformGradient_v2"};Ops.Gl.TextureEffects.CircleTexture_v3=function(){CABLES.Op.apply(this,arguments);const t=this;const e={circle_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\n\nUNI float amount;\nUNI float size;\nUNI float inner;\nUNI float fadeOut;\n\nUNI float r;\nUNI float g;\nUNI float b;\nUNI float a;\nUNI float aspect;\nUNI float stretch;\n\nUNI float x;\nUNI float y;\n\n{{CGL.BLENDMODES}}\n\nfloat dist(float x,float y,float x2,float y2)\n{\n\tfloat xd = x2-x;\n\tfloat yd = y2-y;\n\treturn abs(sqrt(xd*xd + yd*yd*(1.0-stretch)));\n}\n\nvoid main()\n{\n    vec4 base=texture(tex,texCoord);\n    vec4 col=vec4(0.0,0.0,0.0,1.0);\n    float dist = dist(x,y,(texCoord.x-0.5)*2.0,(texCoord.y-0.5)*2.0*aspect);\n\n    float sz=size*0.5;\n    float v=0.0;\n    float fade=fadeOut+0.002;\n\n    if(dist<sz && dist>inner*sz) v=1.0;\n\n    #ifdef FALLOFF_SMOOTHSTEP\n        if(dist>sz && dist<sz+fade)v=1.0-(smoothstep(0.0,1.0,(dist-sz)/(fade)) );\n    #endif\n    #ifndef FALLOFF_SMOOTHSTEP\n        if(dist>sz && dist<sz+fade)v=1.0-((dist-sz)/(fade));\n    #endif\n\n    col=vec4( _blend(base.rgb,vec3(r,g,b)) ,1.0);\n    col=vec4( mix( col.rgb, base.rgb ,1.0-base.a*v*amount*a),1.0);\n    outColor=col;\n\n    #ifdef WARN_OVERFLOW\n        float width=0.01;\n        if( texCoord.x>(1.0-width) || texCoord.y>(1.0-width) || texCoord.y<width || texCoord.x<width )\n            if(v>0.001*amount)outColor= vec4(1.0,0.0,0.0, 1.0);\n    #endif\n}\n"};const n=t.inTrigger("render"),a=t.inValueSlider("Amount",1),r=CGL.TextureEffect.AddBlendSelect(t,"Blend Mode","normal"),o=t.inValueSlider("size"),i=t.inValueSlider("Inner"),s=t.inValueSlider("Stretch"),l=t.inValue("Pos X",0),u=t.inValue("Pos Y",0),c=t.inValueSelect("fallOff",["Linear","SmoothStep"],"Linear"),m=t.inValueSlider("fade Out"),_=t.inValueBool("warn overflow",false);const d=t.inValueSlider("r",1);const p=t.inValueSlider("g",1);const v=t.inValueSlider("b",1);const f=t.inValueSlider("a",1);d.setUiAttribs({colorPick:true});t.setPortGroup("Size",[o,i,s]);t.setPortGroup("Position",[l,u]);t.setPortGroup("Style",[_,c,m]);let g=t.outTrigger("trigger");let h=t.patch.cgl;let b=new CGL.Shader(h,"textureeffect stripes");b.setSource(b.getDefaultVertexShader(),e.circle_frag);let x=new CGL.Uniform(b,"t","tex",0);let O=new CGL.Uniform(b,"f","amount",a);let I=new CGL.Uniform(b,"f","stretch",s);let T=new CGL.Uniform(b,"f","size",o);let y=new CGL.Uniform(b,"f","fadeOut",m);let S=new CGL.Uniform(b,"f","inner",i);let A=new CGL.Uniform(b,"f","aspect",1);o.set(.25);R();D();let M=new CGL.Uniform(b,"f","r",d),C=new CGL.Uniform(b,"f","g",p),E=new CGL.Uniform(b,"f","b",v),N=new CGL.Uniform(b,"f","a",f),P=new CGL.Uniform(b,"f","x",l),j=new CGL.Uniform(b,"f","y",u);c.onChange=R;_.onChange=D;CGL.TextureEffect.setupBlending(t,b,r,a);function R(){b.removeDefine("FALLOFF_LINEAR");b.removeDefine("FALLOFF_SMOOTHSTEP");if(c.get()=="Linear")b.define("FALLOFF_LINEAR");if(c.get()=="SmoothStep")b.define("FALLOFF_SMOOTHSTEP")}function D(){if(_.get())b.define("WARN_OVERFLOW");else b.removeDefine("WARN_OVERFLOW")}n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(t))return;let e=h.currentTextureEffect.getCurrentSourceTexture().height/h.currentTextureEffect.getCurrentSourceTexture().width;A.set(e);h.pushShader(b);h.currentTextureEffect.bind();h.setTexture(0,h.currentTextureEffect.getCurrentSourceTexture().tex);h.currentTextureEffect.finish();h.popShader();g.trigger()}};Ops.Gl.TextureEffects.CircleTexture_v3.prototype=new CABLES.Op;CABLES.OPS["8add97a6-07af-4325-b8a5-dece0a9ee4ef"]={f:Ops.Gl.TextureEffects.CircleTexture_v3,objName:"Ops.Gl.TextureEffects.CircleTexture_v3"};Ops.Gl.TextureEffects.Desaturate=function(){CABLES.Op.apply(this,arguments);const e=this;const t={desaturate_frag:"\nIN vec2 texCoord;\nUNI sampler2D tex;\nUNI float amount;\n\n#ifdef MASK\n    UNI sampler2D mask;\n#endif\n\nvec3 desaturate(vec3 color, float amount)\n{\n   vec3 gray = vec3(dot(vec3(0.2126,0.7152,0.0722), color));\n   return vec3(mix(color, gray, amount));\n}\n\nvoid main()\n{\n    vec4 col=texture(tex,texCoord);\n\n    float am=amount;\n    #ifdef MASK\n        am*=1.0-texture(mask,texCoord).r;\n        #ifdef INVERTMASK\n        am=1.0-am;\n        #endif\n    #endif\n\n    col.rgb=desaturate(col.rgb,am);\n    outColor= col;\n}"};const n=e.inTrigger("render");const a=e.outTrigger("trigger");const r=e.inValueSlider("amount",1);const o=e.inTexture("Mask");const i=e.inValueBool("Invert Mask");const s=e.patch.cgl;const l=new CGL.Shader(s,e.name);l.setSource(l.getDefaultVertexShader(),t.desaturate_frag);let u=new CGL.Uniform(l,"t","tex",0);let c=new CGL.Uniform(l,"t","mask",1);let m=new CGL.Uniform(l,"f","amount",r);i.onChange=function(){if(i.get())l.define("INVERTMASK");else l.removeDefine("INVERTMASK")};o.onChange=function(){if(o.get())l.define("MASK");else l.removeDefine("MASK")};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;s.pushShader(l);s.currentTextureEffect.bind();s.setTexture(0,s.currentTextureEffect.getCurrentSourceTexture().tex);if(o.get())s.setTexture(1,o.get().tex);s.currentTextureEffect.finish();s.popShader();a.trigger()}};Ops.Gl.TextureEffects.Desaturate.prototype=new CABLES.Op;CABLES.OPS["340efbd5-be53-4bd5-92ad-8f38d8eeecf1"]={f:Ops.Gl.TextureEffects.Desaturate,objName:"Ops.Gl.TextureEffects.Desaturate"};Ops.Gl.Meshes.Sphere_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const O=Math.PI*2,I=e.patch.cgl,n=e.inTrigger("render"),T=e.inValue("radius",.5),y=e.inValue("stacks",32),S=e.inValue("slices",32),A=e.inValueSlider("Filloffset",1),a=e.inValueBool("Render",true),r=e.outTrigger("trigger"),M=e.outObject("geometry",null,"geometry"),C=vec3.fromValues(0,1,0),E=vec3.fromValues(1,0,0);let N=new CGL.Geometry("Sphere"),P=vec3.create(),j=vec3.create(),R=true,D;function o(){const e=Math.max(y.get(),2),t=Math.max(S.get(),3),n=Math.min(Math.max(A.get()*e,1),e),a=T.get();let r=[],o=[],i=[],s=[],l=[],u=[],c,m,_,d,p,v,f,g,h,b,x;for(b=f=0;b<e+1;b++){h=(b/e-.5)*Math.PI;m=Math.sin(h);v=Math.cos(h);for(x=t;x>=0;x--){g=x/t*O;c=Math.cos(g)*v;_=Math.sin(g)*v;r.push(c*a,m*a,_*a);o.push(x/t,b/(e+1));d=Math.sqrt(c*c+m*m+_*_);i.push(P[0]=c/d,P[1]=m/d,P[2]=_/d);if(m==d)p=E;else p=C;vec3.cross(j,P,p);vec3.normalize(j,j);Array.prototype.push.apply(s,j);vec3.cross(j,j,P);Array.prototype.push.apply(l,j)}if(b==0||b>n)continue;for(x=0;x<t;x++,f++){u.push(f,f+1,f+t+1,f+1,f+t+2,f+t+1)}f++}N.clear();N.vertices=r;N.texCoords=o;N.vertexNormals=i;N.tangents=s;N.biTangents=l;N.verticesIndices=u;M.set(null);M.set(N);if(!D)D=new CGL.Mesh(I,N);else D.setGeom(N);R=false}n.onTriggered=function(){if(R)o();if(a.get())D.render(I.getShader());r.trigger()};y.onChange=S.onChange=A.onChange=T.onChange=function(){R=true};e.onDelete=function(){if(D)D.dispose()}};Ops.Gl.Meshes.Sphere_v2.prototype=new CABLES.Op;CABLES.OPS["450b4d68-2278-4d9f-9849-0abdfa37ef69"]={f:Ops.Gl.Meshes.Sphere_v2,objName:"Ops.Gl.Meshes.Sphere_v2"};Ops.Gl.Matrix.Transform=function(){CABLES.Op.apply(this,arguments);const t=this;const e={};const n=t.inTrigger("render"),a=t.inValue("posX",0),r=t.inValue("posY",0),o=t.inValue("posZ",0),i=t.inValue("scale",1),s=t.inValue("rotX",0),l=t.inValue("rotY",0),u=t.inValue("rotZ",0),c=t.outTrigger("trigger");t.setPortGroup("Rotation",[s,l,u]);t.setPortGroup("Position",[a,r,o]);t.setPortGroup("Scale",[i]);t.setUiAxisPorts(a,r,o);const m=t.patch.cgl;const _=vec3.create();const d=vec3.create();const p=mat4.create();mat4.identity(p);let v=false,f=false,g=true,h=true,b=true;s.onChange=l.onChange=u.onChange=S;a.onChange=r.onChange=o.onChange=T;i.onChange=y;n.onTriggered=function(){let e=false;if(g){O();e=true}if(h){I();e=true}if(b)e=true;if(e)x();m.pushModelMatrix();mat4.multiply(m.mMatrix,m.mMatrix,p);c.trigger();m.popModelMatrix();if(CABLES.UI&&CABLES.UI.showCanvasTransforms)gui.setTransform(t.id,a.get(),r.get(),o.get());if(t.isCurrentUiOp())gui.setTransformGizmo({posX:a,posY:r,posZ:o})};t.transform3d=function(){return{pos:[a,r,o]}};function x(){mat4.identity(p);if(f)mat4.translate(p,p,_);if(s.get()!==0)mat4.rotateX(p,p,s.get()*CGL.DEG2RAD);if(l.get()!==0)mat4.rotateY(p,p,l.get()*CGL.DEG2RAD);if(u.get()!==0)mat4.rotateZ(p,p,u.get()*CGL.DEG2RAD);if(v)mat4.scale(p,p,d);b=false}function O(){f=false;if(a.get()!==0||r.get()!==0||o.get()!==0)f=true;vec3.set(_,a.get(),r.get(),o.get());g=false}function I(){v=true;vec3.set(d,i.get(),i.get(),i.get());h=false}function T(){g=true}function y(){h=true}function S(){b=true}x()};Ops.Gl.Matrix.Transform.prototype=new CABLES.Op;CABLES.OPS["650baeb1-db2d-4781-9af6-ab4e9d4277be"]={f:Ops.Gl.Matrix.Transform,objName:"Ops.Gl.Matrix.Transform"};Ops.Gl.Meshes.Circle=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("render");const N=e.inValue("radius",.5);const P=e.inValueSlider("innerRadius",0);const j=e.inValueInt("segments",40);const R=e.inValueSlider("percent",1);const D=e.inValue("steps",0);const w=e.inValueBool("invertSteps",false);const L=e.inSwitch("mapping",["flat","round"]);const G=e.inValueBool("Spline",false);const a=e.inValueBool("Draw",true);const r=e.outTrigger("trigger");const k=e.outObject("geometry",null,"geometry");e.setPortGroup("Size",[N,P]);e.setPortGroup("Display",[R,D,w]);L.set("flat");L.onChange=j.onChange=N.onChange=P.onChange=R.onChange=D.onChange=w.onChange=G.onChange=c;k.ignoreValueSerialize=true;const U=e.patch.cgl;let V=new CGL.Geometry("circle");let B=null;const o=-1;let i=0;let s=null;let z=true;n.onTriggered=l;e.preRender=()=>{l()};function l(){if(!CGL.TextureEffect.checkOpNotInTextureEffect(e))return;if(z)u();s=U.getShader();if(!s)return;i=s.glPrimitive;if(G.get())s.glPrimitive=U.gl.LINE_STRIP;if(a.get())B.render(s);r.trigger();s.glPrimitive=i}function u(){const n=Math.max(3,Math.floor(j.get()));V.clear();const t=[];const a=[];const r=[];const o=[];const i=[];let s=0,l=0;let u=0,c=0;let m=0,_=0;let d=0,p=0;let v=0,f=0;let g=0,h=0;let b=0,x=0;let O=0,I=0;const T=Math.max(0,R.get());const y=[];if(G.get()){let e=0;let t=0;const S=[];for(s=0;s<=n*T;s++){l=360/n*s*CGL.DEG2RAD;O=Math.cos(l)*N.get();I=Math.sin(l)*N.get();x=.5;if(s>0){y.push(e);y.push(t);y.push(0);b=1-(s-1)/n;S.push(b,x)}y.push(O);y.push(I);y.push(0);e=O;t=I}V.setPointVertices(y)}else if(P.get()<=0){for(s=0;s<=n*T;s++){l=360/n*s*CGL.DEG2RAD;O=Math.cos(l)*N.get();I=Math.sin(l)*N.get();if(L.get()=="flat"){b=(Math.cos(l)+1)/2;x=1-(Math.sin(l)+1)/2;g=.5;h=.5}else if(L.get()=="round"){b=1-s/n;x=0;g=b;h=1}t.push([O,I,0],[u,c,0],[0,0,0]);a.push(b,x,m,_,g,h);r.push(0,0,1,0,0,1,0,0,1);o.push(1,0,0,1,0,0,1,0,0);i.push(0,1,0,0,1,0,0,1,0);m=b;_=x;u=O;c=I}V=CGL.Geometry.buildFromFaces(t,"circle");V.vertexNormals=r;V.tangents=o;V.biTangents=i;V.texCoords=a}else{let e=0;const A=n*T;const M=0;for(s=0;s<=A;s++){e++;l=360/n*s*CGL.DEG2RAD;O=Math.cos(l)*N.get();I=Math.sin(l)*N.get();const C=Math.cos(l)*P.get()*N.get();const E=Math.sin(l)*P.get()*N.get();if(L.get()=="round"){b=1-s/n;x=0;g=b;h=1}if(D.get()===0||e%parseInt(D.get(),10)===0&&!w.get()||e%parseInt(D.get(),10)!==0&&w.get()){t.push([O,I,0],[u,c,0],[C,E,0]);t.push([C,E,0],[u,c,0],[d,p,0]);a.push(b,0,m,0,g,1,b,1,m,0,v,1);r.push(0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1);o.push(1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0);i.push(0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0)}v=g;f=h;m=b;_=x;u=O;c=I;d=C;p=E}V=CGL.Geometry.buildFromFaces(t,"circle");V.vertexNormals=r;V.tangents=o;V.biTangents=i;if(L.get()=="flat")V.mapTexCoords2d();else V.texCoords=a}k.set(null);k.set(V);if(V.vertices.length==0)return;if(B)B.dispose();B=null;B=new CGL.Mesh(U,V);z=false}function c(){z=true}e.onDelete=function(){if(B)B.dispose()}};Ops.Gl.Meshes.Circle.prototype=new CABLES.Op;CABLES.OPS["4db917cc-2cef-43f4-83d5-38c4572fe943"]={f:Ops.Gl.Meshes.Circle,objName:"Ops.Gl.Meshes.Circle"};Ops.Array.SplinePositionAtDistanceArray3=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTriggerButton("Calculate"),r=e.inArray("Array3x"),a=e.inValue("Distance"),o=e.inValueBool("Normalized"),i=e.outTrigger("Next"),s=e.outNumber("X"),l=e.outNumber("Y"),u=e.outNumber("Z"),c=e.outNumber("Spline Length");let m=new CABLES.Anim;let _=new CABLES.Anim;let d=new CABLES.Anim;let p=true;function v(e,t,n,a,r,o){let i=e-a;let s=t-r;let l=n-o;return Math.sqrt(i*i+s*s+l*l)}function f(t){let n=0;for(let e=3;e<t.length;e+=3){n+=v(t[e-3],t[e-2],t[e-1],t[e+0],t[e+1],t[e+2])}c.set(n);return n}function g(){m.clear();_.clear();d.clear();let n=r.get();let e=f(n);let a=0;for(let t=0;t<n.length;t+=3){let e=t/(n.length-3);if(t>0){a+=v(n[t-3],n[t-2],n[t-1],n[t+0],n[t+1],n[t+2])}m.setValue(a,n[t+0]);_.setValue(a,n[t+1]);d.setValue(a,n[t+2])}p=false}r.onChange=function(){p=true};n.onTriggered=function(){if(p)g();let e=a.get();if(o.get())e*=c.get();s.set(m.getValue(e));l.set(_.getValue(e));u.set(d.getValue(e));i.trigger()}};Ops.Array.SplinePositionAtDistanceArray3.prototype=new CABLES.Op;CABLES.OPS["02100bb5-fe07-4c1b-8792-67f9add7afff"]={f:Ops.Array.SplinePositionAtDistanceArray3,objName:"Ops.Array.SplinePositionAtDistanceArray3"};Ops.Array.LissajouseSpline=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const c=e.inValueSelect("Formula",[1,2,3],1),m=e.inValueInt("A",5),_=e.inValueInt("B",4),d=e.inValueInt("C",1),p=e.inValueInt("D",2),v=e.outArray("Result"),f=e.outNumber("Total points"),g=e.outNumber("Array length");c.onChange=m.onChange=_.onChange=d.onChange=p.onChange=n;n();function n(){var e=13200;var t=40;var n=[];var a=0,r=0,o=0;var i=parseInt(c.get());var s=.03;for(var l=0;l<e;l+=t){var u=l/t;if(i==1){a=Math.sin(l*m.get()*.001);r=Math.cos(l*_.get()*.001);o=Math.sin(l*d.get()*.001)}else if(i==2){a=(Math.cos(l*m.get()*.001)+Math.cos(l*_.get()*.001))/2;r=(Math.sin(l*m.get()*.001)+Math.sin(l*d.get()*.001))/2;o=Math.sin(l*p.get()*.001)}else if(i==3){a=Math.sin(l*m.get()*.001)*(1+Math.cos(l*_.get()*.001))/2;r=Math.sin(l*m.get()*.001)*(1+Math.sin(l*d.get()*.001))/2;o=Math.sin(l*p.get()*.001)}n[u*3+0]=a;n[u*3+1]=r;n[u*3+2]=o;if(u>10&&Math.abs(a-n[0])<s&&Math.abs(r-n[1])<s&&Math.abs(o-n[2])<s){break}}v.set(n);f.set(n.length/3);g.set(n.length)}};Ops.Array.LissajouseSpline.prototype=new CABLES.Op;CABLES.OPS["b4be3f11-20ed-43a0-865d-2b88f0879a6f"]={f:Ops.Array.LissajouseSpline,objName:"Ops.Array.LissajouseSpline"};Ops.Gl.Matrix.Translate=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("render");const a=e.outTrigger("trigger");const r=e.inValue("x");const o=e.inValue("y");const i=e.inValue("z");const s=e.patch.cgl;let l=vec3.create();n.onTriggered=function(){vec3.set(l,r.get(),o.get(),i.get());s.pushModelMatrix();mat4.translate(s.mMatrix,s.mMatrix,l);a.trigger();s.popModelMatrix()}};Ops.Gl.Matrix.Translate.prototype=new CABLES.Op;CABLES.OPS["1f89ba0e-e7eb-46d7-8c66-7814b7c528b9"]={f:Ops.Gl.Matrix.Translate,objName:"Ops.Gl.Matrix.Translate"};Ops.Gl.MeshInstancer_v4=function(){CABLES.Op.apply(this,arguments);const e=this;const t={instancer_body_frag:"#ifdef COLORIZE_INSTANCES\n    #ifdef BLEND_MODE_MULTIPLY\n        col.rgb *= frag_instColor.rgb;\n        col.a *= frag_instColor.a;\n    #endif\n\n    #ifdef BLEND_MODE_ADD\n        col.rgb += frag_instColor.rgb;\n        col.a += frag_instColor.a;\n    #endif\n\n    #ifdef BLEND_MODE_NONE\n        col.rgb = frag_instColor.rgb;\n        col.a = frag_instColor.a;\n    #endif\n#endif\n",instancer_body_vert:"\n\n#ifdef HAS_TEXCOORDS\ntexCoord=(texCoord*instTexCoords.zw)+instTexCoords.xy;\n#endif\n\nmMatrix*=instMat;\npos.xyz*=MOD_scale;\n\n#ifdef HAS_COLORS\nfrag_instColor=instColor;\n#endif\n#ifndef HAS_COLORS\nfrag_instColor=vec4(1.0);\n#endif\n\n",instancer_head_frag:"IN vec4 frag_instColor;\n",instancer_head_vert:"\nIN vec4 instColor;\nIN mat4 instMat;\nIN vec4 instTexCoords;\nOUT mat4 instModelMat;\nOUT vec4 frag_instColor;\n\n#define INSTANCING"};const n=e.inTrigger("exe"),a=e.inObject("geom",null,"geometry"),r=e.inValue("Scale",1),o=e.inValueBool("Limit Instances",false),i=e.inValueInt("Limit",100),u=e.inArray("positions",3),c=e.inArray("Scale Array",3),m=e.inArray("Rotations",3),_=e.inSwitch("Rotation Type",["Euler","Quaternions"],"Euler"),s=e.inSwitch("Material blend mode",["Multiply","Add","Normal"],"Multiply"),d=e.inArray("Colors",4),p=e.inArray("TexCoords",2),l=e.outTrigger("Trigger Out"),v=e.outValue("Num");e.setPortGroup("Limit Number of Instances",[i,o]);e.setPortGroup("Parameters",[c,m,u,_]);e.toWorkPortsNeedToBeLinked(a);e.toWorkPortsNeedToBeLinked(n);a.ignoreValueSerialize=true;const f=e.patch.cgl;const g=mat4.create();let h=new Float32Array(1),b=new Float32Array(1),x=new Float32Array(1),O=null,I=true,T=0,y=true,S=true,A=true;const M=new CGL.ShaderModifier(f,e.name);M.addModule({name:"MODULE_VERTEX_POSITION",title:e.name,priority:-2,srcHeadVert:t.instancer_head_vert,srcBodyVert:t.instancer_body_vert});M.addModule({name:"MODULE_COLOR",priority:-2,title:e.name,srcHeadFrag:t.instancer_head_frag,srcBodyFrag:t.instancer_body_frag});M.addUniformVert("f","MOD_scale",r);let C=true;s.onChange=()=>{C=true};o.onChange=R;n.onTriggered=D;n.onLinkChanged=function(){if(!n.isLinked())P()};R();m.onChange=c.onChange=u.onChange=_.onChange=function(){A=true;I=true};p.onChange=function(){S=true;I=true;C=true};d.onChange=function(){y=true;I=true;C=true};function E(){y=true,A=true;I=true}function N(){M.toggleDefine("COLORIZE_INSTANCES",d.get());M.toggleDefine("TEXCOORDS_INSTANCES",p.get());M.toggleDefine("BLEND_MODE_MULTIPLY",s.get()==="Multiply");M.toggleDefine("BLEND_MODE_ADD",s.get()==="Add");M.toggleDefine("BLEND_MODE_NONE",s.get()==="Normal");C=false}a.onChange=function(){if(O)O.dispose();if(!a.get()){O=null;return}O=new CGL.Mesh(f,a.get());E()};function P(){}function j(){if(!O)return;let e=u.get();if(!e)e=[0,0,0];T=Math.floor(e.length/3);if(C)N();const n=d.get();const a=p.get();const r=c.get();const o=_.get()=="Quaternions";let t=3;if(o)t=4;m.setUiAttribs({stride:t});if(h.length!=T*16)h=new Float32Array(T*16);if(b.length!=T*4){y=true;b=new Float32Array(T*4)}if(x.length!=T*4){S=true;x=new Float32Array(T*4)}const i=m.get();for(let t=0;t<T;t++){mat4.identity(g);mat4.translate(g,g,[e[t*3],e[t*3+1],e[t*3+2]]);if(i){if(o){const s=mat4.create();const l=[i[t*4+0],i[t*4+1],i[t*4+2],i[t*4+3]];quat.normalize(l,l);mat4.fromQuat(s,l);mat4.mul(g,g,s)}else{mat4.rotateX(g,g,i[t*3+0]*CGL.DEG2RAD);mat4.rotateY(g,g,i[t*3+1]*CGL.DEG2RAD);mat4.rotateZ(g,g,i[t*3+2]*CGL.DEG2RAD)}}if(y&&n){b[t*4+0]=n[t*4+0];b[t*4+1]=n[t*4+1];b[t*4+2]=n[t*4+2];b[t*4+3]=n[t*4+3]}if(S&&a){x[t*4+0]=a[t*4+0];x[t*4+1]=a[t*4+1];x[t*4+2]=a[t*4+2];x[t*4+3]=a[t*4+3]}if(r&&r.length>t)mat4.scale(g,g,[r[t*3],r[t*3+1],r[t*3+2]]);else mat4.scale(g,g,[1,1,1]);for(let e=0;e<16;e++)h[t*16+e]=g[e]}O.numInstances=T;if(A)O.addAttribute("instMat",h,16);if(y)O.addAttribute("instColor",b,4,{instanced:true});if(S)O.addAttribute("instTexCoords",x,4,{instanced:true});M.toggleDefine("HAS_TEXCOORDS",a);M.toggleDefine("HAS_COLORS",n);y=false;I=false}function R(){i.setUiAttribs({greyout:!o.get()})}function D(){if(!O)return;if(I)j();M.bind();if(o.get())O.numInstances=Math.min(T,i.get());else O.numInstances=T;v.set(this.name,O.numInstances);if(O.numInstances>0)O.render(f.getShader());l.trigger();M.unbind()}};Ops.Gl.MeshInstancer_v4.prototype=new CABLES.Op;CABLES.OPS["322d8c8d-851b-481d-9bee-ec1cf7d57a35"]={f:Ops.Gl.MeshInstancer_v4,objName:"Ops.Gl.MeshInstancer_v4"};Ops.Array.RandomArrays=function(){CABLES.Op.apply(this,arguments);const t=this;const e={};const c=t.inValueInt("Num Values",100);const m=t.inSwitch("Mode",["A","AB","ABC","ABCD"],"A");const _=t.inValueFloat("Random Seed ",0);const d=t.inBool("Integer",false);const p=t.outArray("Array Out");const n=["A","B","C","D"];const v=n.map(function(e){return{min:t.inValueFloat("Min "+e,-1),max:t.inValueFloat("Max "+e,1)}});for(let e=0;e<v.length;e+=1){const r=v[e];const o=Object.keys(r);t.setPortGroup("Value Range "+n[e],o.map(function(e){return r[e]}));if(e>0)o.forEach(function(e){r[e].setUiAttribs({greyout:true})})}m.onChange=function(){const e=m.get();const t=m.uiAttribs.values;p.setUiAttribs({stride:m.get().length});const r=t.indexOf(e);v.forEach(function(n,a){const e=Object.keys(n);e.forEach(function(e,t){if(a<=r)n[e].setUiAttribs({greyout:false});else n[e].setUiAttribs({greyout:true})})});a()};const f=t.outNumber("Chunks Amount");const g=t.outNumber("Array length");p.ignoreValueSerialize=true;c.onChange=_.onChange=d.onChange=a;const h=[];a();function a(){const n=[];const e=m.get();const t=m.uiAttribs.values;const a=t.indexOf(e);Math.randomSeed=_.get();const r=a+1;const o=Math.floor(Math.abs(c.get()*r));n.length=o;const i=o/r;const s=d.get();for(let t=0;t<r;t+=1){const e=v[t];const l=e.max.get();const u=e.min.get();h[t]=[u,l]}for(let t=0;t<i;t+=1){for(let e=0;e<r;e+=1){const u=h[e][0];const l=h[e][1];const a=t*r+e;if(s)n[a]=Math.floor(Math.seededRandom()*(l+1-u)+u);else n[a]=Math.seededRandom()*(l-u)+u}}p.set(null);p.set(n);f.set(n.length/r);g.set(n.length)}v.forEach(function(n){Object.keys(n).forEach(function(e){const t=n[e];t.onChange=a})})};Ops.Array.RandomArrays.prototype=new CABLES.Op;CABLES.OPS["8a9fa2c6-c229-49a9-9dc8-247001539217"]={f:Ops.Array.RandomArrays,objName:"Ops.Array.RandomArrays"};Ops.Array.RandomNumbersArray3_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const o=e.inValueInt("numValues",100),i=e.inValueFloat("Min",-1),s=e.inValueFloat("Max",1),l=e.inValueFloat("random seed"),u=e.inValueBool("Last == First"),c=e.inValueBool("Integer",false),m=e.outArray("values",null,3),_=e.outNumber("Total points"),d=e.outNumber("Array length");e.setPortGroup("Value Range",[i,s]);e.setPortGroup("",[l,u]);m.ignoreValueSerialize=true;u.onChange=s.onChange=i.onChange=o.onChange=l.onChange=c.onChange=n;const p=[];n();function n(){Math.randomSeed=l.get();const t=c.get();const n=p.length=Math.max(0,Math.floor(Math.abs((o.get()||0)*3)));if(n===0){m.set(null);_.set(0);d.set(0);return}const a=i.get();const r=s.get();for(let e=0;e<n;e+=3){if(!t){p[e+0]=Math.seededRandom()*(r-a)+a;p[e+1]=Math.seededRandom()*(r-a)+a;p[e+2]=Math.seededRandom()*(r-a)+a}else{p[e+0]=Math.floor(Math.seededRandom()*(r-a+1)+a);p[e+1]=Math.floor(Math.seededRandom()*(r-a+1)+a);p[e+2]=Math.floor(Math.seededRandom()*(r-a+1)+a)}}if(u.get()&&n>3){p[n-3+0]=p[0];p[n-3+1]=p[1];p[n-3+2]=p[2]}m.set(null);m.set(p);_.set(n/3);d.set(n)}};Ops.Array.RandomNumbersArray3_v2.prototype=new CABLES.Op;CABLES.OPS["45b2113a-1ca0-41d8-8d90-db3e394b669c"]={f:Ops.Array.RandomNumbersArray3_v2,objName:"Ops.Array.RandomNumbersArray3_v2"};Ops.Trigger.Threshold=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValue("Input"),a=e.inValue("Threshold"),r=e.outTrigger("Output");var o=false;n.onChange=i;function i(){if(!o&&n.get()>=a.get()){o=true;r.trigger()}else if(o&&n.get()<=a.get()){o=false}}};Ops.Trigger.Threshold.prototype=new CABLES.Op;CABLES.OPS["ef0891db-6053-42ba-b7d5-29c7cf6d8208"]={f:Ops.Trigger.Threshold,objName:"Ops.Trigger.Threshold"};Ops.Gl.Array3ToTexture=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const l=e.inArray("Array"),n=e.inValueSelect("wrap",["repeat","mirrored repeat","clamp to edge"],"repeat"),a=e.inSwitch("filter",["nearest","linear","mipmap"],"mipmap"),u=e.outTexture("Texture");l.onChange=o;const c=e.patch.cgl;var m=new CGL.Texture(c,{wrap:CGL.Texture.WRAP_REPEAT});var _=new Uint8Array(10);var d=CGL.Texture.FILTER_MIPMAP;var p=CGL.Texture.WRAP_REPEAT;a.onChange=r;n.onChange=r;function r(){if(a.get()=="nearest")d=CGL.Texture.FILTER_NEAREST;else if(a.get()=="linear")d=CGL.Texture.FILTER_LINEAR;else if(a.get()=="mipmap")d=CGL.Texture.FILTER_MIPMAP;if(n.get()=="repeat")p=CGL.Texture.WRAP_REPEAT;else if(n.get()=="mirrored repeat")p=CGL.Texture.WRAP_MIRRORED_REPEAT;else if(n.get()=="clamp to edge")p=CGL.Texture.WRAP_CLAMP_TO_EDGE;o()}function o(){var e=l.get();if(!e){u.set(CGL.Texture.getEmptyTexture(c));return}var t=Math.ceil(Math.sqrt(e.length/3));var n=Math.ceil(e.length/3/t);if(t<1)t=1;if(n<1)n=1;if(m.width!=t||n!=m.height){m.delete();m=new CGL.Texture(c,{width:t,height:n,filter:d,wrap:p})}const a=t*4*n;if(_.length!=a)_=new Uint8Array(a);var r=0,o=0;var i=0;for(o=0;o<t*n;o++){i++;var s=i;if(i*3>e.length-1)s=0;_[i*4+0]=(e[s*3+0]+0)*255;_[i*4+1]=(e[s*3+1]+0)*255;_[i*4+2]=(e[s*3+2]+0)*255;_[i*4+3]=255}m.initFromData(_,t,n,d,p);u.set(null);u.set(m)}};Ops.Gl.Array3ToTexture.prototype=new CABLES.Op;CABLES.OPS["c3ca9f78-f3ec-418a-b885-18d1bb5b7048"]={f:Ops.Gl.Array3ToTexture,objName:"Ops.Gl.Array3ToTexture"};Ops.Gl.ForceCanvasSize=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("Trigger"),l=e.inBool("Active",true),a=e.inSwitch("Force",["Resolution","Aspect Ratio"],"Resolution"),u=e.inBool("Center In Parent",true),c=e.inBool("Scale to fit Parent",false),m=e.inInt("Set Width",300),_=e.inInt("Set Height",200),r=e.inDropDown("Aspect Ratio",["Custom","21:9","2:1","16:9","16:10","4:3","1:1","9:16","1:2","iPhoneXr Vert"],"16:9"),d=e.inFloat("Ratio",0),o=e.inDropDown("Fill Parent",["Auto","Width","Height","Both"],"Auto"),p=e.outTrigger("Next"),v=e.outNumber("Width"),f=e.outNumber("Height"),g=e.outNumber("Margin Left"),h=e.outNumber("Margin Top");e.setPortGroup("Size",[m,_]);e.setPortGroup("Proportions",[d,o,r]);let b=0;const i=0;const x=1;const O=2;const I=3;const T=4;o.onChange=A;a.onChange=s;u.onChange=n.onLinkChanged=M;r.onChange=S;const y=e.patch.cgl;if(window.getComputedStyle(y.canvas).position==="absolute"){y.canvas.style.position="initial";console.warn("[cables forceCanvasSize] - canvas was positioned absolute, not compatible with Ops.Gl.ForceCanvasSize")}A();function s(){if(a.get()=="Aspect Ratio"){d.set(100);S()}A()}function S(){const e=r.get();if(e=="Custom")return;else if(e=="16:9")d.set(16/9);else if(e=="4:3")d.set(4/3);else if(e=="16:10")d.set(16/10);else if(e=="21:9")d.set(21/9);else if(e=="2:1")d.set(2);else if(e=="1:1")d.set(1);else if(e=="9:16")d.set(9/16);else if(e=="1:2")d.set(.5);else if(e=="iPhoneXr Vert")d.set(9/19.5)}d.onChange=()=>{M()};l.onChange=function(){if(!l.get())M()};function A(){const e=a.get()=="Resolution";m.setUiAttribs({greyout:!e});_.setUiAttribs({greyout:!e});r.setUiAttribs({greyout:e});o.setUiAttribs({greyout:e});d.setUiAttribs({greyout:e});b=0;if(!e){const t=o.get();if(t=="Width")b=x;else if(t=="Height")b=O;else if(t=="Both")b=I;else if(t=="Auto")b=T}}function M(){y.canvas.style["margin-top"]="";y.canvas.style["margin-left"]="";g.set(0);h.set(0);const e=y.canvas.parentNode.getBoundingClientRect();y.setSize(e.width,e.height)}n.onTriggered=function(){if(!l.get())return p.trigger();let e=m.get();let t=_.get();let n=y.canvas.parentNode.getBoundingClientRect();if(n.height==0){y.canvas.parentNode.style.height="100%";n=y.canvas.parentNode.getBoundingClientRect()}if(n.width==0){y.canvas.parentNode.style.width="100%";n=y.canvas.parentNode.getBoundingClientRect()}if(b==x){e=n.width;t=e*1/d.get()}else if(b==O){t=n.height;e=t*d.get()}else if(b==T){const a=n;t=a.height;e=t*d.get();if(e>a.width){e=a.width;t=e*1/d.get()}}else if(b==I){const a=n;t=a.height;e=t*d.get();if(e<a.width){e=a.width;t=e*1/d.get()}}e=Math.ceil(e);t=Math.ceil(t);if(u.get()){const a=n;const r=(a.height-t)/2;const o=(a.width-e)/2;g.set(o);h.set(r);y.canvas.style["margin-top"]=r+"px";y.canvas.style["margin-left"]=o+"px"}else{y.canvas.style["margin-top"]="0";y.canvas.style["margin-left"]="0";g.set(0);h.set(0)}if(c.get()){const a=n;const i=a.width/m.get();const s=a.height/_.get();y.canvas.style.transform="scale("+Math.min(i,s)+")"}else{y.canvas.style.transform="scale(1)"}if(y.canvas.width/y.pixelDensity!=e||y.canvas.height/y.pixelDensity!=t){v.set(e);f.set(t);y.setSize(e,t)}p.trigger()}};Ops.Gl.ForceCanvasSize.prototype=new CABLES.Op;CABLES.OPS["a8b3380e-cd4a-4000-9ee9-1c65a11027dd"]={f:Ops.Gl.ForceCanvasSize,objName:"Ops.Gl.ForceCanvasSize"};Ops.Devices.Midi.MidiInputDevice_v2=function(){CABLES.Op.apply(this,arguments);const b=this;const e={};const x=b.inValueSelect("Device",["none"]);let O=false;const t=b.inTriggerButton("Learn");const n=b.inTriggerButton("Panic");b.setPortGroup("Device Select",[x]);b.setPortGroup("Controls",[t,n]);const a="Ops.Devices.Midi.Midi";const I={CC:{NAMESPACE:`${a}CC`,IN_PORT:"CC Index"},NRPN:{NAMESPACE:`${a}NRPN`,IN_PORT:"NRPN Index"},Note:{NAMESPACE:`${a}Note`,IN_PORT:"Note"}};const r=["Event","Note","CC","NRPN","Program Change","Clock"];const T=["Pitchbend","Channel Pressure","Poly Key Pressure","SysEx"];const y=r.reduce((e,t)=>{e[t]=b.outObject(t);return e},{});b.setPortGroup("MIDI Event",[y.Event]);b.setPortGroup("MIDI Event by Type",Object.keys(y).map(e=>{return e!=="Event"&&y[e]}).filter(Boolean));const o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];const i=8;const s=9;const l=10;const u=11;const c=12;const m=13;const _=14;const d=248;const p=250;const v=251;const f=252;const S=[d,p,v,f];const g={[i]:"Note",[s]:"Note",[l]:"Poly Key Pressure",[u]:"CC",[c]:"Program Change",[m]:"Channel Pressure",[_]:"Pitchbend",[d]:"Clock"};function A(e){return e&15}function M(e){return g[e>>4]||"UNKNOWN"}function C(e){return e<=126?`${o[e%12]}${Math.floor(e/12)-2} - ${e}`:"NO NOTE"}const E=[98,99,6,38];const h=6;const N=38;const P=99;const j=98;let R=null;let D=null;let w=null;let L=null;let G=null;let k=null;const U=9;const V=10;let B=null;let z=null;var F=null;var X=null;const Y=(e,t)=>{if(e===P)R=t<<7;else if(e===j)D=t;G=R|D;if(typeof G==="number"){if(e===h){w=t<<7;X=t;if(typeof L==="number"){k=w|L;return[G,k]}}else if(e===N){L=t;F=t;k=w|L;return[G,k]}}return null};const H=(e,t)=>{if(e===P)R=t<<7;else if(e===j)D=t;G=R|D;if(typeof G==="number"){if(e===h){w=t<<7;if(typeof L==="number"){k=w|L;return[G,k]}}else if(e===N){L=t;k=w|L;return[G,k]}}return null};const W=(e,t)=>{if(B===null){B=e;z=B===P?U:V}if(z===U){return H(e,t)}if(z===V){return Y(e,t)}return null};let q=null;let K=null;function Z(e){if(!e)return;if(b.patch.isEditorMode())gui.emitEvent("userActivity");const{data:t}=e;const[n,a,r]=t;if(S.includes(n)){y.Clock.set(e);return}if(n>248){return}const o=x.get();const i=A(n);let s=M(n);const l=a;const u=r;const c=s==="CC"&&E.some(e=>{return e===a});let m;let _;if(c){const p=W(a,r);if(p){const[v,f]=p;s="NRPN";m=v;_=f}}const d={deviceName:o,inputId:0,messageType:s,index:l,value:u,cmd:t[0]>>4,channel:t[0]&15,type:t[0]&240,note:t[1],velocity:t[2],data:t,...s==="Note"&&{newNote:[a,C(a)],velocity:u},...s==="NRPN"&&{nrpnIndex:m,nrpnValue:_}};if(O){if(["Note","CC","NRPN"].includes(s)){const g=b.patch.addOp(I[s].NAMESPACE,{translate:{x:b.uiAttribs.translate.x,y:b.uiAttribs.translate.y+100}});b.patch.link(b,s,g,"MIDI Event In");g.getPortByName("MIDI Channel").set(i+1);if(s==="Note"){const{newNote:[,h]}=d;g.getPortByName("Note").set(h)}if(s==="CC"){const{index:v}=d;g.getPortByName("CC Index").set(v)}if(s==="NRPN"){g.getPortByName("NRPN Index").set(m)}}O=false}y.Event.set(null);y.Event.set(d);if(s!=="UNKNOWN"&&!T.includes(s)){y[s].set(null);y[s].set(d)}}function Q(){if(!q||!q.inputs)return;const t=x.get();b.setTitle(`Midi ${t}`);const n=q.inputs.values();for(let e=n.next();e&&!e.done;e=n.next()){if(e.value.name===t){e.value.onmidimessage=Z;K=q.inputs.get(e.value.id)}else if(e.value.onmidimessage===Z)e.value.onmidimessage=null}}function J(){b.uiAttr({warning:"No MIDI support in your browser."})}function $(e){q=e;const t=q.inputs.values();b.uiAttr({info:"no midi devices found"});const n=[];for(let e=t.next();e&&!e.done;e=t.next()){n.push(e.value.name)}x.uiAttribs.values=n;if(CABLES.UI)gui.opParams.show(b);Q()}x.onChange=Q;if(navigator.requestMIDIAccess){navigator.requestMIDIAccess({sysex:false}).then($,J)}else J();n.onTriggered=()=>{};t.onTriggered=()=>{if(!K)return;O=true}};Ops.Devices.Midi.MidiInputDevice_v2.prototype=new CABLES.Op;CABLES.OPS["484b3a00-41b7-4e3f-8a99-a1b32a764eff"]={f:Ops.Devices.Midi.MidiInputDevice_v2,objName:"Ops.Devices.Midi.MidiInputDevice_v2"};Ops.Devices.Midi.MidiCC=function(){CABLES.Op.apply(this,arguments);const a=this;const e={};const t=Array.from(Array(16).keys(),e=>e+1);const r=a.inObject("MIDI Event In");const o=a.inValueSelect("MIDI Channel",t,1);const i=a.inValueInt("CC Index",0);const s=a.inSwitch("Normalize",["none","0 to 1","-1 to 1"],"none");const n=a.inTriggerButton("learn");const l=a.inTriggerButton("clear");a.setPortGroup("MIDI",[r,o]);a.setPortGroup("CC",[i,s]);a.setPortGroup("",[n,l]);const u=Array.from(Array(128).keys(),e=>0);const c=a.outObject("Event");const m=a.outTrigger("Trigger Out");const _=a.outValue("CC Index Out");const d=a.outValue("CC Value Out");const p=a.outArray("Value Array");a.setPortGroup("MIDI/Trigger Out",[c,m]);a.setPortGroup("CC Out",[_,d]);p.set(u);i.set(0);o.set(1);s.set(s.get("none"));let v=false;n.onTriggered=()=>{v=true};l.onTriggered=()=>{i.set(0);o.set(1);s.set(s.get("none"));if(a.isCurrentUiOp())gui.opParams.show(a)};r.onChange=()=>{const e=r.get();if(!e)return;if(e.messageType!=="CC")return;const[,t,n]=e.data;if(v){i.set(t);o.set(e.channel+1);v=false;if(CABLES.UI){a.uiAttr({info:`bound to CC: ${i.get()}`});gui.opParams.show(a)}}if(e.channel===o.get()-1){if(s.get()==="0 to 1"){u[t]=n/127}else if(s.get()==="-1 to 1"){u[t]=n/(127/2)-1}else if(s.get()==="none"){u[t]=n}if(t===i.get()){_.set(t);let e=n;u[t]=n;if(s.get()==="0 to 1"){e=n/127;d.set(e);u[t]=n;m.trigger()}else if(s.get()==="-1 to 1"){e=n/(127/2)-1;m.trigger();d.set(e);u[t]=n}else if(s.get()==="none"){m.trigger();d.set(e);u[t]=n}else{u[t]=0;n.set(0)}}}p.set(null);p.set(u);c.set(null);c.set(e)}};Ops.Devices.Midi.MidiCC.prototype=new CABLES.Op;CABLES.OPS["28616ffc-a761-4792-9076-8625f9ccc965"]={f:Ops.Devices.Midi.MidiCC,objName:"Ops.Devices.Midi.MidiCC"};Ops.Devices.Midi.MidiNRPN=function(){CABLES.Op.apply(this,arguments);const r=this;const e={};const t=Array.from(Array(16).keys()).map(e=>e+1);const o=r.inObject("MIDI Event In");const i=r.inValueSelect("MIDI Channel",t,1);const s=r.inValueInt("NRPN Index",0);const l=r.inValueSelect("Normalize",["none","0 to 1","-1 to 1"],"none");const n=r.inTriggerButton("learn");const a=r.inTriggerButton("clear");r.setPortGroup("MIDI",[o,i]);r.setPortGroup("NRPN",[s,l]);r.setPortGroup("",[n,a]);const u=r.outObject("MIDI Event Out");const c=r.outTrigger("Trigger Out");const m=r.outValue("NRPN Index");const _=r.outValue("NRPN Value");r.setPortGroup("MIDI/Trigger Out",[u,c]);r.setPortGroup("NRPN Out",[m,_]);s.set(0);i.set(1);l.set(l.get("none"));let d=false;n.onTriggered=()=>{d=true};a.onTriggered=()=>{s.set(0);i.set(1);l.set(l.get("none"));if(r.isCurrentUiOp())gui.opParams.show(r)};var p;o.onChange=()=>{const e=o.get();if(!e)return;if(e.messageType!=="NRPN")return;const{channel:t,nrpnIndex:n,nrpnValue:a}=e;if(d){s.set(n);i.set(t+1);d=false;if(CABLES.UI){r.uiAttr({info:`bound to NRPN: ${s.get()}`});gui.opParams.show(r)}}if(t===i.get()-1){if(n===s.get()){m.set(n);p=a;if(l.get()==="0 to 1"){_.set(p/16383);c.trigger()}else if(l.get()==="-1 to 1"){_.set(p/(16383/2)-1);c.trigger()}else if(l.get()==="none"){_.set(p);c.trigger()}else _.set(0)}}u.set(null);u.set(e)}};Ops.Devices.Midi.MidiNRPN.prototype=new CABLES.Op;CABLES.OPS["2b13bc7b-c1bd-4319-9c85-86a81a6e2354"]={f:Ops.Devices.Midi.MidiNRPN,objName:"Ops.Devices.Midi.MidiNRPN"};Ops.Date.DateFormatter=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValue("Timestamp");const a=e.inObject("Date");const r=e.inString("Format","YYYY-MM-DD");const o=e.outString("StringDate");n.onChange=function(){const e=n.get();i(new Date(e))};a.onChange=function(){const e=a.get();i(e)};r.onChange=function(){i(new Date)};function i(e){const t=moment(e);const n=r.get();o.set(t.format(n))}};Ops.Date.DateFormatter.prototype=new CABLES.Op;CABLES.OPS["8933d01f-39ac-428c-a64b-902c534a4fc0"]={f:Ops.Date.DateFormatter,objName:"Ops.Date.DateFormatter"};Ops.Values.SequenceNumbers=function(){CABLES.Op.apply(this,arguments);const t=this;const e={};const n=[];const a=[];for(let e=0;e<16;e++){const r=t.inFloat("Number "+e,0);const o=t.outNumber("Output "+e);r.changeAlways=true;n.push(o);a.push(r)}for(let e=0;e<a.length;e++){const r=a[e];r.onChange=function(){for(let e=0;e<n.length;e++)n[e].set(r.get())}}};Ops.Values.SequenceNumbers.prototype=new CABLES.Op;CABLES.OPS["98e8a6cf-1f2f-4cb8-9e33-e5189e3d70ce"]={f:Ops.Values.SequenceNumbers,objName:"Ops.Values.SequenceNumbers"};Ops.Gl.Meshes.Cone=function(){CABLES.Op.apply(this,arguments);const d=this;const e={};const t=d.inTrigger("render"),a=d.inValue("slices",32),r=d.inValue("stacks",5),p=d.inValue("radius",1),o=d.inValue("height",2),n=d.inValueBool("Active",true),i=d.outTrigger("trigger"),v=d.outObject("geometry");v.ignoreValueSerialize=true;const f=d.patch.cgl;let g=null;const s=null;let h=0,b=0,x=0,O=0;let l=true;r.onChange=a.onChange=p.onChange=o.onChange=u;function u(){l=true}t.onTriggered=function(){if(l)c();if(n.get()&&g){g.render(f.getShader())}else{i.trigger();return}i.trigger()};function c(){let e=Math.round(r.get());let t=Math.round(a.get());if(e<2)e=2;if(t<2)t=2;const n=p.get();m(n,Math.max(.01,o.get()),e,t);l=false}function I(e,t){let n;const a=Math.abs(e);const r=(t?1:2)*Math.PI/e;const o=[];const i=[];o[0]=0;i[0]=1;for(n=1;n<a;n++){o[n]=Math.sin(r*n);i[n]=Math.cos(r*n)}if(t){o[a]=0;i[a]=-1}else{o[a]=o[0];i[a]=i[0]}return{cost:i,sint:o}}function m(e,t,n,a){let r=e;let o=0;const i=new CGL.Geometry(d.name);i.glPrimitive=f.gl.TRIANGLE_STRIP;i.tangents=[];i.biTangents=[];const s=I(-a+1,false);const l=t/(n>0?n:1);const u=e/(n>0?n:1);const c=t/Math.sqrt(t*t+e*e);const m=e/Math.sqrt(t*t+e*e);const _=[];i.vertices[0]=0;i.vertices[1]=0;i.vertices[2]=o;i.vertexNormals[0]=0;i.vertexNormals[1]=0;i.vertexNormals[2]=-1;i.tangents.push(1,0,0);i.biTangents.push(0,1,0);x=3;for(b=0;b<a;b++,x+=3){i.vertices[x]=s.cost[b]*r;i.vertices[x+1]=s.sint[b]*r;i.vertices[x+2]=o;i.vertexNormals[x]=0;i.vertexNormals[x+1]=0;i.vertexNormals[x+2]=-1;i.tangents[x]=1;i.tangents[x+1]=0;i.tangents[x+2]=0;i.biTangents[x]=0;i.biTangents[x+1]=1;i.biTangents[x+2]=0}for(h=0;h<n+1;h++){for(b=0;b<a;b++,x+=3){_[x/3*2]=1-b/a;_[x/3*2+1]=1-h/n;i.vertices[x]=s.cost[b]*r;i.vertices[x+1]=s.sint[b]*r;i.vertices[x+2]=o;i.vertexNormals[x]=s.cost[b]*c;i.vertexNormals[x+1]=s.sint[b]*c;i.vertexNormals[x+2]=m;i.tangents[x]=-s.sint[b]*c;i.tangents[x+1]=s.cost[b]*c;i.tangents[x+2]=m;i.biTangents[x]=s.sint[b]*c*m-s.cost[b]*c*m;i.biTangents[x+1]=m*(-s.sint[b]*c)-m*s.cost[b]*c;i.biTangents[x+2]=s.cost[b]*c*s.cost[b]*c- -s.sint[b]*c*s.sint[b]*c}o+=l;r-=u}for(b=0,x=0;b<a;b++,x+=2){_[0]=i.vertices[0]/p.get()*.5+.5;_[1]=1-i.vertices[1]/p.get()*.5+.5;_[b*2+0]=i.vertices[b*3]/p.get()*.5+.5;_[b*2+1]=1-i.vertices[b*3+1]/p.get()*.5+.5;i.verticesIndices[x]=0;i.verticesIndices[x+1]=b+1}i.verticesIndices[x]=0;i.verticesIndices[x+1]=1;_[0]=i.vertices[0]/p.get()*.5+.5;_[1]=1-i.vertices[1]/p.get()*.5+.5;_[b*2+0]=i.vertices[b*3]/p.get()*.5+.5;_[b*2+1]=1-i.vertices[b*3+1]/p.get()*.5+.5;x+=2;for(h=0;h<n;h++,x+=2){O=1+(h+1)*a;for(b=0;b<a;b++,x+=2){i.verticesIndices[x]=O+b;i.verticesIndices[x+1]=O+b+a}i.verticesIndices[x]=O;i.verticesIndices[x+1]=O+a}i.setTexCoords(_);g=new CGL.Mesh(f,i);v.set(i)}};Ops.Gl.Meshes.Cone.prototype=new CABLES.Op;CABLES.OPS["b67027f5-8f56-4aa0-8bb3-18d42ff15ffe"]={f:Ops.Gl.Meshes.Cone,objName:"Ops.Gl.Meshes.Cone"};Ops.Gl.Shader.ShaderInfo=function(){CABLES.Op.apply(this,arguments);const o=this;const e={};const t=o.inTrigger("Exec"),n=o.inTriggerButton("Show Fragment"),a=o.inTriggerButton("Show Vertex"),r=o.inTriggerButton("Show Modules"),i=o.inTriggerButton("Show Uniforms"),s=o.inTriggerButton("State Info"),l=o.outTrigger("Next"),u=o.outString("Name"),c=o.outString("Id"),m=o.outBoolNum("needsBarycentric"),_=o.outNumber("Num Uniforms"),d=o.outNumber("Num Attributes"),p=o.outArray("Arributes Names"),v=o.outArray("Num Defines");const f=o.patch.cgl;let g=null;function h(e,t,n){if(!CABLES.UI||!CABLES.UI.ModalDialog){console.log(e,t)}let a="";a+="<h2>Code</h2>";a+="<b>"+e+"</b> ";a+="<br/><br/>";a+="<br/><br/>";t=t||"";t=t.replace(/\</g,"&lt;");t=t.replace(/\>/g,"&gt;");a+='<pre><code class="'+(n||"javascript")+'">'+t+"</code></pre>";new CABLES.UI.ModalDialog({title:e,html:a});Array.from(document.querySelectorAll("pre code")).forEach(function(e){hljs.highlightBlock(e)})}n.onTriggered=function(){if(CABLES.UI&&g)h("fragment shader",g.finalShaderFrag,"GLSL")};a.onTriggered=function(){if(CABLES.UI&&g)h("vertex shader",g.finalShaderVert,"GLSL")};let b=false;let x=false;s.onTriggered=function(){if(!CABLES.UI||!g)return;b=true};i.onTriggered=function(){if(!CABLES.UI||!g)return;x=true};t.onTriggered=function(){if(f.frameStore.shadowPass)return;g=f.getShader();l.trigger();g.bind();if(!g.getProgram())o.setUiError("prognull","Shader is not compiled");else o.setUiError("prognull",null);if(!g)o.setUiError("noshader","No Shader..");else o.setUiError("noshader",null);if(g&&g.getProgram()){const t=f.gl.getProgramParameter(g.getProgram(),f.gl.ACTIVE_UNIFORMS);_.set(t);d.set(f.gl.getProgramParameter(g.getProgram(),f.gl.ACTIVE_ATTRIBUTES));let e=0;const n=[];for(e=0;e<f.gl.getProgramParameter(g.getProgram(),f.gl.ACTIVE_ATTRIBUTES);e++){const a=f.gl.getActiveAttrib(g.getProgram(),e).name;n.push(a)}p.set(n);v.set(g.getDefines());u.set(g.getName());m.set(g.wireframe);c.set(g.id);o.setUiError("prognull",null)}else{_.set(0);d.set(0);v.set(0);p.set(null)}if(x){const r=[];for(let e=0;e<g._uniforms.length;e++){r.push({validLoc:g._uniforms[e]._isValidLoc(),name:g._uniforms[e]._name,type:g._uniforms[e]._type,value:g._uniforms[e]._value,structName:g._uniforms[e]._structName,structUniformName:g._uniforms[e]._structUniformName})}h("shader uniforms",JSON.stringify(r,false,2),"json");x=false}if(b){b=false;O()}};function O(){let t="";t+="";t+="defines ("+v.get().length+")\n\n";for(let e=0;e<v.get().length;e++){t+="- ";t+=v.get()[e][0];if(v.get()[e][1]){t+=": ";t+=v.get()[e][1]}t+="\n"}t+="\n\n";t+="texturestack ("+g._textureStackUni.length+")\n\n";for(let e=0;e<g._textureStackUni.length;e++){t+="- ";t+=g._textureStackUni[e]._name;t+="("+g._textureStackUni[e].shaderType+")\n";if(g._textureStackTexCgl[e])t+=JSON.stringify(g._textureStackTexCgl[e].getInfo());t+="\n"}t+="\n\n";t+="uniforms: ("+g._uniforms.length+")\n\n";for(let e=0;e<g._uniforms.length;e++){t+="- ";t+=g._uniforms[e]._name;t+=": ";t+=g._uniforms[e].getValue();if(g._uniforms[e].comment){t+=" // ";t+=g._uniforms[e].comment}t+="\n"}h("state info",t)}r.onTriggered=function(){if(!g)return;const e=g.getCurrentModules();h("vertex shader",JSON.stringify(e,false,4),"json")}};Ops.Gl.Shader.ShaderInfo.prototype=new CABLES.Op;CABLES.OPS["7afaa77e-a976-4e65-8eb1-a6302b91c0d3"]={f:Ops.Gl.Shader.ShaderInfo,objName:"Ops.Gl.Shader.ShaderInfo"};Ops.Gl.ShaderEffects.Bend_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={bend_vert:"\n\nvoid MOD_bendDistort(inout vec3 pos, inout vec3 norm)\n{\n    pos = (MOD_transMatrix * vec4(pos, 1.0)).xyz;\n    norm = (vec4(norm, 0.0) * MOD_invTransMatrix).xyz;\n\n    float PI = 3.14159265;\n    if (abs(MOD_amount) > 1e-5) {\n        float bendAngle = MOD_amount;\n        float radius = 1.0 / bendAngle;\n\n        // float d = clamp(pos.x, MOD_range.x, MOD_range.y);\n        float d = clamp(pos.x, MOD_range.x, MOD_range.y);\n        float th = PI * 0.5 + (bendAngle * d);\n        float s = sin(th);\n        float c = cos(th);\n        pos.xy = vec2(s * (pos.x - d) - c * (radius + pos.y),\n                      c * (pos.x - d) + s * (radius + pos.y) - radius);\n        norm.xy = vec2(s * norm.x - c * norm.y,\n                       c * norm.x + s * norm.y);\n    }\n\n    pos = (MOD_invTransMatrix * vec4(pos, 1.0)).xyz;\n    norm = (vec4(norm, 0.0) * MOD_transMatrix).xyz;\n}\n"};const n=e.inTrigger("render");const a=e.inValue("Amount");const r=e.inValue("RotX");const o=e.inValue("RotY");const i=e.inValue("RotZ");const s=e.inValue("Scale",2);const l=e.inValue("Offset",.25);const u=e.inValueBool("Limited",true);const c=e.outTrigger("trigger");const m=t.bend_vert;const _="".endl()+"   MOD_bendDistort(pos.xyz, norm);".endl();const d=null;const p=null;const v=null;const f=null;const g=e.patch.cgl;let h=false;const b=mat4.create();const x=mat4.create();let O=0;function I(){h=false}r.onChange=I;o.onChange=I;i.onChange=I;s.onChange=I;l.onChange=I;const T=new CGL.ShaderModifier(g,e.name);T.addModule({name:"MODULE_VERTEX_POSITION",srcHeadVert:t.bend_vert,srcBodyVert:_});T.addUniformVert("f","MOD_amount",0);T.addUniformVert("2f","MOD_range",[0,1]);T.addUniformVert("m4","MOD_transMatrix",b);T.addUniformVert("m4","MOD_invTransMatrix",x);a.onChange=function(){O=a.get()*CGL.DEG2RAD};mat4.identity(b);mat4.identity(x);const y=vec3.create();const S=vec4.create();function A(){if(h)return;vec3.set(y,l.get(),0,0);const e=1/s.get();vec3.set(S,e,e,e);mat4.identity(b);mat4.translate(b,b,y);mat4.rotateX(b,b,r.get()*CGL.DEG2RAD);mat4.rotateY(b,b,o.get()*CGL.DEG2RAD);mat4.rotateZ(b,b,i.get()*CGL.DEG2RAD);mat4.scale(b,b,S);mat4.invert(x,b);h=true}n.onTriggered=function(){T.setUniformValue("MOD_range",u.get()?[0,1]:[-99999,99999]);A();T.bind();T.setUniformValue("MOD_amount",O);c.trigger();T.unbind()}};Ops.Gl.ShaderEffects.Bend_v2.prototype=new CABLES.Op;CABLES.OPS["7476156e-3ca3-445a-bd30-1b9373a6af4c"]={f:Ops.Gl.ShaderEffects.Bend_v2,objName:"Ops.Gl.ShaderEffects.Bend_v2"};Ops.Gl.ShaderEffects.DeformArea=function(){CABLES.Op.apply(this,arguments);const e=this;const t={deformarea_vert:"vec4 MOD_deform(vec4 pos,mat4 mMatrix)\n{\n    vec4 modelPos=pos;\n\n    #ifdef MOD_WORLDSPACE\n       modelPos=mMatrix*pos;\n    #endif\n\n    vec3 forcePos=vec3(MOD_x,MOD_y,MOD_z);\n    vec3 vecToOrigin=modelPos.xyz-forcePos;\n    float dist=abs(length(vecToOrigin));\n    float distAlpha = (MOD_size - dist) / MOD_size;\n\n    if(MOD_size > dist)\n    {\n        vec3 vecNormal=normalize(vecToOrigin);\n\n        if(MOD_smooth>0.0) distAlpha=smoothstep(0.0,MOD_size,distAlpha);\n\n        vec3 velocity = (vecNormal * distAlpha * MOD_strength );\n\n        pos.xyz+=velocity*0.1;\n    }\n\n    return pos;\n\n}\n"};const n=e.inTrigger("render"),a=e.outTrigger("trigger"),r=e.inValue("Size",1),o=e.inValue("Strength",.5),i=e.inValueBool("Smooth",true),s=e.inValueBool("WorldSpace",false),l=e.inValue("x"),u=e.inValue("y"),c=e.inValue("z");const m=e.patch.cgl;s.onChange=v;const _=t.deformarea_vert;const d="".endl()+"pos=MOD_deform(pos,mMatrix);".endl();const p=new CGL.ShaderModifier(m,e.name);p.addModule({title:e.name,name:"MODULE_VERTEX_POSITION",srcHeadVert:t.deformarea_vert,srcBodyVert:d});p.addUniformVert("f","MOD_size",r);p.addUniformVert("f","MOD_strength",o);p.addUniformVert("f","MOD_smooth",i);p.addUniformVert("f","MOD_x",l);p.addUniformVert("f","MOD_y",u);p.addUniformVert("f","MOD_z",c);n.onTriggered=function(){if(CABLES.UI){if(e.isCurrentUiOp())gui.setTransformGizmo({posX:l,posY:u,posZ:c});if(m.shouldDrawHelpers(e)){m.pushModelMatrix();mat4.translate(m.mMatrix,m.mMatrix,[l.get(),u.get(),c.get()]);CABLES.GL_MARKER.drawSphere(e,r.get());m.popModelMatrix()}}p.bind();a.trigger();p.unbind()};function v(){p.toggleDefine("MOD_WORLDSPACE",s.get())}};Ops.Gl.ShaderEffects.DeformArea.prototype=new CABLES.Op;CABLES.OPS["6c40cfcb-75c8-4c64-bc13-c37faaea73df"]={f:Ops.Gl.ShaderEffects.DeformArea,objName:"Ops.Gl.ShaderEffects.DeformArea"};Ops.Systems.ArraySpray=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("exe");const o=e.inValue("time");const a=e.inValue("num",100);const i=e.inValue("Size X");const s=e.inValue("Size Y");const l=e.inValue("Size Z");const u=e.inValue("movement x",1);const c=e.inValue("movement y",1);const m=e.inValue("movement z",1);const _=e.inBool("Center X",false);const d=e.inBool("Center Y",false);const p=e.inBool("Center Z",false);const r=e.inTriggerButton("Reset");const v=e.inValue("lifetime",10);const f=e.inValue("Lifetime Minimum",5);const g=e.outTrigger("Trigger Out"),h=e.outArray("Positions"),b=e.outArray("Lifetime");r.onTriggered=A;const x=e.patch.cgl;const O=[];const I=vec3.create();const T=[];const y=[];a.onChange=i.onChange=s.onChange=l.onChange=v.onChange=_.onChange=d.onChange=p.onChange=f.onChange=A;A();function S(){this.pos=null;this.startPos=null;this.startTime=0;this.lifeTime=0;this.lifeTimePercent=0;this.endTime=0;this.pos=[0,0,0];this.moveVec=[0,0,0];this.idDead=false;this.random1=Math.random();this.random2=Math.random();this.random3=Math.random();this.update=function(e){const t=e-this.startTime;if(e>this.endTime)this.isDead=true;this.lifeTimePercent=t/this.lifeTime;this.pos=vec3.fromValues(this.startPos[0]+t*this.moveVec[0],this.startPos[1]+t*this.moveVec[1],this.startPos[2]+t*this.moveVec[2])};this.reAnimate=function(e){this.isDead=false;this.lifeTime=Math.random()*(v.get()-f.get())+f.get();if(e!==undefined){this.startTime=e;this.endTime=e+this.lifeTime}else{this.startTime=o.get()-this.lifeTime*Math.random();this.endTime=o.get()+this.lifeTime*Math.random()}let t=Math.random();if(_.get())t-=.5;const n=t*i.get();t=Math.random();if(d.get())t-=.5;const a=t*s.get();t=Math.random();if(p.get())t-=.5;const r=t*l.get();this.startPos=vec3.fromValues(n,a,r);this.moveVec=[Math.random()*u.get(),Math.random()*c.get(),Math.random()*m.get()]};this.reAnimate(0)}n.onTriggered=function(){const t=o.get();if(T.length!=O.length*3)T.length=O.length*3;if(y.length!=O.length)y.length=O.length;for(let e=0;e<O.length;e++){if(O[e].isDead)O[e].reAnimate(t);O[e].update(t);T[e*3+0]=O[e].pos[0];T[e*3+1]=O[e].pos[1];T[e*3+2]=O[e].pos[2];y[e]=O[e].lifeTimePercent;if(y[e]>1)y[e]=1}h.set(null);b.set(null);h.set(T);b.set(y);g.trigger()};function A(){O.length=0;for(let e=0;e<a.get();e++){const t=new S;t.reAnimate();O.push(t)}}};Ops.Systems.ArraySpray.prototype=new CABLES.Op;CABLES.OPS["27023519-9e88-4b85-9fcf-b316847e0df7"]={f:Ops.Systems.ArraySpray,objName:"Ops.Systems.ArraySpray"};Ops.Array.Array3FlipAxis=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const r=e.inArray("Points",3),o=e.inSwitch("Axis 1",["X","Y","Z"],"X"),i=e.inSwitch("Axis 2",["X","Y","Z"],"Y"),s=e.inSwitch("Axis 3",["X","Y","Z"],"Z"),l=e.inBool("Flip Order X",false),u=e.inBool("Flip Order Y",false),c=e.inBool("Flip Order Z",false),m=e.outArray("Result");const _=[];r.onChange=l.onChange=u.onChange=c.onChange=o.onChange=i.onChange=s.onChange=()=>{const t=r.get();if(!t||t.length==0){m.set(null);return}_.length=t.length;let n=t.length;if(o.get()=="X")for(let e=0;e<n;e+=3)_[e+0]=t[e+0];if(o.get()=="Y")for(let e=0;e<n;e+=3)_[e+0]=t[e+1];if(o.get()=="Z")for(let e=0;e<n;e+=3)_[e+0]=t[e+2];if(i.get()=="X")for(let e=0;e<n;e+=3)_[e+1]=t[e+0];if(i.get()=="Y")for(let e=0;e<n;e+=3)_[e+1]=t[e+1];if(i.get()=="Z")for(let e=0;e<n;e+=3)_[e+1]=t[e+2];if(s.get()=="X")for(let e=0;e<n;e+=3)_[e+2]=t[e+0];if(s.get()=="Y")for(let e=0;e<n;e+=3)_[e+2]=t[e+1];if(s.get()=="Z")for(let e=0;e<n;e+=3)_[e+2]=t[e+2];const e=n;if(l.get())for(let e=0;e<n/2;e+=3){const a=_[e+0];_[e+0]=_[n-e];_[n-e]=a}if(u.get())for(let e=0;e<n/2;e+=3){const a=_[e+1];_[e+1]=_[n-e+1];_[n-e+1]=a}if(c.get())for(let e=0;e<n/2;e+=3){const a=_[e+2];_[e+2]=_[n-e+2];_[n-e+2]=a}m.set(null);m.set(_)}};Ops.Array.Array3FlipAxis.prototype=new CABLES.Op;CABLES.OPS["1a9a0178-5906-423b-b8f3-0532499ba169"]={f:Ops.Array.Array3FlipAxis,objName:"Ops.Array.Array3FlipAxis"};Ops.Array.Array3Multiply=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};let n=e.inArray("Array3x",3);let a=e.inValue("Mul X",1);let r=e.inValue("Mul Y",1);let o=e.inValue("Mul Z",1);let i=e.outArray("Result");let s=[];r.onChange=a.onChange=o.onChange=n.onChange=function(){let t=n.get();if(t){if(s.length!=t.length)s.length=t.length;for(let e=0;e<t.length;e+=3){s[e+0]=t[e+0]*a.get();s[e+1]=t[e+1]*r.get();s[e+2]=t[e+2]*o.get()}i.set(null);i.set(s)}else{i.set(null)}}};Ops.Array.Array3Multiply.prototype=new CABLES.Op;CABLES.OPS["a1e4d85f-0955-4ada-819c-c597cec40365"]={f:Ops.Array.Array3Multiply,objName:"Ops.Array.Array3Multiply"};Ops.Gl.TextureFromColorArray=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("Update"),o=e.inArray("array"),i=e.inValueInt("width",32),s=e.inValueInt("height",32),a=e.inSwitch("Filter",["nearest","linear","mipmap"],"nearest"),r=e.inValueSelect("Wrap",["repeat","mirrored repeat","clamp to edge"],"repeat"),l=e.outTrigger("Next"),u=e.outTexture("Texture out");n.onTriggered=g;const c=e.patch.cgl;let m=new CGL.Texture(c);let _=true;let d=new Uint8Array(8);let p=CGL.Texture.FILTER_NEAREST;let v=CGL.Texture.WRAP_REPEAT;a.onChange=r.onChange=i.onChange=s.onChange=function(){if(m)m.delete();m=null;_=true;if(a.get()=="nearest")p=CGL.Texture.FILTER_NEAREST;else if(a.get()=="linear")p=CGL.Texture.FILTER_LINEAR;else if(a.get()=="mipmap")p=CGL.Texture.FILTER_MIPMAP;else if(a.get()=="Anisotropic")p=CGL.Texture.FILTER_ANISOTROPIC;if(r.get()=="repeat")v=CGL.Texture.WRAP_REPEAT;else if(r.get()=="mirrored repeat")v=CGL.Texture.WRAP_MIRRORED_REPEAT;else if(r.get()=="clamp to edge")v=CGL.Texture.WRAP_CLAMP_TO_EDGE};const f=CGL.Texture.getEmptyTexture(c);function g(){let e=false;let t=i.get();let n=s.get();let a=o.get();if(t<=0||n<=0||!a)e=true;if(e){u.set(f);return}if(_){d=new Uint8Array(t*n*4);_=false}let r=0;for(r=0;r<a.length;r++){d[r]=a[r]*255}for(r=a.length;r<t*n*4;r++){d[r]=255}if(!m)m=new CGL.Texture(c);m.initFromData(d,t,n,p,v);u.set(m);l.trigger()}};Ops.Gl.TextureFromColorArray.prototype=new CABLES.Op;CABLES.OPS["7984c105-5b33-471a-833c-0fb310916e30"]={f:Ops.Gl.TextureFromColorArray,objName:"Ops.Gl.TextureFromColorArray"};Ops.Gl.Textures.ColorTexture=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValueSlider("r",Math.random()),a=e.inValueSlider("g",Math.random()),r=e.inValueSlider("b",Math.random()),o=e.inValueSlider("a",1),i=e.outTexture("texture_out");n.setUiAttribs({colorPick:true});const s=e.patch.cgl;let l=null;n.onChange=a.onChange=r.onChange=o.onChange=()=>{s.addNextFrameOnceCallback(u)};s.addNextFrameOnceCallback(u);function u(){if(!l){if(s.glVersion==1)l=new CGL.Framebuffer(s,8,8,{name:"colorTexture"});else l=new CGL.Framebuffer2(s,8,8,{name:"colorTexture",depth:false});l.setFilter(CGL.Texture.FILTER_MIPMAP)}l.renderStart();s.gl.clearColor(n.get(),a.get(),r.get(),o.get());s.gl.clear(s.gl.COLOR_BUFFER_BIT);l.renderEnd();i.set(l.getTextureColor())}};Ops.Gl.Textures.ColorTexture.prototype=new CABLES.Op;CABLES.OPS["59b94270-0364-4c0f-a9fc-ba2561696a23"]={f:Ops.Gl.Textures.ColorTexture,objName:"Ops.Gl.Textures.ColorTexture"};Ops.Array.AnimArray_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("Update"),a=e.inArray("Next Array"),r=e.inFloat("Duration",1),o=e.outTrigger("Next"),i=e.outArray("Matrix");let s=0;let l=0;let u=true;let c=1;const m=new CABLES.Anim;m.createPort(e,"easing",g);m.loop=false;let _=null;r.onChange=a.onChange=g;let d,p;let v=[];n.onTriggered=()=>{let e=CABLES.now()/1e3;const t=m.getValue(e);if(d&&p)b(t)};function f(t){let n=[];n.length=t.length;for(let e=0;e<t.length;e++)n[e]=t[e];return n}function g(){if(!a.get())return;_=a.get();l=performance.now();m.clear(CABLES.now()/1e3);m.setValue(CABLES.now()/1e3,c);if(c==1)c=0;else c=1;if(v.length!=_.length)v=f(_);if(c==0){d=a.get();p=f(v)}else{d=f(v);p=a.get()}m.setValue(r.get()+CABLES.now()/1e3,c);u=false}function h(e,t,n){return(t-e)*n+e}function b(t){if(!d||!p||d.length!=p.length){i.set(null);e.logError("arrays wrong",d.length,p.length)}else{for(let e=0;e<d.length;e++){v[e]=h(d[e],p[e],t)}i.set(null);i.set(v)}o.trigger()}};Ops.Array.AnimArray_v2.prototype=new CABLES.Op;CABLES.OPS["048e852b-62ea-4314-b6f2-9ac5e7cbb066"]={f:Ops.Array.AnimArray_v2,objName:"Ops.Array.AnimArray_v2"};Ops.Array.Array3GetNumbers=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inArray("Array",3),a=e.inValueInt("Index"),r=e.outNumber("X"),o=e.outNumber("Y"),i=e.outNumber("Z");n.onChange=a.onChange=s;function s(){let e=n.get();if(!e){r.set(0);o.set(0);i.set(0);return}let t=Math.min(e.length-3,a.get()*3);if(e){r.set(e[t+0]);o.set(e[t+1]);i.set(e[t+2])}}};Ops.Array.Array3GetNumbers.prototype=new CABLES.Op;CABLES.OPS["56882cc4-c40d-4dc0-bf7c-db1b5a7acad0"]={f:Ops.Array.Array3GetNumbers,objName:"Ops.Array.Array3GetNumbers"};Ops.Math.Pow=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValueFloat("Base");const a=e.inValueFloat("Exponent");const r=e.outValue("Result");a.set(2);n.onChange=o;a.onChange=o;function o(){let e=Math.pow(n.get(),a.get());if(isNaN(e))e=0;r.set(e)}};Ops.Math.Pow.prototype=new CABLES.Op;CABLES.OPS["3bb3f98f-27d6-44c4-b4e5-186e10f0809d"]={f:Ops.Math.Pow,objName:"Ops.Math.Pow"};Ops.Math.Sum=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValueFloat("number1",1),a=e.inValueFloat("number2",1),r=e.outValue("result");n.onChange=a.onChange=o;o();function o(){const e=n.get()+a.get();if(!isNaN(e))r.set(e)}};Ops.Math.Sum.prototype=new CABLES.Op;CABLES.OPS["c8fb181e-0b03-4b41-9e55-06b6267bc634"]={f:Ops.Math.Sum,objName:"Ops.Math.Sum"};Ops.Math.Multiply=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValueFloat("number1",1);const a=e.inValueFloat("number2",2);const r=e.outValue("result");n.onChange=a.onChange=o;o();function o(){const e=n.get();const t=a.get();r.set(e*t)}};Ops.Math.Multiply.prototype=new CABLES.Op;CABLES.OPS["1bbdae06-fbb2-489b-9bcc-36c9d65bd441"]={f:Ops.Math.Multiply,objName:"Ops.Math.Multiply"};Ops.Gl.TextureEffects.Blur=function(){CABLES.Op.apply(this,arguments);const e=this;const t={blur_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI float dirX;\nUNI float dirY;\nUNI float amount;\n\n#ifdef HAS_MASK\n    UNI sampler2D imageMask;\n#endif\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main()\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float am=amount;\n    #ifdef HAS_MASK\n        am=amount*texture(imageMask,texCoord).r;\n        if(am<=0.02)\n        {\n            outColor=texture(tex, texCoord);\n            return;\n        }\n    #endif\n\n    vec2 delta=vec2(dirX*am*0.01,dirY*am*0.01);\n\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    #ifdef MOBILE\n        offset = 0.1;\n    #endif\n\n    #if defined(FASTBLUR) && !defined(MOBILE)\n        const float range=5.0;\n    #else\n        const float range=20.0;\n    #endif\n\n    for (float t = -range; t <= range; t+=1.0)\n    {\n        float percent = (t + offset - 0.5) / range;\n        float weight = 1.0 - abs(percent);\n        vec4 smpl = texture(tex, texCoord + delta * percent);\n\n        smpl.rgb *= smpl.a;\n\n        color += smpl * weight;\n        total += weight;\n    }\n\n    outColor= color / total;\n\n    outColor.rgb /= outColor.a + 0.00001;\n\n\n\n}\n"};const n=e.inTrigger("render");const a=e.outTrigger("trigger");const r=e.inValueFloat("amount");const o=e.inSwitch("direction",["both","vertical","horizontal"],"both");const i=e.inValueBool("Fast",true);const s=e.patch.cgl;r.set(10);let l=new CGL.Shader(s,"blur");l.define("FASTBLUR");i.onChange=function(){if(i.get())l.define("FASTBLUR");else l.removeDefine("FASTBLUR")};l.setSource(l.getDefaultVertexShader(),t.blur_frag);let u=new CGL.Uniform(l,"t","tex",0);let c=new CGL.Uniform(l,"f","dirX",0);let m=new CGL.Uniform(l,"f","dirY",0);let _=new CGL.Uniform(l,"f","width",0);let d=new CGL.Uniform(l,"f","height",0);let p=new CGL.Uniform(l,"f","amount",r.get());r.onChange=function(){p.setValue(r.get())};let v=new CGL.Uniform(l,"t","imageMask",1);let f=false;function g(){if(s.currentTextureEffect.getCurrentSourceTexture().width==s.canvasWidth&&s.currentTextureEffect.getCurrentSourceTexture().height==s.canvasHeight){e.setUiError("warning","Full screen blurs are slow! Try reducing the resolution to 1/2 or a 1/4",0)}else{e.setUiError("warning",null)}}let h=0;o.onChange=function(){if(o.get()=="both")h=0;if(o.get()=="horizontal")h=1;if(o.get()=="vertical")h=2};let b=e.inTexture("mask");b.onChange=function(){if(b.get()&&b.get().tex)l.define("HAS_MASK");else l.removeDefine("HAS_MASK")};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;s.pushShader(l);_.setValue(s.currentTextureEffect.getCurrentSourceTexture().width);d.setValue(s.currentTextureEffect.getCurrentSourceTexture().height);g();if(h===0||h==2){s.currentTextureEffect.bind();s.setTexture(0,s.currentTextureEffect.getCurrentSourceTexture().tex);if(b.get()&&b.get().tex){s.setTexture(1,b.get().tex)}c.setValue(0);m.setValue(1);s.currentTextureEffect.finish()}if(h===0||h==1){s.currentTextureEffect.bind();s.setTexture(0,s.currentTextureEffect.getCurrentSourceTexture().tex);if(b.get()&&b.get().tex){s.setTexture(1,b.get().tex)}c.setValue(1);m.setValue(0);s.currentTextureEffect.finish()}s.popShader();a.trigger()}};Ops.Gl.TextureEffects.Blur.prototype=new CABLES.Op;CABLES.OPS["54f26f53-f637-44c1-9bfb-a2f2b722e998"]={f:Ops.Gl.TextureEffects.Blur,objName:"Ops.Gl.TextureEffects.Blur"};Ops.Math.Divide=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValueFloat("number1",1),a=e.inValueFloat("number2",2),r=e.outValue("result");n.onChange=a.onChange=o;o();function o(){r.set(n.get()/a.get())}};Ops.Math.Divide.prototype=new CABLES.Op;CABLES.OPS["86fcfd8c-038d-4b91-9820-a08114f6b7eb"]={f:Ops.Math.Divide,objName:"Ops.Math.Divide"};Ops.Gl.TextureEffects.BarrelDistortion_v2=function(){CABLES.Op.apply(this,arguments);const t=this;const e={barreldistort_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI float amount;\nUNI float intensity;\n\n{{CGL.BLENDMODES}}\n\n// adapted from https://www.shadertoy.com/view/MlSXR3\n\nvec2 brownConradyDistortion(vec2 uv)\n{\n// positive values of K1 give barrel distortion, negative give pincushion\n    float barrelDistortion1 = intensity*10.; // K1 in text books\n    float barrelDistortion2 = 0.; // K2 in text books\n    float r2 = uv.x*uv.x + uv.y*uv.y;\n    uv *= 1.0 + barrelDistortion1 * r2 + barrelDistortion2 * r2 * r2;\n\n    // tangential distortion (due to off center lens elements)\n    // is not modeled in this function, but if it was, the terms would go here\n    return uv;\n}\n\nvoid main()\n{\n   vec2 tc=brownConradyDistortion(texCoord-0.5)+0.5;\n   vec4 col=texture(tex,texCoord);\n   outColor=cgl_blend(col,texture(tex,tc),amount);\n}"};const n=t.inTrigger("render"),a=CGL.TextureEffect.AddBlendSelect(t,"Blend Mode","normal"),r=t.inValueSlider("Amount",1),o=t.inValue("Intensity",10),i=t.outTrigger("Trigger");const s=t.patch.cgl;const l=new CGL.Shader(s,t.name);l.setSource(l.getDefaultVertexShader(),e.barreldistort_frag);const u=new CGL.Uniform(l,"t","tex",0),c=new CGL.Uniform(l,"f","intensity",0),m=new CGL.Uniform(l,"f","amount",r);CGL.TextureEffect.setupBlending(t,l,a,r);n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(t))return;let e=s.currentTextureEffect.getCurrentSourceTexture();c.setValue(o.get()*(1/e.width));s.pushShader(l);s.currentTextureEffect.bind();s.setTexture(0,e.tex);s.currentTextureEffect.finish();s.popShader();i.trigger()}};Ops.Gl.TextureEffects.BarrelDistortion_v2.prototype=new CABLES.Op;CABLES.OPS["6ac723ad-5442-435a-b600-e18ba82ceff7"]={f:Ops.Gl.TextureEffects.BarrelDistortion_v2,objName:"Ops.Gl.TextureEffects.BarrelDistortion_v2"};Ops.Math.Compare.IfBetweenThen=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};var n=e.inTrigger("exe");var a=e.inValue("number",0);var r=e.inValue("min",0);var o=e.inValue("max",1);var i=e.outTrigger("then");var s=e.outTrigger("else");var l=e.outValue("bs between");n.onTriggered=function(){if(a.get()>=r.get()&&a.get()<o.get()){l.set(true);i.trigger()}else{l.set(false);s.trigger()}}};Ops.Math.Compare.IfBetweenThen.prototype=new CABLES.Op;CABLES.OPS["c80437f0-f0e1-465c-9cea-8a044aa2feaa"]={f:Ops.Math.Compare.IfBetweenThen,objName:"Ops.Math.Compare.IfBetweenThen"};Ops.Math.Subtract=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inValue("number1",1),a=e.inValue("number2",1),r=e.outValue("result");n.onChange=o;a.onChange=o;o();function o(){var e=n.get()-a.get();if(!isNaN(e))r.set(e)}};Ops.Math.Subtract.prototype=new CABLES.Op;CABLES.OPS["a4ffe852-d200-4b96-9347-68feb01122ca"]={f:Ops.Math.Subtract,objName:"Ops.Math.Subtract"};Ops.Trigger.TriggerOnce=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTriggerButton("Exec"),a=e.inTriggerButton("Reset"),r=e.outTrigger("Next");var o=e.outValue("Was Triggered");var i=false;e.toWorkPortsNeedToBeLinked(n);a.onTriggered=function(){i=false;o.set(i)};n.onTriggered=function(){if(i)return;i=true;r.trigger();o.set(i)}};Ops.Trigger.TriggerOnce.prototype=new CABLES.Op;CABLES.OPS["cf3544e4-e392-432b-89fd-fcfb5c974388"]={f:Ops.Trigger.TriggerOnce,objName:"Ops.Trigger.TriggerOnce"};Ops.Anim.SimpleAnim=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("exe"),a=e.inTriggerButton("reset"),r=e.inTriggerButton("rewind"),o=e.inValueFloat("start",0),i=e.inValueFloat("end",1),s=e.inValueFloat("duration",.5),l=e.inValueBool("loop"),u=e.inValueBool("Wait for Reset",true),c=e.outTrigger("Next"),m=e.outValue("result"),_=e.outValue("finished"),d=e.outTrigger("Finished Trigger");const p=new CABLES.Anim;var v=false;p.createPort(e,"easing",g);var f=-1;l.onChange=g;g();s.onChange=g;function g(){if(p.keys.length!=3){p.setValue(0,0);p.setValue(1,0);p.setValue(2,0)}p.keys[0].time=CABLES.now()/1e3;p.keys[0].value=o.get();if(p.defaultEasing!=f)p.keys[0].setEasing(p.defaultEasing);p.keys[1].time=s.get()+CABLES.now()/1e3;p.keys[1].value=i.get();if(p.defaultEasing!=f)p.keys[1].setEasing(p.defaultEasing);p.loop=l.get();if(p.loop){p.keys[2].time=2*s.get()+CABLES.now()/1e3;p.keys[2].value=o.get();if(p.defaultEasing!=f)p.keys[2].setEasing(p.defaultEasing)}else{p.keys[2].time=p.keys[1].time;p.keys[2].value=p.keys[1].value;if(p.defaultEasing!=f)p.keys[2].setEasing(p.defaultEasing)}_.set(false);f=p.defaultEasing}a.onTriggered=function(){v=true;g()};r.onTriggered=function(){p.keys[0].time=CABLES.now()/1e3;p.keys[0].value=o.get();p.keys[1].time=CABLES.now()/1e3;p.keys[1].value=o.get();p.keys[2].time=CABLES.now()/1e3;p.keys[2].value=o.get();m.set(o.get())};n.onTriggered=function(){if(u.get()&&!v){m.set(o.get());return}var e=CABLES.now()/1e3;var t=p.getValue(e);m.set(t);if(p.hasEnded(e)){if(!_.get())d.trigger();_.set(true)}c.trigger()}};Ops.Anim.SimpleAnim.prototype=new CABLES.Op;CABLES.OPS["5b244b6e-c505-4743-b2cc-8119ef720028"]={f:Ops.Anim.SimpleAnim,objName:"Ops.Anim.SimpleAnim"};Ops.Gl.TextureEffects.LumaKey_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={lumakeyV2_frag:"IN vec2 texCoord;\nUNI float threshholdLow;\nUNI float threshholdHigh;\nUNI sampler2D text;\n\nvoid main()\n{\n   vec4 col = texture(text, texCoord );\n\n   float gray = dot(vec3(0.2126,0.7152,0.0722), col.rgb );\n\n   #ifndef INVERT\n       if(gray < threshholdLow || gray > threshholdHigh) col.r=col.g=col.b=col.a=0.0;\n       #ifdef BLACKWHITE\n           else col.r=col.g=col.b=col.a=1.0;\n       #endif\n   #endif\n\n   #ifdef INVERT\n       if(gray > threshholdLow && gray < threshholdHigh) col.r=col.g=col.b=col.a=0.0;\n       #ifdef BLACKWHITE\n           else col.r=col.g=col.b=col.a=1.0;\n       #endif\n   #endif\n\n   outColor= col;\n}"};const n=e.inTrigger("render"),a=e.outTrigger("trigger"),r=e.inValueBool("Invert"),o=e.inValueBool("Black White"),i=e.inValueSlider("Threshold low ",.5),s=e.inValueSlider("Threshold high",1);const l=e.patch.cgl;const u=new CGL.Shader(l,"lumakey");u.setSource(u.getDefaultVertexShader(),t.lumakeyV2_frag);const c=new CGL.Uniform(u,"t","tex",0);const m=new CGL.Uniform(u,"f","threshholdLow",i);const _=new CGL.Uniform(u,"f","threshholdHigh",s);o.onChange=function(){if(o.get())u.define("BLACKWHITE");else u.removeDefine("BLACKWHITE")};r.onChange=function(){if(r.get())u.define("INVERT");else u.removeDefine("INVERT")};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;l.pushShader(u);l.currentTextureEffect.bind();l.setTexture(0,l.currentTextureEffect.getCurrentSourceTexture().tex);l.currentTextureEffect.finish();l.popShader();a.trigger()}};Ops.Gl.TextureEffects.LumaKey_v2.prototype=new CABLES.Op;CABLES.OPS["1699f3fc-355b-4497-a23c-1620a04a9cd4"]={f:Ops.Gl.TextureEffects.LumaKey_v2,objName:"Ops.Gl.TextureEffects.LumaKey_v2"};Ops.Value.TriggerOnChangeNumber=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inFloat("Value"),a=e.outTrigger("Next"),r=e.outNumber("Number");n.onChange=function(){r.set(n.get());a.trigger()}};Ops.Value.TriggerOnChangeNumber.prototype=new CABLES.Op;CABLES.OPS["f5c8c433-ce13-49c4-9a33-74e98f110ed0"]={f:Ops.Value.TriggerOnChangeNumber,objName:"Ops.Value.TriggerOnChangeNumber"};Ops.Trigger.TriggerIfIncreased=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inFloat("Value"),a=e.outTrigger("Trigger");let r=-Number.MAX_VALUE;n.onChange=function(){const e=n.get();if(e>r){a.trigger()}r=e}};Ops.Trigger.TriggerIfIncreased.prototype=new CABLES.Op;CABLES.OPS["bc820891-48c7-4287-9b5e-4196e192741b"]={f:Ops.Trigger.TriggerIfIncreased,objName:"Ops.Trigger.TriggerIfIncreased"};Ops.Math.Incrementor=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTriggerButton("Increment");const a=e.inTriggerButton("Decrement");const r=e.inValueInt("Length");const o=e.inBool("Limit",true);const i=e.inTriggerButton("Reset");const s=e.inSwitch("Mode",["Rewind","Stop at Max"],"Rewind");const l=e.inValueInt("Default",0);const u=e.outTrigger("Changed");const c=e.outValue("Value");const m=e.outTrigger("Restarted");c.ignoreValueSerialize=true;r.set(10);let _=0;c.set(0);r.onTriggered=i;l.onChange=f;i.onTriggered=f;const d=0;const p=1;let v=d;s.onChange=function(){if(s.get()=="Rewind"){v=d}if(s.get()=="Stop at Max"){v=p}};o.onChange=()=>{r.setUiAttribs({greyout:!o.get()})};function f(){c.set(null);_=l.get();c.set(_);m.trigger()}a.onTriggered=function(){_--;if(o.get()){if(v==d&&_<0)_=r.get()-1;if(v==p&&_<0)_=0}c.set(_);u.trigger()};n.onTriggered=function(){_++;if(o.get()){if(v==d&&_>=r.get()){_=0;m.trigger()}if(v==p&&_>=r.get())_=r.get()-1}c.set(_);u.trigger()}};Ops.Math.Incrementor.prototype=new CABLES.Op;CABLES.OPS["45cc0011-ada8-4423-8f5b-39a3810b8389"]={f:Ops.Math.Incrementor,objName:"Ops.Math.Incrementor"};Ops.Gl.Texture_v2=function(){CABLES.Op.apply(this,arguments);const r=this;const e={};const o=r.inUrl("File",[".jpg",".png",".webp",".jpeg",".avif"]),t=r.inSwitch("Filter",["nearest","linear","mipmap"]),n=r.inValueSelect("Wrap",["repeat","mirrored repeat","clamp to edge"],"clamp to edge"),a=r.inSwitch("Anisotropic",[0,1,2,4,8,16],0),i=r.inValueBool("Flip",false),s=r.inValueBool("Pre Multiplied Alpha",false),l=r.inValueBool("Active",true),u=r.inBool("Save Memory",true),c=r.outTexture("Texture"),m=r.outNumber("Width"),_=r.outNumber("Height"),d=r.outNumber("Aspect Ratio"),p=r.outNumber("Loaded",false),v=r.outNumber("Loading",false);r.setPortGroup("Size",[m,_]);s.setUiAttribs({hidePort:true});r.toWorkPortsNeedToBeLinked(c);const f=r.patch.cgl;let g=null;let h=null;let b=null;let x=CGL.Texture.FILTER_MIPMAP;let O=CGL.Texture.WRAP_REPEAT;let I=0;let T=0;o.onChange=i.onChange=function(){S()};a.onChange=t.onChange=M;n.onChange=C;s.onChange=function(){S()};t.set("mipmap");n.set("repeat");c.set(CGL.Texture.getEmptyTexture(f));l.onChange=function(){if(l.get()){if(g!=o.get()||!b)S();else c.set(b)}else{c.set(CGL.Texture.getEmptyTexture(f));m.set(CGL.Texture.getEmptyTexture(f).width);_.set(CGL.Texture.getEmptyTexture(f).height);if(b)b.delete();b=null}};const y=function(){const e=CGL.Texture.getTempTexture(f);c.set(e)};function S(e){clearTimeout(T);T=setTimeout(function(){A(e)},30)}function A(e){if(!l.get())return;if(!h)h=f.patch.loading.start("textureOp",o.get());let t=r.patch.getFilePath(String(o.get()));if(e)t+="?rnd="+CABLES.uuid();if(String(o.get()).indexOf("data:")==0)t=o.get();let n=false;if(g!=o.get())n=true;g=o.get();if(o.get()&&o.get().length>1){p.set(false);v.set(true);const a=o.get();r.setUiAttrib({extendTitle:CABLES.basename(t)});if(n)r.refreshParams();f.patch.loading.addAssetLoadingTask(()=>{r.setUiError("urlerror",null);CGL.Texture.load(f,t,function(e,t){if(o.get()!=a){f.patch.loading.finished(h);h=null;return}if(e){y();r.setUiError("urlerror",'could not load texture:<br/>"'+o.get()+'"',2);f.patch.loading.finished(h);return}c.set(t);m.set(t.width);_.set(t.height);d.set(t.width/t.height);if(!t.isPowerOfTwo())r.setUiError("npot","Texture dimensions not power of two! - Texture filtering will not work in WebGL 1.",0);else r.setUiError("npot",null);if(b)b.delete();b=t;c.set(null);c.set(b);v.set(false);p.set(true);if(u.get())b.image=null;f.patch.loading.finished(h)},{anisotropic:I,wrap:O,flip:i.get(),unpackAlpha:s.get(),filter:x})})}else{f.patch.loading.finished(h);y()}}function M(){if(t.get()=="nearest")x=CGL.Texture.FILTER_NEAREST;else if(t.get()=="linear")x=CGL.Texture.FILTER_LINEAR;else if(t.get()=="mipmap")x=CGL.Texture.FILTER_MIPMAP;else if(t.get()=="Anisotropic")x=CGL.Texture.FILTER_ANISOTROPIC;I=parseFloat(a.get());S()}function C(){if(n.get()=="repeat")O=CGL.Texture.WRAP_REPEAT;if(n.get()=="mirrored repeat")O=CGL.Texture.WRAP_MIRRORED_REPEAT;if(n.get()=="clamp to edge")O=CGL.Texture.WRAP_CLAMP_TO_EDGE;S()}r.onFileChanged=function(e){if(o.get()&&o.get().indexOf(e)>-1){c.set(CGL.Texture.getEmptyTexture(r.patch.cgl));c.set(CGL.Texture.getTempTexture(f));A(true)}}};Ops.Gl.Texture_v2.prototype=new CABLES.Op;CABLES.OPS["790f3702-9833-464e-8e37-6f0f813f7e16"]={f:Ops.Gl.Texture_v2,objName:"Ops.Gl.Texture_v2"};Ops.Gl.TextureEffects.RotateTexture=function(){CABLES.Op.apply(this,arguments);const e=this;const t={rotate_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI sampler2D multiplierTex;\nUNI float amount;\nUNI float resX;\nUNI float resY;\nUNI float rotate;\n\n{{CGL.BLENDMODES}}\n\n#define PI 3.14159265\n#define TAU (2.0*PI)\n\nvoid pR(inout vec2 p, float a)\n{\n\tp = cos(a)*p + sin(a)*vec2(p.y, -p.x);\n}\n\nvoid main()\n{\n    float multiplier = 0.0;\n\n    #ifdef ROTATE_TEXTURE\n        multiplier = dot(vec3(0.2126,0.7152,0.0722), texture(multiplierTex,texCoord).rgb);\n    #endif\n\n    vec2 uv = texCoord;\n    vec2 res = vec2(resX,resY);\n    uv -= 0.5;\n    pR(uv.xy,(rotate + multiplier) * (TAU)  );\n    uv += 0.5;\n\n    #ifdef CROP_IMAGE\n    if(uv.x>1.0 ||uv.x<0.0  || uv.y>1.0 ||uv.y<0.0 )\n    {\n        discard;\n        return;\n    }\n    #endif\n\n    //blend section\n    vec4 col=texture(tex,uv);\n    //original texture\n    vec4 base=texture(tex,texCoord);\n    // outColor= col;\n    outColor=cgl_blend(base,col,amount);\n}"};const n=e.inTrigger("render"),a=e.inTexture("Multiplier"),r=CGL.TextureEffect.AddBlendSelect(e,"Blend Mode","normal"),o=e.inValueSlider("Amount",1),i=e.inValueSlider("Rotate",.125),s=e.inValueBool("Crop",true),l=e.outTrigger("trigger");const u=e.patch.cgl;const c=new CGL.Shader(u,"rotatetexture");c.setSource(c.getDefaultVertexShader(),t.rotate_frag);const m=new CGL.Uniform(c,"t","tex",0);const _=new CGL.Uniform(c,"t","multiplierTex",1);const d=new CGL.Uniform(c,"f","amount",o);const p=new CGL.Uniform(c,"f","rotate",i);s.onChange=v;v();CGL.TextureEffect.setupBlending(e,c,r,o);function v(){c.toggleDefine("CROP_IMAGE",s.get())}a.onChange=function(){c.toggleDefine("ROTATE_TEXTURE",a.isLinked())};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;u.pushShader(c);u.currentTextureEffect.bind();u.setTexture(0,u.currentTextureEffect.getCurrentSourceTexture().tex);if(a.get())u.setTexture(1,a.get().tex);u.currentTextureEffect.finish();u.popShader();l.trigger()}};Ops.Gl.TextureEffects.RotateTexture.prototype=new CABLES.Op;CABLES.OPS["207bf2af-a3fc-458d-9efb-eb108a854072"]={f:Ops.Gl.TextureEffects.RotateTexture,objName:"Ops.Gl.TextureEffects.RotateTexture"};Ops.Value.ValueChangeCounter=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};var n=e.inValue("Value");var a=e.inTriggerButton("Reset");var r=e.outValue("Result");var o=0;a.onTriggered=function(){o=0};n.onChange=function(){o++;r.set(o)}};Ops.Value.ValueChangeCounter.prototype=new CABLES.Op;CABLES.OPS["cbd50d32-bfc1-45c8-ba02-a6afa1fdd0e1"]={f:Ops.Value.ValueChangeCounter,objName:"Ops.Value.ValueChangeCounter"};Ops.Gl.Meshes.MeshInstancerFromTexture_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={instancer_body_frag:"#ifdef USE_TEX_COLOR\n    #ifdef BLEND_MODE_MULTIPLY\n        col.rgb *= frag_instColor.rgb;\n        col.a *= frag_instColor.a;\n    #endif\n\n    #ifdef BLEND_MODE_ADD\n        col.rgb += frag_instColor.rgb;\n        col.a += frag_instColor.a;\n    #endif\n\n    #ifdef BLEND_MODE_NONE\n        col.rgb = frag_instColor.rgb;\n        col.a = frag_instColor.a;\n    #endif\n#endif\n",instancer_body_vert:"float tx=mod(instanceIndex,(MOD_texSizeX))/MOD_texSizeX+(1.0/MOD_texSizeX*0.5);\nfloat ty=float(int((instanceIndex/(MOD_texSizeX))))/MOD_texSizeY+(1.0/MOD_texSizeY*0.5);\n\nvec3 MOD_texPos=texture(MOD_texTrans,vec2(tx,ty)).rgb*MOD_mulRGB;\nmat4 texInstMat;\nvec3 scale=vec3(1.0);\n\n#ifdef USE_TEX_SCALE\n    scale*=texture(MOD_texScale,vec2(tx,ty)).rgb;\n#endif\n\ntexInstMat[0][0]=\ntexInstMat[1][1]=\ntexInstMat[2][2]=\ntexInstMat[3][3]=1.0;\n\n#ifdef USE_TEX_ROT\n    vec3 MOD_texRota=texture(MOD_texRot,vec2(tx,ty)).rgb;\n    texInstMat*=rotationMatrix(vec3(1.0,0.0,0.0),MOD_texRota.r*PI*2.0);\n    texInstMat*=rotationMatrix(vec3(0.0,1.0,0.0),MOD_texRota.g*PI*2.0);\n    texInstMat*=rotationMatrix(vec3(0.0,0.0,1.0),MOD_texRota.b*PI*2.0);\n#endif\n\ntexInstMat[3][0]=MOD_texPos.x;\ntexInstMat[3][1]=MOD_texPos.y;\ntexInstMat[3][2]=MOD_texPos.z;\n\nmat4 scalem;\nscalem[0][0]=MOD_scale*scale.x;\nscalem[1][1]=MOD_scale*scale.y;\nscalem[2][2]=MOD_scale*scale.z;\nscalem[3][3]=1.0;\ntexInstMat*=scalem;\n\nmMatrix*=texInstMat;\n\n#ifdef USE_TEX_COLOR\n\n    vec4 instColor=texture(MOD_texColor,vec2(tx,ty));\n\n    frag_instColor=instColor;\n#endif\n\n\n\n\n",instancer_head_frag:"IN vec4 frag_instColor;\n",instancer_head_vert:"IN mat4 instMat;\nIN vec4 instColor;\nIN float instanceIndex;\nOUT mat4 instModelMat;\nOUT vec4 frag_instColor;\n\n#define INSTANCING\n#define PI 3.14159265358\n\nmat3 ntorot(vec3 r)\n{\n    float cx = cos(radians(r.x));\n    float sx = sin(radians(r.x));\n    float cy = cos(radians(r.y));\n    float sy = sin(radians(r.y));\n    float cz = cos(radians(r.z));\n    float sz = sin(radians(r.z));\n\n    return mat3(cy * cz, \tcx * sz + sx * sy * cz, \tsx * sz - cx * sy * cz,\n    \t\t\t-cy * sz,\tcx * cz - sx * sy * sz,\t\tsx * cz + cx * sy * sz,\n    \t\t\tsy,\t\t\t-sx * cy,\t\t\t\t\tcx * cy);\n}\n\nmat4 rotationMatrix(vec3 axis, float angle)\n{\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n\n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\n\n// vec4 MOD_rot(vec4 pos, vec3 rot, mat4 modelMatrix)\n// {\n//     // pos=pos*rotationX(rot.x)*rotationY(rot.y)*rotationZ(rot.z);\n//     pos.xyz*=ntorot( (rot-0.5) * 3.14*2.0 );\n\n//     return pos;\n// }\n"};const n=e.inTrigger("exe"),a=e.inObject("Geometry",null,"geometry"),r=e.inInt("Num Instances",1e3),o=e.inTexture("Position Texture",null,"texture"),i=e.inTexture("Rotation Texture",null,"texture"),s=e.inTexture("Scale Texture",null,"texture"),l=e.inTexture("Color Texture",null,"texture"),u=e.inSwitch("Color Texture Blendmode",["Multiply","Add","Normal"],"Multiply"),c=e.inValue("Scale",1),m=e.inValue("Multiply Pos X",1),_=e.inValue("Multiply Pos Y",1),d=e.inValue("Multiply Pos Z",1),p=e.outTrigger("Trigger Out"),v=e.outValue("Num");e.toWorkPortsNeedToBeLinked(a);e.toWorkPortsNeedToBeLinked(n);a.ignoreValueSerialize=true;const f=e.patch.cgl;const g=mat4.create();let h=new Float32Array(1),b=new Float32Array(1),x=null,O=true,I=0,T=true,y=true;const S=new CGL.ShaderModifier(f,e.name);S.addModule({name:"MODULE_VERTEX_POSITION",title:e.name,priority:-2,srcHeadVert:t.instancer_head_vert,srcBodyVert:t.instancer_body_vert});S.addModule({name:"MODULE_COLOR",priority:-2,title:e.name,srcHeadFrag:t.instancer_head_frag,srcBodyFrag:t.instancer_body_frag});S.addUniformVert("f","MOD_scale",c);S.addUniformVert("t","MOD_texTrans");S.addUniformVert("t","MOD_texRot");S.addUniformVert("t","MOD_texScale");S.addUniformVert("t","MOD_texColor");S.addUniformVert("f","MOD_texSizeX",0);S.addUniformVert("f","MOD_texSizeY",0);S.addUniformVert("3f","MOD_mulRGB",m,_,d);u.onChange=o.onChange=s.onChange=l.onChange=i.onChange=M;n.onTriggered=N;n.onLinkChanged=function(){if(!n.isLinked())C()};r.onChange=function(){y=true;O=true};function A(){T=true,y=true;O=true}function M(){S.toggleDefine("BLEND_MODE_MULTIPLY",u.get()==="Multiply");S.toggleDefine("BLEND_MODE_ADD",u.get()==="Add");S.toggleDefine("BLEND_MODE_NONE",u.get()==="Normal");S.toggleDefine("USE_TEX_ROT",i.get());S.toggleDefine("USE_TEX_SCALE",s.get());S.toggleDefine("USE_TEX_COLOR",l.get())}a.onChange=function(){if(x)x.dispose();if(!a.get()||!a.get().vertices){x=null;return}x=new CGL.Mesh(f,a.get());A()};function C(){}function E(){if(!x)return;I=Math.max(0,Math.floor(r.get()));if(h.length!=I*16)h=new Float32Array(I*16);for(let t=0;t<I;t++){mat4.identity(g);for(let e=0;e<16;e++)h[t*16+e]=g[e]}x.numInstances=I;x.addAttribute("instMat",h,16);T=false;O=false}function N(){if(!x)return;if(O)E();if(!o.get())return;if(o.get())S.pushTexture("MOD_texTrans",o.get().tex);if(i.get())S.pushTexture("MOD_texRot",i.get().tex);if(s.get())S.pushTexture("MOD_texScale",s.get().tex);if(l.get())S.pushTexture("MOD_texColor",l.get().tex);S.bind();S.setUniformValue("MOD_texSizeX",o.get().width);S.setUniformValue("MOD_texSizeY",o.get().height);x.numInstances=I;v.set(x.numInstances);if(x.numInstances>0)x.render(f.getShader());p.trigger();S.unbind()}};Ops.Gl.Meshes.MeshInstancerFromTexture_v2.prototype=new CABLES.Op;CABLES.OPS["10771b66-4b63-4f47-b050-3b9c44cb2780"]={f:Ops.Gl.Meshes.MeshInstancerFromTexture_v2,objName:"Ops.Gl.Meshes.MeshInstancerFromTexture_v2"};Ops.Gl.Meshes.Pyramid=function(){CABLES.Op.apply(this,arguments);const a=this;const e={};var t=a.inTrigger("Render");var r=a.inValue("Width",1);var o=a.inValue("Length",1);var i=a.inValue("Height",2);var s=a.inValueBool("Smooth",false);var n=a.inValueBool("Draw",true);var l=a.outTrigger("trigger");var u=a.outObject("geometry");var c=null;var m=a.patch.cgl;var _=null;r.onChange=d;i.onChange=d;o.onChange=d;s.onChange=d;d();t.onTriggered=function(){if(n.get())_.render(m.getShader());l.trigger()};function d(){if(!c)c=new CGL.Geometry(a.name);var e=r.get();var t=i.get();var n=o.get();c.vertices=[-e,0,-n,e,0,-n,e,0,n,-e,0,n,0,t,0];c.vertexNormals=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1];c.texCoords=[.5,0,1,1,0,1,0,1,0,1];c.verticesIndices=[0,1,2,0,2,3,4,1,0,4,3,2,0,3,4,4,2,1];if(!s.get())c.unIndex();c.calculateNormals({forceZUp:false});_=new CGL.Mesh(m,c);u.set(null);u.set(c)}};Ops.Gl.Meshes.Pyramid.prototype=new CABLES.Op;CABLES.OPS["22b175c4-591b-47be-9ac7-2eaf5ebaf641"]={f:Ops.Gl.Meshes.Pyramid,objName:"Ops.Gl.Meshes.Pyramid"};Ops.Gl.ShaderEffects.TransformVertex=function(){CABLES.Op.apply(this,arguments);const e=this;const t={trans_vert:"\n\n\npos.xyz*=vec3(MOD_scale);\npos.xyz+=vec3(MOD_translate);\n\nmat4 MOD_rmat=\n        MOD_rotationX(MOD_rot.x*0.0174533)*\n        MOD_rotationY(MOD_rot.y*0.0174533)*\n        MOD_rotationZ(MOD_rot.z*0.0174533);\n\npos*=MOD_rmat;\n\n#ifdef MOD_TRANS_NORMS\n    norm=(vec4(norm,1.0)*MOD_rmat).xyz;\n    bitangent=(vec4(bitangent,1.0)*MOD_rmat).xyz;\n    tangent=(vec4(tangent,1.0)*MOD_rmat).xyz;\n#endif",trans_head_vert:"\nmat4 MOD_rotationX( in float angle ) {\n\treturn mat4(\t1.0,\t\t0,\t\t\t0,\t\t\t0,\n\t\t\t \t\t0, \tcos(angle),\t-sin(angle),\t\t0,\n\t\t\t\t\t0, \tsin(angle),\t cos(angle),\t\t0,\n\t\t\t\t\t0, \t\t\t0,\t\t\t  0, \t\t1);\n}\n\nmat4 MOD_rotationY( in float angle ) {\n\treturn mat4(\tcos(angle),\t\t0,\t\tsin(angle),\t0,\n\t\t\t \t\t\t\t0,\t\t1.0,\t\t\t 0,\t0,\n\t\t\t\t\t-sin(angle),\t0,\t\tcos(angle),\t0,\n\t\t\t\t\t\t\t0, \t\t0,\t\t\t\t0,\t1);\n}\n\nmat4 MOD_rotationZ( in float angle ) {\n\treturn mat4(\tcos(angle),\t\t-sin(angle),\t0,\t0,\n\t\t\t \t\tsin(angle),\t\tcos(angle),\t\t0,\t0,\n\t\t\t\t\t\t\t0,\t\t\t\t0,\t\t1,\t0,\n\t\t\t\t\t\t\t0,\t\t\t\t0,\t\t0,\t1);\n}\n"};const n=e.inTrigger("render"),a=e.outTrigger("Trigger"),r=e.inValue("Translate X",0),o=e.inValue("Translate Y",0),i=e.inValue("Translate Z",0),s=e.inValue("Scale X",1),l=e.inValue("Scale Y",1),u=e.inValue("Scale Z",1),c=e.inValue("Rotation X",0),m=e.inValue("Rotation Y",0),_=e.inValue("Rotation Z",0),d=e.inBool("Transform normals",false);const p=e.patch.cgl;const v=new CGL.ShaderModifier(p,e.name);v.addModule({priority:-2,name:"MODULE_VERTEX_POSITION",srcHeadVert:t.trans_head_vert||"",srcBodyVert:t.trans_vert||""});v.addUniformVert("3f","MOD_translate",r,o,i);v.addUniformVert("3f","MOD_scale",s,l,u);v.addUniformVert("3f","MOD_rot",c,m,_);d.onChange=f;f();function f(){v.toggleDefine("MOD_TRANS_NORMS",d.get())}n.onTriggered=function(){v.bind();a.trigger();v.unbind()}};Ops.Gl.ShaderEffects.TransformVertex.prototype=new CABLES.Op;CABLES.OPS["68ca4a91-c3ce-4e81-bb84-3ba5f50dfaa1"]={f:Ops.Gl.ShaderEffects.TransformVertex,objName:"Ops.Gl.ShaderEffects.TransformVertex"};Ops.Gl.TextureEffects.RgbMultiply=function(){CABLES.Op.apply(this,arguments);const e=this;const t={rgbmul_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI float r;\nUNI float g;\nUNI float b;\n\nvoid main()\n{\n   vec4 col=vec4(1.0,0.0,0.0,1.0);\n   col=texture(tex,texCoord);\n   col.r*=r;\n   col.g*=g;\n   col.b*=b;\n   outColor= col;\n}\n"};const n=e.inTrigger("render");const a=e.inValue("r",1);const r=e.inValue("g",1);const o=e.inValue("b",1);const i=e.outTrigger("trigger");const s=e.patch.cgl;const l=new CGL.Shader(s,e.name);l.setSource(l.getDefaultVertexShader(),t.rgbmul_frag);const u=new CGL.Uniform(l,"t","tex",0);const c=new CGL.Uniform(l,"f","r",a);const m=new CGL.Uniform(l,"f","g",r);const _=new CGL.Uniform(l,"f","b",o);n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;s.pushShader(l);s.currentTextureEffect.bind();s.setTexture(0,s.currentTextureEffect.getCurrentSourceTexture().tex);s.currentTextureEffect.finish();s.popShader();i.trigger()}};Ops.Gl.TextureEffects.RgbMultiply.prototype=new CABLES.Op;CABLES.OPS["00f30153-f656-4701-9b93-244b033b2eaa"]={f:Ops.Gl.TextureEffects.RgbMultiply,objName:"Ops.Gl.TextureEffects.RgbMultiply"};Ops.Gl.TextureEffects.ScaleTexture=function(){CABLES.Op.apply(this,arguments);const e=this;const t={scale_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI sampler2D multiplierTex;\nUNI float amount;\nUNI float uScaleX,uScaleY;\nUNI float offsetX,offsetY;\nUNI float centerX,centerY;\n\n{{CGL.BLENDMODES}}\n\nvoid main()\n{\n    float multiplier = 1.0;\n    vec2 uv = texCoord;\n\n    #ifdef MASK_SCALE\n        multiplier = dot(vec3(0.2126,0.7152,0.0722), texture(multiplierTex,texCoord).rgb);\n    #endif\n\n    uv.x = (uv.x - centerX) / (uScaleX * multiplier)  + centerX+offsetX ;\n    uv.y = (uv.y - centerY) / (uScaleY * multiplier)  + centerY+offsetY ;\n\n\n\n\n    //blend section\n    vec4 col = texture(tex,uv);\n\n\n\n    //original texture\n    vec4 base = texture(tex,texCoord);\n\n    //blend stuff\n    float a=amount;\n\n\n    outColor=cgl_blend(base,col,a);\n\n    if(uv.x>1.0||uv.y>1.0||uv.x<0.0||uv.y<0.0)\n    {\n        outColor.a=0.0;\n        // a=0.0;\n    }\n\n}\n"};const n=e.inTrigger("render"),a=e.inTexture("Multiplier"),r=CGL.TextureEffect.AddBlendSelect(e,"Blend Mode","normal"),o=e.inValueSlider("Amount",1),i=e.inValue("Scale X",1.5),s=e.inValue("Scale Y",1.5),l=e.inValueSlider("offset X",0),u=e.inValueSlider("offset Y",0),c=e.inValueSlider("center X",.5),m=e.inValueSlider("center Y",.5),_=e.outTrigger("trigger");const d=e.patch.cgl;const p=new CGL.Shader(d,e.name);p.setSource(p.getDefaultVertexShader(),t.scale_frag);const v=new CGL.Uniform(p,"t","tex",0),f=new CGL.Uniform(p,"t","multiplierTex",1),g=new CGL.Uniform(p,"f","amount",o),h=new CGL.Uniform(p,"f","uScaleX",i),b=new CGL.Uniform(p,"f","uScaleY",s),x=new CGL.Uniform(p,"f","centerX",c),O=new CGL.Uniform(p,"f","centerY",m),I=new CGL.Uniform(p,"f","offsetX",l),T=new CGL.Uniform(p,"f","offsetY",u);CGL.TextureEffect.setupBlending(e,p,r,o);a.onChange=function(){p.toggleDefine("MASK_SCALE",a.isLinked())};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;d.pushShader(p);d.currentTextureEffect.bind();d.setTexture(0,d.currentTextureEffect.getCurrentSourceTexture().tex);if(a.get())d.setTexture(1,a.get().tex);d.currentTextureEffect.finish();d.popShader();_.trigger()}};Ops.Gl.TextureEffects.ScaleTexture.prototype=new CABLES.Op;CABLES.OPS["12cfa989-d575-4ee2-9deb-5392097c5a27"]={f:Ops.Gl.TextureEffects.ScaleTexture,objName:"Ops.Gl.TextureEffects.ScaleTexture"};Ops.Gl.Matrix.CircleTransform=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("render"),i=e.inValueInt("segments",40),s=e.inValueFloat("radius",1),l=e.inValueSlider("percent",1),u=e.inBool("Absolute",true),c=e.inBool("Flip",false),a=e.inValueBool("Rotate"),r=e.outTrigger("trigger"),o=e.outValue("index");const m=e.patch.cgl;i.set(40);s.set(1);l.set(1);const _=[];c.onChange=u.onChange=i.onChange=s.onChange=l.onChange=v;let d=true;n.onTriggered=p;function p(){if(d)f();const t=a.get();const n=l.get();for(let e=0;e<_.length;e++){m.pushModelMatrix();mat4.translate(m.mMatrix,m.mMatrix,_[e]);if(t)mat4.rotateZ(m.mMatrix,m.mMatrix,e/_.length*n*CGL.DEG2RAD*-360);o.set(e);r.trigger();m.popModelMatrix()}}function v(){d=true}function f(){_.length=0;let e=0,t=0;let n=i.get();if(n<1)n=1;let a=Math.round(n*l.get());let r=360/Math.round(n);if(!u.get()){a=n;r=360/Math.round(n)*l.get()}const o=c.get();for(e=0;e<a;e++){if(o)t=(360-r*e)*CGL.DEG2RAD;else t=r*e*CGL.DEG2RAD;_.push([Math.sin(t)*s.get(),Math.cos(t)*s.get(),0])}d=false}};Ops.Gl.Matrix.CircleTransform.prototype=new CABLES.Op;CABLES.OPS["4e96d5a2-a1ec-4f83-954d-7c34a9021e9c"]={f:Ops.Gl.Matrix.CircleTransform,objName:"Ops.Gl.Matrix.CircleTransform"};Ops.Ui.VizGraph=function(){CABLES.Op.apply(this,arguments);const l=this;const e={};const t=l.inFloat("Number 1"),n=l.inFloat("Number 2"),a=l.inFloat("Number 3"),r=l.inFloat("Number 4"),o=l.inFloat("Number 5"),i=l.inFloat("Number 6"),s=l.inFloat("Number 7"),u=l.inFloat("Number 8"),c=l.inTriggerButton("Reset");l.setUiAttrib({height:150,resizable:true});let m=[];let _=-Number.MAX_VALUE;let d=Number.MAX_VALUE;t.onLinkChanged=n.onLinkChanged=a.onLinkChanged=r.onLinkChanged=o.onLinkChanged=i.onLinkChanged=s.onLinkChanged=u.onLinkChanged=c.onTriggered=()=>{_=-Number.MAX_VALUE;d=Number.MAX_VALUE;m=[]};l.renderVizLayer=(a,r)=>{const e=CABLES.UI.uiProfiler.start("previewlayer graph");const t=["#00ffff","#ffff00","#ff00ff","#0000ff","#00ff00","#ff0000","#ffffff","#888888"];a.fillStyle="#222";a.fillRect(r.x,r.y,r.width,r.height);for(let n=0;n<l.portsIn.length;n++){if(!l.portsIn[n].isLinked())continue;const o=l.portsIn[n].get();_=Math.max(l.portsIn[n].get(),_);d=Math.min(l.portsIn[n].get(),d);if(!m[n])m[n]=[];m[n].push(o);if(m[n].length>60)m[n].shift();const i=5;const s=r.width/60;a.lineWidth=2;a.strokeStyle="#555555";a.beginPath();a.moveTo(r.x,CABLES.map(0,d,_,r.height,0)+r.y);a.lineTo(r.x+r.width,CABLES.map(0,d,_,r.height,0)+r.y);a.stroke();a.strokeStyle=t[n];a.beginPath();for(let t=0;t<m[n].length;t++){let e=m[n][t];e=CABLES.map(e,d,_,r.height,0);e+=r.y;if(t===0)a.moveTo(r.x,e);else a.lineTo(r.x+t*s,e)}a.stroke()}a.fillStyle="#888";a.fillText("max:"+Math.round(_*100)/100,r.x+10,r.y+r.height-10);a.fillText("min:"+Math.round(d*100)/100,r.x+10,r.y+r.height-30);e.finish()}};Ops.Ui.VizGraph.prototype=new CABLES.Op;CABLES.OPS["13c54eb4-60ef-4b9c-8425-d52a431f5c87"]={f:Ops.Ui.VizGraph,objName:"Ops.Ui.VizGraph"};Ops.Sidebar.Sidebar=function(){CABLES.Op.apply(this,arguments);const i=this;const n={style_css:" /*\n * SIDEBAR\n  http://danielstern.ca/range.css/#/\n  https://developer.mozilla.org/en-US/docs/Web/CSS/::-webkit-progress-value\n */\n\n.sidebar-icon-undo\n{\n    width:10px;\n    height:10px;\n    background-image: url(\"data:image/svg+xml;charset=utf8, %3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none' stroke='grey' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M3 7v6h6'/%3E%3Cpath d='M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13'/%3E%3C/svg%3E\");\n    background-size: 19px;\n    background-repeat: no-repeat;\n    top: -19px;\n    margin-top: -7px;\n}\n\n.icon-chevron-down {\n    top: 2px;\n    right: 9px;\n}\n\n.iconsidebar-chevron-up,.sidebar__close-button {\n\tbackground-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM4ODg4ODgiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0iZmVhdGhlciBmZWF0aGVyLWNoZXZyb24tdXAiPjxwb2x5bGluZSBwb2ludHM9IjE4IDE1IDEyIDkgNiAxNSI+PC9wb2x5bGluZT48L3N2Zz4=);\n}\n\n.iconsidebar-minimizebutton {\n    background-position: 98% center;\n    background-repeat: no-repeat;\n}\n\n.sidebar-cables-right\n{\n    right: 15px;\n    left: initial !important;\n}\n\n.sidebar-cables {\n    --sidebar-color: #07f78c;\n    --sidebar-width: 220px;\n    --sidebar-border-radius: 10px;\n    --sidebar-monospace-font-stack: \"SFMono-Regular\", Consolas, \"Liberation Mono\", Menlo, Courier, monospace;\n    --sidebar-hover-transition-time: .2s;\n\n    position: absolute;\n    top: 15px;\n    left: 15px;\n    border-radius: var(--sidebar-border-radius);\n    z-index: 100000;\n    color: #BBBBBB;\n    width: var(  --sidebar-width);\n    max-height: 100%;\n    box-sizing: border-box;\n    overflow-y: auto;\n    overflow-x: hidden;\n    font-size: 13px;\n    font-family: Arial;\n    line-height: 1em; /* prevent emojis from breaking height of the title */\n}\n\n.sidebar-cables::selection {\n    background-color: var(--sidebar-color);\n    color: #EEEEEE;\n}\n\n.sidebar-cables::-webkit-scrollbar {\n    background-color: transparent;\n    --cables-scrollbar-width: 8px;\n    width: var(--cables-scrollbar-width);\n}\n\n.sidebar-cables::-webkit-scrollbar-track {\n    background-color: transparent;\n    width: var(--cables-scrollbar-width);\n}\n\n.sidebar-cables::-webkit-scrollbar-thumb {\n    background-color: #333333;\n    border-radius: 4px;\n    width: var(--cables-scrollbar-width);\n}\n\n.sidebar-cables--closed {\n    width: auto;\n}\n\n.sidebar__close-button {\n    background-color: #222;\n    /*-webkit-user-select: none;  */\n    /*-moz-user-select: none;     */\n    /*-ms-user-select: none;      */\n    /*user-select: none;          */\n    /*transition: background-color var(--sidebar-hover-transition-time);*/\n    /*color: #CCCCCC;*/\n    height: 2px;\n    /*border-bottom:20px solid #222;*/\n\n    /*box-sizing: border-box;*/\n    /*padding-top: 2px;*/\n    /*text-align: center;*/\n    /*cursor: pointer;*/\n    /*border-radius: 0 0 var(--sidebar-border-radius) var(--sidebar-border-radius);*/\n    /*opacity: 1.0;*/\n    /*transition: opacity 0.3s;*/\n    /*overflow: hidden;*/\n}\n\n.sidebar__close-button-icon {\n    display: inline-block;\n    /*opacity: 0;*/\n    width: 20px;\n    height: 20px;\n    /*position: relative;*/\n    /*top: -1px;*/\n\n\n}\n\n.sidebar--closed {\n    width: auto;\n    margin-right: 20px;\n}\n\n.sidebar--closed .sidebar__close-button {\n    margin-top: 8px;\n    margin-left: 8px;\n    padding:10px;\n\n    height: 25px;\n    width:25px;\n    border-radius: 50%;\n    cursor: pointer;\n    opacity: 0.3;\n    background-repeat: no-repeat;\n    background-position: center center;\n    transform:rotate(180deg);\n}\n\n.sidebar--closed .sidebar__group\n{\n    display:none;\n\n}\n.sidebar--closed .sidebar__close-button-icon {\n    background-position: 0px 0px;\n}\n\n.sidebar__close-button:hover {\n    background-color: #111111;\n    opacity: 1.0 !important;\n}\n\n/*\n * SIDEBAR ITEMS\n */\n\n.sidebar__items {\n    /* max-height: 1000px; */\n    /* transition: max-height 0.5;*/\n    background-color: #222;\n    padding-bottom: 20px;\n}\n\n.sidebar--closed .sidebar__items {\n    /* max-height: 0; */\n    height: 0;\n    display: none;\n    pointer-interactions: none;\n}\n\n.sidebar__item__right {\n    float: right;\n}\n\n/*\n * SIDEBAR GROUP\n */\n\n.sidebar__group {\n    /*background-color: #1A1A1A;*/\n    overflow: hidden;\n    box-sizing: border-box;\n    animate: height;\n    /*background-color: #151515;*/\n    /* max-height: 1000px; */\n    /* transition: max-height 0.5s; */\n--sidebar-group-header-height: 33px;\n}\n\n.sidebar__group-items\n{\n    padding-top: 15px;\n    padding-bottom: 15px;\n}\n\n.sidebar__group--closed {\n    /* max-height: 13px; */\n    height: var(--sidebar-group-header-height);\n}\n\n.sidebar__group-header {\n    box-sizing: border-box;\n    color: #EEEEEE;\n    background-color: #151515;\n    -webkit-user-select: none;  /* Chrome all / Safari all */\n    -moz-user-select: none;     /* Firefox all */\n    -ms-user-select: none;      /* IE 10+ */\n    user-select: none;          /* Likely future */\n\n    /*height: 100%;//var(--sidebar-group-header-height);*/\n\n    padding-top: 7px;\n    text-transform: uppercase;\n    letter-spacing: 0.08em;\n    cursor: pointer;\n    /*transition: background-color var(--sidebar-hover-transition-time);*/\n    position: relative;\n}\n\n.sidebar__group-header:hover {\n  background-color: #111111;\n}\n\n.sidebar__group-header-title {\n  /*float: left;*/\n  overflow: hidden;\n  padding: 0 15px;\n  padding-top:5px;\n  padding-bottom:10px;\n  font-weight:bold;\n}\n\n.sidebar__group-header-undo {\n    float: right;\n    overflow: hidden;\n    padding-right: 15px;\n    padding-top:5px;\n    font-weight:bold;\n  }\n\n.sidebar__group-header-icon {\n    width: 17px;\n    height: 14px;\n    background-repeat: no-repeat;\n    display: inline-block;\n    position: absolute;\n    background-size: cover;\n\n    /* icon open */\n    /* feather icon: chevron up */\n    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM4ODg4ODgiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0iZmVhdGhlciBmZWF0aGVyLWNoZXZyb24tdXAiPjxwb2x5bGluZSBwb2ludHM9IjE4IDE1IDEyIDkgNiAxNSI+PC9wb2x5bGluZT48L3N2Zz4=);\n    top: 4px;\n    right: 5px;\n    opacity: 0.0;\n    transition: opacity 0.3;\n}\n\n.sidebar__group-header:hover .sidebar__group-header-icon {\n    opacity: 1.0;\n}\n\n/* icon closed */\n.sidebar__group--closed .sidebar__group-header-icon {\n    /* feather icon: chevron down */\n    background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM4ODg4ODgiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0iZmVhdGhlciBmZWF0aGVyLWNoZXZyb24tZG93biI+PHBvbHlsaW5lIHBvaW50cz0iNiA5IDEyIDE1IDE4IDkiPjwvcG9seWxpbmU+PC9zdmc+);\n    top: 4px;\n    right: 5px;\n}\n\n/*\n * SIDEBAR ITEM\n */\n\n.sidebar__item\n{\n    box-sizing: border-box;\n    padding: 7px;\n    padding-left:15px;\n    padding-right:15px;\n\n    overflow: hidden;\n    position: relative;\n}\n\n.sidebar__item-label {\n    display: inline-block;\n    -webkit-user-select: none;  /* Chrome all / Safari all */\n    -moz-user-select: none;     /* Firefox all */\n    -ms-user-select: none;      /* IE 10+ */\n    user-select: none;          /* Likely future */\n    width: calc(50% - 7px);\n    margin-right: 7px;\n    margin-top: 2px;\n    text-overflow: ellipsis;\n    /* overflow: hidden; */\n}\n\n.sidebar__item-value-label {\n    font-family: var(--sidebar-monospace-font-stack);\n    display: inline-block;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    white-space: nowrap;\n    max-width: 60%;\n}\n\n.sidebar__item-value-label::selection {\n    background-color: var(--sidebar-color);\n    color: #EEEEEE;\n}\n\n.sidebar__item + .sidebar__item,\n.sidebar__item + .sidebar__group,\n.sidebar__group + .sidebar__item,\n.sidebar__group + .sidebar__group {\n    /*border-top: 1px solid #272727;*/\n}\n\n/*\n * SIDEBAR ITEM TOGGLE\n */\n\n/*.sidebar__toggle */\n.icon_toggle{\n    cursor: pointer;\n}\n\n.sidebar__toggle-input {\n    --sidebar-toggle-input-color: #CCCCCC;\n    --sidebar-toggle-input-color-hover: #EEEEEE;\n    --sidebar-toggle-input-border-size: 2px;\n    display: inline;\n    float: right;\n    box-sizing: border-box;\n    border-radius: 50%;\n    cursor: pointer;\n    --toggle-size: 11px;\n    margin-top: 2px;\n    background-color: transparent !important;\n    border: var(--sidebar-toggle-input-border-size) solid var(--sidebar-toggle-input-color);\n    width: var(--toggle-size);\n    height: var(--toggle-size);\n    transition: background-color var(--sidebar-hover-transition-time);\n    transition: border-color var(--sidebar-hover-transition-time);\n}\n.sidebar__toggle:hover .sidebar__toggle-input {\n    border-color: var(--sidebar-toggle-input-color-hover);\n}\n\n.sidebar__toggle .sidebar__item-value-label {\n    -webkit-user-select: none;  /* Chrome all / Safari all */\n    -moz-user-select: none;     /* Firefox all */\n    -ms-user-select: none;      /* IE 10+ */\n    user-select: none;          /* Likely future */\n    max-width: calc(50% - 12px);\n}\n.sidebar__toggle-input::after { clear: both; }\n\n.sidebar__toggle--active .icon_toggle\n{\n\n    background-image: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE1cHgiIHdpZHRoPSIzMHB4IiBmaWxsPSIjMDZmNzhiIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGcgZGlzcGxheT0ibm9uZSI+PGcgZGlzcGxheT0iaW5saW5lIj48Zz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzA2Zjc4YiIgZD0iTTMwLDI3QzE3LjM1LDI3LDcsMzcuMzUsNyw1MGwwLDBjMCwxMi42NSwxMC4zNSwyMywyMywyM2g0MCBjMTIuNjUsMCwyMy0xMC4zNSwyMy0yM2wwLDBjMC0xMi42NS0xMC4zNS0yMy0yMy0yM0gzMHogTTcwLDY3Yy05LjM4OSwwLTE3LTcuNjEtMTctMTdzNy42MTEtMTcsMTctMTdzMTcsNy42MSwxNywxNyAgICAgUzc5LjM4OSw2Nyw3MCw2N3oiPjwvcGF0aD48L2c+PC9nPjwvZz48Zz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTMwLDI3QzE3LjM1LDI3LDcsMzcuMzUsNyw1MGwwLDBjMCwxMi42NSwxMC4zNSwyMywyMywyM2g0MCAgIGMxMi42NSwwLDIzLTEwLjM1LDIzLTIzbDAsMGMwLTEyLjY1LTEwLjM1LTIzLTIzLTIzSDMweiBNNzAsNjdjLTkuMzg5LDAtMTctNy42MS0xNy0xN3M3LjYxMS0xNywxNy0xN3MxNyw3LjYxLDE3LDE3ICAgUzc5LjM4OSw2Nyw3MCw2N3oiPjwvcGF0aD48L2c+PGcgZGlzcGxheT0ibm9uZSI+PGcgZGlzcGxheT0iaW5saW5lIj48cGF0aCBmaWxsPSIjMDZmNzhiIiBzdHJva2U9IiMwNmY3OGIiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNNyw1MGMwLDEyLjY1LDEwLjM1LDIzLDIzLDIzaDQwICAgIGMxMi42NSwwLDIzLTEwLjM1LDIzLTIzbDAsMGMwLTEyLjY1LTEwLjM1LTIzLTIzLTIzSDMwQzE3LjM1LDI3LDcsMzcuMzUsNyw1MEw3LDUweiI+PC9wYXRoPjwvZz48Y2lyY2xlIGRpc3BsYXk9ImlubGluZSIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwNmY3OGIiIHN0cm9rZT0iIzA2Zjc4YiIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGN4PSI3MCIgY3k9IjUwIiByPSIxNyI+PC9jaXJjbGU+PC9nPjxnIGRpc3BsYXk9Im5vbmUiPjxwYXRoIGRpc3BsYXk9ImlubGluZSIgZD0iTTcwLDI1SDMwQzE2LjIxNSwyNSw1LDM2LjIxNSw1LDUwczExLjIxNSwyNSwyNSwyNWg0MGMxMy43ODUsMCwyNS0xMS4yMTUsMjUtMjVTODMuNzg1LDI1LDcwLDI1eiBNNzAsNzEgICBIMzBDMTguNDIxLDcxLDksNjEuNTc5LDksNTBzOS40MjEtMjEsMjEtMjFoNDBjMTEuNTc5LDAsMjEsOS40MjEsMjEsMjFTODEuNTc5LDcxLDcwLDcxeiBNNzAsMzFjLTEwLjQ3NywwLTE5LDguNTIzLTE5LDE5ICAgczguNTIzLDE5LDE5LDE5czE5LTguNTIzLDE5LTE5UzgwLjQ3NywzMSw3MCwzMXogTTcwLDY1Yy04LjI3MSwwLTE1LTYuNzI5LTE1LTE1czYuNzI5LTE1LDE1LTE1czE1LDYuNzI5LDE1LDE1Uzc4LjI3MSw2NSw3MCw2NXoiPjwvcGF0aD48L2c+PC9zdmc+);\n    opacity: 1;\n    transform: rotate(0deg);\n}\n\n\n.icon_toggle\n{\n    float: right;\n    width:40px;\n    height:18px;\n    background-image: url(data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE1cHgiIHdpZHRoPSIzMHB4IiBmaWxsPSIjYWFhYWFhIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGcgZGlzcGxheT0ibm9uZSI+PGcgZGlzcGxheT0iaW5saW5lIj48Zz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI2FhYWFhYSIgZD0iTTMwLDI3QzE3LjM1LDI3LDcsMzcuMzUsNyw1MGwwLDBjMCwxMi42NSwxMC4zNSwyMywyMywyM2g0MCBjMTIuNjUsMCwyMy0xMC4zNSwyMy0yM2wwLDBjMC0xMi42NS0xMC4zNS0yMy0yMy0yM0gzMHogTTcwLDY3Yy05LjM4OSwwLTE3LTcuNjEtMTctMTdzNy42MTEtMTcsMTctMTdzMTcsNy42MSwxNywxNyAgICAgUzc5LjM4OSw2Nyw3MCw2N3oiPjwvcGF0aD48L2c+PC9nPjwvZz48Zz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTMwLDI3QzE3LjM1LDI3LDcsMzcuMzUsNyw1MGwwLDBjMCwxMi42NSwxMC4zNSwyMywyMywyM2g0MCAgIGMxMi42NSwwLDIzLTEwLjM1LDIzLTIzbDAsMGMwLTEyLjY1LTEwLjM1LTIzLTIzLTIzSDMweiBNNzAsNjdjLTkuMzg5LDAtMTctNy42MS0xNy0xN3M3LjYxMS0xNywxNy0xN3MxNyw3LjYxLDE3LDE3ICAgUzc5LjM4OSw2Nyw3MCw2N3oiPjwvcGF0aD48L2c+PGcgZGlzcGxheT0ibm9uZSI+PGcgZGlzcGxheT0iaW5saW5lIj48cGF0aCBmaWxsPSIjYWFhYWFhIiBzdHJva2U9IiNhYWFhYWEiIHN0cm9rZS13aWR0aD0iNCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNNyw1MGMwLDEyLjY1LDEwLjM1LDIzLDIzLDIzaDQwICAgIGMxMi42NSwwLDIzLTEwLjM1LDIzLTIzbDAsMGMwLTEyLjY1LTEwLjM1LTIzLTIzLTIzSDMwQzE3LjM1LDI3LDcsMzcuMzUsNyw1MEw3LDUweiI+PC9wYXRoPjwvZz48Y2lyY2xlIGRpc3BsYXk9ImlubGluZSIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNhYWFhYWEiIHN0cm9rZT0iI2FhYWFhYSIgc3Ryb2tlLXdpZHRoPSI0IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGN4PSI3MCIgY3k9IjUwIiByPSIxNyI+PC9jaXJjbGU+PC9nPjxnIGRpc3BsYXk9Im5vbmUiPjxwYXRoIGRpc3BsYXk9ImlubGluZSIgZD0iTTcwLDI1SDMwQzE2LjIxNSwyNSw1LDM2LjIxNSw1LDUwczExLjIxNSwyNSwyNSwyNWg0MGMxMy43ODUsMCwyNS0xMS4yMTUsMjUtMjVTODMuNzg1LDI1LDcwLDI1eiBNNzAsNzEgICBIMzBDMTguNDIxLDcxLDksNjEuNTc5LDksNTBzOS40MjEtMjEsMjEtMjFoNDBjMTEuNTc5LDAsMjEsOS40MjEsMjEsMjFTODEuNTc5LDcxLDcwLDcxeiBNNzAsMzFjLTEwLjQ3NywwLTE5LDguNTIzLTE5LDE5ICAgczguNTIzLDE5LDE5LDE5czE5LTguNTIzLDE5LTE5UzgwLjQ3NywzMSw3MCwzMXogTTcwLDY1Yy04LjI3MSwwLTE1LTYuNzI5LTE1LTE1czYuNzI5LTE1LDE1LTE1czE1LDYuNzI5LDE1LDE1Uzc4LjI3MSw2NSw3MCw2NXoiPjwvcGF0aD48L2c+PC9zdmc+);\n    background-size: 50px 37px;\n    background-position: -6px -10px;\n    transform: rotate(180deg);\n    opacity: 0.4;\n}\n\n\n\n/*.sidebar__toggle--active .sidebar__toggle-input {*/\n/*    transition: background-color var(--sidebar-hover-transition-time);*/\n/*    background-color: var(--sidebar-toggle-input-color);*/\n/*}*/\n/*.sidebar__toggle--active .sidebar__toggle-input:hover*/\n/*{*/\n/*    background-color: var(--sidebar-toggle-input-color-hover);*/\n/*    border-color: var(--sidebar-toggle-input-color-hover);*/\n/*    transition: background-color var(--sidebar-hover-transition-time);*/\n/*    transition: border-color var(--sidebar-hover-transition-time);*/\n/*}*/\n\n/*\n * SIDEBAR ITEM BUTTON\n */\n\n.sidebar__button {}\n\n.sidebar__button-input {\n    -webkit-user-select: none;  /* Chrome all / Safari all */\n    -moz-user-select: none;     /* Firefox all */\n    -ms-user-select: none;      /* IE 10+ */\n    user-select: none;          /* Likely future */\n    min-height: 24px;\n    background-color: transparent;\n    color: #CCCCCC;\n    box-sizing: border-box;\n    padding-top: 3px;\n    text-align: center;\n    border-radius: 125px;\n    border:2px solid #555;\n    cursor: pointer;\n    padding-bottom: 3px;\n}\n\n.sidebar__button-input.plus, .sidebar__button-input.minus {\n    display: inline-block;\n    min-width: 20px;\n}\n\n.sidebar__button-input:hover {\n  background-color: #333;\n  border:2px solid var(--sidebar-color);\n}\n\n/*\n * VALUE DISPLAY (shows a value)\n */\n\n.sidebar__value-display {}\n\n/*\n * SLIDER\n */\n\n.sidebar__slider {\n    --sidebar-slider-input-height: 3px;\n}\n\n.sidebar__slider-input-wrapper {\n    width: 100%;\n\n    margin-top: 8px;\n    position: relative;\n}\n\n.sidebar__slider-input {\n    -webkit-appearance: none;\n    appearance: none;\n    margin: 0;\n    width: 100%;\n    height: var(--sidebar-slider-input-height);\n    background: #555;\n    cursor: pointer;\n    outline: 0;\n\n    -webkit-transition: .2s;\n    transition: background-color .2s;\n    border: none;\n}\n\n.sidebar__slider-input:focus, .sidebar__slider-input:hover {\n    border: none;\n}\n\n.sidebar__slider-input-active-track {\n    user-select: none;\n    position: absolute;\n    z-index: 11;\n    top: 0;\n    left: 0;\n    background-color: var(--sidebar-color);\n    pointer-events: none;\n    height: var(--sidebar-slider-input-height);\n    max-width: 100%;\n}\n\n/* Mouse-over effects */\n.sidebar__slider-input:hover {\n    /*background-color: #444444;*/\n}\n\n/*.sidebar__slider-input::-webkit-progress-value {*/\n/*    background-color: green;*/\n/*    color:green;*/\n\n/*    }*/\n\n/* The slider handle (use -webkit- (Chrome, Opera, Safari, Edge) and -moz- (Firefox) to override default look) */\n\n.sidebar__slider-input::-moz-range-thumb\n{\n    position: absolute;\n    height: 15px;\n    width: 15px;\n    z-index: 900 !important;\n    border-radius: 20px !important;\n    cursor: pointer;\n    background: var(--sidebar-color) !important;\n    user-select: none;\n\n}\n\n.sidebar__slider-input::-webkit-slider-thumb\n{\n    position: relative;\n    appearance: none;\n    -webkit-appearance: none;\n    user-select: none;\n    height: 15px;\n    width: 15px;\n    display: block;\n    z-index: 900 !important;\n    border: 0;\n    border-radius: 20px !important;\n    cursor: pointer;\n    background: #777 !important;\n}\n\n.sidebar__slider-input:hover ::-webkit-slider-thumb {\n    background-color: #EEEEEE !important;\n}\n\n/*.sidebar__slider-input::-moz-range-thumb {*/\n\n/*    width: 0 !important;*/\n/*    height: var(--sidebar-slider-input-height);*/\n/*    background: #EEEEEE;*/\n/*    cursor: pointer;*/\n/*    border-radius: 0 !important;*/\n/*    border: none;*/\n/*    outline: 0;*/\n/*    z-index: 100 !important;*/\n/*}*/\n\n.sidebar__slider-input::-moz-range-track {\n    background-color: transparent;\n    z-index: 11;\n}\n\n/*.sidebar__slider-input::-moz-range-thumb:hover {*/\n  /* background-color: #EEEEEE; */\n/*}*/\n\n\n/*.sidebar__slider-input-wrapper:hover .sidebar__slider-input-active-track {*/\n/*    background-color: #EEEEEE;*/\n/*}*/\n\n/*.sidebar__slider-input-wrapper:hover .sidebar__slider-input::-moz-range-thumb {*/\n/*    background-color: #fff !important;*/\n/*}*/\n\n/*.sidebar__slider-input-wrapper:hover .sidebar__slider-input::-webkit-slider-thumb {*/\n/*    background-color: #EEEEEE;*/\n/*}*/\n\n.sidebar__slider input[type=text] {\n    box-sizing: border-box;\n    /*background-color: #333333;*/\n    text-align: right;\n    color: #BBBBBB;\n    display: inline-block;\n    background-color: transparent !important;\n\n    width: 40%;\n    height: 18px;\n    outline: none;\n    border: none;\n    border-radius: 0;\n    padding: 0 0 0 4px !important;\n    margin: 0;\n}\n\n.sidebar__slider input[type=text]:active,\n.sidebar__slider input[type=text]:focus,\n.sidebar__slider input[type=text]:hover {\n\n    color: #EEEEEE;\n}\n\n/*\n * TEXT / DESCRIPTION\n */\n\n.sidebar__text .sidebar__item-label {\n    width: auto;\n    display: block;\n    max-height: none;\n    margin-right: 0;\n    line-height: 1.1em;\n}\n\n/*\n * SIDEBAR INPUT\n */\n.sidebar__text-input textarea,\n.sidebar__text-input input[type=text] {\n    box-sizing: border-box;\n    background-color: #333333;\n    color: #BBBBBB;\n    display: inline-block;\n    width: 50%;\n    height: 18px;\n    outline: none;\n    border: none;\n    border-radius: 0;\n    border:1px solid #666;\n    padding: 0 0 0 4px !important;\n    margin: 0;\n}\n\n.sidebar__text-input textarea:focus::placeholder {\n  color: transparent;\n}\n\n.sidebar__color-picker .sidebar__item-label\n{\n    width:45%;\n}\n\n.sidebar__text-input textarea,\n.sidebar__text-input input[type=text]:active,\n.sidebar__text-input input[type=text]:focus,\n.sidebar__text-input input[type=text]:hover {\n    background-color: transparent;\n    color: #EEEEEE;\n}\n\n.sidebar__text-input textarea\n{\n    margin-top:10px;\n    height:60px;\n    width:100%;\n}\n\n/*\n * SIDEBAR SELECT\n */\n\n\n\n .sidebar__select {}\n .sidebar__select-select {\n    color: #BBBBBB;\n    /*-webkit-appearance: none;*/\n    /*-moz-appearance: none;*/\n    appearance: none;\n    /*box-sizing: border-box;*/\n    width: 50%;\n    /*height: 20px;*/\n    background-color: #333333;\n    /*background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM4ODg4ODgiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBjbGFzcz0iZmVhdGhlciBmZWF0aGVyLWNoZXZyb24tZG93biI+PHBvbHlsaW5lIHBvaW50cz0iNiA5IDEyIDE1IDE4IDkiPjwvcG9seWxpbmU+PC9zdmc+);*/\n    background-repeat: no-repeat;\n    background-position: right center;\n    background-size: 16px 16px;\n    margin: 0;\n    /*padding: 0 2 2 6px;*/\n    border-radius: 5px;\n    border: 1px solid #777;\n    background-color: #444;\n    cursor: pointer;\n    outline: none;\n    padding-left: 5px;\n\n }\n\n.sidebar__select-select:hover,\n.sidebar__select-select:active,\n.sidebar__select-select:active {\n    background-color: #444444;\n    color: #EEEEEE;\n}\n\n/*\n * COLOR PICKER\n */\n\n\n .sidebar__color-picker input[type=text] {\n    box-sizing: border-box;\n    background-color: #333333;\n    color: #BBBBBB;\n    display: inline-block;\n    width: calc(50% - 21px); /* 50% minus space of picker circle */\n    height: 18px;\n    outline: none;\n    border: none;\n    border-radius: 0;\n    padding: 0 0 0 4px !important;\n    margin: 0;\n    margin-right: 7px;\n}\n\n.sidebar__color-picker input[type=text]:active,\n.sidebar__color-picker input[type=text]:focus,\n.sidebar__color-picker input[type=text]:hover {\n    background-color: #444444;\n    color: #EEEEEE;\n}\n\ndiv.sidebar__color-picker-color-input,\n.sidebar__color-picker input[type=color],\n.sidebar__palette-picker input[type=color] {\n    display: inline-block;\n    border-radius: 100%;\n    height: 14px;\n    width: 14px;\n\n    padding: 0;\n    border: none;\n    /*border:2px solid red;*/\n    border-color: transparent;\n    outline: none;\n    background: none;\n    appearance: none;\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    cursor: pointer;\n    position: relative;\n    top: 3px;\n}\n.sidebar__color-picker input[type=color]:focus,\n.sidebar__palette-picker input[type=color]:focus {\n    outline: none;\n}\n.sidebar__color-picker input[type=color]::-moz-color-swatch,\n.sidebar__palette-picker input[type=color]::-moz-color-swatch {\n    border: none;\n}\n.sidebar__color-picker input[type=color]::-webkit-color-swatch-wrapper,\n.sidebar__palette-picker input[type=color]::-webkit-color-swatch-wrapper {\n    padding: 0;\n}\n.sidebar__color-picker input[type=color]::-webkit-color-swatch,\n.sidebar__palette-picker input[type=color]::-webkit-color-swatch {\n    border: none;\n    border-radius: 100%;\n}\n\n/*\n * Palette Picker\n */\n.sidebar__palette-picker .sidebar__palette-picker-color-input.first {\n    margin-left: 0;\n}\n.sidebar__palette-picker .sidebar__palette-picker-color-input.last {\n    margin-right: 0;\n}\n.sidebar__palette-picker .sidebar__palette-picker-color-input {\n    margin: 0 4px;\n}\n\n.sidebar__palette-picker .circlebutton {\n    width: 14px;\n    height: 14px;\n    border-radius: 1em;\n    display: inline-block;\n    top: 3px;\n    position: relative;\n}\n\n/*\n * Preset\n */\n.sidebar__item-presets-preset\n{\n    padding:4px;\n    cursor:pointer;\n    padding-left:8px;\n    padding-right:8px;\n    margin-right:4px;\n    background-color:#444;\n}\n\n.sidebar__item-presets-preset:hover\n{\n    background-color:#666;\n}\n\n.sidebar__greyout\n{\n    background: #222;\n    opacity: 0.8;\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: 1000;\n    right: 0;\n    top: 0;\n}\n\n.sidebar_tabs\n{\n    background-color: #151515;\n    padding-bottom: 0px;\n}\n\n.sidebar_switchs\n{\n    float: right;\n}\n\n.sidebar_tab\n{\n    float:left;\n    background-color: #151515;\n    border-bottom:1px solid transparent;\n    padding-right:7px;\n    padding-left:7px;\n    padding-bottom: 5px;\n    padding-top: 5px;\n    cursor:pointer;\n}\n\n.sidebar_tab_active\n{\n    background-color: #272727;\n    color:white;\n}\n\n.sidebar_tab:hover\n{\n    border-bottom:1px solid #777;\n    color:white;\n}\n\n\n.sidebar_switch\n{\n    float:left;\n    background-color: #444;\n    padding-right:7px;\n    padding-left:7px;\n    padding-bottom: 5px;\n    padding-top: 5px;\n    cursor:pointer;\n}\n\n.sidebar_switch:last-child\n{\n    border-top-right-radius: 7px;\n    border-bottom-right-radius: 7px;\n}\n\n.sidebar_switch:first-child\n{\n    border-top-left-radius: 7px;\n    border-bottom-left-radius: 7px;\n}\n\n\n.sidebar_switch_active\n{\n    background-color: #999;\n    color:white;\n}\n\n.sidebar_switch:hover\n{\n    color:white;\n}\n"};const a="cables-sidebar-style";const r="cables-sidebar-dynamic-style";const s="sidebar-cables";const l="sidebar"+CABLES.uuid();const u="sidebar__items";const c="sidebar__close-button";const o="";const m="";let _=null;let e=null;let d=null;const t=i.inValueBool("Visible",true);const p=i.inValueSlider("Opacity",1);const v=i.inValueBool("Default Minimized");const f=i.inValueSlider("Minimized Opacity",.5);const g=i.inValueBool("Show undo button",false);const h=i.inValueBool("Show Minimize",false);const b=i.inString("Title","Sidebar");const x=i.inValueBool("Side");const O=i.outObject("childs");O.setUiAttribs({title:"Children"});const I=i.outBool("Opfened");I.setUiAttribs({title:"Opened"});let T=document.querySelector("."+l);if(!T){T=R()}const y=T.querySelector("."+u);O.set({parentElement:y,parentOp:i});E();L();j();t.onChange=P;p.onChange=N;v.onChange=E;f.onChange=S;g.onChange=M;i.onDelete=G;function S(){j()}h.onChange=A;function A(e){if(!e||e.uiAttribs)e=document.querySelector(".sidebar-cables .sidebar__group-header");if(!e)return;const t=document.querySelector(".sidebar-cables .sidebar__group-header .sidebar__group-header-undo");if(h.get()){e.classList.add("iconsidebar-chevron-up");e.classList.add("iconsidebar-minimizebutton");if(t)t.style.marginRight="20px"}else{e.classList.remove("iconsidebar-chevron-up");e.classList.remove("iconsidebar-minimizebutton");if(t)t.style.marginRight="initial"}}x.onChange=function(){if(x.get())T.classList.add("sidebar-cables-right");else T.classList.remove("sidebar-cables-right")};function M(){const e=document.querySelector(".sidebar-cables .sidebar__group-header");if(e){C(e)}}function C(e){if(e){const t=document.querySelector(".sidebar-cables .sidebar__group-header .sidebar__group-header-undo");if(t){if(!g.get()){t.remove()}}else{if(g.get()){const n=document.createElement("span");n.classList.add("sidebar__group-header-undo");n.classList.add("sidebar-icon-undo");n.addEventListener("click",function(e){e.stopPropagation();const t=document.querySelectorAll(".sidebar-cables .sidebar__reloadable");const n=document.createEvent("MouseEvents");n.initEvent("dblclick",true,true);t.forEach(e=>{e.dispatchEvent(n)})});e.appendChild(n)}}}A(e)}function E(){if(!_){return}if(v.get()){T.classList.add("sidebar--closed");if(t.get()){I.set(false)}}else{T.classList.remove("sidebar--closed");if(t.get()){I.set(true)}}}function N(){const e=p.get();T.style.opacity=e}function P(){if(t.get()){T.style.display="block";if(!T.classList.contains("sidebar--closed")){I.set(true)}}else{T.style.display="none";I.set(false)}}x.onChanged=function(){};function j(){const e=document.querySelectorAll("."+r);if(e){e.forEach(function(e){e.parentNode.removeChild(e)})}const t=document.createElement("style");t.classList.add(r);let n=".sidebar--closed .sidebar__close-button { ";n+="opacity: "+f.get();n+="}";const a=document.createTextNode(n);t.appendChild(a);document.body.appendChild(t)}function R(){const e=document.createElement("div");e.classList.add(s);e.classList.add(l);const t=i.patch.cgl.canvas.parentElement;const n=document.createElement("div");n.classList.add("sidebar__group");e.appendChild(n);const a=document.createElement("div");a.classList.add("sidebar__group-header");e.appendChild(a);const r=document.createElement("span");r.classList.add("sidebar__group-header-title");d=document.createElement("span");d.classList.add("sidebar__group-header-title-text");d.innerHTML=b.get();r.appendChild(d);a.appendChild(r);C(a);A(a);n.appendChild(a);e.appendChild(n);n.addEventListener("click",w);if(!t){i.warn("[sidebar] no canvas parentelement found...");return}t.appendChild(e);const o=document.createElement("div");o.classList.add(u);e.appendChild(o);_=document.createElement("div");_.classList.add(c);_.addEventListener("click",w);e.appendChild(_);return e}b.onChange=function(){if(d)d.innerHTML=b.get()};function D(e){}function w(e){e.stopPropagation();if(!T){i.logError("Sidebar could not be closed...");return}T.classList.toggle("sidebar--closed");const t=e.target;let n=o;if(T.classList.contains("sidebar--closed")){n=m;I.set(false)}else{I.set(true)}}function L(){const e=document.querySelectorAll("."+a);if(e){e.forEach(function(e){e.parentNode.removeChild(e)})}const t=document.createElement("style");t.innerHTML=n.style_css;t.classList.add(a);document.body.appendChild(t)}function G(){k(T)}function k(e){if(e&&e.parentNode&&e.parentNode.removeChild)e.parentNode.removeChild(e)}};Ops.Sidebar.Sidebar.prototype=new CABLES.Op;CABLES.OPS["5a681c35-78ce-4cb3-9858-bc79c34c6819"]={f:Ops.Sidebar.Sidebar,objName:"Ops.Sidebar.Sidebar"};Ops.Gl.ShaderEffects.InstancedDisplacementMap=function(){CABLES.Op.apply(this,arguments);const e=this;const t={displace_vert:"\n#ifdef INSTANCING\n\n    #ifdef MOD_SRC_INSTMAT\n        vec3 MOD_p=vec3(instMat[3][0],instMat[3][1],instMat[3][2]);\n    #endif\n\n    #ifdef MOD_SRC_MMAT\n        vec3 MOD_p=vec3(mMatrix[3][0],mMatrix[3][1],mMatrix[3][2]);\n    #endif\n    // vec3 MOD_p=(mMatrix*vec4(0.0,0.0,0.0,1.0)).xyz;//vec3(mMatrix[3][0],mMatrix[3][1],mMatrix[3][2]);\n\n    vec2 MOD_coord=MOD_p.xy*(1.0/MOD_scale)+MOD_offset-vec2(0.5,0.5);\n\n    // vec3 MOD_dis\n\n    #ifdef MOD_CHAN_R\n        vec3 MOD_dis=vec3( texture(MOD_texture,MOD_coord).r );\n    #endif\n    #ifdef MOD_CHAN_G\n        vec3 MOD_dis=vec3( texture(MOD_texture,MOD_coord).g );\n    #endif\n    #ifdef MOD_CHAN_B\n        vec3 MOD_dis=vec3( texture(MOD_texture,MOD_coord).b );\n    #endif\n\n    #ifdef MOD_CHAN_RGB\n        vec3 MOD_dis=vec3( texture(MOD_texture,MOD_coord).rgb );\n    #endif\n\n    #ifdef MOD_COLORIZE\n        MOD_dispColor=MOD_dis;\n    #endif\n\n    #ifdef MOD_DEBUG\n        MOD_dispColor.rg=mod(MOD_coord,1.0).rg;\n    #endif\n\n\n    #ifdef MOD_NORMALIZE\n        MOD_dis=(MOD_dis-0.5)*2.0;\n    #endif\n\n\n    #ifdef MOD_CLAMP\n    if(MOD_coord.x>1.0||MOD_coord.x<0.0|| MOD_coord.y>1.0 || MOD_coord.y<0.0)\n    {\n        MOD_dis=vec3(0.0);\n        #ifdef MOD_COLORIZE\n            MOD_dispColor=vec3(0.0);\n        #endif\n    }\n    #endif\n\n\n    #ifdef MOD_MODE_TRANS\n        MOD_dis*=MOD_strength;\n        MOD_dis+=MOD_min;\n\n        #ifdef MOD_AXIS_X\n            // pos.x+=MOD_dis;\n            mMatrix[3][0] += MOD_dis.x;\n        #endif\n        #ifdef MOD_AXIS_Y\n            // pos.y+=MOD_dis;\n            mMatrix[3][1] += MOD_dis.y;\n        #endif\n        #ifdef MOD_AXIS_Z\n            // pos.z+=MOD_dis;\n            mMatrix[3][2] += MOD_dis.z;\n        #endif\n    #endif\n\n    #ifdef MOD_MODE_SCALE\n        MOD_dis*=MOD_strength;\n        MOD_dis+=MOD_min;\n\n        #ifdef MOD_ABS\n            MOD_dis=abs(MOD_dis);\n        #endif\n\n        #ifdef MOD_AXIS_X\n            pos.x*=MOD_dis.x;\n        #endif\n        #ifdef MOD_AXIS_Y\n            pos.y*=MOD_dis.y;\n        #endif\n        #ifdef MOD_AXIS_Z\n            pos.z*=MOD_dis.z;\n        #endif\n    #endif\n\n    #ifdef MOD_MODE_ROT\n        #define MOD_PI 3.14159265358\n\n        #ifdef MOD_AXIS_X\n            pos*=MOD_rot(vec3(1.0,0.0,0.0), MOD_dis.x*3.14);\n            norm=((vec4(norm,0.0)*MOD_rot(vec3(1.0,0.0,0.0), MOD_dis.x*MOD_PI)).xyz);\n        #endif\n        #ifdef MOD_AXIS_Y\n            pos*=MOD_rot(vec3(0.0,1.0,0.0), MOD_dis.y*MOD_PI);\n            norm=((vec4(norm,0.0)*MOD_rot(vec3(0.0,1.0,0.0), MOD_dis.y*MOD_PI)).xyz);\n        #endif\n        #ifdef MOD_AXIS_Z\n            pos*=MOD_rot(vec3(0.0,0.0,1.0), MOD_dis.z*MOD_PI);\n            norm=((vec4(norm,0.0)*MOD_rot(vec3(0.0,0.0,1.0), MOD_dis.z*MOD_PI)).xyz);\n        #endif\n\n        norm=normalize(norm);\n    #endif\n\n#endif\n",displace_head_vert:"\n#ifdef MOD_COLORIZE\nOUT vec3 MOD_dispColor;\n#endif\n\n\n\n#ifdef MOD_MODE_ROT\n\n    mat4 MOD_rot(vec3 axis, float angle)\n    {\n        axis = normalize(axis);\n        float s = sin(angle);\n        float c = cos(angle);\n        float oc = 1.0 - c;\n\n        return mat4(\n    \t\toc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n            oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n            oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n    \t\t0.0,                                0.0,                                0.0,                                1.0\n    \t);\n    }\n\n#endif"};const n=e.inTrigger("Trigger"),a=e.inTexture("Texture"),r=e.inSwitch("Source",["Model Pos","Inst Pos"],"Model Pos"),o=e.inSwitch("Mode",["Translate","Scale","Rotate"],"Translate"),i=e.inFloat("Strength",1),s=e.inFloat("Min",0),l=e.inFloat("Scale",1),u=e.inBool("Clamp",false),c=e.inBool("Colorize",false),m=e.inBool("Debug Bounds",false),_=e.inBool("Normalize",false),d=e.inFloat("Offset X",0),p=e.inFloat("Offset Y",0),v=e.inBool("Abs",false),f=e.inSwitch("Channel",["R","G","B","RGB"],"R"),g=e.inBool("X",false),h=e.inBool("Y",false),b=e.inBool("Z",true),x=e.outTrigger("Next");g.onChange=a.onChange=h.onChange=b.onChange=u.onChange=o.onChange=_.onChange=m.onChange=f.onChange=v.onChange=c.onChange=T;n.onTriggered=y;const O=e.patch.cgl;const I=new CGL.ShaderModifier(O,e.name);I.addModule({title:e.name,name:"MODULE_VERTEX_POSITION",srcHeadVert:t.displace_head_vert||"",srcBodyVert:t.displace_vert||""});I.addModule({title:e.name,name:"MODULE_COLOR",srcHeadFrag:"#ifdef MOD_COLORIZE\nIN vec3 MOD_dispColor;\n#endif",srcBodyFrag:"#ifdef MOD_COLORIZE\ncol.rgb*=MOD_dispColor;\n#endif"});I.addUniformVert("t","MOD_texture",0);I.addUniformVert("2f","MOD_offset",d,p);I.addUniformVert("f","MOD_scale",l);I.addUniformVert("f","MOD_strength",i);I.addUniformVert("f","MOD_min",s);T();function T(){e.setUiAttrib({extendTitle:o.get()});I.toggleDefine("MOD_MODE_TRANS",o.get()==="Translate");I.toggleDefine("MOD_MODE_SCALE",o.get()==="Scale");I.toggleDefine("MOD_MODE_ROT",o.get()==="Rotate");I.toggleDefine("MOD_CHAN_R",f.get()!="G"&&f.get()!="B"&&f.get()!="RGB");I.toggleDefine("MOD_CHAN_G",f.get()=="G");I.toggleDefine("MOD_CHAN_B",f.get()=="B");I.toggleDefine("MOD_CHAN_RGB",f.get()=="RGB");I.toggleDefine("MOD_SRC_INSTMAT",r.get()=="Inst Pos");I.toggleDefine("MOD_SRC_MMAT",r.get()=="Model Pos");I.toggleDefine("MOD_AXIS_X",g.get());I.toggleDefine("MOD_AXIS_Y",h.get());I.toggleDefine("MOD_AXIS_Z",b.get());I.toggleDefine("MOD_ABS",v.get());I.toggleDefine("MOD_CLAMP",u.get());I.toggleDefine("MOD_COLORIZE",c.get()||m.get());I.toggleDefine("MOD_NORMALIZE",_.get());I.toggleDefine("MOD_DEBUG",m.get())}function y(){I.bind();if(a.get())I.pushTexture("MOD_texture",a.get().tex);else I.pushTexture("MOD_texture",CGL.Texture.getEmptyTexture(O).tex);x.trigger();I.unbind()}};Ops.Gl.ShaderEffects.InstancedDisplacementMap.prototype=new CABLES.Op;CABLES.OPS["fb30d485-3906-4a17-b4d3-365286044035"]={f:Ops.Gl.ShaderEffects.InstancedDisplacementMap,objName:"Ops.Gl.ShaderEffects.InstancedDisplacementMap"};Ops.Gl.TextureToPoints=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const p=e.patch.cgl,n=e.inTriggerButton("update"),v=e.inValueInt("Num Points",2e3),f=e.inValueFloat("Seed",1),g=e.inSwitch("Z Position",["None","Red","Green","Blue","Alpha"],"Red"),h=e.inValueFloat("Z Multiply",1),b=e.inObject("texture"),x=e.outTrigger("trigger"),O=e.outArray("Points"),I=e.outValue("NumPoints");var T=null,y=null,S=false;e.toWorkPortsNeedToBeLinked(b,O);b.onChange=function(){S=true};var A=e.patch.cgl.gl.UNSIGNED_BYTE;var M=[];n.onTriggered=a;const C=4;function a(){var e=b.get(),t=p.gl;if(!e)return;if(!T)T=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,T);if(S){t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.tex,0);y=new Uint8Array(e.width*e.height*C);S=false}t.bindFramebuffer(t.FRAMEBUFFER,T);t.readPixels(0,0,e.width,e.height,t.RGBA,A,y);t.bindFramebuffer(t.FRAMEBUFFER,null);var n=v.get();var a=y.length;if(n*3!=M.length)M.length=n*3;Math.randomSeed=f.get();var r=1/e.width;var o=1/e.height;var i=r*e.width/2;var s=o*e.height/2;var l=0;var u=0;var c=0;if(g.get()=="Green")c=1;else if(g.get()=="Blue")c=2;else if(g.get()=="Alpha")c=3;else if(g.get()=="None")c=4;while(l<n*3){u++;if(u>n*3*100)return;var m=Math.floor(Math.seededRandom()*e.width);var _=Math.floor(Math.seededRandom()*e.height);var d=y[(m+_*e.width)*C+c];if(d>10){M[l++]=m*r-i;M[l++]=_*o-s;if(c<4)M[l++]=d/255*h.get();else M[l++]=0}}I.set(l/3);O.set(null);O.set(M);t.bindFramebuffer(t.FRAMEBUFFER,null);x.trigger()}};Ops.Gl.TextureToPoints.prototype=new CABLES.Op;CABLES.OPS["ff757f51-fbb0-4728-b158-644094cd160e"]={f:Ops.Gl.TextureToPoints,objName:"Ops.Gl.TextureToPoints"};Ops.Gl.ShaderEffects.VertexWobble_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={sinewobble_vert:"\n#ifndef MOD_WORLDSPACE\n   vec4 MOD_vertPos=vec4(vPosition,1.0);\n#endif\n#ifdef MOD_WORLDSPACE\n   vec4 MOD_vertPos=mMatrix*pos;\n#endif\n\n#ifdef MOD_AREA_SPHERE\n    float MOD_de=distance(\n        MOD_posSize.xyz,\n        vec3(MOD_vertPos.x,MOD_vertPos.y,MOD_vertPos.z)\n        );\n#endif\n\n#ifdef MOD_AREA_BOX\n    float MOD_de=0.0;\n    if(abs(MOD_vertPos.y-MOD_posSize.y)>MOD_posSize.w ||\n        abs(MOD_vertPos.x-MOD_posSize.x)>MOD_posSize.w ||\n        abs(MOD_vertPos.z-MOD_posSize.z)>MOD_posSize.w ) MOD_de=1.0;\n#endif\n\n#ifdef MOD_AREA_AXIS_X\n    float MOD_de=abs(MOD_posSize.x-MOD_vertPos.x);\n#endif\n#ifdef MOD_AREA_AXIS_Y\n    float MOD_de=abs(MOD_posSize.y-MOD_vertPos.y);\n#endif\n#ifdef MOD_AREA_AXIS_Z\n    float MOD_de=abs(MOD_posSize.z-MOD_vertPos.z);\n#endif\n\n#ifdef MOD_AREA_AXIS_X_INFINITE\n    float MOD_de=MOD_posSize.x-MOD_vertPos.x;\n#endif\n#ifdef MOD_AREA_AXIS_Y_INFINITE\n    float MOD_de=MOD_posSize.y-MOD_vertPos.y;\n#endif\n#ifdef MOD_AREA_AXIS_Z_INFINITE\n    float MOD_de=MOD_posSize.z-MOD_vertPos.z;\n#endif\n\n#ifndef MOD_AREA_BOX\n    MOD_de=1.0-smoothstep(MOD_falloff,MOD_posSize.w,MOD_de);\n#endif\n\n#ifdef MOD_AREA_INVERT\n    MOD_de=1.0-MOD_de;\n#endif\n\nfloat MOD_v=0.0;\n\n#ifdef MOD_SRC_XZ\n   MOD_v=(MOD_vertPos.x+MOD_vertPos.z);\n#endif\n#ifdef MOD_SRC_XY\n   MOD_v=(MOD_vertPos.x+MOD_vertPos.y);\n#endif\n#ifdef MOD_SRC_X\n   MOD_v=MOD_vertPos.x;\n#endif\n#ifdef MOD_SRC_Y\n   MOD_v=MOD_vertPos.y;\n#endif\n#ifdef MOD_SRC_Z\n   MOD_v=MOD_vertPos.z;\n#endif\n\n\nfloat MOD_amnt=MOD_amount*MOD_de;\n\nMOD_v=sin( (MOD_time)+( MOD_v*MOD_scale  ) ) ;\n#ifdef MOD_POSITIVE\n    MOD_v=(MOD_v+1.0)/2.0;\n#endif\nMOD_v*=MOD_amnt;\n\n\n\n\n#ifdef MOD_TO_AXIS_X\n   pos.x+=MOD_v;\n//   norm.x+=MOD_v;\n#endif\n\n#ifdef MOD_TO_AXIS_Y\n   pos.y+=MOD_v;\n//   norm.y+=MOD_v;\n#endif\n\n#ifdef MOD_TO_AXIS_Z\n   pos.z+=MOD_v;\n//   norm.z+=MOD_v;\n#endif\n\n// norm=normalize(norm);\n\n\n\n\n\n"};let n=this;const a=e.patch.cgl;const r=e.inTrigger("render");let o=e.inValueSelect("Source",["X * Z + Time","X * Y + Time","X + Time","Y + Time","Z + Time"],"X * Z + Time");const i=e.inValueSlider("amount",.1),s=e.inFloat("Time",0),l=e.inValueFloat("Scale",3),u=e.inValueBool("axisX",true),c=e.inValueBool("axisY",true),m=e.inValueBool("axisZ",true),_=e.inSwitch("Range",["-1 to 1","0 to 1"],"-1 to 1"),d=e.inValueSelect("Area",["Sphere","Box","Axis X","Axis Y","Axis Z","Axis X Infinite","Axis Y Infinite","Axis Z Infinite"],"Sphere"),p=e.inValue("Size",1),v=e.inValueSlider("Falloff",0),f=e.inValue("x"),g=e.inValue("y"),h=e.inValue("z"),b=e.inValueBool("WorldSpace",true),x=e.inValueBool("Invert"),O=this.outTrigger("trigger");e.setPortGroup("Area",[d,p,f,g,h,v,b,x]);_.onChange=d.onChange=b.onChange=p.onChange=o.onChange=m.onChange=u.onChange=c.onChange=y;const I="";const T=new CGL.ShaderModifier(a,e.name);T.addModule({title:e.name,name:"MODULE_VERTEX_POSITION",srcHeadVert:I,srcBodyVert:t.sinewobble_vert});T.addUniform("4f","MOD_posSize",f,g,h,p);T.addUniformVert("f","MOD_time",s);T.addUniformVert("f","MOD_amount",i);T.addUniformVert("f","MOD_scale",l);T.addUniformVert("f","MOD_falloff",v);y();function y(){T.toggleDefine("MOD_AREA_INVERT",x.get());T.toggleDefine("MOD_POSITIVE",_.get()=="0 to 1");T.toggleDefine("MOD_WORLDSPACE",b.get());T.toggleDefine("MOD_AREA_AXIS_X",d.get()=="Axis X");T.toggleDefine("MOD_AREA_AXIS_Y",d.get()=="Axis Y");T.toggleDefine("MOD_AREA_AXIS_Z",d.get()=="Axis Z");T.toggleDefine("MOD_AREA_AXIS_X_INFINITE",d.get()=="Axis X Infinite");T.toggleDefine("MOD_AREA_AXIS_Y_INFINITE",d.get()=="Axis Y Infinite");T.toggleDefine("MOD_AREA_AXIS_Z_INFINITE",d.get()=="Axis Z Infinite");T.toggleDefine("MOD_AREA_SPHERE",d.get()=="Sphere");T.toggleDefine("MOD_AREA_BOX",d.get()=="Box");T.toggleDefine("MOD_TO_AXIS_X",u.get());T.toggleDefine("MOD_TO_AXIS_Y",c.get());T.toggleDefine("MOD_TO_AXIS_Z",m.get());T.toggleDefine("MOD_SRC_XZ",!o.get()||o.get()=="X * Z + Time"||o.get()==="");T.toggleDefine("MOD_SRC_XY",o.get()=="X * Y + Time");T.toggleDefine("MOD_SRC_X",o.get()=="X + Time");T.toggleDefine("MOD_SRC_Y",o.get()=="Y + Time");T.toggleDefine("MOD_SRC_Z",o.get()=="Z + Time")}r.onTriggered=function(){T.bind();O.trigger();T.unbind()}};Ops.Gl.ShaderEffects.VertexWobble_v2.prototype=new CABLES.Op;CABLES.OPS["76983d1c-be6d-453d-b34f-472efe8221e7"]={f:Ops.Gl.ShaderEffects.VertexWobble_v2,objName:"Ops.Gl.ShaderEffects.VertexWobble_v2"};Ops.Anim.AnimNumber=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("exe"),a=e.inValue("Value"),r=e.inValueFloat("duration"),o=e.outTrigger("Next"),i=e.outNumber("result"),s=e.outTrigger("Finished");const l=new CABLES.Anim;l.createPort(e,"easing",d);l.loop=false;r.set(.5);r.onChange=a.onChange=d;let u=0;let c=0;let m=0;let _=true;function d(){c=performance.now();l.clear(CABLES.now()/1e3);if(_)l.setValue(CABLES.now()/1e3,a.get());l.setValue(r.get()+CABLES.now()/1e3,a.get(),p);_=false}function p(){s.trigger()}n.onTriggered=function(){let e=CABLES.now()/1e3;if(performance.now()-u>300){_=true;d()}u=performance.now();let t=l.getValue(e);i.set(t);o.trigger()}};Ops.Anim.AnimNumber.prototype=new CABLES.Op;CABLES.OPS["e5b0b016-9663-4c9d-9365-f54ae3c5fbb6"]={f:Ops.Anim.AnimNumber,objName:"Ops.Anim.AnimNumber"};Ops.Deprecated.Gl.Matrix.CircleMovement_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("render"),a=e.inFloat("Duration ",10),r=e.inValueFloat("offset"),o=e.inValue("Time",0),i=e.inValueInt("segments",40),s=e.inValueFloat("radius",1),l=e.inValueFloat("mulX",1),u=e.inValueFloat("mulY",1),c=e.outTrigger("trigger"),m=e.outValue("index"),_=e.outValue("X"),d=e.outValue("Y");e.setPortGroup("Time",[a,r,o]);const p=e.patch.cgl;const v=new CABLES.Anim;const f=new CABLES.Anim;const g=[];v.loop=true;f.loop=true;i.onChange=h;h();n.onTriggered=function(){p.pushModelMatrix();let e=o.get()/a.get();e+=r.get();let t=v.getValue(e)*l.get()*s.get();let n=f.getValue(e)*u.get()*s.get();_.set(t);d.set(n);mat4.translate(p.mMatrix,p.mMatrix,[t,n,0]);c.trigger();p.popModelMatrix()};function h(){g.length=0;let e=0,t=0;v.clear();f.clear();for(e=0;e<=Math.round(i.get());e++){m.set(e);t=360/Math.round(i.get())*e*CGL.DEG2RAD;v.setValue(e/i.get(),Math.cos(t));f.setValue(e/i.get(),Math.sin(t))}}};Ops.Deprecated.Gl.Matrix.CircleMovement_v2.prototype=new CABLES.Op;CABLES.OPS["2101aee7-e890-4efb-b891-e180c382e560"]={f:Ops.Deprecated.Gl.Matrix.CircleMovement_v2,objName:"Ops.Deprecated.Gl.Matrix.CircleMovement_v2"};Ops.Ui.Area=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inString("Title","");n.setUiAttribs({hidePort:true});e.setUiAttrib({hasArea:true});e.init=n.onChange=e.onLoaded=a;a();function a(){if(CABLES.UI){gui.setStateUnsaved();e.uiAttr({comment_title:n.get()||" "});e.name=n.get()}}};Ops.Ui.Area.prototype=new CABLES.Op;CABLES.OPS["38f79614-b0de-4960-8da5-2827e7f43415"]={f:Ops.Ui.Area,objName:"Ops.Ui.Area"};Ops.Gl.GLTF.GltfScene_v3=function(){CABLES.Op.apply(this,arguments);const x=this;const l={inc_camera_js:"const gltfCamera = class\n{\n    constructor(gltf, node)\n    {\n        this.node=node;\n        this.name=node.name;\n        // console.log(gltf);\n        this.config=gltf.json.cameras[node.camera];\n\n        this.pos = vec3.create();\n        this.quat = quat.create();\n        this.quatOr = quat.create();\n        this.vCenter = vec3.create();\n        this.vUp = vec3.create();\n        this.vMat = mat4.create();\n\n    }\n\n    updateAnim(time)\n    {\n        if (this.node && this.node._animTrans)\n        {\n\n            vec3.set(this.pos,\n                this.node._animTrans[0].getValue(time),\n                this.node._animTrans[1].getValue(time),\n                this.node._animTrans[2].getValue(time));\n\n            quat.set(this.quat,\n                this.node._animRot[0].getValue(time),\n                this.node._animRot[1].getValue(time),\n                this.node._animRot[2].getValue(time),\n                this.node._animRot[3].getValue(time));\n        }\n    }\n\n    start(time)\n    {\n        if (cgl.frameStore.shadowPass) return;\n\n        this.updateAnim(time);\n        const asp = cgl.getViewPort()[2] / cgl.getViewPort()[3];\n\n        cgl.pushPMatrix();\n        // mat4.perspective(\n        //     cgl.pMatrix,\n        //     this.config.perspective.yfov*0.5,\n        //     asp,\n        //     this.config.perspective.znear,\n        //     this.config.perspective.zfar);\n\n        cgl.pushViewMatrix();\n        // mat4.identity(cgl.vMatrix);\n\n        // if(this.node && this.node.parent)\n        // {\n        //     console.log(this.node.parent)\n            // vec3.add(this.pos,this.pos,this.node.parent._node.translation);\n            // vec3.sub(this.vCenter,this.vCenter,this.node.parent._node.translation);\n            // mat4.translate(cgl.vMatrix,cgl.vMatrix,\n            // [\n            //     -this.node.parent._node.translation[0],\n            //     -this.node.parent._node.translation[1],\n            //     -this.node.parent._node.translation[2]\n            // ])\n        // }\n\n\n\n        // vec3.set(this.vUp, 0, 1, 0);\n        // vec3.set(this.vCenter, 0, -1, 0);\n        // // vec3.set(this.vCenter, 0, 1, 0);\n        // vec3.transformQuat(this.vCenter, this.vCenter, this.quat);\n        // vec3.normalize(this.vCenter, this.vCenter);\n        // vec3.add(this.vCenter, this.vCenter, this.pos);\n\n\n        // mat4.lookAt(cgl.vMatrix, this.pos, this.vCenter, this.vUp);\n\n\n        let mv=mat4.create();\n        mat4.invert(mv,this.node.modelMatAbs());\n\n        // console.log(this.node.modelMatAbs());\n\n        this.vMat=mv;\n\n        mat4.identity(cgl.vMatrix);\n        // console.log(mv);\n        mat4.mul(cgl.vMatrix,cgl.vMatrix,mv);\n\n\n    }\n\n    end()\n    {\n        if (cgl.frameStore.shadowPass) return;\n        cgl.popPMatrix();\n        cgl.popViewMatrix();\n    }\n};\n\n",inc_gltf_js:'const CHUNK_HEADER_SIZE = 8;\n\nconst Gltf = class\n{\n    constructor()\n    {\n        this.json = {};\n        this.accBuffers = [];\n        this.meshes = [];\n        this.nodes = [];\n        this.shaders = [];\n        this.timing = [];\n        this.cams = [];\n        this.startTime = performance.now();\n        this.bounds = new CGL.BoundingBox();\n        this.loaded = Date.now();\n        this.accBuffersDelete = [];\n    }\n\n    getNode(n)\n    {\n        for (let i = 0; i < this.nodes.length; i++)\n        {\n            if (this.nodes[i].name == n) return this.nodes[i];\n        }\n    }\n\n    unHideAll()\n    {\n        for (let i = 0; i < this.nodes.length; i++)\n        {\n            this.nodes[i].unHide();\n        }\n    }\n};\n\nfunction Utf8ArrayToStr(array)\n{\n    if (window.TextDecoder) return new TextDecoder("utf-8").decode(array);\n\n    let out, i, len, c;\n    let char2, char3;\n\n    out = "";\n    len = array.length;\n    i = 0;\n    while (i < len)\n    {\n        c = array[i++];\n        switch (c >> 4)\n        {\n        case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:\n            // 0xxxxxxx\n            out += String.fromCharCode(c);\n            break;\n        case 12: case 13:\n            // 110x xxxx   10xx xxxx\n            char2 = array[i++];\n            out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));\n            break;\n        case 14:\n            // 1110 xxxx  10xx xxxx  10xx xxxx\n            char2 = array[i++];\n            char3 = array[i++];\n            out += String.fromCharCode(((c & 0x0F) << 12) |\n                    ((char2 & 0x3F) << 6) |\n                    ((char3 & 0x3F) << 0));\n            break;\n        }\n    }\n\n    return out;\n}\n\nfunction readChunk(dv, bArr, arrayBuffer, offset)\n{\n    const chunk = {};\n\n    if (offset >= dv.byteLength)\n    {\n        op.log("could not read chunk...");\n        return;\n    }\n    chunk.size = dv.getUint32(offset + 0, le);\n\n    // chunk.type = new TextDecoder("utf-8").decode(bArr.subarray(offset+4, offset+4+4));\n    chunk.type = Utf8ArrayToStr(bArr.subarray(offset + 4, offset + 4 + 4));\n\n    if (chunk.type == "BIN\\0")\n    {\n        // console.log(chunk.size,arrayBuffer.length,offset);\n        // try\n        // {\n        chunk.dataView = new DataView(arrayBuffer, offset + 8, chunk.size);\n        // }\n        // catch(e)\n        // {\n        //     chunk.dataView = null;\n        //     console.log(e);\n        // }\n    }\n    else\n    if (chunk.type == "JSON")\n    {\n        const json = Utf8ArrayToStr(bArr.subarray(offset + 8, offset + 8 + chunk.size));\n\n        try\n        {\n            const obj = JSON.parse(json);\n            chunk.data = obj;\n            outGenerator.set(obj.asset.generator);\n        }\n        catch (e)\n        {\n        }\n    }\n    else\n    {\n        op.warn("unknown type", chunk.type);\n    }\n\n    return chunk;\n}\n\nfunction loadAnims(gltf)\n{\n    const uniqueAnimNames = {};\n\n    for (let i = 0; i < gltf.json.animations.length; i++)\n    {\n        const an = gltf.json.animations[i];\n\n        for (let ia = 0; ia < an.channels.length; ia++)\n        {\n            const chan = an.channels[ia];\n\n            const node = gltf.nodes[chan.target.node];\n            const sampler = an.samplers[chan.sampler];\n\n            const acc = gltf.json.accessors[sampler.input];\n            const bufferIn = gltf.accBuffers[sampler.input];\n\n            const accOut = gltf.json.accessors[sampler.output];\n            const bufferOut = gltf.accBuffers[sampler.output];\n\n            gltf.accBuffersDelete.push(sampler.output, sampler.input);\n\n            if (bufferIn && bufferOut)\n            {\n                let numComps = 1;\n                if (accOut.type == "VEC2")numComps = 2;\n                else if (accOut.type == "VEC3")numComps = 3;\n                else if (accOut.type == "VEC4")numComps = 4;\n                else op.warn("unknown accOut.type", accOut.type);\n\n                const anims = [];\n\n                uniqueAnimNames[an.name] = true;\n\n                for (let k = 0; k < numComps; k++)\n                {\n                    const newAnim = new CABLES.TL.Anim();\n                    // newAnim.name=an.name;\n                    anims.push(newAnim);\n                }\n\n                if (sampler.interpolation == "LINEAR") {}\n                else if (sampler.interpolation == "STEP") for (let k = 0; k < numComps; k++) anims[k].defaultEasing = CABLES.EASING_ABSOLUTE;\n                else if (sampler.interpolation == "CUBICSPLINE") for (let k = 0; k < numComps; k++) anims[k].defaultEasing = CABLES.EASING_CUBICSPLINE;\n                else op.warn("unknown interpolation", sampler.interpolation);\n\n                // console.log(bufferOut)\n\n                // if there is no keyframe for time 0 copy value of first keyframe at time 0\n                if (bufferIn[0] !== 0.0)\n                    for (let k = 0; k < numComps; k++)\n                        anims[k].setValue(0, bufferOut[0 * numComps + k]);\n\n                // console.log(sampler.interpolation,bufferOut.length/numComps)\n\n                for (let j = 0; j < bufferIn.length; j++)\n                {\n                    maxTime = Math.max(bufferIn[j], maxTime);\n\n                    for (let k = 0; k < numComps; k++)\n                    {\n                        if (anims[k].defaultEasing === CABLES.EASING_CUBICSPLINE)\n                        {\n                            const idx = ((j * numComps) * 3 + k);\n\n                            const key = anims[k].setValue(bufferIn[j], bufferOut[idx + numComps]);\n                            key.bezTangIn = bufferOut[idx];\n                            key.bezTangOut = bufferOut[idx + (numComps * 2)];\n\n                            // console.log(an.name,k,bufferOut[idx+1]);\n                        }\n                        else\n                        {\n                            // console.log(an.name,k,bufferOut[j * numComps + k]);\n                            anims[k].setValue(bufferIn[j], bufferOut[j * numComps + k]);\n                        }\n                    }\n                }\n\n                node.setAnim(chan.target.path, an.name, anims);\n            }\n            else\n            {\n                op.warn("loadAmins bufferIn undefined ", bufferIn === undefined);\n                op.warn("loadAmins bufferOut undefined ", bufferOut === undefined);\n                op.warn("loadAmins ", sampler, accOut);\n                op.warn("loadAmins num accBuffers", gltf.accBuffers.length);\n                op.warn("loadAmins num accessors", gltf.json.accessors.length);\n            }\n        }\n    }\n\n    outAnims.set(null);\n    outAnims.set(Object.keys(uniqueAnimNames));\n}\n\nfunction loadCams(gltf)\n{\n    if (!gltf || !gltf.json.cameras) return;\n\n    gltf.cameras = gltf.cameras || [];\n\n    for (let i = 0; i < gltf.nodes.length; i++)\n    {\n        if (gltf.nodes[i].hasOwnProperty("camera"))\n        {\n            const cam = new gltfCamera(gltf, gltf.nodes[i]);\n            gltf.cameras.push(cam);\n        }\n    }\n}\n\nfunction loadAfterDraco()\n{\n    if (!window.DracoDecoder)\n    {\n        setTimeout(() =>\n        {\n            loadAfterDraco();\n        }, 100);\n    }\n\n    reloadSoon();\n}\n\nfunction parseGltf(arrayBuffer)\n{\n    let j = 0, i = 0;\n\n    const gltf = new Gltf();\n    gltf.timing.push("Start parsing", Math.round((performance.now() - gltf.startTime)));\n\n    if (!arrayBuffer) return;\n    const byteArray = new Uint8Array(arrayBuffer);\n    let pos = 0;\n\n    // var string = new TextDecoder("utf-8").decode(byteArray.subarray(pos, 4));\n    const string = Utf8ArrayToStr(byteArray.subarray(pos, 4));\n    pos += 4;\n    if (string != "glTF") return;\n\n    gltf.timing.push("dataview", Math.round((performance.now() - gltf.startTime)));\n\n    const dv = new DataView(arrayBuffer);\n    const version = dv.getUint32(pos, le);\n    pos += 4;\n    const size = dv.getUint32(pos, le);\n    pos += 4;\n\n    outVersion.set(version);\n\n    const chunks = [];\n    gltf.chunks = chunks;\n\n    chunks.push(readChunk(dv, byteArray, arrayBuffer, pos));\n    pos += chunks[0].size + CHUNK_HEADER_SIZE;\n    gltf.json = chunks[0].data;\n    outJson.set(gltf.json);\n    outExtensions.set(gltf.json.extensionsUsed || []);\n\n    let ch = readChunk(dv, byteArray, arrayBuffer, pos);\n    while (ch)\n    {\n        chunks.push(ch);\n        pos += ch.size + CHUNK_HEADER_SIZE;\n        ch = readChunk(dv, byteArray, arrayBuffer, pos);\n    }\n\n    gltf.chunks = chunks;\n\n    const views = chunks[0].data.bufferViews;\n    const accessors = chunks[0].data.accessors;\n\n    gltf.timing.push("Parse buffers", Math.round((performance.now() - gltf.startTime)));\n\n    if (gltf.json.extensionsUsed && gltf.json.extensionsUsed.indexOf("KHR_draco_mesh_compression") > -1)\n    {\n        if (!window.DracoDecoder)\n        {\n            op.setUiError("gltfdraco", "GLTF draco compression lib not found / add draco op to your patch!");\n\n            loadAfterDraco();\n            return gltf;\n        }\n        else\n        {\n            gltf.useDraco = true;\n        }\n    }\n\n    op.setUiError("gltfdraco", null);\n    // let accPos = (view.byteOffset || 0) + (acc.byteOffset || 0);\n\n    if (views)\n    {\n        for (i = 0; i < accessors.length; i++)\n        {\n            const acc = accessors[i];\n\n            const view = views[acc.bufferView];\n\n            // if(!view || !acc)\n            // {\n\n            //     continue;\n            // }\n\n            let numComps = 0;\n            if (acc.type == "SCALAR")numComps = 1;\n            else if (acc.type == "VEC2")numComps = 2;\n            else if (acc.type == "VEC3")numComps = 3;\n            else if (acc.type == "VEC4")numComps = 4;\n            else if (acc.type == "MAT4")numComps = 16;\n            else console.error("unknown accessor type", acc.type);\n\n            //   const decoder = new decoderModule.Decoder();\n            //   const decodedGeometry = decodeDracoData(data, decoder);\n            //   // Encode mesh\n            //   encodeMeshToFile(decodedGeometry, decoder);\n\n            //   decoderModule.destroy(decoder);\n            //   decoderModule.destroy(decodedGeometry);\n\n            // 5120 (BYTE)\t1\n            // 5121 (UNSIGNED_BYTE)\t1\n            // 5122 (SHORT)\t2\n\n            if (chunks[1].dataView)\n            {\n                if (view)\n                {\n                    const num = acc.count * numComps;\n                    let accPos = (view.byteOffset || 0) + (acc.byteOffset || 0);\n                    let stride = view.byteStride || 0;\n                    let dataBuff = null;\n\n                    if (acc.componentType == 5126 || acc.componentType == 5125) // 4byte FLOAT or INT\n                    {\n                        stride = stride || 4;\n\n                        const isInt = acc.componentType == 5125;\n                        if (isInt)dataBuff = new Uint32Array(num);\n                        else dataBuff = new Float32Array(num);\n\n                        for (j = 0; j < num; j++)\n                        {\n                            if (isInt) dataBuff[j] = chunks[1].dataView.getUint32(accPos, le);\n                            else dataBuff[j] = chunks[1].dataView.getFloat32(accPos, le);\n\n                            if (stride != 4 && (j + 1) % numComps === 0)accPos += stride - (numComps * 4);\n                            accPos += 4;\n                        }\n                    }\n                    else if (acc.componentType == 5123) // UNSIGNED_SHORT\n                    {\n                        stride = stride || 2;\n\n                        dataBuff = new Uint16Array(num);\n\n                        for (j = 0; j < num; j++)\n                        {\n                            dataBuff[j] = chunks[1].dataView.getUint16(accPos, le);\n\n                            if (stride != 2 && (j + 1) % numComps === 0) accPos += stride - (numComps * 2);\n\n                            accPos += 2;\n                        }\n                    }\n                    else if (acc.componentType == 5121) // UNSIGNED_BYTE\n                    {\n                        stride = stride || 1;\n\n                        dataBuff = new Uint8Array(num);\n\n                        for (j = 0; j < num; j++)\n                        {\n                            dataBuff[j] = chunks[1].dataView.getUint8(accPos, le);\n\n                            if (stride != 1 && (j + 1) % numComps === 0) accPos += stride - (numComps * 1);\n\n                            accPos += 1;\n                        }\n                    }\n\n                    else\n                    {\n                        console.error("unknown component type", acc.componentType);\n                    }\n\n                    gltf.accBuffers.push(dataBuff);\n                }\n                else\n                {\n                    // console.log("has no dataview");\n                }\n            }\n        }\n    }\n\n    gltf.timing.push("Parse mesh groups", Math.round((performance.now() - gltf.startTime)));\n\n    gltf.json.meshes = gltf.json.meshes || [];\n\n    if (gltf.json.meshes)\n    {\n        for (i = 0; i < gltf.json.meshes.length; i++)\n        {\n            const mesh = new gltfMeshGroup(gltf, gltf.json.meshes[i]);\n            gltf.meshes.push(mesh);\n        }\n    }\n\n    gltf.timing.push("Parse nodes", Math.round((performance.now() - gltf.startTime)));\n\n    for (i = 0; i < gltf.json.nodes.length; i++)\n    {\n        if (gltf.json.nodes[i].children)\n            for (j = 0; j < gltf.json.nodes[i].children.length; j++)\n            {\n                gltf.json.nodes[gltf.json.nodes[i].children[j]].isChild = true;\n            }\n    }\n\n    for (i = 0; i < gltf.json.nodes.length; i++)\n    {\n        const node = new gltfNode(gltf.json.nodes[i], gltf);\n        gltf.nodes.push(node);\n    }\n\n    for (i = 0; i < gltf.nodes.length; i++)\n    {\n        const node = gltf.nodes[i];\n\n        if (!node.children) continue;\n        for (let j = 0; j < node.children.length; j++)\n        {\n            gltf.nodes[node.children[j]].parent = node;\n        }\n    }\n\n    for (i = 0; i < gltf.nodes.length; i++)\n    {\n        if (gltf.nodes[i].skin > -1)\n        {\n            gltf.nodes[i].skinRenderer = new GltfSkin(gltf.nodes[i]);\n        }\n    }\n\n    needsMatUpdate = true;\n\n    gltf.timing.push("load anims", Math.round((performance.now() - gltf.startTime)));\n\n    if (gltf.json.animations) loadAnims(gltf);\n\n    gltf.timing.push("load cameras", Math.round((performance.now() - gltf.startTime)));\n\n    if (gltf.json.cameras) loadCams(gltf);\n\n    gltf.timing.push("finished", Math.round((performance.now() - gltf.startTime)));\n\n    return gltf;\n}\n',inc_mesh_js:'let gltfMesh = class\n{\n    constructor(name, prim, gltf, finished)\n    {\n        this.POINTS = 0;\n        this.LINES = 1;\n        this.LINE_LOOP = 2;\n        this.LINE_STRIP = 3;\n        this.TRIANGLES = 4;\n        this.TRIANGLE_STRIP = 5;\n        this.TRIANGLE_FAN = 6;\n\n        this.test = 0;\n        this.name = name;\n        this.submeshIndex = 0;\n        this.material = prim.material;\n        this.mesh = null;\n        this.geom = new CGL.Geometry("gltf_" + this.name);\n        this.geom.verticesIndices = [];\n        this.bounds = null;\n        this.primitive = 4;\n        if (prim.hasOwnProperty("mode")) this.primitive = prim.mode;\n\n        if (prim.hasOwnProperty("indices")) this.geom.verticesIndices = gltf.accBuffers[prim.indices];\n\n        gltf.loadingMeshes = gltf.loadingMeshes || 0;\n        gltf.loadingMeshes++;\n\n        this.materialJson =\n            this._matPbrMetalness =\n            this._matPbrRoughness =\n            this._matDiffuseColor = null;\n\n        if (gltf.json.materials)\n        {\n            if (this.material != -1) this.materialJson = gltf.json.materials[this.material];\n\n            if (this.materialJson && this.materialJson.pbrMetallicRoughness)\n            {\n                if (this.materialJson.pbrMetallicRoughness.baseColorFactor)\n                    this._matDiffuseColor = this.materialJson.pbrMetallicRoughness.baseColorFactor;\n\n                this._matDiffuseColor = this.materialJson.pbrMetallicRoughness.baseColorFactor;\n\n                this._matPbrMetalness = this.materialJson.pbrMetallicRoughness.metallicFactor || null;\n                this._matPbrRoughness = this.materialJson.pbrMetallicRoughness.roughnessFactor || null;\n            }\n        }\n\n        if (gltf.useDraco && prim.extensions.KHR_draco_mesh_compression)\n        {\n            const view = gltf.chunks[0].data.bufferViews[prim.extensions.KHR_draco_mesh_compression.bufferView];\n            const num = view.byteLength;\n            const dataBuff = new Int8Array(num);\n            let accPos = (view.byteOffset || 0);// + (acc.byteOffset || 0);\n            for (let j = 0; j < num; j++)\n            {\n                dataBuff[j] = gltf.chunks[1].dataView.getInt8(accPos, le);\n                accPos++;\n            }\n\n            const dracoDecoder = window.DracoDecoder;\n            dracoDecoder.decodeGeometry(dataBuff.buffer, (geometry) =>\n            {\n                const geom = new CGL.Geometry("draco mesh " + name);\n\n                for (let i = 0; i < geometry.attributes.length; i++)\n                {\n                    const attr = geometry.attributes[i];\n\n                    if (attr.name === "position") geom.vertices = attr.array;\n                    else if (attr.name === "normal") geom.vertexNormals = attr.array;\n                    else if (attr.name === "uv") geom.texCoords = attr.array;\n                    else if (attr.name === "color") geom.vertexColors = this.calcVertexColors(attr.array);\n                    else if (attr.name === "joints") geom.setAttribute("attrJoints", Array.from(attr.array), 4);\n                    else if (attr.name === "weights")\n                    {\n                        const arr4 = new Float32Array(attr.array.length / attr.itemSize * 4);\n\n                        for (let k = 0; k < attr.array.length / attr.itemSize; k++)\n                        {\n                            arr4[k * 4] = arr4[k * 4 + 1] = arr4[k * 4 + 2] = arr4[k * 4 + 3] = 0;\n                            for (let j = 0; j < attr.itemSize; j++)\n                                arr4[k * 4 + j] = attr.array[k * attr.itemSize + j];\n                        }\n                        geom.setAttribute("attrWeights", arr4, 4);\n                    }\n                    else op.logWarn("unknown draco attrib", attr);\n                }\n\n                geometry.attributes = null;\n                geom.verticesIndices = geometry.index.array;\n\n                this.setGeom(geom);\n\n                this.mesh = null;\n                gltf.loadingMeshes--;\n                if (finished)finished(this);\n            }, (error) => { op.logError(error); });\n        }\n        else\n        {\n            gltf.loadingMeshes--;\n            this.fillGeomAttribs(gltf, this.geom, prim.attributes);\n\n            if (prim.targets)\n            {\n                console.log("prim.targets", prim.targets.length);\n                for (let j = 0; j < prim.targets.length; j++)\n                {\n                    // var tgeom=new CGL.Geometry("gltf_"+this.name);\n                    let tgeom = this.geom.copy();\n\n                    if (prim.hasOwnProperty("indices")) tgeom.verticesIndices = gltf.accBuffers[prim.indices];\n\n                    this.fillGeomAttribs(gltf, tgeom, prim.targets[j], false);\n\n                    { // calculate normals for final position of morphtarget for later...\n                        for (let i = 0; i < tgeom.vertices.length; i++) tgeom.vertices[i] += this.geom.vertices[i];\n                        tgeom.calculateNormals();\n                        for (let i = 0; i < tgeom.vertices.length; i++) tgeom.vertices[i] -= this.geom.vertices[i];\n                    }\n\n                    this.geom.morphTargets.push(tgeom);\n                }\n            }\n            if (finished)finished(this);\n        }\n    }\n\n    _linearToSrgb(x)\n    {\n        if (x <= 0)\n            return 0;\n        else if (x >= 1)\n            return 1;\n        else if (x < 0.0031308)\n            return x * 12.92;\n        else\n            return Math.pow(x, 1 / 2.2) * 1.055 - 0.055;\n    }\n\n    calcVertexColors(arr)\n    {\n        let vertexColors = null;\n        if (arr instanceof Float32Array)\n        {\n            let div = false;\n            for (let i = 0; i < arr.length; i++)\n            {\n                if (arr[i] > 1)\n                {\n                    div = true;\n                    continue;\n                }\n            }\n\n            if (div)\n                for (let i = 0; i < arr.length; i++) arr[i] /= 65535;\n\n            vertexColors = arr;\n        }\n\n        else if (arr instanceof Uint16Array)\n        {\n            const fb = new Float32Array(arr.length);\n            for (let i = 0; i < arr.length; i++) fb[i] = arr[i] / 65535;\n\n            vertexColors = fb;\n        }\n        else vertexColors = arr;\n\n        for (let i = 0; i < vertexColors.length; i++)\n        {\n            vertexColors[i] = this._linearToSrgb(vertexColors[i]);\n        }\n\n        return vertexColors;\n    }\n\n    fillGeomAttribs(gltf, tgeom, attribs, setGeom)\n    {\n        if (attribs.hasOwnProperty("POSITION")) tgeom.vertices = gltf.accBuffers[attribs.POSITION];\n        if (attribs.hasOwnProperty("NORMAL")) tgeom.vertexNormals = gltf.accBuffers[attribs.NORMAL];\n        if (attribs.hasOwnProperty("TANGENT")) tgeom.tangents = gltf.accBuffers[attribs.TANGENT];\n\n        if (attribs.hasOwnProperty("COLOR_0")) tgeom.vertexColors = this.calcVertexColors(gltf.accBuffers[attribs.COLOR_0]);\n        if (attribs.hasOwnProperty("COLOR_1")) tgeom.setAttribute("attrVertColor1", this.calcVertexColors(gltf.accBuffers[attribs.COLOR_1]), 4);\n        if (attribs.hasOwnProperty("COLOR_2")) tgeom.setAttribute("attrVertColor2", this.calcVertexColors(gltf.accBuffers[attribs.COLOR_2]), 4);\n        if (attribs.hasOwnProperty("COLOR_3")) tgeom.setAttribute("attrVertColor3", this.calcVertexColors(gltf.accBuffers[attribs.COLOR_3]), 4);\n        if (attribs.hasOwnProperty("COLOR_4")) tgeom.setAttribute("attrVertColor4", this.calcVertexColors(gltf.accBuffers[attribs.COLOR_4]), 4);\n\n        if (attribs.hasOwnProperty("TEXCOORD_0"))tgeom.texCoords = gltf.accBuffers[attribs.TEXCOORD_0];\n        if (attribs.hasOwnProperty("TEXCOORD_1"))tgeom.setAttribute("attrTexCoord1", gltf.accBuffers[attribs.TEXCOORD_1], 2);\n        if (attribs.hasOwnProperty("TEXCOORD_2"))tgeom.setAttribute("attrTexCoord2", gltf.accBuffers[attribs.TEXCOORD_2], 2);\n        if (attribs.hasOwnProperty("TEXCOORD_3"))tgeom.setAttribute("attrTexCoord3", gltf.accBuffers[attribs.TEXCOORD_3], 2);\n        if (attribs.hasOwnProperty("TEXCOORD_4"))tgeom.setAttribute("attrTexCoord4", gltf.accBuffers[attribs.TEXCOORD_4], 2);\n\n        if (attribs.hasOwnProperty("WEIGHTS_0"))\n        {\n            tgeom.setAttribute("attrWeights", gltf.accBuffers[attribs.WEIGHTS_0], 4);\n        }\n        if (attribs.hasOwnProperty("JOINTS_0"))\n        {\n            if (!gltf.accBuffers[attribs.JOINTS_0])console.log("no !gltf.accBuffers[attribs.JOINTS_0]");\n            tgeom.setAttribute("attrJoints", gltf.accBuffers[attribs.JOINTS_0], 4);\n        }\n\n        if (attribs.hasOwnProperty("POSITION")) gltf.accBuffersDelete.push(attribs.POSITION);\n        if (attribs.hasOwnProperty("NORMAL")) gltf.accBuffersDelete.push(attribs.NORMAL);\n        if (attribs.hasOwnProperty("TEXCOORD_0")) gltf.accBuffersDelete.push(attribs.TEXCOORD_0);\n        if (attribs.hasOwnProperty("TANGENT")) gltf.accBuffersDelete.push(attribs.TANGENT);\n        if (attribs.hasOwnProperty("COLOR_0"))gltf.accBuffersDelete.push(attribs.COLOR_0);\n        if (attribs.hasOwnProperty("COLOR_0"))gltf.accBuffersDelete.push(attribs.COLOR_0);\n        if (attribs.hasOwnProperty("COLOR_1"))gltf.accBuffersDelete.push(attribs.COLOR_1);\n        if (attribs.hasOwnProperty("COLOR_2"))gltf.accBuffersDelete.push(attribs.COLOR_2);\n        if (attribs.hasOwnProperty("COLOR_3"))gltf.accBuffersDelete.push(attribs.COLOR_3);\n\n        if (attribs.hasOwnProperty("TEXCOORD_1")) gltf.accBuffersDelete.push(attribs.TEXCOORD_1);\n        if (attribs.hasOwnProperty("TEXCOORD_2")) gltf.accBuffersDelete.push(attribs.TEXCOORD_2);\n        if (attribs.hasOwnProperty("TEXCOORD_3")) gltf.accBuffersDelete.push(attribs.TEXCOORD_3);\n        if (attribs.hasOwnProperty("TEXCOORD_4")) gltf.accBuffersDelete.push(attribs.TEXCOORD_4);\n\n        if (setGeom !== false) if (tgeom && tgeom.verticesIndices) this.setGeom(tgeom);\n    }\n\n    setGeom(geom)\n    {\n        if (inNormFormat.get() == "X-ZY")\n        {\n            for (let i = 0; i < geom.vertexNormals.length; i += 3)\n            {\n                let t = geom.vertexNormals[i + 2];\n                geom.vertexNormals[i + 2] = geom.vertexNormals[i + 1];\n                geom.vertexNormals[i + 1] = -t;\n            }\n        }\n\n        if (inVertFormat.get() == "XZ-Y")\n        {\n            for (let i = 0; i < geom.vertices.length; i += 3)\n            {\n                let t = geom.vertices[i + 2];\n                geom.vertices[i + 2] = -geom.vertices[i + 1];\n                geom.vertices[i + 1] = t;\n            }\n        }\n\n        if (this.primitive == this.TRIANGLES)\n        {\n            if (!geom.vertexNormals.length || inCalcNormals.get()) geom.calculateNormals();\n\n            if ((!geom.biTangents || geom.biTangents.length == 0) && geom.tangents)\n            {\n                const bitan = vec3.create();\n                const tan = vec3.create();\n\n                const tangents = geom.tangents;\n                geom.tangents = new Float32Array(tangents.length / 4 * 3);\n                geom.biTangents = new Float32Array(tangents.length / 4 * 3);\n\n                for (let i = 0; i < tangents.length; i += 4)\n                {\n                    const idx = i / 4 * 3;\n\n                    vec3.cross(\n                        bitan,\n                        [geom.vertexNormals[idx], geom.vertexNormals[idx + 1], geom.vertexNormals[idx + 2]],\n                        [tangents[i], tangents[i + 1], tangents[i + 2]]\n                    );\n\n                    vec3.div(bitan, bitan, [tangents[i + 3], tangents[i + 3], tangents[i + 3]]);\n                    vec3.normalize(bitan, bitan);\n\n                    geom.biTangents[idx + 0] = bitan[0];\n                    geom.biTangents[idx + 1] = bitan[1];\n                    geom.biTangents[idx + 2] = bitan[2];\n\n                    geom.tangents[idx + 0] = tangents[i + 0];\n                    geom.tangents[idx + 1] = tangents[i + 1];\n                    geom.tangents[idx + 2] = tangents[i + 2];\n                }\n            }\n\n            if (geom.tangents.length === 0 || inCalcNormals.get()) geom.calcTangentsBitangents();\n        }\n\n        this.geom = geom;\n\n        this.bounds = geom.getBounds();\n    }\n\n    render(cgl, ignoreMaterial, skinRenderer)\n    {\n        if (!this.mesh && this.geom && this.geom.verticesIndices)\n        {\n            let g = this.geom;\n            if (this.geom.vertices.length / 3 > 64000)\n            {\n                g = this.geom.copy();\n                g.unIndex(false, true);\n            }\n\n            let glprim;\n            if (this.primitive == this.TRIANGLES)glprim = cgl.gl.TRIANGLES;\n            else if (this.primitive == this.LINES)glprim = cgl.gl.LINES;\n            else if (this.primitive == this.LINE_STRIP)glprim = cgl.gl.LINE_STRIP;\n            else if (this.primitive == this.POINTS)glprim = cgl.gl.POINTS;\n            else\n            {\n                op.logWarn("unknown primitive type", this);\n            }\n\n            this.mesh = new CGL.Mesh(cgl, g, glprim);\n            this.mesh._geom = null;\n        }\n        else\n        {\n            // update morphTargets\n            if (this.geom && this.geom.morphTargets.length)\n            {\n                this.morphGeom = this.geom.copy();\n\n                this.test = time * 11.7;\n\n                if (this.test >= this.geom.morphTargets.length - 1) this.test = 0;\n\n                const mt = this.geom.morphTargets[Math.floor(this.test)];\n                const mt2 = this.geom.morphTargets[Math.floor(this.test + 1)];\n\n                if (mt && mt.vertices && mt2)\n                {\n                    if (this.morphGeom.vertexNormals.length != mt.vertexNormals.length)\n                        this.morphGeom.vertexNormals = new Float32Array(mt.vertexNormals.length);\n\n                    const fract = this.test % 1;\n                    for (let i = 0; i < this.morphGeom.vertices.length; i++)\n                    {\n                        this.morphGeom.vertices[i] =\n                            this.geom.vertices[i] +\n                            (1.0 - fract) * mt.vertices[i] +\n                            fract * mt2.vertices[i];\n\n                        this.morphGeom.vertexNormals[i] =\n                            (1.0 - fract) * mt.vertexNormals[i] +\n                            fract * mt2.vertexNormals[i];\n                    }\n\n                    this.mesh.updateNormals(this.morphGeom);\n                    this.mesh.updateVertices(this.morphGeom);\n                }\n            }\n\n            let useMat = !ignoreMaterial && this.material != -1 && gltf.shaders[this.material];\n            if (skinRenderer)useMat = false;\n\n            // console.log(gltf.shaders[this.material])\n\n            if (useMat) cgl.pushShader(gltf.shaders[this.material]);\n\n            const currentShader = cgl.getShader() || {};\n            const uniDiff = currentShader.uniformColorDiffuse;\n\n            const uniPbrMetalness = currentShader.uniformPbrMetalness;\n            const uniPbrRoughness = currentShader.uniformPbrRoughness;\n\n            if (!gltf.shaders[this.material] && inUseMatProps.get())\n            {\n                if (uniDiff && this._matDiffuseColor)\n                {\n                    this._matDiffuseColorOrig = [uniDiff.getValue()[0], uniDiff.getValue()[1], uniDiff.getValue()[2], uniDiff.getValue()[3]];\n                    uniDiff.setValue(this._matDiffuseColor);\n                }\n\n                if (uniPbrMetalness)\n                    if (this._matPbrMetalness != null)\n                    {\n                        this._matPbrMetalnessOrig = uniPbrMetalness.getValue();\n                        uniPbrMetalness.setValue(this._matPbrMetalness);\n                    }\n                    else\n                        uniPbrMetalness.setValue(0);\n\n                if (uniPbrRoughness)\n                    if (this._matPbrRoughness != null)\n                    {\n                        this._matPbrRoughnessOrig = uniPbrRoughness.getValue();\n                        uniPbrRoughness.setValue(this._matPbrRoughness);\n                    }\n                    else uniPbrRoughness.setValue(0);\n            }\n\n            if (this.mesh) this.mesh.render(cgl.getShader(), ignoreMaterial);\n\n            if (inUseMatProps.get())\n            {\n                if (uniDiff && this._matDiffuseColor) uniDiff.setValue(this._matDiffuseColorOrig);\n                if (uniPbrMetalness && this._matPbrMetalnessOrig != undefined) uniPbrMetalness.setValue(this._matPbrMetalnessOrig);\n                if (uniPbrRoughness && this._matPbrRoughnessOrig != undefined) uniPbrRoughness.setValue(this._matPbrRoughnessOrig);\n            }\n\n            if (useMat) cgl.popShader();\n        }\n    }\n};\n',inc_meshGroup_js:"const gltfMeshGroup = class\n{\n    constructor(gltf, m)\n    {\n        this.bounds = new CGL.BoundingBox();\n        this.meshes = [];\n        this.name = m.name;\n        const prims = m.primitives;\n\n        for (let i = 0; i < prims.length; i++)\n        {\n            const mesh = new gltfMesh(this.name, prims[i], gltf,\n                (mesh) =>\n                {\n                    this.bounds.apply(mesh.bounds);\n                });\n\n            mesh.submeshIndex = i;\n            this.meshes.push(mesh);\n        }\n    }\n\n    render(cgl, ignoreMat, skinRenderer, _time)\n    {\n        for (let i = 0; i < this.meshes.length; i++)\n        {\n            const useMat = gltf.shaders[this.meshes[i].material];\n\n            if (useMat) cgl.pushShader(gltf.shaders[this.meshes[i].material]);\n            // console.log(gltf.shaders[this.meshes[i].material],this.meshes[i].material)\n            if (skinRenderer)skinRenderer.renderStart(cgl, skinRenderer._time);\n\n            this.meshes[i].render(cgl, ignoreMat, skinRenderer, _time);\n            if (skinRenderer)skinRenderer.renderFinish(cgl);\n            if (useMat) cgl.popShader();\n        }\n    }\n};\n",inc_node_js:'const gltfNode = class\n{\n    constructor(node, gltf)\n    {\n        this.isChild = node.isChild || false;\n        this.name = node.name;\n        if (node.hasOwnProperty("camera")) this.camera = node.camera;\n        this.hidden = false;\n        this.mat = mat4.create();\n        this._animMat = mat4.create();\n        this._tempMat = mat4.create();\n        this._tempQuat = quat.create();\n        this._tempRotmat = mat4.create();\n        this.mesh = null;\n        this.children = [];\n        this._node = node;\n        this._gltf = gltf;\n        this.absMat = mat4.create();\n        this.addTranslate = null;\n        this.addMulMat = null;\n        this.updateMatrix();\n        this._animActions = {};\n    }\n\n    get skin()\n    {\n        if (this._node.hasOwnProperty("skin")) return this._node.skin;\n        else return -1;\n    }\n\n    hasSkin()\n    {\n        if (this._node.hasOwnProperty("skin")) return this._gltf.json.skins[this._node.skin].name || "unknown";\n        return false;\n    }\n\n    updateMatrix()\n    {\n        mat4.identity(this.mat);\n        if (this._node.translation) mat4.translate(this.mat, this.mat, this._node.translation);\n\n        if (this._node.rotation)\n        {\n            const rotmat = mat4.create();\n            this._rot = this._node.rotation;\n\n            mat4.fromQuat(rotmat, this._node.rotation);\n            mat4.mul(this.mat, this.mat, rotmat);\n        }\n\n        if (this._node.scale)\n        {\n            this._scale = this._node.scale;\n            mat4.scale(this.mat, this.mat, this._scale);\n        }\n\n        if (this._node.hasOwnProperty("mesh"))\n        {\n            this.mesh = this._gltf.meshes[this._node.mesh];\n        }\n\n        if (this._node.children)\n        {\n            for (let i = 0; i < this._node.children.length; i++)\n            {\n                this._gltf.json.nodes[i].isChild = true;\n                if (this._gltf.nodes[this._node.children[i]]) this._gltf.nodes[this._node.children[i]].isChild = true;\n                this.children.push(this._node.children[i]);\n            }\n        }\n    }\n\n    unHide()\n    {\n        this.hidden = false;\n        for (let i = 0; i < this.children.length; i++)\n            if (this.children[i].unHide) this.children[i].unHide();\n    }\n\n    calcBounds(gltf, mat, bounds)\n    {\n        const localMat = mat4.create();\n\n        if (mat) mat4.copy(localMat, mat);\n        if (this.mat) mat4.mul(localMat, localMat, this.mat);\n\n        if (this.mesh)\n        {\n            const bb = this.mesh.bounds.copy();\n            bb.mulMat4(localMat);\n            bounds.apply(bb);\n\n            if (bounds.changed)\n            {\n                boundingPoints.push(\n                    bb._min[0] || 0, bb._min[1] || 0, bb._min[2] || 0,\n                    bb._max[0] || 0, bb._max[1] || 0, bb._max[2] || 0);\n            }\n        }\n\n        for (let i = 0; i < this.children.length; i++)\n        {\n            if (gltf.nodes[this.children[i]] && gltf.nodes[this.children[i]].calcBounds)\n            {\n                const b = gltf.nodes[this.children[i]].calcBounds(gltf, localMat, bounds);\n\n                bounds.apply(b);\n            }\n        }\n\n        if (bounds.changed) return bounds;\n        else return null;\n    }\n\n    setAnimAction(name)\n    {\n        if (name && !this._animActions[name]) return;// console.log("no action found: ", name);\n\n        for (let path in this._animActions[name])\n        {\n            if (path == "translation") this._animTrans = this._animActions[name][path];\n            else if (path == "rotation") this._animRot = this._animActions[name][path];\n            else if (path == "scale") this._animScale = this._animActions[name][path];\n            else console.warn("unknown anim path", path, this._animActions[name][path]);\n        }\n    }\n\n    setAnim(path, name, anims)\n    {\n        this._animActions[name] = this._animActions[name] || {};\n\n        if (this._animActions[name][path])op.warn("animation action path already exists", name, path, this._animActions[name][path]);\n\n        this._animActions[name][path] = anims;\n\n        // console.log(name,path,this._animTrans);\n        // console.log(this._animActions);\n\n        if (path == "translation") this._animTrans = anims;\n        else if (path == "rotation") this._animRot = anims;\n        else if (path == "scale") this._animScale = anims;\n        else console.warn("unknown anim path", path, anims);\n    }\n\n    modelMatLocal()\n    {\n        return this._animMat || this.mat;\n    }\n\n    modelMatAbs()\n    {\n        return this.absMat;\n    }\n\n    transform(cgl, _time)\n    {\n        if (!_time && _time != 0)_time = time;\n\n        this._lastTimeTrans = _time;\n\n        if (!this._animTrans && !this._animRot && !this._animScale)\n        {\n            mat4.mul(cgl.mMatrix, cgl.mMatrix, this.mat);\n            this._animMat = null;\n        }\n        else\n        {\n            this._animMat = this._animMat || mat4.create();\n            mat4.identity(this._animMat);\n\n            const playAnims = true;\n\n            if (playAnims && this._animTrans)\n            {\n                mat4.translate(this._animMat, this._animMat, [\n                    this._animTrans[0].getValue(_time),\n                    this._animTrans[1].getValue(_time),\n                    this._animTrans[2].getValue(_time)]);\n            }\n            else\n            if (this._node.translation) mat4.translate(this._animMat, this._animMat, this._node.translation);\n\n            if (playAnims && this._animRot)\n            {\n                if (this._animRot[0].defaultEasing == CABLES.EASING_LINEAR) CABLES.TL.Anim.slerpQuaternion(_time, this._tempQuat, this._animRot[0], this._animRot[1], this._animRot[2], this._animRot[3]);\n                else if (this._animRot[0].defaultEasing == CABLES.EASING_ABSOLUTE)\n                {\n                    this._tempQuat[0] = this._animRot[0].getValue(_time);\n                    this._tempQuat[1] = this._animRot[1].getValue(_time);\n                    this._tempQuat[2] = this._animRot[2].getValue(_time);\n                    this._tempQuat[3] = this._animRot[3].getValue(_time);\n                }\n                else if (this._animRot[0].defaultEasing == CABLES.EASING_CUBICSPLINE)\n                {\n                    CABLES.TL.Anim.slerpQuaternion(_time, this._tempQuat, this._animRot[0], this._animRot[1], this._animRot[2], this._animRot[3]);\n                }\n\n                mat4.fromQuat(this._tempMat, this._tempQuat);\n                mat4.mul(this._animMat, this._animMat, this._tempMat);\n            }\n            else if (this._rot)\n            {\n                mat4.fromQuat(this._tempRotmat, this._rot);\n                mat4.mul(this._animMat, this._animMat, this._tempRotmat);\n            }\n\n            if (playAnims && this._animScale)\n            {\n                mat4.scale(this._animMat, this._animMat, [\n                    this._animScale[0].getValue(_time),\n                    this._animScale[1].getValue(_time),\n                    this._animScale[2].getValue(_time)]);\n            }\n            else if (this._scale) mat4.scale(this._animMat, this._animMat, this._scale);\n\n            mat4.mul(cgl.mMatrix, cgl.mMatrix, this._animMat);\n        }\n\n        if (this.addTranslate)mat4.translate(cgl.mMatrix, cgl.mMatrix, this.addTranslate);\n\n        if (this.addMulMat) mat4.mul(cgl.mMatrix, cgl.mMatrix, this.addMulMat);\n\n        mat4.copy(this.absMat, cgl.mMatrix);\n    }\n\n    render(cgl, dontTransform, dontDrawMesh, ignoreMaterial, ignoreChilds, drawHidden, _time)\n    {\n        if (!dontTransform) cgl.pushModelMatrix();\n\n        if (_time === undefined)_time = gltf.time;\n\n        if (!dontTransform || this.skinRenderer) this.transform(cgl, _time);\n\n        if (this.hidden && !drawHidden)\n        {\n        }\n        else\n        {\n            if (this.skinRenderer)\n            {\n                this.skinRenderer.time = _time;\n                if (!dontDrawMesh) this.mesh.render(cgl, ignoreMaterial, this.skinRenderer, _time);\n            }\n            else\n            {\n                if (this.mesh && !dontDrawMesh)\n                    this.mesh.render(cgl, ignoreMaterial, null, _time);\n            }\n        }\n\n        if (!ignoreChilds && !this.hidden)\n            for (let i = 0; i < this.children.length; i++)\n                if (gltf.nodes[this.children[i]])\n                {\n                    gltf.nodes[this.children[i]].render(cgl, dontTransform, dontDrawMesh, ignoreMaterial, ignoreChilds, drawHidden, _time);\n                }\n\n        if (!dontTransform)cgl.popModelMatrix();\n    }\n};\n',inc_print_js:'let tab = null;\n\nfunction closeTab()\n{\n    if (tab)gui.mainTabs.closeTab(tab.id);\n    tab = null;\n}\n\nfunction printNode(html, node, level)\n{\n    if (!gltf) return;\n\n    html += "<tr class=\\"row\\">";\n\n    let ident = "";\n    let identSpace = "";\n\n    for (let i = 1; i < level; i++)\n    {\n        identSpace += "&nbsp;&nbsp;&nbsp;";\n        let identClass = "identBg";\n        if (i == 1)identClass = "identBgLevel0";\n        ident += "<td class=\\"ident " + identClass + "\\" ><div style=\\"\\"></div></td>";\n    }\n    let id = CABLES.uuid();\n    html += ident;\n    html += "<td colspan=\\"" + (21 - level) + "\\">";\n    // html+=\'<div style="display:inline-block;border:0px solid red;height:10px;width:\'+level*10+\'px"></div>\';\n\n    if (node.mesh && node.mesh.meshes.length)html += "<span class=\\"icon icon-cube\\"></span>&nbsp;";\n    else html += "<span class=\\"icon icon-box-select\\"></span> &nbsp;";\n\n    html += node.name + "</td><td></td>";\n\n    if (node.mesh)\n    {\n        html += "<td>";\n        for (let i = 0; i < node.mesh.meshes.length; i++)\n        {\n            if (i > 0)html += ", ";\n            html += node.mesh.meshes[i].name;\n        }\n\n        html += "</td>";\n\n        html += "<td>";\n        html += node.hasSkin() || "-";\n        html += "</td>";\n\n        html += "<td>";\n        let countMats = 0;\n        for (let i = 0; i < node.mesh.meshes.length; i++)\n        {\n            if (countMats > 0)html += ", ";\n            if (node.mesh.meshes[i].material)\n            {\n                html += gltf.json.materials[node.mesh.meshes[i].material].name;\n                countMats++;\n            }\n        }\n        if (countMats == 0)html += "none";\n        html += "</td>";\n    }\n    else\n    {\n        html += "<td>-</td><td>-</td><td>-</td>";\n    }\n\n    html += "<td>";\n    if (node._animRot || node._animScale || node._animTrans)\n    {\n        if (node._animRot) html += "Rot ";\n        if (node._animScale) html += "Scale ";\n        if (node._animTrans) html += "Trans ";\n    }\n    else html += "None";\n    html += "</td>";\n\n    html += "<td>";\n    let hideclass = "";\n    if (node.hidden)hideclass = "node-hidden";\n\n    // html+=\'\';\n    html += "<a onclick=\\"gui.corePatch().getOpById(\'" + op.id + "\').exposeNode(\'" + node.name + "\',\'transform\')\\" class=\\"treebutton\\">Transform</a>";\n    html += " <a onclick=\\"gui.corePatch().getOpById(\'" + op.id + "\').exposeNode(\'" + node.name + "\',\'hierarchy\')\\" class=\\"treebutton\\">Hierarchy</a>";\n    html += " <a onclick=\\"gui.corePatch().getOpById(\'" + op.id + "\').exposeNode(\'" + node.name + "\')\\" class=\\"treebutton\\">Node</a>";\n\n    if (node.hasSkin())\n        html += " <a onclick=\\"gui.corePatch().getOpById(\'" + op.id + "\').exposeNode(\'" + node.name + "\',false,{skin:true});\\" class=\\"treebutton\\">Skin</a>";\n\n    html += "</td><td>";\n    html += "&nbsp;<span class=\\"icon iconhover icon-eye " + hideclass + "\\" onclick=\\"gui.corePatch().getOpById(\'" + op.id + "\').toggleNodeVisibility(\'" + node.name + "\');this.classList.toggle(\'node-hidden\');\\"></span>";\n    html += "</td>";\n\n    html += "</tr>";\n\n    if (node.children)\n    {\n        for (let i = 0; i < node.children.length; i++)\n            html = printNode(html, gltf.nodes[node.children[i]], level + 1);\n    }\n\n    return html;\n}\n\nfunction printMaterial(mat, idx)\n{\n    let html = "<tr>";\n    html += " <td>" + idx + "</td>";\n    html += " <td>" + mat.name + "</td>";\n    // html+=\' <td><a onclick="" class="treebutton">Assign</a><td>\';\n\n    html += " <td>";\n    if (mat.pbrMetallicRoughness && mat.pbrMetallicRoughness.baseColorFactor)\n    {\n        let rgb = "";\n        rgb += "" + Math.round(mat.pbrMetallicRoughness.baseColorFactor[0] * 255);\n        rgb += "," + Math.round(mat.pbrMetallicRoughness.baseColorFactor[1] * 255);\n        rgb += "," + Math.round(mat.pbrMetallicRoughness.baseColorFactor[2] * 255);\n\n        html += "<div style=\\"width:15px;height:15px;;background-color:rgb(" + rgb + ")\\">&nbsp;</a>";\n    }\n    html += " <td style=\\"\\">" + (gltf.shaders[idx] ? "-" : "<a onclick=\\"gui.corePatch().getOpById(\'" + op.id + "\').assignMaterial(\'" + mat.name + "\')\\" class=\\"treebutton\\">Assign</a>") + "<td>";\n    html += "<td>";\n\n    html += "</tr>";\n    return html;\n}\n\nfunction printInfo()\n{\n    if (!gltf) return;\n\n    const startTime = performance.now();\n    const sizes = {};\n    let html = "<div style=\\"overflow:scroll;width:100%;height:100%\\">";\n\n    html += "generator:" + gltf.json.asset.generator;\n\n    let numNodes = 0;\n    if (gltf.json.nodes)numNodes = gltf.json.nodes.length;\n    html += "<div id=\\"groupNodes\\">Nodes (" + numNodes + ")</div>";\n\n    html += "<table id=\\"sectionNodes\\" class=\\"table treetable\\">";\n\n    html += "<tr>";\n    html += " <th colspan=\\"21\\">Name</th>";\n    html += " <th>Mesh</th>";\n    html += " <th>Skin</th>";\n    html += " <th>Material</th>";\n    html += " <th>Anim</th>";\n    html += " <th>Expose</th>";\n    html += " <th></th>";\n    html += "</tr>";\n\n    for (let i = 0; i < gltf.nodes.length; i++)\n    {\n        if (!gltf.nodes[i].isChild)\n            html = printNode(html, gltf.nodes[i], 1);\n    }\n    html += "</table>";\n\n    /// //////////////////\n\n    let numMaterials = 0;\n    if (gltf.json.materials)numMaterials = gltf.json.materials.length;\n    html += "<div id=\\"groupMaterials\\">Materials (" + numMaterials + ")</div>";\n\n    if (!gltf.json.materials || gltf.json.materials.length == 0)\n    {\n    }\n    else\n    {\n        html += "<table id=\\"materialtable\\"  class=\\"table treetable\\">";\n        html += "<tr>";\n        html += " <th>Index</th>";\n        html += " <th>Name</th>";\n        html += " <th>Color</th>";\n        html += " <th>Function</th>";\n        html += " <th></th>";\n        html += "</tr>";\n        for (let i = 0; i < gltf.json.materials.length; i++)\n        {\n            html += printMaterial(gltf.json.materials[i], i);\n        }\n        html += "</table>";\n    }\n\n    /// ///////////////////////\n\n    html += "<div id=\\"groupMeshes\\">Meshes (" + gltf.json.meshes.length + ")</div>";\n\n    html += "<table id=\\"meshestable\\"  class=\\"table treetable\\">";\n    html += "<tr>";\n    html += " <th>Name</th>";\n    html += " <th>Node</th>";\n    html += " <th>Material</th>";\n    html += " <th>Vertices</th>";\n    html += " <th>Attributes</th>";\n    html += "</tr>";\n\n    let sizeBufferViews = [];\n    sizes.meshes = 0;\n\n    console.log(gltf);\n\n    for (let i = 0; i < gltf.json.meshes.length; i++)\n    {\n        html += "<tr>";\n        html += "<td>" + gltf.json.meshes[i].name + "</td>";\n\n        html += "<td>";\n        let count = 0;\n        let nodename = "";\n        for (var j = 0; j < gltf.json.nodes.length; j++)\n        {\n            if (gltf.json.nodes[j].mesh == i)\n            {\n                count++;\n                if (count == 1)\n                {\n                    nodename = gltf.json.nodes[j].name;\n                }\n            }\n        }\n        if (count > 1) html += (count) + " nodes (" + nodename + " ...)";\n        else html += nodename;\n        html += "</td>";\n\n        // -------\n\n        html += "<td>";\n        for (var j = 0; j < gltf.json.meshes[i].primitives.length; j++)\n        {\n            if (gltf.json.meshes[i].primitives[j].material)\n            {\n                html += gltf.json.materials[gltf.json.meshes[i].primitives[j].material].name + " ";\n            }\n            else html += "None";\n        }\n        html += "</td>";\n\n        html += "<td>";\n        let numVerts = 0;\n        for (var j = 0; j < gltf.json.meshes[i].primitives.length; j++)\n        {\n            if (gltf.json.meshes[i].primitives[j].attributes.POSITION != undefined)\n            {\n                let v = parseInt(gltf.json.accessors[gltf.json.meshes[i].primitives[j].attributes.POSITION].count);\n                numVerts += v;\n                html += "" + v + "<br/>";\n            }\n            else html += "-<br/>";\n        }\n\n        if (gltf.json.meshes[i].primitives.length > 0)\n            html += "=" + numVerts;\n        html += "</td>";\n\n        html += "<td style=\\"vertical-align:top;\\">";\n        for (let j = 0; j < gltf.json.meshes[i].primitives.length; j++)\n        {\n            html += Object.keys(gltf.json.meshes[i].primitives[j].attributes);\n            html += " <a onclick=\\"gui.corePatch().getOpById(\'" + op.id + "\').exposeGeom(\'" + gltf.json.meshes[i].name + "\'," + j + ")\\" class=\\"treebutton\\">Geometry</a>";\n            html += "<br/>";\n        }\n        html += "</td>";\n        html += "</tr>";\n\n        for (let j = 0; j < gltf.json.meshes[i].primitives.length; j++)\n        {\n            const accessor = gltf.json.accessors[gltf.json.meshes[i].primitives[j].indices];\n            if (accessor)\n            {\n                let bufView = accessor.bufferView;\n\n                if (sizeBufferViews.indexOf(bufView) == -1)\n                {\n                    sizeBufferViews.push(bufView);\n                    if (gltf.json.bufferViews[bufView])sizes.meshes += gltf.json.bufferViews[bufView].byteLength;\n                }\n            }\n\n            for (let k in gltf.json.meshes[i].primitives[j].attributes)\n            {\n                const attr = gltf.json.meshes[i].primitives[j].attributes[k];\n                const bufView2 = gltf.json.accessors[attr].bufferView;\n\n                if (sizeBufferViews.indexOf(bufView2) == -1)\n                {\n                    sizeBufferViews.push(bufView2);\n                    if (gltf.json.bufferViews[bufView2])sizes.meshes += gltf.json.bufferViews[bufView2].byteLength;\n                }\n            }\n        }\n    }\n    html += "</table>";\n\n    /// //////////////////////////////////\n\n    let numAnims = 0;\n    if (gltf.json.animations)numAnims = gltf.json.animations.length;\n    html += "<div id=\\"groupAnims\\">Animations (" + numAnims + ")</div>";\n\n    if (gltf.json.animations)\n    {\n        html += "<table id=\\"sectionAnim\\" class=\\"table treetable\\">";\n        html += "<tr>";\n        html += "  <th>Name</th>";\n        html += "  <th>Target node</th>";\n        html += "  <th>Path</th>";\n        html += "  <th>Interpolation</th>";\n        html += "  <th>Keys</th>";\n        html += "</tr>";\n\n        sizes.animations = 0;\n\n        for (let i = 0; i < gltf.json.animations.length; i++)\n        {\n            for (let j = 0; j < gltf.json.animations[i].samplers.length; j++)\n            {\n                let bufView = gltf.json.accessors[gltf.json.animations[i].samplers[j].input].bufferView;\n                if (sizeBufferViews.indexOf(bufView) == -1)\n                {\n                    sizeBufferViews.push(bufView);\n                    sizes.animations += gltf.json.bufferViews[bufView].byteLength;\n                }\n\n                bufView = gltf.json.accessors[gltf.json.animations[i].samplers[j].output].bufferView;\n                if (sizeBufferViews.indexOf(bufView) == -1)\n                {\n                    sizeBufferViews.push(bufView);\n                    sizes.animations += gltf.json.bufferViews[bufView].byteLength;\n                }\n            }\n\n            for (let j = 0; j < gltf.json.animations[i].channels.length; j++)\n            {\n                html += "<tr>";\n                html += "  <td> Anim " + i + ": " + gltf.json.animations[i].name + "</td>";\n\n                html += "  <td>" + gltf.nodes[gltf.json.animations[i].channels[j].target.node].name + "</td>";\n                html += "  <td>";\n                html += gltf.json.animations[i].channels[j].target.path + " ";\n                html += "  </td>";\n\n                const smplidx = gltf.json.animations[i].channels[j].sampler;\n                const smplr = gltf.json.animations[i].samplers[smplidx];\n\n                html += "  <td>" + smplr.interpolation + "</td>";\n\n                html += "  <td>" + gltf.json.accessors[smplr.output].count;\n\n                html += "&nbsp;&nbsp;<a onclick=\\"gui.corePatch().getOpById(\'" + op.id + "\').showAnim(\'" + i + "\',\'" + j + "\')\\" class=\\"icon icon-search\\"></a>";\n\n                html += "</td>";\n\n                html += "</tr>";\n            }\n        }\n        html += "</table>";\n    }\n    else\n    {\n\n    }\n\n    /// ///////////////////\n\n    let numImages = 0;\n    if (gltf.json.images)numImages = gltf.json.images.length;\n    html += "<div id=\\"groupImages\\">Images (" + numImages + ")</div>";\n\n    if (gltf.json.images)\n    {\n        html += "<table id=\\"sectionImages\\" class=\\"table treetable\\">";\n\n        html += "<tr>";\n        html += "  <th>name</th>";\n        html += "  <th>type</th>";\n        html += "  <th>func</th>";\n\n        html += "</tr>";\n\n        sizes.images = 0;\n\n        for (let i = 0; i < gltf.json.images.length; i++)\n        {\n            if (gltf.json.images[i].bufferView)\n                sizes.images += gltf.json.bufferViews[gltf.json.images[i].bufferView].byteLength;\n\n            html += "<tr>";\n            html += "<td>" + gltf.json.images[i].name + "</td>";\n            html += "<td>" + gltf.json.images[i].mimeType + "</td>";\n            html += "<td>";\n\n            let name = gltf.json.images[i].name;\n            if (name === undefined)name = gltf.json.images[i].bufferView;\n\n            html += "<a onclick=\\"gui.corePatch().getOpById(\'" + op.id + "\').exposeTexture(\'" + name + "\')\\" class=\\"treebutton\\">Expose</a>";\n            html += "</td>";\n\n            html += "<tr>";\n        }\n        html += "</table>";\n    }\n\n    /// ///////////////////////\n\n    let numCameras = 0;\n    if (gltf.json.cameras)numCameras = gltf.json.cameras.length;\n    html += "<div id=\\"groupCameras\\">Cameras (" + numCameras + ")</div>";\n\n    if (gltf.json.cameras)\n    {\n        html += "<table id=\\"sectionCameras\\" class=\\"table treetable\\">";\n\n        html += "<tr>";\n        html += "  <th>name</th>";\n        html += "  <th>type</th>";\n        html += "  <th>info</th>";\n        html += "</tr>";\n\n        for (let i = 0; i < gltf.json.cameras.length; i++)\n        {\n            html += "<tr>";\n            html += "<td>" + gltf.json.cameras[i].name + "</td>";\n            html += "<td>" + gltf.json.cameras[i].type + "</td>";\n            html += "<td>";\n            html += "yfov: " + Math.round(gltf.json.cameras[i].perspective.yfov * 100) / 100;\n            html += ", ";\n            html += "zfar: " + Math.round(gltf.json.cameras[i].perspective.zfar * 100) / 100;\n            html += ", ";\n            html += "znear: " + Math.round(gltf.json.cameras[i].perspective.znear * 100) / 100;\n            html += "</td>";\n\n            html += "<tr>";\n        }\n        html += "</table>";\n    }\n\n    /// ////////////////////////////////////\n\n    let numSkins = 0;\n    if (gltf.json.skins)numSkins = gltf.json.skins.length;\n    html += "<div id=\\"groupSkins\\">Skins (" + numSkins + ")</div>";\n\n    if (gltf.json.skins)\n    {\n        // html += "<h3>Skins (" + gltf.json.skins.length + ")</h3>";\n        html += "<table id=\\"sectionSkins\\" class=\\"table treetable\\">";\n\n        html += "<tr>";\n        html += "  <th>name</th>";\n        html += "  <th></th>";\n        html += "  <th>total joints</th>";\n        html += "</tr>";\n\n        for (let i = 0; i < gltf.json.skins.length; i++)\n        {\n            html += "<tr>";\n            html += "<td>" + gltf.json.skins[i].name + "</td>";\n            html += "<td>" + "</td>";\n            html += "<td>" + gltf.json.skins[i].joints.length + "</td>";\n            html += "<td>";\n            html += "</td>";\n            html += "<tr>";\n        }\n        html += "</table>";\n    }\n\n    /// //////////////////////////\n\n    let sizeBin = 0;\n    if (gltf.json.buffers)\n        sizeBin = gltf.json.buffers[0].byteLength;\n\n    html += "<div id=\\"groupBinary\\">File Size Allocation (" + Math.round(sizeBin / 1024) + "k )</div>";\n\n    html += "<table id=\\"sectionBinary\\" class=\\"table treetable\\">";\n    html += "<tr>";\n    html += "  <th>name</th>";\n    html += "  <th>size</th>";\n    html += "  <th>%</th>";\n    html += "</tr>";\n    let sizeUnknown = sizeBin;\n    for (let i in sizes)\n    {\n        // html+=i+\':\'+Math.round(sizes[i]/1024);\n        html += "<tr>";\n        html += "<td>" + i + "</td>";\n        html += "<td>" + readableSize(sizes[i]) + " </td>";\n        html += "<td>" + Math.round(sizes[i] / sizeBin * 100) + "% </td>";\n        html += "<tr>";\n        sizeUnknown -= sizes[i];\n    }\n\n    if (sizeUnknown != 0)\n    {\n        html += "<tr>";\n        html += "<td>unknown</td>";\n        html += "<td>" + readableSize(sizeUnknown) + " </td>";\n        html += "<td>" + Math.round(sizeUnknown / sizeBin * 100) + "% </td>";\n        html += "<tr>";\n    }\n\n    html += "</table>";\n    html += "</div>";\n\n    tab = new CABLES.UI.Tab("GLTF", { "icon": "cube", "infotext": "tab_gltf", "padding": true, "singleton": true });\n    gui.mainTabs.addTab(tab, true);\n\n    tab.addEventListener("onClose", closeTab);\n    tab.html(html);\n\n    CABLES.UI.Collapsable.setup(ele.byId("groupNodes"), ele.byId("sectionNodes"), false);\n    CABLES.UI.Collapsable.setup(ele.byId("groupMaterials"), ele.byId("materialtable"), true);\n    CABLES.UI.Collapsable.setup(ele.byId("groupAnims"), ele.byId("sectionAnim"), true);\n    CABLES.UI.Collapsable.setup(ele.byId("groupMeshes"), ele.byId("meshestable"), true);\n    CABLES.UI.Collapsable.setup(ele.byId("groupCameras"), ele.byId("sectionCameras"), true);\n    CABLES.UI.Collapsable.setup(ele.byId("groupImages"), ele.byId("sectionImages"), true);\n    CABLES.UI.Collapsable.setup(ele.byId("groupSkins"), ele.byId("sectionSkins"), true);\n    CABLES.UI.Collapsable.setup(ele.byId("groupBinary"), ele.byId("sectionBinary"), true);\n\n    gui.maintabPanel.show(true);\n}\n\nfunction readableSize(n)\n{\n    if (n > 1024) return Math.round(n / 1024) + " kb";\n    if (n > 1024 * 500) return Math.round(n / 1024) + " mb";\n    else return n + " bytes";\n}\n',inc_skin_js:'const GltfSkin = class\n{\n    constructor(node)\n    {\n        this._mod = null;\n        this._node = node;\n        this._lastTime = 0;\n        this._matArr = [];\n        this._m = mat4.create();\n        this._invBindMatrix = mat4.create();\n    }\n\n    renderFinish(cgl)\n    {\n        cgl.popModelMatrix();\n        this._mod.unbind();\n    }\n\n    renderStart(cgl, time)\n    {\n        if (!this._mod)\n        {\n            this._mod = new CGL.ShaderModifier(cgl, op.name + this._node.name);\n\n            this._mod.addModule({\n                "priority": -2,\n                "name": "MODULE_VERTEX_POSITION",\n                "srcHeadVert": attachments.skin_head_vert || "",\n                "srcBodyVert": attachments.skin_vert || ""\n            });\n\n            this._mod.addUniformVert("m4[]", "MOD_boneMats", []);// bohnenmatze\n            const tr = vec3.create();\n        }\n\n        const skinIdx = this._node.skin;\n        const arrLength = gltf.json.skins[skinIdx].joints.length * 16;\n\n        // if(this._lastTime!=inTime.get())\n        {\n            // this._lastTime=inTime.get();\n            if (this._matArr.length != arrLength) this._matArr.length = arrLength;\n\n            for (let i = 0; i < gltf.json.skins[skinIdx].joints.length; i++)\n            {\n                const i16 = i * 16;\n                const jointIdx = gltf.json.skins[skinIdx].joints[i];\n                const nodeJoint = gltf.nodes[jointIdx];\n\n                for (let j = 0; j < 16; j++)\n                    this._invBindMatrix[j] = gltf.accBuffers[gltf.json.skins[skinIdx].inverseBindMatrices][i16 + j];\n\n                mat4.mul(this._m, nodeJoint.modelMatAbs(), this._invBindMatrix);\n\n                for (let j = 0; j < this._m.length; j++) this._matArr[i16 + j] = this._m[j];\n            }\n\n            this._mod.setUniformValue("MOD_boneMats", this._matArr);\n            // this._lastTime = time;\n        }\n        // else\n        // {\n        //     // console.log("skip")\n        // }\n\n        this._mod.define("SKIN_NUM_BONES", gltf.json.skins[skinIdx].joints.length);\n\n        this._mod.bind();\n\n        // draw mesh...\n        cgl.pushModelMatrix();\n        mat4.identity(cgl.mMatrix);\n    }\n};\n',skin_vert:"int index=int(attrJoints.x);\nvec4 newPos = (MOD_boneMats[index] * pos) * attrWeights.x;\nvec3 newNorm = (vec4((MOD_boneMats[index] * vec4(norm.xyz, 0.0)) * attrWeights.x).xyz);\n\nindex=int(attrJoints.y);\nnewPos += (MOD_boneMats[index] * pos) * attrWeights.y;\nnewNorm = (vec4((MOD_boneMats[index] * vec4(norm.xyz, 0.0)) * attrWeights.y).xyz)+newNorm;\n\nindex=int(attrJoints.z);\nnewPos += (MOD_boneMats[index] * pos) * attrWeights.z;\nnewNorm = (vec4((MOD_boneMats[index] * vec4(norm.xyz, 0.0)) * attrWeights.z).xyz)+newNorm;\n\nindex=int(attrJoints.w);\nnewPos += (MOD_boneMats[index] * pos) * attrWeights.w ;\nnewNorm = (vec4((MOD_boneMats[index] * vec4(norm.xyz, 0.0)) * attrWeights.w).xyz)+newNorm;\n\npos=newPos;\n\nnorm=normalize(newNorm.xyz);\n\n\n",skin_head_vert:"\nIN vec4 attrWeights;\nIN vec4 attrJoints;\nUNI mat4 MOD_boneMats[SKIN_NUM_BONES];\n"};const a=class{constructor(e,t){this.node=t;this.name=t.name;this.config=e.json.cameras[t.camera];this.pos=vec3.create();this.quat=quat.create();this.quatOr=quat.create();this.vCenter=vec3.create();this.vUp=vec3.create();this.vMat=mat4.create()}updateAnim(e){if(this.node&&this.node._animTrans){vec3.set(this.pos,this.node._animTrans[0].getValue(e),this.node._animTrans[1].getValue(e),this.node._animTrans[2].getValue(e));quat.set(this.quat,this.node._animRot[0].getValue(e),this.node._animRot[1].getValue(e),this.node._animRot[2].getValue(e),this.node._animRot[3].getValue(e))}}start(e){if(ne.frameStore.shadowPass)return;this.updateAnim(e);const t=ne.getViewPort()[2]/ne.getViewPort()[3];ne.pushPMatrix();ne.pushViewMatrix();let n=mat4.create();mat4.invert(n,this.node.modelMatAbs());this.vMat=n;mat4.identity(ne.vMatrix);mat4.mul(ne.vMatrix,ne.vMatrix,n)}end(){if(ne.frameStore.shadowPass)return;ne.popPMatrix();ne.popViewMatrix()}};const O=8;const I=class{constructor(){this.json={};this.accBuffers=[];this.meshes=[];this.nodes=[];this.shaders=[];this.timing=[];this.cams=[];this.startTime=performance.now();this.bounds=new CGL.BoundingBox;this.loaded=Date.now();this.accBuffersDelete=[]}getNode(t){for(let e=0;e<this.nodes.length;e++){if(this.nodes[e].name==t)return this.nodes[e]}}unHideAll(){for(let e=0;e<this.nodes.length;e++){this.nodes[e].unHide()}}};function T(e){if(window.TextDecoder)return new TextDecoder("utf-8").decode(e);let t,n,a,r;let o,i;t="";a=e.length;n=0;while(n<a){r=e[n++];switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++];t+=String.fromCharCode((r&31)<<6|o&63);break;case 14:o=e[n++];i=e[n++];t+=String.fromCharCode((r&15)<<12|(o&63)<<6|(i&63)<<0);break}}return t}function y(e,t,n,a){const r={};if(a>=e.byteLength){x.log("could not read chunk...");return}r.size=e.getUint32(a+0,te);r.type=T(t.subarray(a+4,a+4+4));if(r.type=="BIN\0"){r.dataView=new DataView(n,a+8,r.size)}else if(r.type=="JSON"){const o=T(t.subarray(a+8,a+8+r.size));try{const i=JSON.parse(o);r.data=i;X.set(i.asset.generator)}catch(e){}}else{x.warn("unknown type",r.type)}return r}function S(t){const a={};for(let e=0;e<t.json.animations.length;e++){const r=t.json.animations[e];for(let e=0;e<r.channels.length;e++){const o=r.channels[e];const i=t.nodes[o.target.node];const s=r.samplers[o.sampler];const n=t.json.accessors[s.input];const l=t.accBuffers[s.input];const u=t.json.accessors[s.output];const c=t.accBuffers[s.output];t.accBuffersDelete.push(s.output,s.input);if(l&&c){let n=1;if(u.type=="VEC2")n=2;else if(u.type=="VEC3")n=3;else if(u.type=="VEC4")n=4;else x.warn("unknown accOut.type",u.type);const m=[];a[r.name]=true;for(let e=0;e<n;e++){const _=new CABLES.TL.Anim;m.push(_)}if(s.interpolation=="LINEAR"){}else if(s.interpolation=="STEP")for(let e=0;e<n;e++)m[e].defaultEasing=CABLES.EASING_ABSOLUTE;else if(s.interpolation=="CUBICSPLINE")for(let e=0;e<n;e++)m[e].defaultEasing=CABLES.EASING_CUBICSPLINE;else x.warn("unknown interpolation",s.interpolation);if(l[0]!==0)for(let e=0;e<n;e++)m[e].setValue(0,c[0*n+e]);for(let t=0;t<l.length;t++){se=Math.max(l[t],se);for(let e=0;e<n;e++){if(m[e].defaultEasing===CABLES.EASING_CUBICSPLINE){const d=t*n*3+e;const p=m[e].setValue(l[t],c[d+n]);p.bezTangIn=c[d];p.bezTangOut=c[d+n*2]}else{m[e].setValue(l[t],c[t*n+e])}}}i.setAnim(o.target.path,r.name,m)}else{x.warn("loadAmins bufferIn undefined ",l===undefined);x.warn("loadAmins bufferOut undefined ",c===undefined);x.warn("loadAmins ",s,u);x.warn("loadAmins num accBuffers",t.accBuffers.length);x.warn("loadAmins num accessors",t.json.accessors.length)}}}Z.set(null);Z.set(Object.keys(a))}function A(n){if(!n||!n.json.cameras)return;n.cameras=n.cameras||[];for(let t=0;t<n.nodes.length;t++){if(n.nodes[t].hasOwnProperty("camera")){const e=new a(n,n.nodes[t]);n.cameras.push(e)}}}function M(){if(!window.DracoDecoder){setTimeout(()=>{M()},100)}Ie()}function r(e){let r=0,t=0;const o=new I;o.timing.push("Start parsing",Math.round(performance.now()-o.startTime));if(!e)return;const n=new Uint8Array(e);let a=0;const i=T(n.subarray(a,4));a+=4;if(i!="glTF")return;o.timing.push("dataview",Math.round(performance.now()-o.startTime));const s=new DataView(e);const l=s.getUint32(a,te);a+=4;const u=s.getUint32(a,te);a+=4;Y.set(l);const c=[];o.chunks=c;c.push(y(s,n,e,a));a+=c[0].size+O;o.json=c[0].data;K.set(o.json);H.set(o.json.extensionsUsed||[]);let m=y(s,n,e,a);while(m){c.push(m);a+=m.size+O;m=y(s,n,e,a)}o.chunks=c;const _=c[0].data.bufferViews;const d=c[0].data.accessors;o.timing.push("Parse buffers",Math.round(performance.now()-o.startTime));if(o.json.extensionsUsed&&o.json.extensionsUsed.indexOf("KHR_draco_mesh_compression")>-1){if(!window.DracoDecoder){x.setUiError("gltfdraco","GLTF draco compression lib not found / add draco op to your patch!");M();return o}else{o.useDraco=true}}x.setUiError("gltfdraco",null);if(_){for(t=0;t<d.length;t++){const p=d[t];const v=_[p.bufferView];let a=0;if(p.type=="SCALAR")a=1;else if(p.type=="VEC2")a=2;else if(p.type=="VEC3")a=3;else if(p.type=="VEC4")a=4;else if(p.type=="MAT4")a=16;else console.error("unknown accessor type",p.type);if(c[1].dataView){if(v){const f=p.count*a;let e=(v.byteOffset||0)+(p.byteOffset||0);let t=v.byteStride||0;let n=null;if(p.componentType==5126||p.componentType==5125){t=t||4;const g=p.componentType==5125;if(g)n=new Uint32Array(f);else n=new Float32Array(f);for(r=0;r<f;r++){if(g)n[r]=c[1].dataView.getUint32(e,te);else n[r]=c[1].dataView.getFloat32(e,te);if(t!=4&&(r+1)%a===0)e+=t-a*4;e+=4}}else if(p.componentType==5123){t=t||2;n=new Uint16Array(f);for(r=0;r<f;r++){n[r]=c[1].dataView.getUint16(e,te);if(t!=2&&(r+1)%a===0)e+=t-a*2;e+=2}}else if(p.componentType==5121){t=t||1;n=new Uint8Array(f);for(r=0;r<f;r++){n[r]=c[1].dataView.getUint8(e,te);if(t!=1&&(r+1)%a===0)e+=t-a*1;e+=1}}else{console.error("unknown component type",p.componentType)}o.accBuffers.push(n)}else{}}}}o.timing.push("Parse mesh groups",Math.round(performance.now()-o.startTime));o.json.meshes=o.json.meshes||[];if(o.json.meshes){for(t=0;t<o.json.meshes.length;t++){const h=new C(o,o.json.meshes[t]);o.meshes.push(h)}}o.timing.push("Parse nodes",Math.round(performance.now()-o.startTime));for(t=0;t<o.json.nodes.length;t++){if(o.json.nodes[t].children)for(r=0;r<o.json.nodes[t].children.length;r++){o.json.nodes[o.json.nodes[t].children[r]].isChild=true}}for(t=0;t<o.json.nodes.length;t++){const b=new E(o.json.nodes[t],o);o.nodes.push(b)}for(t=0;t<o.nodes.length;t++){const b=o.nodes[t];if(!b.children)continue;for(let e=0;e<b.children.length;e++){o.nodes[b.children[e]].parent=b}}for(t=0;t<o.nodes.length;t++){if(o.nodes[t].skin>-1){o.nodes[t].skinRenderer=new R(o.nodes[t])}}ue=true;o.timing.push("load anims",Math.round(performance.now()-o.startTime));if(o.json.animations)S(o);o.timing.push("load cameras",Math.round(performance.now()-o.startTime));if(o.json.cameras)A(o);o.timing.push("finished",Math.round(performance.now()-o.startTime));return o}let o=class{constructor(e,n,o,i){this.POINTS=0;this.LINES=1;this.LINE_LOOP=2;this.LINE_STRIP=3;this.TRIANGLES=4;this.TRIANGLE_STRIP=5;this.TRIANGLE_FAN=6;this.test=0;this.name=e;this.submeshIndex=0;this.material=n.material;this.mesh=null;this.geom=new CGL.Geometry("gltf_"+this.name);this.geom.verticesIndices=[];this.bounds=null;this.primitive=4;if(n.hasOwnProperty("mode"))this.primitive=n.mode;if(n.hasOwnProperty("indices"))this.geom.verticesIndices=o.accBuffers[n.indices];o.loadingMeshes=o.loadingMeshes||0;o.loadingMeshes++;this.materialJson=this._matPbrMetalness=this._matPbrRoughness=this._matDiffuseColor=null;if(o.json.materials){if(this.material!=-1)this.materialJson=o.json.materials[this.material];if(this.materialJson&&this.materialJson.pbrMetallicRoughness){if(this.materialJson.pbrMetallicRoughness.baseColorFactor)this._matDiffuseColor=this.materialJson.pbrMetallicRoughness.baseColorFactor;this._matDiffuseColor=this.materialJson.pbrMetallicRoughness.baseColorFactor;this._matPbrMetalness=this.materialJson.pbrMetallicRoughness.metallicFactor||null;this._matPbrRoughness=this.materialJson.pbrMetallicRoughness.roughnessFactor||null}}if(o.useDraco&&n.extensions.KHR_draco_mesh_compression){const a=o.chunks[0].data.bufferViews[n.extensions.KHR_draco_mesh_compression.bufferView];const r=a.byteLength;const s=new Int8Array(r);let t=a.byteOffset||0;for(let e=0;e<r;e++){s[e]=o.chunks[1].dataView.getInt8(t,te);t++}const l=window.DracoDecoder;l.decodeGeometry(s.buffer,t=>{const n=new CGL.Geometry("draco mesh "+e);for(let e=0;e<t.attributes.length;e++){const a=t.attributes[e];if(a.name==="position")n.vertices=a.array;else if(a.name==="normal")n.vertexNormals=a.array;else if(a.name==="uv")n.texCoords=a.array;else if(a.name==="color")n.vertexColors=this.calcVertexColors(a.array);else if(a.name==="joints")n.setAttribute("attrJoints",Array.from(a.array),4);else if(a.name==="weights"){const r=new Float32Array(a.array.length/a.itemSize*4);for(let t=0;t<a.array.length/a.itemSize;t++){r[t*4]=r[t*4+1]=r[t*4+2]=r[t*4+3]=0;for(let e=0;e<a.itemSize;e++)r[t*4+e]=a.array[t*a.itemSize+e]}n.setAttribute("attrWeights",r,4)}else x.logWarn("unknown draco attrib",a)}t.attributes=null;n.verticesIndices=t.index.array;this.setGeom(n);this.mesh=null;o.loadingMeshes--;if(i)i(this)},e=>{x.logError(e)})}else{o.loadingMeshes--;this.fillGeomAttribs(o,this.geom,n.attributes);if(n.targets){console.log("prim.targets",n.targets.length);for(let e=0;e<n.targets.length;e++){let t=this.geom.copy();if(n.hasOwnProperty("indices"))t.verticesIndices=o.accBuffers[n.indices];this.fillGeomAttribs(o,t,n.targets[e],false);{for(let e=0;e<t.vertices.length;e++)t.vertices[e]+=this.geom.vertices[e];t.calculateNormals();for(let e=0;e<t.vertices.length;e++)t.vertices[e]-=this.geom.vertices[e]}this.geom.morphTargets.push(t)}}if(i)i(this)}}_linearToSrgb(e){if(e<=0)return 0;else if(e>=1)return 1;else if(e<.0031308)return e*12.92;else return Math.pow(e,1/2.2)*1.055-.055}calcVertexColors(n){let a=null;if(n instanceof Float32Array){let t=false;for(let e=0;e<n.length;e++){if(n[e]>1){t=true;continue}}if(t)for(let e=0;e<n.length;e++)n[e]/=65535;a=n}else if(n instanceof Uint16Array){const t=new Float32Array(n.length);for(let e=0;e<n.length;e++)t[e]=n[e]/65535;a=t}else a=n;for(let e=0;e<a.length;e++){a[e]=this._linearToSrgb(a[e])}return a}fillGeomAttribs(e,t,n,a){if(n.hasOwnProperty("POSITION"))t.vertices=e.accBuffers[n.POSITION];if(n.hasOwnProperty("NORMAL"))t.vertexNormals=e.accBuffers[n.NORMAL];if(n.hasOwnProperty("TANGENT"))t.tangents=e.accBuffers[n.TANGENT];if(n.hasOwnProperty("COLOR_0"))t.vertexColors=this.calcVertexColors(e.accBuffers[n.COLOR_0]);if(n.hasOwnProperty("COLOR_1"))t.setAttribute("attrVertColor1",this.calcVertexColors(e.accBuffers[n.COLOR_1]),4);if(n.hasOwnProperty("COLOR_2"))t.setAttribute("attrVertColor2",this.calcVertexColors(e.accBuffers[n.COLOR_2]),4);if(n.hasOwnProperty("COLOR_3"))t.setAttribute("attrVertColor3",this.calcVertexColors(e.accBuffers[n.COLOR_3]),4);if(n.hasOwnProperty("COLOR_4"))t.setAttribute("attrVertColor4",this.calcVertexColors(e.accBuffers[n.COLOR_4]),4);if(n.hasOwnProperty("TEXCOORD_0"))t.texCoords=e.accBuffers[n.TEXCOORD_0];if(n.hasOwnProperty("TEXCOORD_1"))t.setAttribute("attrTexCoord1",e.accBuffers[n.TEXCOORD_1],2);if(n.hasOwnProperty("TEXCOORD_2"))t.setAttribute("attrTexCoord2",e.accBuffers[n.TEXCOORD_2],2);if(n.hasOwnProperty("TEXCOORD_3"))t.setAttribute("attrTexCoord3",e.accBuffers[n.TEXCOORD_3],2);if(n.hasOwnProperty("TEXCOORD_4"))t.setAttribute("attrTexCoord4",e.accBuffers[n.TEXCOORD_4],2);if(n.hasOwnProperty("WEIGHTS_0")){t.setAttribute("attrWeights",e.accBuffers[n.WEIGHTS_0],4)}if(n.hasOwnProperty("JOINTS_0")){if(!e.accBuffers[n.JOINTS_0])console.log("no !gltf.accBuffers[attribs.JOINTS_0]");t.setAttribute("attrJoints",e.accBuffers[n.JOINTS_0],4)}if(n.hasOwnProperty("POSITION"))e.accBuffersDelete.push(n.POSITION);if(n.hasOwnProperty("NORMAL"))e.accBuffersDelete.push(n.NORMAL);if(n.hasOwnProperty("TEXCOORD_0"))e.accBuffersDelete.push(n.TEXCOORD_0);if(n.hasOwnProperty("TANGENT"))e.accBuffersDelete.push(n.TANGENT);if(n.hasOwnProperty("COLOR_0"))e.accBuffersDelete.push(n.COLOR_0);if(n.hasOwnProperty("COLOR_0"))e.accBuffersDelete.push(n.COLOR_0);if(n.hasOwnProperty("COLOR_1"))e.accBuffersDelete.push(n.COLOR_1);if(n.hasOwnProperty("COLOR_2"))e.accBuffersDelete.push(n.COLOR_2);if(n.hasOwnProperty("COLOR_3"))e.accBuffersDelete.push(n.COLOR_3);if(n.hasOwnProperty("TEXCOORD_1"))e.accBuffersDelete.push(n.TEXCOORD_1);if(n.hasOwnProperty("TEXCOORD_2"))e.accBuffersDelete.push(n.TEXCOORD_2);if(n.hasOwnProperty("TEXCOORD_3"))e.accBuffersDelete.push(n.TEXCOORD_3);if(n.hasOwnProperty("TEXCOORD_4"))e.accBuffersDelete.push(n.TEXCOORD_4);if(a!==false)if(t&&t.verticesIndices)this.setGeom(t)}setGeom(n){if(w.get()=="X-ZY"){for(let t=0;t<n.vertexNormals.length;t+=3){let e=n.vertexNormals[t+2];n.vertexNormals[t+2]=n.vertexNormals[t+1];n.vertexNormals[t+1]=-e}}if(L.get()=="XZ-Y"){for(let t=0;t<n.vertices.length;t+=3){let e=n.vertices[t+2];n.vertices[t+2]=-n.vertices[t+1];n.vertices[t+1]=e}}if(this.primitive==this.TRIANGLES){if(!n.vertexNormals.length||G.get())n.calculateNormals();if((!n.biTangents||n.biTangents.length==0)&&n.tangents){const t=vec3.create();const e=vec3.create();const a=n.tangents;n.tangents=new Float32Array(a.length/4*3);n.biTangents=new Float32Array(a.length/4*3);for(let e=0;e<a.length;e+=4){const r=e/4*3;vec3.cross(t,[n.vertexNormals[r],n.vertexNormals[r+1],n.vertexNormals[r+2]],[a[e],a[e+1],a[e+2]]);vec3.div(t,t,[a[e+3],a[e+3],a[e+3]]);vec3.normalize(t,t);n.biTangents[r+0]=t[0];n.biTangents[r+1]=t[1];n.biTangents[r+2]=t[2];n.tangents[r+0]=a[e+0];n.tangents[r+1]=a[e+1];n.tangents[r+2]=a[e+2]}}if(n.tangents.length===0||G.get())n.calcTangentsBitangents()}this.geom=n;this.bounds=n.getBounds()}render(n,t,a){if(!this.mesh&&this.geom&&this.geom.verticesIndices){let e=this.geom;if(this.geom.vertices.length/3>64e3){e=this.geom.copy();e.unIndex(false,true)}let t;if(this.primitive==this.TRIANGLES)t=n.gl.TRIANGLES;else if(this.primitive==this.LINES)t=n.gl.LINES;else if(this.primitive==this.LINE_STRIP)t=n.gl.LINE_STRIP;else if(this.primitive==this.POINTS)t=n.gl.POINTS;else{x.logWarn("unknown primitive type",this)}this.mesh=new CGL.Mesh(n,e,t);this.mesh._geom=null}else{if(this.geom&&this.geom.morphTargets.length){this.morphGeom=this.geom.copy();this.test=le*11.7;if(this.test>=this.geom.morphTargets.length-1)this.test=0;const l=this.geom.morphTargets[Math.floor(this.test)];const u=this.geom.morphTargets[Math.floor(this.test+1)];if(l&&l.vertices&&u){if(this.morphGeom.vertexNormals.length!=l.vertexNormals.length)this.morphGeom.vertexNormals=new Float32Array(l.vertexNormals.length);const c=this.test%1;for(let e=0;e<this.morphGeom.vertices.length;e++){this.morphGeom.vertices[e]=this.geom.vertices[e]+(1-c)*l.vertices[e]+c*u.vertices[e];this.morphGeom.vertexNormals[e]=(1-c)*l.vertexNormals[e]+c*u.vertexNormals[e]}this.mesh.updateNormals(this.morphGeom);this.mesh.updateVertices(this.morphGeom)}}let e=!t&&this.material!=-1&&ie.shaders[this.material];if(a)e=false;if(e)n.pushShader(ie.shaders[this.material]);const r=n.getShader()||{};const o=r.uniformColorDiffuse;const i=r.uniformPbrMetalness;const s=r.uniformPbrRoughness;if(!ie.shaders[this.material]&&V.get()){if(o&&this._matDiffuseColor){this._matDiffuseColorOrig=[o.getValue()[0],o.getValue()[1],o.getValue()[2],o.getValue()[3]];o.setValue(this._matDiffuseColor)}if(i)if(this._matPbrMetalness!=null){this._matPbrMetalnessOrig=i.getValue();i.setValue(this._matPbrMetalness)}else i.setValue(0);if(s)if(this._matPbrRoughness!=null){this._matPbrRoughnessOrig=s.getValue();s.setValue(this._matPbrRoughness)}else s.setValue(0)}if(this.mesh)this.mesh.render(n.getShader(),t);if(V.get()){if(o&&this._matDiffuseColor)o.setValue(this._matDiffuseColorOrig);if(i&&this._matPbrMetalnessOrig!=undefined)i.setValue(this._matPbrMetalnessOrig);if(s&&this._matPbrRoughnessOrig!=undefined)s.setValue(this._matPbrRoughnessOrig)}if(e)n.popShader()}}};const C=class{constructor(t,e){this.bounds=new CGL.BoundingBox;this.meshes=[];this.name=e.name;const n=e.primitives;for(let e=0;e<n.length;e++){const a=new o(this.name,n[e],t,e=>{this.bounds.apply(e.bounds)});a.submeshIndex=e;this.meshes.push(a)}}render(t,n,a,r){for(let e=0;e<this.meshes.length;e++){const o=ie.shaders[this.meshes[e].material];if(o)t.pushShader(ie.shaders[this.meshes[e].material]);if(a)a.renderStart(t,a._time);this.meshes[e].render(t,n,a,r);if(a)a.renderFinish(t);if(o)t.popShader()}}};const E=class{constructor(e,t){this.isChild=e.isChild||false;this.name=e.name;if(e.hasOwnProperty("camera"))this.camera=e.camera;this.hidden=false;this.mat=mat4.create();this._animMat=mat4.create();this._tempMat=mat4.create();this._tempQuat=quat.create();this._tempRotmat=mat4.create();this.mesh=null;this.children=[];this._node=e;this._gltf=t;this.absMat=mat4.create();this.addTranslate=null;this.addMulMat=null;this.updateMatrix();this._animActions={}}get skin(){if(this._node.hasOwnProperty("skin"))return this._node.skin;else return-1}hasSkin(){if(this._node.hasOwnProperty("skin"))return this._gltf.json.skins[this._node.skin].name||"unknown";return false}updateMatrix(){mat4.identity(this.mat);if(this._node.translation)mat4.translate(this.mat,this.mat,this._node.translation);if(this._node.rotation){const e=mat4.create();this._rot=this._node.rotation;mat4.fromQuat(e,this._node.rotation);mat4.mul(this.mat,this.mat,e)}if(this._node.scale){this._scale=this._node.scale;mat4.scale(this.mat,this.mat,this._scale)}if(this._node.hasOwnProperty("mesh")){this.mesh=this._gltf.meshes[this._node.mesh]}if(this._node.children){for(let e=0;e<this._node.children.length;e++){this._gltf.json.nodes[e].isChild=true;if(this._gltf.nodes[this._node.children[e]])this._gltf.nodes[this._node.children[e]].isChild=true;this.children.push(this._node.children[e])}}}unHide(){this.hidden=false;for(let e=0;e<this.children.length;e++)if(this.children[e].unHide)this.children[e].unHide()}calcBounds(t,e,n){const a=mat4.create();if(e)mat4.copy(a,e);if(this.mat)mat4.mul(a,a,this.mat);if(this.mesh){const r=this.mesh.bounds.copy();r.mulMat4(a);n.apply(r);if(n.changed){oe.push(r._min[0]||0,r._min[1]||0,r._min[2]||0,r._max[0]||0,r._max[1]||0,r._max[2]||0)}}for(let e=0;e<this.children.length;e++){if(t.nodes[this.children[e]]&&t.nodes[this.children[e]].calcBounds){const o=t.nodes[this.children[e]].calcBounds(t,a,n);n.apply(o)}}if(n.changed)return n;else return null}setAnimAction(t){if(t&&!this._animActions[t])return;for(let e in this._animActions[t]){if(e=="translation")this._animTrans=this._animActions[t][e];else if(e=="rotation")this._animRot=this._animActions[t][e];else if(e=="scale")this._animScale=this._animActions[t][e];else console.warn("unknown anim path",e,this._animActions[t][e])}}setAnim(e,t,n){this._animActions[t]=this._animActions[t]||{};if(this._animActions[t][e])x.warn("animation action path already exists",t,e,this._animActions[t][e]);this._animActions[t][e]=n;if(e=="translation")this._animTrans=n;else if(e=="rotation")this._animRot=n;else if(e=="scale")this._animScale=n;else console.warn("unknown anim path",e,n)}modelMatLocal(){return this._animMat||this.mat}modelMatAbs(){return this.absMat}transform(e,t){if(!t&&t!=0)t=le;this._lastTimeTrans=t;if(!this._animTrans&&!this._animRot&&!this._animScale){mat4.mul(e.mMatrix,e.mMatrix,this.mat);this._animMat=null}else{this._animMat=this._animMat||mat4.create();mat4.identity(this._animMat);const n=true;if(n&&this._animTrans){mat4.translate(this._animMat,this._animMat,[this._animTrans[0].getValue(t),this._animTrans[1].getValue(t),this._animTrans[2].getValue(t)])}else if(this._node.translation)mat4.translate(this._animMat,this._animMat,this._node.translation);if(n&&this._animRot){if(this._animRot[0].defaultEasing==CABLES.EASING_LINEAR)CABLES.TL.Anim.slerpQuaternion(t,this._tempQuat,this._animRot[0],this._animRot[1],this._animRot[2],this._animRot[3]);else if(this._animRot[0].defaultEasing==CABLES.EASING_ABSOLUTE){this._tempQuat[0]=this._animRot[0].getValue(t);this._tempQuat[1]=this._animRot[1].getValue(t);this._tempQuat[2]=this._animRot[2].getValue(t);this._tempQuat[3]=this._animRot[3].getValue(t)}else if(this._animRot[0].defaultEasing==CABLES.EASING_CUBICSPLINE){CABLES.TL.Anim.slerpQuaternion(t,this._tempQuat,this._animRot[0],this._animRot[1],this._animRot[2],this._animRot[3])}mat4.fromQuat(this._tempMat,this._tempQuat);mat4.mul(this._animMat,this._animMat,this._tempMat)}else if(this._rot){mat4.fromQuat(this._tempRotmat,this._rot);mat4.mul(this._animMat,this._animMat,this._tempRotmat)}if(n&&this._animScale){mat4.scale(this._animMat,this._animMat,[this._animScale[0].getValue(t),this._animScale[1].getValue(t),this._animScale[2].getValue(t)])}else if(this._scale)mat4.scale(this._animMat,this._animMat,this._scale);mat4.mul(e.mMatrix,e.mMatrix,this._animMat)}if(this.addTranslate)mat4.translate(e.mMatrix,e.mMatrix,this.addTranslate);if(this.addMulMat)mat4.mul(e.mMatrix,e.mMatrix,this.addMulMat);mat4.copy(this.absMat,e.mMatrix)}render(t,n,a,r,o,i,s){if(!n)t.pushModelMatrix();if(s===undefined)s=ie.time;if(!n||this.skinRenderer)this.transform(t,s);if(this.hidden&&!i){}else{if(this.skinRenderer){this.skinRenderer.time=s;if(!a)this.mesh.render(t,r,this.skinRenderer,s)}else{if(this.mesh&&!a)this.mesh.render(t,r,null,s)}}if(!o&&!this.hidden)for(let e=0;e<this.children.length;e++)if(ie.nodes[this.children[e]]){ie.nodes[this.children[e]].render(t,n,a,r,o,i,s)}if(!n)t.popModelMatrix()}};let h=null;function b(){if(h)gui.mainTabs.closeTab(h.id);h=null}function N(n,a,r){if(!ie)return;n+='<tr class="row">';let o="";let i="";for(let t=1;t<r;t++){i+="&nbsp;&nbsp;&nbsp;";let e="identBg";if(t==1)e="identBgLevel0";o+='<td class="ident '+e+'" ><div style=""></div></td>'}let e=CABLES.uuid();n+=o;n+='<td colspan="'+(21-r)+'">';if(a.mesh&&a.mesh.meshes.length)n+='<span class="icon icon-cube"></span>&nbsp;';else n+='<span class="icon icon-box-select"></span> &nbsp;';n+=a.name+"</td><td></td>";if(a.mesh){n+="<td>";for(let e=0;e<a.mesh.meshes.length;e++){if(e>0)n+=", ";n+=a.mesh.meshes[e].name}n+="</td>";n+="<td>";n+=a.hasSkin()||"-";n+="</td>";n+="<td>";let t=0;for(let e=0;e<a.mesh.meshes.length;e++){if(t>0)n+=", ";if(a.mesh.meshes[e].material){n+=ie.json.materials[a.mesh.meshes[e].material].name;t++}}if(t==0)n+="none";n+="</td>"}else{n+="<td>-</td><td>-</td><td>-</td>"}n+="<td>";if(a._animRot||a._animScale||a._animTrans){if(a._animRot)n+="Rot ";if(a._animScale)n+="Scale ";if(a._animTrans)n+="Trans "}else n+="None";n+="</td>";n+="<td>";let t="";if(a.hidden)t="node-hidden";n+="<a onclick=\"gui.corePatch().getOpById('"+x.id+"').exposeNode('"+a.name+"','transform')\" class=\"treebutton\">Transform</a>";n+=" <a onclick=\"gui.corePatch().getOpById('"+x.id+"').exposeNode('"+a.name+"','hierarchy')\" class=\"treebutton\">Hierarchy</a>";n+=" <a onclick=\"gui.corePatch().getOpById('"+x.id+"').exposeNode('"+a.name+'\')" class="treebutton">Node</a>';if(a.hasSkin())n+=" <a onclick=\"gui.corePatch().getOpById('"+x.id+"').exposeNode('"+a.name+'\',false,{skin:true});" class="treebutton">Skin</a>';n+="</td><td>";n+='&nbsp;<span class="icon iconhover icon-eye '+t+'" onclick="gui.corePatch().getOpById(\''+x.id+"').toggleNodeVisibility('"+a.name+"');this.classList.toggle('node-hidden');\"></span>";n+="</td>";n+="</tr>";if(a.children){for(let e=0;e<a.children.length;e++)n=N(n,ie.nodes[a.children[e]],r+1)}return n}function P(t,e){let n="<tr>";n+=" <td>"+e+"</td>";n+=" <td>"+t.name+"</td>";n+=" <td>";if(t.pbrMetallicRoughness&&t.pbrMetallicRoughness.baseColorFactor){let e="";e+=""+Math.round(t.pbrMetallicRoughness.baseColorFactor[0]*255);e+=","+Math.round(t.pbrMetallicRoughness.baseColorFactor[1]*255);e+=","+Math.round(t.pbrMetallicRoughness.baseColorFactor[2]*255);n+='<div style="width:15px;height:15px;;background-color:rgb('+e+')">&nbsp;</a>'}n+=' <td style="">'+(ie.shaders[e]?"-":"<a onclick=\"gui.corePatch().getOpById('"+x.id+"').assignMaterial('"+t.name+'\')" class="treebutton">Assign</a>')+"<td>";n+="<td>";n+="</tr>";return n}function e(){if(!ie)return;const e=performance.now();const r={};let o='<div style="overflow:scroll;width:100%;height:100%">';o+="generator:"+ie.json.asset.generator;let t=0;if(ie.json.nodes)t=ie.json.nodes.length;o+='<div id="groupNodes">Nodes ('+t+")</div>";o+='<table id="sectionNodes" class="table treetable">';o+="<tr>";o+=' <th colspan="21">Name</th>';o+=" <th>Mesh</th>";o+=" <th>Skin</th>";o+=" <th>Material</th>";o+=" <th>Anim</th>";o+=" <th>Expose</th>";o+=" <th></th>";o+="</tr>";for(let e=0;e<ie.nodes.length;e++){if(!ie.nodes[e].isChild)o=N(o,ie.nodes[e],1)}o+="</table>";let n=0;if(ie.json.materials)n=ie.json.materials.length;o+='<div id="groupMaterials">Materials ('+n+")</div>";if(!ie.json.materials||ie.json.materials.length==0){}else{o+='<table id="materialtable"  class="table treetable">';o+="<tr>";o+=" <th>Index</th>";o+=" <th>Name</th>";o+=" <th>Color</th>";o+=" <th>Function</th>";o+=" <th></th>";o+="</tr>";for(let e=0;e<ie.json.materials.length;e++){o+=P(ie.json.materials[e],e)}o+="</table>"}o+='<div id="groupMeshes">Meshes ('+ie.json.meshes.length+")</div>";o+='<table id="meshestable"  class="table treetable">';o+="<tr>";o+=" <th>Name</th>";o+=" <th>Node</th>";o+=" <th>Material</th>";o+=" <th>Vertices</th>";o+=" <th>Attributes</th>";o+="</tr>";let i=[];r.meshes=0;console.log(ie);for(let a=0;a<ie.json.meshes.length;a++){o+="<tr>";o+="<td>"+ie.json.meshes[a].name+"</td>";o+="<td>";let e=0;let t="";for(var s=0;s<ie.json.nodes.length;s++){if(ie.json.nodes[s].mesh==a){e++;if(e==1){t=ie.json.nodes[s].name}}}if(e>1)o+=e+" nodes ("+t+" ...)";else o+=t;o+="</td>";o+="<td>";for(var s=0;s<ie.json.meshes[a].primitives.length;s++){if(ie.json.meshes[a].primitives[s].material){o+=ie.json.materials[ie.json.meshes[a].primitives[s].material].name+" "}else o+="None"}o+="</td>";o+="<td>";let n=0;for(var s=0;s<ie.json.meshes[a].primitives.length;s++){if(ie.json.meshes[a].primitives[s].attributes.POSITION!=undefined){let e=parseInt(ie.json.accessors[ie.json.meshes[a].primitives[s].attributes.POSITION].count);n+=e;o+=""+e+"<br/>"}else o+="-<br/>"}if(ie.json.meshes[a].primitives.length>0)o+="="+n;o+="</td>";o+='<td style="vertical-align:top;">';for(let e=0;e<ie.json.meshes[a].primitives.length;e++){o+=Object.keys(ie.json.meshes[a].primitives[e].attributes);o+=" <a onclick=\"gui.corePatch().getOpById('"+x.id+"').exposeGeom('"+ie.json.meshes[a].name+"',"+e+')" class="treebutton">Geometry</a>';o+="<br/>"}o+="</td>";o+="</tr>";for(let t=0;t<ie.json.meshes[a].primitives.length;t++){const d=ie.json.accessors[ie.json.meshes[a].primitives[t].indices];if(d){let e=d.bufferView;if(i.indexOf(e)==-1){i.push(e);if(ie.json.bufferViews[e])r.meshes+=ie.json.bufferViews[e].byteLength}}for(let e in ie.json.meshes[a].primitives[t].attributes){const p=ie.json.meshes[a].primitives[t].attributes[e];const v=ie.json.accessors[p].bufferView;if(i.indexOf(v)==-1){i.push(v);if(ie.json.bufferViews[v])r.meshes+=ie.json.bufferViews[v].byteLength}}}}o+="</table>";let a=0;if(ie.json.animations)a=ie.json.animations.length;o+='<div id="groupAnims">Animations ('+a+")</div>";if(ie.json.animations){o+='<table id="sectionAnim" class="table treetable">';o+="<tr>";o+="  <th>Name</th>";o+="  <th>Target node</th>";o+="  <th>Path</th>";o+="  <th>Interpolation</th>";o+="  <th>Keys</th>";o+="</tr>";r.animations=0;for(let n=0;n<ie.json.animations.length;n++){for(let t=0;t<ie.json.animations[n].samplers.length;t++){let e=ie.json.accessors[ie.json.animations[n].samplers[t].input].bufferView;if(i.indexOf(e)==-1){i.push(e);r.animations+=ie.json.bufferViews[e].byteLength}e=ie.json.accessors[ie.json.animations[n].samplers[t].output].bufferView;if(i.indexOf(e)==-1){i.push(e);r.animations+=ie.json.bufferViews[e].byteLength}}for(let e=0;e<ie.json.animations[n].channels.length;e++){o+="<tr>";o+="  <td> Anim "+n+": "+ie.json.animations[n].name+"</td>";o+="  <td>"+ie.nodes[ie.json.animations[n].channels[e].target.node].name+"</td>";o+="  <td>";o+=ie.json.animations[n].channels[e].target.path+" ";o+="  </td>";const f=ie.json.animations[n].channels[e].sampler;const g=ie.json.animations[n].samplers[f];o+="  <td>"+g.interpolation+"</td>";o+="  <td>"+ie.json.accessors[g.output].count;o+="&nbsp;&nbsp;<a onclick=\"gui.corePatch().getOpById('"+x.id+"').showAnim('"+n+"','"+e+'\')" class="icon icon-search"></a>';o+="</td>";o+="</tr>"}}o+="</table>"}else{}let l=0;if(ie.json.images)l=ie.json.images.length;o+='<div id="groupImages">Images ('+l+")</div>";if(ie.json.images){o+='<table id="sectionImages" class="table treetable">';o+="<tr>";o+="  <th>name</th>";o+="  <th>type</th>";o+="  <th>func</th>";o+="</tr>";r.images=0;for(let t=0;t<ie.json.images.length;t++){if(ie.json.images[t].bufferView)r.images+=ie.json.bufferViews[ie.json.images[t].bufferView].byteLength;o+="<tr>";o+="<td>"+ie.json.images[t].name+"</td>";o+="<td>"+ie.json.images[t].mimeType+"</td>";o+="<td>";let e=ie.json.images[t].name;if(e===undefined)e=ie.json.images[t].bufferView;o+="<a onclick=\"gui.corePatch().getOpById('"+x.id+"').exposeTexture('"+e+'\')" class="treebutton">Expose</a>';o+="</td>";o+="<tr>"}o+="</table>"}let u=0;if(ie.json.cameras)u=ie.json.cameras.length;o+='<div id="groupCameras">Cameras ('+u+")</div>";if(ie.json.cameras){o+='<table id="sectionCameras" class="table treetable">';o+="<tr>";o+="  <th>name</th>";o+="  <th>type</th>";o+="  <th>info</th>";o+="</tr>";for(let e=0;e<ie.json.cameras.length;e++){o+="<tr>";o+="<td>"+ie.json.cameras[e].name+"</td>";o+="<td>"+ie.json.cameras[e].type+"</td>";o+="<td>";o+="yfov: "+Math.round(ie.json.cameras[e].perspective.yfov*100)/100;o+=", ";o+="zfar: "+Math.round(ie.json.cameras[e].perspective.zfar*100)/100;o+=", ";o+="znear: "+Math.round(ie.json.cameras[e].perspective.znear*100)/100;o+="</td>";o+="<tr>"}o+="</table>"}let c=0;if(ie.json.skins)c=ie.json.skins.length;o+='<div id="groupSkins">Skins ('+c+")</div>";if(ie.json.skins){o+='<table id="sectionSkins" class="table treetable">';o+="<tr>";o+="  <th>name</th>";o+="  <th></th>";o+="  <th>total joints</th>";o+="</tr>";for(let e=0;e<ie.json.skins.length;e++){o+="<tr>";o+="<td>"+ie.json.skins[e].name+"</td>";o+="<td>"+"</td>";o+="<td>"+ie.json.skins[e].joints.length+"</td>";o+="<td>";o+="</td>";o+="<tr>"}o+="</table>"}let m=0;if(ie.json.buffers)m=ie.json.buffers[0].byteLength;o+='<div id="groupBinary">File Size Allocation ('+Math.round(m/1024)+"k )</div>";o+='<table id="sectionBinary" class="table treetable">';o+="<tr>";o+="  <th>name</th>";o+="  <th>size</th>";o+="  <th>%</th>";o+="</tr>";let _=m;for(let e in r){o+="<tr>";o+="<td>"+e+"</td>";o+="<td>"+j(r[e])+" </td>";o+="<td>"+Math.round(r[e]/m*100)+"% </td>";o+="<tr>";_-=r[e]}if(_!=0){o+="<tr>";o+="<td>unknown</td>";o+="<td>"+j(_)+" </td>";o+="<td>"+Math.round(_/m*100)+"% </td>";o+="<tr>"}o+="</table>";o+="</div>";h=new CABLES.UI.Tab("GLTF",{icon:"cube",infotext:"tab_gltf",padding:true,singleton:true});gui.mainTabs.addTab(h,true);h.addEventListener("onClose",b);h.html(o);CABLES.UI.Collapsable.setup(ele.byId("groupNodes"),ele.byId("sectionNodes"),false);CABLES.UI.Collapsable.setup(ele.byId("groupMaterials"),ele.byId("materialtable"),true);CABLES.UI.Collapsable.setup(ele.byId("groupAnims"),ele.byId("sectionAnim"),true);CABLES.UI.Collapsable.setup(ele.byId("groupMeshes"),ele.byId("meshestable"),true);CABLES.UI.Collapsable.setup(ele.byId("groupCameras"),ele.byId("sectionCameras"),true);CABLES.UI.Collapsable.setup(ele.byId("groupImages"),ele.byId("sectionImages"),true);CABLES.UI.Collapsable.setup(ele.byId("groupSkins"),ele.byId("sectionSkins"),true);CABLES.UI.Collapsable.setup(ele.byId("groupBinary"),ele.byId("sectionBinary"),true);gui.maintabPanel.show(true)}function j(e){if(e>1024)return Math.round(e/1024)+" kb";if(e>1024*500)return Math.round(e/1024)+" mb";else return e+" bytes"}const R=class{constructor(e){this._mod=null;this._node=e;this._lastTime=0;this._matArr=[];this._m=mat4.create();this._invBindMatrix=mat4.create()}renderFinish(e){e.popModelMatrix();this._mod.unbind()}renderStart(e,t){if(!this._mod){this._mod=new CGL.ShaderModifier(e,x.name+this._node.name);this._mod.addModule({priority:-2,name:"MODULE_VERTEX_POSITION",srcHeadVert:l.skin_head_vert||"",srcBodyVert:l.skin_vert||""});this._mod.addUniformVert("m4[]","MOD_boneMats",[]);const r=vec3.create()}const n=this._node.skin;const a=ie.json.skins[n].joints.length*16;{if(this._matArr.length!=a)this._matArr.length=a;for(let e=0;e<ie.json.skins[n].joints.length;e++){const o=e*16;const i=ie.json.skins[n].joints[e];const s=ie.nodes[i];for(let e=0;e<16;e++)this._invBindMatrix[e]=ie.accBuffers[ie.json.skins[n].inverseBindMatrices][o+e];mat4.mul(this._m,s.modelMatAbs(),this._invBindMatrix);for(let e=0;e<this._m.length;e++)this._matArr[o+e]=this._m[e]}this._mod.setUniformValue("MOD_boneMats",this._matArr)}this._mod.define("SKIN_NUM_BONES",ie.json.skins[n].joints.length);this._mod.bind();e.pushModelMatrix();mat4.identity(e.mMatrix)}};const t=x.inString("data"),n=x.inTrigger("Render"),s=x.inUrl("glb File",[".glb"]),u=x.inBool("Draw",true),c=x.inDropDown("Camera",["None"],"None"),m=x.inString("Animation",""),_=x.inTriggerButton("Show Structure"),d=x.inSwitch("Center",["None","XYZ","XZ"],"XYZ"),p=x.inBool("Rescale",true),v=x.inFloat("Rescale Size",2.5),f=x.inFloat("Time"),g=x.inBool("Sync to timeline",false),D=x.inBool("Loop",true),w=x.inSwitch("Normals Format",["XYZ","X-ZY"],"XYZ"),L=x.inSwitch("Vertices Format",["XYZ","XZ-Y"],"XYZ"),G=x.inBool("Calc Normals",false),k=x.inObject("Materials"),U=x.inArray("Hide Nodes"),V=x.inBool("Use Material Properties",false),B=x.inBool("Active",true),z=x.outTrigger("Render Before"),F=x.outTrigger("Next"),X=x.outString("Generator"),Y=x.outNumber("GLTF Version"),H=x.outArray("GLTF Extensions Used"),W=x.outNumber("Anim Length",0),q=x.outNumber("Anim Time",0),K=x.outObject("Json"),Z=x.outArray("Anims"),Q=x.outArray("BoundingPoints"),J=x.outObject("Bounds"),$=x.outTrigger("Finished"),ee=x.outBool("Loading");x.setPortGroup("Timing",[f,g,D]);const te=true;const ne=x.patch.cgl;s.onChange=L.onChange=G.onChange=w.onChange=Ie;let ae=false;let re=null;let oe=[];let ie=null;let se=0;let le=0;let ue=true;let ce=null;let me=null;let _e=null;const de=vec3.create();let pe=0;let ve=false;const fe=vec3.create();_.onTriggered=e;t.setUiAttribs({hideParam:true,hidePort:true});t.onChange=Ae;U.onChange=Se;m.onChange=Ce;x.setPortGroup("Transform",[p,v,d]);d.onChange=he;function ge(){const t=["None"];if(ie){for(let e=0;e<ie.nodes.length;e++){if(ie.nodes[e].camera>=0){t.push(ie.nodes[e].name)}}}c.uiAttribs.values=t}function he(){ve=d.get()!="None";if(ie&&ie.bounds){fe.set(ie.bounds.center);fe[0]=-fe[0];fe[1]=-fe[1];fe[2]=-fe[2];if(d.get()=="XZ")fe[1]=-ie.bounds.minY}}p.onChange=function(){v.setUiAttribs({greyout:!p.get()})};k.onChange=function(){ue=true};x.onDelete=function(){b()};g.onChange=function(){f.setUiAttribs({greyout:g.get()})};c.onChange=be;function be(){re=null;if(!ie)return;for(let e=0;e<ie.nodes.length;e++){if(ie.nodes[e].name==c.get())re=new a(ie,ie.nodes[e])}}n.onTriggered=function(){if(!ae)return;if(!B.get())return;if(g.get())le=x.patch.timer.getTime();else le=Math.max(0,f.get());if(D.get()){le%=se;if(le<pe)$.trigger()}else{if(se>0&&le>=se)$.trigger()}pe=le;ne.pushModelMatrix();q.set(le||0);if(ae&&ie&&ie.bounds){if(p.get()){let e=v.get()/ie.bounds.maxAxis;ie.scale=e;vec3.set(de,e,e,e);mat4.scale(ne.mMatrix,ne.mMatrix,de)}if(ve){mat4.translate(ne.mMatrix,ne.mMatrix,fe)}}ne.frameStore.currentScene=ie;z.trigger();if(ae){if(ue)Te();if(re)re.start(le);if(ie){ie.time=le;{if(ie.bounds&&ne.shouldDrawHelpers(x)){if(CABLES.UI.renderHelper)ne.pushShader(CABLES.GL_MARKER.getDefaultShader(ne));else ne.pushShader(CABLES.GL_MARKER.getSelectedShader(ne));ie.bounds.render(ne);ne.popShader()}if(u.get()){for(let e=0;e<ie.nodes.length;e++)if(!ie.nodes[e].isChild)ie.nodes[e].render(ne)}else{for(let e=0;e<ie.nodes.length;e++)if(!ie.nodes[e].isChild)ie.nodes[e].render(ne,false,true)}}}}F.trigger();ne.frameStore.currentScene=null;ne.popModelMatrix();if(re)re.end()};function xe(){if(!ie){x.setUiError("nogltf","gltf not found");return}x.setUiError("nogltf",null);if(ie.loadingMeshes>0){setTimeout(xe,100);return}ie.timing.push("finishLoading()",Math.round(performance.now()-ie.startTime));ue=true;W.set(se);ie.bounds=new CGL.BoundingBox;if(!ie)x.setUiError("urlerror",'could not load gltf:<br/>"'+s.get()+'"',2);else x.setUiError("urlerror",null);ie.timing.push("start calc bounds",Math.round(performance.now()-ie.startTime));for(let e=0;e<ie.nodes.length;e++){const t=ie.nodes[e];t.updateMatrix();if(!t.isChild)t.calcBounds(ie,null,ie.bounds)}if(ie.bounds)J.set(ie.bounds);ie.timing.push("calced bounds",Math.round(performance.now()-ie.startTime));Se();ie.timing.push("hideNodesFromData",Math.round(performance.now()-ie.startTime));if(h)e();ie.timing.push("printinfo",Math.round(performance.now()-ie.startTime));ge();be();Q.set(oe);if(ie){if(s.get()&&!s.get().startsWith("data:")){x.setUiAttrib({extendTitle:CABLES.basename(s.get())})}ie.loaded=Date.now()}if(ie){for(let e=0;e<ie.nodes.length;e++){if(!ie.nodes[e].isChild){ie.nodes[e].render(ne,false,true,true,false,true,0)}}for(let e=0;e<ie.nodes.length;e++){const t=ie.nodes[e];t.children=Pe(t.children)}}he();Ce();ee.set(false);ne.patch.loading.finished(me);me=null;x.setUiAttrib({accBuffersDelete:CABLES.basename(s.get())});if(ie.accBuffersDelete){for(let e=0;e<ie.accBuffersDelete.length;e++){ie.accBuffers[ie.accBuffersDelete[e]]=null}}ae=true}function Oe(e){if(!B.get())return;if(!me)me=ne.patch.loading.start("gltfScene",s.get());let t=s.get();let n=x.patch.getFilePath(String(s.get()));if(s.get()&&!s.get().startsWith("data:")){if(e)n+="?rnd="+CABLES.generateUUID()}ae=false;ee.set(true);fetch(n).then(e=>e.arrayBuffer()).then(e=>{if(s.get()!=t){ne.patch.loading.finished(me);me=null;return}oe=[];se=0;ie=r(e);xe()});b();const a=new XMLHttpRequest;a.open("GET",n,true);a.responseType="arraybuffer";ne.patch.loading.addAssetLoadingTask(()=>{})}x.onFileChanged=function(e){ie.accBuffersDelete[i];if(e&&e.length>3&&s.get()&&s.get().indexOf(e)>-1)Ie(true)};x.onFileChanged=function(e){if(s.get()&&s.get().indexOf(e)>-1){Ie(true)}};B.onChange=()=>{if(B.get())Ie();if(!B.get()){ie=null}};function Ie(e){clearTimeout(ce);ce=setTimeout(function(){Oe(e)},30)}function Te(){if(!ie)return;ie.shaders={};if(k.links.length==1&&k.get()){const n=k.links[0].portOut.parent;const a=n.getPort("Shader");const r=n.getPort("Material Name");if(!a&&!r){const o=k.get();for(let t in o){console.log("matname",t);if(o[t]&&ie.json.materials)for(let e=0;e<ie.json.materials.length;e++){console.log("gltf.json.materials[i].name",ie.json.materials[e].name);if(ie.json.materials[e].name==t){if(ie.shaders[e]){n.warn("double material assignment:",name)}ie.shaders[e]=o[t];console.log("shader found!",ie.shaders[e])}}}}}if(k.get()){for(let e=0;e<k.links.length;e++){const t=k.links[e].portOut.parent;const a=t.getPort("Shader");const r=t.getPort("Material Name");if(a&&r&&a.get()){const name=r.get();if(ie.json.materials)for(let e=0;e<ie.json.materials.length;e++)if(ie.json.materials[e].name==name){if(ie.shaders[e]){t.warn("double material assignment:",name)}ie.shaders[e]=a.get()}}}}ue=false;if(h)e()}function ye(){const t=U.get();if(!ie||!_e||!_e.hiddenNodes)return;if(!t){return}for(let e=0;e<t.length;e++){const n=ie.getNode(t[e]);if(n)n.hidden=true}}function Se(){if(!_e)Ae();if(!ie)return;ie.unHideAll();if(_e&&_e.hiddenNodes){for(const e in _e.hiddenNodes){const t=ie.getNode(e);if(t)t.hidden=true;else x.verbose("node to be hidden not found",e,t)}}ye()}function Ae(){_e=t.get();if(!_e||_e==="")_e={};else _e=JSON.parse(_e);if(ie)Se();return _e}function Me(){t.set(JSON.stringify(_e))}function Ce(){if(ie&&ie.nodes){for(let e=0;e<ie.nodes.length;e++){ie.nodes[e].setAnimAction(m.get())}}}function Ee(t,n){for(let e=0;e<ie.nodes.length;e++){if(ie.nodes[e].children.indexOf(n)>=0){t.push(ie.nodes[e]);if(ie.nodes[e].isChild)Ee(t,e)}}}x.exposeTexture=function(e){const t=gui.corePatch().addOp("Ops.Gl.GLTF.GltfTexture");t.getPort("Name").set(e);Ne(t,1);x.patch.link(x,F.name,t,"Render");gui.patchView.centerSelectOp(t.id,true);gui.patchView.testCollision(t)};x.exposeGeom=function(e,t){const n=gui.corePatch().addOp("Ops.Gl.GLTF.GltfGeometry");n.getPort("Name").set(e);n.getPort("Submesh").set(t);Ne(n,1);x.patch.link(x,F.name,n,"Update");gui.patchView.centerSelectOp(n.id,true);gui.patchView.testCollision(n)};function Ne(e,t){t=t||1;e.setUiAttrib({translate:{x:x.uiAttribs.translate.x,y:x.uiAttribs.translate.y+t*CABLES.GLUI.glUiConfig.newOpDistanceY}})}x.exposeNode=function(n,e,a){let t=e=="hierarchy";if(t){let r=[];for(let e=0;e<ie.nodes.length;e++){if(ie.nodes[e].name==n){let t=[];const o=ie.nodes[e];Ee(t,e);t=t.reverse();t.push(o,o);let n=F.name;let a=x;for(let e=0;e<t.length;e++){const i=gui.corePatch().addOp("Ops.Gl.GLTF.GltfNode_v2");i.getPort("Node Name").set(t[e].name);x.patch.link(a,n,i,"Render");Ne(i,e);if(e==t.length-1){i.getPort("Transformation").set(false)}else{i.getPort("Draw Mesh").set(false);i.getPort("Draw Childs").set(false)}n="Next";a=i;r.push(i);gui.patchView.testCollision(i)}}}for(let e=0;e<r.length;e++){r[e].selectChilds()}}else{let t="Ops.Gl.GLTF.GltfNode_v2";if(a&&a.skin)t="Ops.Gl.GLTF.GltfSkin";if(e=="transform")t="Ops.Gl.GLTF.GltfNodeTransform_v2";gui.serverOps.loadOpLibs(t,()=>{let e=gui.corePatch().addOp(t);e.getPort("Node Name").set(n);Ne(e);x.patch.link(x,F.name,e,"Render");gui.patchView.centerSelectOp(e.id,true);gui.patchView.testCollision(e)})}gui.closeModal()};x.assignMaterial=function(e){const t=gui.corePatch().addOp("Ops.Gl.GLTF.GltfSetMaterial");t.getPort("Material Name").set(e);x.patch.link(x,k.name,t,"Material");gui.patchView.centerSelectOp(t.id,true);Ne(t);gui.patchView.testCollision(t);gui.closeModal()};x.toggleNodeVisibility=function(e){const t=ie.getNode(e);t.hidden=!t.hidden;_e.hiddenNodes=_e.hiddenNodes||{};if(t)if(t.hidden)_e.hiddenNodes[e]=true;else delete _e.hiddenNodes[e];Me()};x.showAnim=function(e,t){console.log("showanim",t);console.log(ie.json.animations[e].channels[t]);const n=ie.json.animations[e];const a=ie.json.animations[e].channels[t];const r=ie.nodes[a.target.node];const o=n.samplers[a.sampler];const i=ie.json.accessors[o.input];const s=ie.accBuffers[o.input];const l=ie.json.accessors[o.output];const u=ie.accBuffers[o.output];console.log({channel:a,sampler:o,bufferIn:s,bufferOut:u})};function Pe(n){const a={},r=[];for(let e=0,t=n.length;e<t;++e){if(!a.hasOwnProperty(n[e])){r.push(n[e]);a[n[e]]=1}}return r}};Ops.Gl.GLTF.GltfScene_v3.prototype=new CABLES.Op;CABLES.OPS["a9c59d94-8aea-4c20-ab5d-63ce46ecfa16"]={f:Ops.Gl.GLTF.GltfScene_v3,objName:"Ops.Gl.GLTF.GltfScene_v3"};Ops.Gl.GLTF.GltfTexture=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("Render"),i=e.inString("Name",""),s=e.inSwitch("Filter",["nearest","linear","mipmap"],"mipmap"),a=e.inValueSelect("Wrap",["repeat","mirrored repeat","clamp to edge"],"clamp to edge"),l=e.inSwitch("Anisotropic",[0,1,2,4,8,16],0),u=e.inValueBool("Flip",false),c=e.inValueBool("Pre Multiplied Alpha",false),m=e.outTexture("Texture"),_=e.outValue("Width"),d=e.outValue("Height"),p=e.outString("Type"),v=e.outBool("Found");const f=e.patch.cgl;let g=null;let h=0;let b=0;let x=0;l.onChange=s.onChange=o;a.onChange=O;i.onChange=u.onChange=c.onChange=function(){r()};function r(){g=null}n.onTriggered=function(){if(g)return;if(!f.frameStore.currentScene||!f.frameStore.currentScene.json)return;if(f.frameStore.currentScene.chunks.length<2){return}if(!f.frameStore.currentScene.json.images)return;let t=null;for(let e=0;e<f.frameStore.currentScene.json.images.length;e++){if(f.frameStore.currentScene.json.images[e].name==i.get()||f.frameStore.currentScene.json.images[e].bufferView==parseFloat(i.get())){t=f.frameStore.currentScene.json.images[e]}}if(!t){g=CGL.Texture.getEmptyTexture(f);v.set(false);m.set(g);_.set(g.width);d.set(g.height);return}console.log(f.frameStore.currentScene.chunks);const n=f.frameStore.currentScene.json.bufferViews[t.bufferView];let a=f.frameStore.currentScene.chunks[1].dataView;if(!n)return;const r=new Uint8Array(n.byteLength);for(let e=0;e<n.byteLength;e++)r[e]=a.getUint8(n.byteOffset+e);const e=new Blob([r.buffer],{type:t.mimeType});const o=URL.createObjectURL(e);if(s.get()=="nearest")h=CGL.Texture.FILTER_NEAREST;else if(s.get()=="linear")h=CGL.Texture.FILTER_LINEAR;else if(s.get()=="mipmap")h=CGL.Texture.FILTER_MIPMAP;else if(s.get()=="Anisotropic")h=CGL.Texture.FILTER_ANISOTROPIC;x=parseFloat(l.get());g=CGL.Texture.load(f,o,function(e){if(e){v.set(false)}m.set(g);_.set(g.width);d.set(g.height);p.set(t.mimeType);m.set(null);m.set(g);v.set(true)},{anisotropic:x,wrap:b,flip:u.get(),unpackAlpha:c.get(),filter:h});m.set(null);m.set(g)};function o(){r()}function O(){if(a.get()=="repeat")b=CGL.Texture.WRAP_REPEAT;if(a.get()=="mirrored repeat")b=CGL.Texture.WRAP_MIRRORED_REPEAT;if(a.get()=="clamp to edge")b=CGL.Texture.WRAP_CLAMP_TO_EDGE;r()}};Ops.Gl.GLTF.GltfTexture.prototype=new CABLES.Op;CABLES.OPS["6479a948-7a48-42a3-b40a-794f4364715f"]={f:Ops.Gl.GLTF.GltfTexture,objName:"Ops.Gl.GLTF.GltfTexture"};Ops.Gl.GLTF.GltfNode_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("Render"),a=e.inString("Node Name"),r=e.inBool("Transformation",true),o=e.inBool("Draw Mesh",true),i=e.inBool("Draw Childs",true),s=e.inBool("Ignore Material",true),l=e.inBool("Use Scene Time",true),u=e.inFloat("Time",0),c=e.outTrigger("Next"),m=e.outObject("Geometry",null,"geometry"),_=e.outBool("Found");const d=e.patch.cgl;let p=null;let v=null;a.onChange=function(){m.set(null);p=null;_.set(false);e.setUiAttrib({extendTitle:a.get()})};l.onChange=f;f();function f(){u.setUiAttribs({greyout:l.get()})}n.onTriggered=function(){if(!d.frameStore.currentScene)return;if(v!=d.frameStore.currentScene.loaded)p=null;if(!p){const t=a.get();if(!d.frameStore||!d.frameStore.currentScene||!d.frameStore.currentScene.nodes){return}v=d.frameStore.currentScene.loaded;for(let e=0;e<d.frameStore.currentScene.nodes.length;e++){if(d.frameStore.currentScene.nodes[e].name==t){p=d.frameStore.currentScene.nodes[e];_.set(true);if(p&&p.mesh&&p.mesh.meshes&&p.mesh.meshes[0].geom)m.set(p.mesh.meshes[0].geom);else m.set(null)}}}d.pushModelMatrix();if(p){if(r.get()){d.pushModelMatrix();p.transform(d)}let e;if(!l.get())e=u.get();p.render(d,!r.get(),!o.get(),s.get(),!i.get(),true,e)}c.trigger();if(p){if(r.get())d.popModelMatrix()}d.popModelMatrix()}};Ops.Gl.GLTF.GltfNode_v2.prototype=new CABLES.Op;CABLES.OPS["10d09387-0085-4162-ab5b-b89eebbf3cf4"]={f:Ops.Gl.GLTF.GltfNode_v2,objName:"Ops.Gl.GLTF.GltfNode_v2"};Ops.Gl.Phong.PointLight_v5=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.patch.cgl;const a=n.gl;const r=CGL.MESHES.getSimpleRect(n,"fullscreenRectangle");function o(e){this.type=e.type||"point";this.color=e.color||[1,1,1];this.specular=e.specular||[0,0,0];this.position=e.position||null;this.intensity=e.intensity||1;this.radius=e.radius||1;this.falloff=e.falloff||1;this.spotExponent=e.spotExponent||1;this.cosConeAngle=Math.cos(CGL.DEG2RAD*this.coneAngle);this.conePointAt=e.conePointAt||[0,0,0];this.castShadow=e.castShadow||false;return this}const i=e.inTrigger("Trigger In");const s=e.inBool("Cast Light",true);const l=e.inFloat("Intensity",2);const u=e.inFloat("Radius",15);const c=e.inFloat("X",0);const m=e.inFloat("Y",2);const _=e.inFloat("Z",.75);const d=[c,m,_];e.setPortGroup("Position",d);const p=e.inFloat("R",.8);const v=e.inFloat("G",.8);const f=e.inFloat("B",.8);p.setUiAttribs({colorPick:true});const g=[p,v,f];e.setPortGroup("Color",g);const h=e.inFloat("Specular R",1);const b=e.inFloat("Specular G",1);const x=e.inFloat("Specular B",1);h.setUiAttribs({colorPick:true});const O=[h,b,x];e.setPortGroup("Specular Color",O);const I=e.inFloatSlider("Falloff",.5);const T=[l,s,u];e.setPortGroup("Light Attributes",T);const y=e.inBool("Cast Shadow",false);const S=e.inBool("Rendering Active",true);const A=e.inSwitch("Map Size",[256,512,1024,2048],512);const M=e.inFloatSlider("Shadow Strength",1);const C=e.inFloat("Near",.1);const E=e.inFloat("Far",30);const N=e.inFloatSlider("Bias",.004);const P=e.inInt("Polygon Offset",0);e.setPortGroup("",[y]);e.setPortGroup("Shadow Map Settings",[A,S,M,C,E,N,P]);const j=[C,E];A.setUiAttribs({greyout:!y.get()});S.setUiAttribs({greyout:!y.get()});M.setUiAttribs({greyout:!y.get()});C.setUiAttribs({greyout:!y.get()});N.setUiAttribs({greyout:!y.get()});E.setUiAttribs({greyout:!y.get()});P.setUiAttribs({greyout:!y.get()});let R=false;y.onChange=function(){R=true;V=true;A.setUiAttribs({greyout:!y.get()});S.setUiAttribs({greyout:!y.get()});M.setUiAttribs({greyout:!y.get()});C.setUiAttribs({greyout:!y.get()});E.setUiAttribs({greyout:!y.get()});N.setUiAttribs({greyout:!y.get()});P.setUiAttribs({greyout:!y.get()})};const D=e.outTrigger("Trigger Out");const w=e.outObject("Cubemap");const L=e.outNumber("World Position X");const G=e.outNumber("World Position Y");const k=e.outNumber("World Position Z");const U=new CGL.Light(n,{type:"point",position:[0,1,2].map(function(e){return d[e].get()}),color:[0,1,2].map(function(e){return g[e].get()}),specular:[0,1,2].map(function(e){return O[e].get()}),intensity:l.get(),radius:u.get(),falloff:I.get(),shadowStrength:M.get(),shadowBias:N.get()});U.castLight=s.get();let V=false;c.onChange=m.onChange=_.onChange=p.onChange=v.onChange=f.onChange=h.onChange=b.onChange=x.onChange=l.onChange=s.onChange=u.onChange=I.onChange=C.onChange=E.onChange=M.onChange=function(){V=true};A.onChange=function(){R=true};function B(){if(y.get()){const e=A.get();U.createFramebuffer(e,e,{});U.createShadowMapShader()}R=false}const z=vec3.create();const F=vec3.create();const X=vec3.create();const Y=vec3.create();function H(){if(n.frameStore.shadowPass)return;if(n.shouldDrawHelpers(e)){gui.setTransformGizmo({posX:c,posY:m,posZ:_});n.pushModelMatrix();mat4.translate(n.mMatrix,n.mMatrix,Y);CABLES.GL_MARKER.drawSphere(e,u.get());n.popModelMatrix()}}let W=false;i.onTriggered=function(){if(R){if(n.frameStore.shadowPass)return;B()}if(!n.frameStore.shadowPass){if(!U.isUsed&&!W){e.setUiError("lightUsed","No operator is using this light. Make sure this op is positioned before an operator that uses lights. Also make sure there is an operator that uses lights after this.",1);W=true}else if(!U.isUsed&&W){}else if(U.isUsed&&W){e.setUiError("lightUsed",null);W=false}else if(U.isUsed&&!W){}U.isUsed=false}if(V){U.position=[0,1,2].map(function(e){return d[e].get()});U.color=[0,1,2].map(function(e){return g[e].get()});U.specular=[0,1,2].map(function(e){return O[e].get()});U.intensity=l.get();U.radius=u.get();U.falloff=I.get();U.castShadow=y.get();U.castLight=s.get();U.updateProjectionMatrix(null,C.get(),E.get(),null);V=false}if(!n.frameStore.lightStack)n.frameStore.lightStack=[];vec3.set(Y,c.get(),m.get(),_.get());vec3.transformMat4(X,Y,n.mMatrix);U.position=X;L.set(U.position[0]);G.set(U.position[1]);k.set(U.position[2]);if(!n.frameStore.shadowPass)H();n.frameStore.lightStack.push(U);if(y.get()){if(S.get())U.renderPasses(P.get(),null,function(){D.trigger()});if(!n.frameStore.shadowPass){n.frameStore.lightStack.pop();U.castShadow=y.get();U.shadowBias=N.get();U.shadowStrength=M.get();if(U.shadowCubeMap){if(U.shadowCubeMap.cubemap){w.set(null);w.set(U.shadowCubeMap);if(S.get()){U.positionForShadowMap=[U.position[0],U.position[1],U.position[2]]}}}n.frameStore.lightStack.push(U)}}else{w.set(null)}D.trigger();n.frameStore.lightStack.pop()}};Ops.Gl.Phong.PointLight_v5.prototype=new CABLES.Op;CABLES.OPS["54e5d3f5-e3f4-4381-990d-d5e32b9a2d39"]={f:Ops.Gl.Phong.PointLight_v5,objName:"Ops.Gl.Phong.PointLight_v5"};Ops.Gl.ShaderEffects.FresnelGlow=function(){CABLES.Op.apply(this,arguments);const e=this;const t={fresnel_body_frag:"#ifdef ENABLE_FRESNEL_MOD\n    vec3 MOD_fragNormal = normalize(MOD_norm);\n    col.rgb += MOD_inFresnel.rgb *\n        CalculateFresnel(vec3(MOD_cameraSpace_pos), MOD_fragNormal)\n        * MOD_inFresnel.w;\n#endif\n",fresnel_body_vert:"#ifdef ENABLE_FRESNEL_MOD\n    MOD_cameraSpace_pos = viewMatrix*mMatrix * pos;\n    MOD_norm = norm;\n    MOD_viewMatrix = mat3(viewMatrix);\n#endif",fresnel_head_frag:"IN vec4 MOD_cameraSpace_pos;\nIN mat3 MOD_viewMatrix;\nIN vec3 MOD_norm;\n\n#ifdef ENABLE_FRESNEL_MOD\n    float CalculateFresnel(vec3 cameraSpace_pos, vec3 normal)\n    {\n\n        vec3 nDirection = normalize(cameraSpace_pos);\n        vec3 nNormal = normalize(MOD_viewMatrix * normal);\n        vec3 halfDirection = normalize(nNormal + nDirection);\n\n        float cosine = dot(halfDirection, nDirection);\n        float product = max(cosine, 0.0);\n        float factor = pow(product, MOD_inFresnelExponent);\n\n        return 5. * factor;\n\n\n    }\n#endif\n",fresnel_head_vert:"#ifdef ENABLE_FRESNEL_MOD\n    OUT vec4 MOD_cameraSpace_pos;\n    OUT mat3 MOD_viewMatrix;\n    OUT vec3 MOD_norm;\n#endif"};const n=e.patch.cgl;const a=e.inTrigger("Trigger In");const r=e.inBool("Active",true);const o=e.inFloatSlider("R",Math.random());const i=e.inFloatSlider("G",Math.random());const s=e.inFloatSlider("B",Math.random());o.setUiAttribs({colorPick:true});e.setPortGroup("Color",[o,i,s]);const l=e.inFloat("Fresnel Intensity",1);const u=e.inFloat("Fresnel Exponent",2.5);e.setPortGroup("Fresnel Settings",[l,u]);r.onChange=()=>{m.toggleDefine("ENABLE_FRESNEL_MOD",r);o.setUiAttribs({greyout:!r.get()});i.setUiAttribs({greyout:!r.get()});s.setUiAttribs({greyout:!r.get()});l.setUiAttribs({greyout:!r.get()});u.setUiAttribs({greyout:!r.get()})};const c=e.outTrigger("Trigger Out");const m=new CGL.ShaderModifier(n,"fresnelGlow");m.toggleDefine("ENABLE_FRESNEL_MOD",r);m.addModule({priority:2,title:"fresnelGlow",name:"MODULE_VERTEX_POSITION",srcHeadVert:t.fresnel_head_vert,srcBodyVert:t.fresnel_body_vert});m.addModule({title:"fresnelGlow",name:"MODULE_COLOR",srcHeadFrag:t.fresnel_head_frag,srcBodyFrag:t.fresnel_body_frag});m.addUniform("4f","MOD_inFresnel",o,i,s,l);m.addUniform("f","MOD_inFresnelExponent",u);a.onTriggered=()=>{m.bind();c.trigger();m.unbind()}};Ops.Gl.ShaderEffects.FresnelGlow.prototype=new CABLES.Op;CABLES.OPS["89979937-68a6-4736-8241-3c6b748103d4"]={f:Ops.Gl.ShaderEffects.FresnelGlow,objName:"Ops.Gl.ShaderEffects.FresnelGlow"};Ops.Gl.ShaderEffects.VertexDisplacementMap_v4=function(){CABLES.Op.apply(this,arguments);const e=this;const t={vertdisplace_body_vert:"\nvec2 MOD_tc=texCoord;\n\n#ifdef MOD_COORD_MESHXY\n    MOD_tc=pos.xy;\n#endif\n#ifdef MOD_COORD_MESHXZ\n    MOD_tc=pos.xz;\n#endif\n\n\n#ifdef MOD_FLIP_Y\n    MOD_tc.y=1.0-MOD_tc.y;\n#endif\n#ifdef MOD_FLIP_X\n    MOD_tc.x=1.0-MOD_tc.x;\n#endif\n#ifdef MOD_FLIP_XY\n    MOD_tc=1.0-MOD_tc;\n#endif\n\nMOD_tc*=MOD_scale;\n\nvec4 MOD_sample=texture2D( MOD_texture, vec2(MOD_tc.x+MOD_offsetX,MOD_tc.y+MOD_offsetY) );\nvec3 MOD_disp;\n\n#ifdef MOD_INPUT_R\n    MOD_disp=vec3(MOD_sample.r);\n#endif\n#ifdef MOD_INPUT_G\n    MOD_disp=vec3(MOD_sample.g);\n#endif\n#ifdef MOD_INPUT_B\n    MOD_disp=vec3(MOD_sample.b);\n#endif\n#ifdef MOD_INPUT_A\n    MOD_disp=vec3(MOD_sample.a);\n#endif\n#ifdef MOD_INPUT_RGB\n    MOD_disp=MOD_sample.rgb;\n#endif\n#ifdef MOD_INPUT_LUMI\n    MOD_disp=vec3(dot(vec3(0.2126,0.7152,0.0722), MOD_sample.rgb));\n#endif\n\n\n\n#ifdef MOD_HEIGHTMAP_INVERT\n   MOD_disp=1.0-MOD_disp;\n#endif\n// #ifdef MOD_HEIGHTMAP_NORMALIZE\n//   MOD_disp-=0.5;\n//   MOD_disp*=2.0;\n// #endif\n\n\n#ifdef MOD_HEIGHTMAP_NORMALIZE\n    MOD_disp=(MOD_disp-0.5)*2.0;\n    // MOD_disp=(MOD_disp-0.5)*-1.0+0.5;\n#endif\n\n\nfloat MOD_zero=0.0;\n\n#ifdef MOD_MODE_DIV\n    MOD_zero=1.0;\n#endif\n#ifdef MOD_MODE_MUL\n    MOD_zero=1.0;\n#endif\n\n\n\nvec3 MOD_mask=vec3(1.0);\n\n#ifdef MOD_AXIS_X\n    MOD_mask=vec3(1.,0.,0.);\n    MOD_disp*=MOD_mask*MOD_extrude;\n#endif\n#ifdef MOD_AXIS_Y\n    MOD_mask=vec3(0.,1.,0.);\n    MOD_disp*=MOD_mask*MOD_extrude;\n#endif\n#ifdef MOD_AXIS_Z\n    MOD_mask=vec3(0.,0.,1.);\n    MOD_disp*=MOD_mask*MOD_extrude;\n#endif\n#ifdef MOD_AXIS_XY\n    MOD_mask=vec3(1.,1.,0.);\n    MOD_disp*=MOD_mask*MOD_extrude;\n#endif\n#ifdef MOD_AXIS_XYZ\n    MOD_mask=vec3(1.,1.,1.);\n    MOD_disp*=MOD_mask*MOD_extrude;\n#endif\n\n\n// MOD_disp=smoothstep(-1.,1.,MOD_disp*MOD_disp*MOD_disp);\n// MOD_disp=MOD_disp*MOD_disp*MOD_disp;\n\n// #ifdef MOD_FLIP_Y\n//     MOD_mask.y=1.0-MOD_mask.y;\n// #endif\n// #ifdef MOD_FLIP_X\n//     MOD_mask.x=1.0-MOD_mask.x;\n// #endif\n// #ifdef MOD_FLIP_XY\n//     MOD_mask.xy=1.0-MOD_mask.xy;\n// #endif\n\n\n\n#ifdef MOD_MODE_DIV\n    pos.xyz/=MOD_disp*MOD_mask;\n#endif\n\n#ifdef MOD_MODE_MUL\n    pos.xyz*=MOD_disp*MOD_mask;\n#endif\n\n#ifdef MOD_MODE_ADD\n    pos.xyz+=MOD_disp*MOD_mask;\n#endif\n\n#ifdef MOD_MODE_NORMAL\n\n    vec3 MOD_t=norm;\n    #ifdef MOD_SMOOTHSTEP\n        MOD_t=smoothstep(-1.,1.,MOD_t);\n    #endif\n\n    pos.xyz+=MOD_t*MOD_disp*MOD_mask;\n\n#endif\n\n#ifdef MOD_MODE_TANGENT\n    MOD_disp*=-1.0;\n\n    vec3 MOD_t=attrTangent;\n    #ifdef MOD_SMOOTHSTEP\n        MOD_t=smoothstep(-1.,1.,MOD_t);\n    #endif\n\n    pos.xyz+=MOD_t*MOD_disp*MOD_mask;\n\n#endif\n\n#ifdef MOD_MODE_BITANGENT\n    MOD_disp*=-1.0;\n    vec3 MOD_t=attrBiTangent;\n\n    #ifdef MOD_SMOOTHSTEP\n        MOD_t=smoothstep(-1.,1.,MOD_t);\n    #endif\n\n    pos.xyz+=MOD_t*MOD_disp*MOD_mask;\n\n#endif\n\n\n// pos.y*=-1.0;\n    // pos.xy+=vec2(MOD_texVal*MOD_extrude)*normalize(pos.xy);\n\n\nMOD_displHeightMapColor=MOD_disp;\n\n\n#ifdef CALC_NORMALS\n    norm+=MOD_calcNormal(MOD_texture,MOD_tc);\n#endif",vertdisplace_head_vert:"OUT vec3 MOD_displHeightMapColor;\n\n// mat4 rotationX( in float angle ) {\n// \treturn mat4(\t1.0,\t\t0,\t\t\t0,\t\t\t0,\n// \t\t\t \t\t0, \tcos(angle),\t-sin(angle),\t\t0,\n// \t\t\t\t\t0, \tsin(angle),\t cos(angle),\t\t0,\n// \t\t\t\t\t0, \t\t\t0,\t\t\t  0, \t\t1);\n// }\n\n// mat4 rotationY( in float angle ) {\n// \treturn mat4(\tcos(angle),\t\t0,\t\tsin(angle),\t0,\n// \t\t\t \t\t\t\t0,\t\t1.0,\t\t\t 0,\t0,\n// \t\t\t\t\t-sin(angle),\t0,\t\tcos(angle),\t0,\n// \t\t\t\t\t\t\t0, \t\t0,\t\t\t\t0,\t1);\n// }\n\n// mat4 rotationZ( in float angle ) {\n// \treturn mat4(\tcos(angle),\t\t-sin(angle),\t0,\t0,\n// \t\t\t \t\tsin(angle),\t\tcos(angle),\t\t0,\t0,\n// \t\t\t\t\t\t\t0,\t\t\t\t0,\t\t1,\t0,\n// \t\t\t\t\t\t\t0,\t\t\t\t0,\t\t0,\t1);\n// }\n\n\nvec3 MOD_calcNormal(sampler2D tex,vec2 uv)\n{\n    float strength=13.0;\n    float texelSize=1.0/512.0;\n\n    float tl = abs(texture(tex, uv + texelSize * vec2(-1.0, -1.0)).x);   // top left\n    float  l = abs(texture(tex, uv + texelSize * vec2(-1.0,  0.0)).x);   // left\n    float bl = abs(texture(tex, uv + texelSize * vec2(-1.0,  1.0)).x);   // bottom left\n    float  t = abs(texture(tex, uv + texelSize * vec2( 0.0, -1.0)).x);   // top\n    float  b = abs(texture(tex, uv + texelSize * vec2( 0.0,  1.0)).x);   // bottom\n    float tr = abs(texture(tex, uv + texelSize * vec2( 1.0, -1.0)).x);   // top right\n    float  r = abs(texture(tex, uv + texelSize * vec2( 1.0,  0.0)).x);   // right\n    float br = abs(texture(tex, uv + texelSize * vec2( 1.0,  1.0)).x);   // bottom right\n\n    //     // Compute dx using Sobel:\n    //     //           -1 0 1\n    //     //           -2 0 2\n    //     //           -1 0 1\n    float dX = tr + 2.0*r + br -tl - 2.0*l - bl;\n\n    //     // Compute dy using Sobel:\n    //     //           -1 -2 -1\n    //     //            0  0  0\n    //     //            1  2  1\n    float dY = bl + 2.0*b + br -tl - 2.0*t - tr;\n\n    //     // Build the normalized normal\n\n    vec3 N = normalize(vec3(dX,dY, 1.0 / strength));\n\n    //     //convert (-1.0 , 1.0) to (0.0 , 1.0), if needed\n    N= N * 0.5 + 0.5;\n\n   return N;\n}\n"};const n=e.inTrigger("Render"),a=e.inValue("Extrude",.5),r=e.inSwitch("Mode",["Norm","Tang","BiTang","*","+","/"],"Norm"),o=e.inSwitch("Axis",["XYZ","XY","X","Y","Z"],"XYZ"),i=e.inSwitch("Coordinates",["Tex Coords","Mesh XY","Mesh XZ"],"Tex Coords"),s=e.inTexture("Texture",null,"texture"),l=e.inSwitch("Channel",["Luminance","R","G","B","A","RGB"],"Luminance"),u=e.inSwitch("Flip",["None","X","Y","XY"],"None"),c=e.inSwitch("Range",["0-1","1-0","Normalized"],"0-1"),m=e.inValueFloat("Offset X"),_=e.inValueFloat("Offset Y"),d=e.inValueFloat("Scale",1),p=e.inValueBool("Calc Normals",false),v=e.inValueBool("Discard Zero Values"),f=e.inValueBool("colorize",false),g=e.inValueSlider("Colorize Min",0),h=e.inValueSlider("Colorize Max",1),b=e.outTrigger("trigger");const x=e.patch.cgl;e.setPortGroup("Input",[s,u,l,c,m,_,d]);e.setPortGroup("Colorize",[f,g,h]);e.toWorkPortsNeedToBeLinked(s,b,n);n.onTriggered=M;l.onChange=f.onChange=o.onChange=c.onChange=v.onChange=u.onChange=p.onChange=i.onChange=r.onChange=A;const O=t.vertdisplace_head_vert;const I=t.vertdisplace_body_vert;const T="".endl()+"IN vec3 MOD_displHeightMapColor;".endl()+"vec3 MOD_map(vec3 value, float inMin, float inMax, float outMin, float outMax) { return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);}".endl();const y="".endl()+"#ifdef MOD_HEIGHTMAP_COLORIZE".endl()+"   col.rgb*=MOD_map( MOD_displHeightMapColor, 0.0,1.0 , MOD_colorizeMin,MOD_colorizeMax);".endl()+"#endif".endl()+"#ifdef MOD_DISPLACE_REMOVE_ZERO".endl()+"   if(MOD_displHeightMapColor.r==0.0)discard;".endl()+"#endif".endl();const S=new CGL.ShaderModifier(x,e.name);S.addModule({title:e.name,name:"MODULE_VERTEX_POSITION",srcHeadVert:O,srcBodyVert:I});S.addModule({title:e.name,name:"MODULE_COLOR",srcHeadFrag:T,srcBodyFrag:y});S.addUniformVert("t","MOD_texture",0);S.addUniformVert("f","MOD_extrude",a);S.addUniformVert("f","MOD_offsetX",m);S.addUniformVert("f","MOD_offsetY",_);S.addUniformVert("f","MOD_scale",d);S.addUniformFrag("f","MOD_colorizeMin",g);S.addUniformFrag("f","MOD_colorizeMax",h);A();function A(){S.toggleDefine("MOD_HEIGHTMAP_COLORIZE",f.get());S.toggleDefine("MOD_HEIGHTMAP_INVERT",c.get()=="1-0");S.toggleDefine("MOD_HEIGHTMAP_NORMALIZE",c.get()=="Normalized");S.toggleDefine("MOD_DISPLACE_REMOVE_ZERO",v.get());S.toggleDefine("MOD_INPUT_R",l.get()=="R");S.toggleDefine("MOD_INPUT_G",l.get()=="G");S.toggleDefine("MOD_INPUT_B",l.get()=="B");S.toggleDefine("MOD_INPUT_A",l.get()=="A");S.toggleDefine("MOD_INPUT_RGB",l.get()=="RGB");S.toggleDefine("MOD_INPUT_LUMI",l.get()=="Luminance");S.toggleDefine("MOD_FLIP_X",u.get()=="X");S.toggleDefine("MOD_FLIP_Y",u.get()=="Y");S.toggleDefine("MOD_FLIP_XY",u.get()=="XY");S.toggleDefine("MOD_AXIS_X",o.get()=="X");S.toggleDefine("MOD_AXIS_Y",o.get()=="Y");S.toggleDefine("MOD_AXIS_Z",o.get()=="Z");S.toggleDefine("MOD_AXIS_XYZ",o.get()=="XYZ");S.toggleDefine("MOD_AXIS_XY",o.get()=="XY");S.toggleDefine("MOD_MODE_BITANGENT",r.get()=="BiTang");S.toggleDefine("MOD_MODE_TANGENT",r.get()=="Tang");S.toggleDefine("MOD_MODE_NORMAL",r.get()=="Norm");S.toggleDefine("MOD_MODE_MUL",r.get()=="*");S.toggleDefine("MOD_MODE_ADD",r.get()=="+");S.toggleDefine("MOD_MODE_DIV",r.get()=="/");S.toggleDefine("MOD_SMOOTHSTEP",0);S.toggleDefine("MOD_COORD_TC",i.get()=="Tex Coords");S.toggleDefine("MOD_COORD_MESHXY",i.get()=="Mesh XY");S.toggleDefine("MOD_COORD_MESHXZ",i.get()=="Mesh XZ");S.toggleDefine("CALC_NORMALS",p.get())}function M(){S.bind();if(s.get()&&s.get().deleted)console.log("deleted!!!");if(s.get()&&!s.get().deleted)S.pushTexture("MOD_texture",s.get());else S.pushTexture("MOD_texture",CGL.Texture.getEmptyTexture(x));b.trigger();S.unbind()}};Ops.Gl.ShaderEffects.VertexDisplacementMap_v4.prototype=new CABLES.Op;CABLES.OPS["ed36e5ad-457b-4ac6-a929-11b66951cb6c"]={f:Ops.Gl.ShaderEffects.VertexDisplacementMap_v4,objName:"Ops.Gl.ShaderEffects.VertexDisplacementMap_v4"};Ops.Gl.TextureEffects.EdgeDetection_v3=function(){CABLES.Op.apply(this,arguments);const e=this;const t={edgedetect_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI float amount;\nUNI float width;\nUNI float strength;\nUNI float texWidth;\nUNI float texHeight;\nUNI float mulColor;\n\nconst vec4 lumcoeff = vec4(0.299,0.587,0.114, 0.);\n\nvec3 desaturate(vec3 color)\n{\n    return vec3(dot(vec3(0.2126,0.7152,0.0722), color));\n}\n\n{{CGL.BLENDMODES}}\n\nvoid main()\n{\n    // vec4 col=vec4(1.0,0.0,0.0,1.0);\n\n    // float pixelX=0.27/texWidth;\n    // float pixelY=0.27/texHeight;\n    float pixelX=(width+0.01)*4.0/texWidth;\n    float pixelY=(width+0.01)*4.0/texHeight;\n\nvec2 tc=texCoord;\n// #ifdef OFFSETPIXEL\n    tc.x+=1.0/texWidth*0.5;\n    tc.y+=1.0/texHeight*0.5;\n// #endif\n    // col=texture(tex,texCoord);\n\n    float count=1.0;\n\n\tvec4 horizEdge = vec4( 0.0 );\n\thorizEdge -= texture( tex, vec2( tc.x - pixelX, tc.y - pixelY ) ) * 1.0;\n\thorizEdge -= texture( tex, vec2( tc.x - pixelX, tc.y     ) ) * 2.0;\n\thorizEdge -= texture( tex, vec2( tc.x - pixelX, tc.y + pixelY ) ) * 1.0;\n\thorizEdge += texture( tex, vec2( tc.x + pixelX, tc.y - pixelY ) ) * 1.0;\n\thorizEdge += texture( tex, vec2( tc.x + pixelX, tc.y     ) ) * 2.0;\n\thorizEdge += texture( tex, vec2( tc.x + pixelX, tc.y + pixelY ) ) * 1.0;\n\tvec4 vertEdge = vec4( 0.0 );\n\tvertEdge -= texture( tex, vec2( tc.x - pixelX, tc.y - pixelY ) ) * 1.0;\n\tvertEdge -= texture( tex, vec2( tc.x    , tc.y - pixelY ) ) * 2.0;\n\tvertEdge -= texture( tex, vec2( tc.x + pixelX, tc.y - pixelY ) ) * 1.0;\n\tvertEdge += texture( tex, vec2( tc.x - pixelX, tc.y + pixelY ) ) * 1.0;\n\tvertEdge += texture( tex, vec2( tc.x    , tc.y + pixelY ) ) * 2.0;\n\tvertEdge += texture( tex, vec2( tc.x + pixelX, tc.y + pixelY ) ) * 1.0;\n\n\n\tvec3 edge = sqrt((horizEdge.rgb/count * horizEdge.rgb/count) + (vertEdge.rgb/count * vertEdge.rgb/count));\n\n    edge=desaturate(edge);\n    edge*=strength;\n\n    if(mulColor>0.0) edge*=texture( tex, texCoord ).rgb*mulColor*4.0;\n    edge=max(min(edge,1.0),0.0);\n\n    //blend section\n    vec4 col=vec4(edge,1.0);\n    vec4 base=texture(tex,texCoord);\n\n    outColor=cgl_blend(base,col,amount);\n}\n\n"};const n=e.inTrigger("Render"),a=CGL.TextureEffect.AddBlendSelect(e,"Blend Mode","normal"),r=e.inValueSlider("Amount",1),o=e.inFloat("Strength",4),i=e.inValueSlider("Width",.1),s=e.inValueSlider("Mul Color",0),l=e.outTrigger("Trigger");const u=e.patch.cgl;const c=new CGL.Shader(u,e.name);c.setSource(c.getDefaultVertexShader(),t.edgedetect_frag);const m=new CGL.Uniform(c,"t","tex",0),_=new CGL.Uniform(c,"f","amount",r),d=new CGL.Uniform(c,"f","strength",o),p=new CGL.Uniform(c,"f","width",i),v=new CGL.Uniform(c,"f","texWidth",128),f=new CGL.Uniform(c,"f","texHeight",128),g=new CGL.Uniform(c,"f","mulColor",s);CGL.TextureEffect.setupBlending(e,c,a,r);n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;u.pushShader(c);u.currentTextureEffect.bind();u.setTexture(0,u.currentTextureEffect.getCurrentSourceTexture().tex);v.setValue(u.currentTextureEffect.getCurrentSourceTexture().width);f.setValue(u.currentTextureEffect.getCurrentSourceTexture().height);u.currentTextureEffect.finish();u.popShader();l.trigger()}};Ops.Gl.TextureEffects.EdgeDetection_v3.prototype=new CABLES.Op;CABLES.OPS["3cdc351c-8d6e-4d3d-8da0-0777a6062c0d"]={f:Ops.Gl.TextureEffects.EdgeDetection_v3,objName:"Ops.Gl.TextureEffects.EdgeDetection_v3"};Ops.Gl.TextureEffects.MultiDrawImage=function(){CABLES.Op.apply(this,arguments);const n=this;const t={invert_frag:"IN vec2 texCoord;\nUNI sampler2D tex;\nUNI sampler2D tex1;\nUNI sampler2D tex2;\nUNI sampler2D tex3;\nUNI sampler2D tex4;\nUNI sampler2D tex5;\nUNI sampler2D tex6;\nUNI sampler2D tex7;\nUNI sampler2D tex8;\n\n\nUNI sampler2D texMask1;\nUNI sampler2D texMask2;\nUNI sampler2D texMask3;\nUNI sampler2D texMask4;\nUNI sampler2D texMask5;\nUNI sampler2D texMask6;\nUNI sampler2D texMask7;\nUNI sampler2D texMask8;\n\nUNI float amount1;\nUNI float amount2;\nUNI float amount3;\nUNI float amount4;\nUNI float amount5;\nUNI float amount6;\nUNI float amount7;\nUNI float amount8;\n\n{{BLENDCODE}}\n\nvoid main()\n{\n    vec4 col=texture(tex,texCoord);\n\n\n    #ifdef USE_TEX_1\n        vec4 col1=texture(tex1,texCoord);\n        col=cgl_blend1(col,col1,amount1);\n    #endif\n    #ifdef USE_TEX_2\n        vec4 col2=texture(tex2,texCoord);\n        col=cgl_blend2(col,col2,amount2);\n    #endif\n    #ifdef USE_TEX_3\n        vec4 col3=texture(tex3,texCoord);\n        col=cgl_blend3(col,col3,amount3);\n    #endif\n    #ifdef USE_TEX_4\n        vec4 col4=texture(tex4,texCoord);\n        col=cgl_blend4(col,col4,amount4);\n    #endif\n    #ifdef USE_TEX_5\n        vec4 col5=texture(tex5,texCoord);\n        col=cgl_blend5(col,col5,amount5);\n    #endif\n    #ifdef USE_TEX_6\n        vec4 col6=texture(tex6,texCoord);\n        col=cgl_blend6(col,col6,amount6);\n    #endif\n    #ifdef USE_TEX_7\n        vec4 col7=texture(tex7,texCoord);\n        col=cgl_blend7(col,col7,amount7);\n    #endif\n    #ifdef USE_TEX_8\n        vec4 col8=texture(tex8,texCoord);\n        col=cgl_blend8(col,col8,amount8);\n    #endif\n\n    outColor=col;\n\n}\n"};const a=["normal","lighten","darken","multiply","multiply invert","average","add","substract","difference","negation","exclusion","overlay","screen","color dodge","color burn","softlight","hardlight"];const e=n.inTrigger("render"),r=n.inBool("Mask Invert",false),o=n.outTrigger("trigger");const i=8,s=n.patch.cgl,l=new CGL.Shader(s,n.name),u=[],c=[],m=[],_=[],d=[],p=[];let v=true;for(let e=0;e<i;e++){const b=n.inTexture("Texture "+(e+1));const x=n.inDropDown("Blendmode "+(e+1),a,"normal");const O=n.inTexture("Mask "+(e+1));const I=n.inSwitch("Mask Source "+(e+1),["R","R inv","A","A inv"],"R");const T=n.inSwitch("Opacity "+(e+1),["Normal","Prev A","Prev R"],"Normal");const y=n.inValueSlider("Amount "+(e+1),1);x.onChange=T.onChange=I.onChange=O.onLinkChanged=b.onLinkChanged=()=>{v=true};p.push(b);_.push(O);m.push(T);c.push(x);u.push(y);d.push(I);n.setPortGroup("Image "+(e+1),[b,x,y,T,O,I]);new CGL.Uniform(l,"t","tex"+(e+1),e*2+1);new CGL.Uniform(l,"t","texMask"+(e+1),e*2+2);new CGL.Uniform(l,"f","amount"+(e+1),y)}const f=new CGL.Uniform(l,"t","tex",0);function g(){let n="";let a="";for(let t=0;t<i;t++){let e=p[t].isLinked();u[t].setUiAttribs({greyout:!e});c[t].setUiAttribs({greyout:!e});m[t].setUiAttribs({greyout:!e});if(e){n+="#define USE_TEX_"+(t+1)+"".endl();a+=h(t+1,c[t].get(),m[t].get(),_[t].get(),d[t].get())}}let e=n.endl()+t.invert_frag;e=e.replace("{{BLENDCODE}}",a);l.setSource(l.getDefaultVertexShader(),e);v=false}function h(e,t,n,a,r){let o=""+"vec3 _blend"+e+"(vec3 base,vec3 blend)".endl()+"{".endl()+"   vec3 colNew=blend;".endl();if(t=="multiply")o+="       colNew=base*blend;".endl();else if(t=="multiply invert")o+="       colNew=base* vec3(1.0)-blend;".endl();else if(t=="average")o+="       colNew=((base + blend) / 2.0);".endl();else if(t=="add")o+="       colNew=min(base + blend, vec3(1.0));".endl();else if(t=="substract")o+="       colNew=max(base + blend - vec3(1.0), vec3(0.0));".endl();else if(t=="difference")o+="       colNew=abs(base - blend);".endl();else if(t=="negation")o+="       colNew=(vec3(1.0) - abs(vec3(1.0) - base - blend));".endl();else if(t=="exclusion")o+="       colNew=(base + blend - 2.0 * base * blend);".endl();else if(t=="lighten")o+="       colNew=max(blend, base);".endl();else if(t=="darken")o+="       colNew=min(blend, base);".endl();else if(t=="overlay"){o+=""+"      #define BlendOverlayf(base, blend)  (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)))".endl()+"      colNew=vec3(BlendOverlayf(base.r, blend.r),BlendOverlayf(base.g, blend.g),BlendOverlayf(base.b, blend.b));".endl()}else if(t=="screen"){o+=""+"      #define BlendScreenf(base, blend)       (1.0 - ((1.0 - base) * (1.0 - blend)))".endl()+"      colNew=vec3(BlendScreenf(base.r, blend.r),BlendScreenf(base.g, blend.g),BlendScreenf(base.b, blend.b));".endl()}else if(t=="softlight"){o+=""+"      #define BlendSoftLightf(base, blend)    ((blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend)))".endl()+"      colNew=vec3(BlendSoftLightf(base.r, blend.r),BlendSoftLightf(base.g, blend.g),BlendSoftLightf(base.b, blend.b));".endl()}else if(t=="hardlight"){o+=""+"      #define BlendOverlayf(base, blend)  (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)))".endl()+"      colNew=vec3(BlendOverlayf(base.r, blend.r),BlendOverlayf(base.g, blend.g),BlendOverlayf(base.b, blend.b));".endl()}else if(t=="color dodge"){o+=""+"      #define BlendColorDodgef(base, blend)   ((blend == 1.0) ? blend : min(base / (1.0 - blend), 1.0))".endl()+"      colNew=vec3(BlendColorDodgef(base.r, blend.r),BlendColorDodgef(base.g, blend.g),BlendColorDodgef(base.b, blend.b));".endl()}else if(t=="color burn"){o+=""+"      #define BlendColorBurnf(base, blend)    ((blend == 0.0) ? blend : max((1.0 - ((1.0 - base) / blend)), 0.0))".endl()+"      colNew=vec3(BlendColorBurnf(base.r, blend.r),BlendColorBurnf(base.g, blend.g),BlendColorBurnf(base.b, blend.b));".endl()}o+=""+"   return colNew;".endl()+"}".endl()+"vec4 cgl_blend"+e+"(vec4 oldColor,vec4 newColor,float amount)".endl()+"{".endl()+"float a=(amount*newColor.a);".endl();if(n==="Prev A")o+="a*=oldColor.a;";if(n==="Prev R")o+="a*=oldColor.r;";o=o+"vec4 col = vec4( _blend"+e+"(oldColor.rgb, newColor.rgb), 1.0);".endl()+"col = vec4( mix( col.rgb,oldColor.rgb, col.a * 1.0-amount), 1.0);".endl();if(a)if(r==="R")o=o+"newColor.a *= texture(texMask"+e+",texCoord).r;".endl();else if(r==="R inv")o=o+"newColor.a *= 1.0-texture(texMask"+e+",texCoord).r;".endl();else if(r==="A")o=o+"newColor.a *= texture(texMask"+e+",texCoord).a;".endl();else if(r==="A inv")o=o+"newColor.a *= 1.0-texture(texMask"+e+",texCoord).a;".endl();o=o+"col = vec4( mix( oldColor,col, newColor.a));".endl()+"return col;".endl()+"}".endl().endl();return o}e.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(n))return;if(v)g();s.pushShader(l);s.currentTextureEffect.bind();s.setTexture(0,s.currentTextureEffect.getCurrentSourceTexture().tex);let t=1;for(let e=0;e<p.length;e++){if(p[e].get()){s.setTexture(e*2+1,p[e].get().tex);t++}if(_[e].get()){s.setTexture(e*2+2,_[e].get().tex);t++}}if(t>s.maxTextureUnits)n.setUiError("manytex","Too many textures bound");else n.setUiError("manytex",null);s.pushBlendMode(CGL.BLEND_NONE,true);s.currentTextureEffect.finish();s.popBlendMode();s.popShader();o.trigger()}};Ops.Gl.TextureEffects.MultiDrawImage.prototype=new CABLES.Op;CABLES.OPS["4df51ead-c46c-471d-ac5e-1872219a3174"]={f:Ops.Gl.TextureEffects.MultiDrawImage,objName:"Ops.Gl.TextureEffects.MultiDrawImage"};Ops.Gl.ColorMask=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("Execute"),a=e.inValueBool("Red",true),r=e.inValueBool("Green",true),o=e.inValueBool("Blue",true),i=e.inValueBool("Alpha",true),s=e.outTrigger("Next");const l=e.patch.cgl;n.onTriggered=function(){l.gl.colorMask(a.get(),r.get(),o.get(),i.get());s.trigger();e.patch.cgl.gl.colorMask(true,true,true,true)}};Ops.Gl.ColorMask.prototype=new CABLES.Op;CABLES.OPS["44433419-dcf4-46e6-8f40-d331598029ac"]={f:Ops.Gl.ColorMask,objName:"Ops.Gl.ColorMask"};Ops.Gl.MeshMorph=function(){CABLES.Op.apply(this,arguments);const r=this;const e={};const o=16,t=r.inTrigger("render"),n=r.inSwitch("Method",["Auto Anim","Interpolate Index","Interpolate Indices"],"Auto Anim"),i=r.inValueInt("Geometry"),s=r.inValue("Duration",1),l=r.inFloat("Index",0),u=r.inFloat("Index 2",0),c=r.inFloatSlider("Fade",0),m=r.outValue("Finished"),a=r.outTrigger("trigger");const _=r.patch.cgl;const d=[];let p=null;let v=true;let f=false;let g=false;let h=false;let b=0;const x=new CABLES.Anim;x.clear();const O=x.createPort(r,"Easing",E);window.meshsequencecounter=window.meshsequencecounter||1;window.meshsequencecounter++;const I=String.fromCharCode(97+window.meshsequencecounter);const T="".endl()+"IN vec3 "+I+"attrMorphTargetA;".endl()+"IN vec3 "+I+"attrMorphTargetB;".endl();const y="".endl()+"  pos = vec4("+I+"attrMorphTargetA * MOD_fade + "+I+"attrMorphTargetB * (1.0 - MOD_fade), 1. );".endl();const S=new CGL.ShaderModifier(_,r.name);S.addUniform("f","MOD_fade",1);S.addUniform("f","MOD_doMorph",1);S.addModule({title:r.objName,name:"MODULE_VERTEX_POSITION",srcHeadVert:T,srcBodyVert:y});u.onChange=l.onChange=i.onChange=E;t.onTriggered=N;n.onChange=A;A();for(let e=0;e<o;e++){const P=r.inObject("Geometry "+e);P.onChange=C;d.push(P)}function A(){g=n.get()=="Interpolate Index";v=n.get()=="Auto Anim";h=n.get()=="Interpolate Indices";s.setUiAttribs({greyout:!v});i.setUiAttribs({greyout:!(v||f)});l.setUiAttribs({greyout:!(g||h)});u.setUiAttribs({greyout:!h});u.setUiAttribs({greyout:!h});O.setUiAttribs({greyout:!v});c.setUiAttribs({greyout:!(f||h)})}function M(){r.setUiError("nosamelength",null);let t=0;for(let e=0;e<d.length;e++){const n=d[e].get();if(n&&n._vertices){if(t!=0&&t!=n._vertices.length)r.setUiError("nosamelength","Geometries must have the same number of vertices!",1);t=n._vertices.length}}}function C(){M();if(p)return;for(let e=0;e<d.length;e++){const t=d[e].get();if(t&&t._vertices){if(e===0){p=new CGL.Mesh(_,t);p.addAttribute(I+"attrMorphTargetA",t._vertices,3);p.addAttribute(I+"attrMorphTargetB",t._vertices,3);E()}}}}function E(){let n;let a;if(v||f){let e=i.get();if(e<0)e=0;else if(e>=o)e=o;let t=0;if(b===e)return;x.clear();x.setValue(r.patch.freeTimer.get(),0);x.setValue(r.patch.freeTimer.get()+s.get(),1,function(){b=e;m.set(true)});m.set(false);n=d[b].get();a=d[e].get();if(f){if(c.get()!=0)a=d[b].get();if(c.get()==1)n=d[e].get();b=e}}if(h){const e=Math.max(Math.floor(l.get()),0);const t=Math.min(Math.ceil(u.get()),o);if(d[t])n=d[t].get();else n=null;if(d[e])a=d[e].get();else a=null}if(g){const t=Math.max(Math.floor(l.get()),0);const e=Math.min(Math.ceil(l.get()),o);if(d[t])n=d[t].get();else n=null;if(d[e])a=d[e].get();else a=null}if(p&&n&&a&&n._vertices&&a._vertices){p.updateAttribute(I+"attrMorphTargetB",n._vertices);p.updateAttribute(I+"attrMorphTargetA",a._vertices);if(n==a)console.log("both same")}}function N(){if(v)S.setUniformValue("MOD_fade",x.getValue(r.patch.freeTimer.get()));else if(g){let e=l.get()%1;S.setUniformValue("MOD_fade",e)}else if(f)S.setUniformValue("MOD_fade",c.get());else if(h)S.setUniformValue("MOD_fade",c.get());if(p){S.bind();p.render(_.getShader());a.trigger();S.unbind()}}};Ops.Gl.MeshMorph.prototype=new CABLES.Op;CABLES.OPS["41bc544e-a0c9-450b-b657-405d80b1298c"]={f:Ops.Gl.MeshMorph,objName:"Ops.Gl.MeshMorph"};Ops.Gl.Geometry.ScaleGeometry=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};let n=e.inObject("Geometry");let s=e.inValue("Scale",1);let l=e.outObject("Result");s.onChange=n.onChange=a;function a(){let i=n.get();if(i){let t=i.copy();let e=vec3.create();let n=vec3.create();let a=vec3.create();let r=vec3.create();let o=s.get();for(let e=0;e<t.vertices.length;e+=3){t.vertices[e+0]*=o;t.vertices[e+1]*=o;t.vertices[e+2]*=o}l.set(t)}else l.set(null)}};Ops.Gl.Geometry.ScaleGeometry.prototype=new CABLES.Op;CABLES.OPS["7730e67b-5916-4481-bcd1-54fa6e3a1d02"]={f:Ops.Gl.Geometry.ScaleGeometry,objName:"Ops.Gl.Geometry.ScaleGeometry"};Ops.Trigger.TriggerIfDecreased=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};var n=e.inValue("Value");var a=e.outTrigger("Trigger");var r=-Number.MAX_VALUE;n.onChange=function(){var e=n.get();if(e<r){a.trigger()}r=e}};Ops.Trigger.TriggerIfDecreased.prototype=new CABLES.Op;CABLES.OPS["16ec4069-3682-461e-95ff-1d86e3f44512"]={f:Ops.Trigger.TriggerIfDecreased,objName:"Ops.Trigger.TriggerIfDecreased"};Ops.Boolean.TriggerBoolean=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};var n=e.inTriggerButton("True");var a=e.inTriggerButton("false");var r=e.outValueBool("Result");n.onTriggered=function(){r.set(true)};a.onTriggered=function(){r.set(false)}};Ops.Boolean.TriggerBoolean.prototype=new CABLES.Op;CABLES.OPS["31f65abe-9d6c-4ba6-a291-ef2de41d2087"]={f:Ops.Boolean.TriggerBoolean,objName:"Ops.Boolean.TriggerBoolean"};Ops.Trigger.TriggerCounterLoop=function(){CABLES.Op.apply(this,arguments);const n=this;const e={};const t=n.inTriggerButton("trigger in"),a=n.inTriggerButton("reset"),r=n.outTrigger("trigger out"),o=n.outValue("current count"),i=n.inValueInt("Loop min",0),s=n.inValueInt("Loop max",4);let l=Math.floor(i.get());t.onTriggered=function(){let e=Math.floor(i.get());let t=Math.floor(s.get());if(e<t){if(l<e){l=i.get()}else if(l>=t){l=i.get()}else{l++}}else if(e>t){if(l<t){l=e}else if(l>e){e}else if(l<=t){l=e}else{l--}}o.set(l);n.setUiAttrib({extendTitle:l});r.trigger()};a.onTriggered=function(){let e=Math.floor(i.get());let t=Math.floor(s.get());if(e<t){l=e}else if(t<e){l=e}else{l=0}n.setUiAttrib({extendTitle:l});o.set(l)}};Ops.Trigger.TriggerCounterLoop.prototype=new CABLES.Op;CABLES.OPS["d3356c53-e278-433f-af0b-d8327cd99a2d"]={f:Ops.Trigger.TriggerCounterLoop,objName:"Ops.Trigger.TriggerCounterLoop"};Ops.Gl.TextureEffects.FastBlur=function(){CABLES.Op.apply(this,arguments);const e=this;const t={blur_frag:"\nUNI sampler2D tex;\n#ifdef USE_MASK\n    UNI sampler2D texMask;\n#endif\nUNI float amount;\nUNI float pass;\n\nIN vec2 texCoord;\n\nUNI float dirX;\nUNI float dirY;\nUNI float width;\nUNI float height;\n\nIN vec2 coord0;\nIN vec2 coord1;\nIN vec2 coord2;\nIN vec2 coord3;\nIN vec2 coord4;\nIN vec2 coord5;\nIN vec2 coord6;\n\n#ifdef HAS_MASK\n    UNI sampler2D imageMask;\n#endif\n\nvoid main()\n{\n    vec4 color = vec4(0.0);\n\n    #ifdef USE_MASK\n        #ifdef MASK_INVERT\n            if(texture(texMask,texCoord).r<0.5)\n            {\n                outColor= texture(tex, texCoord);\n                return;\n            }\n        #endif\n\n        #ifndef MASK_INVERT\n            if(texture(texMask,texCoord).r>0.5)\n            {\n                outColor= texture(tex, texCoord);\n                return;\n            }\n        #endif\n    #endif\n\n    color += texture(tex, coord0) * 0.06927096443792478;\n    color += texture(tex, coord1) * 0.1383328848652136;\n    color += texture(tex, coord2) * 0.21920904690397863;\n    color += texture(tex, coord3) * 0.14637421;\n    color += texture(tex, coord4) * 0.21920904690397863;\n    color += texture(tex, coord5) * 0.1383328848652136;\n    color += texture(tex, coord6) * 0.06927096443795711;\n\n    color.a=1.0;\n    outColor= color;\n}",blur_vert:"\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nOUT vec2 texCoord;\nOUT vec3 norm;\nUNI mat4 projMatrix;\nUNI mat4 mvMatrix;\nUNI mat4 modelMatrix;\n\nUNI float pass;\nUNI float dirX;\nUNI float dirY;\nUNI float width;\nUNI float height;\n\nOUT vec2 coord0;\nOUT vec2 coord1;\nOUT vec2 coord2;\nOUT vec2 coord3;\nOUT vec2 coord4;\nOUT vec2 coord5;\nOUT vec2 coord6;\n\n// http://dev.theomader.com/gaussian-kernel-calculator/\n// http://rastergrid.com/blog/2010/09/efficient-gaussian-blur-with-linear-sampling/\n\n\nvoid main()\n{\n    texCoord=attrTexCoord;\n    norm=attrVertNormal;\n    vec4 pos=vec4(vPosition,  1.0);\n    {{MODULE_VERTEX_POSITION}}\n\n    vec2 dir=vec2(dirX,dirY);\n    vec2 res=vec2( (1.) / width , (1.) / height )*dir;\n\n    coord3= attrTexCoord;\n\n    coord0= attrTexCoord + (-3.0368997744118595 * res);\n    coord1= attrTexCoord + (-2.089778445362373 * res);\n    coord2= attrTexCoord + (-1.2004366090034069 * res);\n    coord4= attrTexCoord + (1.2004366090034069 * res);\n    coord5= attrTexCoord + (2.089778445362373* res);\n    coord6= attrTexCoord + (3.0368997744118595 * res);\n\n    #ifdef CLAMP\n        coord0=clamp(coord0,0.0,1.0);\n        coord1=clamp(coord1,0.0,1.0);\n        coord2=clamp(coord2,0.0,1.0);\n        coord3=clamp(coord3,0.0,1.0);\n        coord4=clamp(coord4,0.0,1.0);\n        coord5=clamp(coord5,0.0,1.0);\n        coord6=clamp(coord6,0.0,1.0);\n    #endif\n\n    gl_Position = projMatrix * mvMatrix * pos;\n}\n"};const n=e.inTrigger("render"),a=e.outTrigger("trigger"),r=e.inFloat("amount",3),o=e.inBool("Clamp",false),i=e.inBool("Mask Invert",false),s=e.inTexture("Mask");const l=e.patch.cgl;const u=new CGL.Shader(l,"fastblur");u.setSource(t.blur_vert,t.blur_frag);const c=new CGL.Uniform(u,"t","tex",0),m=new CGL.Uniform(u,"f","dirX",0),_=new CGL.Uniform(u,"f","dirY",0),d=new CGL.Uniform(u,"f","width",0),p=new CGL.Uniform(u,"f","height",0),v=new CGL.Uniform(u,"f","pass",0),f=new CGL.Uniform(u,"f","amount",r.get()),g=new CGL.Uniform(u,"t","texMask",1);r.onChange=()=>{f.setValue(r.get())};const h=e.inDropDown("direction",["both","vertical","horizontal"]);let b=0;h.set("both");h.onChange=()=>{if(h.get()=="both")b=0;if(h.get()=="horizontal")b=1;if(h.get()=="vertical")b=2};o.onChange=()=>{u.toggleDefine("CLAMP",o.get())};i.onChange=s.onChange=()=>{u.toggleDefine("USE_MASK",s.isLinked());u.toggleDefine("MASK_INVERT",i.get())};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;d.setValue(l.currentTextureEffect.getCurrentSourceTexture().width);p.setValue(l.currentTextureEffect.getCurrentSourceTexture().height);const t=r.get();if(s.get())l.setTexture(1,s.get().tex);for(let e=0;e<t;e++){l.pushShader(u);v.setValue(e/t);if(b===0||b==2){l.currentTextureEffect.bind();l.setTexture(0,l.currentTextureEffect.getCurrentSourceTexture().tex);m.setValue(0);_.setValue(1+e*e);l.currentTextureEffect.finish()}if(b===0||b==1){l.currentTextureEffect.bind();l.setTexture(0,l.currentTextureEffect.getCurrentSourceTexture().tex);m.setValue(1+e*e);_.setValue(0);l.currentTextureEffect.finish()}l.popShader()}a.trigger()}};Ops.Gl.TextureEffects.FastBlur.prototype=new CABLES.Op;CABLES.OPS["720ca148-dcf7-433b-bb1f-edbfb7433c6c"]={f:Ops.Gl.TextureEffects.FastBlur,objName:"Ops.Gl.TextureEffects.FastBlur"};Ops.Gl.TextureEffects.Hue=function(){CABLES.Op.apply(this,arguments);const e=this;const t={hue_frag:"UNI float hue;\n\n#ifdef HAS_TEXTURES\n  IN vec2 texCoord;\n  UNI sampler2D tex;\n#endif\n\n#ifdef TEX_MASK\n    UNI sampler2D texMask;\n#endif\n#ifdef TEX_OFFSET\n    UNI sampler2D texOffset;\n#endif\n\nvec3 rgb2hsv(vec3 c)\n{\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid main()\n{\n   vec4 col=vec4(1.0,0.0,0.0,1.0);\n    #ifdef HAS_TEXTURES\n        col=texture(tex,texCoord);\n        float h=hue;\n\n        #ifdef TEX_OFFSET\n            h += texture(texOffset,texCoord).r;\n        #endif\n\n\n        vec3 hsv = rgb2hsv(col.rgb);\n        hsv.x=hsv.x+h;\n\n        #ifndef TEX_MASK\n            col.rgb = hsv2rgb(hsv);\n        #endif\n\n        #ifdef TEX_MASK\n            col.rgb = mix(col.rgb,hsv2rgb(hsv),texture(texMask,texCoord).r);\n        #endif\n\n   #endif\n   outColor= col;\n}"};const n=e.inTrigger("render"),a=e.inValueSlider("hue",1),r=e.inTexture("Mask"),o=e.inTexture("Offset"),i=e.outTrigger("trigger");const s=e.patch.cgl;const l=new CGL.Shader(s,e.name);l.setSource(l.getDefaultVertexShader(),t.hue_frag);const u=new CGL.Uniform(l,"t","tex",0);const c=new CGL.Uniform(l,"t","texMask",1);const m=new CGL.Uniform(l,"t","texOffset",2);const _=new CGL.Uniform(l,"f","hue",1);a.onChange=function(){_.setValue(a.get())};r.onChange=o.onChange=()=>{l.toggleDefine("TEX_MASK",r.get());l.toggleDefine("TEX_OFFSET",o.get())};n.onTriggered=function(){if(!CGL.TextureEffect.checkOpInEffect(e))return;s.pushShader(l);s.currentTextureEffect.bind();s.setTexture(0,s.currentTextureEffect.getCurrentSourceTexture().tex);if(r.get())s.setTexture(1,r.get().tex);if(o.get())s.setTexture(2,o.get().tex);s.currentTextureEffect.finish();s.popShader();i.trigger()}};Ops.Gl.TextureEffects.Hue.prototype=new CABLES.Op;CABLES.OPS["94ef0da0-c920-415c-81b0-fecbd437991d"]={f:Ops.Gl.TextureEffects.Hue,objName:"Ops.Gl.TextureEffects.Hue"};Ops.Boolean.IfTrueThen_v2=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.inTrigger("exe"),a=e.inValueBool("boolean",false),r=e.outTrigger("then"),o=e.outTrigger("else");n.onTriggered=i;function i(){if(a.get())r.trigger();else o.trigger()}};Ops.Boolean.IfTrueThen_v2.prototype=new CABLES.Op;CABLES.OPS["9549e2ed-a544-4d33-a672-05c7854ccf5d"]={f:Ops.Boolean.IfTrueThen_v2,objName:"Ops.Boolean.IfTrueThen_v2"};Ops.TimeLine.TimeLineTime=function(){CABLES.Op.apply(this,arguments);const e=this;const t={};const n=e.outValue("time");e.onAnimFrame=function(e){n.set(e)}};Ops.TimeLine.TimeLineTime.prototype=new CABLES.Op;CABLES.OPS["3ab26f26-a12a-4c48-9411-20591a5f569d"]={f:Ops.TimeLine.TimeLineTime,objName:"Ops.TimeLine.TimeLineTime"};Ops.Gl.Textures.SwitchTextures_v2=function(){CABLES.Op.apply(this,arguments);const t=this;const e={};const n=t.inTrigger("exec"),a=this.inValueInt("num"),r=t.inValueBool("Default Texture Transparent",true),o=t.outTrigger("Next"),i=this.outTexture("texture");const s=t.patch.cgl;const l=[];let u=0;let c=-1;let m=CGL.Texture.getEmptyTexture(s);t.toWorkPortsNeedToBeLinked(n);n.onTriggered=function(){d();o.trigger()};r.onChange=function(){if(r.get())m=CGL.Texture.getEmptyTexture(s);else m=CGL.Texture.getTempTexture(s);d(true)};for(let e=0;e<16;e++){const p=t.inTexture("texture"+e);l.push(p);p.onChange=_}function _(){d(true)}function d(e){u=parseInt(a.get(),10);if(!e){if(u==c)return;if(u!=u)return}if(isNaN(u)||u<0||u>l.length-1)u=0;if(l[u].get())i.set(l[u].get());else i.set(m);c=u}};Ops.Gl.Textures.SwitchTextures_v2.prototype=new CABLES.Op;CABLES.OPS["a82ae429-ac07-4760-882b-595a857c7ae0"]={f:Ops.Gl.Textures.SwitchTextures_v2,objName:"Ops.Gl.Textures.SwitchTextures_v2"};window.addEventListener("load",function(e){CABLES.jsLoaded=new Event("CABLES.jsLoaded");document.dispatchEvent(CABLES.jsLoaded)});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.moment=t()})(this,function(){"use strict";var t;function u(){return t.apply(null,arguments)}function e(e){t=e}function i(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function s(e){return Object.prototype.toString.call(e)==="[object Object]"}function l(e){var t;for(t in e){return false}return true}function r(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function n(e,t){var n=[],a;for(a=0;a<e.length;++a){n.push(t(e[a],a))}return n}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e,t){for(var n in t){if(c(t,n)){e[n]=t[n]}}if(c(t,"toString")){e.toString=t.toString}if(c(t,"valueOf")){e.valueOf=t.valueOf}return e}function _(e,t,n,a){return Dn(e,t,n,a,true).utc()}function a(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],meridiem:null}}function d(e){if(e._pf==null){e._pf=a()}return e._pf}var o;if(Array.prototype.some){o=Array.prototype.some}else{o=function(e){var t=Object(this);var n=t.length>>>0;for(var a=0;a<n;a++){if(a in t&&e.call(this,t[a],a,t)){return true}}return false}}function p(e){if(e._isValid==null){var t=d(e);var n=o.call(t.parsedDateParts,function(e){return e!=null});e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict){e._isValid=e._isValid&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}}return e._isValid}function v(e){var t=_(NaN);if(e!=null){m(d(t),e)}else{d(t).userInvalidated=true}return t}function f(e){return e===void 0}var g=u.momentProperties=[];function h(e,t){var n,a,r;if(!f(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!f(t._i)){e._i=t._i}if(!f(t._f)){e._f=t._f}if(!f(t._l)){e._l=t._l}if(!f(t._strict)){e._strict=t._strict}if(!f(t._tzm)){e._tzm=t._tzm}if(!f(t._isUTC)){e._isUTC=t._isUTC}if(!f(t._offset)){e._offset=t._offset}if(!f(t._pf)){e._pf=d(t)}if(!f(t._locale)){e._locale=t._locale}if(g.length>0){for(n in g){a=g[n];r=t[a];if(!f(r)){e[a]=r}}}return e}var b=false;function x(e){h(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(b===false){b=true;u.updateOffset(this);b=false}}function O(e){return e instanceof x||e!=null&&e._isAMomentObject!=null}function I(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function T(e){var t=+e,n=0;if(t!==0&&isFinite(t)){n=I(t)}return n}function y(e,t,n){var a=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0,i;for(i=0;i<a;i++){if(n&&e[i]!==t[i]||!n&&T(e[i])!==T(t[i])){o++}}return o+r}function S(e){if(u.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function A(e,t){var n=true;return m(function(){if(u.deprecationHandler!=null){u.deprecationHandler(null,e)}if(n){S(e+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack);n=false}return t.apply(this,arguments)},t)}var M={};function C(e,t){if(u.deprecationHandler!=null){u.deprecationHandler(e,t)}if(!M[e]){S(t);M[e]=true}}u.suppressDeprecationWarnings=false;u.deprecationHandler=null;function E(e){return e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function N(e){var t,n;for(n in e){t=e[n];if(E(t)){this[n]=t}else{this["_"+n]=t}}this._config=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function P(e,t){var n=m({},e),a;for(a in t){if(c(t,a)){if(s(e[a])&&s(t[a])){n[a]={};m(n[a],e[a]);m(n[a],t[a])}else if(t[a]!=null){n[a]=t[a]}else{delete n[a]}}}for(a in e){if(c(e,a)&&!c(t,a)&&s(e[a])){n[a]=m({},n[a])}}return n}function j(e){if(e!=null){this.set(e)}}var R;if(Object.keys){R=Object.keys}else{R=function(e){var t,n=[];for(t in e){if(c(e,t)){n.push(t)}}return n}}var D={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function w(e,t,n){var a=this._calendar[e]||this._calendar["sameElse"];return E(a)?a.call(t,n):a}var L={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function G(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];if(t||!n){return t}this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)});return this._longDateFormat[e]}var k="Invalid date";function U(){return this._invalidDate}var V="%d";var B=/\d{1,2}/;function z(e){return this._ordinal.replace("%d",e)}var F={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function X(e,t,n,a){var r=this._relativeTime[n];return E(r)?r(e,t,n,a):r.replace(/%d/i,e)}function Y(e,t){var n=this._relativeTime[e>0?"future":"past"];return E(n)?n(t):n.replace(/%s/i,t)}var H={};function W(e,t){var n=e.toLowerCase();H[n]=H[n+"s"]=H[t]=e}function q(e){return typeof e==="string"?H[e]||H[e.toLowerCase()]:undefined}function K(e){var t={},n,a;for(a in e){if(c(e,a)){n=q(a);if(n){t[n]=e[a]}}}return t}var Z={};function Q(e,t){Z[e]=t}function J(e){var t=[];for(var n in e){t.push({unit:n,priority:Z[n]})}t.sort(function(e,t){return e.priority-t.priority});return t}function $(t,n){return function(e){if(e!=null){te(this,t,e);u.updateOffset(this,n);return this}else{return ee(this,t)}}}function ee(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function te(e,t,n){if(e.isValid()){e._d["set"+(e._isUTC?"UTC":"")+t](n)}}function ne(e){e=q(e);if(E(this[e])){return this[e]()}return this}function ae(e,t){if(typeof e==="object"){e=K(e);var n=J(e);for(var a=0;a<n.length;a++){this[n[a].unit](e[n[a].unit])}}else{e=q(e);if(E(this[e])){return this[e](t)}}return this}function re(e,t,n){var a=""+Math.abs(e),r=t-a.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+a}var oe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;var ie=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var se={};var le={};function ue(e,t,n,a){var r=a;if(typeof a==="string"){r=function(){return this[a]()}}if(e){le[e]=r}if(t){le[t[0]]=function(){return re(r.apply(this,arguments),t[1],t[2])}}if(n){le[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),e)}}}function ce(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function me(a){var r=a.match(oe),e,o;for(e=0,o=r.length;e<o;e++){if(le[r[e]]){r[e]=le[r[e]]}else{r[e]=ce(r[e])}}return function(e){var t="",n;for(n=0;n<o;n++){t+=r[n]instanceof Function?r[n].call(e,a):r[n]}return t}}function _e(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=de(t,e.localeData());se[t]=se[t]||me(t);return se[t](e)}function de(e,t){var n=5;function a(e){return t.longDateFormat(e)||e}ie.lastIndex=0;while(n>=0&&ie.test(e)){e=e.replace(ie,a);ie.lastIndex=0;n-=1}return e}var pe=/\d/;var ve=/\d\d/;var fe=/\d{3}/;var ge=/\d{4}/;var he=/[+-]?\d{6}/;var be=/\d\d?/;var xe=/\d\d\d\d?/;var Oe=/\d\d\d\d\d\d?/;var Ie=/\d{1,3}/;var Te=/\d{1,4}/;var ye=/[+-]?\d{1,6}/;var Se=/\d+/;var Ae=/[+-]?\d+/;var Me=/Z|[+-]\d\d:?\d\d/gi;var Ce=/Z|[+-]\d\d(?::?\d\d)?/gi;var Ee=/[+-]?\d+(\.\d{1,3})?/;var Ne=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var Pe={};function je(e,n,a){Pe[e]=E(n)?n:function(e,t){return e&&a?a:n}}function Re(e,t){if(!c(Pe,e)){return new RegExp(De(e))}return Pe[e](t._strict,t._locale)}function De(e){return we(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,a,r){return t||n||a||r}))}function we(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Le={};function Ge(e,n){var t,a=n;if(typeof e==="string"){e=[e]}if(typeof n==="number"){a=function(e,t){t[n]=T(e)}}for(t=0;t<e.length;t++){Le[e[t]]=a}}function ke(e,r){Ge(e,function(e,t,n,a){n._w=n._w||{};r(e,n._w,n,a)})}function Ue(e,t,n){if(t!=null&&c(Le,e)){Le[e](t,n._a,n,e)}}var Ve=0;var Be=1;var ze=2;var Fe=3;var Xe=4;var Ye=5;var He=6;var We=7;var qe=8;var Ke;if(Array.prototype.indexOf){Ke=Array.prototype.indexOf}else{Ke=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}function Ze(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}ue("M",["MM",2],"Mo",function(){return this.month()+1});ue("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});ue("MMMM",0,0,function(e){return this.localeData().months(this,e)});W("month","M");Q("month",8);je("M",be);je("MM",be,ve);je("MMM",function(e,t){return t.monthsShortRegex(e)});je("MMMM",function(e,t){return t.monthsRegex(e)});Ge(["M","MM"],function(e,t){t[Be]=T(e)-1});Ge(["MMM","MMMM"],function(e,t,n,a){var r=n._locale.monthsParse(e,a,n._strict);if(r!=null){t[Be]=r}else{d(n).invalidMonth=e}});var Qe=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;var Je="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function $e(e,t){return i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Qe).test(t)?"format":"standalone"][e.month()]}var et="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function tt(e,t){return i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Qe.test(t)?"format":"standalone"][e.month()]}function nt(e,t,n){var a,r,o,i=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(a=0;a<12;++a){o=_([2e3,a]);this._shortMonthsParse[a]=this.monthsShort(o,"").toLocaleLowerCase();this._longMonthsParse[a]=this.months(o,"").toLocaleLowerCase()}}if(n){if(t==="MMM"){r=Ke.call(this._shortMonthsParse,i);return r!==-1?r:null}else{r=Ke.call(this._longMonthsParse,i);return r!==-1?r:null}}else{if(t==="MMM"){r=Ke.call(this._shortMonthsParse,i);if(r!==-1){return r}r=Ke.call(this._longMonthsParse,i);return r!==-1?r:null}else{r=Ke.call(this._longMonthsParse,i);if(r!==-1){return r}r=Ke.call(this._shortMonthsParse,i);return r!==-1?r:null}}}function at(e,t,n){var a,r,o;if(this._monthsParseExact){return nt.call(this,e,t,n)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(a=0;a<12;a++){r=_([2e3,a]);if(n&&!this._longMonthsParse[a]){this._longMonthsParse[a]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i");this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")}if(!n&&!this._monthsParse[a]){o="^"+this.months(r,"")+"|^"+this.monthsShort(r,"");this._monthsParse[a]=new RegExp(o.replace(".",""),"i")}if(n&&t==="MMMM"&&this._longMonthsParse[a].test(e)){return a}else if(n&&t==="MMM"&&this._shortMonthsParse[a].test(e)){return a}else if(!n&&this._monthsParse[a].test(e)){return a}}}function rt(e,t){var n;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=T(t)}else{t=e.localeData().monthsParse(t);if(typeof t!=="number"){return e}}}n=Math.min(e.date(),Ze(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n);return e}function ot(e){if(e!=null){rt(this,e);u.updateOffset(this,true);return this}else{return ee(this,"Month")}}function it(){return Ze(this.year(),this.month())}var st=Ne;function lt(e){if(this._monthsParseExact){if(!c(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!c(this,"_monthsShortRegex")){this._monthsShortRegex=st}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}var ut=Ne;function ct(e){if(this._monthsParseExact){if(!c(this,"_monthsRegex")){mt.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!c(this,"_monthsRegex")){this._monthsRegex=ut}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function mt(){function e(e,t){return t.length-e.length}var t=[],n=[],a=[],r,o;for(r=0;r<12;r++){o=_([2e3,r]);t.push(this.monthsShort(o,""));n.push(this.months(o,""));a.push(this.months(o,""));a.push(this.monthsShort(o,""))}t.sort(e);n.sort(e);a.sort(e);for(r=0;r<12;r++){t[r]=we(t[r]);n[r]=we(n[r])}for(r=0;r<24;r++){a[r]=we(a[r])}this._monthsRegex=new RegExp("^("+a.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}ue("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e});ue(0,["YY",2],0,function(){return this.year()%100});ue(0,["YYYY",4],0,"year");ue(0,["YYYYY",5],0,"year");ue(0,["YYYYYY",6,true],0,"year");W("year","y");Q("year",1);je("Y",Ae);je("YY",be,ve);je("YYYY",Te,ge);je("YYYYY",ye,he);je("YYYYYY",ye,he);Ge(["YYYYY","YYYYYY"],Ve);Ge("YYYY",function(e,t){t[Ve]=e.length===2?u.parseTwoDigitYear(e):T(e)});Ge("YY",function(e,t){t[Ve]=u.parseTwoDigitYear(e)});Ge("Y",function(e,t){t[Ve]=parseInt(e,10)});function _t(e){return dt(e)?366:365}function dt(e){return e%4===0&&e%100!==0||e%400===0}u.parseTwoDigitYear=function(e){return T(e)+(T(e)>68?1900:2e3)};var pt=$("FullYear",true);function vt(){return dt(this.year())}function ft(e,t,n,a,r,o,i){var s=new Date(e,t,n,a,r,o,i);if(e<100&&e>=0&&isFinite(s.getFullYear())){s.setFullYear(e)}return s}function gt(e){var t=new Date(Date.UTC.apply(null,arguments));if(e<100&&e>=0&&isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}return t}function ht(e,t,n){var a=7+t-n,r=(7+gt(e,0,a).getUTCDay()-t)%7;return-r+a-1}function bt(e,t,n,a,r){var o=(7+n-a)%7,i=ht(e,a,r),s=1+7*(t-1)+o+i,l,u;if(s<=0){l=e-1;u=_t(l)+s}else if(s>_t(e)){l=e+1;u=s-_t(e)}else{l=e;u=s}return{year:l,dayOfYear:u}}function xt(e,t,n){var a=ht(e.year(),t,n),r=Math.floor((e.dayOfYear()-a-1)/7)+1,o,i;if(r<1){i=e.year()-1;o=r+Ot(i,t,n)}else if(r>Ot(e.year(),t,n)){o=r-Ot(e.year(),t,n);i=e.year()+1}else{i=e.year();o=r}return{week:o,year:i}}function Ot(e,t,n){var a=ht(e,t,n),r=ht(e+1,t,n);return(_t(e)-a+r)/7}ue("w",["ww",2],"wo","week");ue("W",["WW",2],"Wo","isoWeek");W("week","w");W("isoWeek","W");Q("week",5);Q("isoWeek",5);je("w",be);je("ww",be,ve);je("W",be);je("WW",be,ve);ke(["w","ww","W","WW"],function(e,t,n,a){t[a.substr(0,1)]=T(e)});function It(e){return xt(e,this._week.dow,this._week.doy).week}var Tt={dow:0,doy:6};function yt(){return this._week.dow}function St(){return this._week.doy}function At(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Mt(e){var t=xt(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}ue("d",0,"do","day");ue("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});ue("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});ue("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});ue("e",0,0,"weekday");ue("E",0,0,"isoWeekday");W("day","d");W("weekday","e");W("isoWeekday","E");Q("day",11);Q("weekday",11);Q("isoWeekday",11);je("d",be);je("e",be);je("E",be);je("dd",function(e,t){return t.weekdaysMinRegex(e)});je("ddd",function(e,t){return t.weekdaysShortRegex(e)});je("dddd",function(e,t){return t.weekdaysRegex(e)});ke(["dd","ddd","dddd"],function(e,t,n,a){var r=n._locale.weekdaysParse(e,a,n._strict);if(r!=null){t.d=r}else{d(n).invalidWeekday=e}});ke(["d","e","E"],function(e,t,n,a){t[a]=T(e)});function Ct(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function Et(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}var Nt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function Pt(e,t){return i(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}var jt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function Rt(e){return this._weekdaysShort[e.day()]}var Dt="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function wt(e){return this._weekdaysMin[e.day()]}function Lt(e,t,n){var a,r,o,i=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(a=0;a<7;++a){o=_([2e3,1]).day(a);this._minWeekdaysParse[a]=this.weekdaysMin(o,"").toLocaleLowerCase();this._shortWeekdaysParse[a]=this.weekdaysShort(o,"").toLocaleLowerCase();this._weekdaysParse[a]=this.weekdays(o,"").toLocaleLowerCase()}}if(n){if(t==="dddd"){r=Ke.call(this._weekdaysParse,i);return r!==-1?r:null}else if(t==="ddd"){r=Ke.call(this._shortWeekdaysParse,i);return r!==-1?r:null}else{r=Ke.call(this._minWeekdaysParse,i);return r!==-1?r:null}}else{if(t==="dddd"){r=Ke.call(this._weekdaysParse,i);if(r!==-1){return r}r=Ke.call(this._shortWeekdaysParse,i);if(r!==-1){return r}r=Ke.call(this._minWeekdaysParse,i);return r!==-1?r:null}else if(t==="ddd"){r=Ke.call(this._shortWeekdaysParse,i);if(r!==-1){return r}r=Ke.call(this._weekdaysParse,i);if(r!==-1){return r}r=Ke.call(this._minWeekdaysParse,i);return r!==-1?r:null}else{r=Ke.call(this._minWeekdaysParse,i);if(r!==-1){return r}r=Ke.call(this._weekdaysParse,i);if(r!==-1){return r}r=Ke.call(this._shortWeekdaysParse,i);return r!==-1?r:null}}}function Gt(e,t,n){var a,r,o;if(this._weekdaysParseExact){return Lt.call(this,e,t,n)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(a=0;a<7;a++){r=_([2e3,1]).day(a);if(n&&!this._fullWeekdaysParse[a]){this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i");this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i");this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")}if(!this._weekdaysParse[a]){o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,"");this._weekdaysParse[a]=new RegExp(o.replace(".",""),"i")}if(n&&t==="dddd"&&this._fullWeekdaysParse[a].test(e)){return a}else if(n&&t==="ddd"&&this._shortWeekdaysParse[a].test(e)){return a}else if(n&&t==="dd"&&this._minWeekdaysParse[a].test(e)){return a}else if(!n&&this._weekdaysParse[a].test(e)){return a}}}function kt(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=Ct(e,this.localeData());return this.add(e-t,"d")}else{return t}}function Ut(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Vt(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=Et(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}var Bt=Ne;function zt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Wt.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!c(this,"_weekdaysRegex")){this._weekdaysRegex=Bt}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}var Ft=Ne;function Xt(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Wt.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!c(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=Ft}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}var Yt=Ne;function Ht(e){if(this._weekdaysParseExact){if(!c(this,"_weekdaysRegex")){Wt.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!c(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=Yt}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function Wt(){function e(e,t){return t.length-e.length}var t=[],n=[],a=[],r=[],o,i,s,l,u;for(o=0;o<7;o++){i=_([2e3,1]).day(o);s=this.weekdaysMin(i,"");l=this.weekdaysShort(i,"");u=this.weekdays(i,"");t.push(s);n.push(l);a.push(u);r.push(s);r.push(l);r.push(u)}t.sort(e);n.sort(e);a.sort(e);r.sort(e);for(o=0;o<7;o++){n[o]=we(n[o]);a[o]=we(a[o]);r[o]=we(r[o])}this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function qt(){return this.hours()%12||12}function Kt(){return this.hours()||24}ue("H",["HH",2],0,"hour");ue("h",["hh",2],0,qt);ue("k",["kk",2],0,Kt);ue("hmm",0,0,function(){return""+qt.apply(this)+re(this.minutes(),2)});ue("hmmss",0,0,function(){return""+qt.apply(this)+re(this.minutes(),2)+re(this.seconds(),2)});ue("Hmm",0,0,function(){return""+this.hours()+re(this.minutes(),2)});ue("Hmmss",0,0,function(){return""+this.hours()+re(this.minutes(),2)+re(this.seconds(),2)});function Zt(e,t){ue(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Zt("a",true);Zt("A",false);W("hour","h");Q("hour",13);function Qt(e,t){return t._meridiemParse}je("a",Qt);je("A",Qt);je("H",be);je("h",be);je("HH",be,ve);je("hh",be,ve);je("hmm",xe);je("hmmss",Oe);je("Hmm",xe);je("Hmmss",Oe);Ge(["H","HH"],Fe);Ge(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e);n._meridiem=e});Ge(["h","hh"],function(e,t,n){t[Fe]=T(e);d(n).bigHour=true});Ge("hmm",function(e,t,n){var a=e.length-2;t[Fe]=T(e.substr(0,a));t[Xe]=T(e.substr(a));d(n).bigHour=true});Ge("hmmss",function(e,t,n){var a=e.length-4;var r=e.length-2;t[Fe]=T(e.substr(0,a));t[Xe]=T(e.substr(a,2));t[Ye]=T(e.substr(r));d(n).bigHour=true});Ge("Hmm",function(e,t,n){var a=e.length-2;t[Fe]=T(e.substr(0,a));t[Xe]=T(e.substr(a))});Ge("Hmmss",function(e,t,n){var a=e.length-4;var r=e.length-2;t[Fe]=T(e.substr(0,a));t[Xe]=T(e.substr(a,2));t[Ye]=T(e.substr(r))});function Jt(e){return(e+"").toLowerCase().charAt(0)==="p"}var $t=/[ap]\.?m?\.?/i;function en(e,t,n){if(e>11){return n?"pm":"PM"}else{return n?"am":"AM"}}var tn=$("Hours",true);var nn={calendar:D,longDateFormat:L,invalidDate:k,ordinal:V,ordinalParse:B,relativeTime:F,months:Je,monthsShort:et,week:Tt,weekdays:Nt,weekdaysMin:Dt,weekdaysShort:jt,meridiemParse:$t};var an={};var rn;function on(e){return e?e.toLowerCase().replace("_","-"):e}function sn(e){var t=0,n,a,r,o;while(t<e.length){o=on(e[t]).split("-");n=o.length;a=on(e[t+1]);a=a?a.split("-"):null;while(n>0){r=ln(o.slice(0,n).join("-"));if(r){return r}if(a&&a.length>=n&&y(o,a,true)>=n-1){break}n--}t++}return null}function ln(e){var t=null;if(!an[e]&&typeof module!=="undefined"&&module&&module.exports){try{t=rn._abbr;require("./locale/"+e);un(t)}catch(e){}}return an[e]}function un(e,t){var n;if(e){if(f(t)){n=_n(e)}else{n=cn(e,t)}if(n){rn=n}}return rn._abbr}function cn(e,t){if(t!==null){var n=nn;t.abbr=e;if(an[e]!=null){C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");n=an[e]._config}else if(t.parentLocale!=null){if(an[t.parentLocale]!=null){n=an[t.parentLocale]._config}else{C("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/")}}an[e]=new j(P(n,t));un(e);return an[e]}else{delete an[e];return null}}function mn(e,t){if(t!=null){var n,a=nn;if(an[e]!=null){a=an[e]._config}t=P(a,t);n=new j(t);n.parentLocale=an[e];an[e]=n;un(e)}else{if(an[e]!=null){if(an[e].parentLocale!=null){an[e]=an[e].parentLocale}else if(an[e]!=null){delete an[e]}}}return an[e]}function _n(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return rn}if(!i(e)){t=ln(e);if(t){return t}e=[e]}return sn(e)}function dn(){return R(an)}function pn(e){var t;var n=e._a;if(n&&d(e).overflow===-2){t=n[Be]<0||n[Be]>11?Be:n[ze]<1||n[ze]>Ze(n[Ve],n[Be])?ze:n[Fe]<0||n[Fe]>24||n[Fe]===24&&(n[Xe]!==0||n[Ye]!==0||n[He]!==0)?Fe:n[Xe]<0||n[Xe]>59?Xe:n[Ye]<0||n[Ye]>59?Ye:n[He]<0||n[He]>999?He:-1;if(d(e)._overflowDayOfYear&&(t<Ve||t>ze)){t=ze}if(d(e)._overflowWeeks&&t===-1){t=We}if(d(e)._overflowWeekday&&t===-1){t=qe}d(e).overflow=t}return e}var vn=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var fn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/;var gn=/Z|[+-]\d\d(?::?\d\d)?/;var hn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/]];var bn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]];var xn=/^\/?Date\((\-?\d+)/i;function On(e){var t,n,a=e._i,r=vn.exec(a)||fn.exec(a),o,i,s,l;if(r){d(e).iso=true;for(t=0,n=hn.length;t<n;t++){if(hn[t][1].exec(r[1])){i=hn[t][0];o=hn[t][2]!==false;break}}if(i==null){e._isValid=false;return}if(r[3]){for(t=0,n=bn.length;t<n;t++){if(bn[t][1].exec(r[3])){s=(r[2]||" ")+bn[t][0];break}}if(s==null){e._isValid=false;return}}if(!o&&s!=null){e._isValid=false;return}if(r[4]){if(gn.exec(r[4])){l="Z"}else{e._isValid=false;return}}e._f=i+(s||"")+(l||"");Mn(e)}else{e._isValid=false}}function In(e){var t=xn.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}On(e);if(e._isValid===false){delete e._isValid;u.createFromInputFallback(e)}}u.createFromInputFallback=A("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Tn(e,t,n){if(e!=null){return e}if(t!=null){return t}return n}function yn(e){var t=new Date(u.now());if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}return[t.getFullYear(),t.getMonth(),t.getDate()]}function Sn(e){var t,n,a=[],r,o;if(e._d){return}r=yn(e);if(e._w&&e._a[ze]==null&&e._a[Be]==null){An(e)}if(e._dayOfYear){o=Tn(e._a[Ve],r[Ve]);if(e._dayOfYear>_t(o)){d(e)._overflowDayOfYear=true}n=gt(o,0,e._dayOfYear);e._a[Be]=n.getUTCMonth();e._a[ze]=n.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=a[t]=r[t]}for(;t<7;t++){e._a[t]=a[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[Fe]===24&&e._a[Xe]===0&&e._a[Ye]===0&&e._a[He]===0){e._nextDay=true;e._a[Fe]=0}e._d=(e._useUTC?gt:ft).apply(null,a);if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[Fe]=24}}function An(e){var t,n,a,r,o,i,s,l;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){o=1;i=4;n=Tn(t.GG,e._a[Ve],xt(wn(),1,4).year);a=Tn(t.W,1);r=Tn(t.E,1);if(r<1||r>7){l=true}}else{o=e._locale._week.dow;i=e._locale._week.doy;n=Tn(t.gg,e._a[Ve],xt(wn(),o,i).year);a=Tn(t.w,1);if(t.d!=null){r=t.d;if(r<0||r>6){l=true}}else if(t.e!=null){r=t.e+o;if(t.e<0||t.e>6){l=true}}else{r=o}}if(a<1||a>Ot(n,o,i)){d(e)._overflowWeeks=true}else if(l!=null){d(e)._overflowWeekday=true}else{s=bt(n,a,r,o,i);e._a[Ve]=s.year;e._dayOfYear=s.dayOfYear}}u.ISO_8601=function(){};function Mn(e){if(e._f===u.ISO_8601){On(e);return}e._a=[];d(e).empty=true;var t=""+e._i,n,a,r,o,i,s=t.length,l=0;r=de(e._f,e._locale).match(oe)||[];for(n=0;n<r.length;n++){o=r[n];a=(t.match(Re(o,e))||[])[0];if(a){i=t.substr(0,t.indexOf(a));if(i.length>0){d(e).unusedInput.push(i)}t=t.slice(t.indexOf(a)+a.length);l+=a.length}if(le[o]){if(a){d(e).empty=false}else{d(e).unusedTokens.push(o)}Ue(o,a,e)}else if(e._strict&&!a){d(e).unusedTokens.push(o)}}d(e).charsLeftOver=s-l;if(t.length>0){d(e).unusedInput.push(t)}if(e._a[Fe]<=12&&d(e).bigHour===true&&e._a[Fe]>0){d(e).bigHour=undefined}d(e).parsedDateParts=e._a.slice(0);d(e).meridiem=e._meridiem;e._a[Fe]=Cn(e._locale,e._a[Fe],e._meridiem);Sn(e);pn(e)}function Cn(e,t,n){var a;if(n==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,n)}else if(e.isPM!=null){a=e.isPM(n);if(a&&t<12){t+=12}if(!a&&t===12){t=0}return t}else{return t}}function En(e){var t,n,a,r,o;if(e._f.length===0){d(e).invalidFormat=true;e._d=new Date(NaN);return}for(r=0;r<e._f.length;r++){o=0;t=h({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[r];Mn(t);if(!p(t)){continue}o+=d(t).charsLeftOver;o+=d(t).unusedTokens.length*10;d(t).score=o;if(a==null||o<a){a=o;n=t}}m(e,n||t)}function Nn(e){if(e._d){return}var t=K(e._i);e._a=n([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)});Sn(e)}function Pn(e){var t=new x(pn(jn(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function jn(e){var t=e._i,n=e._f;e._locale=e._locale||_n(e._l);if(t===null||n===undefined&&t===""){return v({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(O(t)){return new x(pn(t))}else if(i(n)){En(e)}else if(r(t)){e._d=t}else if(n){Mn(e)}else{Rn(e)}if(!p(e)){e._d=null}return e}function Rn(e){var t=e._i;if(t===undefined){e._d=new Date(u.now())}else if(r(t)){e._d=new Date(t.valueOf())}else if(typeof t==="string"){In(e)}else if(i(t)){e._a=n(t.slice(0),function(e){return parseInt(e,10)});Sn(e)}else if(typeof t==="object"){Nn(e)}else if(typeof t==="number"){e._d=new Date(t)}else{u.createFromInputFallback(e)}}function Dn(e,t,n,a,r){var o={};if(typeof n==="boolean"){a=n;n=undefined}if(s(e)&&l(e)||i(e)&&e.length===0){e=undefined}o._isAMomentObject=true;o._useUTC=o._isUTC=r;o._l=n;o._i=e;o._f=t;o._strict=a;return Pn(o)}function wn(e,t,n,a){return Dn(e,t,n,a,false)}var Ln=A("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=wn.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return v()}});var Gn=A("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=wn.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return v()}});function kn(e,t){var n,a;if(t.length===1&&i(t[0])){t=t[0]}if(!t.length){return wn()}n=t[0];for(a=1;a<t.length;++a){if(!t[a].isValid()||t[a][e](n)){n=t[a]}}return n}function Un(){var e=[].slice.call(arguments,0);return kn("isBefore",e)}function Vn(){var e=[].slice.call(arguments,0);return kn("isAfter",e)}var Bn=function(){return Date.now?Date.now():+new Date};function zn(e){var t=K(e),n=t.year||0,a=t.quarter||0,r=t.month||0,o=t.week||0,i=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+u*1e3+l*6e4+s*1e3*60*60;this._days=+i+o*7;this._months=+r+a*3+n*12;this._data={};this._locale=_n();this._bubble()}function Fn(e){return e instanceof zn}function Xn(e,n){ue(e,0,0,function(){var e=this.utcOffset();var t="+";if(e<0){e=-e;t="-"}return t+re(~~(e/60),2)+n+re(~~e%60,2)})}Xn("Z",":");Xn("ZZ","");je("Z",Ce);je("ZZ",Ce);Ge(["Z","ZZ"],function(e,t,n){n._useUTC=true;n._tzm=Hn(Ce,e)});var Yn=/([\+\-]|\d\d)/gi;function Hn(e,t){var n=(t||"").match(e)||[];var a=n[n.length-1]||[];var r=(a+"").match(Yn)||["-",0,0];var o=+(r[1]*60)+T(r[2]);return r[0]==="+"?o:-o}function Wn(e,t){var n,a;if(t._isUTC){n=t.clone();a=(O(e)||r(e)?e.valueOf():wn(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+a);u.updateOffset(n,false);return n}else{return wn(e).local()}}function qn(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}u.updateOffset=function(){};function Kn(e,t){var n=this._offset||0,a;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=Hn(Ce,e)}else if(Math.abs(e)<16){e=e*60}if(!this._isUTC&&t){a=qn(this)}this._offset=e;this._isUTC=true;if(a!=null){this.add(a,"m")}if(n!==e){if(!t||this._changeInProgress){pa(this,la(e-n,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;u.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?n:qn(this)}}function Zn(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function Qn(e){return this.utcOffset(0,e)}function Jn(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(qn(this),"m")}}return this}function $n(){if(this._tzm){this.utcOffset(this._tzm)}else if(typeof this._i==="string"){this.utcOffset(Hn(Me,this._i))}return this}function ea(e){if(!this.isValid()){return false}e=e?wn(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function ta(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function na(){if(!f(this._isDSTShifted)){return this._isDSTShifted}var e={};h(e,this);e=jn(e);if(e._a){var t=e._isUTC?_(e._a):wn(e._a);this._isDSTShifted=this.isValid()&&y(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function aa(){return this.isValid()?!this._isUTC:false}function ra(){return this.isValid()?this._isUTC:false}function oa(){return this.isValid()?this._isUTC&&this._offset===0:false}var ia=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/;var sa=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;function la(e,t){var n=e,a=null,r,o,i;if(Fn(e)){n={ms:e._milliseconds,d:e._days,M:e._months}}else if(typeof e==="number"){n={};if(t){n[t]=e}else{n.milliseconds=e}}else if(!!(a=ia.exec(e))){r=a[1]==="-"?-1:1;n={y:0,d:T(a[ze])*r,h:T(a[Fe])*r,m:T(a[Xe])*r,s:T(a[Ye])*r,ms:T(a[He])*r}}else if(!!(a=sa.exec(e))){r=a[1]==="-"?-1:1;n={y:ua(a[2],r),M:ua(a[3],r),w:ua(a[4],r),d:ua(a[5],r),h:ua(a[6],r),m:ua(a[7],r),s:ua(a[8],r)}}else if(n==null){n={}}else if(typeof n==="object"&&("from"in n||"to"in n)){i=ma(wn(n.from),wn(n.to));n={};n.ms=i.milliseconds;n.M=i.months}o=new zn(n);if(Fn(e)&&c(e,"_locale")){o._locale=e._locale}return o}la.fn=zn.prototype;function ua(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function ca(e,t){var n={milliseconds:0,months:0};n.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(n.months,"M").isAfter(t)){--n.months}n.milliseconds=+t-+e.clone().add(n.months,"M");return n}function ma(e,t){var n;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=Wn(t,e);if(e.isBefore(t)){n=ca(e,t)}else{n=ca(t,e);n.milliseconds=-n.milliseconds;n.months=-n.months}return n}function _a(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function da(r,o){return function(e,t){var n,a;if(t!==null&&!isNaN(+t)){C(o,"moment()."+o+"(period, number) is deprecated. Please use moment()."+o+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");a=e;e=t;t=a}e=typeof e==="string"?+e:e;n=la(e,t);pa(this,n,r);return this}}function pa(e,t,n,a){var r=t._milliseconds,o=_a(t._days),i=_a(t._months);if(!e.isValid()){return}a=a==null?true:a;if(r){e._d.setTime(e._d.valueOf()+r*n)}if(o){te(e,"Date",ee(e,"Date")+o*n)}if(i){rt(e,ee(e,"Month")+i*n)}if(a){u.updateOffset(e,o||i)}}var va=da(1,"add");var fa=da(-1,"subtract");function ga(e,t){var n=e.diff(t,"days",true);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function ha(e,t){var n=e||wn(),a=Wn(n,this).startOf("day"),r=u.calendarFormat(this,a)||"sameElse";var o=t&&(E(t[r])?t[r].call(this,n):t[r]);return this.format(o||this.localeData().calendar(r,this,wn(n)))}function ba(){return new x(this)}function xa(e,t){var n=O(e)?e:wn(e);if(!(this.isValid()&&n.isValid())){return false}t=q(!f(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()>n.valueOf()}else{return n.valueOf()<this.clone().startOf(t).valueOf()}}function Oa(e,t){var n=O(e)?e:wn(e);if(!(this.isValid()&&n.isValid())){return false}t=q(!f(t)?t:"millisecond");if(t==="millisecond"){return this.valueOf()<n.valueOf()}else{return this.clone().endOf(t).valueOf()<n.valueOf()}}function Ia(e,t,n,a){a=a||"()";return(a[0]==="("?this.isAfter(e,n):!this.isBefore(e,n))&&(a[1]===")"?this.isBefore(t,n):!this.isAfter(t,n))}function Ta(e,t){var n=O(e)?e:wn(e),a;if(!(this.isValid()&&n.isValid())){return false}t=q(t||"millisecond");if(t==="millisecond"){return this.valueOf()===n.valueOf()}else{a=n.valueOf();return this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf()}}function ya(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Sa(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Aa(e,t,n){var a,r,o,i;if(!this.isValid()){return NaN}a=Wn(e,this);if(!a.isValid()){return NaN}r=(a.utcOffset()-this.utcOffset())*6e4;t=q(t);if(t==="year"||t==="month"||t==="quarter"){i=Ma(this,a);if(t==="quarter"){i=i/3}else if(t==="year"){i=i/12}}else{o=this-a;i=t==="second"?o/1e3:t==="minute"?o/6e4:t==="hour"?o/36e5:t==="day"?(o-r)/864e5:t==="week"?(o-r)/6048e5:o}return n?i:I(i)}function Ma(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),a=e.clone().add(n,"months"),r,o;if(t-a<0){r=e.clone().add(n-1,"months");o=(t-a)/(a-r)}else{r=e.clone().add(n+1,"months");o=(t-a)/(r-a)}return-(n+o)||0}u.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";u.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Ca(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ea(){var e=this.clone().utc();if(0<e.year()&&e.year()<=9999){if(E(Date.prototype.toISOString)){return this.toDate().toISOString()}else{return _e(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return _e(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function Na(e){if(!e){e=this.isUtc()?u.defaultFormatUtc:u.defaultFormat}var t=_e(this,e);return this.localeData().postformat(t)}function Pa(e,t){if(this.isValid()&&(O(e)&&e.isValid()||wn(e).isValid())){return la({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function ja(e){return this.from(wn(),e)}function Ra(e,t){if(this.isValid()&&(O(e)&&e.isValid()||wn(e).isValid())){return la({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function Da(e){return this.to(wn(),e)}function wa(e){var t;if(e===undefined){return this._locale._abbr}else{t=_n(e);if(t!=null){this._locale=t}return this}}var La=A("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}});function Ga(){return this._locale}function ka(e){e=q(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(e==="week"){this.weekday(0)}if(e==="isoWeek"){this.isoWeekday(1)}if(e==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function Ua(e){e=q(e);if(e===undefined||e==="millisecond"){return this}if(e==="date"){e="day"}return this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function Va(){return this._d.valueOf()-(this._offset||0)*6e4}function Ba(){return Math.floor(this.valueOf()/1e3)}function za(){return new Date(this.valueOf())}function Fa(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Xa(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Ya(){return this.isValid()?this.toISOString():null}function Ha(){return p(this)}function Wa(){return m({},d(this))}function qa(){return d(this).overflow}function Ka(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ue(0,["gg",2],0,function(){return this.weekYear()%100});ue(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Za(e,t){ue(0,[e,e.length],0,t)}Za("gggg","weekYear");Za("ggggg","weekYear");Za("GGGG","isoWeekYear");Za("GGGGG","isoWeekYear");W("weekYear","gg");W("isoWeekYear","GG");Q("weekYear",1);Q("isoWeekYear",1);je("G",Ae);je("g",Ae);je("GG",be,ve);je("gg",be,ve);je("GGGG",Te,ge);je("gggg",Te,ge);je("GGGGG",ye,he);je("ggggg",ye,he);ke(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,a){t[a.substr(0,2)]=T(e)});ke(["gg","GG"],function(e,t,n,a){t[a]=u.parseTwoDigitYear(e)});function Qa(e){return tr.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ja(e){return tr.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function $a(){return Ot(this.year(),1,4)}function er(){var e=this.localeData()._week;return Ot(this.year(),e.dow,e.doy)}function tr(e,t,n,a,r){var o;if(e==null){return xt(this,a,r).year}else{o=Ot(e,a,r);if(t>o){t=o}return nr.call(this,e,t,n,a,r)}}function nr(e,t,n,a,r){var o=bt(e,t,n,a,r),i=gt(o.year,0,o.dayOfYear);this.year(i.getUTCFullYear());this.month(i.getUTCMonth());this.date(i.getUTCDate());return this}ue("Q",0,"Qo","quarter");W("quarter","Q");Q("quarter",7);je("Q",pe);Ge("Q",function(e,t){t[Be]=(T(e)-1)*3});function ar(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}ue("D",["DD",2],"Do","date");W("date","D");Q("date",9);je("D",be);je("DD",be,ve);je("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient});Ge(["D","DD"],ze);Ge("Do",function(e,t){t[ze]=T(e.match(be)[0],10)});var rr=$("Date",true);ue("DDD",["DDDD",3],"DDDo","dayOfYear");W("dayOfYear","DDD");Q("dayOfYear",4);je("DDD",Ie);je("DDDD",fe);Ge(["DDD","DDDD"],function(e,t,n){n._dayOfYear=T(e)});function or(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}ue("m",["mm",2],0,"minute");W("minute","m");Q("minute",14);je("m",be);je("mm",be,ve);Ge(["m","mm"],Xe);var ir=$("Minutes",false);ue("s",["ss",2],0,"second");W("second","s");Q("second",15);je("s",be);je("ss",be,ve);Ge(["s","ss"],Ye);var sr=$("Seconds",false);ue("S",0,0,function(){return~~(this.millisecond()/100)});ue(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ue(0,["SSS",3],0,"millisecond");ue(0,["SSSS",4],0,function(){return this.millisecond()*10});ue(0,["SSSSS",5],0,function(){return this.millisecond()*100});ue(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ue(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ue(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ue(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});W("millisecond","ms");Q("millisecond",16);je("S",Ie,pe);je("SS",Ie,ve);je("SSS",Ie,fe);var lr;for(lr="SSSS";lr.length<=9;lr+="S"){je(lr,Se)}function ur(e,t){t[He]=T(("0."+e)*1e3)}for(lr="S";lr.length<=9;lr+="S"){Ge(lr,ur)}var cr=$("Milliseconds",false);ue("z",0,0,"zoneAbbr");ue("zz",0,0,"zoneName");function mr(){return this._isUTC?"UTC":""}function _r(){return this._isUTC?"Coordinated Universal Time":""}var dr=x.prototype;dr.add=va;dr.calendar=ha;dr.clone=ba;dr.diff=Aa;dr.endOf=Ua;dr.format=Na;dr.from=Pa;dr.fromNow=ja;dr.to=Ra;dr.toNow=Da;dr.get=ne;dr.invalidAt=qa;dr.isAfter=xa;dr.isBefore=Oa;dr.isBetween=Ia;dr.isSame=Ta;dr.isSameOrAfter=ya;dr.isSameOrBefore=Sa;dr.isValid=Ha;dr.lang=La;dr.locale=wa;dr.localeData=Ga;dr.max=Gn;dr.min=Ln;dr.parsingFlags=Wa;dr.set=ae;dr.startOf=ka;dr.subtract=fa;dr.toArray=Fa;dr.toObject=Xa;dr.toDate=za;dr.toISOString=Ea;dr.toJSON=Ya;dr.toString=Ca;dr.unix=Ba;dr.valueOf=Va;dr.creationData=Ka;dr.year=pt;dr.isLeapYear=vt;dr.weekYear=Qa;dr.isoWeekYear=Ja;dr.quarter=dr.quarters=ar;dr.month=ot;dr.daysInMonth=it;dr.week=dr.weeks=At;dr.isoWeek=dr.isoWeeks=Mt;dr.weeksInYear=er;dr.isoWeeksInYear=$a;dr.date=rr;dr.day=dr.days=kt;dr.weekday=Ut;dr.isoWeekday=Vt;dr.dayOfYear=or;dr.hour=dr.hours=tn;dr.minute=dr.minutes=ir;dr.second=dr.seconds=sr;dr.millisecond=dr.milliseconds=cr;dr.utcOffset=Kn;dr.utc=Qn;dr.local=Jn;dr.parseZone=$n;dr.hasAlignedHourOffset=ea;dr.isDST=ta;dr.isLocal=aa;dr.isUtcOffset=ra;dr.isUtc=oa;dr.isUTC=oa;dr.zoneAbbr=mr;dr.zoneName=_r;dr.dates=A("dates accessor is deprecated. Use date instead.",rr);dr.months=A("months accessor is deprecated. Use month instead",ot);dr.years=A("years accessor is deprecated. Use year instead",pt);dr.zone=A("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Zn);dr.isDSTShifted=A("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",na);var pr=dr;function vr(e){return wn(e*1e3)}function fr(){return wn.apply(null,arguments).parseZone()}function gr(e){return e}var hr=j.prototype;hr.calendar=w;hr.longDateFormat=G;hr.invalidDate=U;hr.ordinal=z;hr.preparse=gr;hr.postformat=gr;hr.relativeTime=X;hr.pastFuture=Y;hr.set=N;hr.months=$e;hr.monthsShort=tt;hr.monthsParse=at;hr.monthsRegex=ct;hr.monthsShortRegex=lt;hr.week=It;hr.firstDayOfYear=St;hr.firstDayOfWeek=yt;hr.weekdays=Pt;hr.weekdaysMin=wt;hr.weekdaysShort=Rt;hr.weekdaysParse=Gt;hr.weekdaysRegex=zt;hr.weekdaysShortRegex=Xt;hr.weekdaysMinRegex=Ht;hr.isPM=Jt;hr.meridiem=en;function br(e,t,n,a){var r=_n();var o=_().set(a,t);return r[n](o,e)}function xr(e,t,n){if(typeof e==="number"){t=e;e=undefined}e=e||"";if(t!=null){return br(e,t,n,"month")}var a;var r=[];for(a=0;a<12;a++){r[a]=br(e,a,n,"month")}return r}function Or(e,t,n,a){if(typeof e==="boolean"){if(typeof t==="number"){n=t;t=undefined}t=t||""}else{t=e;n=t;e=false;if(typeof t==="number"){n=t;t=undefined}t=t||""}var r=_n(),o=e?r._week.dow:0;if(n!=null){return br(t,(n+o)%7,a,"day")}var i;var s=[];for(i=0;i<7;i++){s[i]=br(t,(i+o)%7,a,"day")}return s}function Ir(e,t){return xr(e,t,"months")}function Tr(e,t){return xr(e,t,"monthsShort")}function yr(e,t,n){return Or(e,t,n,"weekdays")}function Sr(e,t,n){return Or(e,t,n,"weekdaysShort")}function Ar(e,t,n){return Or(e,t,n,"weekdaysMin")}un("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=T(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});u.lang=A("moment.lang is deprecated. Use moment.locale instead.",un);u.langData=A("moment.langData is deprecated. Use moment.localeData instead.",_n);var Mr=Math.abs;function Cr(){var e=this._data;this._milliseconds=Mr(this._milliseconds);this._days=Mr(this._days);this._months=Mr(this._months);e.milliseconds=Mr(e.milliseconds);e.seconds=Mr(e.seconds);e.minutes=Mr(e.minutes);e.hours=Mr(e.hours);e.months=Mr(e.months);e.years=Mr(e.years);return this}function Er(e,t,n,a){var r=la(t,n);e._milliseconds+=a*r._milliseconds;e._days+=a*r._days;e._months+=a*r._months;return e._bubble()}function Nr(e,t){return Er(this,e,t,1)}function Pr(e,t){return Er(this,e,t,-1)}function jr(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function Rr(){var e=this._milliseconds;var t=this._days;var n=this._months;var a=this._data;var r,o,i,s,l;if(!(e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0)){e+=jr(wr(n)+t)*864e5;t=0;n=0}a.milliseconds=e%1e3;r=I(e/1e3);a.seconds=r%60;o=I(r/60);a.minutes=o%60;i=I(o/60);a.hours=i%24;t+=I(i/24);l=I(Dr(t));n+=l;t-=jr(wr(l));s=I(n/12);n%=12;a.days=t;a.months=n;a.years=s;return this}function Dr(e){return e*4800/146097}function wr(e){return e*146097/4800}function Lr(e){var t;var n;var a=this._milliseconds;e=q(e);if(e==="month"||e==="year"){t=this._days+a/864e5;n=this._months+Dr(t);return e==="month"?n:n/12}else{t=this._days+Math.round(wr(this._months));switch(e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return t*24+a/36e5;case"minute":return t*1440+a/6e4;case"second":return t*86400+a/1e3;case"millisecond":return Math.floor(t*864e5)+a;default:throw new Error("Unknown unit "+e)}}}function Gr(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+T(this._months/12)*31536e6}function kr(e){return function(){return this.as(e)}}var Ur=kr("ms");var Vr=kr("s");var Br=kr("m");var zr=kr("h");var Fr=kr("d");var Xr=kr("w");var Yr=kr("M");var Hr=kr("y");function Wr(e){e=q(e);return this[e+"s"]()}function qr(e){return function(){return this._data[e]}}var Kr=qr("milliseconds");var Zr=qr("seconds");var Qr=qr("minutes");var Jr=qr("hours");var $r=qr("days");var eo=qr("months");var to=qr("years");function no(){return I(this.days()/7)}var ao=Math.round;var ro={s:45,m:45,h:22,d:26,M:11};function oo(e,t,n,a,r){return r.relativeTime(t||1,!!n,e,a)}function io(e,t,n){var a=la(e).abs();var r=ao(a.as("s"));var o=ao(a.as("m"));var i=ao(a.as("h"));var s=ao(a.as("d"));var l=ao(a.as("M"));var u=ao(a.as("y"));var c=r<ro.s&&["s",r]||o<=1&&["m"]||o<ro.m&&["mm",o]||i<=1&&["h"]||i<ro.h&&["hh",i]||s<=1&&["d"]||s<ro.d&&["dd",s]||l<=1&&["M"]||l<ro.M&&["MM",l]||u<=1&&["y"]||["yy",u];c[2]=t;c[3]=+e>0;c[4]=n;return oo.apply(null,c)}function so(e){if(e===undefined){return ao}if(typeof e==="function"){ao=e;return true}return false}function lo(e,t){if(ro[e]===undefined){return false}if(t===undefined){return ro[e]}ro[e]=t;return true}function uo(e){var t=this.localeData();var n=io(this,!e,t);if(e){n=t.pastFuture(+this,n)}return t.postformat(n)}var co=Math.abs;function mo(){var e=co(this._milliseconds)/1e3;var t=co(this._days);var n=co(this._months);var a,r,o;a=I(e/60);r=I(a/60);e%=60;a%=60;o=I(n/12);n%=12;var i=o;var s=n;var l=t;var u=r;var c=a;var m=e;var _=this.asSeconds();if(!_){return"P0D"}return(_<0?"-":"")+"P"+(i?i+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(u||c||m?"T":"")+(u?u+"H":"")+(c?c+"M":"")+(m?m+"S":"")}var _o=zn.prototype;_o.abs=Cr;_o.add=Nr;_o.subtract=Pr;_o.as=Lr;_o.asMilliseconds=Ur;_o.asSeconds=Vr;_o.asMinutes=Br;_o.asHours=zr;_o.asDays=Fr;_o.asWeeks=Xr;_o.asMonths=Yr;_o.asYears=Hr;_o.valueOf=Gr;_o._bubble=Rr;_o.get=Wr;_o.milliseconds=Kr;_o.seconds=Zr;_o.minutes=Qr;_o.hours=Jr;_o.days=$r;_o.weeks=no;_o.months=eo;_o.years=to;_o.humanize=uo;_o.toISOString=mo;_o.toString=mo;_o.toJSON=mo;_o.locale=wa;_o.localeData=Ga;_o.toIsoString=A("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",mo);_o.lang=La;ue("X",0,0,"unix");ue("x",0,0,"valueOf");je("x",Ae);je("X",Ee);Ge("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)});Ge("x",function(e,t,n){n._d=new Date(T(e))});u.version="2.14.1";e(wn);u.fn=pr;u.min=Un;u.max=Vn;u.now=Bn;u.utc=_;u.unix=vr;u.months=Ir;u.isDate=r;u.locale=un;u.invalid=v;u.duration=la;u.isMoment=O;u.weekdays=yr;u.parseZone=fr;u.localeData=_n;u.isDuration=Fn;u.monthsShort=Tr;u.weekdaysMin=Ar;u.defineLocale=cn;u.updateLocale=mn;u.locales=dn;u.weekdaysShort=Sr;u.normalizeUnits=q;u.relativeTimeRounding=so;u.relativeTimeThreshold=lo;u.calendarFormat=ga;u.prototype=pr;var po=u;return po});this.CGL=this.CGL||{},this.CGL.COREMODULES=this.CGL.COREMODULES||{},this.CGL.COREMODULES.Copytexture=function(n){var a={};function r(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t);class c{constructor(e){this._logs=[],this.initiator=e}stack(e){console.error("["+this.initiator+"] ",e),console.log((new Error).stack),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"error",e)}groupCollapsed(e){console.groupCollapsed("["+this.initiator+"] "+e)}table(e){console.table(e)}groupEnd(){console.groupEnd()}error(e){console.error("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"error",arguments)}info(e){console.error("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"info",arguments)}warn(e){console.warn("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"warn",arguments)}verbose(){(CABLES.UI&&CABLES.UI.logFilter.shouldPrint(this.initiator,...arguments)||!CABLES.logSilent)&&console.log("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"verbose",arguments)}log(e){(CABLES.UI&&CABLES.UI.logFilter.shouldPrint(this.initiator,...arguments)||!CABLES.logSilent)&&console.log("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"log",arguments)}userInteraction(e){}}const r=function(){this._log=new c("eventtaget"),this._eventCallbacks={},this._logName="",this._logEvents=!1,this._listeners={},this.addEventListener=this.on=function(e,t,n){const a={id:(n||"")+CABLES.uuid(),name:e,cb:t};return this._eventCallbacks[e]?this._eventCallbacks[e].push(a):this._eventCallbacks[e]=[a],this._listeners[a.id]=a,a.id},this.hasEventListener=function(e,t){if(e&&!t)return!!this._listeners[e];if(this._log.warn("old eventtarget function haseventlistener!"),e&&t&&this._eventCallbacks[e]){return-1!=this._eventCallbacks[e].indexOf(t)}},this.removeEventListener=this.off=function(a,r){if(null==a)return;if(!r){const r=this._listeners[a];if(!r)return;let n=!0;for(;n;){n=!1;let t=-1;for(let e=0;e<this._eventCallbacks[r.name].length;e++)0===this._eventCallbacks[r.name][e].id.indexOf(a)&&(n=!0,t=e);-1!==t&&(this._eventCallbacks[r.name].splice(t,1),delete this._listeners[a])}return}this._log.stack(" old function signature: removeEventListener! use listener id");let t=null;for(let e=0;e<this._eventCallbacks[a].length;e++)this._eventCallbacks[a][e].cb==r&&(t=e);null!==t?delete this._eventCallbacks[t]:this._log.warn("removeEventListener not found "+a)},this.logEvents=function(e,t){this._logEvents=e,this._logName=t},this.emitEvent=function(t,n,a,r,o,i,s){if(this._logEvents&&console.log("[event] ",this._logName,t,this._eventCallbacks),this._eventCallbacks[t])for(let e=0;e<this._eventCallbacks[t].length;e++)this._eventCallbacks[t][e]&&this._eventCallbacks[t][e].cb(n,a,r,o,i,s);else this._logEvents&&console.log("[event] has no event callback",t,this._eventCallbacks)}},o={EASINGS:["linear","absolute","smoothstep","smootherstep","Cubic In","Cubic Out","Cubic In Out","Expo In","Expo Out","Expo In Out","Sin In","Sin Out","Sin In Out","Quart In","Quart Out","Quart In Out","Quint In","Quint Out","Quint In Out","Back In","Back Out","Back In Out","Elastic In","Elastic Out","Bounce In","Bounce Out"],EASING_LINEAR:0,EASING_ABSOLUTE:1,EASING_SMOOTHSTEP:2,EASING_SMOOTHERSTEP:3,EASING_CUBICSPLINE:4,EASING_CUBIC_IN:5,EASING_CUBIC_OUT:6,EASING_CUBIC_INOUT:7,EASING_EXPO_IN:8,EASING_EXPO_OUT:9,EASING_EXPO_INOUT:10,EASING_SIN_IN:11,EASING_SIN_OUT:12,EASING_SIN_INOUT:13,EASING_BACK_IN:14,EASING_BACK_OUT:15,EASING_BACK_INOUT:16,EASING_ELASTIC_IN:17,EASING_ELASTIC_OUT:18,EASING_BOUNCE_IN:19,EASING_BOUNCE_OUT:21,EASING_QUART_IN:22,EASING_QUART_OUT:23,EASING_QUART_INOUT:24,EASING_QUINT_IN:25,EASING_QUINT_OUT:26,EASING_QUINT_INOUT:27},i={OP_PORT_TYPE_VALUE:0,OP_PORT_TYPE_FUNCTION:1,OP_PORT_TYPE_OBJECT:2,OP_PORT_TYPE_TEXTURE:2,OP_PORT_TYPE_ARRAY:3,OP_PORT_TYPE_DYNAMIC:4,OP_PORT_TYPE_STRING:5,OP_VERSION_PREFIX:"_v"},s={PORT_DIR_IN:0,PORT_DIR_OUT:1},l={float32Concat:function(e,t){e instanceof Float32Array||(e=new Float32Array(e)),t instanceof Float32Array||(t=new Float32Array(t));const n=new Float32Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}},a=function(){let n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)})},u=a;Math.randomSeed=1,Math.seededRandom=function(e,t){0===Math.randomSeed&&(Math.randomSeed=999*Math.random()),e=e||1,t=t||0,Math.randomSeed=(9301*Math.randomSeed+49297)%233280;return t+Math.randomSeed/233280*(e-t)},l.arrayWriteToEnd=function(t,e){for(let e=1;e<t.length;e++)t[e-1]=t[e];t[t.length-1]=e},l.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},l.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},String.prototype.endl=function(){return this+"\n"},String.prototype.startsWith=function(e){return 0===this.indexOf(e)},String.prototype.endsWith=function(e){return this.match(e+"$")==e};window.performance=window.performance||{offset:Date.now(),now:function(){return Date.now()-this.offset}};const m={Key:function(e){this.time=0,this.value=0,this.ui=null,this.onChange=null,this._easing=0,this.bezTangIn=0,this.bezTangOut=0,this.cb=null,this.cbTriggered=!1;this.setEasing(o.EASING_LINEAR),this.set(e)}};m.Key.cubicSpline=function(e,t,n){let a=e*e,r=a*e;return(2*r-3*a+1)*t.value+(r-2*a+e)*t.bezTangOut+(-2*r+3*a)*n.value+(r-a)*n.bezTangIn},m.Key.easeCubicSpline=function(e,t){return m.Key.cubicSpline(e,this,t)},m.Key.linear=function(e,t,n){return parseFloat(t.value)+parseFloat(n.value-t.value)*e},m.Key.easeLinear=function(e,t){return m.Key.linear(e,this,t)},m.Key.easeAbsolute=function(e,t){return this.value};m.Key.easeExpoIn=function(e,t){return e=function(e){return Math.pow(2,10*(e-1))}(e),m.Key.linear(e,this,t)};m.Key.easeExpoOut=function(e,t){return e=function(e){return e=1-Math.pow(2,-10*e)}(e),m.Key.linear(e,this,t)};m.Key.easeExpoInOut=function(e,t){return e=function(e){return(e*=2)<1?e=.5*Math.pow(2,10*(e-1)):(e--,e=.5*(2-Math.pow(2,-10*e))),e}(e),m.Key.linear(e,this,t)},m.Key.easeSinIn=function(e,t){return e=-1*Math.cos(e*Math.PI/2)+1,m.Key.linear(e,this,t)},m.Key.easeSinOut=function(e,t){return e=Math.sin(e*Math.PI/2),m.Key.linear(e,this,t)},m.Key.easeSinInOut=function(e,t){return e=-.5*(Math.cos(Math.PI*e)-1),m.Key.linear(e,this,t)};m.Key.easeCubicIn=function(e,t){return e=function(e){return e*=e*e}(e),m.Key.linear(e,this,t)},m.Key.easeInQuint=function(e,t){return e*=e*e*e*e,m.Key.linear(e,this,t)},m.Key.easeOutQuint=function(e,t){return e=(e-=1)*e*e*e*e+1,m.Key.linear(e,this,t)},m.Key.easeInOutQuint=function(e,t){return(e/=.5)<1?e*=.5*e*e*e*e:e=.5*((e-=2)*e*e*e*e+2),m.Key.linear(e,this,t)},m.Key.easeInQuart=function(e,t){return e*=e*e*e,m.Key.linear(e,this,t)},m.Key.easeOutQuart=function(e,t){return e=-1*((e-=1)*e*e*e-1),m.Key.linear(e,this,t)},m.Key.easeInOutQuart=function(e,t){return(e/=.5)<1?e*=.5*e*e*e:e=-.5*((e-=2)*e*e*e-2),m.Key.linear(e,this,t)},m.Key.bounce=function(e){return(e/=1)<1/2.75?e*=7.5625*e:e=e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,e},m.Key.easeInBounce=function(e,t){return m.Key.linear(m.Key.bounce(e),this,t)},m.Key.easeOutBounce=function(e,t){return m.Key.linear(m.Key.bounce(e),this,t)},m.Key.easeInElastic=function(e,t){let n=1.70158,a=0,r=1;return 0===e?e=0:1==(e/=1)?e=1:(a||(a=.3),r<Math.abs(1)?(r=1,n=a/4):n=a/(2*Math.PI)*Math.asin(1/r),e=-r*Math.pow(2,10*(e-=1))*Math.sin((1*e-n)*(2*Math.PI)/a)+0),m.Key.linear(e,this,t)},m.Key.easeOutElastic=function(e,t){let n=1.70158,a=0,r=1;return 0===e?e=0:1==(e/=1)?e=1:(a||(a=.3),r<Math.abs(1)?(r=1,n=a/4):n=a/(2*Math.PI)*Math.asin(1/r),e=r*Math.pow(2,-10*e)*Math.sin((1*e-n)*(2*Math.PI)/a)+1+0),m.Key.linear(e,this,t)},m.Key.easeInBack=function(e,t){const n=1.70158;return e=e*e*((n+1)*e-n),m.Key.linear(e,this,t)},m.Key.easeOutBack=function(e,t){const n=1.70158;return e=(e=e/1-1)*e*((n+1)*e+n)+1,m.Key.linear(e,this,t)},m.Key.easeInOutBack=function(e,t){let n=1.70158;return e=(e/=.5)<1?e*e*((1+(n*=1.525))*e-n)*.5:.5*((e-=2)*e*((1+(n*=1.525))*e+n)+2),m.Key.linear(e,this,t)};m.Key.easeCubicOut=function(e,t){return e=function(e){return e=--e*e*e+1}(e),m.Key.linear(e,this,t)};m.Key.easeCubicInOut=function(e,t){return e=function(e){return(e*=2)<1?e*=.5*e*e:e=.5*((e-=2)*e*e+2),e}(e),m.Key.linear(e,this,t)},m.Key.easeSmoothStep=function(e,t){const n=Math.max(0,Math.min(1,e));return e=n*n*(3-2*n),m.Key.linear(e,this,t)},m.Key.easeSmootherStep=function(e,t){const n=Math.max(0,Math.min(1,(e-0)/1));return e=n*n*n*(n*(6*n-15)+10),m.Key.linear(e,this,t)},m.Key.prototype.setEasing=function(e){this._easing=e,this._easing==o.EASING_LINEAR?this.ease=m.Key.easeLinear:this._easing==o.EASING_ABSOLUTE?this.ease=m.Key.easeAbsolute:this._easing==o.EASING_SMOOTHSTEP?this.ease=m.Key.easeSmoothStep:this._easing==o.EASING_SMOOTHERSTEP?this.ease=m.Key.easeSmootherStep:this._easing==o.EASING_CUBIC_IN?this.ease=m.Key.easeCubicIn:this._easing==o.EASING_CUBIC_OUT?this.ease=m.Key.easeCubicOut:this._easing==o.EASING_CUBIC_INOUT?this.ease=m.Key.easeCubicInOut:this._easing==o.EASING_EXPO_IN?this.ease=m.Key.easeExpoIn:this._easing==o.EASING_EXPO_OUT?this.ease=m.Key.easeExpoOut:this._easing==o.EASING_EXPO_INOUT?this.ease=m.Key.easeExpoInOut:this._easing==o.EASING_SIN_IN?this.ease=m.Key.easeSinIn:this._easing==o.EASING_SIN_OUT?this.ease=m.Key.easeSinOut:this._easing==o.EASING_SIN_INOUT?this.ease=m.Key.easeSinInOut:this._easing==o.EASING_BACK_OUT?this.ease=m.Key.easeOutBack:this._easing==o.EASING_BACK_IN?this.ease=m.Key.easeInBack:this._easing==o.EASING_BACK_INOUT?this.ease=m.Key.easeInOutBack:this._easing==o.EASING_ELASTIC_IN?this.ease=m.Key.easeInElastic:this._easing==o.EASING_ELASTIC_OUT?this.ease=m.Key.easeOutElastic:this._easing==o.EASING_ELASTIC_INOUT?this.ease=m.Key.easeElasticInOut:this._easing==o.EASING_BOUNCE_IN?this.ease=m.Key.easeInBounce:this._easing==o.EASING_BOUNCE_OUT?this.ease=m.Key.easeOutBounce:this._easing==o.EASING_QUART_OUT?this.ease=m.Key.easeOutQuart:this._easing==o.EASING_QUART_IN?this.ease=m.Key.easeInQuart:this._easing==o.EASING_QUART_INOUT?this.ease=m.Key.easeInOutQuart:this._easing==o.EASING_QUINT_OUT?this.ease=m.Key.easeOutQuint:this._easing==o.EASING_QUINT_IN?this.ease=m.Key.easeInQuint:this._easing==o.EASING_QUINT_INOUT?this.ease=m.Key.easeInOutQuint:this._easing==o.EASING_CUBICSPLINE?this.ease=m.Key.easeCubicSpline:(this._easing=o.EASING_LINEAR,this.ease=m.Key.easeLinear)},m.Key.prototype.trigger=function(){this.cb(),this.cbTriggered=!0},m.Key.prototype.setValue=function(e){this.value=e,null!==this.onChange&&this.onChange()},m.Key.prototype.set=function(e){e&&(e.e&&this.setEasing(e.e),e.cb&&(this.cb=e.cb,this.cbTriggered=!1),e.b,e.hasOwnProperty("t")&&(this.time=e.t),e.hasOwnProperty("time")&&(this.time=e.time),e.hasOwnProperty("v")?this.value=e.v:e.hasOwnProperty("value")&&(this.value=e.value)),null!==this.onChange&&this.onChange()},m.Key.prototype.getSerialized=function(){const e={};return e.t=this.time,e.v=this.value,e.e=this._easing,e},m.Key.prototype.getEasing=function(){return this._easing};const _=function(e){r.apply(this),e=e||{},this.keys=[],this.onChange=null,this.stayInTimeline=!1,this.loop=!1,this._log=new c("Anim"),this.defaultEasing=e.defaultEasing||o.EASING_LINEAR,this.onLooped=null,this._timesLooped=0,this._needsSort=!1};_.prototype.forceChangeCallback=function(){null!==this.onChange&&this.onChange(),this.emitEvent("onChange",this)},_.prototype.getLoop=function(){return this.loop},_.prototype.setLoop=function(e){this.loop=e,this.emitEvent("onChange",this)},_.prototype.hasEnded=function(e){return 0===this.keys.length||this.keys[this.keys.length-1].time<=e},_.prototype.isRising=function(e){if(this.hasEnded(e))return!1;const t=this.getKeyIndex(e);return this.keys[t].value<this.keys[t+1].value},_.prototype.clearBefore=function(e){const t=this.getValue(e),n=this.getKeyIndex(e);this.setValue(e,t),n>1&&this.keys.splice(0,n)},_.prototype.clear=function(e){let t=0;e&&(t=this.getValue(e)),this.keys.length=0,e&&this.setValue(e,t),null!==this.onChange&&this.onChange(),this.emitEvent("onChange",this)},_.prototype.sortKeys=function(){this.keys.sort((e,t)=>parseFloat(e.time)-parseFloat(t.time)),this._needsSort=!1},_.prototype.getLength=function(){return 0===this.keys.length?0:this.keys[this.keys.length-1].time},_.prototype.getKeyIndex=function(t){let n=0;for(let e=0;e<this.keys.length;e++)if(t>=this.keys[e].time&&(n=e),this.keys[e].time>t)return n;return n},_.prototype.setValue=function(t,n,a){let r=null;for(const e in this.keys)if(this.keys[e].time==t){r=this.keys[e],this.keys[e].setValue(n),this.keys[e].cb=a;break}return r||(r=new m.Key({time:t,value:n,e:this.defaultEasing,cb:a}),this.keys.push(r)),this.onChange&&this.onChange(),this.emitEvent("onChange",this),this._needsSort=!0,r},_.prototype.setKeyEasing=function(e,t){this.keys[e]&&(this.keys[e].setEasing(t),this.emitEvent("onChange",this))},_.prototype.getSerialized=function(){const t={keys:[]};t.loop=this.loop;for(const e in this.keys)t.keys.push(this.keys[e].getSerialized());return t},_.prototype.getKey=function(e){const t=this.getKeyIndex(e);return this.keys[t]},_.prototype.getNextKey=function(e){let t=this.getKeyIndex(e)+1;return t>=this.keys.length&&(t=this.keys.length-1),this.keys[t]},_.prototype.isFinished=function(e){return this.keys.length<=0||e>this.keys[this.keys.length-1].time},_.prototype.isStarted=function(e){return!(this.keys.length<=0)&&e>=this.keys[0].time},_.prototype.getValue=function(e){if(0===this.keys.length)return 0;if(this._needsSort&&this.sortKeys(),e<this.keys[0].time)return this.keys[0].value;const t=this.keys.length-1;if(this.loop&&e>this.keys[t].time){e/this.keys[t].time>this._timesLooped&&(this._timesLooped++,this.onLooped&&this.onLooped()),e=(e-this.keys[0].time)%(this.keys[t].time-this.keys[0].time),e+=this.keys[0].time}const n=this.getKeyIndex(e);if(n>=t)return this.keys[t].cb&&!this.keys[t].cbTriggered&&this.keys[t].trigger(),this.keys[t].value;const a=parseInt(n,10)+1,r=this.keys[n],o=this.keys[a];if(r.cb&&!r.cbTriggered&&r.trigger(),!o)return-1;const i=(e-r.time)/(o.time-r.time);return r.ease||this.log._warn("has no ease",r,o),r.ease(i,o)},_.prototype.addKey=function(e){void 0===e.time?this.log.warn("key time undefined, ignoring!"):(this.keys.push(e),null!==this.onChange&&this.onChange(),this.emitEvent("onChange",this))},_.prototype.easingFromString=function(e){return"linear"==e?o.EASING_LINEAR:"absolute"==e?o.EASING_ABSOLUTE:"smoothstep"==e?o.EASING_SMOOTHSTEP:"smootherstep"==e?o.EASING_SMOOTHERSTEP:"Cubic In"==e?o.EASING_CUBIC_IN:"Cubic Out"==e?o.EASING_CUBIC_OUT:"Cubic In Out"==e?o.EASING_CUBIC_INOUT:"Expo In"==e?o.EASING_EXPO_IN:"Expo Out"==e?o.EASING_EXPO_OUT:"Expo In Out"==e?o.EASING_EXPO_INOUT:"Sin In"==e?o.EASING_SIN_IN:"Sin Out"==e?o.EASING_SIN_OUT:"Sin In Out"==e?o.EASING_SIN_INOUT:"Back In"==e?o.EASING_BACK_IN:"Back Out"==e?o.EASING_BACK_OUT:"Back In Out"==e?o.EASING_BACK_INOUT:"Elastic In"==e?o.EASING_ELASTIC_IN:"Elastic Out"==e?o.EASING_ELASTIC_OUT:"Bounce In"==e?o.EASING_BOUNCE_IN:"Bounce Out"==e?o.EASING_BOUNCE_OUT:"Quart Out"==e?o.EASING_QUART_OUT:"Quart In"==e?o.EASING_QUART_IN:"Quart In Out"==e?o.EASING_QUART_INOUT:"Quint Out"==e?o.EASING_QUINT_OUT:"Quint In"==e?o.EASING_QUINT_IN:"Quint In Out"==e?o.EASING_QUINT_INOUT:void 0},_.prototype.createPort=function(e,t,n){const a=e.inDropDown(t,o.EASINGS);return a.set("linear"),a.defaultValue="linear",a.onChange=function(){this.defaultEasing=this.easingFromString(a.get()),n&&n()}.bind(this),a},_.slerpQuaternion=function(n,a,r,o,i,s){_.slerpQuaternion.q1||(_.slerpQuaternion.q1=quat.create(),_.slerpQuaternion.q2=quat.create());const l=r.getKeyIndex(n);let u=l+1;if(u>=r.keys.length&&(u=r.keys.length-1),l==u)quat.set(a,r.keys[l].value,o.keys[l].value,i.keys[l].value,s.keys[l].value);else{const e=r.keys[l].time,t=(n-e)/(r.keys[u].time-e);quat.set(_.slerpQuaternion.q1,r.keys[l].value,o.keys[l].value,i.keys[l].value,s.keys[l].value),quat.set(_.slerpQuaternion.q2,r.keys[u].value,o.keys[u].value,i.keys[u].value,s.keys[u].value),quat.slerp(a,_.slerpQuaternion.q1,_.slerpQuaternion.q2,t)}return a};m.Anim=_;const d=function(e,t,n,a){r.apply(this),this.data={},this._log=new c("core_port"),this.direction=s.PORT_DIR_IN,this.id=u(),this.parent=e,this.links=[],this.value=0,this.name=t,this.type=n||i.OP_PORT_TYPE_VALUE,this.uiAttribs=a||{},this.anim=null,this._oldAnimVal=-5711,this.defaultValue=null,this._uiActiveState=!0,this.ignoreValueSerialize=!1,this.onLinkChanged=null,this.crashed=!1,this._valueBeforeLink=null,this._lastAnimFrame=-1,this._animated=!1,this.onValueChanged=null,this.onTriggered=null,this.onUiActiveStateChange=null,this.changeAlways=!1,this._warnedDeprecated=!1,this._useVariableName=null,this.activityCounter=0,this._tempLastUiValue=null,Object.defineProperty(this,"val",{get(){return this._log.warn("val getter deprecated!",this),this._log.stack("val getter deprecated"),this._warnedDeprecated=!0,this.get()},set(e){this._log.warn("val setter deprecated!",this),this._log.stack("val setter deprecated"),this.setValue(e),this._warnedDeprecated=!0}})};d.prototype.getValueForDisplay=function(){let e=String(this.value);return this.uiAttribs&&"boolnum"==this.uiAttribs.display&&(e+=" - ",this.value?e+="true":e+="false"),e=e.replace(/(<([^>]+)>)/gi,""),e.length>100&&(e=e.substring(0,100)),e},d.prototype.onAnimToggle=function(){},d.prototype._onAnimToggle=function(){this.onAnimToggle()},d.prototype.remove=function(){this.removeLinks(),this.parent.removePort(this)},d.prototype.setUiAttribs=function(t){let n=!1;this.uiAttribs||(this.uiAttribs={});for(const e in t)this.uiAttribs[e]!=t[e]&&(n=!0),this.uiAttribs[e]=t[e],"group"==e&&this.indexPort&&this.indexPort.setUiAttribs({group:t[e]});n&&this.emitEvent("onUiAttrChange",t)},d.prototype.getUiAttribs=function(){return this.uiAttribs},d.prototype.getUiAttrib=function(e){return this.uiAttribs&&this.uiAttribs.hasOwnProperty(e)?this.uiAttribs[e]:null},d.prototype.get=function(){return this._animated&&this._lastAnimFrame!=this.parent.patch.getFrameNum()&&(this._lastAnimFrame=this.parent.patch.getFrameNum(),this.value=this.anim.getValue(this.parent.patch.timer.getTime()),this._oldAnimVal=this.value,this.forceChange()),this.value},d.prototype.set=d.prototype.setValue=function(e){if(void 0!==e&&this.parent.enabled&&!this.crashed&&(e!==this.value||this.changeAlways||this.type==i.OP_PORT_TYPE_TEXTURE||this.type==i.OP_PORT_TYPE_ARRAY)){if(this._animated)this.anim.setValue(this.parent.patch.timer.getTime(),e);else{try{this.value=e,this.forceChange()}catch(e){this.crashed=!0,this.setValue=function(e){},this.onTriggered=function(){},this._log.error("onvaluechanged exception cought",e),this._log.error(e.stack),this._log.warn("exception in: "+this.parent.name),this.parent.patch.isEditorMode()&&gui.showOpCrash(this.parent),this.parent.patch.emitEvent("exception",e,this.parent),this.parent.onError&&this.parent.onError(e)}this.parent&&this.parent.patch&&this.parent.patch.isEditorMode()&&this.type==i.OP_PORT_TYPE_TEXTURE&&gui.texturePreview().updateTexturePort(this)}if(this.direction==s.PORT_DIR_OUT)for(let e=0;e<this.links.length;++e)this.links[e].setValue()}},d.prototype.updateAnim=function(){this._animated&&(this.value=this.get(),(this._oldAnimVal!=this.value||this.changeAlways)&&(this._oldAnimVal=this.value,this.forceChange()),this._oldAnimVal=this.value)},d.args=function(e){return(e+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1)[0].replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)},d.prototype.forceChange=function(){this.onValueChanged||this.onChange,this._activity(),this.emitEvent("change",this.value,this),this.onChange?this.onChange(this,this.value):this.onValueChanged&&this.onValueChanged(this,this.value)},d.prototype.getTypeString=function(){return this.type==i.OP_PORT_TYPE_VALUE?"Number":this.type==i.OP_PORT_TYPE_FUNCTION?"Trigger":this.type==i.OP_PORT_TYPE_OBJECT?"Object":this.type==i.OP_PORT_TYPE_DYNAMIC?"Dynamic":this.type==i.OP_PORT_TYPE_ARRAY?"Array":this.type==i.OP_PORT_TYPE_STRING?"String":"Unknown"},d.prototype.deSerializeSettings=function(t){if(t&&(t.animated&&this.setAnimated(t.animated),t.useVariable&&this.setVariableName(t.useVariable),t.anim)){this.anim||(this.anim=new _),this.anim.addEventListener("onChange",()=>{this.parent.patch.emitEvent("portAnimUpdated",this.parent,this,this.anim)}),t.anim.loop&&(this.anim.loop=t.anim.loop);for(const e in t.anim.keys)this.anim.keys.push(new m.Key(t.anim.keys[e]))}},d.prototype.getSerialized=function(){const t={};if(t.name=this.getName(),this.ignoreValueSerialize||0!==this.links.length||this.type==i.OP_PORT_TYPE_OBJECT&&this.value&&this.value.tex||(t.value=this.value),this._useVariableName&&(t.useVariable=this._useVariableName),this._animated&&(t.animated=!0),this.anim&&(t.anim=this.anim.getSerialized()),"file"==this.uiAttribs.display&&(t.display=this.uiAttribs.display),this.direction==s.PORT_DIR_OUT&&this.links.length>0){t.links=[];for(const e in this.links)!this.links[e].ignoreInSerialize&&this.links[e].portIn&&this.links[e].portOut&&t.links.push(this.links[e].getSerialized())}return t},d.prototype.shouldLink=function(){return!0},d.prototype.removeLinks=function(){let e=0;for(;this.links.length>0;){if(e++,e>5e3){this._log.warn("could not delete links... / infinite loop"),this.links.length=0;break}this.links[0].remove()}},d.prototype.removeLink=function(t){for(const e in this.links)this.links[e]==t&&this.links.splice(e,1);this.direction==s.PORT_DIR_IN&&(this.type==i.OP_PORT_TYPE_VALUE?this.setValue(this._valueBeforeLink||0):this.setValue(this._valueBeforeLink||null)),this.onLinkChanged&&this.onLinkChanged(),this.emitEvent("onLinkChanged")},d.prototype.getName=function(){return this.name},d.prototype.addLink=function(e){this._valueBeforeLink=this.value,this.links.push(e),this.onLinkChanged&&this.onLinkChanged(),this.emitEvent("onLinkChanged")},d.prototype.getLinkTo=function(t){for(const e in this.links)if(this.links[e].portIn==t||this.links[e].portOut==t)return this.links[e]},d.prototype.removeLinkTo=function(t){for(const e in this.links)if(this.links[e].portIn==t||this.links[e].portOut==t)return this.links[e].remove(),this.onLinkChanged&&this.onLinkChanged(),void this.emitEvent("onLinkChanged")},d.prototype.isLinkedTo=function(t){for(const e in this.links)if(this.links[e].portIn==t||this.links[e].portOut==t)return!0;return!1},d.prototype._activity=function(){this.activityCounter++},d.prototype.trigger=function(){if(this._activity(),0===this.links.length)return;if(!this.parent.enabled)return;let t=null;try{for(let e=0;e<this.links.length;++e)this.links[e].portIn&&(t=this.links[e].portIn,t.parent.patch.pushTriggerStack(t),t._onTriggered(),t.parent.patch.popTriggerStack()),this.links[e]&&this.links[e].activity()}catch(e){this.parent.enabled=!1,this.parent.patch.isEditorMode()&&(this.parent.patch.emitEvent("exception",e,t.parent),this.parent.patch.emitEvent("opcrash",t),t.parent.onError&&t.parent.onError(e)),this._log.warn("exception!"),this._log.error("ontriggered exception cought",e),this._log.error(e.stack),this._log.warn("exception in: "+t.parent.name)}},d.prototype.call=function(){this._log.warn("call deprecated - use trigger() "),this.trigger()},d.prototype.execute=function(){this._log.warn("### execute port: "+this.getName(),this.goals.length)},d.prototype.setVariableName=function(e){this._useVariableName=e},d.prototype.getVariableName=function(){return this._useVariableName},d.prototype.setVariable=function(e){this.setAnimated(!1);const t={useVariable:!1};this._variableIn&&(this._variableIn.removeListener(this.set.bind(this)),this._variableIn=null),e?(this._variableIn=this.parent.patch.getVar(e),this._variableIn?(this.type==i.OP_PORT_TYPE_OBJECT?this._variableIn.addListener(()=>{this.set(null),this.set(this._variableIn.getValue())}):this._variableIn.addListener(this.set.bind(this)),this.set(this._variableIn.getValue())):this._log.warn("PORT VAR NOT FOUND!!!",e),this._useVariableName=e,t.useVariable=!0,t.variableName=this._useVariableName):(t.variableName=this._useVariableName=null,t.useVariable=!1),this.setUiAttribs(t),this.parent.patch.emitEvent("portSetVariable",this.parent,this,e)},d.prototype._handleNoTriggerOpAnimUpdates=function(e){let t=!1;for(let e=0;e<this.parent.portsIn.length;e++)if(this.parent.portsIn.type==i.OP_PORT_TYPE_FUNCTION){t=!0;break}t||(e?this._notriggerAnimUpdate=this.parent.patch.on("onRenderFrame",()=>{this.updateAnim()}):this.parent.patch.removeEventListener(this._notriggerAnimUpdate))},d.prototype.setAnimated=function(e){this._animated!=e&&(this._animated=e,this._animated&&!this.anim&&(this.anim=new _,this.anim.addEventListener("onChange",()=>{this.parent.patch.emitEvent("portAnimUpdated",this.parent,this,this.anim)})),this._onAnimToggle()),this._handleNoTriggerOpAnimUpdates(e),this.setUiAttribs({isAnimated:this._animated})},d.prototype.toggleAnim=function(e){this._animated=!this._animated,this._animated&&!this.anim&&(this.anim=new _,this.anim.addEventListener("onChange",()=>{this.parent.patch.emitEvent("portAnimUpdated",this.parent,this,this.anim)})),this.setAnimated(this._animated),this._onAnimToggle(),this.setUiAttribs({isAnimated:this._animated})},d.prototype.getType=function(){return this.type},d.prototype.isLinked=function(){return this.links.length>0},d.prototype.isBoundToVar=function(){return null!=this._useVariableName},d.prototype.isAnimated=function(){return this._animated},d.prototype.isHidden=function(){return this.uiAttribs.hidePort},d.prototype._onTriggered=function(e){this._activity(),this.parent.updateAnims(),this.parent.enabled&&this.onTriggered&&this.onTriggered(e)},d.prototype._onSetProfiling=function(e){this.parent.patch.profiler.add("port",this),this.setValue(e),this.parent.patch.profiler.add("port",null)},d.prototype._onTriggeredProfiling=function(){this.parent.enabled&&this.onTriggered&&(this.parent.patch.profiler.add("port",this),this.onTriggered(),this.parent.patch.profiler.add("port",null))},d.prototype.onValueChange=function(e){this.onChange=e},d.prototype.getUiActiveState=function(){return this._uiActiveState},d.prototype.setUiActiveState=function(e){this._uiActiveState=e,this.onUiActiveStateChange&&this.onUiActiveStateChange()},d.prototype.hidePort=function(){this._log.warn("op.hideport() is deprecated, do not use it!")},d.portTypeNumberToString=function(e){return e==i.OP_PORT_TYPE_VALUE?"value":e==i.OP_PORT_TYPE_FUNCTION?"function":e==i.OP_PORT_TYPE_OBJECT?"object":e==i.OP_PORT_TYPE_ARRAY?"array":e==i.OP_PORT_TYPE_STRING?"string":e==i.OP_PORT_TYPE_DYNAMIC?"dynamic":"unknown"};const p=function(e,t,n,a,r,o,i,s,l,u){if(this._loc=-1,this._log=new c("cgl_uniform"),this._type=t,this._cgl=e._cgl,this._name=n,this._shader=e,this._value=1e-5,this._oldValue=null,this._port=null,this._structName=l,this._structUniformName=s,this._propertyName=u,this._shader._addUniform(this),this.needsUpdate=!0,this.shaderType=null,this.comment=null,"f"==t)this.set=this.setValue=this.setValueF.bind(this),this.updateValue=this.updateValueF.bind(this);else if("f[]"==t)this.set=this.setValue=this.setValueArrayF.bind(this),this.updateValue=this.updateValueArrayF.bind(this);else if("2f[]"==t)this.set=this.setValue=this.setValueArray2F.bind(this),this.updateValue=this.updateValueArray2F.bind(this);else if("3f[]"==t)this.set=this.setValue=this.setValueArray3F.bind(this),this.updateValue=this.updateValueArray3F.bind(this);else if("4f[]"==t)this.set=this.setValue=this.setValueArray4F.bind(this),this.updateValue=this.updateValueArray4F.bind(this);else if("i"==t)this.set=this.setValue=this.setValueI.bind(this),this.updateValue=this.updateValueI.bind(this);else if("2i"==t)this.set=this.setValue=this.setValue2I.bind(this),this.updateValue=this.updateValue2I.bind(this);else if("3i"==t)this.set=this.setValue=this.setValue3I.bind(this),this.updateValue=this.updateValue3I.bind(this);else if("4i"==t)this.set=this.setValue=this.setValue4I.bind(this),this.updateValue=this.updateValue4I.bind(this);else if("b"==t)this.set=this.setValue=this.setValueBool.bind(this),this.updateValue=this.updateValueBool.bind(this);else if("4f"==t)this.set=this.setValue=this.setValue4F.bind(this),this.updateValue=this.updateValue4F.bind(this);else if("3f"==t)this.set=this.setValue=this.setValue3F.bind(this),this.updateValue=this.updateValue3F.bind(this);else if("2f"==t)this.set=this.setValue=this.setValue2F.bind(this),this.updateValue=this.updateValue2F.bind(this);else if("t"==t)this.set=this.setValue=this.setValueT.bind(this),this.updateValue=this.updateValueT.bind(this);else if("tc"==t)this.set=this.setValue=this.setValueT.bind(this),this.updateValue=this.updateValueT.bind(this);else if("t[]"==t)this.set=this.setValue=this.setValueArrayT.bind(this),this.updateValue=this.updateValueArrayT.bind(this);else{if("m4"!=t&&"m4[]"!=t)throw new Error("Unknown uniform type");this.set=this.setValue=this.setValueM4.bind(this),this.updateValue=this.updateValueM4.bind(this)}"object"==typeof a&&a instanceof d?(this._port=a,this._value=this._port.get(),r&&o&&i?(r instanceof d&&o instanceof d&&i instanceof d||this._log.error("[cgl_uniform] mixed port/value parameter for vec4 ",this._name),this._value=[0,0,0,0],this._port2=r,this._port3=o,this._port4=i,this._port.on("change",this.updateFromPort4f.bind(this)),this._port2.on("change",this.updateFromPort4f.bind(this)),this._port3.on("change",this.updateFromPort4f.bind(this)),this._port4.on("change",this.updateFromPort4f.bind(this)),this.updateFromPort4f()):r&&o?(r instanceof d&&o instanceof d||this._log.error("[cgl_uniform] mixed port/value parameter for vec4 ",this._name),this._value=[0,0,0],this._port2=r,this._port3=o,this._port.on("change",this.updateFromPort3f.bind(this)),this._port2.on("change",this.updateFromPort3f.bind(this)),this._port3.on("change",this.updateFromPort3f.bind(this)),this.updateFromPort3f()):r?(r instanceof d||this._log.error("[cgl_uniform] mixed port/value parameter for vec4 ",this._name),this._value=[0,0],this._port2=r,this._port.on("change",this.updateFromPort2f.bind(this)),this._port2.on("change",this.updateFromPort2f.bind(this)),this.updateFromPort2f()):this._port.on("change",this.updateFromPort.bind(this))):this._value=a,this.setValue(this._value),this.needsUpdate=!0};p.prototype.copy=function(e){const t=new p(e,this._type,this._name,this._value,this._port2,this._port3,this._port4,this._structUniformName,this._structName,this._propertyName);return t.shaderType=this.shaderType,t},p.prototype.getGlslTypeString=function(){return"f"==this._type?"float":"b"==this._type?"bool":"i"==this._type?"int":"2i"==this._type?"ivec2":"2f"==this._type?"vec2":"3f"==this._type?"vec3":"4f"==this._type?"vec4":"m4"==this._type?"mat4":"t"==this._type?"sampler2D":"tc"==this._type?"samplerCube":"3f[]"==this._type||"m4[]"==this._type?null:void this._log.warn("[CGL UNIFORM] unknown glsl type string ",this._type)},p.prototype._isValidLoc=function(){return-1!=this._loc},p.prototype.getType=function(){return this._type},p.prototype.getName=function(){return this._name},p.prototype.getValue=function(){return this._value},p.prototype.getShaderType=function(){return this.shaderType},p.prototype.isStructMember=function(){return!!this._structName},p.prototype.resetLoc=function(){this._loc=-1,this.needsUpdate=!0},p.prototype.bindTextures=function(){return this._value},p.prototype.resetLoc=function(){this._loc=-1,this.needsUpdate=!0},p.prototype.bindTextures=function(){},p.prototype.getLoc=function(){return this._loc},p.prototype.updateFromPort4f=function(){this._value[0]=this._port.get(),this._value[1]=this._port2.get(),this._value[2]=this._port3.get(),this._value[3]=this._port4.get(),this.setValue(this._value)},p.prototype.updateFromPort3f=function(){this._value[0]=this._port.get(),this._value[1]=this._port2.get(),this._value[2]=this._port3.get(),this.setValue(this._value)},p.prototype.updateFromPort2f=function(){this._value[0]=this._port.get(),this._value[1]=this._port2.get(),this.setValue(this._value)},p.prototype.updateFromPort=function(){this.setValue(this._port.get())},p.prototype.updateValueF=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._shader.getCgl().gl.uniform1f(this._loc,this._value),this._cgl.profileData.profileUniformCount++},p.prototype.setValueF=function(e){e!=this._value&&(this.needsUpdate=!0,this._value=e)},p.prototype.updateValueI=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._shader.getCgl().gl.uniform1i(this._loc,this._value),this._cgl.profileData.profileUniformCount++},p.prototype.updateValue2I=function(){this._value&&(this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._shader.getCgl().gl.uniform2i(this._loc,this._value[0],this._value[1]),this.needsUpdate=!1,this._cgl.profileData.profileUniformCount++)},p.prototype.updateValue3I=function(){this._value&&(this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._shader.getCgl().gl.uniform3i(this._loc,this._value[0],this._value[1],this._value[2]),this.needsUpdate=!1,this._cgl.profileData.profileUniformCount++)},p.prototype.updateValue4I=function(){this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._shader.getCgl().gl.uniform4i(this._loc,this._value[0],this._value[1],this._value[2],this._value[3]),this._cgl.profileData.profileUniformCount++},p.prototype.setValueI=function(e){e!=this._value&&(this.needsUpdate=!0,this._value=e)},p.prototype.setValue2I=function(e){e&&(this._oldValue?e[0]==this._oldValue[0]&&e[1]==this._oldValue[1]||(this._oldValue[0]=e[0],this._oldValue[1]=e[1],this.needsUpdate=!0):(this._oldValue=[e[0]-1,1],this.needsUpdate=!0),this._value=e)},p.prototype.setValue3I=function(e){e&&(this._oldValue?e[0]==this._oldValue[0]&&e[1]==this._oldValue[1]&&e[2]==this._oldValue[2]||(this._oldValue[0]=e[0],this._oldValue[1]=e[1],this._oldValue[2]=e[2],this.needsUpdate=!0):(this._oldValue=[e[0]-1,1,2],this.needsUpdate=!0),this._value=e)},p.prototype.setValue4I=function(e){this.needsUpdate=!0,this._value=e||vec4.create()},p.prototype.updateValueBool=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._shader.getCgl().gl.uniform1i(this._loc,this._value?1:0),this._cgl.profileData.profileUniformCount++},p.prototype.setValueBool=function(e){e!=this._value&&(this.needsUpdate=!0,this._value=e)},p.prototype.setValueArray4F=function(e){this.needsUpdate=!0,this._value=e},p.prototype.updateValueArray4F=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._value&&(this._shader.getCgl().gl.uniform4fv(this._loc,this._value),this._cgl.profileData.profileUniformCount++)},p.prototype.setValueArray3F=function(e){this.needsUpdate=!0,this._value=e},p.prototype.updateValueArray3F=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._value&&(this._shader.getCgl().gl.uniform3fv(this._loc,this._value),this._cgl.profileData.profileUniformCount++)},p.prototype.setValueArray2F=function(e){this.needsUpdate=!0,this._value=e},p.prototype.updateValueArray2F=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._value&&(this._shader.getCgl().gl.uniform2fv(this._loc,this._value),this._cgl.profileData.profileUniformCount++)},p.prototype.setValueArrayF=function(e){this.needsUpdate=!0,this._value=e},p.prototype.updateValueArrayF=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._value&&(this._shader.getCgl().gl.uniform1fv(this._loc,this._value),this._cgl.profileData.profileUniformCount++)},p.prototype.setValueArrayT=function(e){this.needsUpdate=!0,this._value=e},p.prototype.updateValue3F=function(){this._value&&(this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._shader.getCgl().gl.uniform3f(this._loc,this._value[0],this._value[1],this._value[2]),this.needsUpdate=!1,this._cgl.profileData.profileUniformCount++)},p.prototype.setValue3F=function(e){e&&(this._oldValue?e[0]==this._oldValue[0]&&e[1]==this._oldValue[1]&&e[2]==this._oldValue[2]||(this._oldValue[0]=e[0],this._oldValue[1]=e[1],this._oldValue[2]=e[2],this.needsUpdate=!0):(this._oldValue=[e[0]-1,1,2],this.needsUpdate=!0),this._value=e)},p.prototype.updateValue2F=function(){this._value&&(this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._shader.getCgl().gl.uniform2f(this._loc,this._value[0],this._value[1]),this.needsUpdate=!1,this._cgl.profileData.profileUniformCount++)},p.prototype.setValue2F=function(e){e&&(this._oldValue?e[0]==this._oldValue[0]&&e[1]==this._oldValue[1]||(this._oldValue[0]=e[0],this._oldValue[1]=e[1],this.needsUpdate=!0):(this._oldValue=[e[0]-1,1],this.needsUpdate=!0),this._value=e)},p.prototype.updateValue4F=function(){this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._value||(this._log.warn("no value for uniform",this._name,this),this._value=[0,0,0,0]),this.needsUpdate=!1,this._shader.getCgl().gl.uniform4f(this._loc,this._value[0],this._value[1],this._value[2],this._value[3]),this._cgl.profileData.profileUniformCount++},p.prototype.setValue4F=function(e){"number"==typeof this.value&&(this.value=vec4.create()),e&&(this._oldValue?e[0]==this._oldValue[0]&&e[1]==this._oldValue[1]&&e[2]==this._oldValue[2]&&e[3]==this._oldValue[3]||(this._oldValue[0]=e[0],this._oldValue[1]=e[1],this._oldValue[2]=e[2],this.needsUpdate=!0):(this._oldValue=[e[0]-1,1,2,3],this.needsUpdate=!0),this._value=e)},p.prototype.updateValueM4=function(){if(this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),!this._value||this._value.length%16!=0)return console.log("this.name",this._name,this._value);this._shader.getCgl().gl.uniformMatrix4fv(this._loc,!1,this._value),this._cgl.profileData.profileUniformCount++},p.prototype.setValueM4=function(e){this.needsUpdate=!0,this._value=e||mat4.create()},p.prototype.updateValueArrayT=function(){this._isValidLoc()?this.needsUpdate=!1:this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._value&&(this._shader.getCgl().gl.uniform1iv(this._loc,this._value),this._cgl.profileData.profileUniformCount++)},p.prototype.updateValueT=function(){this._isValidLoc()||(this._loc=this._shader.getCgl().gl.getUniformLocation(this._shader.getProgram(),this._name),this._cgl.profileData.profileShaderGetUniform++,this._cgl.profileData.profileShaderGetUniformName=this._name),this._cgl.profileData.profileUniformCount++,this._shader.getCgl().gl.uniform1i(this._loc,this._value),this.needsUpdate=!1},p.prototype.setValueT=function(e){this.needsUpdate=!0,this._value=e};const v=180/Math.PI,f=(Math.PI,{SHADERVAR_VERTEX_POSITION:"vPosition",SHADERVAR_VERTEX_NUMBER:"attrVertIndex",SHADERVAR_VERTEX_NORMAL:"attrVertNormal",SHADERVAR_VERTEX_TEXCOORD:"attrTexCoord",SHADERVAR_INSTANCE_MMATRIX:"instMat",SHADERVAR_VERTEX_COLOR:"attrVertColor",SHADERVAR_UNI_PROJMAT:"projMatrix",SHADERVAR_UNI_VIEWMAT:"viewMatrix",SHADERVAR_UNI_MODELMAT:"modelMatrix",SHADERVAR_UNI_NORMALMAT:"normalMatrix",SHADERVAR_UNI_INVVIEWMAT:"inverseViewMatrix",SHADERVAR_UNI_VIEWPOS:"camPos"});const g={lastMesh:null},h=function(e,t,n){this._cgl=e,this._log=new c("cgl_mesh"),this._bufVertexAttrib=null,this._bufVerticesIndizes=this._cgl.gl.createBuffer(),this._indexType=this._cgl.gl.UNSIGNED_SHORT,this._attributes=[],this._attribLocs={},this._geom=null,this._lastShader=null,this._numInstances=0,this._glPrimitive=n,this._preWireframeGeom=null,this.addVertexNumbers=!1,this.feedBackAttributes=[],this.setGeom(t),this._feedBacks=[],this._feedBacksChanged=!1,this._transformFeedBackLoc=-1,this._lastAttrUpdate=0,this._name="unknown",this._cgl.profileData.addHeavyEvent("mesh constructed",this._name),this._queryExt=null,Object.defineProperty(this,"numInstances",{get(){return this._numInstances},set(e){this.setNumInstances(e)}})};h.prototype.updateVertices=function(e){this.setAttribute(f.SHADERVAR_VERTEX_POSITION,e.vertices,3),this._numVerts=e.vertices.length/3},h.prototype.setAttributePointer=function(t,n,a,r){for(let e=0;e<this._attributes.length;e++)this._attributes[e].name==t&&(this._attributes[e].pointer||(this._attributes[e].pointer=[]),this._attributes[e].pointer.push({loc:-1,name:n,stride:a,offset:r,instanced:t==f.SHADERVAR_INSTANCE_MMATRIX}))},h.prototype.getAttribute=function(t){for(let e=0;e<this._attributes.length;e++)if(this._attributes[e].name==t)return this._attributes[e]},h.prototype.setAttributeRange=function(e,t,n,a){e&&(n||a)&&(e.name||(console.log(e),this._log.stack("no attrname?!")),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,e.buffer),this._cgl.profileData.profileMeshAttributes+=a-n||0,this._cgl.profileData.profileSingleMeshAttribute[this._name]=this._cgl.profileData.profileSingleMeshAttribute[this._name]||0,this._cgl.profileData.profileSingleMeshAttribute[this._name]+=a-n||0,e.numItems<t.length/e.itemSize&&this._resizeAttr(t,e),a>=t.length-1&&this._log.log(this._cgl.canvas.id+" "+e.name+" buffersubdata out of bounds ?",t.length,a,n,e),1==this._cgl.glVersion?this._cgl.gl.bufferSubData(this._cgl.gl.ARRAY_BUFFER,0,t):this._cgl.gl.bufferSubData(this._cgl.gl.ARRAY_BUFFER,4*n,t,n,a-n))},h.prototype._resizeAttr=function(e,t){t.buffer&&this._cgl.gl.deleteBuffer(t.buffer),t.buffer=this._cgl.gl.createBuffer(),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,t.buffer),this._bufferArray(e,t),t.numItems=e.length/t.itemSize},h.prototype._bufferArray=function(e,t){let n=null;e&&(this._cgl.debugOneFrame&&console.log("_bufferArray",e.length,t.name),e instanceof Float32Array?n=e:t&&n&&n.length==e.length?n.set(e):(n=new Float32Array(e),this._cgl.debugOneFrame&&console.log("_bufferArray create new float32array",e.length,t.name),this._cgl.profileData.profileNonTypedAttrib++,this._cgl.profileData.profileNonTypedAttribNames="("+this._name+":"+t.name+")"),t.arrayLength=n.length,this._cgl.gl.bufferData(this._cgl.gl.ARRAY_BUFFER,n,this._cgl.gl.DYNAMIC_DRAW))},h.prototype.addAttribute=h.prototype.updateAttribute=h.prototype.setAttribute=function(e,t,n,a){if(!t)throw this._log.error("mesh addAttribute - no array given! "+e),new Error;let r=null,o=!1,i=0;const s=t.length/n;for(this._cgl.profileData.profileMeshAttributes+=s||0,"function"==typeof a&&(r=a),"object"==typeof a&&(a.cb&&(r=a.cb),a.instanced&&(o=a.instanced)),e==f.SHADERVAR_INSTANCE_MMATRIX&&(o=!0),i=0;i<this._attributes.length;i++){const n=this._attributes[i];if(n.name==e)return n.numItems===s||this._resizeAttr(t,n),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,n.buffer),this._bufferArray(t,n),n}const l=this._cgl.gl.createBuffer();this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,l);let u=this._cgl.gl.FLOAT;a&&a.type&&(u=a.type);const c={buffer:l,name:e,cb:r,itemSize:n,numItems:s,startItem:0,instanced:o,type:u};return this._bufferArray(t,c),e==f.SHADERVAR_VERTEX_POSITION&&(this._bufVertexAttrib=c),this._attributes.push(c),this._attribLocs={},c},h.prototype.getAttributes=function(){return this._attributes},h.prototype.updateTexCoords=function(t){if(t.texCoords&&t.texCoords.length>0)this.setAttribute(f.SHADERVAR_VERTEX_TEXCOORD,t.texCoords,2);else{const e=new Float32Array(Math.round(t.vertices.length/3*2));this.setAttribute(f.SHADERVAR_VERTEX_TEXCOORD,e,2)}},h.prototype.updateNormals=function(t){if(t.vertexNormals&&t.vertexNormals.length>0)this.setAttribute("attrVertNormal",t.vertexNormals,3);else{const e=new Float32Array(Math.round(t.vertices.length));this.setAttribute("attrVertNormal",e,3)}},h.prototype._setVertexNumbers=function(e){if(!this._verticesNumbers||this._verticesNumbers.length!=this._numVerts||e){if(e)this._verticesNumbers=e;else{this._verticesNumbers=new Float32Array(this._numVerts);for(let e=0;e<this._numVerts;e++)this._verticesNumbers[e]=e}this.setAttribute(f.SHADERVAR_VERTEX_NUMBER,this._verticesNumbers,1,(e,t,n)=>{n.uniformNumVertices||(n.uniformNumVertices=new p(n,"f","numVertices",this._numVerts)),n.uniformNumVertices.setValue(this._numVerts)})}},h.prototype.setVertexIndices=function(t){if(this._bufVerticesIndizes)if(t.length>0){for(let e=0;e<t.length;e++)if(t[e]>=this._numVerts)return void this._log.warn("invalid index in "+this._name);this._cgl.gl.bindBuffer(this._cgl.gl.ELEMENT_ARRAY_BUFFER,this._bufVerticesIndizes),t instanceof Float32Array&&this._log.warn("vertIndices float32Array: "+this._name),t instanceof Uint32Array?(this.vertIndicesTyped=t,this._indexType=this._cgl.gl.UNSIGNED_INT):t instanceof Uint16Array?this.vertIndicesTyped=t:this.vertIndicesTyped=new Uint16Array(t),this._cgl.gl.bufferData(this._cgl.gl.ELEMENT_ARRAY_BUFFER,this.vertIndicesTyped,this._cgl.gl.DYNAMIC_DRAW),this._bufVerticesIndizes.itemSize=1,this._bufVerticesIndizes.numItems=t.length}else this._bufVerticesIndizes.numItems=0;else this._log.warn("no bufVerticesIndizes: "+this._name)},h.prototype.setGeom=function(e,t){this._geom=e,null!=e.glPrimitive&&(this._glPrimitive=e.glPrimitive),this._geom&&this._geom.name&&(this._name="mesh "+this._geom.name),g.lastMesh=null,this._cgl.profileData.profileMeshSetGeom++,this._disposeAttributes(),this.updateVertices(this._geom),this.setVertexIndices(this._geom.verticesIndices),this.updateTexCoords(this._geom),this.updateNormals(this._geom),this._geom.hasOwnProperty("tangents")&&this._geom.tangents&&this._geom.tangents.length>0&&this.setAttribute("attrTangent",this._geom.tangents,3),this._geom.hasOwnProperty("biTangents")&&this._geom.biTangents&&this._geom.biTangents.length>0&&this.setAttribute("attrBiTangent",this._geom.biTangents,3),this._geom.vertexColors.length>0&&(this._geom.vertexColors.flat&&this._geom.vertexColors.flat(100),this.setAttribute("attrVertColor",this._geom.vertexColors,4)),this.addVertexNumbers&&this._setVertexNumbers();const n=this._geom.getAttributes();for(const e in n)this.setAttribute(e,n[e].data,n[e].itemSize);t&&(this._geom=null)},h.prototype._preBind=function(t){for(let e=0;e<this._attributes.length;e++)this._attributes[e].cb&&this._attributes[e].cb(this._attributes[e],this._geom,t)},h.prototype._checkAttrLengths=function(){for(let e=0;e<this._attributes.length;e++)if(this._attributes[e].arrayLength/this._attributes[e].itemSize<this._attributes[0].arrayLength/this._attributes[0].itemSize){let e="unknown";this._geom&&(e=this._geom.name)}},h.prototype._bind=function(a){if(!a.isValid())return;let t=[];if(this._attribLocs[a.id]?t=this._attribLocs[a.id]:this._attribLocs[a.id]=t,this._lastShader=a,a.lastCompile>this._lastAttrUpdate||t.length!=this._attributes.length){this._lastAttrUpdate=a.lastCompile;for(let e=0;e<this._attributes.length;e++)t[e]=-1}for(let e=0;e<this._attributes.length;e++){const n=this._attributes[e];if(-1==t[e]&&n._attrLocationLastShaderTime!=a.lastCompile&&(n._attrLocationLastShaderTime=a.lastCompile,t[e]=this._cgl.glGetAttribLocation(a.getProgram(),n.name),this._cgl.profileData.profileAttrLoc++),-1!=t[e])if(this._cgl.gl.enableVertexAttribArray(t[e]),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,n.buffer),n.instanced)if(n.itemSize<=4)n.itemSize&&0!=n.itemSize||this._log.warn("instanced attrib itemsize error",this._geom.name,n),this._cgl.gl.vertexAttribPointer(t[e],n.itemSize,n.type,!1,4*n.itemSize,0),this._cgl.gl.vertexAttribDivisor(t[e],1);else if(16==n.itemSize){const a=64;this._cgl.gl.vertexAttribPointer(t[e],4,n.type,!1,a,0),this._cgl.gl.enableVertexAttribArray(t[e]+1),this._cgl.gl.vertexAttribPointer(t[e]+1,4,n.type,!1,a,16),this._cgl.gl.enableVertexAttribArray(t[e]+2),this._cgl.gl.vertexAttribPointer(t[e]+2,4,n.type,!1,a,32),this._cgl.gl.enableVertexAttribArray(t[e]+3),this._cgl.gl.vertexAttribPointer(t[e]+3,4,n.type,!1,a,48),this._cgl.gl.vertexAttribDivisor(t[e],1),this._cgl.gl.vertexAttribDivisor(t[e]+1,1),this._cgl.gl.vertexAttribDivisor(t[e]+2,1),this._cgl.gl.vertexAttribDivisor(t[e]+3,1)}else this._log.warn("unknown instance attrib size",n.name);else{if(n.itemSize&&0!=n.itemSize||this._log.warn("attrib itemsize error",this._name,n),this._cgl.gl.vertexAttribPointer(t[e],n.itemSize,n.type,!1,4*n.itemSize,0),n.pointer)for(let t=0;t<n.pointer.length;t++){const e=n.pointer[t];-1==e.loc&&(e.loc=this._cgl.glGetAttribLocation(a.getProgram(),e.name)),this._cgl.profileData.profileAttrLoc++,this._cgl.gl.enableVertexAttribArray(e.loc),this._cgl.gl.vertexAttribPointer(e.loc,n.itemSize,n.type,!1,e.stride,e.offset)}this.bindFeedback(n)}}0!==this._bufVerticesIndizes.numItems&&this._cgl.gl.bindBuffer(this._cgl.gl.ELEMENT_ARRAY_BUFFER,this._bufVerticesIndizes)},h.prototype.unBind=function(){const e=this._lastShader;if(this._lastShader=null,!e)return;let t=[];this._attribLocs[e.id]?t=this._attribLocs[e.id]:this._attribLocs[e.id]=t,g.lastMesh=null;for(let e=0;e<this._attributes.length;e++)this._attributes[e].instanced&&(this._attributes[e].itemSize<=4?(-1!=t[e]&&this._cgl.gl.vertexAttribDivisor(t[e],0),t[e]>=0&&this._cgl.gl.disableVertexAttribArray(t[e])):(this._cgl.gl.vertexAttribDivisor(t[e],0),this._cgl.gl.vertexAttribDivisor(t[e]+1,0),this._cgl.gl.vertexAttribDivisor(t[e]+2,0),this._cgl.gl.vertexAttribDivisor(t[e]+3,0),this._cgl.gl.disableVertexAttribArray(t[e]+1),this._cgl.gl.disableVertexAttribArray(t[e]+2),this._cgl.gl.disableVertexAttribArray(t[e]+3))),-1!=t[e]&&this._cgl.gl.disableVertexAttribArray(t[e])},h.prototype.meshChanged=function(){return this._cgl.lastMesh&&this._cgl.lastMesh!=this},h.prototype.printDebug=function(e){console.log("--attributes");for(let e=0;e<this._attributes.length;e++)console.log("attribute "+e+" "+this._attributes[e].name)},h.prototype.setNumVertices=function(e){this._bufVertexAttrib.numItems=e},h.prototype.getNumVertices=function(){return this._bufVertexAttrib.numItems},h.prototype.render=function(n){if(!n||!n.isValid())return;if(this._checkAttrLengths(),this._geom&&(!this._preWireframeGeom||n.wireframe||this._geom.isIndexed()||(this.setGeom(this._preWireframeGeom),this._preWireframeGeom=null),n.wireframe)){let e=!1;this._geom.isIndexed()&&(this._preWireframeGeom||(this._preWireframeGeom=this._geom,this._geom=this._geom.copy()),this._geom.unIndex(),e=!0),this._geom.getAttribute("attrBarycentric")||(this._preWireframeGeom||(this._preWireframeGeom=this._geom,this._geom=this._geom.copy()),e=!0,this._geom.calcBarycentric()),e&&this.setGeom(this._geom)}let e=!1;g.lastMesh!=this&&(g.lastMesh&&g.lastMesh.unBind(),e=!0),e&&this._preBind(n),n.bind(),n.bindTextures&&n.bindTextures(),this._bind(n),this.addVertexNumbers&&this._setVertexNumbers(),g.lastMesh=this;let t=this._cgl.gl.TRIANGLES;void 0!==this._glPrimitive&&(t=this._glPrimitive),null!==n.glPrimitive&&(t=n.glPrimitive);let a=1,r=this._cgl.profileData.doProfileGlQuery,o=!1;if(r){let e=this._name+" "+n.getName()+" #"+n.id;this._numInstances&&(e+=" instanced "+this._numInstances+"x");let t=this._cgl.profileData.glQueryData[e];if(t||(t={id:e,num:0},this._cgl.profileData.glQueryData[e]=t),this._queryExt||!1===this._queryExt||(this._queryExt=this._cgl.gl.getExtension("EXT_disjoint_timer_query_webgl2")||!1),this._queryExt){if(t._drawQuery){if(this._cgl.gl.getQueryParameter(t._drawQuery,this._cgl.gl.QUERY_RESULT_AVAILABLE)){const n=this._cgl.gl.getQueryParameter(t._drawQuery,this._cgl.gl.QUERY_RESULT)/1e6;t._times+=n,t._numcount++,t.when=performance.now(),t._drawQuery=null,t.queryStarted=!1}}t.queryStarted||(t._drawQuery=this._cgl.gl.createQuery(),this._cgl.gl.beginQuery(this._queryExt.TIME_ELAPSED_EXT,t._drawQuery),o=t.queryStarted=!0)}}if(this.hasFeedbacks()?this.drawFeedbacks(n,t):0===this._bufVerticesIndizes.numItems?(t==this._cgl.gl.TRIANGLES&&(a=3),0===this._numInstances?this._cgl.gl.drawArrays(t,this._bufVertexAttrib.startItem,this._bufVertexAttrib.numItems-this._bufVertexAttrib.startItem):this._cgl.gl.drawArraysInstanced(t,this._bufVertexAttrib.startItem,this._bufVertexAttrib.numItems,this._numInstances)):0===this._numInstances?this._cgl.gl.drawElements(t,this._bufVerticesIndizes.numItems,this._indexType,0):this._cgl.gl.drawElementsInstanced(t,this._bufVerticesIndizes.numItems,this._indexType,0,this._numInstances),this._cgl.debugOneFrame&&this._cgl.gl.getError()!=this._cgl.gl.NO_ERROR){this._log.error("mesh draw gl error"),this._log.error("mesh",this),this._log.error("shader",n);for(let e=0;e<this._cgl.gl.getProgramParameter(n.getProgram(),this._cgl.gl.ACTIVE_ATTRIBUTES);e++){const t=this._cgl.gl.getActiveAttrib(n.getProgram(),e).name;this._log.error("attrib ",t)}}this._cgl.profileData.profileMeshNumElements+=this._bufVertexAttrib.numItems/a*(this._numInstances||1),this._cgl.profileData.profileMeshDraw++,r&&o&&this._cgl.gl.endQuery(this._queryExt.TIME_ELAPSED_EXT),this.unBind()},h.prototype.setNumInstances=function(n){if(n=Math.max(0,n),this._numInstances!=n){this._numInstances=n;const t=new Float32Array(n);for(let e=0;e<n;e++)t[e]=e;this.setAttribute("instanceIndex",t,1,{instanced:!0})}},h.prototype._disposeAttributes=function(){if(this._attributes){for(let e=0;e<this._attributes.length;e++)this._attributes[e].buffer&&(this._cgl.gl.deleteBuffer(this._attributes[e].buffer),this._attributes[e].buffer=null);this._attributes.length=0}},h.prototype.dispose=function(){this._bufVertexAttrib&&this._bufVertexAttrib.buffer&&this._cgl.gl.deleteBuffer(this._bufVertexAttrib.buffer),this._bufVerticesIndizes&&this._cgl.gl.deleteBuffer(this._bufVerticesIndizes),this._bufVerticesIndizes=null,this._disposeAttributes()},function(e){e.prototype.hasFeedbacks=function(){return this._feedBacks.length>0},e.prototype.removeFeedbacks=function(e){this._feedbacks&&(this._feedbacks.length=0,this._feedBacksChanged=!0)},e.prototype.setAttributeFeedback=function(){},e.prototype.setFeedback=function(e,t,n){let a={nameOut:t},r=!1;this.unBindFeedbacks();for(let e=0;e<this._feedBacks.length;e++)this._feedBacks[e].nameOut==t&&(a=this._feedBacks[e],r=!0);return r||(this._feedBacksChanged=!0),a.initialArr=n,a.attrib=e,a.outBuffer&&this._cgl.gl.deleteBuffer(a.outBuffer),a.outBuffer=this._cgl.gl.createBuffer(),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,a.outBuffer),this._cgl.gl.bufferData(this._cgl.gl.ARRAY_BUFFER,a.initialArr,this._cgl.gl.STATIC_DRAW),this._cgl.gl.bindBuffer(this._cgl.gl.ARRAY_BUFFER,a.attrib.buffer),this._cgl.gl.bufferData(this._cgl.gl.ARRAY_BUFFER,a.initialArr,this._cgl.gl.STATIC_DRAW),r||this._feedBacks.push(a),a},e.prototype.bindFeedback=function(n){if(!this._feedBacks||0===this._feedBacks.length)return;-1==this._transformFeedBackLoc&&(this._transformFeedBackLoc=this._cgl.gl.createTransformFeedback()),this._cgl.gl.bindTransformFeedback(this._cgl.gl.TRANSFORM_FEEDBACK,this._transformFeedBackLoc);let a=!1;for(let t=0;t<this._feedBacks.length;t++){const e=this._feedBacks[t];e.attrib==n&&(a=!0,this._cgl.gl.bindBufferBase(this._cgl.gl.TRANSFORM_FEEDBACK_BUFFER,t,e.outBuffer))}},e.prototype.drawFeedbacks=function(e,t){let n=0;if(this._feedBacksChanged){const t=[];for(this._cgl.gl.bindTransformFeedback(this._cgl.gl.TRANSFORM_FEEDBACK,this._transformFeedBackLoc),n=0;n<this._feedBacks.length;n++)t.push(this._feedBacks[n].nameOut);return e.setFeedbackNames(t),console.log("feedbacknames",t),e.compile(),this._feedBacksChanged=!1,this._cgl.gl.bindTransformFeedback(this._cgl.gl.TRANSFORM_FEEDBACK,null),void console.log("changed finished")}this._cgl.gl.beginTransformFeedback(this.glPrimitive),this._cgl.gl.drawArrays(t,0,this._feedBacks[0].attrib.numItems),this._cgl.gl.endTransformFeedback(),this.unBindFeedbacks(),this.feedBacksSwapBuffers()},e.prototype.unBindFeedbacks=function(){for(let e=0;e<this._feedBacks.length;e++)this._cgl.gl.bindBufferBase(this._cgl.gl.TRANSFORM_FEEDBACK_BUFFER,e,null);this._cgl.gl.bindTransformFeedback(this._cgl.gl.TRANSFORM_FEEDBACK,null)},e.prototype.feedBacksSwapBuffers=function(){for(let t=0;t<this._feedBacks.length;t++){const e=this._feedBacks[t].attrib.buffer;this._feedBacks[t].attrib.buffer=this._feedBacks[t].outBuffer,this._feedBacks[t].outBuffer=e}}}(h);const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",x=new Uint8Array(256);for(let e=0;e<b.length;e++)x[b.charCodeAt(e)]=e;const O=x,I=function(e){let t,n,a,r,o,i=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);let u=new ArrayBuffer(i),c=new Uint8Array(u);for(t=0;t<s;t+=4)n=O[e.charCodeAt(t)],a=O[e.charCodeAt(t+1)],r=O[e.charCodeAt(t+2)],o=O[e.charCodeAt(t+3)],c[l++]=n<<2|a>>4,c[l++]=(15&a)<<4|r>>2,c[l++]=(3&r)<<6|63&o;return u};class T{constructor(e){this._init(),this._first=!0,this._wireMesh=null,e&&this.apply(e)}_init(){this._max=[-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE],this._min=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this._center=[0,0,0],this._size=[0,0,0],this._maxAxis=0,this._first=!0}get maxAxis(){return this._maxAxis||1}get size(){return this._size}get center(){return this._center}get x(){return this._center[0]}get y(){return this._center[1]}get z(){return this._center[2]}get minX(){return this._min[0]}get minY(){return this._min[1]}get minZ(){return this._min[2]}get maxX(){return this._max[0]}get maxY(){return this._max[1]}get maxZ(){return this._max[2]}apply(t,e){if(t){if(t instanceof T){const e=t;this.applyPos(e.maxX,e.maxY,e.maxZ),this.applyPos(e.minX,e.minY,e.minZ)}else for(let e=0;e<t.vertices.length;e+=3)this.applyPos(t.vertices[e],t.vertices[e+1],t.vertices[e+2]);this.calcCenterSize()}}copy(){return new T(this)}get changed(){return!(this._max[0]==-Number.MAX_VALUE&&this._max[1]==-Number.MAX_VALUE&&this._max[2]==-Number.MAX_VALUE)}applyPos(e,t,n){if(e!=Number.MAX_VALUE&&e!=-Number.MAX_VALUE&&t!=Number.MAX_VALUE&&t!=-Number.MAX_VALUE&&n!=Number.MAX_VALUE&&n!=-Number.MAX_VALUE&&CABLES.UTILS.isNumeric(e)&&CABLES.UTILS.isNumeric(t)&&CABLES.UTILS.isNumeric(n)){if(this._first)return this._max[0]=e,this._max[1]=t,this._max[2]=n,this._min[0]=e,this._min[1]=t,this._min[2]=n,void(this._first=!1);this._max[0]=Math.max(this._max[0],e),this._max[1]=Math.max(this._max[1],t),this._max[2]=Math.max(this._max[2],n),this._min[0]=Math.min(this._min[0],e),this._min[1]=Math.min(this._min[1],t),this._min[2]=Math.min(this._min[2],n)}}calcCenterSize(){this._first||(this._size[0]=this._max[0]-this._min[0],this._size[1]=this._max[1]-this._min[1],this._size[2]=this._max[2]-this._min[2],this._center[0]=(this._min[0]+this._max[0])/2,this._center[1]=(this._min[1]+this._max[1])/2,this._center[2]=(this._min[2]+this._max[2])/2,this._maxAxis=Math.max(this._size[2],Math.max(this._size[0],this._size[1])))}mulMat4(e){this._first&&(this._max[0]=0,this._max[1]=0,this._max[2]=0,this._min[0]=0,this._min[1]=0,this._min[2]=0,this._first=!1),vec3.transformMat4(this._max,this._max,e),vec3.transformMat4(this._min,this._min,e),this.calcCenterSize()}render(e,t){this._wireMesh||(this._wireMesh=new CGL.WireCube(e)),e.pushModelMatrix(),mat4.translate(e.mMatrix,e.mMatrix,this._center),this._wireMesh.render(e,this._size[0]/2,this._size[1]/2,this._size[2]/2),e.popModelMatrix()}}const y=function(e){this.name=e||"unknown",this._log=new c("cgl_geometry"),this.faceVertCount=3,this._vertices=[],this.verticesIndices=[],this.texCoords=new Float32Array,this.texCoordsIndices=[],this.vertexNormals=[],this.tangents=[],this.biTangents=[],this.morphTargets=[],this.vertexColors=[],this._attributes={},this.glPrimitive=null,Object.defineProperty(this,"vertices",{get(){return this._vertices},set(e){this.setVertices(e)}})};y.prototype.clear=function(){this.vertices=new Float32Array([]),this.verticesIndices.length=0,this.texCoords=new Float32Array([]),this.texCoordsIndices.length=0,this.vertexNormals=new Float32Array([])},y.prototype.getAttributes=function(){return this._attributes},y.prototype.getAttribute=function(t){for(const e in this._attributes)if(this._attributes[e].name==t)return this._attributes[e];return null},y.prototype.setAttribute=function(e,t,n){let a="";1==n?a="float":2==n?a="vec2":3==n?a="vec3":4==n&&(a="vec4");const r={name:e,data:t,itemSize:n,type:a};this._attributes[e]=r},y.prototype.setVertices=function(e){e instanceof Float32Array?this._vertices=e:this._vertices=new Float32Array(e)},y.prototype.setTexCoords=function(e){e instanceof Float32Array?this.texCoords=e:this.texCoords=new Float32Array(e)},y.prototype.calcNormals=function(e){e||this.unIndex(),this.calculateNormals({})},y.prototype.flipNormals=function(t,n,a){let r=vec3.create();null==t&&(t=1),null==n&&(n=1),null==a&&(a=1);for(let e=0;e<this.vertexNormals.length;e+=3)vec3.set(r,this.vertexNormals[e+0],this.vertexNormals[e+1],this.vertexNormals[e+2]),r[0]*=-t,r[1]*=-n,r[2]*=-a,vec3.normalize(r,r),this.vertexNormals[e+0]=r[0],this.vertexNormals[e+1]=r[1],this.vertexNormals[e+2]=r[2]},y.prototype.getNumTriangles=function(){return this.verticesIndices&&this.verticesIndices.length?this.verticesIndices.length/3:this.vertices.length/3},y.prototype.flipVertDir=function(){const t=[];t.length=this.verticesIndices.length;for(let e=0;e<this.verticesIndices.length;e+=3)t[e]=this.verticesIndices[e+2],t[e+1]=this.verticesIndices[e+1],t[e+2]=this.verticesIndices[e];this.verticesIndices=t},y.prototype.setPointVertices=function(t){if(t.length%3==0){t instanceof Float32Array?this.vertices=t:this.vertices=new Float32Array(t),this.texCoords instanceof Float32Array||(this.texCoords=new Float32Array(t.length/3*2)),this.verticesIndices.length=t.length/3;for(let e=0;e<t.length/3;e++)this.verticesIndices[e]=e,this.texCoords[2*e]=0,this.texCoords[2*e+1]=0}else this._log.error("SetPointVertices: Array must be multiple of three.")},y.prototype.merge=function(t){if(!t)return;const n=this.verticesIndices.length,a=this.vertices.length/3;this.verticesIndices.length=this.verticesIndices.length+t.verticesIndices.length;for(let e=0;e<t.verticesIndices.length;e++)this.verticesIndices[n+e]=t.verticesIndices[e]+a;this.vertices=l.float32Concat(this.vertices,t.vertices),this.texCoords=l.float32Concat(this.texCoords,t.texCoords),this.vertexNormals=l.float32Concat(this.vertexNormals,t.vertexNormals),this.tangents=l.float32Concat(this.tangents,t.tangents),this.biTangents=l.float32Concat(this.biTangents,t.biTangents)},y.prototype.copy=function(){let e=0;const t=new y(this.name+" copy");if(t.faceVertCount=this.faceVertCount,t.glPrimitive=this.glPrimitive,t.setVertices(this._vertices.slice(0)),this.verticesIndices)for(t.verticesIndices.length=this.verticesIndices.length,e=0;e<this.verticesIndices.length;e++)t.verticesIndices[e]=this.verticesIndices[e];if(this.texCoords)for(t.texCoords=new Float32Array(this.texCoords.length),e=0;e<this.texCoords.length;e++)t.texCoords[e]=this.texCoords[e];if(this.texCoordsIndices)for(t.texCoordsIndices.length=this.texCoordsIndices.length,e=0;e<this.texCoordsIndices.length;e++)t.texCoordsIndices[e]=this.texCoordsIndices[e];if(this.vertexNormals)for(t.vertexNormals=new Float32Array(this.vertexNormals.length),e=0;e<this.vertexNormals.length;e++)t.vertexNormals[e]=this.vertexNormals[e];if(this.tangents)for(t.tangents=[],t.tangents.length=this.tangents.length,e=0;e<this.tangents.length;e++)t.tangents[e]=this.tangents[e];if(this.biTangents)for(t.biTangents=[],t.biTangents.length=this.biTangents.length,e=0;e<this.biTangents.length;e++)t.biTangents[e]=this.biTangents[e];for(t.morphTargets.length=this.morphTargets.length,e=0;e<this.morphTargets.length;e++)t.morphTargets[e]=this.morphTargets[e];for(t.vertexColors.length=this.vertexColors.length,e=0;e<this.vertexColors.length;e++)t.vertexColors[e]=this.vertexColors[e];return t},y.prototype.calculateNormals=function(t){const n=vec3.create(),a=vec3.create(),r=vec3.create();function o(e){return vec3.subtract(n,e[0],e[1]),vec3.subtract(a,e[0],e[2]),vec3.cross(r,n,a),vec3.normalize(r,r),t&&t.forceZUp&&r[2]<0&&(r[0]*=-1,r[1]*=-1,r[2]*=-1),r}this.getVertexVec=function(e){const t=[0,0,0];return t[0]=this.vertices[3*e+0],t[1]=this.vertices[3*e+1],t[2]=this.vertices[3*e+2],t},this.vertexNormals instanceof Float32Array&&this.vertexNormals.length==this.vertices.length||(this.vertexNormals=new Float32Array(this.vertices.length));for(let e=0;e<this.vertices.length;e++)this.vertexNormals[e]=0;if(this.isIndexed()){const t=[];t.length=Math.floor(this.verticesIndices.length/3);for(let e=0;e<this.verticesIndices.length;e+=3){const a=[this.getVertexVec(this.verticesIndices[e+0]),this.getVertexVec(this.verticesIndices[e+1]),this.getVertexVec(this.verticesIndices[e+2])];t[e/3]=o(a),this.vertexNormals[3*this.verticesIndices[e+0]+0]+=t[e/3][0],this.vertexNormals[3*this.verticesIndices[e+0]+1]+=t[e/3][1],this.vertexNormals[3*this.verticesIndices[e+0]+2]+=t[e/3][2],this.vertexNormals[3*this.verticesIndices[e+1]+0]+=t[e/3][0],this.vertexNormals[3*this.verticesIndices[e+1]+1]+=t[e/3][1],this.vertexNormals[3*this.verticesIndices[e+1]+2]+=t[e/3][2],this.vertexNormals[3*this.verticesIndices[e+2]+0]+=t[e/3][0],this.vertexNormals[3*this.verticesIndices[e+2]+1]+=t[e/3][1],this.vertexNormals[3*this.verticesIndices[e+2]+2]+=t[e/3][2]}for(let t=0;t<this.verticesIndices.length;t+=3)for(let e=0;e<3;e++){const a=[this.vertexNormals[3*this.verticesIndices[t+e]+0],this.vertexNormals[3*this.verticesIndices[t+e]+1],this.vertexNormals[3*this.verticesIndices[t+e]+2]];vec3.normalize(a,a),this.vertexNormals[3*this.verticesIndices[t+e]+0]=a[0],this.vertexNormals[3*this.verticesIndices[t+e]+1]=a[1],this.vertexNormals[3*this.verticesIndices[t+e]+2]=a[2]}}else{const t=[];for(let e=0;e<this.vertices.length;e+=9){const a=o([[this.vertices[e+0],this.vertices[e+1],this.vertices[e+2]],[this.vertices[e+3],this.vertices[e+4],this.vertices[e+5]],[this.vertices[e+6],this.vertices[e+7],this.vertices[e+8]]]);t.push(a[0],a[1],a[2],a[0],a[1],a[2],a[0],a[1],a[2])}this.vertexNormals=t}},y.prototype.calcTangentsBitangents=function(){if(!this.vertices.length)return void this._log.error("Cannot calculate tangents/bitangents without vertices.");if(!this.vertexNormals.length)return void this._log.error("Cannot calculate tangents/bitangents without normals.");if(!this.texCoords.length){const s=this.vertices.length/3*2;this.texCoords=new Float32Array(s);for(let e=0;e<s;e+=1)this.texCoords[e]=0}if(!this.verticesIndices||!this.verticesIndices.length)return void this._log.error("Cannot calculate tangents/bitangents without vertex indices.");if(this.verticesIndices.length%3!=0)return void this._log.error("Vertex indices mismatch!");const s=this.verticesIndices.length/3,l=this.vertices.length/3;this.tangents=new Float32Array(this.vertexNormals.length),this.biTangents=new Float32Array(this.vertexNormals.length);const u=[];u.length=2*l;const c=vec3.create(),m=vec3.create(),_=vec3.create(),d=vec2.create(),p=vec2.create(),v=vec2.create(),f=vec3.create(),g=vec3.create();for(let i=0;i<s;i+=1){const s=this.verticesIndices[3*i],h=this.verticesIndices[3*i+1],b=this.verticesIndices[3*i+2];vec3.set(c,this.vertices[3*s],this.vertices[3*s+1],this.vertices[3*s+2]),vec3.set(m,this.vertices[3*h],this.vertices[3*h+1],this.vertices[3*h+2]),vec3.set(_,this.vertices[3*b],this.vertices[3*b+1],this.vertices[3*b+2]),vec2.set(d,this.texCoords[2*s],this.texCoords[2*s+1]),vec2.set(p,this.texCoords[2*h],this.texCoords[2*h+1]),vec2.set(v,this.texCoords[2*b],this.texCoords[2*b+1]);const x=m[0]-c[0],O=_[0]-c[0],I=m[1]-c[1],T=_[1]-c[1],y=m[2]-c[2],e=_[2]-c[2],t=p[0]-d[0],n=v[0]-d[0],a=p[1]-d[1],r=v[1]-d[1],o=1/(t*r-n*a);vec3.set(f,(r*x-a*O)*o,(r*I-a*T)*o,(r*y-a*e)*o),vec3.set(g,(t*O-n*x)*o,(t*T-n*I)*o,(t*e-n*y)*o),u[s]=f,u[h]=f,u[b]=f,u[s+l]=g,u[h+l]=g,u[b+l]=g}const t=vec3.create(),h=vec3.create(),b=vec3.create(),x=vec3.create(),O=vec3.create(),I=vec3.create(),T=vec3.create(),y=vec3.create();for(let e=0;e<l;e+=1){if(!u[e])continue;vec3.set(t,this.vertexNormals[3*e],this.vertexNormals[3*e+1],this.vertexNormals[3*e+2]),vec3.set(h,u[e][0],u[e][1],u[e][2]);const c=vec3.dot(t,h);vec3.scale(O,t,c),vec3.subtract(I,h,O),vec3.normalize(y,I),vec3.cross(T,t,h);vec3.dot(T,u[e+l]);const m=1;vec3.scale(b,y,1/m),vec3.cross(x,t,b),this.tangents[3*e+0]=b[0],this.tangents[3*e+1]=b[1],this.tangents[3*e+2]=b[2],this.biTangents[3*e+0]=x[0],this.biTangents[3*e+1]=x[1],this.biTangents[3*e+2]=x[2]}},y.prototype.isIndexed=function(){return 0!=this.verticesIndices.length},y.prototype.unIndex=function(e,t){const n=[],a=[],r=[],o=[],i=[],s=[];let l=0,u=0;for(u=0;u<this.verticesIndices.length;u+=3)n.push(this.vertices[3*this.verticesIndices[u+0]+0],this.vertices[3*this.verticesIndices[u+0]+1],this.vertices[3*this.verticesIndices[u+0]+2]),o.push(this.vertexNormals[3*this.verticesIndices[u+0]+0],this.vertexNormals[3*this.verticesIndices[u+0]+1],this.vertexNormals[3*this.verticesIndices[u+0]+2]),this.tangents.length>0&&i.push(this.tangents[3*this.verticesIndices[u+0]+0],this.tangents[3*this.verticesIndices[u+0]+1],this.tangents[3*this.verticesIndices[u+0]+2]),this.biTangents.length>0&&s.push(this.biTangents[3*this.verticesIndices[u+0]+0],this.biTangents[3*this.verticesIndices[u+0]+1],this.biTangents[3*this.verticesIndices[u+0]+2]),this.texCoords?r.push(this.texCoords[2*this.verticesIndices[u+0]+0],this.texCoords[2*this.verticesIndices[u+0]+1]):r.push(0,0),a.push(l),l++,n.push(this.vertices[3*this.verticesIndices[u+1]+0],this.vertices[3*this.verticesIndices[u+1]+1],this.vertices[3*this.verticesIndices[u+1]+2]),o.push(this.vertexNormals[3*this.verticesIndices[u+1]+0],this.vertexNormals[3*this.verticesIndices[u+1]+1],this.vertexNormals[3*this.verticesIndices[u+1]+2]),this.tangents.length>0&&i.push(this.tangents[3*this.verticesIndices[u+1]+0],this.tangents[3*this.verticesIndices[u+1]+1],this.tangents[3*this.verticesIndices[u+1]+2]),this.biTangents.length>0&&s.push(this.biTangents[3*this.verticesIndices[u+1]+0],this.biTangents[3*this.verticesIndices[u+1]+1],this.biTangents[3*this.verticesIndices[u+1]+2]),this.texCoords?r.push(this.texCoords[2*this.verticesIndices[u+1]+0],this.texCoords[2*this.verticesIndices[u+1]+1]):r.push(0,0),a.push(l),l++,n.push(this.vertices[3*this.verticesIndices[u+2]+0],this.vertices[3*this.verticesIndices[u+2]+1],this.vertices[3*this.verticesIndices[u+2]+2]),o.push(this.vertexNormals[3*this.verticesIndices[u+2]+0],this.vertexNormals[3*this.verticesIndices[u+2]+1],this.vertexNormals[3*this.verticesIndices[u+2]+2]),this.tangents.length>0&&i.push(this.tangents[3*this.verticesIndices[u+2]+0],this.tangents[3*this.verticesIndices[u+2]+1],this.tangents[3*this.verticesIndices[u+2]+2]),this.biTangents.length>0&&s.push(this.biTangents[3*this.verticesIndices[u+2]+0],this.biTangents[3*this.verticesIndices[u+2]+1],this.biTangents[3*this.verticesIndices[u+2]+2]),this.texCoords?r.push(this.texCoords[2*this.verticesIndices[u+2]+0],this.texCoords[2*this.verticesIndices[u+2]+1]):r.push(0,0),a.push(l),l++;this.vertices=n,this.texCoords=r,this.vertexNormals=o,i.length>0&&(this.tangents=i),s.length>0&&(this.biTangents=s),this.verticesIndices.length=0,e&&(this.verticesIndices=a),t||this.calculateNormals()},y.prototype.calcBarycentric=function(){let t=[];t.length=this.vertices.length;for(let e=0;e<this.vertices.length;e++)t[e]=0;let n=0;for(let e=0;e<this.vertices.length;e+=3)t[e+n]=1,n++,3==n&&(n=0);this.setAttribute("attrBarycentric",t,3)},y.prototype.getBounds=function(){return new T(this)},y.prototype.center=function(e,t,n){void 0===e&&(e=!0,t=!0,n=!0);let a=0;const r=this.getBounds(),o=[r.minX+(r.maxX-r.minX)/2,r.minY+(r.maxY-r.minY)/2,r.minZ+(r.maxZ-r.minZ)/2];for(a=0;a<this.vertices.length;a+=3)this.vertices[a+0]==this.vertices[a+0]&&(e&&(this.vertices[a+0]-=o[0]),t&&(this.vertices[a+1]-=o[1]),n&&(this.vertices[a+2]-=o[2]));return o},y.prototype.mapTexCoords2d=function(){const n=this.getBounds(),a=this.vertices.length/3;this.texCoords=new Float32Array(2*a);for(let t=0;t<a;t++){const a=this.vertices[3*t+0],e=this.vertices[3*t+1];this.texCoords[2*t+0]=a/(n.maxX-n.minX)+.5,this.texCoords[2*t+1]=1-e/(n.maxY-n.minY)+.5}},y.prototype.getInfo=function(){const e={};return this.verticesIndices?e.numFaces=this.verticesIndices.length/3:e.numFaces=0,this.vertices?e.numVerts=this.vertices.length/3:e.numVerts=0,this.vertexNormals?e.numNormals=this.vertexNormals.length/3:e.numNormals=0,this.texCoords?e.numTexCoords=this.texCoords.length/2:e.numTexCoords=0,this.tangents?e.numTangents=this.tangents.length/3:e.numTangents=0,this.biTangents?e.numBiTangents=this.biTangents.length/3:e.numBiTangents=0,this.biTangents?e.numBiTangents=this.biTangents.length/3:e.numBiTangents=0,this.vertexColors?e.numVertexColors=this.vertexColors.length/4:e.numVertexColors=0,this.getAttributes()?e.numAttribs=Object.keys(this.getAttributes()).length:e.numAttribs=0,e.isIndexed=this.isIndexed(),e},y.buildFromFaces=function(r,e,o){const i=[],s=[];for(let e=0;e<r.length;e+=3){const l=r[e+0],t=r[e+1],n=r[e+2],a=[-1,-1,-1];if(o)for(let e=0;e<i.length;e+=3)i[e+0]==l[0]&&i[e+1]==l[1]&&i[e+2]==l[2]&&(a[0]=e/3),i[e+0]==t[0]&&i[e+1]==t[1]&&i[e+2]==t[2]&&(a[1]=e/3),i[e+0]==n[0]&&i[e+1]==n[1]&&i[e+2]==n[2]&&(a[2]=e/3);-1==a[0]&&(i.push(l[0],l[1],l[2]),a[0]=(i.length-1)/3),-1==a[1]&&(i.push(t[0],t[1],t[2]),a[1]=(i.length-1)/3),-1==a[2]&&(i.push(n[0],n[1],n[2]),a[2]=(i.length-1)/3),s.push(parseInt(a[0],10)),s.push(parseInt(a[1],10)),s.push(parseInt(a[2],10))}const l=new y(e);return l.name=e,l.vertices=i,l.verticesIndices=s,l},y.json2geom=function(t){const n=new y("jsonMeshGeom");if(n.verticesIndices=[],n.vertices=t.vertices||[],n.vertexNormals=t.normals||[],n.vertexColors=t.colors||[],n.tangents=t.tangents||[],n.biTangents=t.bitangents||[],t.texturecoords&&n.setTexCoords(t.texturecoords[0]),t.vertices_b64&&(n.vertices=new Float32Array(I(t.vertices_b64))),t.normals_b64&&(n.vertexNormals=new Float32Array(I(t.normals_b64))),t.tangents_b64&&(n.tangents=new Float32Array(I(t.tangents_b64))),t.bitangents_b64&&(n.biTangents=new Float32Array(I(t.bitangents_b64))),t.texturecoords_b64&&n.setTexCoords(new Float32Array(I(t.texturecoords_b64[0]))),t.faces_b64)n.verticesIndices=new Uint32Array(I(t.faces_b64));else{n.verticesIndices.length=3*t.faces.length;for(let e=0;e<t.faces.length;e++)n.verticesIndices[3*e]=t.faces[e][0],n.verticesIndices[3*e+1]=t.faces[e][1],n.verticesIndices[3*e+2]=t.faces[e][2]}return n};const S={getSimpleRect:function(e,t){const n=new y(t);return n.vertices=[1,1,0,-1,1,0,1,-1,0,-1,-1,0],n.texCoords=[1,1,0,1,1,0,0,0],n.verticesIndices=[0,1,2,2,1,3],n.vertexNormals=[0,0,0,0,0,0,0,0,0,0,0,0],new h(e,n)}};CGL.CopyTexture=class{constructor(e,t,n){this.cgl=e,this._options=n,this.fb=null;const a=n.shader||"".endl()+"UNI sampler2D tex;".endl()+"IN vec2 texCoord;".endl()+"void main()".endl()+"{".endl()+"    vec4 col=texture(tex,texCoord);".endl()+"    outColor= col;".endl()+"}",r="".endl()+"IN vec3 vPosition;".endl()+"IN vec2 attrTexCoord;".endl()+"OUT vec2 texCoord;".endl()+"void main()".endl()+"{".endl()+"   texCoord=attrTexCoord;".endl()+"   gl_Position = vec4(vPosition,  1.0);".endl()+"}";this.bgShader=new CGL.Shader(e,"corelib copytexture "+t),this.bgShader.setSource(r,a);new CGL.Uniform(this.bgShader,"t","tex",0);this.mesh=S.getSimpleRect(this.cgl,"texEffectRect")}copy(e){if(!e)return CGL.Texture.getEmptyTexture(this.cgl);const a=this._options.width||e.width,r=this._options.height||e.height,o=this.cgl;if(this.fb)this.fb.getWidth()==a&&this.fb.getHeight()==r||this.fb.setSize(a,r);else{let e=CGL.Texture.FILTER_LINEAR,t=CGL.Texture.WRAP_CLAMP_TO_EDGE;this._options.hasOwnProperty("filter")&&(e=this._options.filter),this._options.hasOwnProperty("wrap")&&(t=this._options.wrap);const n={isFloatingPointTexture:this._options.isFloatingPointTexture,numRenderBuffers:this._options.numRenderBuffers||1,filter:e,wrap:t};1==o.glVersion?this.fb=new CGL.Framebuffer(o,a,r,n):this.fb=new CGL.Framebuffer2(o,a,r,n)}return o.frameStore.renderOffscreen=!0,this.fb.renderStart(o),o.setTexture(0,e.tex),o.pushShader(this.bgShader),this.mesh.render(this.bgShader),o.popShader(),this.fb.renderEnd(),o.frameStore.renderOffscreen=!1,this.fb.getTextureColor()}dispose(){this.fb&&this.fb.dispose(),this.bgShader&&this.bgShader.dispose(),this.mesh&&this.mesh.dispose()}}}]).Copytexture;this.CGL=this.CGL||{},this.CGL.COREMODULES=this.CGL.COREMODULES||{},this.CGL.COREMODULES.Shadermodifier=function(n){var a={};function r(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t);CGL.ShaderModifier=class{constructor(e,t,n){this._cgl=e,this._name=t,this._origShaders={},this._uniforms=[],this._structUniforms=[],this._definesToggled={},this._defines={},this._mods=[],this._textures=[],this._boundShader=null,this._changedDefines=!0,this._changedUniforms=!0,this._modulesChanged=!1,this.needsTexturePush=!1,this._lastShader=null,1==this._cgl.glVersion&&(this._cgl.gl.getExtension("OES_texture_float"),this._cgl.gl.getExtension("OES_texture_float_linear"),this._cgl.gl.getExtension("OES_texture_half_float"),this._cgl.gl.getExtension("OES_texture_half_float_linear"))}bind(){const n=this._cgl.getShader();if(!n)return;this._boundShader=this._origShaders[n.id];let a=!1;if(this._boundShader&&this._lastShader!=this._boundShader.shader&&(this._boundShader.shader.hasModule(this._mods[0].id)||(a=!0)),(a||!this._boundShader||n.lastCompile!=this._boundShader.lastCompile||this._modulesChanged||n._needsRecompile)&&(this._boundShader&&this._boundShader.shader.dispose(),n._needsRecompile&&n.compile(),this._boundShader=this._origShaders[n.id]={lastCompile:n.lastCompile,orig:n,shader:n.copy()},1==this._cgl.glVersion&&(this._boundShader.shader.enableExtension("GL_OES_standard_derivatives"),this._boundShader.shader.enableExtension("GL_OES_texture_float"),this._boundShader.shader.enableExtension("GL_OES_texture_float_linear"),this._boundShader.shader.enableExtension("GL_OES_texture_half_float"),this._boundShader.shader.enableExtension("GL_OES_texture_half_float_linear")),this._addModulesToShader(this._boundShader.shader),this._updateDefinesShader(this._boundShader.shader),this._updateUniformsShader(this._boundShader.shader)),this._boundShader.wireframe=n.wireframe,this._changedDefines&&this._updateDefines(),this._changedUniforms&&this._updateUniforms(),this._cgl.pushShader(this._boundShader.shader),this._boundShader.shader.copyUniformValues(this._boundShader.orig),this.needsTexturePush){for(let t=0;t<this._textures.length;t+=1){const a=this._textures[t][0],e=this._textures[t][1],r=this._textures[t][2];if(this._getUniform(a)){const n=this.getPrefixedName(a),o=this._boundShader.shader.getUniform(n);o&&this._boundShader.shader.pushTexture(o,e,r)}}this.needsTexturePush=!1,this._textures.length=0}this._modulesChanged=!1}unbind(){this._boundShader&&this._cgl.popShader(),this._boundShader=null}_addModulesToShader(t){let n;this._mods.length>1&&(n=this._mods[0]);for(let e=0;e<this._mods.length;e++)t.addModule(this._mods[e],n)}_removeModulesFromShader(t){for(const e in this._origShaders)this._origShaders[e].shader.removeModule(t)}addModule(e){this._mods.push(e),this._modulesChanged=!0}removeModule(t){const n=[];for(let e=0;e<this._mods.length;e++)this._mods[e].title==t&&(this._removeModulesFromShader(this._mods[e]),n.push(e));for(let e=n.length-1;e>=0;e-=1)this._mods.splice(n[e],1);this._modulesChanged=!0}_updateUniformsShader(r){for(let e=0;e<this._uniforms.length;e++){const t=this._uniforms[e],n=this.getPrefixedName(t.name);if(!r.hasUniform(n)&&!t.structName){let e=null;"both"===t.shaderType?(e=r.addUniformBoth(t.type,n,t.v1,t.v2,t.v3,t.v4),e.comment="mod: "+this._name):"frag"===t.shaderType?(e=r.addUniformFrag(t.type,n,t.v1,t.v2,t.v3,t.v4),e.comment="mod: "+this._name):"vert"===t.shaderType&&(e=r.addUniformVert(t.type,n,t.v1,t.v2,t.v3,t.v4),e.comment="mod: "+this._name)}}for(let a=0;a<this._structUniforms.length;a+=1){const e=this._structUniforms[a];let t=e.uniformName,n=e.structName;const o=e.members;t=this.getPrefixedName(e.uniformName),n=this.getPrefixedName(e.structName),"frag"===e.shaderType&&r.addUniformStructFrag(n,t,o),"vert"===e.shaderType&&r.addUniformStructVert(n,t,o),"both"===e.shaderType&&r.addUniformStructBoth(n,t,o)}}_updateUniforms(){for(const e in this._origShaders)this._updateUniformsShader(this._origShaders[e].shader);this._changedUniforms=!1}_setUniformValue(e,t,n){const a=e.getUniform(t);a&&a.setValue(n)}setUniformValue(e,t){if(!this._getUniform(e))return;const n=this.getPrefixedName(e);for(const e in this._origShaders)this._setUniformValue(this._origShaders[e].shader,n,t)}hasUniform(e){return this._getUniform(e)}_getUniform(t){for(let e=0;e<this._uniforms.length;e++){if(this._uniforms[e].name==t)return this._uniforms[e];if(this._uniforms[e].structName&&this._uniforms[e].propertyName==t)return this._uniforms[e]}return!1}_getStructUniform(t){for(let e=0;e<this._structUniforms.length;e+=1)if(this._structUniforms[e].uniformName===t)return this._structUniforms[e];return null}_isStructUniform(t){for(let e=0;e<this._uniforms.length;e++){if(this._uniforms[e].name==t)return!1;if(this._uniforms[e].structName&&this._uniforms[e].propertyName==t)return!0}return!1}addUniform(t,n,a,r,o,i,s,l,u,c){if(!this._getUniform(n)){let e="both";c&&(e=c),this._uniforms.push({type:t,name:n,v1:a,v2:r,v3:o,v4:i,structUniformName:s,structName:l,propertyName:u,shaderType:e}),this._changedUniforms=!0}}addUniformFrag(e,t,n,a,r,o){this.addUniform(e,t,n,a,r,o,null,null,null,"frag"),this._changedUniforms=!0}addUniformVert(e,t,n,a,r,o){this.addUniform(e,t,n,a,r,o,null,null,null,"vert"),this._changedUniforms=!0}addUniformBoth(e,t,n,a,r,o){this.addUniform(e,t,n,a,r,o,null,null,null,"both"),this._changedUniforms=!0}addUniformStruct(t,n,a,r){for(let e=0;e<a.length;e+=1){const o=a[e];"2i"!==o.type&&"i"!==o.type&&"3i"!==o.type||"both"!==r||console.error("Adding an integer struct member to both shaders can potentially error. Please use different structs for each shader. Error occured in struct:",t," with member:",o.name," of type:",o.type,"."),this._getUniform(n+"."+o.name)||this.addUniform(o.type,n+"."+o.name,o.v1,o.v2,o.v3,o.v4,n,t,o.name,r)}this._getStructUniform(n)||this._structUniforms.push({structName:t,uniformName:n,members:a,shaderType:r})}addUniformStructVert(e,t,n){this.addUniformStruct(e,t,n,"vert")}addUniformStructFrag(e,t,n){this.addUniformStruct(e,t,n,"frag")}addUniformStructBoth(e,t,n){this.addUniformStruct(e,t,n,"both")}pushTexture(e,t,n){if(!t)throw new Error("no texture given to texturestack");this._textures.push([e,t,n]),this.needsTexturePush=!0}_removeUniformFromShader(e,t){t.hasUniform(e)&&t.removeUniform(e)}removeUniform(n){if(this._getUniform(n)){for(let t=this._uniforms.length-1;t>=0;t-=1){const e=n;if(this._uniforms[t].name==n&&!this._uniforms[t].structName){for(const n in this._origShaders)this._removeUniformFromShader(this.getPrefixedName(e),this._origShaders[n].shader);this._uniforms.splice(t,1)}}this._changedUniforms=!0}}removeUniformStruct(n){if(this._getStructUniform(n)){for(let e=this._structUniforms.length-1;e>=0;e-=1){const t=this._structUniforms[e];if(t.uniformName===n){for(const n in this._origShaders)for(let e=0;e<t.members.length;e+=1){const a=t.members[e];this._removeUniformFromShader(this.getPrefixedName(a.name),this._origShaders[n].shader)}this._structUniforms.splice(e,1)}}this._changedUniforms=!0}}getPrefixedName(e){const t=this._mods[0].group;if(void 0!==t)return 0==e.indexOf("MOD_")&&(e="mod"+t+"_"+(e=e.substr("MOD_".length))),e}_updateDefinesShader(n){for(const t in this._defines){const e=this.getPrefixedName(t);null!==this._defines[t]&&void 0!==this._defines[t]?n.define(e,this._defines[t]):n.removeDefine(e)}for(const t in this._definesToggled){const e=this.getPrefixedName(t);n.toggleDefine(e,this._definesToggled[t])}}_updateDefines(){for(const e in this._origShaders)this._updateDefinesShader(this._origShaders[e].shader);this._changedDefines=!1}define(e,t){this._defines[e]=t,this._changedDefines=!0}removeDefine(e){this._defines[e]=null,this._changedDefines=!0}hasDefine(e){return null!==this._defines[e]&&void 0!==this._defines[e]}toggleDefine(e,t){this._changedDefines=!0,this._definesToggled[e]=t}currentShader(){return this._boundShader.shader}dispose(){}}}]).Shadermodifier;this.CGL=this.CGL||{},this.CGL.COREMODULES=this.CGL.COREMODULES||{},this.CGL.COREMODULES.Light=function(n){var a={};function r(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";function a(e,t){return this.type=t.type||"point",this.color=t.color||[1,1,1],this.specular=t.specular||[0,0,0],this.position=t.position||null,this.intensity=t.intensity||1,this.radius=t.radius||1,this.falloff=t.falloff||1,this.spotExponent=t.spotExponent||1,this.cosConeAngleInner=t.cosConeAngleInner||0,this.cosConeAngle=t.cosConeAngle||0,this.conePointAt=t.conePointAt||[0,0,0],this.castShadow=t.castShadow||!1,this.nearFar=t.nearFar||[0,0],this.normalOffset=t.normalOffset||0,this.shadowBias=t.shadowBias||0,this.shadowStrength=t.shadowStrength||0,this.lightMatrix=null,this.shadowMap=null,this.shadowMapDepth=null,this.shadowCubeMap=null,this._cgl=e,this.state={isUpdating:!1},this._framebuffer=null,this._shaderShadowMap={shader:null,uniforms:{lightPosition:null,nearFar:null},matrices:{modelMatrix:mat4.create(),viewMatrix:mat4.create(),projMatrix:mat4.create(),biasMatrix:mat4.fromValues(.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1)},vectors:{lookAt:vec3.create(),camPos:vec3.create(),up:vec3.fromValues(0,1,0)}},this._effectBlur=null,this._shaderBlur={shader:null,uniforms:{XY:null}},this._cubemap=null,this}n.r(t),a.prototype.getModifiableParameters=function(){return["color","specular","position","intensity","radius","falloff","spotExponent","cosConeAngleInner","cosConeAngle","conePointAt"]},a.prototype.createProjectionMatrix=a.prototype.updateProjectionMatrix=function(e,t,n,a){"spot"===this.type?mat4.perspective(this._shaderShadowMap.matrices.projMatrix,-2*CGL.DEG2RAD*a,1,t,n):"directional"===this.type?mat4.ortho(this._shaderShadowMap.matrices.projMatrix,-1*e,e,-1*e,e,t,n):"point"===this.type&&(mat4.perspective(this._shaderShadowMap.matrices.projMatrix,90*CGL.DEG2RAD,1,t,n),this.nearFar=[t,n])},a.prototype.hasFramebuffer=function(){return!!this._framebuffer},a.prototype.hasShadowMapShader=function(){return!!this._shaderShadowMap.shader},a.prototype.hasBlurShader=function(){return!!this._shaderBlur.shader},a.prototype.hasBlurEffect=function(){return!!this._effectBlur},a.prototype.getShadowMap=function(){return"point"===this.type?null:this._framebuffer.getTextureColor()},a.prototype.getShadowMapDepth=function(){return"point"===this.type?null:this._framebuffer.getTextureDepth()},a.prototype.createFramebuffer=function(e,t,n){this.state.isUpdating=!0;const a=e||512,r=t||512;if("point"===this.type)return this.hasCubemap()?this._cubemap.setSize(a,r):this._cubemap=new CGL.CubemapFramebuffer(this._cgl,a,r,{name:"point light shadowmap"}),this._cubemap.setCamPos(this.position),this._cubemap.setMatrices(this._shaderShadowMap.matrices.modelMatrix,this._shaderShadowMap.matrices.viewMatrix,this._shaderShadowMap.matrices.projMatrix),void(this.state.isUpdating=!1);this.hasFramebuffer()&&this._framebuffer.delete(),n&&n.filter&&(n.isFloatingPointTexture=n.filter!==CGL.Texture.FILTER_MIPMAP),1==this._cgl.glVersion?this._framebuffer=new CGL.Framebuffer(this._cgl,a,r,Object.assign({isFloatingPointTexture:!0,filter:CGL.Texture.FILTER_LINEAR,wrap:CGL.Texture.WRAP_CLAMP_TO_EDGE},n)):this._framebuffer=new CGL.Framebuffer2(this._cgl,a,r,Object.assign({isFloatingPointTexture:!0,filter:CGL.Texture.FILTER_LINEAR,wrap:CGL.Texture.WRAP_CLAMP_TO_EDGE},n)),this.state.isUpdating=!1},a.prototype.hasCubemap=function(){return!!this._cubemap},a.prototype.setFramebufferSize=function(e){this.hasFramebuffer()&&this._framebuffer.setSize(e,e)},a.prototype.createShadowMapShader=function(e,t){if(this.hasShadowMapShader())return;this.state.isUpdating=!0,this._shaderShadowMap.shader=new CGL.Shader(this._cgl,"shadowPass"+this.type.charAt(0).toUpperCase()+this.type.slice(1)),this._shaderShadowMap.shader.setModules(["MODULE_VERTEX_POSITION","MODULE_COLOR","MODULE_BEGIN_FRAG"]);const n=e||this.getShadowPassVertexShader(),a=t||this.getShadowPassFragmentShader();this._shaderShadowMap.shader.setSource(n,a),this._shaderShadowMap.shader.offScreenPass=!0,"point"===this.type&&(this._shaderShadowMap.uniforms.lightPosition=new CGL.Uniform(this._shaderShadowMap.shader,"3f","inLightPosition",vec3.create()),this._shaderShadowMap.uniforms.nearFar=new CGL.Uniform(this._shaderShadowMap.shader,"2f","inNearFar",vec2.create())),1==this._cgl.glVersion&&(this._cgl.gl.getExtension("OES_texture_float"),this._cgl.gl.getExtension("OES_texture_float_linear"),this._cgl.gl.getExtension("OES_texture_half_float"),this._cgl.gl.getExtension("OES_texture_half_float_linear"),this._shaderShadowMap.shader.enableExtension("GL_OES_standard_derivatives"),this._shaderShadowMap.shader.enableExtension("GL_OES_texture_float"),this._shaderShadowMap.shader.enableExtension("GL_OES_texture_float_linear"),this._shaderShadowMap.shader.enableExtension("GL_OES_texture_half_float"),this._shaderShadowMap.shader.enableExtension("GL_OES_texture_half_float_linear")),this.state.isUpdating=!1},a.prototype.createBlurEffect=function(e){"point"!==this.type&&(this.state.isUpdating=!0,this.hasBlurEffect()&&this._effectBlur.delete(),this._effectBlur=new CGL.TextureEffect(this._cgl,Object.assign({isFloatingPointTexture:!0,filter:CGL.Texture.FILTER_LINEAR,wrap:CGL.Texture.WRAP_CLAMP_TO_EDGE},e)),this.state.isUpdating=!1)},a.prototype.createBlurShader=function(e,t){if(this.hasBlurShader())return;if("point"===this.type)return;this.state.isUpdating=!0;const n=e||this.getBlurPassVertexShader(),a=t||this.getBlurPassFragmentShader();this._shaderBlur.shader=new CGL.Shader(this._cgl,"blurPass"+this.type.charAt(0).toUpperCase()+this.type.slice(1)),this._shaderBlur.shader.setModules(["MODULE_VERTEX_POSITION","MODULE_COLOR","MODULE_BEGIN_FRAG"]),this._shaderBlur.shader.setSource(n,a),this._shaderBlur.uniforms.XY=new CGL.Uniform(this._shaderBlur.shader,"2f","inXY",vec2.create()),this._shaderBlur.shader.offScreenPass=!0,this.state.isUpdating=!1},a.prototype.renderPasses=function(e,t,n){this.state.isUpdating||this._cgl.frameStore.shadowPass||(this._cgl.pushCullFace(!0),this._cgl.pushCullFaceFacing(this._cgl.gl.FRONT),this._cgl.gl.enable(this._cgl.gl.POLYGON_OFFSET_FILL),this._cgl.gl.polygonOffset(e,e),this._cgl.frameStore.renderOffscreen=!0,this._cgl.frameStore.shadowPass=!0,this._cgl.pushBlend(!1),this._cgl.gl.colorMask(!0,!0,"point"===this.type,"point"===this.type),this.renderShadowPass(n),this._cgl.gl.cullFace(this._cgl.gl.BACK),this._cgl.gl.disable(this._cgl.gl.CULL_FACE),this._cgl.gl.disable(this._cgl.gl.POLYGON_OFFSET_FILL),"point"!==this.type&&this.renderBlurPass(t),this._cgl.gl.colorMask(!0,!0,!0,!0),this._cgl.popBlend(),this._cgl.popCullFaceFacing(),this._cgl.popCullFace(),this._cgl.frameStore.shadowPass=!1,this._cgl.frameStore.renderOffscreen=!1,"point"!==this.type?(this.shadowMap=this._framebuffer.getTextureColor(),this.shadowMapDepth=this._framebuffer.getTextureDepth()):(this.shadowMap=null,this.shadowMapDepth=null))},a.prototype.renderShadowPass=function(t){if(!this.state.isUpdating){if("point"===this.type){this._shaderShadowMap.uniforms.nearFar.setValue(this.nearFar),this._shaderShadowMap.uniforms.lightPosition.setValue(this.position),this._cubemap.setCamPos(this.position),this._cubemap.setMatrices(this._shaderShadowMap.matrices.modelMatrix,this._shaderShadowMap.matrices.viewMatrix,this._shaderShadowMap.matrices.projMatrix),this._cgl.pushShader(this._shaderShadowMap.shader),this._cubemap.renderStart();for(let e=0;e<6;e+=1)this._cubemap.renderStartCubemapFace(e),t&&t(),this._cubemap.renderEndCubemapFace();return this._cubemap.renderEnd(),this._cgl.popShader(),void(this.shadowCubeMap=this._cubemap.getTextureColor())}this._cgl.pushShader(this._shaderShadowMap.shader),this._cgl.pushModelMatrix(),this._cgl.pushViewMatrix(),this._cgl.pushPMatrix(),this._framebuffer.renderStart(this._cgl),mat4.copy(this._cgl.mMatrix,this._shaderShadowMap.matrices.modelMatrix),vec3.set(this._shaderShadowMap.vectors.camPos,this.position[0],this.position[1],this.position[2]),"spot"===this.type&&vec3.set(this._shaderShadowMap.vectors.lookAt,this.conePointAt[0],this.conePointAt[1],this.conePointAt[2]),mat4.lookAt(this._cgl.vMatrix,this._shaderShadowMap.vectors.camPos,this._shaderShadowMap.vectors.lookAt,this._shaderShadowMap.vectors.up),mat4.copy(this._cgl.pMatrix,this._shaderShadowMap.matrices.projMatrix),this.lightMatrix||(this.lightMatrix=mat4.create()),mat4.mul(this.lightMatrix,this._cgl.pMatrix,this._cgl.vMatrix),mat4.mul(this.lightMatrix,this._cgl.mMatrix,this.lightMatrix),mat4.mul(this.lightMatrix,this._shaderShadowMap.matrices.biasMatrix,this.lightMatrix),this._cgl.gl.clearColor(1,1,1,1),this._cgl.gl.clear(this._cgl.gl.DEPTH_BUFFER_BIT|this._cgl.gl.COLOR_BUFFER_BIT),t&&t(),this._framebuffer.renderEnd(this._cgl),this._cgl.popPMatrix(),this._cgl.popModelMatrix(),this._cgl.popViewMatrix(),this._cgl.popShader()}},a.prototype.renderBlurPass=function(e){this.state.isUpdating||(this._cgl.pushShader(this._shaderBlur.shader),this._effectBlur.setSourceTexture(this._framebuffer.getTextureColor()),this._effectBlur.startEffect(),this._effectBlur.bind(),this._cgl.setTexture(0,this._effectBlur.getCurrentSourceTexture().tex),this._shaderBlur.uniforms.XY.setValue([e,0]),this._effectBlur.finish(),this._effectBlur.bind(),this._cgl.setTexture(0,this._effectBlur.getCurrentSourceTexture().tex),this._shaderBlur.uniforms.XY.setValue([0,e]),this._effectBlur.finish(),this._effectBlur.endEffect(),this._cgl.popShader())},a.prototype.getShadowPassVertexShader=function(){return`\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\nIN vec3 attrVertNormal;\nIN float attrVertIndex;\nIN vec3 attrTangent;\nIN vec3 attrBiTangent;\n\nUNI mat4 projMatrix;\nUNI mat4 modelMatrix;\nUNI mat4 viewMatrix;\n\n\nOUT vec2 texCoord;\nOUT vec3 norm;\n\n{{MODULES_HEAD}}\n\n${"point"===this.type?"OUT vec3 modelPos;":""}\nvoid main() {\n    texCoord=attrTexCoord;\n    texCoord.y = 1. - texCoord.y;\n    norm=attrVertNormal;\n    vec4 pos = vec4(vPosition, 1.0);\n    mat4 mMatrix=modelMatrix;\n    vec3 tangent = attrTangent;\n    vec3 bitangent = attrBiTangent;\n\n    {{MODULE_VERTEX_POSITION}}\n\n    mat4 mvMatrix=viewMatrix * mMatrix;\n    vec4 vPos = projMatrix * mvMatrix * pos;\n    ${"point"===this.type?"modelPos = (mMatrix * pos).xyz;":""}\n    gl_Position = vPos;\n}\n`},a.prototype.getShadowPassFragmentShader=function(){return`\n   {{MODULES_HEAD}}\n   ${"point"===this.type?"IN vec3 modelPos;":""}\n   ${"point"===this.type?"UNI vec3 inLightPosition;":""}\n   ${"point"===this.type?"UNI vec2 inNearFar;":""}\n\n    IN vec2 texCoord;\n\n    void main() {\n        {{MODULE_BEGIN_FRAG}}\n        vec4 col = vec4(1.);\n\n\n        outColor = vec4(1.);\n\n        {{MODULE_COLOR}}\n\n        ${"point"===this.type?"vec3 fromLightToFrag = (modelPos - inLightPosition);":""}\n\n\n        ${"point"===this.type?"float depth = (length(fromLightToFrag) - inNearFar.x) / (inNearFar.y - inNearFar.x);":"float depth = gl_FragCoord.z;"}\n\n        float dx = dFdx(depth); // for biasing depth-per-pixel\n        float dy = dFdy(depth); // for biasing depth-per-pixel\n\n        float clampedDerivative = clamp(dot(dx, dx) + dot(dy, dy), 0., 1.);\n        float moment2 = dot(depth, depth) + 0.25 * clampedDerivative;\n\n        outColor.x = depth;\n        outColor.y = moment2;\n        outColor.z = depth;\n    }\n`},a.prototype.getBlurPassVertexShader=function(){return"point"===this.type?"":"\n\nIN vec3 vPosition;\nIN vec2 attrTexCoord;\n\nOUT vec2 texCoord;\nOUT vec2 coord0;\nOUT vec2 coord1;\nOUT vec2 coord2;\nOUT vec2 coord3;\nOUT vec2 coord4;\nOUT vec2 coord5;\nOUT vec2 coord6;\n\nUNI mat4 projMatrix;\nUNI mat4 mvMatrix;\nUNI mat4 modelMatrix;\n\nUNI vec2 inXY;\n\nvoid main() {\n    texCoord=attrTexCoord;\n\n    vec4 pos = vec4(vPosition,  1.0);\n\n    {{MODULE_VERTEX_POSITION}}\n\n    coord3 = attrTexCoord;\n\n\n    coord0 = attrTexCoord + (-3.0368997744118595 * inXY);\n    coord0 = clamp(coord0, 0., 1.);\n    coord1 = attrTexCoord + (-2.089778445362373 * inXY);\n    coord1 = clamp(coord1, 0., 1.);\n    coord2 = attrTexCoord + (-1.2004366090034069 * inXY);\n    coord2 = clamp(coord2, 0., 1.);\n    coord4 = attrTexCoord + (1.2004366090034069 * inXY);\n    coord4 = clamp(coord4, 0., 1.);\n    coord5 = attrTexCoord + (2.089778445362373* inXY);\n    coord5 = clamp(coord5, 0., 1.);\n    coord6 = attrTexCoord + (3.0368997744118595 * inXY);\n    coord6 = clamp(coord6, 0., 1.);\n\n    gl_Position = projMatrix * mvMatrix * pos;\n}\n    "},a.prototype.getBlurPassFragmentShader=function(){return"point"===this.type?"":"\nUNI sampler2D tex;\n\nIN vec2 coord0;\nIN vec2 coord1;\nIN vec2 coord2;\nIN vec2 coord3;\nIN vec2 coord4;\nIN vec2 coord5;\nIN vec2 coord6;\n\nvoid main() {\n\n    vec4 color = vec4(0.0);\n\n\n    color.xyz += texture(tex, coord0).xyz * 0.06927096443792478;  // 1/64\n    color.xyz += texture(tex, coord1).xyz * 0.1383328848652136;   // 6/64\n    color.xyz += texture(tex, coord2).xyz * 0.21920904690397863;  // 15/64\n    color.xyz += texture(tex, coord3).xyz * 0.14637421;           // 20/64\n    color.xyz += texture(tex, coord4).xyz * 0.21920904690397863;  // 15/64\n    color.xyz += texture(tex, coord5).xyz * 0.1383328848652136;   // 6/64\n    color.xyz += texture(tex, coord6).xyz * 0.06927096443795711;  // 1/64\n\n    color.a = 1.;\n\n    outColor = color;\n}\n    "},CGL.Light=a}]).Light;this.CGL=this.CGL||{},this.CGL.COREMODULES=this.CGL.COREMODULES||{},this.CGL.COREMODULES.Cubemapframebuffer=function(n){var a={};function r(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}return r.m=n,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,n){"use strict";n.r(t);const a={float32Concat:function(e,t){e instanceof Float32Array||(e=new Float32Array(e)),t instanceof Float32Array||(t=new Float32Array(t));const n=new Float32Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}},r=function(){let n=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"==e?t:3&t|8).toString(16)})},o=r;Math.randomSeed=1,Math.seededRandom=function(e,t){0===Math.randomSeed&&(Math.randomSeed=999*Math.random()),e=e||1,t=t||0,Math.randomSeed=(9301*Math.randomSeed+49297)%233280;return t+Math.randomSeed/233280*(e-t)},a.arrayWriteToEnd=function(t,e){for(let e=1;e<t.length;e++)t[e-1]=t[e];t[t.length-1]=e},a.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},a.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},String.prototype.endl=function(){return this+"\n"},String.prototype.startsWith=function(e){return 0===this.indexOf(e)},String.prototype.endsWith=function(e){return this.match(e+"$")==e};window.performance=window.performance||{offset:Date.now(),now:function(){return Date.now()-this.offset}};class i{constructor(e){this._logs=[],this.initiator=e}stack(e){console.error("["+this.initiator+"] ",e),console.log((new Error).stack),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"error",e)}groupCollapsed(e){console.groupCollapsed("["+this.initiator+"] "+e)}table(e){console.table(e)}groupEnd(){console.groupEnd()}error(e){console.error("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"error",arguments)}info(e){console.error("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"info",arguments)}warn(e){console.warn("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"warn",arguments)}verbose(){(CABLES.UI&&CABLES.UI.logFilter.shouldPrint(this.initiator,...arguments)||!CABLES.logSilent)&&console.log("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"verbose",arguments)}log(e){(CABLES.UI&&CABLES.UI.logFilter.shouldPrint(this.initiator,...arguments)||!CABLES.logSilent)&&console.log("["+this.initiator+"]",...arguments),window.gui&&window.gui.emitEvent("coreLogEvent",this.initiator,"log",arguments)}userInteraction(e){}}const s=function(e,t){if(!e)throw new Error("no cgl");this._log=new i("cgl_texture"),this._cgl=e,this.tex=this._cgl.gl.createTexture(),this.id=o(),this.width=0,this.height=0,this.loading=!1,this.flip=!0,this.flipped=!1,this.shadowMap=!1,this.deleted=!1,this.image=null,this.anisotropic=0,this.filter=s.FILTER_NEAREST,this.wrap=s.WRAP_CLAMP_TO_EDGE,this.texTarget=this._cgl.gl.TEXTURE_2D,t&&t.type&&(this.texTarget=t.type),this.textureType=s.TYPE_DEFAULT,this.unpackAlpha=!0,this._fromData=!0,this.name="unknown",t?(this.name=t.name||this.name,t.isDepthTexture&&(this.textureType=s.TYPE_DEPTH),t.isFloatingPointTexture&&(this.textureType=s.TYPE_FLOAT),"textureType"in t&&(this.textureType=t.textureType),"filter"in t&&(this.filter=t.filter),"wrap"in t&&(this.wrap=t.wrap),"unpackAlpha"in t&&(this.unpackAlpha=t.unpackAlpha),"flip"in t&&(this.flip=t.flip),"shadowMap"in t&&(this.shadowMap=t.shadowMap),"anisotropic"in t&&(this.anisotropic=t.anisotropic)):t={},t.width||(t.width=8),t.height||(t.height=8),this._cgl.profileData.profileTextureNew++,this._cgl.profileData.addHeavyEvent("texture created",this.name,t.width+"x"+t.height),this.setSize(t.width,t.height),this.getInfoOneLine()};s.prototype.isFloatingPoint=function(){return this.textureType==s.TYPE_FLOAT},s.prototype.compareSettings=function(e){return!!e&&(e.width==this.width&&e.height==this.height&&e.filter==this.filter&&e.wrap==this.wrap&&e.textureType==this.textureType&&e.unpackAlpha==this.unpackAlpha&&e.anisotropic==this.anisotropic&&e.shadowMap==this.shadowMap&&e.texTarget==this.texTarget&&e.flip==this.flip)},s.prototype.clone=function(){const e=new s(this._cgl,{name:this.name,filter:this.filter,wrap:this.wrap,textureType:this.textureType,unpackAlpha:this.unpackAlpha,flip:this.flip,width:this.width,height:this.height});return this._cgl.profileData.addHeavyEvent("texture created",this.name,this.width+"x"+this.height),this.compareSettings(e)||(this._log.error("Cloned texture settings do not compare!"),this._log.error(this),this._log.error(e)),e},s.prototype.setSize=function(t,n){if((t!=t||t<=0||!t)&&(t=8),(n!=n||n<=0||!n)&&(n=8),(t>this._cgl.maxTexSize||n>this._cgl.maxTexSize)&&this._log.error("texture size too big! "+t+"x"+n+" / max: "+this._cgl.maxTexSize),t=Math.min(t,this._cgl.maxTexSize),n=Math.min(n,this._cgl.maxTexSize),t=Math.floor(t),n=Math.floor(n),this.width==t&&this.height==n)return;this.width=t,this.height=n,this.deleted=!1,this.shortInfoString=this.getInfoOneLine(),this._cgl.gl.bindTexture(this.texTarget,this.tex),this._cgl.profileData.profileTextureResize++;if(this._cgl.patch.config.canvas.forceTextureNearest&&(this.filter=s.FILTER_NEAREST),1!=this._cgl.glVersion||this.textureType!=s.TYPE_FLOAT||this.filter!=s.FILTER_LINEAR||this._cgl.gl.getExtension("OES_texture_float_linear")||(console.warn("this graphics card does not support floating point texture linear interpolation! using NEAREST"),this.filter=s.FILTER_NEAREST),this.textureType==s.TYPE_FLOAT)if(1==this._cgl.glVersion)if(this._cgl.glUseHalfFloatTex){const e=this._cgl.gl.getExtension("OES_texture_half_float");this._cgl.gl.getExtension("EXT_color_buffer_half_float");if(!e)throw new Error("no half float texture extension");this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,t,n,0,this._cgl.gl.RGBA,e.HALF_FLOAT_OES,null)}else this._cgl.gl.getExtension("OES_texture_float"),this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,t,n,0,this._cgl.gl.RGBA,this._cgl.gl.FLOAT,null);else if(this._cgl.glUseHalfFloatTex){if(!this._cgl.gl.getExtension("EXT_color_buffer_half_float"))throw new Error("no half float texture extension");console.log("half float",this._cgl.gl.RGBA16F,this._cgl.gl.HALF_FLOAT),console.log("half float",this._cgl.gl.HALF_FLOAT),console.log("half float",this._cgl.gl.RGBA16F),this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,t,n,0,this._cgl.gl.RGBA,this._cgl.gl.HALF_FLOAT,null)}else this._cgl.gl.getExtension("EXT_color_buffer_float"),this._cgl.gl.getExtension("EXT_color_buffer_float_linear"),this._cgl.gl.getExtension("OES_texture_float_linear"),this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA32F,t,n,0,this._cgl.gl.RGBA,this._cgl.gl.FLOAT,null);else if(this.textureType==s.TYPE_DEPTH)if(1==this._cgl.glVersion){const e=this._cgl.gl.DEPTH_COMPONENT;this._cgl.gl.texImage2D(this.texTarget,0,e,t,n,0,this._cgl.gl.DEPTH_COMPONENT,this._cgl.gl.UNSIGNED_SHORT,null)}else{const e=this._cgl.gl.DEPTH_COMPONENT32F;this._cgl.gl.texImage2D(this.texTarget,0,e,t,n,0,this._cgl.gl.DEPTH_COMPONENT,this._cgl.gl.FLOAT,null)}else this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,t,n,0,this._cgl.gl.RGBA,this._cgl.gl.UNSIGNED_BYTE,null);this._setFilter(),this.updateMipMap(),this._cgl.gl.bindTexture(this.texTarget,null)},s.prototype.initFromData=function(e,t,n,a,r){if(this.filter=a,this.wrap=r,null==a&&(this.filter=s.FILTER_LINEAR),null==r&&(this.wrap=s.WRAP_CLAMP_TO_EDGE),this.width=t,this.height=n,this._fromData=!0,this.deleted=!1,this.height>this._cgl.maxTexSize||this.width>this._cgl.maxTexSize){const e=CGL.Texture.getTempTexture(this._cgl);return this.width=e.width,this.height=e.height,this.tex=e.tex,void this._log.error("[cgl_texture] texture size to big!!!",this.width,this.height,this._cgl.maxTexSize)}this.flip&&this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_FLIP_Y_WEBGL,this.flip),this._cgl.gl.bindTexture(this.texTarget,this.tex),this.textureType==s.TYPE_FLOAT?this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA32F,t,n,0,this._cgl.gl.RGBA,this._cgl.gl.FLOAT,e):this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,t,n,0,this._cgl.gl.RGBA,this._cgl.gl.UNSIGNED_BYTE,e),this._setFilter(),this.updateMipMap(),this.flip&&this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_FLIP_Y_WEBGL,!1),this._cgl.gl.bindTexture(this.texTarget,null)},s.prototype.updateMipMap=function(){2!=this._cgl.glVersion&&!this.isPowerOfTwo()||this.filter!=s.FILTER_MIPMAP||(this._cgl.gl.generateMipmap(this.texTarget),this._cgl.profileData.profileGenMipMap++)},s.prototype.initTexture=function(e,t){if(this._cgl.printError("before initTexture"),this._cgl.checkFrameStarted("texture inittexture"),this._fromData=!1,this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.unpackAlpha),e.width&&(this.width=e.width),e.height&&(this.height=e.height),t&&(this.filter=t),e.height>this._cgl.maxTexSize||e.width>this._cgl.maxTexSize){const t=CGL.Texture.getTempTexture(this._cgl);return this.width=t.width,this.height=t.height,this.tex=t.tex,void this._log.error("[cgl_texture] texture size to big!!!",e.width,e.height,this._cgl.maxTexSize)}this._cgl.gl.bindTexture(this.texTarget,this.tex),this.deleted=!1,this.flipped=!this.flip,this.flipped&&this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_FLIP_Y_WEBGL,this.flipped),this._cgl.gl.texImage2D(this.texTarget,0,this._cgl.gl.RGBA,this._cgl.gl.RGBA,this._cgl.gl.UNSIGNED_BYTE,e),this._setFilter(),this.updateMipMap(),this._cgl.gl.bindTexture(this.texTarget,null),this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.flipped&&this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_FLIP_Y_WEBGL,!1),this.getInfoOneLine(),this._cgl.printError("initTexture")},s.prototype.delete=function(){this.loading||(this.deleted=!0,this.width=0,this.height=0,this._cgl.profileData.profileTextureDelete++,this._cgl.gl.deleteTexture(this.tex),this.image=null,this.tex=null)},s.prototype.isPowerOfTwo=function(){return s.isPowerOfTwo(this.width)&&s.isPowerOfTwo(this.height)},s.prototype.printInfo=function(){console.log(this.getInfo())},s.prototype.getInfoReadable=function(){const t=this.getInfo();let n="";t.name=t.name.substr(0,t.name.indexOf("?rnd="));for(const e in t)n+="* "+e+":  **"+t[e]+"**\n";return n},s.prototype.getInfoOneLine=function(){let e=this.width+" x "+this.height;return this.textureType===CGL.Texture.TYPE_FLOAT?e+=" 32bit":e+=" 8bit",this.filter===CGL.Texture.FILTER_NEAREST&&(e+=" nearest"),this.filter===CGL.Texture.FILTER_LINEAR&&(e+=" linear"),this.filter===CGL.Texture.FILTER_MIPMAP&&(e+=" mipmap"),this.wrap===CGL.Texture.WRAP_CLAMP_TO_EDGE&&(e+=" clamp"),this.wrap===CGL.Texture.WRAP_REPEAT&&(e+=" repeat"),this.wrap===CGL.Texture.WRAP_MIRRORED_REPEAT&&(e+=" repeatmir"),this.shortInfoString=e,e},s.prototype.getInfo=function(){const e={};e.name=this.name,e["power of two"]=this.isPowerOfTwo(),e.size=this.width+" x "+this.height;let t=this.texTarget;return this.texTarget==this._cgl.gl.TEXTURE_2D&&(t="TEXTURE_2D"),e.target=t,e.unpackAlpha=this.unpackAlpha,this.textureType==s.TYPE_FLOAT?e.textureType="TYPE_FLOAT":this.textureType==s.TYPE_DEPTH?e.textureType="TYPE_DEPTH":this.textureType==s.TYPE_DEFAULT?e.textureType="TYPE_DEFAULT":e.textureType="UNKNOWN",this.wrap==s.WRAP_CLAMP_TO_EDGE?e.wrap="CLAMP_TO_EDGE":this.wrap==s.WRAP_REPEAT?e.wrap="WRAP_REPEAT":this.wrap==s.WRAP_MIRRORED_REPEAT?e.wrap="WRAP_MIRRORED_REPEAT":e.wrap="UNKNOWN",this.filter==s.FILTER_NEAREST?e.filter="FILTER_NEAREST":this.filter==s.FILTER_LINEAR?e.filter="FILTER_LINEAR":this.filter==s.FILTER_MIPMAP?e.filter="FILTER_MIPMAP":e.filter="UNKNOWN",e},s.prototype._setFilter=function(){if(this._cgl.printError("before _setFilter"),this._fromData||this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.unpackAlpha),this.shadowMap&&(this._cgl.gl.texParameteri(this._cgl.gl.TEXTURE_2D,this._cgl.gl.TEXTURE_COMPARE_MODE,this._cgl.gl.COMPARE_REF_TO_TEXTURE),this._cgl.gl.texParameteri(this._cgl.gl.TEXTURE_2D,this._cgl.gl.TEXTURE_COMPARE_FUNC,this._cgl.gl.LEQUAL)),this.textureType==s.TYPE_FLOAT&&this.filter==s.FILTER_MIPMAP&&(this.filter=s.FILTER_LINEAR,this._log.stack("texture: HDR and mipmap filtering at the same time is not possible")),1!=this._cgl.glVersion||this.isPowerOfTwo()){if(this.wrap==s.WRAP_CLAMP_TO_EDGE?(this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.CLAMP_TO_EDGE),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.CLAMP_TO_EDGE)):this.wrap==s.WRAP_REPEAT?(this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.REPEAT),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.REPEAT)):this.wrap==s.WRAP_MIRRORED_REPEAT&&(this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.MIRRORED_REPEAT),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.MIRRORED_REPEAT)),this.filter==s.FILTER_NEAREST)this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.NEAREST),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.NEAREST);else if(this.filter==s.FILTER_LINEAR)this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.LINEAR),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.LINEAR);else{if(this.filter!=s.FILTER_MIPMAP)throw this._log.log("unknown texture filter!",this.filter),new Error("unknown texture filter!"+this.filter);this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.LINEAR),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.LINEAR_MIPMAP_LINEAR)}if(this.anisotropic){const t=this._cgl.gl.getExtension("EXT_texture_filter_anisotropic");if(t){const e=this._cgl.gl.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this._cgl.gl.texParameterf(this._cgl.gl.TEXTURE_2D,t.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(e,this.anisotropic))}}}else this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.NEAREST),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.NEAREST),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.CLAMP_TO_EDGE),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.CLAMP_TO_EDGE),this.filter=s.FILTER_NEAREST,this.wrap=s.WRAP_CLAMP_TO_EDGE;this.getInfoOneLine(),this._cgl.printError("_setFilter")},s.load=function(t,n,a,e){if(!n)return a({error:!0});let r=null;t.patch.loading.existByName(n)||(r=t.patch.loading.start("texture",n));const o=new s(t);return o.name=n,t.patch.isEditorMode()&&gui.jobs().start({id:"loadtexture"+r,title:"loading texture "+CABLES.basename(n)}),o.image=new Image,o.image.crossOrigin="anonymous",o.loading=!0,e&&e.hasOwnProperty("filter")&&(o.filter=e.filter),e&&e.hasOwnProperty("flip")&&(o.flip=e.flip),e&&e.hasOwnProperty("wrap")&&(o.wrap=e.wrap),e&&e.hasOwnProperty("anisotropic")&&(o.anisotropic=e.anisotropic),e&&e.hasOwnProperty("unpackAlpha")&&(o.unpackAlpha=e.unpackAlpha),o.image.onabort=o.image.onerror=e=>{console.warn("[cgl.texture.load] error loading texture",n,e),o.loading=!1,r&&t.patch.loading.finished(r);a&&a({error:!0},o),t.patch.isEditorMode()&&gui.jobs().finish("loadtexture"+r)},o.image.onload=function(e){t.addNextFrameOnceCallback(()=>{o.initTexture(o.image),r&&t.patch.loading.finished(r),o.loading=!1,t.patch.isEditorMode()&&gui.jobs().finish("loadtexture"+r),a&&a(null,o)})},o.image.src=n,o},s.getTempTexture=function(e){return e||console.error("[getTempTexture] no cgl!"),e.tempTexture||(e.tempTexture=s.getTemporaryTexture(e,256,s.FILTER_LINEAR,s.REPEAT)),e.tempTexture},s.getEmptyTexture=function(e,t){if(t)return s.getEmptyTextureFloat(e);if(e||console.error("[getEmptyTexture] no cgl!"),e.tempTextureEmpty)return e.tempTextureEmpty;e.tempTextureEmpty=new s(e,{name:"emptyTexture"});const n=new Uint8Array(256).fill(0);for(let e=0;e<256;e+=4)n[e+3]=0;return e.tempTextureEmpty.initFromData(n,8,8,s.FILTER_NEAREST,s.WRAP_REPEAT),e.tempTextureEmpty},s.getEmptyTextureFloat=function(e){if(e||console.error("[getEmptyTextureFloat] no cgl!"),e.tempTextureEmptyFloat)return e.tempTextureEmptyFloat;e.tempTextureEmptyFloat=new s(e,{name:"emptyTexture",isFloatingPointTexture:!0});const t=new Float32Array(256).fill(1);for(let e=0;e<256;e+=4)t[e+3]=0;return e.tempTextureEmptyFloat.initFromData(t,8,8,s.FILTER_NEAREST,s.WRAP_REPEAT),e.tempTextureEmptyFloat},s.getRandomTexture=function(e){if(e||console.error("[getRandomTexture] no cgl!"),e.randomTexture)return e.randomTexture;const t=new Uint8Array(262144);for(let e=0;e<65536;e++)t[4*e+0]=255*Math.random(),t[4*e+1]=255*Math.random(),t[4*e+2]=255*Math.random(),t[4*e+3]=255;return e.randomTexture=new s(e),e.randomTexture.initFromData(t,256,256,s.FILTER_NEAREST,s.WRAP_REPEAT),e.randomTexture},s.getBlackTexture=function(e){if(e||this._log.error("[getBlackTexture] no cgl!"),e.blackTexture)return e.blackTexture;const t=new Uint8Array(256);for(let e=0;e<64;e++)t[4*e+0]=t[4*e+1]=t[4*e+2]=0,t[4*e+3]=255;return e.blackTexture=new s(e),e.blackTexture.initFromData(t,8,8,s.FILTER_NEAREST,s.WRAP_REPEAT),e.blackTexture},s.getEmptyCubemapTexture=function(t){const n=[t.gl.TEXTURE_CUBE_MAP_POSITIVE_X,t.gl.TEXTURE_CUBE_MAP_NEGATIVE_X,t.gl.TEXTURE_CUBE_MAP_POSITIVE_Y,t.gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.gl.TEXTURE_CUBE_MAP_POSITIVE_Z,t.gl.TEXTURE_CUBE_MAP_NEGATIVE_Z],e=t.gl.createTexture(),a=t.gl.TEXTURE_CUBE_MAP,r=s.FILTER_NEAREST,o=s.WRAP_CLAMP_TO_EDGE;t.profileData.profileTextureNew++,t.gl.bindTexture(a,e),t.profileData.profileTextureResize++;for(let e=0;e<6;e+=1){const r=new Uint8Array(256);t.gl.texImage2D(n[e],0,t.gl.RGBA,8,8,0,t.gl.RGBA,t.gl.UNSIGNED_BYTE,r),t.gl.texParameteri(a,t.gl.TEXTURE_MAG_FILTER,t.gl.NEAREST),t.gl.texParameteri(a,t.gl.TEXTURE_MIN_FILTER,t.gl.NEAREST),t.gl.texParameteri(a,t.gl.TEXTURE_WRAP_S,t.gl.CLAMP_TO_EDGE),t.gl.texParameteri(a,t.gl.TEXTURE_WRAP_T,t.gl.CLAMP_TO_EDGE)}return t.gl.bindTexture(a,null),{id:CABLES.uuid(),tex:e,cubemap:e,width:8,height:8,filter:r,wrap:o,unpackAlpha:!0,flip:!0,_fromData:!0,name:"emptyCubemapTexture",anisotropic:0}},s.getTempGradientTexture=function(e){if(e||console.error("[getTempGradientTexture] no cgl!"),e.tempTextureGradient)return e.tempTextureGradient;const t=new s(e),n=new Uint8Array(262144);for(let t=0;t<256;t++)for(let e=0;e<256;e++)n[4*(e+256*t)+0]=n[4*(e+256*t)+1]=n[4*(e+256*t)+2]=255-t,n[4*(e+256*t)+3]=255;return t.initFromData(n,256,256,s.FILTER_NEAREST,s.WRAP_REPEAT),e.tempTextureGradient=t,t},s.getTemporaryTexture=function(e,n,t,a){const r=new s(e),o=[];for(let t=0;t<n;t++)for(let e=0;e<n;e++)(e+t)%64<32?(o.push(200+t/n*25+e/n*25),o.push(200+t/n*25+e/n*25),o.push(200+t/n*25+e/n*25)):(o.push(40+t/n*25+e/n*25),o.push(40+t/n*25+e/n*25),o.push(40+t/n*25+e/n*25)),o.push(255);const i=new Uint8Array(o);return r.initFromData(i,n,n,t,a),r},s.createFromImage=function(e,t,n){const a=new s(e,n=n||{});return a.flip=!1,a.image=t,a.width=t.width,a.height=t.height,a.initTexture(t,n.filter),a},s.fromImage=function(e,t,n,a){console.error("deprecated texture from image...");const r=new s(e);return r.flip=!1,n&&(r.filter=n),a&&(r.wrap=a),r.image=t,r.initTexture(t),r},s.isPowerOfTwo=function(e){return 1==e||2==e||4==e||8==e||16==e||32==e||64==e||128==e||256==e||512==e||1024==e||2048==e||4096==e||8192==e||16384==e},s.FILTER_NEAREST=0,s.FILTER_LINEAR=1,s.FILTER_MIPMAP=2,s.WRAP_REPEAT=0,s.WRAP_MIRRORED_REPEAT=1,s.WRAP_CLAMP_TO_EDGE=2,s.TYPE_DEFAULT=0,s.TYPE_DEPTH=1,s.TYPE_FLOAT=2,s.PFORMATSTR_RGBA32F="RGBA 32bit float",s.PFORMATSTR_RGBA8UB="RGBA 8bit ubyte",s.PIXELFORMATS=[s.PFORMATSTR_RGBA8UB,s.PFORMATSTR_RGBA32F];class l{constructor(e,t){this.id=CABLES.uuid(),this.name=t.name||"unknown cubemap texture",this._cgl=e,this._cubemapFaces=[this._cgl.gl.TEXTURE_CUBE_MAP_POSITIVE_X,this._cgl.gl.TEXTURE_CUBE_MAP_NEGATIVE_X,this._cgl.gl.TEXTURE_CUBE_MAP_POSITIVE_Y,this._cgl.gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,this._cgl.gl.TEXTURE_CUBE_MAP_POSITIVE_Z,this._cgl.gl.TEXTURE_CUBE_MAP_NEGATIVE_Z],this.tex=this._cgl.gl.createTexture(),this.cubemap=this.tex,this.texTarget=this._cgl.gl.TEXTURE_CUBE_MAP,this.width=t.width||8,this.width=t.width||8,this.filter=t.filter||CGL.Texture.FILTER_NEAREST,this.wrap=t.wrap||CGL.Texture.WRAP_CLAMP_TO_EDGE,this.unpackAlpha=t.unpackAlpha||!0,this.flip=t.flip||!0,this._cgl.profileData.profileTextureNew++,this.setSize(t.width,t.height)}setSize(e,t){if((e!=e||e<=0||!e)&&(e=8),(t!=t||t<=0||!t)&&(t=8),(e>this._cgl.maxTexSize||t>this._cgl.maxTexSize)&&console.error("texture size too big! "+e+"x"+t+" / max: "+this._cgl.maxTexSize),e=Math.min(e,this._cgl.maxTexSize),t=Math.min(t,this._cgl.maxTexSize),e=Math.floor(e),t=Math.floor(t),this.width!=e||this.height!=t){this.width=e,this.height=t,this._cgl.gl.bindTexture(this.texTarget,this.tex),this._cgl.profileData.profileTextureResize++,this._setFilter();for(let e=0;e<6;e++)this._cgl.glVersion,this._cgl.gl.texImage2D(this._cubemapFaces[e],0,this._cgl.gl.RGBA,this.width,this.height,0,this._cgl.gl.RGBA,this._cgl.gl.UNSIGNED_BYTE,null);this.updateMipMap(),this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_CUBE_MAP,null)}}_setFilter(){if(this._cgl.gl.pixelStorei(this._cgl.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.unpackAlpha),this.textureType==CGL.Texture.TYPE_FLOAT&&this.filter==CGL.Texture.FILTER_MIPMAP&&(console.log("texture: HDR and mipmap filtering at the same time is not possible"),this.filter=CGL.Texture.FILTER_LINEAR),1!=this._cgl.glVersion||s.isPowerOfTwo()){if(this.wrap==CGL.Texture.WRAP_CLAMP_TO_EDGE)this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.CLAMP_TO_EDGE),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.CLAMP_TO_EDGE);else if(this.wrap==CGL.Texture.WRAP_REPEAT)this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.REPEAT),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.REPEAT);else{if(this.wrap!=CGL.Texture.WRAP_MIRRORED_REPEAT)throw new Error("[CubemapTexture] unknown texture filter!"+this.filter);this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.MIRRORED_REPEAT),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.MIRRORED_REPEAT)}if(this.filter==CGL.Texture.FILTER_NEAREST)this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.NEAREST),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.NEAREST);else if(this.filter==CGL.Texture.FILTER_LINEAR)this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.LINEAR),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.LINEAR);else{if(this.filter!=CGL.Texture.FILTER_MIPMAP)throw new Error("[CubemapTexture] unknown texture filter!"+this.filter);this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.LINEAR),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.LINEAR_MIPMAP_LINEAR)}}else this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MAG_FILTER,this._cgl.gl.NEAREST),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_MIN_FILTER,this._cgl.gl.NEAREST),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_S,this._cgl.gl.CLAMP_TO_EDGE),this._cgl.gl.texParameteri(this.texTarget,this._cgl.gl.TEXTURE_WRAP_T,this._cgl.gl.CLAMP_TO_EDGE),this.filter=CGL.Texture.FILTER_NEAREST,this.wrap=CGL.Texture.WRAP_CLAMP_TO_EDGE}updateMipMap(){2!=this._cgl.glVersion&&!s.isPowerOfTwo()||this.filter!=CGL.Texture.FILTER_MIPMAP||(this._cgl.gl.generateMipmap(this.texTarget),this._cgl.profileData.profileGenMipMap++)}}CGL.CubemapFramebuffer=class{constructor(e,t,n,a){this._cgl=e,this.width=t||8,this.height=n||8,this._cubemapProperties=[{face:this._cgl.gl.TEXTURE_CUBE_MAP_POSITIVE_X,lookAt:vec3.fromValues(1,0,0),up:vec3.fromValues(0,-1,0)},{face:this._cgl.gl.TEXTURE_CUBE_MAP_NEGATIVE_X,lookAt:vec3.fromValues(-1,0,0),up:vec3.fromValues(0,-1,0)},{face:this._cgl.gl.TEXTURE_CUBE_MAP_POSITIVE_Y,lookAt:vec3.fromValues(0,1,0),up:vec3.fromValues(0,0,1)},{face:this._cgl.gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,lookAt:vec3.fromValues(0,-1,0),up:vec3.fromValues(0,0,-1)},{face:this._cgl.gl.TEXTURE_CUBE_MAP_POSITIVE_Z,lookAt:vec3.fromValues(0,0,1),up:vec3.fromValues(0,-1,0)},{face:this._cgl.gl.TEXTURE_CUBE_MAP_NEGATIVE_Z,lookAt:vec3.fromValues(0,0,-1),up:vec3.fromValues(0,-1,0)}],this._lookAtTemp=vec3.fromValues(0,0,0),this.camPos=vec3.fromValues(0,0,0),this._modelMatrix=mat4.create(),this._viewMatrix=mat4.create(),this._projectionMatrix=mat4.perspective(mat4.create(),90*CGL.DEG2RAD,1,.1,1e3),this._depthRenderbuffer=null,this._framebuffer=null,this._depthbuffer=null,this._textureFrameBuffer=null,this._textureDepth=null,this._options=a||{},this.name=this._options.name||"unknown cubemapframebuffer",this._options.hasOwnProperty("numRenderBuffers")||(this._options.numRenderBuffers=1),this._options.hasOwnProperty("depth")||(this._options.depth=!0),this._options.hasOwnProperty("clear")||(this._options.clear=!0),this._options.hasOwnProperty("multisampling")||(this._options.multisampling=!1,this._options.multisamplingSamples=0),this._options.multisamplingSamples&&(this._cgl.glSlowRenderer&&(this._options.multisamplingSamples=0),this._cgl.gl.MAX_SAMPLES?this._options.multisamplingSamples=Math.min(this._cgl.gl.getParameter(this._cgl.gl.MAX_SAMPLES),this._options.multisamplingSamples):this._options.multisamplingSamples=0),this._options.hasOwnProperty("filter")||(this._options.filter=CGL.Texture.FILTER_LINEAR),this._options.hasOwnProperty("wrap")||(this._options.wrap=CGL.Texture.WRAP_CLAMP_TO_EDGE),this.texture=new l(this._cgl,{width:this.width,height:this.height,filter:this._options.filter,wrap:this._options.wrap,name:this.name+" cubemaptexture"}),this.initializeRenderbuffers(),this.setSize(this.width,this.height)}initializeRenderbuffers(){this._framebuffer=this._cgl.gl.createFramebuffer(),this._depthbuffer=this._cgl.gl.createRenderbuffer(),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._framebuffer),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,this._depthbuffer),this._cgl.gl.renderbufferStorage(this._cgl.gl.RENDERBUFFER,this._cgl.gl.DEPTH_COMPONENT16,this.width,this.height),this._cgl.gl.framebufferRenderbuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.DEPTH_ATTACHMENT,this._cgl.gl.RENDERBUFFER,this._depthbuffer),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,null),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,null)}getWidth(){return this.width}getHeight(){return this.height}getGlFrameBuffer(){return this._framebuffer}getDepthRenderBuffer(){return this._depthRenderbuffer}getTextureColor(){return this.texture}getTextureDepth(){return this._textureDepth}dispose(){this.texture=null,this._cgl.gl.deleteRenderbuffer(this._depthRenderbuffer),this._cgl.gl.deleteFramebuffer(this._framebuffer),this._cgl.gl.deleteFramebuffer(this._textureFrameBuffer)}delete(){this.dispose()}setSize(e,t){this._cgl.printError("before cubemap setsize"),this.width=Math.floor(e),this.height=Math.floor(t),this.width=Math.min(this.width,this._cgl.maxTexSize),this.height=Math.min(this.height,this._cgl.maxTexSize),this._cgl.profileData.profileFrameBuffercreate++,this._framebuffer=this._cgl.gl.createFramebuffer(),this._depthbuffer=this._cgl.gl.createRenderbuffer(),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._framebuffer),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,this._depthbuffer),this._cgl.gl.renderbufferStorage(this._cgl.gl.RENDERBUFFER,this._cgl.gl.DEPTH_COMPONENT16,this.width,this.height),this._cgl.gl.framebufferRenderbuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.DEPTH_ATTACHMENT,this._cgl.gl.RENDERBUFFER,this._depthbuffer),this.texture.setSize(this.width,this.height),this._cgl.gl.isFramebuffer(this._framebuffer)||console.warn("invalid framebuffer...");const n=this._cgl.gl.checkFramebufferStatus(this._cgl.gl.FRAMEBUFFER);this.checkErrorsByStatus(n),this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_CUBE_MAP,null),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,null),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,null),this._cgl.printError("cubemap setsize")}checkErrorsByStatus(e){switch(e){case this._cgl.gl.FRAMEBUFFER_COMPLETE:break;case this._cgl.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw console.error("FRAMEBUFFER_INCOMPLETE_ATTACHMENT...",this.width,this.height,this.texture.tex,this._depthBuffer),new Error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");case this._cgl.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw console.error("FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT"),new Error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");case this._cgl.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw console.error("FRAMEBUFFER_INCOMPLETE_DIMENSIONS"),new Error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");case this._cgl.gl.FRAMEBUFFER_UNSUPPORTED:throw console.error("FRAMEBUFFER_UNSUPPORTED"),new Error("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");case 36059:console.error("Incomplete: FRAMEBUFFER_INCOMPLETE_DRAW_BUFFER from ext. Or Safari/iOS undefined behaviour.");break;default:throw console.error("incomplete framebuffer",e),console.log(this),new Error("Incomplete framebuffer: "+e)}}setFilter(e){this.texture.filter=e,this.texture.setSize(this.width,this.height)}setCamPos(e){this.camPos=e||this.camPos}setMatrices(e,t,n){this._modelMatrix=e||this._modelMatrix,this._viewMatrix=t||this._viewMatrix,this._projectionMatrix=n||this._projectionMatrix}renderStart(){this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_CUBE_MAP,this.texture.tex),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._framebuffer),this._cgl.gl.bindRenderbuffer(this._cgl.gl.RENDERBUFFER,this._depthbuffer),this._cgl.gl.viewport(0,0,this.width,this.height),this._cgl.pushGlFrameBuffer(this._framebuffer),this._cgl.pushFrameBuffer(this)}renderStartCubemapFace(e){this._cgl.pushModelMatrix(),this._cgl.pushViewMatrix(),this._cgl.pushPMatrix(),this._cgl.gl.framebufferTexture2D(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.COLOR_ATTACHMENT0,this._cubemapProperties[e].face,this.texture.tex,0),this._cgl.gl.framebufferRenderbuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.gl.DEPTH_ATTACHMENT,this._cgl.gl.RENDERBUFFER,this._depthbuffer),this._options.clear&&(this._cgl.gl.clearColor(1,1,1,1),this._cgl.gl.clear(this._cgl.gl.COLOR_BUFFER_BIT|this._cgl.gl.DEPTH_BUFFER_BIT)),this.setMatricesCubemapFace(e)}setMatricesCubemapFace(e){mat4.copy(this._cgl.mMatrix,this._modelMatrix),vec3.add(this._lookAtTemp,this.camPos,this._cubemapProperties[e].lookAt),mat4.lookAt(this._cgl.vMatrix,this.camPos,this._lookAtTemp,this._cubemapProperties[e].up),mat4.copy(this._cgl.pMatrix,this._projectionMatrix)}renderEndCubemapFace(){this._cgl.popPMatrix(),this._cgl.popModelMatrix(),this._cgl.popViewMatrix()}renderEnd(){this._cgl.profileData.profileFramebuffer++,1!==this._cgl.glVersion&&(this._cgl.gl.bindFramebuffer(this._cgl.gl.READ_FRAMEBUFFER,this._framebuffer),this._cgl.gl.bindFramebuffer(this._cgl.gl.DRAW_FRAMEBUFFER,this._textureFrameBuffer)),this._cgl.gl.bindFramebuffer(this._cgl.gl.FRAMEBUFFER,this._cgl.popGlFrameBuffer()),this._cgl.popFrameBuffer(),this._cgl.resetViewPort(),this.updateMipMap()}updateMipMap(){this.texture&&(this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_CUBE_MAP,this.texture.tex),this.texture.updateMipMap(),this._cgl.gl.bindTexture(this._cgl.gl.TEXTURE_CUBE_MAP,null))}}}]).Cubemapframebuffer;